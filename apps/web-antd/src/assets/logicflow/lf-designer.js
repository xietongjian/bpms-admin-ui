var qC = Object.defineProperty;
var ZC = (e, t, n) => t in e ? qC(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n;
var Sh = (e, t, n) => ZC(e, typeof t != "symbol" ? t + "" : t, n);
import { ref as le, reactive as Or, inject as ur, computed as F, getCurrentInstance as Iu, cloneVNode as mf, defineComponent as fe, watch as wt, onMounted as fr, onUnmounted as JC, openBlock as X, createElementBlock as he, normalizeClass as ze, renderSlot as mt, normalizeStyle as Jt, createElementVNode as Y, resolveComponent as Ie, createBlock as ot, createCommentVNode as vt, toRef as Gp, toRefs as Qt, createVNode as A, mergeProps as dn, createTextVNode as Lt, nextTick as Hn, provide as ja, Fragment as Un, createSlots as QC, withCtx as Z, withModifiers as Cs, onUpdated as _f, onBeforeUnmount as Ys, readonly as eO, onDeactivated as tO, Teleport as tw, Transition as pu, withDirectives as $r, vShow as kr, resolveDynamicComponent as ms, toDisplayString as Mt, renderList as ca, TransitionGroup as nO, watchEffect as sd, isVNode as rO, render as Em, h as Xp, unref as oe, isRef as Up, shallowRef as ds, createStaticVNode as iO } from "vue";
import { useI18n as bf } from "vue-i18n";
const nw = (e) => Object.prototype.toString.call(e);
function oO(e) {
  return nw(e).slice(8, -1).toLowerCase();
}
const aO = (e) => e === null, wf = (e) => typeof e > "u", es = Array.isArray || ((e) => oO(e) === "array"), rw = (e) => nw(e) === "[object Object]";
function xo(e) {
  return wf(e) || aO(e);
}
function Sm(e, t) {
  return Array.from({ length: e }, (n, r) => t ? t(r) : r);
}
var sO = Object.defineProperty, lO = (e, t, n) => t in e ? sO(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, uO = (e, t, n) => lO(e, t + "", n);
let cO = class {
  constructor() {
    uO(this, "_events"), this._events = {};
  }
  _addListener(t, n, r, i) {
    if (typeof n != "function")
      throw new TypeError("fn must be a function");
    n.context = r, n.once = !!i;
    const o = this._events[t];
    return xo(o) ? this._events[t] = n : typeof o == "function" ? this._events[t] = [o, n] : es(o) && o.push(n), this;
  }
  addListener(t, n, r, i) {
    if (es(t)) {
      for (const o of t)
        this._addListener(o, n, r, i);
      return this;
    }
    return this._addListener(t, n, r, i);
  }
  on(t, n, r) {
    return this.addListener(t, n, r);
  }
  once(t, n, r) {
    return this._addListener(t, n, r, !0);
  }
  emit(t, ...n) {
    if (xo(t))
      throw new Error("emit must receive at lease one argument");
    const r = this._events[t];
    return xo(r) ? !1 : (typeof r == "function" ? (r.call(r.context || null, ...n), r.once && this.removeListener(t, r)) : es(r) && r.forEach((i) => {
      i.call(i.context || null, ...n), i.once && this.removeListener(t, i);
    }), this);
  }
  _removeListener(t, n) {
    if (xo(this._events))
      return this;
    if (!n)
      return Reflect.deleteProperty(this, t), this;
    if (typeof n != "function")
      throw new Error("fn must be a function");
    const r = this._events[t];
    if (!r)
      return this;
    if (typeof r == "function")
      r === n && delete this._events[t];
    else {
      const i = r.findIndex((o) => o === n);
      if (i === -1)
        return this;
      i === 0 ? r.shift() : r.splice(i, 1), r.length === 1 && (this._events[t] = r[0]);
    }
    return this;
  }
  removeListener(t, n) {
    if (es(t)) {
      for (const r of t)
        this._removeListener(r, n);
      return this;
    }
    return this._removeListener(t, n);
  }
  removeAllListeners(t) {
    if (xo(this._events))
      return this;
    if (xo(t))
      return this._events = /* @__PURE__ */ Object.create(null);
    const n = this._events[t];
    return xo(n) || (Object.keys(this._events).length === 1 ? this._events = /* @__PURE__ */ Object.create(null) : delete this._events[t]), this;
  }
  hasListener(t, n) {
    const r = this._events[t];
    return r && es(r) && r.includes(n);
  }
  listeners(t) {
    if (!this._events[t])
      return;
    const n = this._events[t];
    return es(n) ? n : [n];
  }
  listenersCount(t) {
    const n = this._events[t];
    return xo(n) ? 0 : typeof n == "function" ? 1 : n.length;
  }
  eventNames() {
    return Reflect.ownKeys(this._events);
  }
};
new cO();
const dO = Math.max, fO = Math.min;
function hO(e, t, n) {
  let r, i, o, a, s, l, u = 0, c = !1, d = !1, f = !0;
  t = t || 0, rw(n) && (c = !!n.leading, d = "maxWait" in n, o = d ? dO(n.maxWait || 0, t) : 0, f = "trailing" in n ? !!n.trailing : f);
  function h(_) {
    const b = r, T = i;
    return r = i = void 0, u = _, a = e.apply(T, b), a;
  }
  function p(_) {
    return u = _, s = setTimeout(y, t), c ? h(_) : a;
  }
  function v(_) {
    const b = _ - l, T = _ - u, R = t - b;
    return d ? fO(R, o - T) : R;
  }
  function g(_) {
    const b = _ - l, T = _ - u;
    return l === void 0 || b >= t || b < 0 || d && T >= o;
  }
  function y() {
    const _ = Date.now();
    if (g(_))
      return m(_);
    s = setTimeout(y, v(_));
  }
  function m(_) {
    return s = void 0, f && r ? h(_) : (r = i = void 0, a);
  }
  function E() {
    s !== void 0 && clearTimeout(s), u = 0, r = l = i = s = void 0;
  }
  function w() {
    return s === void 0 ? a : m(Date.now());
  }
  function S(..._) {
    const b = Date.now(), T = g(b);
    if (r = _, i = this, l = b, T) {
      if (s === void 0)
        return p(l);
      if (d)
        return s = setTimeout(y, t), h(l);
    }
    return s === void 0 && (s = setTimeout(y, t)), a;
  }
  return S.cancel = E, S.flush = w, S;
}
function pO(e, t, n) {
  let r = !0, i = !0;
  return rw(n) && (r = "leading" in n ? !!n.leading : r, i = "trailing" in n ? !!n.trailing : i), hO(e, t, {
    leading: r,
    maxWait: t,
    trailing: i
  });
}
const iw = "__business-designer__";
function zQ(e) {
  const t = window.localStorage.getItem(`${iw}${e}`);
  return t ? JSON.parse(t) : null;
}
function ow(e, t) {
  window.localStorage.setItem(`${iw}${e}`, JSON.stringify(wf(t) ? "" : t));
}
const za = Object.prototype.toString;
function zr(e) {
  return za.call(e) === "[object Array]";
}
function Ks(e) {
  return za.call(e) === "[object Null]";
}
function vu(e) {
  return za.call(e) === "[object Boolean]";
}
function Fn(e) {
  return za.call(e) === "[object Object]";
}
const Cm = (e) => za.call(e) === "[object Promise]";
function Go(e) {
  return za.call(e) === "[object String]";
}
function At(e) {
  return za.call(e) === "[object Number]" && e === e;
}
function wr(e) {
  return e === void 0;
}
function Nn(e) {
  return typeof e == "function";
}
function vO(e) {
  return Fn(e) && Object.keys(e).length === 0;
}
const aw = (e) => (e == null ? void 0 : e.$) !== void 0, fo = Symbol("ArcoConfigProvider"), sc = {
  formatYear: "YYYY 年",
  formatMonth: "YYYY 年 MM 月",
  today: "今天",
  view: {
    month: "月",
    year: "年",
    week: "周",
    day: "日"
  },
  month: {
    long: {
      January: "一月",
      February: "二月",
      March: "三月",
      April: "四月",
      May: "五月",
      June: "六月",
      July: "七月",
      August: "八月",
      September: "九月",
      October: "十月",
      November: "十一月",
      December: "十二月"
    },
    short: {
      January: "一月",
      February: "二月",
      March: "三月",
      April: "四月",
      May: "五月",
      June: "六月",
      July: "七月",
      August: "八月",
      September: "九月",
      October: "十月",
      November: "十一月",
      December: "十二月"
    }
  },
  week: {
    long: {
      self: "周",
      monday: "周一",
      tuesday: "周二",
      wednesday: "周三",
      thursday: "周四",
      friday: "周五",
      saturday: "周六",
      sunday: "周日"
    },
    short: {
      self: "周",
      monday: "一",
      tuesday: "二",
      wednesday: "三",
      thursday: "四",
      friday: "五",
      saturday: "六",
      sunday: "日"
    }
  }
}, gO = {
  locale: "zh-CN",
  empty: {
    description: "暂无数据"
  },
  drawer: {
    okText: "确定",
    cancelText: "取消"
  },
  popconfirm: {
    okText: "确定",
    cancelText: "取消"
  },
  modal: {
    okText: "确定",
    cancelText: "取消"
  },
  pagination: {
    goto: "前往",
    page: "页",
    countPerPage: "条/页",
    total: "共 {0} 条"
  },
  table: {
    okText: "确定",
    resetText: "重置"
  },
  upload: {
    start: "开始",
    cancel: "取消",
    delete: "删除",
    retry: "点击重试",
    buttonText: "点击上传",
    preview: "预览",
    drag: "点击或拖拽文件到此处上传",
    dragHover: "释放文件并开始上传",
    error: "上传失败"
  },
  calendar: sc,
  datePicker: {
    view: sc.view,
    month: sc.month,
    week: sc.week,
    placeholder: {
      date: "请选择日期",
      week: "请选择周",
      month: "请选择月份",
      year: "请选择年份",
      quarter: "请选择季度",
      time: "请选择时间"
    },
    rangePlaceholder: {
      date: ["开始日期", "结束日期"],
      week: ["开始周", "结束周"],
      month: ["开始月份", "结束月份"],
      year: ["开始年份", "结束年份"],
      quarter: ["开始季度", "结束季度"],
      time: ["开始时间", "结束时间"]
    },
    selectTime: "选择时间",
    today: "今天",
    now: "此刻",
    ok: "确定"
  },
  image: {
    loading: "加载中"
  },
  imagePreview: {
    fullScreen: "全屏",
    rotateRight: "向右旋转",
    rotateLeft: "向左旋转",
    zoomIn: "放大",
    zoomOut: "缩小",
    originalSize: "原始尺寸"
  },
  typography: {
    copied: "已复制",
    copy: "复制",
    expand: "展开",
    collapse: "折叠",
    edit: "编辑"
  },
  form: {
    validateMessages: {
      required: "#{field} 是必填项",
      type: {
        string: "#{field} 不是合法的文本类型",
        number: "#{field} 不是合法的数字类型",
        boolean: "#{field} 不是合法的布尔类型",
        array: "#{field} 不是合法的数组类型",
        object: "#{field} 不是合法的对象类型",
        url: "#{field} 不是合法的 url 地址",
        email: "#{field} 不是合法的邮箱地址",
        ip: "#{field} 不是合法的 IP 地址"
      },
      number: {
        min: "`#{value}` 小于最小值 `#{min}`",
        max: "`#{value}` 大于最大值 `#{max}`",
        equal: "`#{value}` 不等于 `#{equal}`",
        range: "`#{value}` 不在 `#{min} ~ #{max}` 范围内",
        positive: "`#{value}` 不是正数",
        negative: "`#{value}` 不是负数"
      },
      array: {
        length: "`#{field}` 个数不等于 #{length}",
        minLength: "`#{field}` 个数最少为 #{minLength}",
        maxLength: "`#{field}` 个数最多为 #{maxLength}",
        includes: "#{field} 不包含 #{includes}",
        deepEqual: "#{field} 不等于 #{deepEqual}",
        empty: "`#{field}` 不是空数组"
      },
      string: {
        minLength: "字符数最少为 #{minLength}",
        maxLength: "字符数最多为 #{maxLength}",
        length: "字符数必须是 #{length}",
        match: "`#{value}` 不符合模式 #{pattern}",
        uppercase: "`#{value}` 必须全大写",
        lowercase: "`#{value}` 必须全小写"
      },
      object: {
        deepEqual: "`#{field}` 不等于期望值",
        hasKeys: "`#{field}` 不包含必须字段",
        empty: "`#{field}` 不是对象"
      },
      boolean: {
        true: "期望是 `true`",
        false: "期望是 `false`"
      }
    }
  },
  colorPicker: {
    history: "最近使用颜色",
    preset: "系统预设颜色",
    empty: "暂无"
  }
}, yO = le("zh-CN"), mO = Or({
  "zh-CN": gO
}), Ag = () => {
  const e = ur(fo, void 0), t = F(() => {
    var i;
    return (i = e == null ? void 0 : e.locale) != null ? i : mO[yO.value];
  }), n = F(() => t.value.locale);
  return {
    i18nMessage: t,
    locale: n,
    t: (i, ...o) => {
      const a = i.split(".");
      let s = t.value;
      for (const l of a) {
        if (!s[l])
          return i;
        s = s[l];
      }
      return Go(s) && o.length > 0 ? s.replace(/{(\d+)}/g, (l, u) => {
        var c;
        return (c = o[u]) != null ? c : l;
      }) : s;
    }
  };
};
var _O = Object.defineProperty, bO = Object.defineProperties, wO = Object.getOwnPropertyDescriptors, Om = Object.getOwnPropertySymbols, xO = Object.prototype.hasOwnProperty, EO = Object.prototype.propertyIsEnumerable, Am = (e, t, n) => t in e ? _O(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, SO = (e, t) => {
  for (var n in t || (t = {}))
    xO.call(t, n) && Am(e, n, t[n]);
  if (Om)
    for (var n of Om(t))
      EO.call(t, n) && Am(e, n, t[n]);
  return e;
}, CO = (e, t) => bO(e, wO(t));
const OO = "A", AO = "arco", Yp = "$arco", Rn = (e) => {
  var t;
  return (t = e == null ? void 0 : e.componentPrefix) != null ? t : OO;
}, Ln = (e, t) => {
  var n;
  t && t.classPrefix && (e.config.globalProperties[Yp] = CO(SO({}, (n = e.config.globalProperties[Yp]) != null ? n : {}), {
    classPrefix: t.classPrefix
  }));
}, Je = (e) => {
  var t, n, r;
  const i = Iu(), o = ur(fo, void 0), a = (r = (n = o == null ? void 0 : o.prefixCls) != null ? n : (t = i == null ? void 0 : i.appContext.config.globalProperties[Yp]) == null ? void 0 : t.classPrefix) != null ? r : AO;
  return e ? `${a}-${e}` : a;
};
var sw = function() {
  if (typeof Map < "u")
    return Map;
  function e(t, n) {
    var r = -1;
    return t.some(function(i, o) {
      return i[0] === n ? (r = o, !0) : !1;
    }), r;
  }
  return (
    /** @class */
    function() {
      function t() {
        this.__entries__ = [];
      }
      return Object.defineProperty(t.prototype, "size", {
        /**
         * @returns {boolean}
         */
        get: function() {
          return this.__entries__.length;
        },
        enumerable: !0,
        configurable: !0
      }), t.prototype.get = function(n) {
        var r = e(this.__entries__, n), i = this.__entries__[r];
        return i && i[1];
      }, t.prototype.set = function(n, r) {
        var i = e(this.__entries__, n);
        ~i ? this.__entries__[i][1] = r : this.__entries__.push([n, r]);
      }, t.prototype.delete = function(n) {
        var r = this.__entries__, i = e(r, n);
        ~i && r.splice(i, 1);
      }, t.prototype.has = function(n) {
        return !!~e(this.__entries__, n);
      }, t.prototype.clear = function() {
        this.__entries__.splice(0);
      }, t.prototype.forEach = function(n, r) {
        r === void 0 && (r = null);
        for (var i = 0, o = this.__entries__; i < o.length; i++) {
          var a = o[i];
          n.call(r, a[1], a[0]);
        }
      }, t;
    }()
  );
}(), Kp = typeof window < "u" && typeof document < "u" && window.document === document, ld = function() {
  return typeof global < "u" && global.Math === Math ? global : typeof self < "u" && self.Math === Math ? self : typeof window < "u" && window.Math === Math ? window : Function("return this")();
}(), NO = function() {
  return typeof requestAnimationFrame == "function" ? requestAnimationFrame.bind(ld) : function(e) {
    return setTimeout(function() {
      return e(Date.now());
    }, 1e3 / 60);
  };
}(), MO = 2;
function TO(e, t) {
  var n = !1, r = !1, i = 0;
  function o() {
    n && (n = !1, e()), r && s();
  }
  function a() {
    NO(o);
  }
  function s() {
    var l = Date.now();
    if (n) {
      if (l - i < MO)
        return;
      r = !0;
    } else
      n = !0, r = !1, setTimeout(a, t);
    i = l;
  }
  return s;
}
var PO = 20, DO = ["top", "right", "bottom", "left", "width", "height", "size", "weight"], RO = typeof MutationObserver < "u", LO = (
  /** @class */
  function() {
    function e() {
      this.connected_ = !1, this.mutationEventsAdded_ = !1, this.mutationsObserver_ = null, this.observers_ = [], this.onTransitionEnd_ = this.onTransitionEnd_.bind(this), this.refresh = TO(this.refresh.bind(this), PO);
    }
    return e.prototype.addObserver = function(t) {
      ~this.observers_.indexOf(t) || this.observers_.push(t), this.connected_ || this.connect_();
    }, e.prototype.removeObserver = function(t) {
      var n = this.observers_, r = n.indexOf(t);
      ~r && n.splice(r, 1), !n.length && this.connected_ && this.disconnect_();
    }, e.prototype.refresh = function() {
      var t = this.updateObservers_();
      t && this.refresh();
    }, e.prototype.updateObservers_ = function() {
      var t = this.observers_.filter(function(n) {
        return n.gatherActive(), n.hasActive();
      });
      return t.forEach(function(n) {
        return n.broadcastActive();
      }), t.length > 0;
    }, e.prototype.connect_ = function() {
      !Kp || this.connected_ || (document.addEventListener("transitionend", this.onTransitionEnd_), window.addEventListener("resize", this.refresh), RO ? (this.mutationsObserver_ = new MutationObserver(this.refresh), this.mutationsObserver_.observe(document, {
        attributes: !0,
        childList: !0,
        characterData: !0,
        subtree: !0
      })) : (document.addEventListener("DOMSubtreeModified", this.refresh), this.mutationEventsAdded_ = !0), this.connected_ = !0);
    }, e.prototype.disconnect_ = function() {
      !Kp || !this.connected_ || (document.removeEventListener("transitionend", this.onTransitionEnd_), window.removeEventListener("resize", this.refresh), this.mutationsObserver_ && this.mutationsObserver_.disconnect(), this.mutationEventsAdded_ && document.removeEventListener("DOMSubtreeModified", this.refresh), this.mutationsObserver_ = null, this.mutationEventsAdded_ = !1, this.connected_ = !1);
    }, e.prototype.onTransitionEnd_ = function(t) {
      var n = t.propertyName, r = n === void 0 ? "" : n, i = DO.some(function(o) {
        return !!~r.indexOf(o);
      });
      i && this.refresh();
    }, e.getInstance = function() {
      return this.instance_ || (this.instance_ = new e()), this.instance_;
    }, e.instance_ = null, e;
  }()
), lw = function(e, t) {
  for (var n = 0, r = Object.keys(t); n < r.length; n++) {
    var i = r[n];
    Object.defineProperty(e, i, {
      value: t[i],
      enumerable: !1,
      writable: !1,
      configurable: !0
    });
  }
  return e;
}, Os = function(e) {
  var t = e && e.ownerDocument && e.ownerDocument.defaultView;
  return t || ld;
}, uw = xf(0, 0, 0, 0);
function ud(e) {
  return parseFloat(e) || 0;
}
function Nm(e) {
  for (var t = [], n = 1; n < arguments.length; n++)
    t[n - 1] = arguments[n];
  return t.reduce(function(r, i) {
    var o = e["border-" + i + "-width"];
    return r + ud(o);
  }, 0);
}
function $O(e) {
  for (var t = ["top", "right", "bottom", "left"], n = {}, r = 0, i = t; r < i.length; r++) {
    var o = i[r], a = e["padding-" + o];
    n[o] = ud(a);
  }
  return n;
}
function kO(e) {
  var t = e.getBBox();
  return xf(0, 0, t.width, t.height);
}
function IO(e) {
  var t = e.clientWidth, n = e.clientHeight;
  if (!t && !n)
    return uw;
  var r = Os(e).getComputedStyle(e), i = $O(r), o = i.left + i.right, a = i.top + i.bottom, s = ud(r.width), l = ud(r.height);
  if (r.boxSizing === "border-box" && (Math.round(s + o) !== t && (s -= Nm(r, "left", "right") + o), Math.round(l + a) !== n && (l -= Nm(r, "top", "bottom") + a)), !jO(e)) {
    var u = Math.round(s + o) - t, c = Math.round(l + a) - n;
    Math.abs(u) !== 1 && (s -= u), Math.abs(c) !== 1 && (l -= c);
  }
  return xf(i.left, i.top, s, l);
}
var BO = /* @__PURE__ */ function() {
  return typeof SVGGraphicsElement < "u" ? function(e) {
    return e instanceof Os(e).SVGGraphicsElement;
  } : function(e) {
    return e instanceof Os(e).SVGElement && typeof e.getBBox == "function";
  };
}();
function jO(e) {
  return e === Os(e).document.documentElement;
}
function zO(e) {
  return Kp ? BO(e) ? kO(e) : IO(e) : uw;
}
function FO(e) {
  var t = e.x, n = e.y, r = e.width, i = e.height, o = typeof DOMRectReadOnly < "u" ? DOMRectReadOnly : Object, a = Object.create(o.prototype);
  return lw(a, {
    x: t,
    y: n,
    width: r,
    height: i,
    top: n,
    right: t + r,
    bottom: i + n,
    left: t
  }), a;
}
function xf(e, t, n, r) {
  return { x: e, y: t, width: n, height: r };
}
var HO = (
  /** @class */
  function() {
    function e(t) {
      this.broadcastWidth = 0, this.broadcastHeight = 0, this.contentRect_ = xf(0, 0, 0, 0), this.target = t;
    }
    return e.prototype.isActive = function() {
      var t = zO(this.target);
      return this.contentRect_ = t, t.width !== this.broadcastWidth || t.height !== this.broadcastHeight;
    }, e.prototype.broadcastRect = function() {
      var t = this.contentRect_;
      return this.broadcastWidth = t.width, this.broadcastHeight = t.height, t;
    }, e;
  }()
), VO = (
  /** @class */
  /* @__PURE__ */ function() {
    function e(t, n) {
      var r = FO(n);
      lw(this, { target: t, contentRect: r });
    }
    return e;
  }()
), WO = (
  /** @class */
  function() {
    function e(t, n, r) {
      if (this.activeObservations_ = [], this.observations_ = new sw(), typeof t != "function")
        throw new TypeError("The callback provided as parameter 1 is not a function.");
      this.callback_ = t, this.controller_ = n, this.callbackCtx_ = r;
    }
    return e.prototype.observe = function(t) {
      if (!arguments.length)
        throw new TypeError("1 argument required, but only 0 present.");
      if (!(typeof Element > "u" || !(Element instanceof Object))) {
        if (!(t instanceof Os(t).Element))
          throw new TypeError('parameter 1 is not of type "Element".');
        var n = this.observations_;
        n.has(t) || (n.set(t, new HO(t)), this.controller_.addObserver(this), this.controller_.refresh());
      }
    }, e.prototype.unobserve = function(t) {
      if (!arguments.length)
        throw new TypeError("1 argument required, but only 0 present.");
      if (!(typeof Element > "u" || !(Element instanceof Object))) {
        if (!(t instanceof Os(t).Element))
          throw new TypeError('parameter 1 is not of type "Element".');
        var n = this.observations_;
        n.has(t) && (n.delete(t), n.size || this.controller_.removeObserver(this));
      }
    }, e.prototype.disconnect = function() {
      this.clearActive(), this.observations_.clear(), this.controller_.removeObserver(this);
    }, e.prototype.gatherActive = function() {
      var t = this;
      this.clearActive(), this.observations_.forEach(function(n) {
        n.isActive() && t.activeObservations_.push(n);
      });
    }, e.prototype.broadcastActive = function() {
      if (this.hasActive()) {
        var t = this.callbackCtx_, n = this.activeObservations_.map(function(r) {
          return new VO(r.target, r.broadcastRect());
        });
        this.callback_.call(t, n, t), this.clearActive();
      }
    }, e.prototype.clearActive = function() {
      this.activeObservations_.splice(0);
    }, e.prototype.hasActive = function() {
      return this.activeObservations_.length > 0;
    }, e;
  }()
), cw = typeof WeakMap < "u" ? /* @__PURE__ */ new WeakMap() : new sw(), dw = (
  /** @class */
  /* @__PURE__ */ function() {
    function e(t) {
      if (!(this instanceof e))
        throw new TypeError("Cannot call a class as a function.");
      if (!arguments.length)
        throw new TypeError("1 argument required, but only 0 present.");
      var n = LO.getInstance(), r = new WO(t, n, this);
      cw.set(this, r);
    }
    return e;
  }()
);
[
  "observe",
  "unobserve",
  "disconnect"
].forEach(function(e) {
  dw.prototype[e] = function() {
    var t;
    return (t = cw.get(this))[e].apply(t, arguments);
  };
});
var Ng = function() {
  return typeof ld.ResizeObserver < "u" ? ld.ResizeObserver : dw;
}(), Mm;
(function(e) {
  e[e.ELEMENT = 1] = "ELEMENT", e[e.FUNCTIONAL_COMPONENT = 2] = "FUNCTIONAL_COMPONENT", e[e.STATEFUL_COMPONENT = 4] = "STATEFUL_COMPONENT", e[e.COMPONENT = 6] = "COMPONENT", e[e.TEXT_CHILDREN = 8] = "TEXT_CHILDREN", e[e.ARRAY_CHILDREN = 16] = "ARRAY_CHILDREN", e[e.SLOTS_CHILDREN = 32] = "SLOTS_CHILDREN", e[e.TELEPORT = 64] = "TELEPORT", e[e.SUSPENSE = 128] = "SUSPENSE", e[e.COMPONENT_SHOULD_KEEP_ALIVE = 256] = "COMPONENT_SHOULD_KEEP_ALIVE", e[e.COMPONENT_KEPT_ALIVE = 512] = "COMPONENT_KEPT_ALIVE";
})(Mm || (Mm = {}));
var Tm;
(function(e) {
  e[e.TEXT = 1] = "TEXT", e[e.CLASS = 2] = "CLASS", e[e.STYLE = 4] = "STYLE", e[e.PROPS = 8] = "PROPS", e[e.FULL_PROPS = 16] = "FULL_PROPS", e[e.HYDRATE_EVENTS = 32] = "HYDRATE_EVENTS", e[e.STABLE_FRAGMENT = 64] = "STABLE_FRAGMENT", e[e.KEYED_FRAGMENT = 128] = "KEYED_FRAGMENT", e[e.UNKEYED_FRAGMENT = 256] = "UNKEYED_FRAGMENT", e[e.NEED_PATCH = 512] = "NEED_PATCH", e[e.DYNAMIC_SLOTS = 1024] = "DYNAMIC_SLOTS", e[e.DEV_ROOT_FRAGMENT = 2048] = "DEV_ROOT_FRAGMENT", e[e.HOISTED = -1] = "HOISTED", e[e.BAIL = -2] = "BAIL";
})(Tm || (Tm = {}));
const Mg = (e) => !!(e && e.shapeFlag & 1), Tg = (e, t) => !!(e && e.shapeFlag & 6), fw = (e, t) => !!(e && e.shapeFlag & 16), GO = (e, t) => !!(e && e.shapeFlag & 32), _s = (e) => {
  var t, n;
  if (e)
    for (const r of e) {
      if (Mg(r) || Tg(r))
        return r;
      if (fw(r, r.children)) {
        const i = _s(r.children);
        if (i)
          return i;
      } else if (GO(r, r.children)) {
        const i = (n = (t = r.children).default) == null ? void 0 : n.call(t);
        if (i) {
          const o = _s(i);
          if (o)
            return o;
        }
      } else if (zr(r)) {
        const i = _s(r);
        if (i)
          return i;
      }
    }
}, XO = (e) => {
  if (!e)
    return !0;
  for (const t of e)
    if (t.children)
      return !1;
  return !0;
}, hw = (e, t) => {
  if (e && e.length > 0)
    for (let n = 0; n < e.length; n++) {
      const r = e[n];
      if (Mg(r) || Tg(r)) {
        const o = Nn(t) ? t(r) : t;
        return e[n] = mf(r, o, !0), !0;
      }
      const i = pw(r);
      if (i && i.length > 0 && hw(i, t))
        return !0;
    }
  return !1;
}, pw = (e) => {
  if (fw(e, e.children))
    return e.children;
  if (zr(e))
    return e;
}, vw = (e) => {
  var t, n;
  if (Mg(e))
    return e.el;
  if (Tg(e)) {
    if (((t = e.el) == null ? void 0 : t.nodeType) === 1)
      return e.el;
    if ((n = e.component) != null && n.subTree) {
      const r = vw(e.component.subTree);
      if (r)
        return r;
    }
  } else {
    const r = pw(e);
    return gw(r);
  }
}, gw = (e) => {
  if (e && e.length > 0)
    for (const t of e) {
      const n = vw(t);
      if (n)
        return n;
    }
}, Ch = (e) => {
  if (e)
    return Nn(e) ? e : () => e;
};
var UO = fe({
  name: "ResizeObserver",
  emits: [
    "resize"
  ],
  setup(e, {
    emit: t,
    slots: n
  }) {
    let r;
    const i = le(), o = F(() => aw(i.value) ? i.value.$el : i.value), a = (l) => {
      l && (r = new Ng((u) => {
        const c = u[0];
        t("resize", c);
      }), r.observe(l));
    }, s = () => {
      r && (r.disconnect(), r = null);
    };
    return wt(o, (l) => {
      r && s(), l && a(l);
    }), fr(() => {
      o.value && a(o.value);
    }), JC(() => {
      s();
    }), () => {
      var l, u;
      const c = _s((u = (l = n.default) == null ? void 0 : l.call(n)) != null ? u : []);
      return c ? mf(c, {
        ref: i
      }, !0) : null;
    };
  }
});
const yw = typeof window > "u" ? global : window, YO = yw.requestAnimationFrame, Pm = yw.cancelAnimationFrame;
function Dm(e) {
  let t = 0;
  const n = (...r) => {
    t && Pm(t), t = YO(() => {
      e(...r), t = 0;
    });
  };
  return n.cancel = () => {
    Pm(t), t = 0;
  }, n;
}
const Pg = () => {
}, mw = () => {
  const { body: e } = document, t = document.documentElement;
  let n;
  try {
    n = (window.top || window.self || window).document.body;
  } catch {
  }
  return {
    height: Math.max(e.scrollHeight, e.offsetHeight, t.clientHeight, t.scrollHeight, t.offsetHeight, (n == null ? void 0 : n.scrollHeight) || 0, (n == null ? void 0 : n.clientHeight) || 0),
    width: Math.max(e.scrollWidth, e.offsetWidth, t.clientWidth, t.scrollWidth, t.offsetWidth, (n == null ? void 0 : n.scrollWidth) || 0, (n == null ? void 0 : n.clientWidth) || 0)
  };
}, Dg = (() => {
  try {
    return !(typeof window < "u" && document !== void 0);
  } catch {
    return !0;
  }
})(), ji = Dg ? Pg : (e, t, n, r = !1) => {
  e.addEventListener(t, n, r);
}, Ca = Dg ? Pg : (e, t, n, r = !1) => {
  e.removeEventListener(t, n, r);
}, KO = (e, t) => {
  if (!e || !t)
    return !1;
  let n = t;
  for (; n; ) {
    if (n === e)
      return !0;
    n = n.parentNode;
  }
  return !1;
}, qO = (e) => {
  const t = document.createElement("div");
  return t.setAttribute("class", `arco-overlay arco-overlay-${e}`), t;
}, ZO = (e, t) => {
  var n;
  return Dg ? Pg() : (n = document.querySelector(e)) != null ? n : void 0;
}, qp = (e, t) => {
  if (Go(e)) {
    const n = e[0] === "#" ? `[id='${e.slice(1)}']` : e;
    return ZO(n);
  }
  return e;
}, JO = (e, t) => {
  const n = e.getBoundingClientRect(), r = t.getBoundingClientRect();
  return {
    top: n.top - r.top,
    bottom: r.bottom - n.bottom,
    left: n.left - r.left,
    right: r.right - n.right,
    width: n.width,
    height: n.height
  };
}, QO = (e) => e.tagName === "BODY" ? document.documentElement.scrollHeight > window.innerHeight : e.scrollHeight > e.offsetHeight, eA = (e) => e.tagName === "BODY" ? window.innerWidth - mw().width : e.offsetWidth - e.clientWidth;
var $t = (e, t) => {
  for (const [n, r] of t)
    e[n] = r;
  return e;
};
const tA = fe({
  name: "IconHover",
  props: {
    prefix: {
      type: String
    },
    size: {
      type: String,
      default: "medium"
    },
    disabled: {
      type: Boolean,
      default: !1
    }
  },
  setup() {
    return {
      prefixCls: Je("icon-hover")
    };
  }
});
function nA(e, t, n, r, i, o) {
  return X(), he("span", {
    class: ze([
      e.prefixCls,
      {
        [`${e.prefix}-icon-hover`]: e.prefix,
        [`${e.prefixCls}-size-${e.size}`]: e.size !== "medium",
        [`${e.prefixCls}-disabled`]: e.disabled
      }
    ])
  }, [
    mt(e.$slots, "default")
  ], 2);
}
var Si = /* @__PURE__ */ $t(tA, [["render", nA]]);
const rA = fe({
  name: "IconClose",
  props: {
    size: {
      type: [Number, String]
    },
    strokeWidth: {
      type: Number,
      default: 4
    },
    strokeLinecap: {
      type: String,
      default: "butt",
      validator: (e) => ["butt", "round", "square"].includes(e)
    },
    strokeLinejoin: {
      type: String,
      default: "miter",
      validator: (e) => ["arcs", "bevel", "miter", "miter-clip", "round"].includes(e)
    },
    rotate: Number,
    spin: Boolean
  },
  emits: {
    click: (e) => !0
  },
  setup(e, { emit: t }) {
    const n = Je("icon"), r = F(() => [n, `${n}-close`, { [`${n}-spin`]: e.spin }]), i = F(() => {
      const a = {};
      return e.size && (a.fontSize = At(e.size) ? `${e.size}px` : e.size), e.rotate && (a.transform = `rotate(${e.rotate}deg)`), a;
    });
    return {
      cls: r,
      innerStyle: i,
      onClick: (a) => {
        t("click", a);
      }
    };
  }
}), iA = ["stroke-width", "stroke-linecap", "stroke-linejoin"], oA = /* @__PURE__ */ Y("path", { d: "M9.857 9.858 24 24m0 0 14.142 14.142M24 24 38.142 9.858M24 24 9.857 38.142" }, null, -1), aA = [
  oA
];
function sA(e, t, n, r, i, o) {
  return X(), he("svg", {
    viewBox: "0 0 48 48",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    stroke: "currentColor",
    class: ze(e.cls),
    style: Jt(e.innerStyle),
    "stroke-width": e.strokeWidth,
    "stroke-linecap": e.strokeLinecap,
    "stroke-linejoin": e.strokeLinejoin,
    onClick: t[0] || (t[0] = (...a) => e.onClick && e.onClick(...a))
  }, aA, 14, iA);
}
var Oh = /* @__PURE__ */ $t(rA, [["render", sA]]);
const Bu = Object.assign(Oh, {
  install: (e, t) => {
    var n;
    const r = (n = t == null ? void 0 : t.iconPrefix) != null ? n : "";
    e.component(r + Oh.name, Oh);
  }
}), lA = fe({
  name: "IconInfoCircleFill",
  props: {
    size: {
      type: [Number, String]
    },
    strokeWidth: {
      type: Number,
      default: 4
    },
    strokeLinecap: {
      type: String,
      default: "butt",
      validator: (e) => ["butt", "round", "square"].includes(e)
    },
    strokeLinejoin: {
      type: String,
      default: "miter",
      validator: (e) => ["arcs", "bevel", "miter", "miter-clip", "round"].includes(e)
    },
    rotate: Number,
    spin: Boolean
  },
  emits: {
    click: (e) => !0
  },
  setup(e, { emit: t }) {
    const n = Je("icon"), r = F(() => [n, `${n}-info-circle-fill`, { [`${n}-spin`]: e.spin }]), i = F(() => {
      const a = {};
      return e.size && (a.fontSize = At(e.size) ? `${e.size}px` : e.size), e.rotate && (a.transform = `rotate(${e.rotate}deg)`), a;
    });
    return {
      cls: r,
      innerStyle: i,
      onClick: (a) => {
        t("click", a);
      }
    };
  }
}), uA = ["stroke-width", "stroke-linecap", "stroke-linejoin"], cA = /* @__PURE__ */ Y("path", {
  "fill-rule": "evenodd",
  "clip-rule": "evenodd",
  d: "M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm2-30a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2Zm0 17h1a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-6a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h1v-8a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v11Z",
  fill: "currentColor",
  stroke: "none"
}, null, -1), dA = [
  cA
];
function fA(e, t, n, r, i, o) {
  return X(), he("svg", {
    viewBox: "0 0 48 48",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    stroke: "currentColor",
    class: ze(e.cls),
    style: Jt(e.innerStyle),
    "stroke-width": e.strokeWidth,
    "stroke-linecap": e.strokeLinecap,
    "stroke-linejoin": e.strokeLinejoin,
    onClick: t[0] || (t[0] = (...a) => e.onClick && e.onClick(...a))
  }, dA, 14, uA);
}
var Ah = /* @__PURE__ */ $t(lA, [["render", fA]]);
const hA = Object.assign(Ah, {
  install: (e, t) => {
    var n;
    const r = (n = t == null ? void 0 : t.iconPrefix) != null ? n : "";
    e.component(r + Ah.name, Ah);
  }
}), pA = fe({
  name: "IconCheckCircleFill",
  props: {
    size: {
      type: [Number, String]
    },
    strokeWidth: {
      type: Number,
      default: 4
    },
    strokeLinecap: {
      type: String,
      default: "butt",
      validator: (e) => ["butt", "round", "square"].includes(e)
    },
    strokeLinejoin: {
      type: String,
      default: "miter",
      validator: (e) => ["arcs", "bevel", "miter", "miter-clip", "round"].includes(e)
    },
    rotate: Number,
    spin: Boolean
  },
  emits: {
    click: (e) => !0
  },
  setup(e, { emit: t }) {
    const n = Je("icon"), r = F(() => [n, `${n}-check-circle-fill`, { [`${n}-spin`]: e.spin }]), i = F(() => {
      const a = {};
      return e.size && (a.fontSize = At(e.size) ? `${e.size}px` : e.size), e.rotate && (a.transform = `rotate(${e.rotate}deg)`), a;
    });
    return {
      cls: r,
      innerStyle: i,
      onClick: (a) => {
        t("click", a);
      }
    };
  }
}), vA = ["stroke-width", "stroke-linecap", "stroke-linejoin"], gA = /* @__PURE__ */ Y("path", {
  "fill-rule": "evenodd",
  "clip-rule": "evenodd",
  d: "M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm10.207-24.379a1 1 0 0 0 0-1.414l-1.414-1.414a1 1 0 0 0-1.414 0L22 26.172l-4.878-4.88a1 1 0 0 0-1.415 0l-1.414 1.415a1 1 0 0 0 0 1.414l7 7a1 1 0 0 0 1.414 0l11.5-11.5Z",
  fill: "currentColor",
  stroke: "none"
}, null, -1), yA = [
  gA
];
function mA(e, t, n, r, i, o) {
  return X(), he("svg", {
    viewBox: "0 0 48 48",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    stroke: "currentColor",
    class: ze(e.cls),
    style: Jt(e.innerStyle),
    "stroke-width": e.strokeWidth,
    "stroke-linecap": e.strokeLinecap,
    "stroke-linejoin": e.strokeLinejoin,
    onClick: t[0] || (t[0] = (...a) => e.onClick && e.onClick(...a))
  }, yA, 14, vA);
}
var Nh = /* @__PURE__ */ $t(pA, [["render", mA]]);
const _w = Object.assign(Nh, {
  install: (e, t) => {
    var n;
    const r = (n = t == null ? void 0 : t.iconPrefix) != null ? n : "";
    e.component(r + Nh.name, Nh);
  }
}), _A = fe({
  name: "IconExclamationCircleFill",
  props: {
    size: {
      type: [Number, String]
    },
    strokeWidth: {
      type: Number,
      default: 4
    },
    strokeLinecap: {
      type: String,
      default: "butt",
      validator: (e) => ["butt", "round", "square"].includes(e)
    },
    strokeLinejoin: {
      type: String,
      default: "miter",
      validator: (e) => ["arcs", "bevel", "miter", "miter-clip", "round"].includes(e)
    },
    rotate: Number,
    spin: Boolean
  },
  emits: {
    click: (e) => !0
  },
  setup(e, { emit: t }) {
    const n = Je("icon"), r = F(() => [n, `${n}-exclamation-circle-fill`, { [`${n}-spin`]: e.spin }]), i = F(() => {
      const a = {};
      return e.size && (a.fontSize = At(e.size) ? `${e.size}px` : e.size), e.rotate && (a.transform = `rotate(${e.rotate}deg)`), a;
    });
    return {
      cls: r,
      innerStyle: i,
      onClick: (a) => {
        t("click", a);
      }
    };
  }
}), bA = ["stroke-width", "stroke-linecap", "stroke-linejoin"], wA = /* @__PURE__ */ Y("path", {
  "fill-rule": "evenodd",
  "clip-rule": "evenodd",
  d: "M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm-2-11a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v2Zm4-18a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V15Z",
  fill: "currentColor",
  stroke: "none"
}, null, -1), xA = [
  wA
];
function EA(e, t, n, r, i, o) {
  return X(), he("svg", {
    viewBox: "0 0 48 48",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    stroke: "currentColor",
    class: ze(e.cls),
    style: Jt(e.innerStyle),
    "stroke-width": e.strokeWidth,
    "stroke-linecap": e.strokeLinecap,
    "stroke-linejoin": e.strokeLinejoin,
    onClick: t[0] || (t[0] = (...a) => e.onClick && e.onClick(...a))
  }, xA, 14, bA);
}
var Mh = /* @__PURE__ */ $t(_A, [["render", EA]]);
const bw = Object.assign(Mh, {
  install: (e, t) => {
    var n;
    const r = (n = t == null ? void 0 : t.iconPrefix) != null ? n : "";
    e.component(r + Mh.name, Mh);
  }
}), SA = fe({
  name: "IconCloseCircleFill",
  props: {
    size: {
      type: [Number, String]
    },
    strokeWidth: {
      type: Number,
      default: 4
    },
    strokeLinecap: {
      type: String,
      default: "butt",
      validator: (e) => ["butt", "round", "square"].includes(e)
    },
    strokeLinejoin: {
      type: String,
      default: "miter",
      validator: (e) => ["arcs", "bevel", "miter", "miter-clip", "round"].includes(e)
    },
    rotate: Number,
    spin: Boolean
  },
  emits: {
    click: (e) => !0
  },
  setup(e, { emit: t }) {
    const n = Je("icon"), r = F(() => [n, `${n}-close-circle-fill`, { [`${n}-spin`]: e.spin }]), i = F(() => {
      const a = {};
      return e.size && (a.fontSize = At(e.size) ? `${e.size}px` : e.size), e.rotate && (a.transform = `rotate(${e.rotate}deg)`), a;
    });
    return {
      cls: r,
      innerStyle: i,
      onClick: (a) => {
        t("click", a);
      }
    };
  }
}), CA = ["stroke-width", "stroke-linecap", "stroke-linejoin"], OA = /* @__PURE__ */ Y("path", {
  "fill-rule": "evenodd",
  "clip-rule": "evenodd",
  d: "M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm4.955-27.771-4.95 4.95-4.95-4.95a1 1 0 0 0-1.414 0l-1.414 1.414a1 1 0 0 0 0 1.414l4.95 4.95-4.95 4.95a1 1 0 0 0 0 1.414l1.414 1.414a1 1 0 0 0 1.414 0l4.95-4.95 4.95 4.95a1 1 0 0 0 1.414 0l1.414-1.414a1 1 0 0 0 0-1.414l-4.95-4.95 4.95-4.95a1 1 0 0 0 0-1.414l-1.414-1.414a1 1 0 0 0-1.414 0Z",
  fill: "currentColor",
  stroke: "none"
}, null, -1), AA = [
  OA
];
function NA(e, t, n, r, i, o) {
  return X(), he("svg", {
    viewBox: "0 0 48 48",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    stroke: "currentColor",
    class: ze(e.cls),
    style: Jt(e.innerStyle),
    "stroke-width": e.strokeWidth,
    "stroke-linecap": e.strokeLinecap,
    "stroke-linejoin": e.strokeLinejoin,
    onClick: t[0] || (t[0] = (...a) => e.onClick && e.onClick(...a))
  }, AA, 14, CA);
}
var Th = /* @__PURE__ */ $t(SA, [["render", NA]]);
const ww = Object.assign(Th, {
  install: (e, t) => {
    var n;
    const r = (n = t == null ? void 0 : t.iconPrefix) != null ? n : "";
    e.component(r + Th.name, Th);
  }
}), MA = ["info", "success", "warning", "error"], As = [
  "onFocus",
  "onFocusin",
  "onFocusout",
  "onBlur",
  "onChange",
  "onBeforeinput",
  "onInput",
  "onReset",
  "onSubmit",
  "onInvalid",
  "onKeydown",
  "onKeypress",
  "onKeyup",
  "onCopy",
  "onCut",
  "onPaste",
  "onCompositionstart",
  "onCompositionupdate",
  "onCompositionend",
  "onSelect",
  "autocomplete",
  "autofocus",
  "maxlength",
  "minlength",
  "name",
  "pattern",
  "readonly",
  "required"
], TA = fe({
  name: "IconLoading",
  props: {
    size: {
      type: [Number, String]
    },
    strokeWidth: {
      type: Number,
      default: 4
    },
    strokeLinecap: {
      type: String,
      default: "butt",
      validator: (e) => ["butt", "round", "square"].includes(e)
    },
    strokeLinejoin: {
      type: String,
      default: "miter",
      validator: (e) => ["arcs", "bevel", "miter", "miter-clip", "round"].includes(e)
    },
    rotate: Number,
    spin: Boolean
  },
  emits: {
    click: (e) => !0
  },
  setup(e, { emit: t }) {
    const n = Je("icon"), r = F(() => [n, `${n}-loading`, { [`${n}-spin`]: e.spin }]), i = F(() => {
      const a = {};
      return e.size && (a.fontSize = At(e.size) ? `${e.size}px` : e.size), e.rotate && (a.transform = `rotate(${e.rotate}deg)`), a;
    });
    return {
      cls: r,
      innerStyle: i,
      onClick: (a) => {
        t("click", a);
      }
    };
  }
}), PA = ["stroke-width", "stroke-linecap", "stroke-linejoin"], DA = /* @__PURE__ */ Y("path", { d: "M42 24c0 9.941-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6" }, null, -1), RA = [
  DA
];
function LA(e, t, n, r, i, o) {
  return X(), he("svg", {
    viewBox: "0 0 48 48",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    stroke: "currentColor",
    class: ze(e.cls),
    style: Jt(e.innerStyle),
    "stroke-width": e.strokeWidth,
    "stroke-linecap": e.strokeLinecap,
    "stroke-linejoin": e.strokeLinejoin,
    onClick: t[0] || (t[0] = (...a) => e.onClick && e.onClick(...a))
  }, RA, 14, PA);
}
var Ph = /* @__PURE__ */ $t(TA, [["render", LA]]);
const qs = Object.assign(Ph, {
  install: (e, t) => {
    var n;
    const r = (n = t == null ? void 0 : t.iconPrefix) != null ? n : "";
    e.component(r + Ph.name, Ph);
  }
}), $A = fe({
  name: "FeedbackIcon",
  components: {
    IconLoading: qs,
    IconCheckCircleFill: _w,
    IconExclamationCircleFill: bw,
    IconCloseCircleFill: ww
  },
  props: {
    type: {
      type: String
    }
  },
  setup(e) {
    const t = Je("feedback-icon");
    return {
      cls: F(() => [
        t,
        `${t}-status-${e.type}`
      ])
    };
  }
});
function kA(e, t, n, r, i, o) {
  const a = Ie("icon-loading"), s = Ie("icon-check-circle-fill"), l = Ie("icon-exclamation-circle-fill"), u = Ie("icon-close-circle-fill");
  return X(), he("span", {
    class: ze(e.cls)
  }, [
    e.type === "validating" ? (X(), ot(a, { key: 0 })) : e.type === "success" ? (X(), ot(s, { key: 1 })) : e.type === "warning" ? (X(), ot(l, { key: 2 })) : e.type === "error" ? (X(), ot(u, { key: 3 })) : vt("v-if", !0)
  ], 2);
}
var Rg = /* @__PURE__ */ $t($A, [["render", kA]]);
const Lg = {
  key: "Enter",
  code: "Enter"
}, IA = {
  key: "Backspace",
  code: "Backspace"
};
var BA = Object.defineProperty, Rm = Object.getOwnPropertySymbols, jA = Object.prototype.hasOwnProperty, zA = Object.prototype.propertyIsEnumerable, Lm = (e, t, n) => t in e ? BA(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, FA = (e, t) => {
  for (var n in t || (t = {}))
    jA.call(t, n) && Lm(e, n, t[n]);
  if (Rm)
    for (var n of Rm(t))
      zA.call(t, n) && Lm(e, n, t[n]);
  return e;
};
const ju = (e, t) => {
  const n = FA({}, e);
  for (const r of t)
    r in n && delete n[r];
  return n;
};
function $g(e, t) {
  const n = {};
  return t.forEach((r) => {
    const i = r;
    r in e && (n[i] = e[i]);
  }), n;
}
const HA = Symbol("ArcoFormItemContext"), Oi = ({
  size: e,
  disabled: t,
  error: n,
  uninject: r
} = {}) => {
  const i = r ? {} : ur(HA, {}), o = F(() => {
    var c;
    return (c = e == null ? void 0 : e.value) != null ? c : i.size;
  }), a = F(() => (t == null ? void 0 : t.value) || i.disabled), s = F(() => (n == null ? void 0 : n.value) || i.error), l = Gp(i, "feedback"), u = Gp(i, "eventHandlers");
  return {
    formItemCtx: i,
    mergedSize: o,
    mergedDisabled: a,
    mergedError: s,
    feedback: l,
    eventHandlers: u
  };
}, ho = (e, { defaultValue: t = "medium" } = {}) => {
  const n = ur(fo, void 0);
  return {
    mergedSize: F(() => {
      var i, o;
      return (o = (i = e == null ? void 0 : e.value) != null ? i : n == null ? void 0 : n.size) != null ? o : t;
    })
  };
};
function VA(e) {
  const t = le();
  function n() {
    if (!e.value)
      return;
    const { selectionStart: i, selectionEnd: o, value: a } = e.value;
    if (i == null || o == null)
      return;
    const s = a.slice(0, Math.max(0, i)), l = a.slice(Math.max(0, o));
    t.value = {
      selectionStart: i,
      selectionEnd: o,
      value: a,
      beforeTxt: s,
      afterTxt: l
    };
  }
  function r() {
    if (!e.value || !t.value)
      return;
    const { value: i } = e.value, { beforeTxt: o, afterTxt: a, selectionStart: s } = t.value;
    if (!o || !a || !s)
      return;
    let l = i.length;
    if (i.endsWith(a))
      l = i.length - a.length;
    else if (i.startsWith(o))
      l = o.length;
    else {
      const u = o[s - 1], c = i.indexOf(u, s - 1);
      c !== -1 && (l = c + 1);
    }
    e.value.setSelectionRange(l, l);
  }
  return [n, r];
}
var WA = Object.defineProperty, $m = Object.getOwnPropertySymbols, GA = Object.prototype.hasOwnProperty, XA = Object.prototype.propertyIsEnumerable, km = (e, t, n) => t in e ? WA(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, Im = (e, t) => {
  for (var n in t || (t = {}))
    GA.call(t, n) && km(e, n, t[n]);
  if ($m)
    for (var n of $m(t))
      XA.call(t, n) && km(e, n, t[n]);
  return e;
}, Vl = fe({
  name: "Input",
  inheritAttrs: !1,
  props: {
    modelValue: String,
    defaultValue: {
      type: String,
      default: ""
    },
    size: {
      type: String
    },
    allowClear: {
      type: Boolean,
      default: !1
    },
    disabled: {
      type: Boolean,
      default: !1
    },
    readonly: {
      type: Boolean,
      default: !1
    },
    error: {
      type: Boolean,
      default: !1
    },
    placeholder: String,
    maxLength: {
      type: [Number, Object],
      default: 0
    },
    showWordLimit: {
      type: Boolean,
      default: !1
    },
    wordLength: {
      type: Function
    },
    wordSlice: {
      type: Function
    },
    inputAttrs: {
      type: Object
    },
    type: {
      type: String,
      default: "text"
    }
  },
  emits: {
    "update:modelValue": (e) => !0,
    input: (e, t) => !0,
    change: (e, t) => !0,
    pressEnter: (e) => !0,
    clear: (e) => !0,
    focus: (e) => !0,
    blur: (e) => !0
  },
  setup(e, {
    emit: t,
    slots: n,
    attrs: r
  }) {
    const {
      size: i,
      disabled: o,
      error: a,
      modelValue: s
    } = Qt(e), l = Je("input"), u = le(), {
      mergedSize: c,
      mergedDisabled: d,
      mergedError: f,
      feedback: h,
      eventHandlers: p
    } = Oi({
      size: i,
      disabled: o,
      error: a
    }), {
      mergedSize: v
    } = ho(c), [g, y] = VA(u), m = le(e.defaultValue), E = F(() => {
      var Ee;
      return (Ee = e.modelValue) != null ? Ee : m.value;
    });
    wt(s, (Ee) => {
      (wr(Ee) || Ks(Ee)) && (m.value = "");
    });
    let w = E.value;
    const S = le(!1), _ = F(() => e.allowClear && !e.readonly && !d.value && !!E.value), b = le(!1), T = le(""), R = (Ee) => {
      var ce;
      return Nn(e.wordLength) ? e.wordLength(Ee) : (ce = Ee.length) != null ? ce : 0;
    }, B = F(() => R(E.value)), K = F(() => f.value || !!(Fn(e.maxLength) && e.maxLength.errorOnly && B.value > x.value)), ae = F(() => Fn(e.maxLength) && !!e.maxLength.errorOnly), x = F(() => Fn(e.maxLength) ? e.maxLength.length : e.maxLength), P = F(() => {
      const Ee = R("a");
      return Math.floor(x.value / Ee);
    }), L = (Ee) => {
      var ce, Te;
      x.value && !ae.value && R(Ee) > x.value && (Ee = (Te = (ce = e.wordSlice) == null ? void 0 : ce.call(e, Ee, x.value)) != null ? Te : Ee.slice(0, P.value)), m.value = Ee, t("update:modelValue", Ee);
    }, k = (Ee) => {
      u.value && Ee.target !== u.value && (Ee.preventDefault(), u.value.focus());
    }, J = (Ee, ce) => {
      var Te, Le;
      Ee !== w && (w = Ee, t("change", Ee, ce), (Le = (Te = p.value) == null ? void 0 : Te.onChange) == null || Le.call(Te, ce));
    }, de = (Ee) => {
      var ce, Te;
      S.value = !0, w = E.value, t("focus", Ee), (Te = (ce = p.value) == null ? void 0 : ce.onFocus) == null || Te.call(ce, Ee);
    }, Ne = (Ee) => {
      var ce, Te;
      S.value = !1, J(E.value, Ee), t("blur", Ee), (Te = (ce = p.value) == null ? void 0 : ce.onBlur) == null || Te.call(ce, Ee);
    }, se = (Ee) => {
      var ce, Te, Le;
      const {
        value: Ct,
        selectionStart: bt,
        selectionEnd: M
      } = Ee.target;
      if (Ee.type === "compositionend") {
        if (b.value = !1, T.value = "", x.value && !ae.value && B.value >= x.value && R(Ct) > x.value && bt === M) {
          G();
          return;
        }
        L(Ct), t("input", Ct, Ee), (Te = (ce = p.value) == null ? void 0 : ce.onInput) == null || Te.call(ce, Ee), G();
      } else
        b.value = !0, T.value = E.value + ((Le = Ee.data) != null ? Le : "");
    }, G = () => {
      g(), Hn(() => {
        u.value && E.value !== u.value.value && (u.value.value = E.value, y());
      });
    }, be = (Ee) => {
      var ce, Te;
      const {
        value: Le
      } = Ee.target;
      if (!b.value) {
        if (x.value && !ae.value && B.value >= x.value && R(Le) > x.value && Ee.inputType === "insertText") {
          G();
          return;
        }
        L(Le), t("input", Le, Ee), (Te = (ce = p.value) == null ? void 0 : ce.onInput) == null || Te.call(ce, Ee), G();
      }
    }, Oe = (Ee) => {
      L(""), J("", Ee), t("clear", Ee);
    }, Ae = (Ee) => {
      const ce = Ee.key || Ee.code;
      !b.value && ce === Lg.key && (J(E.value, Ee), t("pressEnter", Ee));
    }, Re = F(() => [`${l}-outer`, `${l}-outer-size-${v.value}`, {
      [`${l}-outer-has-suffix`]: !!n.suffix,
      [`${l}-outer-disabled`]: d.value
    }]), $ = F(() => [`${l}-wrapper`, {
      [`${l}-error`]: K.value,
      [`${l}-disabled`]: d.value,
      [`${l}-focus`]: S.value
    }]), re = F(() => [l, `${l}-size-${v.value}`]), ee = F(() => ju(r, As)), _e = F(() => $g(r, As)), xe = F(() => {
      const Ee = Im(Im({}, _e.value), e.inputAttrs);
      return K.value && (Ee["aria-invalid"] = !0), Ee;
    }), ye = (Ee) => {
      var ce;
      return A("span", dn({
        class: $.value,
        onMousedown: k
      }, Ee ? void 0 : ee.value), [n.prefix && A("span", {
        class: `${l}-prefix`
      }, [n.prefix()]), A("input", dn({
        ref: u,
        class: re.value,
        value: E.value,
        type: e.type,
        placeholder: e.placeholder,
        readonly: e.readonly,
        disabled: d.value,
        onInput: be,
        onKeydown: Ae,
        onFocus: de,
        onBlur: Ne,
        onCompositionstart: se,
        onCompositionupdate: se,
        onCompositionend: se
      }, xe.value), null), _.value && A(Si, {
        prefix: l,
        class: `${l}-clear-btn`,
        onClick: Oe
      }, {
        default: () => [A(Bu, null, null)]
      }), (n.suffix || !!e.maxLength && e.showWordLimit || !!h.value) && A("span", {
        class: [`${l}-suffix`, {
          [`${l}-suffix-has-feedback`]: h.value
        }]
      }, [!!e.maxLength && e.showWordLimit && A("span", {
        class: `${l}-word-limit`
      }, [B.value, Lt("/"), x.value]), (ce = n.suffix) == null ? void 0 : ce.call(n), !!h.value && A(Rg, {
        type: h.value
      }, null)])]);
    };
    return {
      inputRef: u,
      render: () => n.prepend || n.append ? A("span", dn({
        class: Re.value
      }, ee.value), [n.prepend && A("span", {
        class: `${l}-prepend`
      }, [n.prepend()]), ye(!0), n.append && A("span", {
        class: `${l}-append`
      }, [n.append()])]) : ye()
    };
  },
  methods: {
    focus() {
      var e;
      (e = this.inputRef) == null || e.focus();
    },
    blur() {
      var e;
      (e = this.inputRef) == null || e.blur();
    }
  },
  render() {
    return this.render();
  }
});
const UA = fe({
  name: "IconSearch",
  props: {
    size: {
      type: [Number, String]
    },
    strokeWidth: {
      type: Number,
      default: 4
    },
    strokeLinecap: {
      type: String,
      default: "butt",
      validator: (e) => ["butt", "round", "square"].includes(e)
    },
    strokeLinejoin: {
      type: String,
      default: "miter",
      validator: (e) => ["arcs", "bevel", "miter", "miter-clip", "round"].includes(e)
    },
    rotate: Number,
    spin: Boolean
  },
  emits: {
    click: (e) => !0
  },
  setup(e, { emit: t }) {
    const n = Je("icon"), r = F(() => [n, `${n}-search`, { [`${n}-spin`]: e.spin }]), i = F(() => {
      const a = {};
      return e.size && (a.fontSize = At(e.size) ? `${e.size}px` : e.size), e.rotate && (a.transform = `rotate(${e.rotate}deg)`), a;
    });
    return {
      cls: r,
      innerStyle: i,
      onClick: (a) => {
        t("click", a);
      }
    };
  }
}), YA = ["stroke-width", "stroke-linecap", "stroke-linejoin"], KA = /* @__PURE__ */ Y("path", { d: "M33.072 33.071c6.248-6.248 6.248-16.379 0-22.627-6.249-6.249-16.38-6.249-22.628 0-6.248 6.248-6.248 16.379 0 22.627 6.248 6.248 16.38 6.248 22.628 0Zm0 0 8.485 8.485" }, null, -1), qA = [
  KA
];
function ZA(e, t, n, r, i, o) {
  return X(), he("svg", {
    viewBox: "0 0 48 48",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    stroke: "currentColor",
    class: ze(e.cls),
    style: Jt(e.innerStyle),
    "stroke-width": e.strokeWidth,
    "stroke-linecap": e.strokeLinecap,
    "stroke-linejoin": e.strokeLinejoin,
    onClick: t[0] || (t[0] = (...a) => e.onClick && e.onClick(...a))
  }, qA, 14, YA);
}
var Dh = /* @__PURE__ */ $t(UA, [["render", ZA]]);
const Zp = Object.assign(Dh, {
  install: (e, t) => {
    var n;
    const r = (n = t == null ? void 0 : t.iconPrefix) != null ? n : "";
    e.component(r + Dh.name, Dh);
  }
}), xw = Symbol("ArcoButtonGroup"), JA = fe({
  name: "Button",
  components: {
    IconLoading: qs
  },
  props: {
    type: {
      type: String
    },
    shape: {
      type: String
    },
    status: {
      type: String
    },
    size: {
      type: String
    },
    long: {
      type: Boolean,
      default: !1
    },
    loading: {
      type: Boolean,
      default: !1
    },
    disabled: {
      type: Boolean
    },
    htmlType: {
      type: String,
      default: "button"
    },
    autofocus: {
      type: Boolean,
      default: !1
    },
    href: String
  },
  emits: {
    click: (e) => !0
  },
  setup(e, { emit: t }) {
    const { size: n, disabled: r } = Qt(e), i = Je("btn"), o = ur(xw, void 0), a = F(() => {
      var h;
      return (h = n.value) != null ? h : o == null ? void 0 : o.size;
    }), s = F(() => !!(r.value || o != null && o.disabled)), { mergedSize: l, mergedDisabled: u } = Oi({
      size: a,
      disabled: s
    }), { mergedSize: c } = ho(l), d = F(() => {
      var h, p, v, g, y, m;
      return [
        i,
        `${i}-${(p = (h = e.type) != null ? h : o == null ? void 0 : o.type) != null ? p : "secondary"}`,
        `${i}-shape-${(g = (v = e.shape) != null ? v : o == null ? void 0 : o.shape) != null ? g : "square"}`,
        `${i}-size-${c.value}`,
        `${i}-status-${(m = (y = e.status) != null ? y : o == null ? void 0 : o.status) != null ? m : "normal"}`,
        {
          [`${i}-long`]: e.long,
          [`${i}-loading`]: e.loading,
          [`${i}-disabled`]: u.value,
          [`${i}-link`]: Go(e.href)
        }
      ];
    });
    return {
      prefixCls: i,
      cls: d,
      mergedDisabled: u,
      handleClick: (h) => {
        if (e.disabled || e.loading) {
          h.preventDefault();
          return;
        }
        t("click", h);
      }
    };
  }
}), QA = ["href"], eN = ["type", "disabled", "autofocus"];
function tN(e, t, n, r, i, o) {
  const a = Ie("icon-loading");
  return e.href ? (X(), he("a", {
    key: 0,
    class: ze([
      e.cls,
      { [`${e.prefixCls}-only-icon`]: e.$slots.icon && !e.$slots.default }
    ]),
    href: e.mergedDisabled || e.loading ? void 0 : e.href,
    onClick: t[0] || (t[0] = (...s) => e.handleClick && e.handleClick(...s))
  }, [
    e.loading || e.$slots.icon ? (X(), he("span", {
      key: 0,
      class: ze(`${e.prefixCls}-icon`)
    }, [
      e.loading ? (X(), ot(a, {
        key: 0,
        spin: "true"
      })) : mt(e.$slots, "icon", { key: 1 })
    ], 2)) : vt("v-if", !0),
    mt(e.$slots, "default")
  ], 10, QA)) : (X(), he("button", {
    key: 1,
    class: ze([
      e.cls,
      { [`${e.prefixCls}-only-icon`]: e.$slots.icon && !e.$slots.default }
    ]),
    type: e.htmlType,
    disabled: e.mergedDisabled,
    autofocus: e.autofocus,
    onClick: t[1] || (t[1] = (...s) => e.handleClick && e.handleClick(...s))
  }, [
    e.loading || e.$slots.icon ? (X(), he("span", {
      key: 0,
      class: ze(`${e.prefixCls}-icon`)
    }, [
      e.loading ? (X(), ot(a, {
        key: 0,
        spin: !0
      })) : mt(e.$slots, "icon", { key: 1 })
    ], 2)) : vt("v-if", !0),
    mt(e.$slots, "default")
  ], 10, eN));
}
var Rh = /* @__PURE__ */ $t(JA, [["render", tN]]);
const nN = fe({
  name: "ButtonGroup",
  props: {
    type: {
      type: String
    },
    status: {
      type: String
    },
    shape: {
      type: String
    },
    size: {
      type: String
    },
    disabled: {
      type: Boolean
    }
  },
  setup(e) {
    const { type: t, size: n, status: r, disabled: i, shape: o } = Qt(e), a = Je("btn-group");
    return ja(xw, Or({
      type: t,
      size: n,
      shape: o,
      status: r,
      disabled: i
    })), {
      prefixCls: a
    };
  }
});
function rN(e, t, n, r, i, o) {
  return X(), he("div", {
    class: ze(e.prefixCls)
  }, [
    mt(e.$slots, "default")
  ], 2);
}
var Wl = /* @__PURE__ */ $t(nN, [["render", rN]]);
const Ns = Object.assign(Rh, {
  Group: Wl,
  install: (e, t) => {
    Ln(e, t);
    const n = Rn(t);
    e.component(n + Rh.name, Rh), e.component(n + Wl.name, Wl);
  }
});
var Lh = fe({
  name: "InputSearch",
  props: {
    searchButton: {
      type: Boolean,
      default: !1
    },
    loading: {
      type: Boolean,
      default: !1
    },
    disabled: {
      type: Boolean,
      default: !1
    },
    size: {
      type: String
    },
    buttonText: {
      type: String
    },
    buttonProps: {
      type: Object
    }
  },
  emits: {
    search: (e, t) => !0
  },
  setup(e, {
    emit: t,
    slots: n
  }) {
    const {
      size: r
    } = Qt(e), i = Je("input-search"), {
      mergedSize: o
    } = ho(r), a = le(), s = (d) => {
      a.value.inputRef && t("search", a.value.inputRef.value, d);
    }, l = () => {
      var d;
      return A(Un, null, [e.loading ? A(qs, null, null) : A(Si, {
        onClick: s
      }, {
        default: () => [A(Zp, null, null)]
      }), (d = n.suffix) == null ? void 0 : d.call(n)]);
    }, u = () => {
      var d;
      let f = {};
      return e.buttonText || n["button-default"] || n["button-icon"] ? f = {
        default: (d = n["button-default"]) != null ? d : e.buttonText ? () => e.buttonText : void 0,
        icon: n["button-icon"]
      } : f = {
        icon: () => A(Zp, null, null)
      }, A(Ns, dn({
        type: "primary",
        class: `${i}-btn`,
        disabled: e.disabled,
        size: o.value,
        loading: e.loading
      }, e.buttonProps, {
        onClick: s
      }), f);
    };
    return {
      inputRef: a,
      render: () => A(Vl, {
        ref: a,
        class: i,
        size: o.value,
        disabled: e.disabled
      }, {
        prepend: n.prepend,
        prefix: n.prefix,
        suffix: e.searchButton ? n.suffix : l,
        append: e.searchButton ? u : n.append
      })
    };
  },
  methods: {
    focus() {
      var e;
      (e = this.inputRef) == null || e.focus();
    },
    blur() {
      var e;
      (e = this.inputRef) == null || e.blur();
    }
  },
  render() {
    return this.render();
  }
});
const iN = fe({
  name: "IconEye",
  props: {
    size: {
      type: [Number, String]
    },
    strokeWidth: {
      type: Number,
      default: 4
    },
    strokeLinecap: {
      type: String,
      default: "butt",
      validator: (e) => ["butt", "round", "square"].includes(e)
    },
    strokeLinejoin: {
      type: String,
      default: "miter",
      validator: (e) => ["arcs", "bevel", "miter", "miter-clip", "round"].includes(e)
    },
    rotate: Number,
    spin: Boolean
  },
  emits: {
    click: (e) => !0
  },
  setup(e, { emit: t }) {
    const n = Je("icon"), r = F(() => [n, `${n}-eye`, { [`${n}-spin`]: e.spin }]), i = F(() => {
      const a = {};
      return e.size && (a.fontSize = At(e.size) ? `${e.size}px` : e.size), e.rotate && (a.transform = `rotate(${e.rotate}deg)`), a;
    });
    return {
      cls: r,
      innerStyle: i,
      onClick: (a) => {
        t("click", a);
      }
    };
  }
}), oN = ["stroke-width", "stroke-linecap", "stroke-linejoin"], aN = /* @__PURE__ */ Y("path", {
  "clip-rule": "evenodd",
  d: "M24 37c6.627 0 12.627-4.333 18-13-5.373-8.667-11.373-13-18-13-6.627 0-12.627 4.333-18 13 5.373 8.667 11.373 13 18 13Z"
}, null, -1), sN = /* @__PURE__ */ Y("path", { d: "M29 24a5 5 0 1 1-10 0 5 5 0 0 1 10 0Z" }, null, -1), lN = [
  aN,
  sN
];
function uN(e, t, n, r, i, o) {
  return X(), he("svg", {
    viewBox: "0 0 48 48",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    stroke: "currentColor",
    class: ze(e.cls),
    style: Jt(e.innerStyle),
    "stroke-width": e.strokeWidth,
    "stroke-linecap": e.strokeLinecap,
    "stroke-linejoin": e.strokeLinejoin,
    onClick: t[0] || (t[0] = (...a) => e.onClick && e.onClick(...a))
  }, lN, 14, oN);
}
var $h = /* @__PURE__ */ $t(iN, [["render", uN]]);
const cN = Object.assign($h, {
  install: (e, t) => {
    var n;
    const r = (n = t == null ? void 0 : t.iconPrefix) != null ? n : "";
    e.component(r + $h.name, $h);
  }
}), dN = fe({
  name: "IconEyeInvisible",
  props: {
    size: {
      type: [Number, String]
    },
    strokeWidth: {
      type: Number,
      default: 4
    },
    strokeLinecap: {
      type: String,
      default: "butt",
      validator: (e) => ["butt", "round", "square"].includes(e)
    },
    strokeLinejoin: {
      type: String,
      default: "miter",
      validator: (e) => ["arcs", "bevel", "miter", "miter-clip", "round"].includes(e)
    },
    rotate: Number,
    spin: Boolean
  },
  emits: {
    click: (e) => !0
  },
  setup(e, { emit: t }) {
    const n = Je("icon"), r = F(() => [n, `${n}-eye-invisible`, { [`${n}-spin`]: e.spin }]), i = F(() => {
      const a = {};
      return e.size && (a.fontSize = At(e.size) ? `${e.size}px` : e.size), e.rotate && (a.transform = `rotate(${e.rotate}deg)`), a;
    });
    return {
      cls: r,
      innerStyle: i,
      onClick: (a) => {
        t("click", a);
      }
    };
  }
}), fN = ["stroke-width", "stroke-linecap", "stroke-linejoin"], hN = /* @__PURE__ */ Y("path", { d: "M14 14.5c-2.69 2-5.415 5.33-8 9.5 5.373 8.667 11.373 13 18 13 3.325 0 6.491-1.09 9.5-3.271M17.463 12.5C19 11 21.75 11 24 11c6.627 0 12.627 4.333 18 13-1.766 2.848-3.599 5.228-5.5 7.14" }, null, -1), pN = /* @__PURE__ */ Y("path", { d: "M29 24a5 5 0 1 1-10 0 5 5 0 0 1 10 0ZM6.852 7.103l34.294 34.294" }, null, -1), vN = [
  hN,
  pN
];
function gN(e, t, n, r, i, o) {
  return X(), he("svg", {
    viewBox: "0 0 48 48",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    stroke: "currentColor",
    class: ze(e.cls),
    style: Jt(e.innerStyle),
    "stroke-width": e.strokeWidth,
    "stroke-linecap": e.strokeLinecap,
    "stroke-linejoin": e.strokeLinejoin,
    onClick: t[0] || (t[0] = (...a) => e.onClick && e.onClick(...a))
  }, vN, 14, fN);
}
var kh = /* @__PURE__ */ $t(dN, [["render", gN]]);
const yN = Object.assign(kh, {
  install: (e, t) => {
    var n;
    const r = (n = t == null ? void 0 : t.iconPrefix) != null ? n : "";
    e.component(r + kh.name, kh);
  }
});
function gu(e) {
  const t = le(e);
  return [t, (r) => {
    t.value = r;
  }];
}
function mN(e, t) {
  const { value: n } = Qt(t), [r, i] = gu(wr(n.value) ? e : n.value);
  return wt(n, (a) => {
    wr(a) && i(void 0);
  }), [F(() => wr(n.value) ? r.value : n.value), i, r];
}
const _N = fe({
  name: "InputPassword",
  components: {
    IconEye: cN,
    IconEyeInvisible: yN,
    AIconHover: Si,
    AInput: Vl
  },
  props: {
    visibility: {
      type: Boolean,
      default: void 0
    },
    defaultVisibility: {
      type: Boolean,
      default: !0
    },
    invisibleButton: {
      type: Boolean,
      default: !0
    }
  },
  emits: [
    "visibility-change",
    "update:visibility"
  ],
  setup(e, { emit: t }) {
    const { visibility: n, defaultVisibility: r } = Qt(e), i = le(), o = () => {
      l(!a.value);
    }, [a, s] = mN(r.value, Or({
      value: n
    })), l = (u) => {
      u !== a.value && (t("visibility-change", u), t("update:visibility", u), s(u));
    };
    return {
      inputRef: i,
      mergedVisible: a,
      handleInvisible: o
    };
  },
  methods: {
    focus() {
      var e;
      (e = this.inputRef) == null || e.focus();
    },
    blur() {
      var e;
      (e = this.inputRef) == null || e.blur();
    }
  }
});
function bN(e, t, n, r, i, o) {
  const a = Ie("icon-eye"), s = Ie("icon-eye-invisible"), l = Ie("a-icon-hover"), u = Ie("a-input");
  return X(), ot(u, {
    ref: "inputRef",
    type: e.mergedVisible ? "password" : "text"
  }, QC({ _: 2 }, [
    e.$slots.prepend ? {
      name: "prepend",
      fn: Z(() => [
        mt(e.$slots, "prepend")
      ])
    } : void 0,
    e.$slots.prefix ? {
      name: "prefix",
      fn: Z(() => [
        mt(e.$slots, "prefix")
      ])
    } : void 0,
    e.invisibleButton || e.$slots.suffix ? {
      name: "suffix",
      fn: Z(() => [
        e.invisibleButton ? (X(), ot(l, {
          key: 0,
          onClick: e.handleInvisible,
          onMousedown: t[0] || (t[0] = Cs(() => {
          }, ["prevent"])),
          onMouseup: t[1] || (t[1] = Cs(() => {
          }, ["prevent"]))
        }, {
          default: Z(() => [
            e.mergedVisible ? (X(), ot(s, { key: 1 })) : (X(), ot(a, { key: 0 }))
          ]),
          _: 1
        }, 8, ["onClick"])) : vt("v-if", !0),
        mt(e.$slots, "suffix")
      ])
    } : void 0,
    e.$slots.append ? {
      name: "append",
      fn: Z(() => [
        mt(e.$slots, "append")
      ])
    } : void 0
  ]), 1032, ["type"]);
}
var Ih = /* @__PURE__ */ $t(_N, [["render", bN]]);
const wN = fe({
  name: "InputGroup",
  setup() {
    return {
      prefixCls: Je("input-group")
    };
  }
});
function xN(e, t, n, r, i, o) {
  return X(), he("div", {
    class: ze(e.prefixCls)
  }, [
    mt(e.$slots, "default")
  ], 2);
}
var bs = /* @__PURE__ */ $t(wN, [["render", xN]]);
const Ew = Object.assign(Vl, {
  Search: Lh,
  Password: Ih,
  Group: bs,
  install: (e, t) => {
    Ln(e, t);
    const n = Rn(t);
    e.component(n + Vl.name, Vl), e.component(n + bs.name, bs), e.component(n + Lh.name, Lh), e.component(n + Ih.name, Ih);
  }
});
var EN = Object.defineProperty, Bm = Object.getOwnPropertySymbols, SN = Object.prototype.hasOwnProperty, CN = Object.prototype.propertyIsEnumerable, jm = (e, t, n) => t in e ? EN(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, kl = (e, t) => {
  for (var n in t || (t = {}))
    SN.call(t, n) && jm(e, n, t[n]);
  if (Bm)
    for (var n of Bm(t))
      CN.call(t, n) && jm(e, n, t[n]);
  return e;
};
const ON = () => {
  const { height: e, width: t } = mw();
  return {
    width: Math.min(t, window.innerWidth),
    height: Math.min(e, window.innerHeight)
  };
}, zm = (e, t) => {
  var n, r;
  const i = e.getBoundingClientRect();
  return {
    top: i.top,
    bottom: i.bottom,
    left: i.left,
    right: i.right,
    scrollTop: i.top - t.top,
    scrollBottom: i.bottom - t.top,
    scrollLeft: i.left - t.left,
    scrollRight: i.right - t.left,
    width: (n = e.offsetWidth) != null ? n : e.clientWidth,
    height: (r = e.offsetHeight) != null ? r : e.clientHeight
  };
}, AN = (e) => {
  switch (e) {
    case "top":
    case "tl":
    case "tr":
      return "top";
    case "bottom":
    case "bl":
    case "br":
      return "bottom";
    case "left":
    case "lt":
    case "lb":
      return "left";
    case "right":
    case "rt":
    case "rb":
      return "right";
    default:
      return "top";
  }
}, lc = (e, t) => {
  switch (t) {
    case "top":
      switch (e) {
        case "bottom":
          return "top";
        case "bl":
          return "tl";
        case "br":
          return "tr";
        default:
          return e;
      }
    case "bottom":
      switch (e) {
        case "top":
          return "bottom";
        case "tl":
          return "bl";
        case "tr":
          return "br";
        default:
          return e;
      }
    case "left":
      switch (e) {
        case "right":
          return "left";
        case "rt":
          return "lt";
        case "rb":
          return "lb";
        default:
          return e;
      }
    case "right":
      switch (e) {
        case "left":
          return "right";
        case "lt":
          return "rt";
        case "lb":
          return "rb";
        default:
          return e;
      }
    default:
      return e;
  }
}, NN = (e, t, {
  containerRect: n,
  triggerRect: r,
  popupRect: i,
  offset: o,
  translate: a
}) => {
  const s = AN(e), l = ON(), u = {
    top: n.top + t.top,
    bottom: l.height - (n.top + t.top + i.height),
    left: n.left + t.left,
    right: l.width - (n.left + t.left + i.width)
  };
  let c = e;
  if (s === "top" && u.top < 0)
    if (r.top > i.height)
      t.top = -n.top;
    else {
      const d = Il("bottom", r, i, {
        offset: o,
        translate: a
      });
      l.height - (n.top + d.top + i.height) > 0 && (c = lc(e, "bottom"), t.top = d.top);
    }
  if (s === "bottom" && u.bottom < 0)
    if (l.height - r.bottom > i.height)
      t.top = -n.top + (l.height - i.height);
    else {
      const d = Il("top", r, i, {
        offset: o,
        translate: a
      });
      n.top + d.top > 0 && (c = lc(e, "top"), t.top = d.top);
    }
  if (s === "left" && u.left < 0)
    if (r.left > i.width)
      t.left = -n.left;
    else {
      const d = Il("right", r, i, {
        offset: o,
        translate: a
      });
      l.width - (n.left + d.left + i.width) > 0 && (c = lc(e, "right"), t.left = d.left);
    }
  if (s === "right" && u.right < 0)
    if (l.width - r.right > i.width)
      t.left = -n.left + (l.width - i.width);
    else {
      const d = Il("left", r, i, {
        offset: o,
        translate: a
      });
      n.left + d.left > 0 && (c = lc(e, "left"), t.left = d.left);
    }
  return (s === "top" || s === "bottom") && (u.left < 0 ? t.left = -n.left : u.right < 0 && (t.left = -n.left + (l.width - i.width))), (s === "left" || s === "right") && (u.top < 0 ? t.top = -n.top : u.bottom < 0 && (t.top = -n.top + (l.height - i.height))), {
    popupPosition: t,
    position: c
  };
}, Il = (e, t, n, {
  offset: r = 0,
  translate: i = [0, 0]
} = {}) => {
  var o;
  const a = (o = zr(i) ? i : i[e]) != null ? o : [0, 0];
  switch (e) {
    case "top":
      return {
        left: t.scrollLeft + Math.round(t.width / 2) - Math.round(n.width / 2) + a[0],
        top: t.scrollTop - n.height - r + a[1]
      };
    case "tl":
      return {
        left: t.scrollLeft + a[0],
        top: t.scrollTop - n.height - r + a[1]
      };
    case "tr":
      return {
        left: t.scrollRight - n.width + a[0],
        top: t.scrollTop - n.height - r + a[1]
      };
    case "bottom":
      return {
        left: t.scrollLeft + Math.round(t.width / 2) - Math.round(n.width / 2) + a[0],
        top: t.scrollBottom + r + a[1]
      };
    case "bl":
      return {
        left: t.scrollLeft + a[0],
        top: t.scrollBottom + r + a[1]
      };
    case "br":
      return {
        left: t.scrollRight - n.width + a[0],
        top: t.scrollBottom + r + a[1]
      };
    case "left":
      return {
        left: t.scrollLeft - n.width - r + a[0],
        top: t.scrollTop + Math.round(t.height / 2) - Math.round(n.height / 2) + a[1]
      };
    case "lt":
      return {
        left: t.scrollLeft - n.width - r + a[0],
        top: t.scrollTop + a[1]
      };
    case "lb":
      return {
        left: t.scrollLeft - n.width - r + a[0],
        top: t.scrollBottom - n.height + a[1]
      };
    case "right":
      return {
        left: t.scrollRight + r + a[0],
        top: t.scrollTop + Math.round(t.height / 2) - Math.round(n.height / 2) + a[1]
      };
    case "rt":
      return {
        left: t.scrollRight + r + a[0],
        top: t.scrollTop + a[1]
      };
    case "rb":
      return {
        left: t.scrollRight + r + a[0],
        top: t.scrollBottom - n.height + a[1]
      };
    default:
      return {
        left: 0,
        top: 0
      };
  }
}, MN = (e) => {
  let t = "0";
  ["top", "bottom"].includes(e) ? t = "50%" : ["left", "lt", "lb", "tr", "br"].includes(e) && (t = "100%");
  let n = "0";
  return ["left", "right"].includes(e) ? n = "50%" : ["top", "tl", "tr", "lb", "rb"].includes(e) && (n = "100%"), `${t} ${n}`;
}, TN = (e, t, n, r, {
  offset: i = 0,
  translate: o = [0, 0],
  customStyle: a = {},
  autoFitPosition: s = !1
} = {}) => {
  let l = e, u = Il(e, n, r, {
    offset: i,
    translate: o
  });
  if (s) {
    const d = NN(e, u, {
      containerRect: t,
      popupRect: r,
      triggerRect: n,
      offset: i,
      translate: o
    });
    u = d.popupPosition, l = d.position;
  }
  return {
    style: kl({
      left: `${u.left}px`,
      top: `${u.top}px`
    }, a),
    position: l
  };
}, PN = (e, t, n, {
  customStyle: r = {}
}) => {
  if (["top", "tl", "tr", "bottom", "bl", "br"].includes(e)) {
    let o = Math.abs(t.scrollLeft + t.width / 2 - n.scrollLeft);
    return o > n.width - 8 && (t.width > n.width ? o = n.width / 2 : o = n.width - 8), ["top", "tl", "tr"].includes(e) ? kl({
      left: `${o}px`,
      bottom: "0",
      transform: "translate(-50%,50%) rotate(45deg)"
    }, r) : kl({
      left: `${o}px`,
      top: "0",
      transform: "translate(-50%,-50%) rotate(45deg)"
    }, r);
  }
  let i = Math.abs(t.scrollTop + t.height / 2 - n.scrollTop);
  return i > n.height - 8 && (t.height > n.height ? i = n.height / 2 : i = n.height - 8), ["left", "lt", "lb"].includes(e) ? kl({
    top: `${i}px`,
    right: "0",
    transform: "translate(50%,-50%) rotate(45deg)"
  }, r) : kl({
    top: `${i}px`,
    left: "0",
    transform: "translate(-50%,-50%) rotate(45deg)"
  }, r);
}, DN = (e) => e.scrollHeight > e.offsetHeight || e.scrollWidth > e.offsetWidth, Fm = (e) => {
  var t;
  const n = [];
  let r = e;
  for (; r && r !== document.documentElement; )
    DN(r) && n.push(r), r = (t = r.parentElement) != null ? t : void 0;
  return n;
}, Sw = () => {
  const e = {}, t = le(), n = () => {
    const r = gw(e.value);
    r !== t.value && (t.value = r);
  };
  return fr(() => n()), _f(() => n()), {
    children: e,
    firstElement: t
  };
};
var Jp = fe({
  name: "ResizeObserver",
  props: {
    watchOnUpdated: Boolean
  },
  emits: [
    "resize"
  ],
  setup(e, { emit: t, slots: n }) {
    const { children: r, firstElement: i } = Sw();
    let o;
    const a = (l) => {
      l && (o = new Ng((u) => {
        const c = u[0];
        t("resize", c);
      }), o.observe(l));
    }, s = () => {
      o && (o.disconnect(), o = null);
    };
    return wt(i, (l) => {
      o && s(), l && a(l);
    }), Ys(() => {
      o && s();
    }), () => {
      var l;
      return r.value = (l = n.default) == null ? void 0 : l.call(n), r.value;
    };
  }
});
function RN(e, t) {
  const n = le(e[t]);
  return _f(() => {
    const r = e[t];
    n.value !== r && (n.value = r);
  }), n;
}
const Hm = Symbol("ArcoTrigger"), LN = 1e3, $N = 5e3, kN = 1;
class IN {
  constructor() {
    this.popupStack = {
      popup: /* @__PURE__ */ new Set(),
      dialog: /* @__PURE__ */ new Set(),
      message: /* @__PURE__ */ new Set()
    }, this.getNextZIndex = (t) => (t === "message" ? Array.from(this.popupStack.message).pop() || $N : Array.from(this.popupStack.popup).pop() || LN) + kN, this.add = (t) => {
      const n = this.getNextZIndex(t);
      return this.popupStack[t].add(n), t === "dialog" && this.popupStack.popup.add(n), n;
    }, this.delete = (t, n) => {
      this.popupStack[n].delete(t), n === "dialog" && this.popupStack.popup.delete(t);
    }, this.isLastDialog = (t) => this.popupStack.dialog.size > 1 ? t === Array.from(this.popupStack.dialog).pop() : !0;
  }
}
const Bh = new IN();
function Cw(e, {
  visible: t,
  runOnMounted: n
} = {}) {
  const r = le(0), i = () => {
    r.value = Bh.add(e);
  }, o = () => {
    Bh.delete(r.value, e);
  }, a = () => e === "dialog" ? Bh.isLastDialog(r.value) : !1;
  return wt(() => t == null ? void 0 : t.value, (s) => {
    s ? i() : o();
  }, {
    immediate: !0
  }), n && (fr(() => {
    i();
  }), Ys(() => {
    o();
  })), {
    zIndex: eO(r),
    open: i,
    close: o,
    isLastDialog: a
  };
}
const BN = ({
  elementRef: e,
  onResize: t
}) => {
  let n;
  return {
    createResizeObserver: () => {
      e.value && (n = new Ng((o) => {
        const a = o[0];
        Nn(t) && t(a);
      }), n.observe(e.value));
    },
    destroyResizeObserver: () => {
      n && (n.disconnect(), n = null);
    }
  };
};
var Ow = fe({
  name: "ClientOnly",
  setup(e, {
    slots: t
  }) {
    const n = le(!1);
    return fr(() => n.value = !0), () => {
      var r;
      return n.value ? (r = t.default) == null ? void 0 : r.call(t) : null;
    };
  }
});
const Aw = ({
  popupContainer: e,
  visible: t,
  defaultContainer: n = "body",
  documentContainer: r
}) => {
  const i = le(e.value), o = le(), a = () => {
    const s = qp(e.value), l = s ? e.value : n, u = s ?? (r ? document.documentElement : qp(n));
    l !== i.value && (i.value = l), u !== o.value && (o.value = u);
  };
  return fr(() => a()), wt(t, (s) => {
    i.value !== e.value && s && a();
  }), {
    teleportContainer: i,
    containerRef: o
  };
};
var jN = Object.defineProperty, zN = Object.defineProperties, FN = Object.getOwnPropertyDescriptors, Vm = Object.getOwnPropertySymbols, HN = Object.prototype.hasOwnProperty, VN = Object.prototype.propertyIsEnumerable, Wm = (e, t, n) => t in e ? jN(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, WN = (e, t) => {
  for (var n in t || (t = {}))
    HN.call(t, n) && Wm(e, n, t[n]);
  if (Vm)
    for (var n of Vm(t))
      VN.call(t, n) && Wm(e, n, t[n]);
  return e;
}, GN = (e, t) => zN(e, FN(t));
const XN = ["onClick", "onMouseenter", "onMouseleave", "onFocusin", "onFocusout", "onContextmenu"];
var jh = fe({
  name: "Trigger",
  inheritAttrs: !1,
  props: {
    popupVisible: {
      type: Boolean,
      default: void 0
    },
    defaultPopupVisible: {
      type: Boolean,
      default: !1
    },
    trigger: {
      type: [String, Array],
      default: "hover"
    },
    position: {
      type: String,
      default: "bottom"
    },
    disabled: {
      type: Boolean,
      default: !1
    },
    popupOffset: {
      type: Number,
      default: 0
    },
    popupTranslate: {
      type: [Array, Object]
    },
    showArrow: {
      type: Boolean,
      default: !1
    },
    alignPoint: {
      type: Boolean,
      default: !1
    },
    popupHoverStay: {
      type: Boolean,
      default: !0
    },
    blurToClose: {
      type: Boolean,
      default: !0
    },
    clickToClose: {
      type: Boolean,
      default: !0
    },
    clickOutsideToClose: {
      type: Boolean,
      default: !0
    },
    unmountOnClose: {
      type: Boolean,
      default: !0
    },
    contentClass: {
      type: [String, Array, Object]
    },
    contentStyle: {
      type: Object
    },
    arrowClass: {
      type: [String, Array, Object]
    },
    arrowStyle: {
      type: Object
    },
    popupStyle: {
      type: Object
    },
    animationName: {
      type: String,
      default: "fade-in"
    },
    duration: {
      type: [Number, Object]
    },
    mouseEnterDelay: {
      type: Number,
      default: 100
    },
    mouseLeaveDelay: {
      type: Number,
      default: 100
    },
    focusDelay: {
      type: Number,
      default: 0
    },
    autoFitPopupWidth: {
      type: Boolean,
      default: !1
    },
    autoFitPopupMinWidth: {
      type: Boolean,
      default: !1
    },
    autoFixPosition: {
      type: Boolean,
      default: !0
    },
    popupContainer: {
      type: [String, Object]
    },
    updateAtScroll: {
      type: Boolean,
      default: !1
    },
    autoFitTransformOrigin: {
      type: Boolean,
      default: !1
    },
    hideEmpty: {
      type: Boolean,
      default: !1
    },
    openedClass: {
      type: [String, Array, Object]
    },
    autoFitPosition: {
      type: Boolean,
      default: !0
    },
    renderToBody: {
      type: Boolean,
      default: !0
    },
    preventFocus: {
      type: Boolean,
      default: !1
    },
    scrollToClose: {
      type: Boolean,
      default: !1
    },
    scrollToCloseDistance: {
      type: Number,
      default: 0
    }
  },
  emits: {
    "update:popupVisible": (e) => !0,
    popupVisibleChange: (e) => !0,
    show: () => !0,
    hide: () => !0,
    resize: () => !0
  },
  setup(e, {
    emit: t,
    slots: n,
    attrs: r
  }) {
    const {
      popupContainer: i
    } = Qt(e), o = Je("trigger"), a = F(() => ju(r, XN)), s = ur(fo, void 0), l = F(() => [].concat(e.trigger)), u = /* @__PURE__ */ new Set(), c = ur(Hm, void 0), {
      children: d,
      firstElement: f
    } = Sw(), h = le(), p = le(e.defaultPopupVisible), v = le(e.position), g = le({}), y = le({}), m = le({}), E = le(), w = le({
      top: 0,
      left: 0
    });
    let S = null, _ = null;
    const b = F(() => {
      var z;
      return (z = e.popupVisible) != null ? z : p.value;
    }), {
      teleportContainer: T,
      containerRef: R
    } = Aw({
      popupContainer: i,
      visible: b,
      documentContainer: !0
    }), {
      zIndex: B
    } = Cw("popup", {
      visible: b
    });
    let K = 0, ae = !1, x = !1;
    const P = () => {
      K && (window.clearTimeout(K), K = 0);
    }, L = (z) => {
      if (e.alignPoint) {
        const {
          pageX: W,
          pageY: Ce
        } = z;
        w.value = {
          top: Ce,
          left: W
        };
      }
    }, k = () => {
      if (!f.value || !h.value || !R.value)
        return;
      const z = R.value.getBoundingClientRect(), W = e.alignPoint ? {
        top: w.value.top,
        bottom: w.value.top,
        left: w.value.left,
        right: w.value.left,
        scrollTop: w.value.top,
        scrollBottom: w.value.top,
        scrollLeft: w.value.left,
        scrollRight: w.value.left,
        width: 0,
        height: 0
      } : zm(f.value, z), Ce = () => zm(h.value, z), et = Ce(), {
        style: qe,
        position: ln
      } = TN(e.position, z, W, et, {
        offset: e.popupOffset,
        translate: e.popupTranslate,
        customStyle: e.popupStyle,
        autoFitPosition: e.autoFitPosition
      });
      e.autoFitTransformOrigin && (y.value = {
        transformOrigin: MN(ln)
      }), e.autoFitPopupMinWidth ? qe.minWidth = `${W.width}px` : e.autoFitPopupWidth && (qe.width = `${W.width}px`), v.value !== ln && (v.value = ln), g.value = qe, e.showArrow && Hn(() => {
        m.value = PN(ln, W, Ce(), {
          customStyle: e.arrowStyle
        });
      });
    }, J = (z, W) => {
      if (z === b.value && K === 0)
        return;
      const Ce = () => {
        p.value = z, t("update:popupVisible", z), t("popupVisibleChange", z), z && Hn(() => {
          k();
        });
      };
      z || (S = null, _ = null), W ? (P(), z !== b.value && (K = window.setTimeout(Ce, W))) : Ce();
    }, de = (z) => {
      var W;
      (W = r.onClick) == null || W.call(r, z), !(e.disabled || b.value && !e.clickToClose) && (l.value.includes("click") ? (L(z), J(!b.value)) : l.value.includes("contextMenu") && b.value && J(!1));
    }, Ne = (z) => {
      var W;
      (W = r.onMouseenter) == null || W.call(r, z), !(e.disabled || !l.value.includes("hover")) && (L(z), J(!0, e.mouseEnterDelay));
    }, se = (z) => {
      c == null || c.onMouseenter(z), Ne(z);
    }, G = (z) => {
      var W;
      (W = r.onMouseleave) == null || W.call(r, z), !(e.disabled || !l.value.includes("hover")) && J(!1, e.mouseLeaveDelay);
    }, be = (z) => {
      c == null || c.onMouseleave(z), G(z);
    }, Oe = (z) => {
      var W;
      (W = r.onFocusin) == null || W.call(r, z), !(e.disabled || !l.value.includes("focus")) && J(!0, e.focusDelay);
    }, Ae = (z) => {
      var W;
      (W = r.onFocusout) == null || W.call(r, z), !(e.disabled || !l.value.includes("focus")) && e.blurToClose && J(!1);
    }, Re = (z) => {
      var W;
      (W = r.onContextmenu) == null || W.call(r, z), !(e.disabled || !l.value.includes("contextMenu") || b.value && !e.clickToClose) && (L(z), J(!b.value), z.preventDefault());
    };
    ja(Hm, Or({
      onMouseenter: se,
      onMouseleave: be,
      addChildRef: (z) => {
        u.add(z), c == null || c.addChildRef(z);
      },
      removeChildRef: (z) => {
        u.delete(z), c == null || c.removeChildRef(z);
      }
    }));
    const ee = () => {
      Ca(document.documentElement, "mousedown", ye), ae = !1;
    }, _e = RN(n, "content"), xe = F(() => {
      var z;
      return e.hideEmpty && XO((z = _e.value) == null ? void 0 : z.call(_e));
    }), ye = (z) => {
      var W, Ce, et;
      if (!((W = f.value) != null && W.contains(z.target) || (Ce = h.value) != null && Ce.contains(z.target))) {
        for (const qe of u)
          if ((et = qe.value) != null && et.contains(z.target))
            return;
        ee(), J(!1);
      }
    }, Ge = (z, W) => {
      const [Ce, et] = z, {
        scrollTop: qe,
        scrollLeft: ln
      } = W;
      return Math.abs(qe - Ce) >= e.scrollToCloseDistance || Math.abs(ln - et) >= e.scrollToCloseDistance;
    }, Ee = Dm((z) => {
      if (b.value)
        if (e.scrollToClose || s != null && s.scrollToClose) {
          const W = z.target;
          S || (S = [W.scrollTop, W.scrollLeft]), Ge(S, W) ? J(!1) : k();
        } else
          k();
    }), ce = () => {
      Ca(window, "scroll", Te), x = !1;
    }, Te = Dm((z) => {
      const W = z.target.documentElement;
      _ || (_ = [W.scrollTop, W.scrollLeft]), Ge(_, W) && (J(!1), ce());
    }), Le = () => {
      b.value && k();
    }, Ct = () => {
      Le(), t("resize");
    }, bt = (z) => {
      e.preventFocus && z.preventDefault();
    };
    c == null || c.addChildRef(h);
    const M = F(() => b.value ? e.openedClass : void 0);
    let D;
    wt(b, (z) => {
      if (e.clickOutsideToClose && (!z && ae ? ee() : z && !ae && (ji(document.documentElement, "mousedown", ye), ae = !0)), (e.scrollToClose || s != null && s.scrollToClose) && (ji(window, "scroll", Te), x = !0), e.updateAtScroll || s != null && s.updateAtScroll) {
        if (z) {
          D = Fm(f.value);
          for (const W of D)
            W.addEventListener("scroll", Ee);
        } else if (D) {
          for (const W of D)
            W.removeEventListener("scroll", Ee);
          D = void 0;
        }
      }
      z && (j.value = !0);
    }), wt(() => [e.autoFitPopupWidth, e.autoFitPopupMinWidth], () => {
      b.value && k();
    });
    const {
      createResizeObserver: I,
      destroyResizeObserver: ue
    } = BN({
      elementRef: R,
      onResize: Le
    });
    fr(() => {
      if (I(), b.value && (k(), e.clickOutsideToClose && !ae && (ji(document.documentElement, "mousedown", ye), ae = !0), e.updateAtScroll || s != null && s.updateAtScroll)) {
        D = Fm(f.value);
        for (const z of D)
          z.addEventListener("scroll", Ee);
      }
    }), _f(() => {
      b.value && k();
    }), tO(() => {
      J(!1);
    }), Ys(() => {
      if (c == null || c.removeChildRef(h), ue(), ae && ee(), x && ce(), D) {
        for (const z of D)
          z.removeEventListener("scroll", Ee);
        D = void 0;
      }
    });
    const j = le(b.value), ge = le(!1), pe = () => {
      ge.value = !0;
    }, we = () => {
      ge.value = !1, b.value && t("show");
    }, U = () => {
      ge.value = !1, b.value || (j.value = !1, t("hide"));
    };
    return () => {
      var z, W;
      return d.value = (W = (z = n.default) == null ? void 0 : z.call(n)) != null ? W : [], hw(d.value, {
        class: M.value,
        onClick: de,
        onMouseenter: Ne,
        onMouseleave: G,
        onFocusin: Oe,
        onFocusout: Ae,
        onContextmenu: Re
      }), A(Un, null, [e.autoFixPosition ? A(Jp, {
        onResize: Ct
      }, {
        default: () => [d.value]
      }) : d.value, A(Ow, null, {
        default: () => [A(tw, {
          to: T.value,
          disabled: !e.renderToBody
        }, {
          default: () => [(!e.unmountOnClose || b.value || j.value) && !xe.value && A(Jp, {
            onResize: Le
          }, {
            default: () => [A("div", dn({
              ref: h,
              class: [`${o}-popup`, `${o}-position-${v.value}`],
              style: GN(WN({}, g.value), {
                zIndex: B.value,
                pointerEvents: ge.value ? "none" : "auto"
              }),
              "trigger-placement": v.value,
              onMouseenter: se,
              onMouseleave: be,
              onMousedown: bt
            }, a.value), [A(pu, {
              name: e.animationName,
              duration: e.duration,
              appear: !0,
              onBeforeEnter: pe,
              onAfterEnter: we,
              onBeforeLeave: pe,
              onAfterLeave: U
            }, {
              default: () => {
                var Ce;
                return [$r(A("div", {
                  class: `${o}-popup-wrapper`,
                  style: y.value
                }, [A("div", {
                  class: [`${o}-content`, e.contentClass],
                  style: e.contentStyle
                }, [(Ce = n.content) == null ? void 0 : Ce.call(n)]), e.showArrow && A("div", {
                  ref: E,
                  class: [`${o}-arrow`, e.arrowClass],
                  style: m.value
                }, null)]), [[kr, b.value]])];
              }
            })])]
          })]
        })]
      })]);
    };
  }
});
const cd = Object.assign(jh, {
  install: (e, t) => {
    Ln(e, t);
    const n = Rn(t);
    e.component(n + jh.name, jh);
  }
}), UN = fe({
  name: "IconEmpty",
  props: {
    size: {
      type: [Number, String]
    },
    strokeWidth: {
      type: Number,
      default: 4
    },
    strokeLinecap: {
      type: String,
      default: "butt",
      validator: (e) => ["butt", "round", "square"].includes(e)
    },
    strokeLinejoin: {
      type: String,
      default: "miter",
      validator: (e) => ["arcs", "bevel", "miter", "miter-clip", "round"].includes(e)
    },
    rotate: Number,
    spin: Boolean
  },
  emits: {
    click: (e) => !0
  },
  setup(e, { emit: t }) {
    const n = Je("icon"), r = F(() => [n, `${n}-empty`, { [`${n}-spin`]: e.spin }]), i = F(() => {
      const a = {};
      return e.size && (a.fontSize = At(e.size) ? `${e.size}px` : e.size), e.rotate && (a.transform = `rotate(${e.rotate}deg)`), a;
    });
    return {
      cls: r,
      innerStyle: i,
      onClick: (a) => {
        t("click", a);
      }
    };
  }
}), YN = ["stroke-width", "stroke-linecap", "stroke-linejoin"], KN = /* @__PURE__ */ Y("path", { d: "M24 5v6m7 1 4-4m-18 4-4-4m28.5 22H28s-1 3-4 3-4-3-4-3H6.5M40 41H8a2 2 0 0 1-2-2v-8.46a2 2 0 0 1 .272-1.007l6.15-10.54A2 2 0 0 1 14.148 18H33.85a2 2 0 0 1 1.728.992l6.149 10.541A2 2 0 0 1 42 30.541V39a2 2 0 0 1-2 2Z" }, null, -1), qN = [
  KN
];
function ZN(e, t, n, r, i, o) {
  return X(), he("svg", {
    viewBox: "0 0 48 48",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    stroke: "currentColor",
    class: ze(e.cls),
    style: Jt(e.innerStyle),
    "stroke-width": e.strokeWidth,
    "stroke-linecap": e.strokeLinecap,
    "stroke-linejoin": e.strokeLinejoin,
    onClick: t[0] || (t[0] = (...a) => e.onClick && e.onClick(...a))
  }, qN, 14, YN);
}
var zh = /* @__PURE__ */ $t(UN, [["render", ZN]]);
const JN = Object.assign(zh, {
  install: (e, t) => {
    var n;
    const r = (n = t == null ? void 0 : t.iconPrefix) != null ? n : "";
    e.component(r + zh.name, zh);
  }
});
var Fh = fe({
  name: "Empty",
  inheritAttrs: !1,
  props: {
    description: String,
    imgSrc: String,
    inConfigProvider: {
      type: Boolean,
      default: !1
    }
  },
  setup(e, {
    slots: t,
    attrs: n
  }) {
    const r = Je("empty"), {
      t: i
    } = Ag(), o = ur(fo, void 0);
    return () => {
      var a, s, l, u;
      return !e.inConfigProvider && (o != null && o.slots.empty) && !(t.image || e.imgSrc || e.description) ? o.slots.empty({
        component: "empty"
      }) : A("div", dn({
        class: r
      }, n), [A("div", {
        class: `${r}-image`
      }, [(s = (a = t.image) == null ? void 0 : a.call(t)) != null ? s : e.imgSrc ? A("img", {
        src: e.imgSrc,
        alt: e.description || "empty"
      }, null) : A(JN, null, null)]), A("div", {
        class: `${r}-description`
      }, [(u = (l = t.default) == null ? void 0 : l.call(t)) != null ? u : e.description || i("empty.description")])]);
    };
  }
});
const Nw = Object.assign(Fh, {
  install: (e, t) => {
    Ln(e, t);
    const n = Rn(t);
    e.component(n + Fh.name, Fh);
  }
}), QN = 5;
var eM = fe({
  name: "DotLoading",
  props: {
    size: {
      type: Number
    }
  },
  setup(e) {
    const t = Je("dot-loading");
    return () => {
      const n = e.size ? {
        width: `${e.size}px`,
        height: `${e.size}px`
      } : {};
      return A("div", {
        class: t,
        style: {
          width: e.size ? `${e.size * 7}px` : void 0,
          height: e.size ? `${e.size}px` : void 0
        }
      }, [Array(QN).fill(1).map((r, i) => A("div", {
        class: `${t}-item`,
        key: i,
        style: n
      }, null))]);
    };
  }
}), Hh = fe({
  name: "Spin",
  props: {
    size: {
      type: Number
    },
    loading: Boolean,
    dot: Boolean,
    tip: String,
    hideIcon: {
      type: Boolean,
      default: !1
    }
  },
  setup(e, {
    slots: t
  }) {
    const n = Je("spin"), r = ur(fo, void 0), i = F(() => [n, {
      [`${n}-loading`]: e.loading,
      [`${n}-with-tip`]: e.tip && !t.default
    }]), o = () => {
      if (t.icon) {
        const s = _s(t.icon());
        if (s)
          return mf(s, {
            spin: !0
          });
      }
      return t.element ? t.element() : e.dot ? A(eM, {
        size: e.size
      }, null) : r != null && r.slots.loading ? r.slots.loading() : A(qs, {
        spin: !0,
        size: e.size
      }, null);
    }, a = () => {
      var s, l, u;
      const c = e.size ? {
        fontSize: `${e.size}px`
      } : void 0, d = !!((s = t.tip) != null ? s : e.tip);
      return A(Un, null, [!e.hideIcon && A("div", {
        class: `${n}-icon`,
        style: c
      }, [o()]), d && A("div", {
        class: `${n}-tip`
      }, [(u = (l = t.tip) == null ? void 0 : l.call(t)) != null ? u : e.tip])]);
    };
    return () => A("div", {
      class: i.value
    }, [t.default ? A(Un, null, [t.default(), e.loading && A("div", {
      class: `${n}-mask`
    }, [A("div", {
      class: `${n}-mask-icon`
    }, [a()])])]) : a()]);
  }
});
const tM = Object.assign(Hh, {
  install: (e, t) => {
    Ln(e, t);
    const n = Rn(t);
    e.component(n + Hh.name, Hh);
  }
}), nM = fe({
  name: "Thumb",
  props: {
    data: {
      type: Object
    },
    direction: {
      type: String,
      default: "horizontal"
    },
    alwaysShow: {
      type: Boolean,
      default: !1
    },
    both: {
      type: Boolean,
      default: !1
    }
  },
  emits: ["scroll"],
  setup(e, { emit: t }) {
    const n = Je("scrollbar"), r = le(!1), i = le(), o = le(), a = F(() => e.direction === "horizontal" ? {
      size: "width",
      direction: "left",
      offset: "offsetWidth",
      client: "clientX"
    } : {
      size: "height",
      direction: "top",
      offset: "offsetHeight",
      client: "clientY"
    }), s = le(0), l = le(!1), u = le(0), c = F(() => {
      var m, E;
      return {
        [a.value.size]: `${(E = (m = e.data) == null ? void 0 : m.thumbSize) != null ? E : 0}px`,
        [a.value.direction]: `${s.value}px`
      };
    }), d = (m) => {
      m.preventDefault(), o.value && (u.value = m[a.value.client] - o.value.getBoundingClientRect()[a.value.direction], l.value = !0, ji(window, "mousemove", p), ji(window, "mouseup", v), ji(window, "contextmenu", v));
    }, f = (m) => {
      var E, w, S, _;
      if (m.preventDefault(), o.value) {
        const b = h(m[a.value.client] > o.value.getBoundingClientRect()[a.value.direction] ? s.value + ((w = (E = e.data) == null ? void 0 : E.thumbSize) != null ? w : 0) : s.value - ((_ = (S = e.data) == null ? void 0 : S.thumbSize) != null ? _ : 0));
        b !== s.value && (s.value = b, t("scroll", b));
      }
    }, h = (m) => m < 0 ? 0 : e.data && m > e.data.max ? e.data.max : m, p = (m) => {
      if (i.value && o.value) {
        const E = h(m[a.value.client] - i.value.getBoundingClientRect()[a.value.direction] - u.value);
        E !== s.value && (s.value = E, t("scroll", E));
      }
    }, v = () => {
      l.value = !1, Ca(window, "mousemove", p), Ca(window, "mouseup", v);
    }, g = (m) => {
      l.value || (m = h(m), m !== s.value && (s.value = m));
    }, y = F(() => [
      `${n}-thumb`,
      `${n}-thumb-direction-${e.direction}`,
      {
        [`${n}-thumb-dragging`]: l.value
      }
    ]);
    return {
      visible: r,
      trackRef: i,
      thumbRef: o,
      prefixCls: n,
      thumbCls: y,
      thumbStyle: c,
      handleThumbMouseDown: d,
      handleTrackClick: f,
      setOffset: g
    };
  }
});
function rM(e, t, n, r, i, o) {
  return X(), ot(pu, null, {
    default: Z(() => [
      Y("div", {
        ref: "trackRef",
        class: ze([
          `${e.prefixCls}-track`,
          `${e.prefixCls}-track-direction-${e.direction}`
        ]),
        onMousedown: t[1] || (t[1] = Cs((...a) => e.handleTrackClick && e.handleTrackClick(...a), ["self"]))
      }, [
        Y("div", {
          ref: "thumbRef",
          class: ze(e.thumbCls),
          style: Jt(e.thumbStyle),
          onMousedown: t[0] || (t[0] = (...a) => e.handleThumbMouseDown && e.handleThumbMouseDown(...a))
        }, [
          Y("div", {
            class: ze(`${e.prefixCls}-thumb-bar`)
          }, null, 2)
        ], 38)
      ], 34)
    ]),
    _: 1
  });
}
var iM = /* @__PURE__ */ $t(nM, [["render", rM]]);
const Gm = 20, uc = 15, oM = fe({
  name: "Scrollbar",
  components: {
    ResizeObserver: Jp,
    Thumb: iM
  },
  inheritAttrs: !1,
  props: {
    type: {
      type: String,
      default: "embed"
    },
    outerClass: [String, Object, Array],
    outerStyle: {
      type: [String, Object, Array]
    },
    hide: {
      type: Boolean,
      default: !1
    },
    disableHorizontal: {
      type: Boolean,
      default: !1
    },
    disableVertical: {
      type: Boolean,
      default: !1
    }
  },
  emits: {
    scroll: (e) => !0
  },
  setup(e, { emit: t }) {
    const n = Je("scrollbar"), r = le(), i = le(), o = le(), a = le(), s = le(), l = le(!1), u = le(!1), c = F(() => l.value && !e.disableHorizontal), d = F(() => u.value && !e.disableVertical), f = le(!1), h = () => {
      var w, S, _, b, T, R;
      if (r.value) {
        const {
          clientWidth: B,
          clientHeight: K,
          offsetWidth: ae,
          offsetHeight: x,
          scrollWidth: P,
          scrollHeight: L,
          scrollTop: k,
          scrollLeft: J
        } = r.value;
        l.value = P > B, u.value = L > K, f.value = c.value && d.value;
        const de = e.type === "embed" && f.value ? ae - uc : ae, Ne = e.type === "embed" && f.value ? x - uc : x, se = Math.round(de / Math.min(P / B, de / Gm)), G = de - se, be = (P - B) / G, Oe = Math.round(Ne / Math.min(L / K, Ne / Gm)), Ae = Ne - Oe, Re = (L - K) / Ae;
        if (i.value = {
          ratio: be,
          thumbSize: se,
          max: G
        }, o.value = {
          ratio: Re,
          thumbSize: Oe,
          max: Ae
        }, k > 0) {
          const $ = Math.round(k / ((S = (w = o.value) == null ? void 0 : w.ratio) != null ? S : 1));
          (_ = s.value) == null || _.setOffset($);
        }
        if (J > 0) {
          const $ = Math.round(J / ((T = (b = o.value) == null ? void 0 : b.ratio) != null ? T : 1));
          (R = a.value) == null || R.setOffset($);
        }
      }
    };
    fr(() => {
      h();
    });
    const p = () => {
      h();
    }, v = (w) => {
      var S, _, b, T, R, B;
      if (r.value) {
        if (c.value && !e.disableHorizontal) {
          const K = Math.round(r.value.scrollLeft / ((_ = (S = i.value) == null ? void 0 : S.ratio) != null ? _ : 1));
          (b = a.value) == null || b.setOffset(K);
        }
        if (d.value && !e.disableVertical) {
          const K = Math.round(r.value.scrollTop / ((R = (T = o.value) == null ? void 0 : T.ratio) != null ? R : 1));
          (B = s.value) == null || B.setOffset(K);
        }
      }
      t("scroll", w);
    }, g = (w) => {
      var S, _;
      r.value && r.value.scrollTo({
        left: w * ((_ = (S = i.value) == null ? void 0 : S.ratio) != null ? _ : 1)
      });
    }, y = (w) => {
      var S, _;
      r.value && r.value.scrollTo({
        top: w * ((_ = (S = o.value) == null ? void 0 : S.ratio) != null ? _ : 1)
      });
    }, m = F(() => {
      const w = {};
      return e.type === "track" && (c.value && (w.paddingBottom = `${uc}px`), d.value && (w.paddingRight = `${uc}px`)), [w, e.outerStyle];
    }), E = F(() => [
      `${n}`,
      `${n}-type-${e.type}`,
      {
        [`${n}-both`]: f.value
      },
      e.outerClass
    ]);
    return {
      prefixCls: n,
      cls: E,
      style: m,
      containerRef: r,
      horizontalThumbRef: a,
      verticalThumbRef: s,
      horizontalData: i,
      verticalData: o,
      isBoth: f,
      hasHorizontalScrollbar: c,
      hasVerticalScrollbar: d,
      handleResize: p,
      handleScroll: v,
      handleHorizontalScroll: g,
      handleVerticalScroll: y
    };
  },
  methods: {
    scrollTo(e, t) {
      var n, r;
      Fn(e) ? (n = this.$refs.containerRef) == null || n.scrollTo(e) : (e || t) && ((r = this.$refs.containerRef) == null || r.scrollTo(e, t));
    },
    scrollTop(e) {
      var t;
      (t = this.$refs.containerRef) == null || t.scrollTo({
        top: e
      });
    },
    scrollLeft(e) {
      var t;
      (t = this.$refs.containerRef) == null || t.scrollTo({
        left: e
      });
    }
  }
});
function aM(e, t, n, r, i, o) {
  const a = Ie("ResizeObserver"), s = Ie("thumb");
  return X(), he("div", {
    class: ze(e.cls),
    style: Jt(e.style)
  }, [
    A(a, { onResize: e.handleResize }, {
      default: Z(() => [
        Y("div", dn({
          ref: "containerRef",
          class: `${e.prefixCls}-container`
        }, e.$attrs, {
          onScroll: t[0] || (t[0] = (...l) => e.handleScroll && e.handleScroll(...l))
        }), [
          A(a, { onResize: e.handleResize }, {
            default: Z(() => [
              mt(e.$slots, "default")
            ]),
            _: 3
          }, 8, ["onResize"])
        ], 16)
      ]),
      _: 3
    }, 8, ["onResize"]),
    !e.hide && e.hasHorizontalScrollbar ? (X(), ot(s, {
      key: 0,
      ref: "horizontalThumbRef",
      data: e.horizontalData,
      direction: "horizontal",
      both: e.isBoth,
      onScroll: e.handleHorizontalScroll
    }, null, 8, ["data", "both", "onScroll"])) : vt("v-if", !0),
    !e.hide && e.hasVerticalScrollbar ? (X(), ot(s, {
      key: 1,
      ref: "verticalThumbRef",
      data: e.verticalData,
      direction: "vertical",
      both: e.isBoth,
      onScroll: e.handleVerticalScroll
    }, null, 8, ["data", "both", "onScroll"])) : vt("v-if", !0)
  ], 6);
}
var Vh = /* @__PURE__ */ $t(oM, [["render", aM]]);
const sM = Object.assign(Vh, {
  install: (e, t) => {
    Ln(e, t);
    const n = Rn(t);
    e.component(n + Vh.name, Vh);
  }
}), lM = (e) => {
  const t = le(), n = () => aw(t.value) ? t.value.$refs[e] : t.value, r = le();
  return fr(() => {
    r.value = n();
  }), wt([t], () => {
    r.value = n();
  }), {
    componentRef: t,
    elementRef: r
  };
};
var uM = Object.defineProperty, Xm = Object.getOwnPropertySymbols, cM = Object.prototype.hasOwnProperty, dM = Object.prototype.propertyIsEnumerable, Um = (e, t, n) => t in e ? uM(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, fM = (e, t) => {
  for (var n in t || (t = {}))
    cM.call(t, n) && Um(e, n, t[n]);
  if (Xm)
    for (var n of Xm(t))
      dM.call(t, n) && Um(e, n, t[n]);
  return e;
};
const hM = (e) => {
  const t = F(() => !!e.value), n = F(() => {
    if (e.value)
      return fM({
        type: "embed"
      }, vu(e.value) ? void 0 : e.value);
  });
  return {
    displayScrollbar: t,
    scrollbarProps: n
  };
}, pM = fe({
  name: "SelectDropdown",
  components: {
    ScrollbarComponent: sM,
    Empty: Nw,
    Spin: tM
  },
  props: {
    loading: Boolean,
    empty: Boolean,
    virtualList: Boolean,
    bottomOffset: {
      type: Number,
      default: 0
    },
    scrollbar: {
      type: [Boolean, Object],
      default: !0
    },
    onScroll: {
      type: [Function, Array]
    },
    onReachBottom: {
      type: [Function, Array]
    },
    showHeaderOnEmpty: {
      type: Boolean,
      default: !1
    },
    showFooterOnEmpty: {
      type: Boolean,
      default: !1
    }
  },
  emits: ["scroll", "reachBottom"],
  setup(e, { emit: t, slots: n }) {
    var r, i, o;
    const { scrollbar: a } = Qt(e), s = Je("select-dropdown"), l = ur(fo, void 0), u = (o = (i = l == null ? void 0 : (r = l.slots).empty) == null ? void 0 : i.call(r, { component: "select" })) == null ? void 0 : o[0], { componentRef: c, elementRef: d } = lM("containerRef"), { displayScrollbar: f, scrollbarProps: h } = hM(a), p = (g) => {
      const { scrollTop: y, scrollHeight: m, offsetHeight: E } = g.target;
      m - (y + E) <= e.bottomOffset && t("reachBottom", g), t("scroll", g);
    }, v = F(() => [
      s,
      {
        [`${s}-has-header`]: !!n.header,
        [`${s}-has-footer`]: !!n.footer
      }
    ]);
    return {
      prefixCls: s,
      SelectEmpty: u,
      cls: v,
      wrapperRef: d,
      wrapperComRef: c,
      handleScroll: p,
      displayScrollbar: f,
      scrollbarProps: h
    };
  }
});
function vM(e, t, n, r, i, o) {
  const a = Ie("spin");
  return X(), he("div", {
    class: ze(e.cls)
  }, [
    e.$slots.header && (!e.empty || e.showHeaderOnEmpty) ? (X(), he("div", {
      key: 0,
      class: ze(`${e.prefixCls}-header`)
    }, [
      mt(e.$slots, "header")
    ], 2)) : vt("v-if", !0),
    e.loading ? (X(), ot(a, {
      key: 1,
      class: ze(`${e.prefixCls}-loading`)
    }, null, 8, ["class"])) : e.empty ? (X(), he("div", {
      key: 2,
      class: ze(`${e.prefixCls}-empty`)
    }, [
      mt(e.$slots, "empty", {}, () => [
        (X(), ot(ms(e.SelectEmpty ? e.SelectEmpty : "Empty")))
      ])
    ], 2)) : vt("v-if", !0),
    e.virtualList && !e.loading && !e.empty ? mt(e.$slots, "virtual-list", { key: 3 }) : vt("v-if", !0),
    e.virtualList ? vt("v-if", !0) : $r((X(), ot(ms(e.displayScrollbar ? "ScrollbarComponent" : "div"), dn({
      key: 4,
      ref: "wrapperComRef",
      class: `${e.prefixCls}-list-wrapper`
    }, e.scrollbarProps, { onScroll: e.handleScroll }), {
      default: Z(() => [
        Y("ul", {
          class: ze(`${e.prefixCls}-list`)
        }, [
          mt(e.$slots, "default")
        ], 2)
      ]),
      _: 3
    }, 16, ["class", "onScroll"])), [
      [kr, !e.loading && !e.empty]
    ]),
    e.$slots.footer && (!e.empty || e.showFooterOnEmpty) ? (X(), he("div", {
      key: 5,
      class: ze(`${e.prefixCls}-footer`)
    }, [
      mt(e.$slots, "footer")
    ], 2)) : vt("v-if", !0)
  ], 2);
}
var gM = /* @__PURE__ */ $t(pM, [["render", vM]]), Ym = fe({
  name: "IconCheck",
  render() {
    return A("svg", {
      "aria-hidden": "true",
      focusable: "false",
      viewBox: "0 0 1024 1024",
      width: "200",
      height: "200",
      fill: "currentColor"
    }, [A("path", {
      d: "M877.44815445 206.10060629a64.72691371 64.72691371 0 0 0-95.14856334 4.01306852L380.73381888 685.46812814 235.22771741 533.48933518a64.72691371 64.72691371 0 0 0-92.43003222-1.03563036l-45.82665557 45.82665443a64.72691371 64.72691371 0 0 0-0.90617629 90.61767965l239.61903446 250.10479331a64.72691371 64.72691371 0 0 0 71.19960405 15.14609778 64.33855261 64.33855261 0 0 0 35.08198741-21.23042702l36.24707186-42.71976334 40.5190474-40.77795556-3.36579926-3.49525333 411.40426297-486.74638962a64.72691371 64.72691371 0 0 0-3.88361443-87.64024149l-45.3088404-45.43829334z",
      "p-id": "840"
    }, null)]);
  }
});
const Mw = Symbol("ArcoCheckboxGroup");
var Wc = fe({
  name: "Checkbox",
  components: {
    IconCheck: Ym,
    IconHover: Si
  },
  props: {
    modelValue: {
      type: [Boolean, Array],
      default: void 0
    },
    defaultChecked: {
      type: Boolean,
      default: !1
    },
    value: {
      type: [String, Number, Boolean]
    },
    disabled: {
      type: Boolean,
      default: !1
    },
    indeterminate: {
      type: Boolean,
      default: !1
    },
    uninjectGroupContext: {
      type: Boolean,
      default: !1
    }
  },
  emits: {
    "update:modelValue": (e) => !0,
    change: (e, t) => !0
  },
  setup(e, {
    emit: t,
    slots: n
  }) {
    const {
      disabled: r,
      modelValue: i
    } = Qt(e), o = Je("checkbox"), a = le(), s = e.uninjectGroupContext ? void 0 : ur(Mw, void 0), l = (s == null ? void 0 : s.name) === "ArcoCheckboxGroup", {
      mergedDisabled: u,
      eventHandlers: c
    } = Oi({
      disabled: r
    }), d = le(e.defaultChecked), f = F(() => {
      var w;
      return l ? s == null ? void 0 : s.computedValue : (w = e.modelValue) != null ? w : d.value;
    }), h = F(() => {
      var w;
      return zr(f.value) ? f.value.includes((w = e.value) != null ? w : !0) : f.value;
    }), p = F(() => (s == null ? void 0 : s.disabled) || (u == null ? void 0 : u.value) || !h.value && (s == null ? void 0 : s.isMaxed)), v = (w) => {
      w.stopPropagation();
    }, g = (w) => {
      var S, _, b, T;
      const {
        checked: R
      } = w.target;
      let B = R;
      if (zr(f.value)) {
        const K = new Set(f.value);
        R ? K.add((S = e.value) != null ? S : !0) : K.delete((_ = e.value) != null ? _ : !0), B = Array.from(K);
      }
      d.value = R, l && zr(B) ? s == null || s.handleChange(B, w) : (t("update:modelValue", B), t("change", B, w), (T = (b = c.value) == null ? void 0 : b.onChange) == null || T.call(b, w)), Hn(() => {
        a.value && a.value.checked !== h.value && (a.value.checked = h.value);
      });
    }, y = F(() => [o, {
      [`${o}-checked`]: h.value,
      [`${o}-indeterminate`]: e.indeterminate,
      [`${o}-disabled`]: p.value
    }]), m = (w) => {
      var S, _;
      (_ = (S = c.value) == null ? void 0 : S.onFocus) == null || _.call(S, w);
    }, E = (w) => {
      var S, _;
      (_ = (S = c.value) == null ? void 0 : S.onBlur) == null || _.call(S, w);
    };
    return wt(i, (w) => {
      (wr(w) || Ks(w)) && (d.value = !1);
    }), wt(f, (w) => {
      var S;
      let _;
      zr(w) ? _ = w.includes((S = e.value) != null ? S : !0) : _ = w, d.value !== _ && (d.value = _), a.value && a.value.checked !== _ && (a.value.checked = _);
    }), () => {
      var w, S, _, b;
      return A("label", {
        "aria-disabled": p.value,
        class: y.value
      }, [A("input", {
        ref: a,
        type: "checkbox",
        checked: h.value,
        value: e.value,
        class: `${o}-target`,
        disabled: p.value,
        onClick: v,
        onChange: g,
        onFocus: m,
        onBlur: E
      }, null), (b = (_ = (S = n.checkbox) != null ? S : (w = s == null ? void 0 : s.slots) == null ? void 0 : w.checkbox) == null ? void 0 : _({
        checked: h.value,
        disabled: p.value
      })) != null ? b : A(Si, {
        class: `${o}-icon-hover`,
        disabled: p.value || h.value
      }, {
        default: () => [A("div", {
          class: `${o}-icon`
        }, [h.value && A(Ym, {
          class: `${o}-icon-check`
        }, null)])]
      }), n.default && A("span", {
        class: `${o}-label`
      }, [n.default()])]);
    };
  }
}), Wh = fe({
  name: "CheckboxGroup",
  props: {
    modelValue: {
      type: Array,
      default: void 0
    },
    defaultValue: {
      type: Array,
      default: () => []
    },
    max: {
      type: Number
    },
    options: {
      type: Array
    },
    direction: {
      type: String,
      default: "horizontal"
    },
    disabled: {
      type: Boolean,
      default: !1
    }
  },
  emits: {
    "update:modelValue": (e) => !0,
    change: (e, t) => !0
  },
  setup(e, {
    emit: t,
    slots: n
  }) {
    const {
      disabled: r
    } = Qt(e), i = Je("checkbox-group"), {
      mergedDisabled: o,
      eventHandlers: a
    } = Oi({
      disabled: r
    }), s = le(e.defaultValue), l = F(() => zr(e.modelValue) ? e.modelValue : s.value), u = F(() => e.max === void 0 ? !1 : l.value.length >= e.max), c = F(() => {
      var p;
      return ((p = e.options) != null ? p : []).map((v) => Go(v) || At(v) ? {
        label: v,
        value: v
      } : v);
    });
    ja(Mw, Or({
      name: "ArcoCheckboxGroup",
      computedValue: l,
      disabled: o,
      isMaxed: u,
      slots: n,
      handleChange: (p, v) => {
        var g, y;
        s.value = p, t("update:modelValue", p), t("change", p, v), (y = (g = a.value) == null ? void 0 : g.onChange) == null || y.call(g, v);
      }
    }));
    const f = F(() => [i, `${i}-direction-${e.direction}`]);
    wt(() => e.modelValue, (p) => {
      zr(p) ? s.value = [...p] : s.value = [];
    });
    const h = () => c.value.map((p) => {
      const v = l.value.includes(p.value);
      return A(Wc, {
        key: p.value,
        value: p.value,
        disabled: p.disabled || !v && u.value,
        indeterminate: p.indeterminate,
        modelValue: v
      }, {
        default: () => [n.label ? n.label({
          data: p
        }) : Nn(p.label) ? p.label() : p.label]
      });
    });
    return () => {
      var p;
      return A("span", {
        class: f.value
      }, [c.value.length > 0 ? h() : (p = n.default) == null ? void 0 : p.call(n)]);
    };
  }
});
const yM = Object.assign(Wc, {
  Group: Wh,
  install: (e, t) => {
    Ln(e, t);
    const n = Rn(t);
    e.component(n + Wc.name, Wc), e.component(n + Wh.name, Wh);
  }
}), Tw = Symbol("ArcoSelectContext");
var mM = Object.defineProperty, _M = Object.defineProperties, bM = Object.getOwnPropertyDescriptors, Km = Object.getOwnPropertySymbols, wM = Object.prototype.hasOwnProperty, xM = Object.prototype.propertyIsEnumerable, qm = (e, t, n) => t in e ? mM(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, kg = (e, t) => {
  for (var n in t || (t = {}))
    wM.call(t, n) && qm(e, n, t[n]);
  if (Km)
    for (var n of Km(t))
      xM.call(t, n) && qm(e, n, t[n]);
  return e;
}, Pw = (e, t) => _M(e, bM(t));
const EM = (e) => Fn(e) && "isGroup" in e, Dw = (e) => Fn(e) && "isGroup" in e, SM = (e, t = "value") => String(Fn(e) ? e[t] : e), yu = (e, t = "value") => Fn(e) ? `__arco__option__object__${e[t]}` : e || At(e) || Go(e) || vu(e) ? `__arco__option__${typeof e}-${e}` : "", CM = (e) => e.has("__arco__option__string-"), OM = (e, {
  valueKey: t,
  fieldNames: n,
  origin: r,
  index: i = -1
}) => {
  var o;
  if (Fn(e)) {
    const s = e[n.value];
    return {
      raw: e,
      index: i,
      key: yu(s, t),
      origin: r,
      value: s,
      label: (o = e[n.label]) != null ? o : SM(s, t),
      render: e[n.render],
      disabled: !!e[n.disabled],
      tagProps: e[n.tagProps]
    };
  }
  const a = {
    value: e,
    label: String(e),
    disabled: !1
  };
  return kg({
    raw: a,
    index: i,
    key: yu(e, t),
    origin: r
  }, a);
}, Qp = (e, {
  valueKey: t,
  fieldNames: n,
  origin: r,
  optionInfoMap: i
}) => {
  var o;
  const a = [];
  for (const s of e)
    if (EM(s)) {
      const l = Qp((o = s.options) != null ? o : [], {
        valueKey: t,
        fieldNames: n,
        origin: r,
        optionInfoMap: i
      });
      l.length > 0 && a.push(Pw(kg({}, s), {
        key: `__arco__group__${s.label}`,
        options: l
      }));
    } else {
      const l = OM(s, {
        valueKey: t,
        fieldNames: n,
        origin: r
      });
      a.push(l), i.get(l.key) || i.set(l.key, l);
    }
  return a;
}, Zm = (e, {
  inputValue: t,
  filterOption: n
}) => {
  const r = (i) => {
    var o;
    const a = [];
    for (const s of i)
      if (Dw(s)) {
        const l = r((o = s.options) != null ? o : []);
        l.length > 0 && a.push(Pw(kg({}, s), { options: l }));
      } else Ef(s, { inputValue: t, filterOption: n }) && a.push(s);
    return a;
  };
  return r(e);
}, Ef = (e, {
  inputValue: t,
  filterOption: n
}) => Nn(n) ? !t || n(t, e.raw) : n ? e.label.toLowerCase().includes((t ?? "").toLowerCase()) : !0, AM = (e, t) => {
  if (!e || !t || e.length !== t.length)
    return !1;
  for (const n of Object.keys(e))
    if (!Ig(e[n], t[n]))
      return !1;
  return !0;
}, NM = (e, t) => {
  if (!e || !t)
    return !1;
  const { length: n } = e;
  if (n !== t.length)
    return !1;
  for (let r = 0; r < n; r++)
    if (!Ig(e[r], t[r]))
      return !1;
  return !0;
}, Ig = (e, t) => {
  const n = Object.prototype.toString.call(e);
  return n !== Object.prototype.toString.call(t) ? !1 : n === "[object Object]" ? AM(e, t) : n === "[object Array]" ? NM(e, t) : n === "[object Function]" ? e === t ? !0 : e.toString() === t.toString() : e === t;
}, MM = fe({
  name: "Option",
  components: {
    Checkbox: yM
  },
  props: {
    value: {
      type: [String, Number, Boolean, Object],
      default: void 0
    },
    label: String,
    disabled: Boolean,
    tagProps: {
      type: Object
    },
    extra: {
      type: Object
    },
    index: {
      type: Number
    },
    internal: Boolean
  },
  setup(e) {
    const { disabled: t, tagProps: n, index: r } = Qt(e), i = Je("select-option"), o = ur(Tw, void 0), a = Iu(), s = le(), l = le(n.value);
    wt(n, (_, b) => {
      Ig(_, b) || (l.value = _);
    });
    const u = le(""), c = F(() => {
      var _, b;
      return (b = (_ = e.value) != null ? _ : e.label) != null ? b : u.value;
    }), d = F(() => {
      var _;
      return (_ = e.label) != null ? _ : u.value;
    }), f = F(() => yu(c.value, o == null ? void 0 : o.valueKey)), h = F(() => {
      var _;
      return (_ = o == null ? void 0 : o.component) != null ? _ : "li";
    }), p = () => {
      var _;
      if (!e.label && s.value) {
        const b = (_ = s.value.textContent) != null ? _ : "";
        u.value !== b && (u.value = b);
      }
    };
    fr(() => p()), _f(() => p());
    const v = F(() => {
      var _;
      return (_ = o == null ? void 0 : o.valueKeys.includes(f.value)) != null ? _ : !1;
    }), g = F(() => (o == null ? void 0 : o.activeKey) === f.value);
    let y = le(!0);
    if (!e.internal) {
      const _ = Or({
        raw: {
          value: c,
          label: d,
          disabled: t,
          tagProps: l
        },
        ref: s,
        index: r,
        key: f,
        origin: "slot",
        value: c,
        label: d,
        disabled: t,
        tagProps: l
      });
      y = F(() => Ef(_, {
        inputValue: o == null ? void 0 : o.inputValue,
        filterOption: o == null ? void 0 : o.filterOption
      })), a && (o == null || o.addSlotOptionInfo(a.uid, _)), Ys(() => {
        a && (o == null || o.removeSlotOptionInfo(a.uid));
      });
    }
    const m = (_) => {
      e.disabled || o == null || o.onSelect(f.value, _);
    }, E = () => {
      e.disabled || o == null || o.setActiveKey(f.value);
    }, w = () => {
      e.disabled || o == null || o.setActiveKey();
    }, S = F(() => [
      i,
      {
        [`${i}-disabled`]: e.disabled,
        [`${i}-selected`]: v.value,
        [`${i}-active`]: g.value,
        [`${i}-multiple`]: o == null ? void 0 : o.multiple
      }
    ]);
    return {
      prefixCls: i,
      cls: S,
      selectCtx: o,
      itemRef: s,
      component: h,
      isSelected: v,
      isValid: y,
      handleClick: m,
      handleMouseEnter: E,
      handleMouseLeave: w
    };
  }
});
function TM(e, t, n, r, i, o) {
  const a = Ie("checkbox");
  return $r((X(), ot(ms(e.component), {
    ref: "itemRef",
    class: ze([e.cls, { [`${e.prefixCls}-has-suffix`]: !!e.$slots.suffix }]),
    onClick: e.handleClick,
    onMouseenter: e.handleMouseEnter,
    onMouseleave: e.handleMouseLeave
  }, {
    default: Z(() => [
      e.$slots.icon ? (X(), he("span", {
        key: 0,
        class: ze(`${e.prefixCls}-icon`)
      }, [
        mt(e.$slots, "icon")
      ], 2)) : vt("v-if", !0),
      e.selectCtx && e.selectCtx.multiple ? (X(), ot(a, {
        key: 1,
        class: ze(`${e.prefixCls}-checkbox`),
        "model-value": e.isSelected,
        disabled: e.disabled,
        "uninject-group-context": ""
      }, {
        default: Z(() => [
          mt(e.$slots, "default", {}, () => [
            Lt(Mt(e.label), 1)
          ])
        ]),
        _: 3
      }, 8, ["class", "model-value", "disabled"])) : (X(), he("span", {
        key: 2,
        class: ze(`${e.prefixCls}-content`)
      }, [
        mt(e.$slots, "default", {}, () => [
          Lt(Mt(e.label), 1)
        ])
      ], 2)),
      e.$slots.suffix ? (X(), he("span", {
        key: 3,
        class: ze(`${e.prefixCls}-suffix`)
      }, [
        mt(e.$slots, "suffix")
      ], 2)) : vt("v-if", !0)
    ]),
    _: 3
  }, 8, ["class", "onClick", "onMouseenter", "onMouseleave"])), [
    [kr, e.isValid]
  ]);
}
var Gl = /* @__PURE__ */ $t(MM, [["render", TM]]), PM = Object.defineProperty, DM = Object.defineProperties, RM = Object.getOwnPropertyDescriptors, Jm = Object.getOwnPropertySymbols, LM = Object.prototype.hasOwnProperty, $M = Object.prototype.propertyIsEnumerable, Qm = (e, t, n) => t in e ? PM(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, Gh = (e, t) => {
  for (var n in t || (t = {}))
    LM.call(t, n) && Qm(e, n, t[n]);
  if (Jm)
    for (var n of Jm(t))
      $M.call(t, n) && Qm(e, n, t[n]);
  return e;
}, kM = (e, t) => DM(e, RM(t));
const IM = {
  value: "value",
  label: "label",
  disabled: "disabled",
  tagProps: "tagProps",
  render: "render"
}, BM = ({
  options: e,
  extraOptions: t,
  inputValue: n,
  filterOption: r,
  showExtraOptions: i,
  valueKey: o,
  fieldNames: a
}) => {
  const s = F(() => Gh(Gh({}, IM), a == null ? void 0 : a.value)), l = Or(/* @__PURE__ */ new Map()), u = F(() => Array.from(l.values()).sort((E, w) => At(E.index) && At(w.index) ? E.index - w.index : 0)), c = F(() => {
    var E, w;
    const S = /* @__PURE__ */ new Map();
    return {
      optionInfos: Qp((E = e == null ? void 0 : e.value) != null ? E : [], {
        valueKey: (w = o == null ? void 0 : o.value) != null ? w : "value",
        fieldNames: s.value,
        origin: "options",
        optionInfoMap: S
      }),
      optionInfoMap: S
    };
  }), d = F(() => {
    var E, w;
    const S = /* @__PURE__ */ new Map();
    return {
      optionInfos: Qp((E = t == null ? void 0 : t.value) != null ? E : [], {
        valueKey: (w = o == null ? void 0 : o.value) != null ? w : "value",
        fieldNames: s.value,
        origin: "extraOptions",
        optionInfoMap: S
      }),
      optionInfoMap: S
    };
  }), f = Or(/* @__PURE__ */ new Map());
  wt([
    u,
    e ?? le([]),
    t ?? le([]),
    o ?? le("value")
  ], () => {
    f.clear(), u.value.forEach((E, w) => {
      f.set(E.key, kM(Gh({}, E), { index: w }));
    }), c.value.optionInfoMap.forEach((E) => {
      f.has(E.key) || (E.index = f.size, f.set(E.key, E));
    }), d.value.optionInfoMap.forEach((E) => {
      f.has(E.key) || (E.index = f.size, f.set(E.key, E));
    });
  }, { immediate: !0, deep: !0 });
  const h = F(() => {
    var E;
    const w = Zm(c.value.optionInfos, {
      inputValue: n == null ? void 0 : n.value,
      filterOption: r == null ? void 0 : r.value
    });
    return ((E = i == null ? void 0 : i.value) == null || E) && w.push(...Zm(d.value.optionInfos, {
      inputValue: n == null ? void 0 : n.value,
      filterOption: r == null ? void 0 : r.value
    })), w;
  }), p = F(() => Array.from(f.values()).filter((E) => E.origin === "extraOptions" && (i == null ? void 0 : i.value) === !1 ? !1 : Ef(E, {
    inputValue: n == null ? void 0 : n.value,
    filterOption: r == null ? void 0 : r.value
  }))), v = F(() => p.value.filter((E) => !E.disabled).map((E) => E.key));
  return {
    validOptions: h,
    optionInfoMap: f,
    validOptionInfos: p,
    enabledOptionKeys: v,
    getNextSlotOptionIndex: () => l.size,
    addSlotOptionInfo: (E, w) => {
      l.set(E, w);
    },
    removeSlotOptionInfo: (E) => {
      l.delete(E);
    }
  };
}, ga = {
  ENTER: "Enter",
  ESC: "Escape",
  BACKSPACE: "Backspace",
  TAB: "Tab",
  SPACE: " ",
  ARROW_UP: "ArrowUp",
  ARROW_DOWN: "ArrowDown",
  ARROW_LEFT: "ArrowLeft",
  ARROW_RIGHT: "ArrowRight"
}, e_ = (e) => JSON.stringify({
  key: e.key,
  ctrl: !!e.ctrl,
  shift: !!e.shift,
  alt: !!e.alt,
  meta: !!e.meta
}), Rw = (e) => {
  const t = {};
  return e.forEach((n, r) => {
    const i = Go(r) ? { key: r } : r;
    t[e_(i)] = n;
  }), (n) => {
    const r = e_({
      key: n.key,
      ctrl: n.ctrlKey,
      shift: n.shiftKey,
      alt: n.altKey,
      meta: n.metaKey
    }), i = t[r];
    i && (n.stopPropagation(), i(n));
  };
}, jM = ({
  multiple: e,
  options: t,
  extraOptions: n,
  inputValue: r,
  filterOption: i,
  showExtraOptions: o,
  component: a,
  valueKey: s,
  fieldNames: l,
  loading: u,
  popupVisible: c,
  valueKeys: d,
  dropdownRef: f,
  optionRefs: h,
  virtualListRef: p,
  onSelect: v,
  onPopupVisibleChange: g,
  enterToOpen: y = !0,
  defaultActiveFirstOption: m
}) => {
  const {
    validOptions: E,
    optionInfoMap: w,
    validOptionInfos: S,
    enabledOptionKeys: _,
    getNextSlotOptionIndex: b,
    addSlotOptionInfo: T,
    removeSlotOptionInfo: R
  } = BM({
    options: t,
    extraOptions: n,
    inputValue: r,
    filterOption: i,
    showExtraOptions: o,
    valueKey: s,
    fieldNames: l
  }), B = le();
  wt(_, (L) => {
    (!B.value || !L.includes(B.value)) && (B.value = L[0]);
  });
  const K = (L) => {
    B.value = L;
  }, ae = (L) => {
    const k = _.value.length;
    if (k === 0)
      return;
    if (!B.value)
      return L === "down" ? _.value[0] : _.value[k - 1];
    const J = _.value.indexOf(B.value), de = (k + J + (L === "up" ? -1 : 1)) % k;
    return _.value[de];
  }, x = (L) => {
    var k, J;
    p != null && p.value && p.value.scrollTo({ key: L });
    const de = w.get(L), Ne = (k = f == null ? void 0 : f.value) == null ? void 0 : k.wrapperRef, se = (J = h == null ? void 0 : h.value[L]) != null ? J : de == null ? void 0 : de.ref;
    if (!Ne || !se || Ne.scrollHeight === Ne.offsetHeight)
      return;
    const G = JO(se, Ne), be = Ne.scrollTop;
    G.top < 0 ? Ne.scrollTo(0, be + G.top) : G.bottom < 0 && Ne.scrollTo(0, be - G.bottom);
  };
  wt(c, (L) => {
    var k;
    if (L) {
      const J = d.value[d.value.length - 1];
      let de = (k = m == null ? void 0 : m.value) == null || k ? _.value[0] : void 0;
      _.value.includes(J) && (de = J), de !== B.value && (B.value = de), Hn(() => {
        B.value && x(B.value);
      });
    }
  });
  const P = Rw(/* @__PURE__ */ new Map([
    [
      ga.ENTER,
      (L) => {
        !(u != null && u.value) && !L.isComposing && (c.value ? B.value && (v(B.value, L), L.preventDefault()) : y && (g(!0), L.preventDefault()));
      }
    ],
    [
      ga.ESC,
      (L) => {
        c.value && (g(!1), L.preventDefault());
      }
    ],
    [
      ga.ARROW_DOWN,
      (L) => {
        if (c.value) {
          const k = ae("down");
          k && (B.value = k, x(k)), L.preventDefault();
        }
      }
    ],
    [
      ga.ARROW_UP,
      (L) => {
        if (c.value) {
          const k = ae("up");
          k && (B.value = k, x(k)), L.preventDefault();
        }
      }
    ]
  ]));
  return ja(Tw, Or({
    multiple: e,
    valueKey: s,
    inputValue: r,
    filterOption: i,
    component: a,
    valueKeys: d,
    activeKey: B,
    setActiveKey: K,
    onSelect: v,
    getNextSlotOptionIndex: b,
    addSlotOptionInfo: T,
    removeSlotOptionInfo: R
  })), {
    validOptions: E,
    optionInfoMap: w,
    validOptionInfos: S,
    enabledOptionKeys: _,
    activeKey: B,
    setActiveKey: K,
    addSlotOptionInfo: T,
    removeSlotOptionInfo: R,
    getNextActiveKey: ae,
    scrollIntoView: x,
    handleKeyDown: P
  };
}, zM = ({
  dataKeys: e,
  contentRef: t,
  fixedSize: n,
  estimatedSize: r,
  buffer: i
}) => {
  const o = le(0), a = /* @__PURE__ */ new Map(), s = F(() => e.value.length), l = le(0), u = F(() => {
    const b = l.value + i.value * 3;
    return b > s.value ? s.value : b;
  }), c = F(() => {
    const b = s.value - i.value * 3;
    return b < 0 ? 0 : b;
  }), d = (b) => {
    b < 0 ? l.value = 0 : b > c.value ? l.value = c.value : l.value = b;
  }, f = le(n.value), h = F(() => r.value !== 30 ? r.value : o.value || r.value), p = (b, T) => {
    a.set(b, T);
  }, v = (b) => {
    var T;
    if (f.value)
      return h.value;
    const R = e.value[b];
    return (T = a.get(R)) != null ? T : h.value;
  }, g = (b) => a.has(b);
  fr(() => {
    const b = Array.from(a.values()).reduce((T, R) => T + R, 0);
    b > 0 && (o.value = b / a.size);
  });
  const y = (b) => f.value ? h.value * b : m(0, b), m = (b, T) => {
    let R = 0;
    for (let B = b; B < T; B++)
      R += v(B);
    return R;
  }, E = F(() => f.value ? h.value * l.value : m(0, l.value)), w = (b) => {
    const T = b >= E.value;
    let R = Math.abs(b - E.value);
    const B = T ? l.value : l.value - 1;
    let K = 0;
    for (; R > 0; )
      R -= v(B + K), T ? K++ : K--;
    return K;
  }, S = (b) => {
    const T = w(b), R = l.value + T - i.value;
    return R < 0 ? 0 : R > c.value ? c.value : R;
  }, _ = F(() => f.value ? h.value * (s.value - u.value) : m(u.value, s.value));
  return {
    frontPadding: E,
    behindPadding: _,
    start: l,
    end: u,
    getStartByScroll: S,
    setItemSize: p,
    hasItemSize: g,
    setStart: d,
    getScrollOffset: y
  };
};
var FM = fe({
  name: "VirtualListItem",
  props: {
    hasItemSize: {
      type: Function,
      required: !0
    },
    setItemSize: {
      type: Function,
      required: !0
    }
  },
  setup(e, {
    slots: t
  }) {
    var n;
    const r = (n = Iu()) == null ? void 0 : n.vnode.key, i = le(), o = () => {
      var a, s, l, u;
      const c = (s = (a = i.value) == null ? void 0 : a.$el) != null ? s : i.value, d = (u = (l = c == null ? void 0 : c.getBoundingClientRect) == null ? void 0 : l.call(c).height) != null ? u : c == null ? void 0 : c.offsetHeight;
      d && e.setItemSize(r, d);
    };
    return fr(() => o()), Ys(() => o()), () => {
      var a;
      const s = _s((a = t.default) == null ? void 0 : a.call(t));
      return s ? mf(s, {
        ref: i
      }, !0) : null;
    };
  }
}), HM = Object.defineProperty, t_ = Object.getOwnPropertySymbols, VM = Object.prototype.hasOwnProperty, WM = Object.prototype.propertyIsEnumerable, n_ = (e, t, n) => t in e ? HM(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, GM = (e, t) => {
  for (var n in t || (t = {}))
    VM.call(t, n) && n_(e, n, t[n]);
  if (t_)
    for (var n of t_(t))
      WM.call(t, n) && n_(e, n, t[n]);
  return e;
};
const XM = fe({
  name: "VirtualList",
  components: { VirtualListItem: FM },
  props: {
    height: {
      type: [Number, String],
      default: 200
    },
    data: {
      type: Array,
      default: () => []
    },
    threshold: {
      type: Number,
      default: 0
    },
    itemKey: {
      type: String,
      default: "key"
    },
    fixedSize: {
      type: Boolean,
      default: !1
    },
    estimatedSize: {
      type: Number,
      default: 30
    },
    buffer: {
      type: Number,
      default: 10
    },
    component: {
      type: [String, Object],
      default: "div"
    },
    listAttrs: {
      type: Object
    },
    contentAttrs: {
      type: Object
    },
    paddingPosition: {
      type: String,
      default: "content"
    }
  },
  emits: {
    scroll: (e) => !0,
    reachBottom: (e) => !0
  },
  setup(e, { emit: t }) {
    const { data: n, itemKey: r, fixedSize: i, estimatedSize: o, buffer: a, height: s } = Qt(e), l = Je("virtual-list"), u = F(() => Fn(e.component) ? GM({
      container: "div",
      list: "div",
      content: "div"
    }, e.component) : {
      container: e.component,
      list: "div",
      content: "div"
    }), c = le(), d = le(), f = F(() => ({
      height: At(s.value) ? `${s.value}px` : s.value,
      overflow: "auto"
    })), h = F(() => n.value.map((B, K) => {
      var ae;
      return (ae = B[r.value]) != null ? ae : K;
    })), {
      frontPadding: p,
      behindPadding: v,
      start: g,
      end: y,
      getStartByScroll: m,
      setItemSize: E,
      hasItemSize: w,
      setStart: S,
      getScrollOffset: _
    } = zM({
      dataKeys: h,
      contentRef: d,
      fixedSize: i,
      estimatedSize: o,
      buffer: a
    }), b = F(() => e.threshold && n.value.length <= e.threshold ? n.value : n.value.slice(g.value, y.value)), T = (B) => {
      const { scrollTop: K, scrollHeight: ae, offsetHeight: x } = B.target, P = m(K);
      P !== g.value && (S(P), Hn(() => {
        R(K);
      })), t("scroll", B), Math.floor(ae - (K + x)) <= 0 && t("reachBottom", B);
    }, R = (B) => {
      var K, ae;
      if (c.value)
        if (At(B))
          c.value.scrollTop = B;
        else {
          const x = (ae = B.index) != null ? ae : h.value.indexOf((K = B.key) != null ? K : "");
          S(x - a.value), c.value.scrollTop = _(x), Hn(() => {
            if (c.value) {
              const P = _(x);
              P !== c.value.scrollTop && (c.value.scrollTop = P);
            }
          });
        }
    };
    return {
      prefixCls: l,
      containerRef: c,
      contentRef: d,
      frontPadding: p,
      currentList: b,
      behindPadding: v,
      onScroll: T,
      setItemSize: E,
      hasItemSize: w,
      start: g,
      scrollTo: R,
      style: f,
      mergedComponent: u
    };
  }
});
function UM(e, t, n, r, i, o) {
  const a = Ie("VirtualListItem");
  return X(), ot(ms(e.mergedComponent.container), {
    ref: "containerRef",
    class: ze(e.prefixCls),
    style: Jt(e.style),
    onScroll: e.onScroll
  }, {
    default: Z(() => [
      (X(), ot(ms(e.mergedComponent.list), dn(e.listAttrs, {
        style: e.paddingPosition === "list" ? {
          paddingTop: `${e.frontPadding}px`,
          paddingBottom: `${e.behindPadding}px`
        } : {}
      }), {
        default: Z(() => [
          (X(), ot(ms(e.mergedComponent.content), dn({ ref: "contentRef" }, e.contentAttrs, {
            style: e.paddingPosition === "content" ? {
              paddingTop: `${e.frontPadding}px`,
              paddingBottom: `${e.behindPadding}px`
            } : {}
          }), {
            default: Z(() => [
              (X(!0), he(Un, null, ca(e.currentList, (s, l) => {
                var u;
                return X(), ot(a, {
                  key: (u = s[e.itemKey]) != null ? u : e.start + l,
                  "has-item-size": e.hasItemSize,
                  "set-item-size": e.setItemSize
                }, {
                  default: Z(() => [
                    mt(e.$slots, "item", {
                      item: s,
                      index: e.start + l
                    })
                  ]),
                  _: 2
                }, 1032, ["has-item-size", "set-item-size"]);
              }), 128))
            ]),
            _: 3
          }, 16, ["style"]))
        ]),
        _: 3
      }, 16, ["style"]))
    ]),
    _: 3
  }, 8, ["class", "style", "onScroll"]);
}
var YM = /* @__PURE__ */ $t(XM, [["render", UM]]);
const KM = fe({
  name: "Popover",
  components: {
    Trigger: cd
  },
  props: {
    popupVisible: {
      type: Boolean,
      default: void 0
    },
    defaultPopupVisible: {
      type: Boolean,
      default: !1
    },
    title: String,
    content: String,
    trigger: {
      type: [String, Array],
      default: "hover"
    },
    position: {
      type: String,
      default: "top"
    },
    contentClass: {
      type: [String, Array, Object]
    },
    contentStyle: {
      type: Object
    },
    arrowClass: {
      type: [String, Array, Object]
    },
    arrowStyle: {
      type: Object
    },
    popupContainer: {
      type: [String, Object]
    }
  },
  emits: {
    "update:popupVisible": (e) => !0,
    popupVisibleChange: (e) => !0
  },
  setup(e, { emit: t }) {
    const n = Je("popover"), r = le(e.defaultPopupVisible), i = F(() => {
      var l;
      return (l = e.popupVisible) != null ? l : r.value;
    }), o = (l) => {
      r.value = l, t("update:popupVisible", l), t("popupVisibleChange", l);
    }, a = F(() => [
      `${n}-popup-content`,
      e.contentClass
    ]), s = F(() => [
      `${n}-popup-arrow`,
      e.arrowClass
    ]);
    return {
      prefixCls: n,
      computedPopupVisible: i,
      contentCls: a,
      arrowCls: s,
      handlePopupVisibleChange: o
    };
  }
});
function qM(e, t, n, r, i, o) {
  const a = Ie("trigger");
  return X(), ot(a, {
    class: ze(e.prefixCls),
    trigger: e.trigger,
    position: e.position,
    "popup-visible": e.computedPopupVisible,
    "popup-offset": 10,
    "content-class": e.contentCls,
    "content-style": e.contentStyle,
    "arrow-class": e.arrowCls,
    "arrow-style": e.arrowStyle,
    "show-arrow": "",
    "popup-container": e.popupContainer,
    "animation-name": "zoom-in-fade-out",
    "auto-fit-transform-origin": "",
    onPopupVisibleChange: e.handlePopupVisibleChange
  }, {
    content: Z(() => [
      Y("div", {
        class: ze(`${e.prefixCls}-title`)
      }, [
        mt(e.$slots, "title", {}, () => [
          Lt(Mt(e.title), 1)
        ])
      ], 2),
      Y("div", {
        class: ze(`${e.prefixCls}-content`)
      }, [
        mt(e.$slots, "content", {}, () => [
          Lt(Mt(e.content), 1)
        ])
      ], 2)
    ]),
    default: Z(() => [
      mt(e.$slots, "default")
    ]),
    _: 3
  }, 8, ["class", "trigger", "position", "popup-visible", "content-class", "content-style", "arrow-class", "arrow-style", "popup-container", "onPopupVisibleChange"]);
}
var Xh = /* @__PURE__ */ $t(KM, [["render", qM]]);
const Bg = Object.assign(Xh, {
  install: (e, t) => {
    Ln(e, t);
    const n = Rn(t);
    e.component(n + Xh.name, Xh);
  }
}), ZM = fe({
  name: "IconDown",
  props: {
    size: {
      type: [Number, String]
    },
    strokeWidth: {
      type: Number,
      default: 4
    },
    strokeLinecap: {
      type: String,
      default: "butt",
      validator: (e) => ["butt", "round", "square"].includes(e)
    },
    strokeLinejoin: {
      type: String,
      default: "miter",
      validator: (e) => ["arcs", "bevel", "miter", "miter-clip", "round"].includes(e)
    },
    rotate: Number,
    spin: Boolean
  },
  emits: {
    click: (e) => !0
  },
  setup(e, { emit: t }) {
    const n = Je("icon"), r = F(() => [n, `${n}-down`, { [`${n}-spin`]: e.spin }]), i = F(() => {
      const a = {};
      return e.size && (a.fontSize = At(e.size) ? `${e.size}px` : e.size), e.rotate && (a.transform = `rotate(${e.rotate}deg)`), a;
    });
    return {
      cls: r,
      innerStyle: i,
      onClick: (a) => {
        t("click", a);
      }
    };
  }
}), JM = ["stroke-width", "stroke-linecap", "stroke-linejoin"], QM = /* @__PURE__ */ Y("path", { d: "M39.6 17.443 24.043 33 8.487 17.443" }, null, -1), eT = [
  QM
];
function tT(e, t, n, r, i, o) {
  return X(), he("svg", {
    viewBox: "0 0 48 48",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    stroke: "currentColor",
    class: ze(e.cls),
    style: Jt(e.innerStyle),
    "stroke-width": e.strokeWidth,
    "stroke-linecap": e.strokeLinecap,
    "stroke-linejoin": e.strokeLinejoin,
    onClick: t[0] || (t[0] = (...a) => e.onClick && e.onClick(...a))
  }, eT, 14, JM);
}
var Uh = /* @__PURE__ */ $t(ZM, [["render", tT]]);
const Lw = Object.assign(Uh, {
  install: (e, t) => {
    var n;
    const r = (n = t == null ? void 0 : t.iconPrefix) != null ? n : "";
    e.component(r + Uh.name, Uh);
  }
}), nT = ({
  popupVisible: e,
  defaultPopupVisible: t,
  emit: n
}) => {
  var r;
  const i = le((r = t == null ? void 0 : t.value) != null ? r : !1), o = F(() => {
    var s;
    return (s = e == null ? void 0 : e.value) != null ? s : i.value;
  }), a = (s) => {
    s !== o.value && (i.value = s, n("update:popupVisible", s), n("popupVisibleChange", s));
  };
  return wt(o, (s) => {
    i.value !== s && (i.value = s);
  }), {
    computedPopupVisible: o,
    handlePopupVisibleChange: a
  };
};
var Yh = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function Sf(e) {
  return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e;
}
const rT = ({
  defaultValue: e,
  modelValue: t,
  emit: n,
  eventName: r = "input",
  updateEventName: i = "update:modelValue",
  eventHandlers: o
}) => {
  var a;
  const s = le(), l = le((a = e == null ? void 0 : e.value) != null ? a : ""), u = le(!1), c = le(!1), d = le("");
  let f;
  const h = F(() => {
    var _;
    return (_ = t == null ? void 0 : t.value) != null ? _ : l.value;
  }), p = (_, b) => {
    l.value = _, n(i, _), n(r, _, b);
  }, v = (_) => {
    const { value: b } = _.target;
    c.value || (p(b, _), Hn(() => {
      s.value && h.value !== s.value.value && (s.value.value = h.value);
    }));
  }, g = (_) => {
    r === "input" && h.value !== f && (f = h.value, n("change", h.value, _));
  }, y = (_) => {
    var b;
    const { value: T } = _.target;
    _.type === "compositionend" ? (c.value = !1, d.value = "", p(T, _), Hn(() => {
      s.value && h.value !== s.value.value && (s.value.value = h.value);
    })) : (c.value = !0, d.value = h.value + ((b = _.data) != null ? b : ""));
  }, m = (_) => {
    var b, T;
    u.value = !0, f = h.value, n("focus", _), (T = (b = o == null ? void 0 : o.value) == null ? void 0 : b.onFocus) == null || T.call(b, _);
  }, E = (_) => {
    var b, T;
    u.value = !1, n("blur", _), (T = (b = o == null ? void 0 : o.value) == null ? void 0 : b.onBlur) == null || T.call(b, _), g(_);
  }, w = (_) => {
    const b = _.key || _.code;
    !c.value && b === Lg.key && (n("pressEnter", _), g(_));
  }, S = (_) => {
    s.value && _.target !== s.value && (_.preventDefault(), s.value.focus());
  };
  return wt(h, (_) => {
    s.value && _ !== s.value.value && (s.value.value = _);
  }), {
    inputRef: s,
    _value: l,
    _focused: u,
    isComposition: c,
    compositionValue: d,
    computedValue: h,
    handleInput: v,
    handleComposition: y,
    handleFocus: m,
    handleBlur: E,
    handleKeyDown: w,
    handleMousedown: S
  };
};
var iT = fe({
  name: "InputLabel",
  inheritAttrs: !1,
  props: {
    modelValue: Object,
    inputValue: {
      type: String,
      default: ""
    },
    enabledInput: Boolean,
    formatLabel: Function,
    placeholder: String,
    retainInputValue: Boolean,
    disabled: Boolean,
    baseCls: String,
    size: String,
    error: Boolean,
    focused: Boolean,
    uninjectFormItemContext: Boolean
  },
  emits: ["update:inputValue", "inputValueChange", "focus", "blur"],
  setup(e, {
    attrs: t,
    emit: n,
    slots: r
  }) {
    var i;
    const {
      size: o,
      disabled: a,
      error: s,
      inputValue: l,
      uninjectFormItemContext: u
    } = Qt(e), c = (i = e.baseCls) != null ? i : Je("input-label"), {
      mergedSize: d,
      mergedDisabled: f,
      mergedError: h,
      eventHandlers: p
    } = Oi({
      size: o,
      disabled: a,
      error: s,
      uninject: u == null ? void 0 : u.value
    }), {
      mergedSize: v
    } = ho(d), {
      inputRef: g,
      _focused: y,
      computedValue: m,
      handleInput: E,
      handleComposition: w,
      handleFocus: S,
      handleBlur: _,
      handleMousedown: b
    } = rT({
      modelValue: l,
      emit: n,
      eventName: "inputValueChange",
      updateEventName: "update:inputValue",
      eventHandlers: p
    }), T = F(() => {
      var J;
      return (J = e.focused) != null ? J : y.value;
    }), R = F(() => e.enabledInput && y.value || !e.modelValue), B = () => {
      var J, de;
      return e.modelValue ? (de = (J = e.formatLabel) == null ? void 0 : J.call(e, e.modelValue)) != null ? de : e.modelValue.label : "";
    }, K = F(() => e.enabledInput && e.modelValue ? B() : e.placeholder), ae = () => {
      var J, de;
      return e.modelValue ? (de = (J = r.default) == null ? void 0 : J.call(r, {
        data: e.modelValue
      })) != null ? de : B() : null;
    }, x = F(() => [c, `${c}-size-${v.value}`, {
      [`${c}-search`]: e.enabledInput,
      [`${c}-focus`]: T.value,
      [`${c}-disabled`]: f.value,
      [`${c}-error`]: h.value
    }]), P = F(() => ju(t, As)), L = F(() => $g(t, As));
    return {
      inputRef: g,
      render: () => A("span", dn(P.value, {
        class: x.value,
        title: B(),
        onMousedown: b
      }), [r.prefix && A("span", {
        class: `${c}-prefix`
      }, [r.prefix()]), A("input", dn(L.value, {
        ref: g,
        class: [`${c}-input`, {
          [`${c}-input-hidden`]: !R.value
        }],
        value: m.value,
        readonly: !e.enabledInput,
        placeholder: K.value,
        disabled: f.value,
        onInput: E,
        onFocus: S,
        onBlur: _,
        onCompositionstart: w,
        onCompositionupdate: w,
        onCompositionend: w
      }), null), A("span", {
        class: [`${c}-value`, {
          [`${c}-value-hidden`]: R.value
        }]
      }, [ae()]), r.suffix && A("span", {
        class: `${c}-suffix`
      }, [r.suffix()])])
    };
  },
  methods: {
    focus() {
      var e;
      (e = this.inputRef) == null || e.focus();
    },
    blur() {
      var e;
      (e = this.inputRef) == null || e.blur();
    }
  },
  render() {
    return this.render();
  }
}), oT = Object.defineProperty, r_ = Object.getOwnPropertySymbols, aT = Object.prototype.hasOwnProperty, sT = Object.prototype.propertyIsEnumerable, i_ = (e, t, n) => t in e ? oT(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, lT = (e, t) => {
  for (var n in t || (t = {}))
    aT.call(t, n) && i_(e, n, t[n]);
  if (r_)
    for (var n of r_(t))
      sT.call(t, n) && i_(e, n, t[n]);
  return e;
};
const uT = (e, t) => {
  const n = [];
  for (const r of e)
    if (Fn(r))
      n.push({
        raw: r,
        value: r[t.value],
        label: r[t.label],
        closable: r[t.closable],
        tagProps: r[t.tagProps]
      });
    else if (e || At(e)) {
      const i = {
        value: r,
        label: String(r),
        closable: !0
      };
      n.push(lT({
        raw: i
      }, i));
    }
  return n;
}, o_ = [
  "red",
  "orangered",
  "orange",
  "gold",
  "lime",
  "green",
  "cyan",
  "blue",
  "arcoblue",
  "purple",
  "pinkpurple",
  "magenta",
  "gray"
], cT = fe({
  name: "Tag",
  components: {
    IconHover: Si,
    IconClose: Bu,
    IconLoading: qs
  },
  props: {
    color: {
      type: String
    },
    size: {
      type: String
    },
    bordered: {
      type: Boolean,
      default: !1
    },
    visible: {
      type: Boolean,
      default: void 0
    },
    defaultVisible: {
      type: Boolean,
      default: !0
    },
    loading: {
      type: Boolean,
      default: !1
    },
    closable: {
      type: Boolean,
      default: !1
    },
    checkable: {
      type: Boolean,
      default: !1
    },
    checked: {
      type: Boolean,
      default: void 0
    },
    defaultChecked: {
      type: Boolean,
      default: !0
    },
    nowrap: {
      type: Boolean,
      default: !1
    }
  },
  emits: {
    "update:visible": (e) => !0,
    "update:checked": (e) => !0,
    close: (e) => !0,
    check: (e, t) => !0
  },
  setup(e, { emit: t }) {
    const { size: n } = Qt(e), r = Je("tag"), i = F(() => e.color && o_.includes(e.color)), o = F(() => e.color && !o_.includes(e.color)), a = le(e.defaultVisible), s = le(e.defaultChecked), l = F(() => {
      var g;
      return (g = e.visible) != null ? g : a.value;
    }), u = F(() => {
      var g;
      return e.checkable ? (g = e.checked) != null ? g : s.value : !0;
    }), { mergedSize: c } = ho(n), d = F(() => c.value === "mini" ? "small" : c.value), f = (g) => {
      a.value = !1, t("update:visible", !1), t("close", g);
    }, h = (g) => {
      if (e.checkable) {
        const y = !u.value;
        s.value = y, t("update:checked", y), t("check", y, g);
      }
    }, p = F(() => [
      r,
      `${r}-size-${d.value}`,
      {
        [`${r}-loading`]: e.loading,
        [`${r}-hide`]: !l.value,
        [`${r}-${e.color}`]: i.value,
        [`${r}-bordered`]: e.bordered,
        [`${r}-checkable`]: e.checkable,
        [`${r}-checked`]: u.value,
        [`${r}-custom-color`]: o.value
      }
    ]), v = F(() => {
      if (o.value)
        return {
          backgroundColor: e.color
        };
    });
    return {
      prefixCls: r,
      cls: p,
      style: v,
      computedVisible: l,
      computedChecked: u,
      handleClick: h,
      handleClose: f
    };
  }
});
function dT(e, t, n, r, i, o) {
  const a = Ie("icon-close"), s = Ie("icon-hover"), l = Ie("icon-loading");
  return e.computedVisible ? (X(), he("span", {
    key: 0,
    class: ze(e.cls),
    style: Jt(e.style),
    onClick: t[0] || (t[0] = (...u) => e.handleClick && e.handleClick(...u))
  }, [
    e.$slots.icon ? (X(), he("span", {
      key: 0,
      class: ze(`${e.prefixCls}-icon`)
    }, [
      mt(e.$slots, "icon")
    ], 2)) : vt("v-if", !0),
    e.nowrap ? (X(), he("span", {
      key: 1,
      class: ze(`${e.prefixCls}-text`)
    }, [
      mt(e.$slots, "default")
    ], 2)) : mt(e.$slots, "default", { key: 2 }),
    e.closable ? (X(), ot(s, {
      key: 3,
      role: "button",
      "aria-label": "Close",
      prefix: e.prefixCls,
      class: ze(`${e.prefixCls}-close-btn`),
      onClick: Cs(e.handleClose, ["stop"])
    }, {
      default: Z(() => [
        mt(e.$slots, "close-icon", {}, () => [
          A(a)
        ])
      ]),
      _: 3
    }, 8, ["prefix", "class", "onClick"])) : vt("v-if", !0),
    e.loading ? (X(), he("span", {
      key: 4,
      class: ze(`${e.prefixCls}-loading-icon`)
    }, [
      A(l)
    ], 2)) : vt("v-if", !0)
  ], 6)) : vt("v-if", !0);
}
var Kh = /* @__PURE__ */ $t(cT, [["render", dT]]);
const fT = Object.assign(Kh, {
  install: (e, t) => {
    Ln(e, t);
    const n = Rn(t);
    e.component(n + Kh.name, Kh);
  }
});
var hT = Object.defineProperty, a_ = Object.getOwnPropertySymbols, pT = Object.prototype.hasOwnProperty, vT = Object.prototype.propertyIsEnumerable, s_ = (e, t, n) => t in e ? hT(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, cc = (e, t) => {
  for (var n in t || (t = {}))
    pT.call(t, n) && s_(e, n, t[n]);
  if (a_)
    for (var n of a_(t))
      vT.call(t, n) && s_(e, n, t[n]);
  return e;
};
const gT = {
  value: "value",
  label: "label",
  closable: "closable",
  tagProps: "tagProps"
};
var qh = fe({
  name: "InputTag",
  inheritAttrs: !1,
  props: {
    modelValue: {
      type: Array
    },
    defaultValue: {
      type: Array,
      default: () => []
    },
    inputValue: String,
    defaultInputValue: {
      type: String,
      default: ""
    },
    placeholder: String,
    disabled: {
      type: Boolean,
      default: !1
    },
    error: {
      type: Boolean,
      default: !1
    },
    readonly: {
      type: Boolean,
      default: !1
    },
    allowClear: {
      type: Boolean,
      default: !1
    },
    size: {
      type: String
    },
    maxTagCount: {
      type: Number,
      default: 0
    },
    retainInputValue: {
      type: [Boolean, Object],
      default: !1
    },
    formatTag: {
      type: Function
    },
    uniqueValue: {
      type: Boolean,
      default: !1
    },
    fieldNames: {
      type: Object
    },
    tagNowrap: {
      type: Boolean,
      default: !1
    },
    baseCls: String,
    focused: Boolean,
    disabledInput: Boolean,
    uninjectFormItemContext: Boolean
  },
  emits: {
    "update:modelValue": (e) => !0,
    "update:inputValue": (e) => !0,
    change: (e, t) => !0,
    inputValueChange: (e, t) => !0,
    pressEnter: (e, t) => !0,
    remove: (e, t) => !0,
    clear: (e) => !0,
    focus: (e) => !0,
    blur: (e) => !0
  },
  setup(e, {
    emit: t,
    slots: n,
    attrs: r
  }) {
    const {
      size: i,
      disabled: o,
      error: a,
      uninjectFormItemContext: s,
      modelValue: l
    } = Qt(e), u = e.baseCls || Je("input-tag"), c = le(), d = le(), {
      mergedSize: f,
      mergedDisabled: h,
      mergedError: p,
      feedback: v,
      eventHandlers: g
    } = Oi({
      size: i,
      disabled: o,
      error: a,
      uninject: s == null ? void 0 : s.value
    }), {
      mergedSize: y
    } = ho(f), m = F(() => cc(cc({}, gT), e.fieldNames)), E = le(!1), w = le(e.defaultValue), S = le(e.defaultInputValue), _ = le(!1), b = le(""), T = F(() => Fn(e.retainInputValue) ? cc({
      create: !1,
      blur: !1
    }, e.retainInputValue) : {
      create: e.retainInputValue,
      blur: e.retainInputValue
    }), R = Or({
      width: "12px"
    }), B = F(() => e.focused || E.value), K = (ce, Te) => {
      S.value = ce, t("update:inputValue", ce), t("inputValueChange", ce, Te);
    }, ae = (ce) => {
      var Te;
      const {
        value: Le
      } = ce.target;
      ce.type === "compositionend" ? (_.value = !1, b.value = "", K(Le, ce), Hn(() => {
        c.value && P.value !== c.value.value && (c.value.value = P.value);
      })) : (_.value = !0, b.value = P.value + ((Te = ce.data) != null ? Te : ""));
    }, x = F(() => {
      var ce;
      return (ce = e.modelValue) != null ? ce : w.value;
    }), P = F(() => {
      var ce;
      return (ce = e.inputValue) != null ? ce : S.value;
    });
    wt(l, (ce) => {
      (wr(ce) || Ks(ce)) && (w.value = []);
    });
    const L = (ce) => {
      c.value && ce.target !== c.value && (ce.preventDefault(), c.value.focus());
    }, k = (ce) => {
      const {
        value: Te
      } = ce.target;
      _.value || (K(Te, ce), Hn(() => {
        c.value && P.value !== c.value.value && (c.value.value = P.value);
      }));
    }, J = F(() => uT(x.value, m.value)), de = F(() => {
      if (e.maxTagCount > 0) {
        const ce = J.value.length - e.maxTagCount;
        if (ce > 0) {
          const Te = J.value.slice(0, e.maxTagCount), Le = {
            value: "__arco__more",
            label: `+${ce}...`,
            closable: !1
          };
          return Te.push(cc({
            raw: Le
          }, Le)), Te;
        }
      }
      return J.value;
    }), Ne = (ce, Te) => {
      var Le, Ct;
      w.value = ce, t("update:modelValue", ce), t("change", ce, Te), (Ct = (Le = g.value) == null ? void 0 : Le.onChange) == null || Ct.call(Le, Te);
    }, se = (ce, Te, Le) => {
      var Ct;
      const bt = (Ct = x.value) == null ? void 0 : Ct.filter((M, D) => D !== Te);
      Ne(bt, Le), t("remove", ce, Le);
    }, G = (ce) => {
      Ne([], ce), t("clear", ce);
    }, be = F(() => !h.value && !e.readonly && e.allowClear && !!x.value.length), Oe = (ce) => {
      var Te;
      if (P.value) {
        if (ce.preventDefault(), e.uniqueValue && ((Te = x.value) != null && Te.includes(P.value))) {
          t("pressEnter", P.value, ce);
          return;
        }
        const Le = x.value.concat(P.value);
        Ne(Le, ce), t("pressEnter", P.value, ce), T.value.create || K("", ce);
      }
    }, Ae = (ce) => {
      var Te, Le;
      E.value = !0, t("focus", ce), (Le = (Te = g.value) == null ? void 0 : Te.onFocus) == null || Le.call(Te, ce);
    }, Re = (ce) => {
      var Te, Le;
      E.value = !1, !T.value.blur && P.value && K("", ce), t("blur", ce), (Le = (Te = g.value) == null ? void 0 : Te.onBlur) == null || Le.call(Te, ce);
    }, $ = () => {
      for (let ce = J.value.length - 1; ce >= 0; ce--)
        if (J.value[ce].closable)
          return ce;
      return -1;
    }, re = (ce) => {
      if (h.value || e.readonly)
        return;
      const Te = ce.key || ce.code;
      if (!_.value && P.value && Te === Lg.key && Oe(ce), !_.value && de.value.length > 0 && !P.value && Te === IA.key) {
        const Le = $();
        Le >= 0 && se(J.value[Le].value, Le, ce);
      }
    }, ee = (ce) => {
      ce > 12 ? R.width = `${ce}px` : R.width = "12px";
    };
    fr(() => {
      d.value && ee(d.value.offsetWidth);
    });
    const _e = () => {
      d.value && ee(d.value.offsetWidth);
    };
    wt(P, (ce) => {
      c.value && !_.value && ce !== c.value.value && (c.value.value = ce);
    });
    const xe = F(() => [u, `${u}-size-${y.value}`, {
      [`${u}-disabled`]: h.value,
      [`${u}-disabled-input`]: e.disabledInput,
      [`${u}-error`]: p.value,
      [`${u}-focus`]: B.value,
      [`${u}-readonly`]: e.readonly,
      [`${u}-has-tag`]: de.value.length > 0,
      [`${u}-has-prefix`]: !!n.prefix,
      [`${u}-has-suffix`]: !!n.suffix || be.value || v.value,
      [`${u}-has-placeholder`]: !x.value.length
    }]), ye = F(() => ju(r, As)), Ge = F(() => $g(r, As));
    return {
      inputRef: c,
      render: () => {
        var ce;
        return A("span", dn({
          class: xe.value,
          onMousedown: L
        }, ye.value), [A(UO, {
          onResize: _e
        }, {
          default: () => [A("span", {
            ref: d,
            class: `${u}-mirror`
          }, [de.value.length > 0 ? b.value || P.value : b.value || P.value || e.placeholder])]
        }), n.prefix && A("span", {
          class: `${u}-prefix`
        }, [n.prefix()]), A(nO, {
          tag: "span",
          name: "input-tag-zoom",
          class: [`${u}-inner`, {
            [`${u}-nowrap`]: e.tagNowrap
          }]
        }, {
          default: () => [de.value.map((Te, Le) => A(fT, dn({
            key: `tag-${Te.value}`,
            class: `${u}-tag`,
            closable: !h.value && !e.readonly && Te.closable,
            visible: !0,
            nowrap: e.tagNowrap
          }, Te.tagProps, {
            onClose: (Ct) => se(Te.value, Le, Ct)
          }), {
            default: () => {
              var Ct, bt, M, D;
              return [(D = (M = (Ct = n.tag) == null ? void 0 : Ct.call(n, {
                data: Te.raw
              })) != null ? M : (bt = e.formatTag) == null ? void 0 : bt.call(e, Te.raw)) != null ? D : Te.label];
            }
          })), A("input", dn(Ge.value, {
            ref: c,
            key: "input-tag-input",
            class: `${u}-input`,
            style: R,
            placeholder: de.value.length === 0 ? e.placeholder : void 0,
            disabled: h.value,
            readonly: e.readonly || e.disabledInput,
            onInput: k,
            onKeydown: re,
            onFocus: Ae,
            onBlur: Re,
            onCompositionstart: ae,
            onCompositionupdate: ae,
            onCompositionend: ae
          }), null)]
        }), be.value && A(Si, {
          class: `${u}-clear-btn`,
          onClick: G,
          onMousedown: (Te) => Te.stopPropagation()
        }, {
          default: () => [A(Bu, null, null)]
        }), (n.suffix || !!v.value) && A("span", {
          class: `${u}-suffix`
        }, [(ce = n.suffix) == null ? void 0 : ce.call(n), !!v.value && A(Rg, {
          type: v.value
        }, null)])]);
      }
    };
  },
  methods: {
    focus() {
      var e;
      (e = this.inputRef) == null || e.focus();
    },
    blur() {
      var e;
      (e = this.inputRef) == null || e.blur();
    }
  },
  render() {
    return this.render();
  }
});
const yT = Object.assign(qh, {
  install: (e, t) => {
    Ln(e, t);
    const n = Rn(t);
    e.component(n + qh.name, qh);
  }
});
var l_ = fe({
  name: "SelectView",
  props: {
    modelValue: {
      type: Array,
      required: !0
    },
    inputValue: String,
    placeholder: String,
    disabled: {
      type: Boolean,
      default: !1
    },
    error: {
      type: Boolean,
      default: !1
    },
    loading: {
      type: Boolean,
      default: !1
    },
    opened: {
      type: Boolean,
      default: !1
    },
    size: {
      type: String
    },
    bordered: {
      type: Boolean,
      default: !0
    },
    multiple: {
      type: Boolean,
      default: !1
    },
    allowClear: {
      type: Boolean,
      default: !1
    },
    allowCreate: {
      type: Boolean,
      default: !1
    },
    allowSearch: {
      type: Boolean,
      default: (e) => zr(e.modelValue)
    },
    maxTagCount: {
      type: Number,
      default: 0
    },
    tagNowrap: {
      type: Boolean,
      default: !1
    },
    retainInputValue: {
      type: Boolean,
      default: !1
    }
  },
  emits: ["remove", "clear", "focus", "blur"],
  setup(e, {
    emit: t,
    slots: n
  }) {
    const {
      size: r,
      disabled: i,
      error: o
    } = Qt(e), a = Je("select-view"), {
      feedback: s,
      eventHandlers: l,
      mergedDisabled: u,
      mergedSize: c,
      mergedError: d
    } = Oi({
      size: r,
      disabled: i,
      error: o
    }), {
      mergedSize: f
    } = ho(c), {
      opened: h
    } = Qt(e), p = le(), v = F(() => {
      var K;
      return (K = p.value) == null ? void 0 : K.inputRef;
    }), g = F(() => e.modelValue.length === 0), y = F(() => e.allowSearch || e.allowCreate), m = F(() => e.allowClear && !e.disabled && !g.value), E = (K) => {
      var ae, x;
      t("focus", K), (x = (ae = l.value) == null ? void 0 : ae.onFocus) == null || x.call(ae, K);
    }, w = (K) => {
      var ae, x;
      t("blur", K), (x = (ae = l.value) == null ? void 0 : ae.onBlur) == null || x.call(ae, K);
    }, S = (K) => {
      t("remove", K);
    }, _ = (K) => {
      t("clear", K);
    }, b = () => {
      var K, ae, x, P;
      return e.loading ? (ae = (K = n["loading-icon"]) == null ? void 0 : K.call(n)) != null ? ae : A(qs, null, null) : e.allowSearch && e.opened ? (P = (x = n["search-icon"]) == null ? void 0 : x.call(n)) != null ? P : A(Zp, null, null) : n["arrow-icon"] ? n["arrow-icon"]() : A(Lw, {
        class: `${a}-arrow-icon`
      }, null);
    }, T = () => A(Un, null, [m.value && A(Si, {
      class: `${a}-clear-btn`,
      onClick: _,
      onMousedown: (K) => K.stopPropagation()
    }, {
      default: () => [A(Bu, null, null)]
    }), A("span", {
      class: `${a}-icon`
    }, [b()]), !!s.value && A(Rg, {
      type: s.value
    }, null)]);
    wt(h, (K) => {
      !K && v.value && v.value.isSameNode(document.activeElement) && v.value.blur();
    });
    const R = F(() => [`${a}-${e.multiple ? "multiple" : "single"}`, {
      [`${a}-opened`]: e.opened,
      [`${a}-borderless`]: !e.bordered
    }]);
    return {
      inputRef: v,
      handleFocus: E,
      handleBlur: w,
      render: () => e.multiple ? A(yT, {
        ref: p,
        baseCls: a,
        class: R.value,
        modelValue: e.modelValue,
        inputValue: e.inputValue,
        focused: e.opened,
        placeholder: e.placeholder,
        disabled: u.value,
        size: f.value,
        error: d.value,
        maxTagCount: e.maxTagCount,
        disabledInput: !e.allowSearch && !e.allowCreate,
        tagNowrap: e.tagNowrap,
        retainInputValue: !0,
        uninjectFormItemContext: !0,
        onRemove: S,
        onFocus: E,
        onBlur: w
      }, {
        prefix: n.prefix,
        suffix: T,
        tag: n.label
      }) : A(iT, {
        ref: p,
        baseCls: a,
        class: R.value,
        modelValue: e.modelValue[0],
        inputValue: e.inputValue,
        focused: e.opened,
        placeholder: e.placeholder,
        disabled: u.value,
        size: f.value,
        error: d.value,
        enabledInput: y.value,
        uninjectFormItemContext: !0,
        onFocus: E,
        onBlur: w
      }, {
        default: n.label,
        prefix: n.prefix,
        suffix: T
      })
    };
  },
  methods: {
    focus() {
      this.inputRef && this.inputRef.focus();
    },
    blur() {
      this.inputRef && this.inputRef.blur();
    }
  },
  render() {
    return this.render();
  }
});
const mT = fe({
  name: "Optgroup",
  props: {
    label: {
      type: String
    }
  },
  setup() {
    return {
      prefixCls: Je("select-group")
    };
  }
});
function _T(e, t, n, r, i, o) {
  return X(), he(Un, null, [
    Y("li", {
      class: ze(`${e.prefixCls}-title`)
    }, [
      mt(e.$slots, "label", {}, () => [
        Lt(Mt(e.label), 1)
      ])
    ], 2),
    mt(e.$slots, "default")
  ], 64);
}
var Gc = /* @__PURE__ */ $t(mT, [["render", _T]]);
const u_ = typeof window > "u" ? global : window;
function bT(e, t) {
  let n = 0;
  return (...r) => {
    n && u_.clearTimeout(n), n = u_.setTimeout(() => {
      n = 0, e(...r);
    }, t);
  };
}
var wT = Object.defineProperty, xT = Object.defineProperties, ET = Object.getOwnPropertyDescriptors, c_ = Object.getOwnPropertySymbols, ST = Object.prototype.hasOwnProperty, CT = Object.prototype.propertyIsEnumerable, d_ = (e, t, n) => t in e ? wT(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, wl = (e, t) => {
  for (var n in t || (t = {}))
    ST.call(t, n) && d_(e, n, t[n]);
  if (c_)
    for (var n of c_(t))
      CT.call(t, n) && d_(e, n, t[n]);
  return e;
}, OT = (e, t) => xT(e, ET(t));
function AT(e) {
  return typeof e == "function" || Object.prototype.toString.call(e) === "[object Object]" && !rO(e);
}
const NT = {
  value: "value",
  label: "label",
  disabled: "disabled",
  tagProps: "tagProps",
  render: "render"
};
var Zh = fe({
  name: "Select",
  components: {
    Trigger: cd,
    SelectView: l_
  },
  inheritAttrs: !1,
  props: {
    multiple: {
      type: Boolean,
      default: !1
    },
    modelValue: {
      type: [String, Number, Boolean, Object, Array],
      default: void 0
    },
    defaultValue: {
      type: [String, Number, Boolean, Object, Array],
      default: (e) => wr(e.multiple) ? "" : []
    },
    inputValue: {
      type: String
    },
    defaultInputValue: {
      type: String,
      default: ""
    },
    size: {
      type: String
    },
    placeholder: String,
    loading: {
      type: Boolean,
      default: !1
    },
    disabled: {
      type: Boolean,
      default: !1
    },
    error: {
      type: Boolean,
      default: !1
    },
    allowClear: {
      type: Boolean,
      default: !1
    },
    allowSearch: {
      type: [Boolean, Object],
      default: (e) => !!e.multiple
    },
    allowCreate: {
      type: Boolean,
      default: !1
    },
    maxTagCount: {
      type: Number,
      default: 0
    },
    popupContainer: {
      type: [String, Object]
    },
    bordered: {
      type: Boolean,
      default: !0
    },
    defaultActiveFirstOption: {
      type: Boolean,
      default: !0
    },
    popupVisible: {
      type: Boolean,
      default: void 0
    },
    defaultPopupVisible: {
      type: Boolean,
      default: !1
    },
    unmountOnClose: {
      type: Boolean,
      default: !1
    },
    filterOption: {
      type: [Boolean, Function],
      default: !0
    },
    options: {
      type: Array,
      default: () => []
    },
    virtualListProps: {
      type: Object
    },
    triggerProps: {
      type: Object
    },
    formatLabel: {
      type: Function
    },
    fallbackOption: {
      type: [Boolean, Function],
      default: !0
    },
    showExtraOptions: {
      type: Boolean,
      default: !0
    },
    valueKey: {
      type: String,
      default: "value"
    },
    searchDelay: {
      type: Number,
      default: 500
    },
    limit: {
      type: Number,
      default: 0
    },
    fieldNames: {
      type: Object
    },
    scrollbar: {
      type: [Boolean, Object],
      default: !0
    },
    showHeaderOnEmpty: {
      type: Boolean,
      default: !1
    },
    showFooterOnEmpty: {
      type: Boolean,
      default: !1
    },
    tagNowrap: {
      type: Boolean,
      default: !1
    }
  },
  emits: {
    "update:modelValue": (e) => !0,
    "update:inputValue": (e) => !0,
    "update:popupVisible": (e) => !0,
    change: (e) => !0,
    inputValueChange: (e) => !0,
    popupVisibleChange: (e) => !0,
    clear: (e) => !0,
    remove: (e) => !0,
    search: (e) => !0,
    dropdownScroll: (e) => !0,
    dropdownReachBottom: (e) => !0,
    exceedLimit: (e, t) => !0
  },
  setup(e, {
    slots: t,
    emit: n,
    attrs: r
  }) {
    const {
      size: i,
      disabled: o,
      error: a,
      options: s,
      filterOption: l,
      valueKey: u,
      multiple: c,
      popupVisible: d,
      defaultPopupVisible: f,
      showExtraOptions: h,
      modelValue: p,
      fieldNames: v,
      loading: g,
      defaultActiveFirstOption: y
    } = Qt(e), m = Je("select"), {
      mergedSize: E,
      mergedDisabled: w,
      mergedError: S,
      eventHandlers: _
    } = Oi({
      size: i,
      disabled: o,
      error: a
    }), b = F(() => e.virtualListProps ? "div" : "li"), T = F(() => Fn(e.allowSearch) && !!e.allowSearch.retainInputValue);
    F(() => {
      if (Nn(e.formatLabel))
        return (U) => {
          const z = bt.get(U.value);
          return e.formatLabel(z);
        };
    });
    const R = le(), B = le({}), K = le(), {
      computedPopupVisible: ae,
      handlePopupVisibleChange: x
    } = nT({
      popupVisible: d,
      defaultPopupVisible: f,
      emit: n
    }), P = le(e.defaultValue), L = F(() => {
      var U;
      const z = (U = e.modelValue) != null ? U : P.value;
      return (zr(z) ? z : z || At(z) || Go(z) || vu(z) ? [z] : []).map((Ce) => ({
        value: Ce,
        key: yu(Ce, e.valueKey)
      }));
    });
    wt(p, (U) => {
      (wr(U) || Ks(U)) && (P.value = c.value ? [] : U);
    });
    const k = F(() => L.value.map((U) => U.key)), J = F(() => wl(wl({}, NT), v == null ? void 0 : v.value)), de = le(), Ne = (U) => {
      const z = {};
      return U.forEach((W) => {
        z[W] = bt.get(W);
      }), z;
    }, se = (U) => {
      de.value = Ne(U);
    }, G = (U) => Nn(e.fallbackOption) ? e.fallbackOption(U) : {
      [J.value.value]: U,
      [J.value.label]: String(Fn(U) ? U[u == null ? void 0 : u.value] : U)
    }, be = () => {
      const U = [], z = [];
      if (e.allowCreate || e.fallbackOption) {
        for (const W of L.value)
          if (!z.includes(W.key) && W.value !== "") {
            const Ce = bt.get(W.key);
            (!Ce || Ce.origin === "extraOptions") && (U.push(W), z.push(W.key));
          }
      }
      if (e.allowCreate && $.value) {
        const W = yu($.value);
        if (!z.includes(W)) {
          const Ce = bt.get(W);
          (!Ce || Ce.origin === "extraOptions") && U.push({
            value: $.value,
            key: W
          });
        }
      }
      return U;
    }, Oe = le([]), Ae = F(() => Oe.value.map((U) => {
      var z;
      let W = G(U.value);
      const Ce = (z = de.value) == null ? void 0 : z[U.key];
      return !wr(Ce) && !vO(Ce) && (W = wl(wl({}, W), Ce)), W;
    }));
    Hn(() => {
      sd(() => {
        var U;
        const z = be();
        if (z.length !== Oe.value.length)
          Oe.value = z;
        else if (z.length > 0) {
          for (let W = 0; W < z.length; W++)
            if (z[W].key !== ((U = Oe.value[W]) == null ? void 0 : U.key)) {
              Oe.value = z;
              break;
            }
        }
      });
    });
    const Re = le(""), $ = F(() => {
      var U;
      return (U = e.inputValue) != null ? U : Re.value;
    });
    wt(ae, (U) => {
      !U && !T.value && $.value && _e("");
    });
    const re = (U) => {
      var z, W;
      return e.multiple ? U.map((Ce) => {
        var et, qe;
        return (qe = (et = bt.get(Ce)) == null ? void 0 : et.value) != null ? qe : "";
      }) : (W = (z = bt.get(U[0])) == null ? void 0 : z.value) != null ? W : CM(bt) ? void 0 : "";
    }, ee = (U) => {
      var z, W;
      const Ce = re(U);
      P.value = Ce, n("update:modelValue", Ce), n("change", Ce), (W = (z = _.value) == null ? void 0 : z.onChange) == null || W.call(z), se(U);
    }, _e = (U) => {
      Re.value = U, n("update:inputValue", U), n("inputValueChange", U);
    }, xe = (U, z) => {
      if (e.multiple) {
        if (k.value.includes(U)) {
          const W = k.value.filter((Ce) => Ce !== U);
          ee(W);
        } else if (D.value.includes(U))
          if (e.limit > 0 && k.value.length >= e.limit) {
            const W = bt.get(U);
            n("exceedLimit", W == null ? void 0 : W.value, z);
          } else {
            const W = k.value.concat(U);
            ee(W);
          }
        T.value || _e("");
      } else {
        if (U !== k.value[0] && ee([U]), T.value) {
          const W = bt.get(U);
          W && _e(W.label);
        }
        x(!1);
      }
    }, ye = bT((U) => {
      n("search", U);
    }, e.searchDelay), Ge = (U) => {
      U !== $.value && (ae.value || x(!0), _e(U), e.allowSearch && ye(U));
    }, Ee = (U) => {
      const z = bt.get(U), W = k.value.filter((Ce) => Ce !== U);
      ee(W), n("remove", z == null ? void 0 : z.value);
    }, ce = (U) => {
      U == null || U.stopPropagation();
      const z = k.value.filter((W) => {
        var Ce;
        return (Ce = bt.get(W)) == null ? void 0 : Ce.disabled;
      });
      ee(z), _e(""), n("clear", U);
    }, Te = (U) => {
      n("dropdownScroll", U);
    }, Le = (U) => {
      n("dropdownReachBottom", U);
    }, {
      validOptions: Ct,
      optionInfoMap: bt,
      validOptionInfos: M,
      enabledOptionKeys: D,
      handleKeyDown: I
    } = jM({
      multiple: c,
      options: s,
      extraOptions: Ae,
      inputValue: $,
      filterOption: l,
      showExtraOptions: h,
      component: b,
      valueKey: u,
      fieldNames: v,
      loading: g,
      popupVisible: ae,
      valueKeys: k,
      dropdownRef: R,
      optionRefs: B,
      virtualListRef: K,
      defaultActiveFirstOption: y,
      onSelect: xe,
      onPopupVisibleChange: x
    }), ue = F(() => {
      var U;
      const z = [];
      for (const W of L.value) {
        const Ce = bt.get(W.key);
        Ce && z.push(OT(wl({}, Ce), {
          value: W.key,
          label: (U = Ce == null ? void 0 : Ce.label) != null ? U : String(Fn(W.value) ? W.value[u == null ? void 0 : u.value] : W.value),
          closable: !(Ce != null && Ce.disabled),
          tagProps: Ce == null ? void 0 : Ce.tagProps
        }));
      }
      return z;
    }), j = (U) => {
      if (Nn(t.option)) {
        const z = t.option;
        return () => z({
          data: U.raw
        });
      }
      return Nn(U.render) ? U.render : () => U.label;
    }, ge = (U) => {
      if (Dw(U)) {
        let z;
        return A(Gc, {
          key: U.key,
          label: U.label
        }, AT(z = U.options.map((W) => ge(W))) ? z : {
          default: () => [z]
        });
      }
      return Ef(U, {
        inputValue: $.value,
        filterOption: l == null ? void 0 : l.value
      }) ? A(Gl, {
        ref: (z) => {
          z != null && z.$el && (B.value[U.key] = z.$el);
        },
        key: U.key,
        value: U.value,
        label: U.label,
        disabled: U.disabled,
        internal: !0
      }, {
        default: j(U)
      }) : null;
    }, pe = () => A(gM, {
      ref: R,
      loading: e.loading,
      empty: M.value.length === 0,
      virtualList: !!e.virtualListProps,
      scrollbar: e.scrollbar,
      showHeaderOnEmpty: e.showHeaderOnEmpty,
      showFooterOnEmpty: e.showFooterOnEmpty,
      onScroll: Te,
      onReachBottom: Le
    }, {
      default: () => {
        var U, z;
        return [...(z = (U = t.default) == null ? void 0 : U.call(t)) != null ? z : [], ...Ct.value.map(ge)];
      },
      "virtual-list": () => A(YM, dn(e.virtualListProps, {
        ref: K,
        data: Ct.value
      }), {
        item: ({
          item: U
        }) => ge(U)
      }),
      empty: t.empty,
      header: t.header,
      footer: t.footer
    }), we = ({
      data: U
    }) => {
      var z, W, Ce, et;
      if ((t.label || Nn(e.formatLabel)) && U) {
        const qe = bt.get(U.value);
        if (qe != null && qe.raw)
          return (Ce = (z = t.label) == null ? void 0 : z.call(t, {
            data: qe.raw
          })) != null ? Ce : (W = e.formatLabel) == null ? void 0 : W.call(e, qe.raw);
      }
      return (et = U == null ? void 0 : U.label) != null ? et : "";
    };
    return () => A(cd, dn({
      trigger: "click",
      position: "bl",
      popupOffset: 4,
      animationName: "slide-dynamic-origin",
      hideEmpty: !0,
      preventFocus: !0,
      autoFitPopupWidth: !0,
      autoFitTransformOrigin: !0,
      disabled: w.value,
      popupVisible: ae.value,
      unmountOnClose: e.unmountOnClose,
      clickToClose: !(e.allowSearch || e.allowCreate),
      popupContainer: e.popupContainer,
      onPopupVisibleChange: x
    }, e.triggerProps), {
      default: () => {
        var U, z;
        return [(z = (U = t.trigger) == null ? void 0 : U.call(t)) != null ? z : A(l_, dn({
          class: m,
          modelValue: ue.value,
          inputValue: $.value,
          multiple: e.multiple,
          disabled: w.value,
          error: S.value,
          loading: e.loading,
          allowClear: e.allowClear,
          allowCreate: e.allowCreate,
          allowSearch: !!e.allowSearch,
          opened: ae.value,
          maxTagCount: e.maxTagCount,
          placeholder: e.placeholder,
          bordered: e.bordered,
          size: E.value,
          tagNowrap: e.tagNowrap,
          onInputValueChange: Ge,
          onRemove: Ee,
          onClear: ce,
          onKeydown: I
        }, r), {
          label: we,
          prefix: t.prefix,
          "arrow-icon": t["arrow-icon"],
          "loading-icon": t["loading-icon"],
          "search-icon": t["search-icon"]
        })];
      },
      content: pe
    });
  }
});
const $w = Object.assign(Zh, {
  Option: Gl,
  OptGroup: Gc,
  install: (e, t) => {
    Ln(e, t);
    const n = Rn(t);
    e.component(n + Zh.name, Zh), e.component(n + Gl.name, Gl), e.component(n + Gc.name, Gc);
  }
}), kw = Symbol("RadioGroup");
var Xc = fe({
  name: "Radio",
  components: {
    IconHover: Si
  },
  props: {
    modelValue: {
      type: [String, Number, Boolean],
      default: void 0
    },
    defaultChecked: {
      type: Boolean,
      default: !1
    },
    value: {
      type: [String, Number, Boolean],
      default: !0
    },
    type: {
      type: String,
      default: "radio"
    },
    disabled: {
      type: Boolean,
      default: !1
    },
    uninjectGroupContext: {
      type: Boolean,
      default: !1
    }
  },
  emits: {
    "update:modelValue": (e) => !0,
    change: (e, t) => !0
  },
  setup(e, {
    emit: t,
    slots: n
  }) {
    const r = Je("radio"), {
      modelValue: i
    } = Qt(e), o = e.uninjectGroupContext ? void 0 : ur(kw, void 0), {
      mergedDisabled: a,
      eventHandlers: s
    } = Oi({
      disabled: Gp(e, "disabled")
    }), l = le(null), u = le(e.defaultChecked), c = F(() => (o == null ? void 0 : o.name) === "ArcoRadioGroup"), d = F(() => {
      var w;
      return (w = o == null ? void 0 : o.type) != null ? w : e.type;
    }), f = F(() => (o == null ? void 0 : o.disabled) || a.value), h = F(() => {
      var w, S;
      return c.value ? (o == null ? void 0 : o.value) === ((w = e.value) != null ? w : !0) : wr(e.modelValue) ? u.value : e.modelValue === ((S = e.value) != null ? S : !0);
    });
    wt(i, (w) => {
      (wr(w) || Ks(w)) && (u.value = !1);
    }), wt(h, (w, S) => {
      w !== S && (u.value = w, l.value && (l.value.checked = w));
    });
    const p = (w) => {
      var S, _;
      (_ = (S = s.value) == null ? void 0 : S.onFocus) == null || _.call(S, w);
    }, v = (w) => {
      var S, _;
      (_ = (S = s.value) == null ? void 0 : S.onBlur) == null || _.call(S, w);
    }, g = (w) => {
      w.stopPropagation();
    }, y = (w) => {
      var S, _, b, T, R;
      u.value = !0, c.value ? o == null || o.handleChange((S = e.value) != null ? S : !0, w) : (t("update:modelValue", (_ = e.value) != null ? _ : !0), t("change", (b = e.value) != null ? b : !0, w), (R = (T = s.value) == null ? void 0 : T.onChange) == null || R.call(T, w)), Hn(() => {
        l.value && l.value.checked !== h.value && (l.value.checked = h.value);
      });
    }, m = F(() => [`${d.value === "button" ? `${r}-button` : r}`, {
      [`${r}-checked`]: h.value,
      [`${r}-disabled`]: f.value
    }]), E = () => A(Un, null, [A(Ie("icon-hover"), {
      class: `${r}-icon-hover`,
      disabled: f.value || h.value
    }, {
      default: () => [A("span", {
        class: `${r}-icon`
      }, null)]
    }), n.default && A("span", {
      class: `${r}-label`
    }, [n.default()])]);
    return () => {
      var w, S, _, b;
      return A("label", {
        class: m.value
      }, [A("input", {
        ref: l,
        type: "radio",
        checked: h.value,
        value: e.value,
        class: `${r}-target`,
        disabled: f.value,
        onClick: g,
        onChange: y,
        onFocus: p,
        onBlur: v
      }, null), d.value === "radio" ? (b = (_ = (S = n.radio) != null ? S : (w = o == null ? void 0 : o.slots) == null ? void 0 : w.radio) == null ? void 0 : _({
        checked: h.value,
        disabled: f.value
      })) != null ? b : E() : A("span", {
        class: `${r}-button-content`
      }, [n.default && n.default()])]);
    };
  }
}), Xl = fe({
  name: "RadioGroup",
  props: {
    modelValue: {
      type: [String, Number, Boolean],
      default: void 0
    },
    defaultValue: {
      type: [String, Number, Boolean],
      default: ""
    },
    type: {
      type: String,
      default: "radio"
    },
    size: {
      type: String
    },
    options: {
      type: Array
    },
    direction: {
      type: String,
      default: "horizontal"
    },
    disabled: {
      type: Boolean,
      default: !1
    }
  },
  emits: {
    "update:modelValue": (e) => !0,
    change: (e, t) => !0
  },
  setup(e, {
    emit: t,
    slots: n
  }) {
    const r = Je("radio-group"), {
      size: i,
      type: o,
      disabled: a,
      modelValue: s
    } = Qt(e), {
      mergedDisabled: l,
      mergedSize: u,
      eventHandlers: c
    } = Oi({
      size: i,
      disabled: a
    }), {
      mergedSize: d
    } = ho(u), f = le(e.defaultValue), h = F(() => {
      var m;
      return (m = e.modelValue) != null ? m : f.value;
    }), p = F(() => {
      var m;
      return ((m = e.options) != null ? m : []).map((E) => Go(E) || At(E) ? {
        label: E,
        value: E
      } : E);
    });
    ja(kw, Or({
      name: "ArcoRadioGroup",
      value: h,
      size: d,
      type: o,
      disabled: l,
      slots: n,
      handleChange: (m, E) => {
        var w, S;
        f.value = m, t("update:modelValue", m), t("change", m, E), (S = (w = c.value) == null ? void 0 : w.onChange) == null || S.call(w, E);
      }
    })), wt(h, (m) => {
      f.value !== m && (f.value = m);
    }), wt(s, (m) => {
      (wr(m) || Ks(m)) && (f.value = "");
    });
    const g = F(() => [`${r}${e.type === "button" ? "-button" : ""}`, `${r}-size-${d.value}`, `${r}-direction-${e.direction}`, {
      [`${r}-disabled`]: l.value
    }]), y = () => p.value.map((m) => A(Xc, {
      key: m.value,
      value: m.value,
      disabled: m.disabled,
      modelValue: h.value === m.value
    }, {
      default: () => [n.label ? n.label({
        data: m
      }) : Nn(m.label) ? m.label() : m.label]
    }));
    return () => {
      var m;
      return A("span", {
        class: g.value
      }, [p.value.length > 0 ? y() : (m = n.default) == null ? void 0 : m.call(n)]);
    };
  }
});
const MT = Object.assign(Xc, {
  Group: Xl,
  install: (e, t) => {
    Ln(e, t);
    const n = Rn(t);
    e.component(n + Xc.name, Xc), e.component(n + Xl.name, Xl);
  }
}), TT = fe({
  name: "IconUp",
  props: {
    size: {
      type: [Number, String]
    },
    strokeWidth: {
      type: Number,
      default: 4
    },
    strokeLinecap: {
      type: String,
      default: "butt",
      validator: (e) => ["butt", "round", "square"].includes(e)
    },
    strokeLinejoin: {
      type: String,
      default: "miter",
      validator: (e) => ["arcs", "bevel", "miter", "miter-clip", "round"].includes(e)
    },
    rotate: Number,
    spin: Boolean
  },
  emits: {
    click: (e) => !0
  },
  setup(e, { emit: t }) {
    const n = Je("icon"), r = F(() => [n, `${n}-up`, { [`${n}-spin`]: e.spin }]), i = F(() => {
      const a = {};
      return e.size && (a.fontSize = At(e.size) ? `${e.size}px` : e.size), e.rotate && (a.transform = `rotate(${e.rotate}deg)`), a;
    });
    return {
      cls: r,
      innerStyle: i,
      onClick: (a) => {
        t("click", a);
      }
    };
  }
}), PT = ["stroke-width", "stroke-linecap", "stroke-linejoin"], DT = /* @__PURE__ */ Y("path", { d: "M39.6 30.557 24.043 15 8.487 30.557" }, null, -1), RT = [
  DT
];
function LT(e, t, n, r, i, o) {
  return X(), he("svg", {
    viewBox: "0 0 48 48",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    stroke: "currentColor",
    class: ze(e.cls),
    style: Jt(e.innerStyle),
    "stroke-width": e.strokeWidth,
    "stroke-linecap": e.strokeLinecap,
    "stroke-linejoin": e.strokeLinejoin,
    onClick: t[0] || (t[0] = (...a) => e.onClick && e.onClick(...a))
  }, RT, 14, PT);
}
var Jh = /* @__PURE__ */ $t(TT, [["render", LT]]);
const $T = Object.assign(Jh, {
  install: (e, t) => {
    var n;
    const r = (n = t == null ? void 0 : t.iconPrefix) != null ? n : "";
    e.component(r + Jh.name, Jh);
  }
}), Iw = Symbol("collapseCtx"), kT = fe({
  name: "Collapse",
  props: {
    activeKey: {
      type: Array,
      default: void 0
    },
    defaultActiveKey: {
      type: Array,
      default: () => []
    },
    accordion: {
      type: Boolean,
      default: !1
    },
    showExpandIcon: {
      type: Boolean,
      default: void 0
    },
    expandIconPosition: {
      type: String,
      default: "left"
    },
    bordered: {
      type: Boolean,
      default: !0
    },
    destroyOnHide: {
      type: Boolean,
      default: !1
    }
  },
  emits: {
    "update:activeKey": (e) => !0,
    change: (e, t) => !0
  },
  setup(e, { emit: t, slots: n }) {
    const { expandIconPosition: r, destroyOnHide: i, showExpandIcon: o } = Qt(e), a = Je("collapse"), s = le(e.defaultActiveKey), l = F(() => {
      var d;
      const f = (d = e.activeKey) != null ? d : s.value;
      return zr(f) ? f : [f];
    });
    ja(Iw, Or({
      activeKeys: l,
      slots: n,
      showExpandIcon: o,
      expandIconPosition: r,
      destroyOnHide: i,
      handleClick: (d, f) => {
        let h = [];
        if (e.accordion)
          l.value.includes(d) || (h = [d]), s.value = h;
        else {
          h = [...l.value];
          const p = h.indexOf(d);
          p > -1 ? h.splice(p, 1) : e.accordion ? h = [d] : h.push(d), s.value = h;
        }
        t("update:activeKey", h), t("change", h, f);
      }
    }));
    const c = F(() => [
      a,
      {
        [`${a}-borderless`]: !e.bordered
      }
    ]);
    return {
      prefixCls: a,
      cls: c
    };
  }
});
function IT(e, t, n, r, i, o) {
  return X(), he("div", {
    class: ze(e.cls)
  }, [
    mt(e.$slots, "default")
  ], 2);
}
var Qh = /* @__PURE__ */ $t(kT, [["render", IT]]);
const BT = fe({
  name: "IconCaretRight",
  props: {
    size: {
      type: [Number, String]
    },
    strokeWidth: {
      type: Number,
      default: 4
    },
    strokeLinecap: {
      type: String,
      default: "butt",
      validator: (e) => ["butt", "round", "square"].includes(e)
    },
    strokeLinejoin: {
      type: String,
      default: "miter",
      validator: (e) => ["arcs", "bevel", "miter", "miter-clip", "round"].includes(e)
    },
    rotate: Number,
    spin: Boolean
  },
  emits: {
    click: (e) => !0
  },
  setup(e, { emit: t }) {
    const n = Je("icon"), r = F(() => [n, `${n}-caret-right`, { [`${n}-spin`]: e.spin }]), i = F(() => {
      const a = {};
      return e.size && (a.fontSize = At(e.size) ? `${e.size}px` : e.size), e.rotate && (a.transform = `rotate(${e.rotate}deg)`), a;
    });
    return {
      cls: r,
      innerStyle: i,
      onClick: (a) => {
        t("click", a);
      }
    };
  }
}), jT = ["stroke-width", "stroke-linecap", "stroke-linejoin"], zT = /* @__PURE__ */ Y("path", {
  d: "M34.829 23.063c.6.48.6 1.394 0 1.874L17.949 38.44c-.785.629-1.949.07-1.949-.937V10.497c0-1.007 1.164-1.566 1.95-.937l16.879 13.503Z",
  fill: "currentColor",
  stroke: "none"
}, null, -1), FT = [
  zT
];
function HT(e, t, n, r, i, o) {
  return X(), he("svg", {
    viewBox: "0 0 48 48",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    stroke: "currentColor",
    class: ze(e.cls),
    style: Jt(e.innerStyle),
    "stroke-width": e.strokeWidth,
    "stroke-linecap": e.strokeLinecap,
    "stroke-linejoin": e.strokeLinejoin,
    onClick: t[0] || (t[0] = (...a) => e.onClick && e.onClick(...a))
  }, FT, 14, jT);
}
var ep = /* @__PURE__ */ $t(BT, [["render", HT]]);
const VT = Object.assign(ep, {
  install: (e, t) => {
    var n;
    const r = (n = t == null ? void 0 : t.iconPrefix) != null ? n : "";
    e.component(r + ep.name, ep);
  }
}), WT = fe({
  name: "IconCaretLeft",
  props: {
    size: {
      type: [Number, String]
    },
    strokeWidth: {
      type: Number,
      default: 4
    },
    strokeLinecap: {
      type: String,
      default: "butt",
      validator: (e) => ["butt", "round", "square"].includes(e)
    },
    strokeLinejoin: {
      type: String,
      default: "miter",
      validator: (e) => ["arcs", "bevel", "miter", "miter-clip", "round"].includes(e)
    },
    rotate: Number,
    spin: Boolean
  },
  emits: {
    click: (e) => !0
  },
  setup(e, { emit: t }) {
    const n = Je("icon"), r = F(() => [n, `${n}-caret-left`, { [`${n}-spin`]: e.spin }]), i = F(() => {
      const a = {};
      return e.size && (a.fontSize = At(e.size) ? `${e.size}px` : e.size), e.rotate && (a.transform = `rotate(${e.rotate}deg)`), a;
    });
    return {
      cls: r,
      innerStyle: i,
      onClick: (a) => {
        t("click", a);
      }
    };
  }
}), GT = ["stroke-width", "stroke-linecap", "stroke-linejoin"], XT = /* @__PURE__ */ Y("path", {
  d: "M13.171 24.937a1.2 1.2 0 0 1 0-1.874L30.051 9.56c.785-.629 1.949-.07 1.949.937v27.006c0 1.006-1.164 1.566-1.95.937L13.171 24.937Z",
  fill: "currentColor",
  stroke: "none"
}, null, -1), UT = [
  XT
];
function YT(e, t, n, r, i, o) {
  return X(), he("svg", {
    viewBox: "0 0 48 48",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    stroke: "currentColor",
    class: ze(e.cls),
    style: Jt(e.innerStyle),
    "stroke-width": e.strokeWidth,
    "stroke-linecap": e.strokeLinecap,
    "stroke-linejoin": e.strokeLinejoin,
    onClick: t[0] || (t[0] = (...a) => e.onClick && e.onClick(...a))
  }, UT, 14, GT);
}
var tp = /* @__PURE__ */ $t(WT, [["render", YT]]);
const KT = Object.assign(tp, {
  install: (e, t) => {
    var n;
    const r = (n = t == null ? void 0 : t.iconPrefix) != null ? n : "";
    e.component(r + tp.name, tp);
  }
});
var Ul = fe({
  name: "CollapseItem",
  components: {
    IconHover: Si,
    IconCaretRight: VT,
    IconCaretLeft: KT
  },
  props: {
    header: String,
    disabled: {
      type: Boolean,
      default: !1
    },
    showExpandIcon: {
      type: Boolean,
      default: !0
    },
    destroyOnHide: {
      type: Boolean,
      default: !1
    }
  },
  setup(e, {
    slots: t
  }) {
    var n;
    const r = Iu(), i = Je("collapse-item"), o = ur(Iw, {}), a = r && At(r == null ? void 0 : r.vnode.key) ? r.vnode.key : String((n = r == null ? void 0 : r.vnode.key) != null ? n : ""), s = F(() => {
      var w;
      return (w = o.activeKeys) == null ? void 0 : w.includes(a);
    }), l = F(() => o.destroyOnHide || e.destroyOnHide), u = F(() => {
      var w;
      return (w = o == null ? void 0 : o.showExpandIcon) != null ? w : e.showExpandIcon;
    }), c = le(l.value ? s.value : !0), d = F(() => {
      var w;
      return (w = o == null ? void 0 : o.expandIconPosition) != null ? w : "left";
    }), f = (w) => {
      var S;
      e.disabled || (S = o.handleClick) == null || S.call(o, a, w);
    };
    wt(s, (w) => {
      w && !c.value && (c.value = !0);
    });
    const h = {
      onEnter: (w) => {
        w.style.height = `${w.scrollHeight}px`;
      },
      onAfterEnter: (w) => {
        w.style.height = "auto";
      },
      onBeforeLeave: (w) => {
        w.style.height = `${w.scrollHeight}px`;
      },
      onLeave: (w) => {
        w.style.height = "0";
      },
      onAfterLeave: () => {
        l.value && (c.value = !1);
      }
    }, p = F(() => [i, {
      [`${i}-active`]: s.value
    }]), v = F(() => [`${i}-header`, `${i}-header-${o == null ? void 0 : o.expandIconPosition}`, {
      [`${i}-header-disabled`]: e.disabled
    }]), g = F(() => [{
      [`${i}-icon-right`]: (o == null ? void 0 : o.expandIconPosition) === "right"
    }]), y = F(() => [`${i}-content`, {
      [`${i}-content-expend`]: s.value
    }]), m = () => d.value === "right" ? A(Ie("icon-caret-left"), {
      class: `${i}-expand-icon`
    }, null) : A(Ie("icon-caret-right"), {
      class: `${i}-expand-icon`
    }, null), E = () => u.value && A(Ie("icon-hover"), {
      prefix: i,
      class: g.value,
      disabled: e.disabled
    }, {
      default: () => {
        var w, S, _, b;
        return [(b = (_ = (S = t["expand-icon"]) != null ? S : (w = o == null ? void 0 : o.slots) == null ? void 0 : w["expand-icon"]) == null ? void 0 : _({
          active: s.value,
          disabled: e.disabled,
          position: d.value
        })) != null ? b : m()];
      }
    });
    return () => {
      var w, S, _;
      return A("div", {
        class: p.value
      }, [A("div", {
        role: "button",
        "aria-disabled": e.disabled,
        "aria-expanded": s.value,
        tabindex: "0",
        class: v.value,
        onClick: f
      }, [E(), A("div", {
        class: `${i}-header-title`
      }, [(S = (w = t.header) == null ? void 0 : w.call(t)) != null ? S : e.header]), t.extra && A("div", {
        class: `${i}-header-extra`
      }, [(_ = t.extra) == null ? void 0 : _.call(t)])]), A(pu, dn({
        name: "collapse-slider"
      }, h), {
        default: () => {
          var b;
          return [$r(A("div", {
            role: "region",
            class: y.value
          }, [c.value && A("div", {
            ref: "contentBoxRef",
            class: `${i}-content-box`
          }, [(b = t.default) == null ? void 0 : b.call(t)])]), [[kr, s.value]])];
        }
      })]);
    };
  }
});
const Bw = Object.assign(Qh, {
  Item: Ul,
  install: (e, t) => {
    Ln(e, t);
    const n = Rn(t);
    e.component(n + Qh.name, Qh), e.component(n + Ul.name, Ul);
  }
}), qT = [
  "#00B42A",
  "#3C7EFF",
  "#FF7D00",
  "#F76965",
  "#F7BA1E",
  "#F5319D",
  "#D91AD9",
  "#9FDB1D",
  "#FADC19",
  "#722ED1",
  "#3491FA",
  "#7BE188",
  "#93BEFF",
  "#FFCF8B",
  "#FBB0A7",
  "#FCE996",
  "#FB9DC7",
  "#F08EE6",
  "#DCF190",
  "#FDFA94",
  "#C396ED",
  "#9FD4FD"
];
var ZT = Object.defineProperty, JT = Object.defineProperties, QT = Object.getOwnPropertyDescriptors, f_ = Object.getOwnPropertySymbols, eP = Object.prototype.hasOwnProperty, tP = Object.prototype.propertyIsEnumerable, h_ = (e, t, n) => t in e ? ZT(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, nP = (e, t) => {
  for (var n in t || (t = {}))
    eP.call(t, n) && h_(e, n, t[n]);
  if (f_)
    for (var n of f_(t))
      tP.call(t, n) && h_(e, n, t[n]);
  return e;
}, rP = (e, t) => JT(e, QT(t));
const jw = (e, t, n) => {
  const r = Math.floor(e * 6), i = e * 6 - r, o = n * (1 - t), a = n * (1 - i * t), s = n * (1 - (1 - i) * t), l = r % 6, u = [n, a, o, o, s, n][l], c = [s, n, n, a, o, o][l], d = [o, o, s, n, n, a][l];
  return {
    r: Math.round(u * 255),
    g: Math.round(c * 255),
    b: Math.round(d * 255)
  };
}, Cf = (e, t, n) => {
  e /= 255, t /= 255, n /= 255;
  const r = Math.max(e, t, n), i = Math.min(e, t, n);
  let o = 0;
  const a = r, s = r - i, l = r === 0 ? 0 : s / r;
  if (r === i)
    o = 0;
  else {
    switch (r) {
      case e:
        o = (t - n) / s + (t < n ? 6 : 0);
        break;
      case t:
        o = (n - e) / s + 2;
        break;
      case n:
        o = (e - t) / s + 4;
        break;
    }
    o /= 6;
  }
  return { h: o, s: l, v: a };
}, iP = "[-\\+]?\\d+%?", oP = "[-\\+]?\\d*\\.\\d+%?", ya = `(?:${oP})|(?:${iP})`, aP = `[\\s|\\(]+(${ya})[,|\\s]+(${ya})[,|\\s]+(${ya})\\s*\\)?`, sP = `[\\s|\\(]+(${ya})[,|\\s]+(${ya})[,|\\s]+(${ya})[,|\\s]+(${ya})\\s*\\)?`, So = {
  rgb: new RegExp(`rgb${aP}`),
  rgba: new RegExp(`rgba${sP}`),
  hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
  hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
  hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
  hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/
}, _n = (e) => parseInt(e, 16), p_ = (e) => _n(e) / 255, lP = (e) => {
  let t = So.rgb.exec(e);
  return t ? {
    r: parseInt(t[1], 10),
    g: parseInt(t[2], 10),
    b: parseInt(t[3], 10)
  } : (t = So.rgba.exec(e), t ? {
    r: parseInt(t[1], 10),
    g: parseInt(t[2], 10),
    b: parseInt(t[3], 10),
    a: parseFloat(t[4])
  } : (t = So.hex8.exec(e), t ? {
    r: _n(t[1]),
    g: _n(t[2]),
    b: _n(t[3]),
    a: p_(t[4])
  } : (t = So.hex6.exec(e), t ? {
    r: _n(t[1]),
    g: _n(t[2]),
    b: _n(t[3])
  } : (t = So.hex4.exec(e), t ? {
    r: _n(t[1] + t[1]),
    g: _n(t[2] + t[2]),
    b: _n(t[3] + t[3]),
    a: p_(t[4] + t[4])
  } : (t = So.hex3.exec(e), t ? {
    r: _n(t[1] + t[1]),
    g: _n(t[2] + t[2]),
    b: _n(t[3] + t[3])
  } : !1)))));
}, uP = (e) => {
  var t;
  const n = lP(e);
  if (n) {
    const r = Cf(n.r, n.g, n.b);
    return rP(nP({}, r), {
      a: (t = n.a) != null ? t : 1
    });
  }
  return {
    h: 0,
    s: 1,
    v: 1,
    a: 1
  };
}, zw = (e) => {
  if (e = e.trim().toLowerCase(), e.length === 0)
    return !1;
  let t = So.hex6.exec(e);
  return t ? {
    r: _n(t[1]),
    g: _n(t[2]),
    b: _n(t[3])
  } : (t = So.hex3.exec(e), t ? {
    r: _n(t[1] + t[1]),
    g: _n(t[2] + t[2]),
    b: _n(t[3] + t[3])
  } : !1);
}, v_ = (e, t, n) => [
  Math.round(e).toString(16).padStart(2, "0"),
  Math.round(t).toString(16).padStart(2, "0"),
  Math.round(n).toString(16).padStart(2, "0")
].join("").toUpperCase(), cP = (e, t, n, r) => [
  Math.round(e).toString(16).padStart(2, "0"),
  Math.round(t).toString(16).padStart(2, "0"),
  Math.round(n).toString(16).padStart(2, "0"),
  Math.round(r * 255).toString(16).padStart(2, "0")
].join("").toUpperCase(), Fw = ({ value: e, onChange: t }) => {
  const n = le(!1), r = le(), i = le(), o = (c, d) => c < 0 ? 0 : c > d ? 1 : c / d, a = (c) => {
    if (!r.value)
      return;
    const { clientX: d, clientY: f } = c, h = r.value.getBoundingClientRect(), p = [
      o(d - h.x, h.width),
      o(f - h.y, h.height)
    ];
    (p[0] !== e[0] || p[1] !== e[1]) && (t == null || t(p));
  }, s = () => {
    n.value = !1, window.removeEventListener("mousemove", u), window.removeEventListener("mouseup", s), window.removeEventListener("contextmenu", s);
  }, l = (c) => {
    n.value = !0, a(c), window.addEventListener("mousemove", u), window.addEventListener("mouseup", s), window.addEventListener("contextmenu", s);
  };
  function u(c) {
    c.preventDefault(), c.buttons > 0 ? a(c) : s();
  }
  return {
    active: n,
    blockRef: r,
    handlerRef: i,
    onMouseDown: l
  };
};
var g_ = fe({
  name: "ControlBar",
  props: {
    x: {
      type: Number,
      required: !0
    },
    color: {
      type: Object,
      required: !0
    },
    colorString: String,
    type: String,
    onChange: Function
  },
  setup(e) {
    const t = Je("color-picker"), n = F(() => e.color.rgb), {
      blockRef: r,
      handlerRef: i,
      onMouseDown: o
    } = Fw({
      value: [e.x, 0],
      onChange: (s) => {
        var l;
        return (l = e.onChange) == null ? void 0 : l.call(e, s[0]);
      }
    }), a = () => A("div", {
      ref: i,
      class: `${t}-handler`,
      style: {
        left: `${e.x * 100}%`,
        color: e.colorString
      }
    }, null);
    return () => e.type === "alpha" ? A("div", {
      class: `${t}-control-bar-bg`
    }, [A("div", {
      ref: r,
      class: [`${t}-control-bar`, `${t}-control-bar-alpha`],
      style: {
        background: `linear-gradient(to right, rgba(0, 0, 0, 0), rgb(${n.value.r}, ${n.value.g}, ${n.value.b}))`
      },
      onMousedown: o
    }, [a()])]) : A("div", {
      ref: r,
      class: [`${t}-control-bar`, `${t}-control-bar-hue`],
      onMousedown: o
    }, [a()]);
  }
}), dP = fe({
  name: "Palette",
  props: {
    color: {
      type: Object,
      required: !0
    },
    onChange: Function
  },
  setup(e) {
    const t = Je("color-picker"), n = F(() => e.color.hsv), {
      blockRef: r,
      handlerRef: i,
      onMouseDown: o
    } = Fw({
      value: [n.value.s, 1 - n.value.v],
      onChange: (s) => {
        var l;
        return (l = e.onChange) == null ? void 0 : l.call(e, s[0], 1 - s[1]);
      }
    }), a = F(() => {
      const s = jw(n.value.h, 1, 1);
      return `rgb(${s.r}, ${s.g}, ${s.b})`;
    });
    return () => A("div", {
      ref: r,
      class: `${t}-palette`,
      style: {
        backgroundColor: a.value
      },
      onMousedown: o
    }, [A("div", {
      ref: i,
      class: `${t}-handler`,
      style: {
        top: `${(1 - n.value.v) * 100}%`,
        left: `${n.value.s * 100}%`
      }
    }, null)]);
  }
});
function jg(e, t) {
  return t === void 0 && (t = 15), +parseFloat(Number(e).toPrecision(t));
}
function Wi(e) {
  var t = e.toString().split(/[eE]/), n = (t[0].split(".")[1] || "").length - +(t[1] || 0);
  return n > 0 ? n : 0;
}
function mu(e) {
  if (e.toString().indexOf("e") === -1)
    return Number(e.toString().replace(".", ""));
  var t = Wi(e);
  return t > 0 ? jg(Number(e) * Math.pow(10, t)) : Number(e);
}
function ev(e) {
  Vw && (e > Number.MAX_SAFE_INTEGER || e < Number.MIN_SAFE_INTEGER) && console.warn(e + " is beyond boundary when transfer to integer, the results may not be accurate");
}
function Of(e) {
  return function() {
    for (var t = [], n = 0; n < arguments.length; n++)
      t[n] = arguments[n];
    var r = t[0], i = t.slice(1);
    return i.reduce(function(o, a) {
      return e(o, a);
    }, r);
  };
}
var ko = Of(function(e, t) {
  var n = mu(e), r = mu(t), i = Wi(e) + Wi(t), o = n * r;
  return ev(o), o / Math.pow(10, i);
}), fP = Of(function(e, t) {
  var n = Math.pow(10, Math.max(Wi(e), Wi(t)));
  return (ko(e, n) + ko(t, n)) / n;
}), hP = Of(function(e, t) {
  var n = Math.pow(10, Math.max(Wi(e), Wi(t)));
  return (ko(e, n) - ko(t, n)) / n;
}), Hw = Of(function(e, t) {
  var n = mu(e), r = mu(t);
  return ev(n), ev(r), ko(n / r, jg(Math.pow(10, Wi(t) - Wi(e))));
});
function pP(e, t) {
  var n = Math.pow(10, t), r = Hw(Math.round(Math.abs(ko(e, n))), n);
  return e < 0 && r !== 0 && (r = ko(r, -1)), r;
}
var Vw = !0;
function vP(e) {
  e === void 0 && (e = !0), Vw = e;
}
var tv = {
  strip: jg,
  plus: fP,
  minus: hP,
  times: ko,
  divide: Hw,
  round: pP,
  digitLength: Wi,
  float2Fixed: mu,
  enableBoundaryChecking: vP
};
const gP = fe({
  name: "IconPlus",
  props: {
    size: {
      type: [Number, String]
    },
    strokeWidth: {
      type: Number,
      default: 4
    },
    strokeLinecap: {
      type: String,
      default: "butt",
      validator: (e) => ["butt", "round", "square"].includes(e)
    },
    strokeLinejoin: {
      type: String,
      default: "miter",
      validator: (e) => ["arcs", "bevel", "miter", "miter-clip", "round"].includes(e)
    },
    rotate: Number,
    spin: Boolean
  },
  emits: {
    click: (e) => !0
  },
  setup(e, { emit: t }) {
    const n = Je("icon"), r = F(() => [n, `${n}-plus`, { [`${n}-spin`]: e.spin }]), i = F(() => {
      const a = {};
      return e.size && (a.fontSize = At(e.size) ? `${e.size}px` : e.size), e.rotate && (a.transform = `rotate(${e.rotate}deg)`), a;
    });
    return {
      cls: r,
      innerStyle: i,
      onClick: (a) => {
        t("click", a);
      }
    };
  }
}), yP = ["stroke-width", "stroke-linecap", "stroke-linejoin"], mP = /* @__PURE__ */ Y("path", { d: "M5 24h38M24 5v38" }, null, -1), _P = [
  mP
];
function bP(e, t, n, r, i, o) {
  return X(), he("svg", {
    viewBox: "0 0 48 48",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    stroke: "currentColor",
    class: ze(e.cls),
    style: Jt(e.innerStyle),
    "stroke-width": e.strokeWidth,
    "stroke-linecap": e.strokeLinecap,
    "stroke-linejoin": e.strokeLinejoin,
    onClick: t[0] || (t[0] = (...a) => e.onClick && e.onClick(...a))
  }, _P, 14, yP);
}
var np = /* @__PURE__ */ $t(gP, [["render", bP]]);
const wP = Object.assign(np, {
  install: (e, t) => {
    var n;
    const r = (n = t == null ? void 0 : t.iconPrefix) != null ? n : "";
    e.component(r + np.name, np);
  }
}), xP = fe({
  name: "IconMinus",
  props: {
    size: {
      type: [Number, String]
    },
    strokeWidth: {
      type: Number,
      default: 4
    },
    strokeLinecap: {
      type: String,
      default: "butt",
      validator: (e) => ["butt", "round", "square"].includes(e)
    },
    strokeLinejoin: {
      type: String,
      default: "miter",
      validator: (e) => ["arcs", "bevel", "miter", "miter-clip", "round"].includes(e)
    },
    rotate: Number,
    spin: Boolean
  },
  emits: {
    click: (e) => !0
  },
  setup(e, { emit: t }) {
    const n = Je("icon"), r = F(() => [n, `${n}-minus`, { [`${n}-spin`]: e.spin }]), i = F(() => {
      const a = {};
      return e.size && (a.fontSize = At(e.size) ? `${e.size}px` : e.size), e.rotate && (a.transform = `rotate(${e.rotate}deg)`), a;
    });
    return {
      cls: r,
      innerStyle: i,
      onClick: (a) => {
        t("click", a);
      }
    };
  }
}), EP = ["stroke-width", "stroke-linecap", "stroke-linejoin"], SP = /* @__PURE__ */ Y("path", { d: "M5 24h38" }, null, -1), CP = [
  SP
];
function OP(e, t, n, r, i, o) {
  return X(), he("svg", {
    viewBox: "0 0 48 48",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg",
    stroke: "currentColor",
    class: ze(e.cls),
    style: Jt(e.innerStyle),
    "stroke-width": e.strokeWidth,
    "stroke-linecap": e.strokeLinecap,
    "stroke-linejoin": e.strokeLinejoin,
    onClick: t[0] || (t[0] = (...a) => e.onClick && e.onClick(...a))
  }, CP, 14, EP);
}
var rp = /* @__PURE__ */ $t(xP, [["render", OP]]);
const AP = Object.assign(rp, {
  install: (e, t) => {
    var n;
    const r = (n = t == null ? void 0 : t.iconPrefix) != null ? n : "";
    e.component(r + rp.name, rp);
  }
});
var NP = Object.defineProperty, y_ = Object.getOwnPropertySymbols, MP = Object.prototype.hasOwnProperty, TP = Object.prototype.propertyIsEnumerable, m_ = (e, t, n) => t in e ? NP(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, PP = (e, t) => {
  for (var n in t || (t = {}))
    MP.call(t, n) && m_(e, n, t[n]);
  if (y_)
    for (var n of y_(t))
      TP.call(t, n) && m_(e, n, t[n]);
  return e;
};
const DP = 800, RP = 150;
tv.enableBoundaryChecking(!1);
var ip = fe({
  name: "InputNumber",
  props: {
    modelValue: Number,
    defaultValue: Number,
    mode: {
      type: String,
      default: "embed"
    },
    precision: Number,
    step: {
      type: Number,
      default: 1
    },
    disabled: {
      type: Boolean,
      default: !1
    },
    error: {
      type: Boolean,
      default: !1
    },
    max: {
      type: Number,
      default: 1 / 0
    },
    min: {
      type: Number,
      default: -1 / 0
    },
    formatter: {
      type: Function
    },
    parser: {
      type: Function
    },
    placeholder: String,
    hideButton: {
      type: Boolean,
      default: !1
    },
    size: {
      type: String
    },
    allowClear: {
      type: Boolean,
      default: !1
    },
    modelEvent: {
      type: String,
      default: "change"
    },
    readOnly: {
      type: Boolean,
      default: !1
    },
    inputAttrs: {
      type: Object
    }
  },
  emits: {
    "update:modelValue": (e) => !0,
    change: (e, t) => !0,
    focus: (e) => !0,
    blur: (e) => !0,
    clear: (e) => !0,
    input: (e, t, n) => !0,
    keydown: (e) => !0
  },
  setup(e, {
    emit: t,
    slots: n
  }) {
    var r;
    const {
      size: i,
      disabled: o
    } = Qt(e), a = Je("input-number"), s = le(), {
      mergedSize: l,
      mergedDisabled: u,
      eventHandlers: c
    } = Oi({
      size: i,
      disabled: o
    }), {
      mergedSize: d
    } = ho(l), f = F(() => {
      if (At(e.precision)) {
        const G = `${e.step}`.split(".")[1], be = G && G.length || 0;
        return Math.max(be, e.precision);
      }
    }), h = (G) => {
      var be, Oe;
      if (!At(G))
        return "";
      const Ae = f.value ? G.toFixed(f.value) : String(G);
      return (Oe = (be = e.formatter) == null ? void 0 : be.call(e, Ae)) != null ? Oe : Ae;
    }, p = le(h((r = e.modelValue) != null ? r : e.defaultValue)), v = F(() => {
      var G, be;
      if (!p.value)
        return;
      const Oe = Number((be = (G = e.parser) == null ? void 0 : G.call(e, p.value)) != null ? be : p.value);
      return Number.isNaN(Oe) ? void 0 : Oe;
    }), g = le(At(v.value) && v.value <= e.min), y = le(At(v.value) && v.value >= e.max);
    let m = 0;
    const E = () => {
      m && (window.clearTimeout(m), m = 0);
    }, w = (G) => {
      if (!wr(G))
        return At(e.min) && G < e.min && (G = e.min), At(e.max) && G > e.max && (G = e.max), At(f.value) ? tv.round(G, f.value) : G;
    }, S = (G) => {
      let be = !1, Oe = !1;
      At(G) && (G <= e.min && (be = !0), G >= e.max && (Oe = !0)), y.value !== Oe && (y.value = Oe), g.value !== be && (g.value = be);
    }, _ = () => {
      const G = w(v.value), be = h(G);
      (G !== v.value || p.value !== be) && (p.value = be), t("update:modelValue", G);
    };
    wt(() => [e.max, e.min], () => {
      _(), S(v.value);
    });
    const b = (G, be) => {
      if (u.value || G === "plus" && y.value || G === "minus" && g.value)
        return;
      let Oe;
      At(v.value) ? Oe = w(tv[G](v.value, e.step)) : Oe = e.min === -1 / 0 ? 0 : e.min, p.value = h(Oe), S(Oe), t("update:modelValue", Oe), t("change", Oe, be);
    }, T = (G, be, Oe = !1) => {
      var Ae;
      G.preventDefault(), !e.readOnly && ((Ae = s.value) == null || Ae.focus(), b(be, G), Oe && (m = window.setTimeout(() => G.target.dispatchEvent(G), m ? RP : DP)));
    }, R = (G, be) => {
      var Oe, Ae, Re, $;
      G = G.trim().replace(/。/g, "."), G = (Ae = (Oe = e.parser) == null ? void 0 : Oe.call(e, G)) != null ? Ae : G, (At(Number(G)) || /^(\.|-)$/.test(G)) && (p.value = ($ = (Re = e.formatter) == null ? void 0 : Re.call(e, G)) != null ? $ : G, S(v.value), t("input", v.value, p.value, be), e.modelEvent === "input" && (t("update:modelValue", v.value), t("change", v.value, be)));
    }, B = (G) => {
      t("focus", G);
    }, K = (G, be) => {
      be instanceof MouseEvent && !G || (_(), t("change", v.value, be));
    }, ae = (G) => {
      t("blur", G);
    }, x = (G) => {
      var be, Oe;
      p.value = "", t("update:modelValue", void 0), t("change", void 0, G), (Oe = (be = c.value) == null ? void 0 : be.onChange) == null || Oe.call(be, G), t("clear", G);
    }, P = Rw(/* @__PURE__ */ new Map([[ga.ARROW_UP, (G) => {
      G.preventDefault(), !e.readOnly && b("plus", G);
    }], [ga.ARROW_DOWN, (G) => {
      G.preventDefault(), !e.readOnly && b("minus", G);
    }]])), L = (G) => {
      t("keydown", G), G.defaultPrevented || P(G);
    };
    wt(() => e.modelValue, (G) => {
      G !== v.value && (p.value = h(G), S(G));
    });
    const k = () => {
      var G, be, Oe;
      return e.readOnly ? null : A(Un, null, [n.suffix && A("div", {
        class: `${a}-suffix`
      }, [(G = n.suffix) == null ? void 0 : G.call(n)]), A("div", {
        class: `${a}-step`
      }, [A("button", {
        class: [`${a}-step-button`, {
          [`${a}-step-button-disabled`]: u.value || y.value
        }],
        type: "button",
        tabindex: "-1",
        disabled: u.value || y.value,
        onMousedown: (Ae) => T(Ae, "plus", !0),
        onMouseup: E,
        onMouseleave: E
      }, [n.plus ? (be = n.plus) == null ? void 0 : be.call(n) : A($T, null, null)]), A("button", {
        class: [`${a}-step-button`, {
          [`${a}-step-button-disabled`]: u.value || g.value
        }],
        type: "button",
        tabindex: "-1",
        disabled: u.value || g.value,
        onMousedown: (Ae) => T(Ae, "minus", !0),
        onMouseup: E,
        onMouseleave: E
      }, [n.minus ? (Oe = n.minus) == null ? void 0 : Oe.call(n) : A(Lw, null, null)])])]);
    }, J = F(() => [a, `${a}-mode-${e.mode}`, `${a}-size-${d.value}`, {
      [`${a}-readonly`]: e.readOnly
    }]), de = () => A(Ns, {
      size: d.value,
      tabindex: "-1",
      class: `${a}-step-button`,
      disabled: u.value || g.value,
      onMousedown: (G) => T(G, "minus", !0),
      onMouseup: E,
      onMouseleave: E
    }, {
      icon: () => A(AP, null, null)
    }), Ne = () => A(Ns, {
      size: d.value,
      tabindex: "-1",
      class: `${a}-step-button`,
      disabled: u.value || y.value,
      onMousedown: (G) => T(G, "plus", !0),
      onMouseup: E,
      onMouseleave: E
    }, {
      icon: () => A(wP, null, null)
    });
    return {
      inputRef: s,
      render: () => {
        const G = e.mode === "embed" ? {
          prepend: n.prepend,
          prefix: n.prefix,
          suffix: e.hideButton ? n.suffix : k,
          append: n.append
        } : {
          prepend: e.hideButton ? n.prepend : de,
          prefix: n.prefix,
          suffix: n.suffix,
          append: e.hideButton ? n.append : Ne
        };
        return A(Ew, {
          key: `__arco__${e.mode}`,
          ref: s,
          class: J.value,
          type: "text",
          allowClear: e.allowClear,
          size: d.value,
          modelValue: p.value,
          placeholder: e.placeholder,
          disabled: u.value,
          readonly: e.readOnly,
          error: e.error,
          inputAttrs: PP({
            role: "spinbutton",
            "aria-valuemax": e.max,
            "aria-valuemin": e.min,
            "aria-valuenow": p.value
          }, e.inputAttrs),
          onInput: R,
          onFocus: B,
          onBlur: ae,
          onClear: x,
          onChange: K,
          onKeydown: L
        }, G);
      }
    };
  },
  methods: {
    focus() {
      var e;
      (e = this.inputRef) == null || e.focus();
    },
    blur() {
      var e;
      (e = this.inputRef) == null || e.blur();
    }
  },
  render() {
    return this.render();
  }
});
const zg = Object.assign(ip, {
  install: (e, t) => {
    Ln(e, t);
    const n = Rn(t);
    e.component(n + ip.name, ip);
  }
});
var Ww = fe({
  name: "InputAlpha",
  props: {
    value: {
      type: Number,
      required: !0
    },
    disabled: Boolean,
    onChange: Function
  },
  setup(e) {
    const t = Je("color-picker");
    return () => A(zg, {
      class: `${t}-input-alpha`,
      size: "mini",
      min: 0,
      max: 100,
      disabled: e.disabled,
      modelValue: Math.round(e.value * 100),
      onChange: (n = 100) => {
        var r;
        return (r = e.onChange) == null ? void 0 : r.call(e, n / 100);
      }
    }, {
      suffix: () => "%"
    });
  }
}), LP = Object.defineProperty, __ = Object.getOwnPropertySymbols, $P = Object.prototype.hasOwnProperty, kP = Object.prototype.propertyIsEnumerable, b_ = (e, t, n) => t in e ? LP(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, w_ = (e, t) => {
  for (var n in t || (t = {}))
    $P.call(t, n) && b_(e, n, t[n]);
  if (__)
    for (var n of __(t))
      kP.call(t, n) && b_(e, n, t[n]);
  return e;
}, IP = fe({
  name: "InputRgb",
  props: {
    color: {
      type: Object,
      required: !0
    },
    alpha: {
      type: Number,
      required: !0
    },
    disabled: Boolean,
    disabledAlpha: Boolean,
    onHsvChange: Function,
    onAlphaChange: Function
  },
  setup(e) {
    const t = Je("color-picker"), {
      color: n
    } = Qt(e), r = (i) => {
      var o;
      const a = w_(w_({}, n.value.rgb), i), s = Cf(a.r, a.g, a.b);
      (o = e.onHsvChange) == null || o.call(e, s);
    };
    return () => A(bs, {
      class: `${t}-input-group`
    }, {
      default: () => [["r", "g", "b"].map((i) => A(zg, {
        key: i,
        size: "mini",
        min: 0,
        max: 255,
        disabled: e.disabled,
        modelValue: n.value.rgb[i],
        hideButton: !0,
        onChange: (o = 0) => r({
          [i]: o
        })
      }, null)), !e.disabledAlpha && A(Ww, {
        disabled: e.disabled,
        value: e.alpha,
        onChange: e.onAlphaChange
      }, null)]
    });
  }
}), BP = fe({
  name: "InputHex",
  props: {
    color: {
      type: Object,
      required: !0
    },
    alpha: {
      type: Number,
      required: !0
    },
    disabled: Boolean,
    disabledAlpha: Boolean,
    onHsvChange: Function,
    onAlphaChange: Function
  },
  setup(e) {
    const t = Je("color-picker"), {
      color: n
    } = Qt(e), [r, i] = gu(n.value.hex), o = (l) => {
      var u;
      const c = zw(l) || {
        r: 255,
        g: 0,
        b: 0
      }, d = Cf(c.r, c.g, c.b);
      (u = e.onHsvChange) == null || u.call(e, d);
    }, a = (l) => {
      var u, c;
      const d = (c = (u = l.match(/[a-fA-F0-9]*/g)) == null ? void 0 : u.join("")) != null ? c : "";
      d !== n.value.hex && o(d.toUpperCase());
    }, s = (l) => {
      if (!l.clipboardData)
        return;
      let u = l.clipboardData.getData("Text");
      u.startsWith("#") && (u = u.slice(1)), a(u), l.preventDefault();
    };
    return wt(n, () => {
      n.value.hex !== r.value && i(n.value.hex);
    }), () => A(bs, {
      class: `${t}-input-group`
    }, {
      default: () => [A(Ew, {
        class: `${t}-input-hex`,
        size: "mini",
        maxLength: 6,
        disabled: e.disabled,
        modelValue: r.value,
        onInput: i,
        onChange: a,
        onBlur: () => o,
        onPressEnter: () => o,
        onPaste: s
      }, {
        prefix: () => "#"
      }), !e.disabledAlpha && A(Ww, {
        disabled: e.disabled,
        value: e.alpha,
        onChange: e.onAlphaChange
      }, null)]
    });
  }
}), jP = fe({
  name: "Panel",
  props: {
    color: {
      type: Object,
      required: !0
    },
    alpha: {
      type: Number,
      required: !0
    },
    colorString: String,
    disabled: Boolean,
    disabledAlpha: Boolean,
    showHistory: Boolean,
    showPreset: Boolean,
    format: String,
    historyColors: Array,
    presetColors: Array,
    onAlphaChange: Function,
    onHsvChange: Function
  },
  setup(e) {
    const {
      t
    } = Ag(), n = Je("color-picker"), r = F(() => e.color.hsv), [i, o] = gu(e.format || "hex"), a = (f) => {
      o(f);
    };
    le(!1);
    const s = (f) => {
      var h;
      const p = zw(f) || {
        r: 255,
        g: 0,
        b: 0
      }, v = Cf(p.r, p.g, p.b);
      (h = e.onHsvChange) == null || h.call(e, v);
    }, l = () => {
      const f = {
        color: e.color,
        alpha: e.alpha,
        disabled: e.disabled,
        disabledAlpha: e.disabledAlpha,
        onHsvChange: e.onHsvChange,
        onAlphaChange: e.onAlphaChange
      };
      return i.value === "rgb" ? A(IP, f, null) : A(BP, f, null);
    }, u = (f) => A("div", {
      key: f,
      class: `${n}-color-block`,
      style: {
        backgroundColor: f
      },
      onClick: () => s(f)
    }, [A("div", {
      class: `${n}-block`,
      style: {
        backgroundColor: f
      }
    }, null)]), c = (f, h) => A("div", {
      class: `${n}-colors-section`
    }, [A("div", {
      class: `${n}-colors-text`
    }, [f]), A("div", {
      class: `${n}-colors-wrapper`
    }, [h != null && h.length ? A("div", {
      class: `${n}-colors-list`
    }, [h.map(u)]) : A("span", {
      class: `${n}-colors-empty`
    }, [t("colorPicker.empty")])])]), d = () => e.showHistory || e.showPreset ? A("div", {
      class: `${n}-panel-colors`
    }, [e.showHistory && c(t("colorPicker.history"), e.historyColors), e.showPreset && c(t("colorPicker.preset"), e.presetColors)]) : null;
    return () => A("div", {
      class: {
        [`${n}-panel`]: !0,
        [`${n}-panel-disabled`]: e.disabled
      }
    }, [A(dP, {
      color: e.color,
      onChange: (f, h) => {
        var p;
        return (p = e.onHsvChange) == null ? void 0 : p.call(e, {
          h: r.value.h,
          s: f,
          v: h
        });
      }
    }, null), A("div", {
      class: `${n}-panel-control`
    }, [A("div", {
      class: `${n}-control-wrapper`
    }, [A("div", null, [A(g_, {
      type: "hue",
      x: r.value.h,
      color: e.color,
      colorString: e.colorString,
      onChange: (f) => {
        var h;
        return (h = e.onHsvChange) == null ? void 0 : h.call(e, {
          h: f,
          s: r.value.s,
          v: r.value.v
        });
      }
    }, null), !e.disabledAlpha && A(g_, {
      type: "alpha",
      x: e.alpha,
      color: e.color,
      colorString: e.colorString,
      onChange: e.onAlphaChange
    }, null)]), A("div", {
      class: `${n}-preview`,
      style: {
        backgroundColor: e.colorString
      }
    }, null)]), A("div", {
      class: `${n}-input-wrapper`
    }, [A($w, {
      class: `${n}-select`,
      size: "mini",
      "trigger-props": {
        class: `${n}-select-popup`
      },
      options: [{
        value: "hex",
        label: "Hex"
      }, {
        value: "rgb",
        label: "RGB"
      }],
      modelValue: i.value,
      onChange: a
    }, null), A("div", {
      class: `${n}-group-wrapper`
    }, [l()])])]), d()]);
  }
}), op = fe({
  name: "ColorPicker",
  props: {
    modelValue: String,
    defaultValue: {
      type: String
    },
    format: {
      type: String
    },
    size: {
      type: String,
      default: "medium"
    },
    showText: {
      type: Boolean,
      default: !1
    },
    showHistory: {
      type: Boolean,
      default: !1
    },
    showPreset: {
      type: Boolean,
      default: !1
    },
    disabled: {
      type: Boolean,
      default: !1
    },
    disabledAlpha: {
      type: Boolean,
      default: !1
    },
    hideTrigger: {
      type: Boolean
    },
    triggerProps: {
      type: Object
    },
    historyColors: {
      type: Array
    },
    presetColors: {
      type: Array,
      default: () => qT
    }
  },
  emits: {
    "update:modelValue": (e) => !0,
    change: (e) => !0,
    "popup-visible-change": (e, t) => !0
  },
  setup(e, {
    emit: t,
    slots: n
  }) {
    const r = Je("color-picker"), i = F(() => {
      var m;
      return (m = e.modelValue) != null ? m : e.defaultValue;
    }), o = F(() => uP(i.value || "")), [a, s] = gu(o.value.a), [l, u] = gu({
      h: o.value.h,
      s: o.value.s,
      v: o.value.v
    });
    wt(() => o.value, (m) => {
      i.value !== f.value && (s(m.a), u({
        h: m.h,
        s: m.s,
        v: m.v
      }));
    });
    const c = F(() => {
      const m = jw(l.value.h, l.value.s, l.value.v), E = v_(m.r, m.g, m.b);
      return {
        hsv: l.value,
        rgb: m,
        hex: E
      };
    }), d = F(() => {
      const {
        r: m,
        g: E,
        b: w
      } = c.value.rgb;
      return `rgba(${m}, ${E}, ${w}, ${a.value.toFixed(2)})`;
    }), f = F(() => {
      const {
        r: m,
        g: E,
        b: w
      } = c.value.rgb;
      return e.format === "rgb" ? a.value < 1 && !e.disabledAlpha ? `rgba(${m}, ${E}, ${w}, ${a.value.toFixed(2)})` : `rgb(${m}, ${E}, ${w})` : a.value < 1 && !e.disabledAlpha ? `#${cP(m, E, w, a.value)}` : `#${v_(m, E, w)}`;
    });
    wt(f, (m) => {
      t("update:modelValue", m), t("change", m);
    });
    const h = (m) => {
      !e.disabled && u(m);
    }, p = (m) => {
      !e.disabled && s(m);
    }, v = (m) => {
      t("popup-visible-change", m, f.value);
    }, g = () => A("div", {
      class: {
        [r]: !0,
        [`${r}-size-${e.size}`]: e.size,
        [`${r}-disabled`]: e.disabled
      }
    }, [A("div", {
      class: `${r}-preview`,
      style: {
        backgroundColor: f.value
      }
    }, null), e.showText && A("div", {
      class: `${r}-value`
    }, [f.value]), A("input", {
      class: `${r}-input`,
      value: f.value,
      disabled: e.disabled
    }, null)]), y = () => A(jP, {
      color: c.value,
      alpha: a.value,
      colorString: d.value,
      historyColors: e.historyColors,
      presetColors: e.presetColors,
      showHistory: e.showHistory,
      showPreset: e.showPreset,
      disabled: e.disabled,
      disabledAlpha: e.disabledAlpha,
      format: e.format,
      onHsvChange: h,
      onAlphaChange: p
    }, null);
    return () => e.hideTrigger ? y() : A(cd, dn({
      trigger: "click",
      position: "bl",
      animationName: "slide-dynamic-origin",
      popupOffset: 4,
      disabled: e.disabled,
      onPopupVisibleChange: v
    }, e.triggerProps), {
      default: () => [n.default ? n.default() : g()],
      content: y
    });
  }
});
const zP = Object.assign(op, {
  install: (e, t) => {
    Ln(e, t);
    const n = Rn(t);
    e.component(n + op.name, op);
  }
}), FP = fe({
  name: "ConfigProvider",
  props: {
    prefixCls: {
      type: String,
      default: "arco"
    },
    locale: {
      type: Object
    },
    size: {
      type: String
    },
    global: {
      type: Boolean,
      default: !1
    },
    updateAtScroll: {
      type: Boolean,
      default: !1
    },
    scrollToClose: {
      type: Boolean,
      default: !1
    },
    exchangeTime: {
      type: Boolean,
      default: !0
    }
  },
  setup(e, { slots: t }) {
    const {
      prefixCls: n,
      locale: r,
      size: i,
      updateAtScroll: o,
      scrollToClose: a,
      exchangeTime: s
    } = Qt(e), l = Or({
      slots: t,
      prefixCls: n,
      locale: r,
      size: i,
      updateAtScroll: o,
      scrollToClose: a,
      exchangeTime: s
    });
    if (e.global) {
      const u = Iu();
      u && u.appContext.app.provide(fo, l);
    } else
      ja(fo, l);
  }
});
function HP(e, t, n, r, i, o) {
  return mt(e.$slots, "default");
}
var ap = /* @__PURE__ */ $t(FP, [["render", HP]]);
const VP = Object.assign(ap, {
  install: (e, t) => {
    Ln(e, t);
    const n = Rn(t);
    e.component(n + ap.name, ap);
  }
}), WP = (e) => {
  const t = le(!1), n = {
    overflow: "",
    width: "",
    boxSizing: ""
  };
  return {
    setOverflowHidden: () => {
      if (e.value) {
        const o = e.value;
        if (!t.value && o.style.overflow !== "hidden") {
          const a = eA(o);
          (a > 0 || QO(o)) && (n.overflow = o.style.overflow, n.width = o.style.width, n.boxSizing = o.style.boxSizing, o.style.overflow = "hidden", o.style.width = `${o.offsetWidth - a}px`, o.style.boxSizing = "border-box", t.value = !0);
        }
      }
    },
    resetOverflow: () => {
      if (e.value && t.value) {
        const o = e.value;
        o.style.overflow = n.overflow, o.style.width = n.width, o.style.boxSizing = n.boxSizing, t.value = !1;
      }
    }
  };
}, GP = ({
  modalRef: e,
  wrapperRef: t,
  draggable: n,
  alignCenter: r
}) => {
  const i = le(!1), o = le([0, 0]), a = le([0, 0]), s = le(), l = le([0, 0]), u = le([0, 0]), c = () => {
    var p, v, g;
    if (t.value && e.value) {
      const { top: y, left: m } = t.value.getBoundingClientRect(), { clientWidth: E, clientHeight: w } = t.value, { top: S, left: _, width: b, height: T } = e.value.getBoundingClientRect(), R = r.value ? 0 : (p = e.value) == null ? void 0 : p.offsetTop, B = _ - m, K = S - y - R;
      (B !== ((v = a.value) == null ? void 0 : v[0]) || K !== ((g = a.value) == null ? void 0 : g[1])) && (a.value = [B, K]);
      const ae = E > b ? E - b : 0, x = w > T ? w - T - R : 0;
      (ae !== u.value[0] || x !== u.value[1]) && (u.value = [ae, x]), R && (l.value = [0, 0 - R]);
    }
  }, d = (p) => {
    n.value && (p.preventDefault(), i.value = !0, c(), o.value = [p.x, p.y], ji(window, "mousemove", f), ji(window, "mouseup", h), ji(window, "contextmenu", h));
  }, f = (p) => {
    if (i.value) {
      const v = p.x - o.value[0], g = p.y - o.value[1];
      let y = a.value[0] + v, m = a.value[1] + g;
      y < l.value[0] && (y = l.value[0]), y > u.value[0] && (y = u.value[0]), m < l.value[1] && (m = l.value[1]), m > u.value[1] && (m = u.value[1]), s.value = [y, m];
    }
  }, h = () => {
    i.value = !1, Ca(window, "mousemove", f), Ca(window, "mouseup", h);
  };
  return {
    position: s,
    handleMoveDown: d
  };
};
var XP = Object.defineProperty, x_ = Object.getOwnPropertySymbols, UP = Object.prototype.hasOwnProperty, YP = Object.prototype.propertyIsEnumerable, E_ = (e, t, n) => t in e ? XP(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, KP = (e, t) => {
  for (var n in t || (t = {}))
    UP.call(t, n) && E_(e, n, t[n]);
  if (x_)
    for (var n of x_(t))
      YP.call(t, n) && E_(e, n, t[n]);
  return e;
}, qP = fe({
  name: "Modal",
  components: {
    ClientOnly: Ow,
    ArcoButton: Ns,
    IconHover: Si,
    IconClose: Bu,
    IconInfoCircleFill: hA,
    IconCheckCircleFill: _w,
    IconExclamationCircleFill: bw,
    IconCloseCircleFill: ww
  },
  inheritAttrs: !1,
  props: {
    visible: {
      type: Boolean,
      default: void 0
    },
    defaultVisible: {
      type: Boolean,
      default: !1
    },
    width: {
      type: [Number, String]
    },
    top: {
      type: [Number, String]
    },
    mask: {
      type: Boolean,
      default: !0
    },
    title: {
      type: String
    },
    titleAlign: {
      type: String,
      default: "center"
    },
    alignCenter: {
      type: Boolean,
      default: !0
    },
    unmountOnClose: Boolean,
    maskClosable: {
      type: Boolean,
      default: !0
    },
    hideCancel: {
      type: Boolean,
      default: !1
    },
    simple: {
      type: Boolean,
      default: (e) => e.notice
    },
    closable: {
      type: Boolean,
      default: !0
    },
    okText: String,
    cancelText: String,
    okLoading: {
      type: Boolean,
      default: !1
    },
    okButtonProps: {
      type: Object
    },
    cancelButtonProps: {
      type: Object
    },
    footer: {
      type: Boolean,
      default: !0
    },
    renderToBody: {
      type: Boolean,
      default: !0
    },
    popupContainer: {
      type: [String, Object],
      default: "body"
    },
    maskStyle: {
      type: Object
    },
    modalClass: {
      type: [String, Array]
    },
    modalStyle: {
      type: Object
    },
    onBeforeOk: {
      type: Function
    },
    onBeforeCancel: {
      type: Function
    },
    escToClose: {
      type: Boolean,
      default: !0
    },
    draggable: {
      type: Boolean,
      default: !1
    },
    fullscreen: {
      type: Boolean,
      default: !1
    },
    maskAnimationName: {
      type: String,
      default: (e) => e.fullscreen ? "fade-in-standard" : "fade-modal"
    },
    modalAnimationName: {
      type: String,
      default: (e) => e.fullscreen ? "zoom-in" : "zoom-modal"
    },
    bodyClass: {
      type: [String, Array]
    },
    bodyStyle: {
      type: [String, Object, Array]
    },
    messageType: {
      type: String
    },
    hideTitle: {
      type: Boolean,
      default: !1
    }
  },
  emits: {
    "update:visible": (e) => !0,
    ok: (e) => !0,
    cancel: (e) => !0,
    open: () => !0,
    close: () => !0,
    beforeOpen: () => !0,
    beforeClose: () => !0
  },
  setup(e, {
    emit: t
  }) {
    const {
      fullscreen: n,
      popupContainer: r,
      alignCenter: i
    } = Qt(e), o = Je("modal"), {
      t: a
    } = Ag(), s = le(), l = le(), u = le(e.defaultVisible), c = F(() => {
      var Re;
      return (Re = e.visible) != null ? Re : u.value;
    }), d = le(!1), f = F(() => e.okLoading || d.value), h = F(() => e.draggable && !e.fullscreen), {
      teleportContainer: p,
      containerRef: v
    } = Aw({
      popupContainer: r,
      visible: c
    }), g = le(c.value), y = F(() => e.okText || a("modal.okText")), m = F(() => e.cancelText || a("modal.cancelText")), {
      zIndex: E,
      isLastDialog: w
    } = Cw("dialog", {
      visible: c
    });
    let S = !1;
    const _ = (Re) => {
      e.escToClose && Re.key === ga.ESC && w() && P(Re);
    }, b = () => {
      e.escToClose && !S && (S = !0, ji(document.documentElement, "keydown", _));
    }, T = () => {
      S = !1, Ca(document.documentElement, "keydown", _);
    };
    let R = 0;
    const {
      position: B,
      handleMoveDown: K
    } = GP({
      wrapperRef: s,
      modalRef: l,
      draggable: h,
      alignCenter: i
    }), ae = () => {
      R++, d.value && (d.value = !1), u.value = !1, t("update:visible", !1);
    }, x = async (Re) => {
      const $ = R, re = await new Promise(async (ee) => {
        var _e;
        if (Nn(e.onBeforeOk)) {
          let xe = e.onBeforeOk((ye = !0) => ee(ye));
          if ((Cm(xe) || !vu(xe)) && (d.value = !0), Cm(xe))
            try {
              xe = (_e = await xe) != null ? _e : !0;
            } catch {
              xe = !1;
            }
          vu(xe) && ee(xe);
        } else
          ee(!0);
      });
      $ === R && (re ? (t("ok", Re), ae()) : d.value && (d.value = !1));
    }, P = (Re) => {
      var $;
      let re = !0;
      Nn(e.onBeforeCancel) && (re = ($ = e.onBeforeCancel()) != null ? $ : !1), re && (t("cancel", Re), ae());
    }, L = le(!1), k = (Re) => {
      Re.target === s.value && (L.value = !0);
    }, J = (Re) => {
      e.mask && e.maskClosable && L.value && P(Re);
    }, de = () => {
      c.value && (!KO(s.value, document.activeElement) && document.activeElement instanceof HTMLElement && document.activeElement.blur(), t("open"));
    }, Ne = () => {
      c.value || (h.value && (B.value = void 0), g.value = !1, G(), t("close"));
    }, {
      setOverflowHidden: se,
      resetOverflow: G
    } = WP(v);
    fr(() => {
      v.value = qp(e.popupContainer), c.value && (se(), e.escToClose && b());
    }), Ys(() => {
      G(), T();
    }), wt(c, (Re) => {
      u.value !== Re && (u.value = Re), Re ? (t("beforeOpen"), g.value = !0, L.value = !1, se(), b()) : (t("beforeClose"), T());
    }), wt(n, () => {
      B.value && (B.value = void 0);
    });
    const be = F(() => [`${o}-wrapper`, {
      [`${o}-wrapper-align-center`]: e.alignCenter && !e.fullscreen,
      [`${o}-wrapper-moved`]: !!B.value
    }]), Oe = F(() => [`${o}`, e.modalClass, {
      [`${o}-simple`]: e.simple,
      [`${o}-draggable`]: h.value,
      [`${o}-fullscreen`]: e.fullscreen
    }]), Ae = F(() => {
      var Re;
      const $ = KP({}, (Re = e.modalStyle) != null ? Re : {});
      return e.width && !e.fullscreen && ($.width = At(e.width) ? `${e.width}px` : e.width), !e.alignCenter && e.top && ($.top = At(e.top) ? `${e.top}px` : e.top), B.value && ($.transform = `translate(${B.value[0]}px, ${B.value[1]}px)`), $;
    });
    return {
      prefixCls: o,
      mounted: g,
      computedVisible: c,
      containerRef: v,
      wrapperRef: s,
      mergedModalStyle: Ae,
      okDisplayText: y,
      cancelDisplayText: m,
      zIndex: E,
      handleOk: x,
      handleCancel: P,
      handleMaskClick: J,
      handleMaskMouseDown: k,
      handleOpen: de,
      handleClose: Ne,
      mergedOkLoading: f,
      modalRef: l,
      wrapperCls: be,
      modalCls: Oe,
      teleportContainer: p,
      handleMoveDown: K
    };
  }
});
function ZP(e, t, n, r, i, o) {
  const a = Ie("icon-info-circle-fill"), s = Ie("icon-check-circle-fill"), l = Ie("icon-exclamation-circle-fill"), u = Ie("icon-close-circle-fill"), c = Ie("icon-close"), d = Ie("icon-hover"), f = Ie("arco-button"), h = Ie("client-only");
  return X(), ot(h, null, {
    default: Z(() => [
      (X(), ot(tw, {
        to: e.teleportContainer,
        disabled: !e.renderToBody
      }, [
        !e.unmountOnClose || e.computedVisible || e.mounted ? $r((X(), he("div", dn({
          key: 0,
          class: `${e.prefixCls}-container`,
          style: { zIndex: e.zIndex }
        }, e.$attrs), [
          A(pu, {
            name: e.maskAnimationName,
            appear: ""
          }, {
            default: Z(() => [
              e.mask ? $r((X(), he("div", {
                key: 0,
                ref: "maskRef",
                class: ze(`${e.prefixCls}-mask`),
                style: Jt(e.maskStyle)
              }, null, 6)), [
                [kr, e.computedVisible]
              ]) : vt("v-if", !0)
            ]),
            _: 1
          }, 8, ["name"]),
          Y("div", {
            ref: "wrapperRef",
            class: ze(e.wrapperCls),
            onClick: t[2] || (t[2] = Cs((...p) => e.handleMaskClick && e.handleMaskClick(...p), ["self"])),
            onMousedown: t[3] || (t[3] = Cs((...p) => e.handleMaskMouseDown && e.handleMaskMouseDown(...p), ["self"]))
          }, [
            A(pu, {
              name: e.modalAnimationName,
              appear: "",
              onAfterEnter: e.handleOpen,
              onAfterLeave: e.handleClose
            }, {
              default: Z(() => [
                $r(Y("div", {
                  ref: "modalRef",
                  class: ze(e.modalCls),
                  style: Jt(e.mergedModalStyle)
                }, [
                  !e.hideTitle && (e.$slots.title || e.title || e.closable) ? (X(), he("div", {
                    key: 0,
                    class: ze(`${e.prefixCls}-header`),
                    onMousedown: t[1] || (t[1] = (...p) => e.handleMoveDown && e.handleMoveDown(...p))
                  }, [
                    e.$slots.title || e.title ? (X(), he("div", {
                      key: 0,
                      class: ze([
                        `${e.prefixCls}-title`,
                        `${e.prefixCls}-title-align-${e.titleAlign}`
                      ])
                    }, [
                      e.messageType ? (X(), he("div", {
                        key: 0,
                        class: ze(`${e.prefixCls}-title-icon`)
                      }, [
                        e.messageType === "info" ? (X(), ot(a, { key: 0 })) : vt("v-if", !0),
                        e.messageType === "success" ? (X(), ot(s, { key: 1 })) : vt("v-if", !0),
                        e.messageType === "warning" ? (X(), ot(l, { key: 2 })) : vt("v-if", !0),
                        e.messageType === "error" ? (X(), ot(u, { key: 3 })) : vt("v-if", !0)
                      ], 2)) : vt("v-if", !0),
                      mt(e.$slots, "title", {}, () => [
                        Lt(Mt(e.title), 1)
                      ])
                    ], 2)) : vt("v-if", !0),
                    !e.simple && e.closable ? (X(), he("div", {
                      key: 1,
                      tabindex: "-1",
                      role: "button",
                      "aria-label": "Close",
                      class: ze(`${e.prefixCls}-close-btn`),
                      onClick: t[0] || (t[0] = (...p) => e.handleCancel && e.handleCancel(...p))
                    }, [
                      A(d, null, {
                        default: Z(() => [
                          A(c)
                        ]),
                        _: 1
                      })
                    ], 2)) : vt("v-if", !0)
                  ], 34)) : vt("v-if", !0),
                  Y("div", {
                    class: ze([`${e.prefixCls}-body`, e.bodyClass]),
                    style: Jt(e.bodyStyle)
                  }, [
                    mt(e.$slots, "default")
                  ], 6),
                  e.footer ? (X(), he("div", {
                    key: 1,
                    class: ze(`${e.prefixCls}-footer`)
                  }, [
                    mt(e.$slots, "footer", {}, () => [
                      e.hideCancel ? vt("v-if", !0) : (X(), ot(f, dn({ key: 0 }, e.cancelButtonProps, { onClick: e.handleCancel }), {
                        default: Z(() => [
                          Lt(Mt(e.cancelDisplayText), 1)
                        ]),
                        _: 1
                      }, 16, ["onClick"])),
                      A(f, dn({ type: "primary" }, e.okButtonProps, {
                        loading: e.mergedOkLoading,
                        onClick: e.handleOk
                      }), {
                        default: Z(() => [
                          Lt(Mt(e.okDisplayText), 1)
                        ]),
                        _: 1
                      }, 16, ["loading", "onClick"])
                    ])
                  ], 2)) : vt("v-if", !0)
                ], 6), [
                  [kr, e.computedVisible]
                ])
              ]),
              _: 3
            }, 8, ["name", "onAfterEnter", "onAfterLeave"])
          ], 34)
        ], 16)), [
          [kr, e.computedVisible || e.mounted]
        ]) : vt("v-if", !0)
      ], 8, ["to", "disabled"]))
    ]),
    _: 3
  });
}
var Uc = /* @__PURE__ */ $t(qP, [["render", ZP]]), JP = Object.defineProperty, QP = Object.defineProperties, eD = Object.getOwnPropertyDescriptors, S_ = Object.getOwnPropertySymbols, tD = Object.prototype.hasOwnProperty, nD = Object.prototype.propertyIsEnumerable, C_ = (e, t, n) => t in e ? JP(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, ba = (e, t) => {
  for (var n in t || (t = {}))
    tD.call(t, n) && C_(e, n, t[n]);
  if (S_)
    for (var n of S_(t))
      nD.call(t, n) && C_(e, n, t[n]);
  return e;
}, rD = (e, t) => QP(e, eD(t));
const sp = (e, t) => {
  let n = qO("modal");
  const r = () => {
    u.component && (u.component.props.visible = !1), Nn(e.onOk) && e.onOk();
  }, i = () => {
    u.component && (u.component.props.visible = !1), Nn(e.onCancel) && e.onCancel();
  }, o = async () => {
    await Hn(), n && (Em(null, n), document.body.removeChild(n)), n = null, Nn(e.onClose) && e.onClose();
  }, a = () => {
    u.component && (u.component.props.visible = !1);
  }, s = (c) => {
    u.component && Object.entries(c).forEach(([d, f]) => {
      u.component.props[d] = f;
    });
  }, u = A(Uc, ba(ba(ba({}, {
    visible: !0,
    renderToBody: !1,
    unmountOnClose: !0,
    onOk: r,
    onCancel: i,
    onClose: o
  }), ju(e, ["content", "title", "footer", "visible", "unmountOnClose", "onOk", "onCancel", "onClose"])), {
    footer: typeof e.footer == "boolean" ? e.footer : void 0
  }), {
    default: Ch(e.content),
    title: Ch(e.title),
    footer: typeof e.footer != "boolean" ? Ch(e.footer) : void 0
  });
  return (t ?? nv._context) && (u.appContext = t ?? nv._context), Em(u, n), document.body.appendChild(n), {
    close: a,
    update: s
  };
}, lp = ba({
  open: sp,
  confirm: (e, t) => {
    const n = ba({
      simple: !0,
      messageType: "warning"
    }, e);
    return sp(n, t);
  }
}, MA.reduce((e, t) => (e[t] = (n, r) => {
  const i = ba({
    simple: !0,
    hideCancel: !0,
    messageType: t
  }, n);
  return sp(i, r);
}, e), {})), nv = Object.assign(Uc, rD(ba({}, lp), {
  install: (e, t) => {
    Ln(e, t);
    const n = Rn(t);
    e.component(n + Uc.name, Uc);
    const r = {};
    for (const i of Object.keys(lp))
      r[i] = (o, a = e._context) => lp[i](o, a);
    e.config.globalProperties.$modal = r;
  },
  _context: null
}));
/**
 * @license lucide-vue-next v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const iD = (e) => e.replace(/([a-z0-9])([A-Z])/g, "$1-$2").toLowerCase();
/**
 * @license lucide-vue-next v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var dc = {
  xmlns: "http://www.w3.org/2000/svg",
  width: 24,
  height: 24,
  viewBox: "0 0 24 24",
  fill: "none",
  stroke: "currentColor",
  "stroke-width": 2,
  "stroke-linecap": "round",
  "stroke-linejoin": "round"
};
/**
 * @license lucide-vue-next v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const oD = ({ size: e, strokeWidth: t = 2, absoluteStrokeWidth: n, color: r, iconNode: i, name: o, class: a, ...s }, { slots: l }) => Xp(
  "svg",
  {
    ...dc,
    width: e || dc.width,
    height: e || dc.height,
    stroke: r || dc.stroke,
    "stroke-width": n ? Number(t) * 24 / Number(e) : t,
    class: ["lucide", `lucide-${iD(o ?? "icon")}`],
    ...s
  },
  [...i.map((u) => Xp(...u)), ...l.default ? [l.default()] : []]
);
/**
 * @license lucide-vue-next v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Jn = (e, t) => (n, { slots: r }) => Xp(
  oD,
  {
    ...n,
    iconNode: t,
    name: e
  },
  r
);
/**
 * @license lucide-vue-next v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const aD = Jn("BoxIcon", [
  [
    "path",
    {
      d: "M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",
      key: "hh9hay"
    }
  ],
  ["path", { d: "m3.3 7 8.7 5 8.7-5", key: "g66t2b" }],
  ["path", { d: "M12 22V12", key: "d0xqtd" }]
]);
/**
 * @license lucide-vue-next v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const sD = Jn("CircleHelpIcon", [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3", key: "1u773s" }],
  ["path", { d: "M12 17h.01", key: "p32p05" }]
]);
/**
 * @license lucide-vue-next v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const lD = Jn("DownloadIcon", [
  ["path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4", key: "ih7n3h" }],
  ["polyline", { points: "7 10 12 15 17 10", key: "2ggqvy" }],
  ["line", { x1: "12", x2: "12", y1: "15", y2: "3", key: "1vk2je" }]
]);
/**
 * @license lucide-vue-next v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const uD = Jn("EraserIcon", [
  [
    "path",
    {
      d: "m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",
      key: "182aya"
    }
  ],
  ["path", { d: "M22 21H7", key: "t4ddhn" }],
  ["path", { d: "m5 11 9 9", key: "1mo9qw" }]
]);
/**
 * @license lucide-vue-next v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const cD = Jn("EyeIcon", [
  [
    "path",
    {
      d: "M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",
      key: "1nclc0"
    }
  ],
  ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]
]);
/**
 * @license lucide-vue-next v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const dD = Jn("FolderIcon", [
  [
    "path",
    {
      d: "M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",
      key: "1kt360"
    }
  ]
]);
/**
 * @license lucide-vue-next v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const fD = Jn("FullscreenIcon", [
  ["path", { d: "M3 7V5a2 2 0 0 1 2-2h2", key: "aa7l1z" }],
  ["path", { d: "M17 3h2a2 2 0 0 1 2 2v2", key: "4qcy5o" }],
  ["path", { d: "M21 17v2a2 2 0 0 1-2 2h-2", key: "6vwrx8" }],
  ["path", { d: "M7 21H5a2 2 0 0 1-2-2v-2", key: "ioqczr" }],
  ["rect", { width: "10", height: "8", x: "7", y: "8", rx: "1", key: "vys8me" }]
]);
/**
 * @license lucide-vue-next v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const hD = Jn("LayoutListIcon", [
  ["rect", { width: "7", height: "7", x: "3", y: "3", rx: "1", key: "1g98yp" }],
  ["rect", { width: "7", height: "7", x: "3", y: "14", rx: "1", key: "1bb6yr" }],
  ["path", { d: "M14 4h7", key: "3xa0d5" }],
  ["path", { d: "M14 9h7", key: "1icrd9" }],
  ["path", { d: "M14 15h7", key: "1mj8o2" }],
  ["path", { d: "M14 20h7", key: "11slyb" }]
]);
/**
 * @license lucide-vue-next v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const pD = Jn("MapIcon", [
  [
    "path",
    {
      d: "M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",
      key: "169xi5"
    }
  ],
  ["path", { d: "M15 5.764v15", key: "1pn4in" }],
  ["path", { d: "M9 3.236v15", key: "1uimfh" }]
]);
/**
 * @license lucide-vue-next v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const vD = Jn("Redo2Icon", [
  ["path", { d: "m15 14 5-5-5-5", key: "12vg1m" }],
  ["path", { d: "M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13", key: "6uklza" }]
]);
/**
 * @license lucide-vue-next v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const gD = Jn("SaveIcon", [
  [
    "path",
    {
      d: "M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",
      key: "1c8476"
    }
  ],
  ["path", { d: "M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7", key: "1ydtos" }],
  ["path", { d: "M7 3v4a1 1 0 0 0 1 1h7", key: "t51u73" }]
]);
/**
 * @license lucide-vue-next v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const yD = Jn("SquareMousePointerIcon", [
  ["path", { d: "M21 11V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h6", key: "14rsvq" }],
  ["path", { d: "m12 12 4 10 1.7-4.3L22 16Z", key: "64ilsv" }]
]);
/**
 * @license lucide-vue-next v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const mD = Jn("Undo2Icon", [
  ["path", { d: "M9 14 4 9l5-5", key: "102s5s" }],
  ["path", { d: "M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11", key: "f3b9sd" }]
]);
/**
 * @license lucide-vue-next v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const _D = Jn("ZoomInIcon", [
  ["circle", { cx: "11", cy: "11", r: "8", key: "4ej97u" }],
  ["line", { x1: "21", x2: "16.65", y1: "21", y2: "16.65", key: "13gj7c" }],
  ["line", { x1: "11", x2: "11", y1: "8", y2: "14", key: "1vmskp" }],
  ["line", { x1: "8", x2: "14", y1: "11", y2: "11", key: "durymu" }]
]);
/**
 * @license lucide-vue-next v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const bD = Jn("ZoomOutIcon", [
  ["circle", { cx: "11", cy: "11", r: "8", key: "4ej97u" }],
  ["line", { x1: "21", x2: "16.65", y1: "21", y2: "16.65", key: "13gj7c" }],
  ["line", { x1: "8", x2: "14", y1: "11", y2: "11", key: "durymu" }]
]);
var O_ = {
  width: 40,
  height: 40
}, A_ = {
  width: 40,
  height: 40
}, N_ = {
  width: 40,
  height: 40
}, M_ = {
  width: 100,
  height: 80
}, T_ = {
  width: 100,
  height: 80
}, Af, _t, Gw, da, P_, Xw, rv, Fg, iv, ov, _u = {}, Uw = [], wD = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i, Nf = Array.isArray;
function Mo(e, t) {
  for (var n in t) e[n] = t[n];
  return e;
}
function Yw(e) {
  e && e.parentNode && e.parentNode.removeChild(e);
}
function q(e, t, n) {
  var r, i, o, a = {};
  for (o in t) o == "key" ? r = t[o] : o == "ref" ? i = t[o] : a[o] = t[o];
  if (arguments.length > 2 && (a.children = arguments.length > 3 ? Af.call(arguments, 2) : n), typeof e == "function" && e.defaultProps != null) for (o in e.defaultProps) a[o] === void 0 && (a[o] = e.defaultProps[o]);
  return Yc(e, a, r, i, null);
}
function Yc(e, t, n, r, i) {
  var o = { type: e, props: t, key: n, ref: r, __k: null, __: null, __b: 0, __e: null, __d: void 0, __c: null, constructor: void 0, __v: i ?? ++Gw, __i: -1, __u: 0 };
  return i == null && _t.vnode != null && _t.vnode(o), o;
}
function Mf() {
  return { current: null };
}
function Oa(e) {
  return e.children;
}
function Et(e, t) {
  this.props = e, this.context = t;
}
function Ms(e, t) {
  if (t == null) return e.__ ? Ms(e.__, e.__i + 1) : null;
  for (var n; t < e.__k.length; t++) if ((n = e.__k[t]) != null && n.__e != null) return n.__e;
  return typeof e.type == "function" ? Ms(e) : null;
}
function Kw(e) {
  var t, n;
  if ((e = e.__) != null && e.__c != null) {
    for (e.__e = e.__c.base = null, t = 0; t < e.__k.length; t++) if ((n = e.__k[t]) != null && n.__e != null) {
      e.__e = e.__c.base = n.__e;
      break;
    }
    return Kw(e);
  }
}
function D_(e) {
  (!e.__d && (e.__d = !0) && da.push(e) && !dd.__r++ || P_ !== _t.debounceRendering) && ((P_ = _t.debounceRendering) || Xw)(dd);
}
function dd() {
  var e, t, n, r, i, o, a, s;
  for (da.sort(rv); e = da.shift(); ) e.__d && (t = da.length, r = void 0, o = (i = (n = e).__v).__e, a = [], s = [], n.__P && ((r = Mo({}, i)).__v = i.__v + 1, _t.vnode && _t.vnode(r), Hg(n.__P, r, i, n.__n, n.__P.namespaceURI, 32 & i.__u ? [o] : null, a, o ?? Ms(i), !!(32 & i.__u), s), r.__v = i.__v, r.__.__k[r.__i] = r, Jw(a, r, s), r.__e != o && Kw(r)), da.length > t && da.sort(rv));
  dd.__r = 0;
}
function qw(e, t, n, r, i, o, a, s, l, u, c) {
  var d, f, h, p, v, g = r && r.__k || Uw, y = t.length;
  for (n.__d = l, xD(n, t, g), l = n.__d, d = 0; d < y; d++) (h = n.__k[d]) != null && (f = h.__i === -1 ? _u : g[h.__i] || _u, h.__i = d, Hg(e, h, f, i, o, a, s, l, u, c), p = h.__e, h.ref && f.ref != h.ref && (f.ref && Vg(f.ref, null, h), c.push(h.ref, h.__c || p, h)), v == null && p != null && (v = p), 65536 & h.__u || f.__k === h.__k ? l = Zw(h, l, e) : typeof h.type == "function" && h.__d !== void 0 ? l = h.__d : p && (l = p.nextSibling), h.__d = void 0, h.__u &= -196609);
  n.__d = l, n.__e = v;
}
function xD(e, t, n) {
  var r, i, o, a, s, l = t.length, u = n.length, c = u, d = 0;
  for (e.__k = [], r = 0; r < l; r++) (i = t[r]) != null && typeof i != "boolean" && typeof i != "function" ? (a = r + d, (i = e.__k[r] = typeof i == "string" || typeof i == "number" || typeof i == "bigint" || i.constructor == String ? Yc(null, i, null, null, null) : Nf(i) ? Yc(Oa, { children: i }, null, null, null) : i.constructor === void 0 && i.__b > 0 ? Yc(i.type, i.props, i.key, i.ref ? i.ref : null, i.__v) : i).__ = e, i.__b = e.__b + 1, o = null, (s = i.__i = ED(i, n, a, c)) !== -1 && (c--, (o = n[s]) && (o.__u |= 131072)), o == null || o.__v === null ? (s == -1 && d--, typeof i.type != "function" && (i.__u |= 65536)) : s !== a && (s == a - 1 ? d-- : s == a + 1 ? d++ : (s > a ? d-- : d++, i.__u |= 65536))) : i = e.__k[r] = null;
  if (c) for (r = 0; r < u; r++) (o = n[r]) != null && !(131072 & o.__u) && (o.__e == e.__d && (e.__d = Ms(o)), Qw(o, o));
}
function Zw(e, t, n) {
  var r, i;
  if (typeof e.type == "function") {
    for (r = e.__k, i = 0; r && i < r.length; i++) r[i] && (r[i].__ = e, t = Zw(r[i], t, n));
    return t;
  }
  e.__e != t && (t && e.type && !n.contains(t) && (t = Ms(e)), n.insertBefore(e.__e, t || null), t = e.__e);
  do
    t = t && t.nextSibling;
  while (t != null && t.nodeType === 8);
  return t;
}
function fd(e, t) {
  return t = t || [], e == null || typeof e == "boolean" || (Nf(e) ? e.some(function(n) {
    fd(n, t);
  }) : t.push(e)), t;
}
function ED(e, t, n, r) {
  var i = e.key, o = e.type, a = n - 1, s = n + 1, l = t[n];
  if (l === null || l && i == l.key && o === l.type && !(131072 & l.__u)) return n;
  if ((typeof o != "function" || o === Oa || i) && r > (l != null && !(131072 & l.__u) ? 1 : 0)) for (; a >= 0 || s < t.length; ) {
    if (a >= 0) {
      if ((l = t[a]) && !(131072 & l.__u) && i == l.key && o === l.type) return a;
      a--;
    }
    if (s < t.length) {
      if ((l = t[s]) && !(131072 & l.__u) && i == l.key && o === l.type) return s;
      s++;
    }
  }
  return -1;
}
function R_(e, t, n) {
  t[0] === "-" ? e.setProperty(t, n ?? "") : e[t] = n == null ? "" : typeof n != "number" || wD.test(t) ? n : n + "px";
}
function fc(e, t, n, r, i) {
  var o;
  e: if (t === "style") if (typeof n == "string") e.style.cssText = n;
  else {
    if (typeof r == "string" && (e.style.cssText = r = ""), r) for (t in r) n && t in n || R_(e.style, t, "");
    if (n) for (t in n) r && n[t] === r[t] || R_(e.style, t, n[t]);
  }
  else if (t[0] === "o" && t[1] === "n") o = t !== (t = t.replace(/(PointerCapture)$|Capture$/i, "$1")), t = t.toLowerCase() in e || t === "onFocusOut" || t === "onFocusIn" ? t.toLowerCase().slice(2) : t.slice(2), e.l || (e.l = {}), e.l[t + o] = n, n ? r ? n.u = r.u : (n.u = Fg, e.addEventListener(t, o ? ov : iv, o)) : e.removeEventListener(t, o ? ov : iv, o);
  else {
    if (i == "http://www.w3.org/2000/svg") t = t.replace(/xlink(H|:h)/, "h").replace(/sName$/, "s");
    else if (t != "width" && t != "height" && t != "href" && t != "list" && t != "form" && t != "tabIndex" && t != "download" && t != "rowSpan" && t != "colSpan" && t != "role" && t != "popover" && t in e) try {
      e[t] = n ?? "";
      break e;
    } catch {
    }
    typeof n == "function" || (n == null || n === !1 && t[4] !== "-" ? e.removeAttribute(t) : e.setAttribute(t, t == "popover" && n == 1 ? "" : n));
  }
}
function L_(e) {
  return function(t) {
    if (this.l) {
      var n = this.l[t.type + e];
      if (t.t == null) t.t = Fg++;
      else if (t.t < n.u) return;
      return _t.event && (t = _t.event(t)), "handleEvent" in n ? n.handleEvent(t) : n(t);
    }
  };
}
function Hg(e, t, n, r, i, o, a, s, l, u) {
  var c, d, f, h, p, v, g, y, m, E, w, S, _, b, T, R, B = t.type;
  if (t.constructor !== void 0) return null;
  128 & n.__u && (l = !!(32 & n.__u), o = [s = t.__e = n.__e]), (c = _t.__b) && c(t);
  e: if (typeof B == "function") try {
    if (y = t.props, m = "prototype" in B && B.prototype.render, E = (c = B.contextType) && r[c.__c], w = c ? E ? E.props.value : c.__ : r, n.__c ? g = (d = t.__c = n.__c).__ = d.__E : (m ? t.__c = d = new B(y, w) : (t.__c = d = new Et(y, w), d.constructor = B, d.render = CD), E && E.sub(d), d.props = y, d.state || (d.state = {}), d.context = w, d.__n = r, f = d.__d = !0, d.__h = [], d._sb = []), m && d.__s == null && (d.__s = d.state), m && B.getDerivedStateFromProps != null && (d.__s == d.state && (d.__s = Mo({}, d.__s)), Mo(d.__s, B.getDerivedStateFromProps(y, d.__s))), h = d.props, p = d.state, d.__v = t, f) m && B.getDerivedStateFromProps == null && d.componentWillMount != null && d.componentWillMount(), m && d.componentDidMount != null && d.__h.push(d.componentDidMount);
    else {
      if (m && B.getDerivedStateFromProps == null && y !== h && d.componentWillReceiveProps != null && d.componentWillReceiveProps(y, w), !d.__e && (d.shouldComponentUpdate != null && d.shouldComponentUpdate(y, d.__s, w) === !1 || t.__v === n.__v)) {
        for (t.__v !== n.__v && (d.props = y, d.state = d.__s, d.__d = !1), t.__e = n.__e, t.__k = n.__k, t.__k.some(function(K) {
          K && (K.__ = t);
        }), S = 0; S < d._sb.length; S++) d.__h.push(d._sb[S]);
        d._sb = [], d.__h.length && a.push(d);
        break e;
      }
      d.componentWillUpdate != null && d.componentWillUpdate(y, d.__s, w), m && d.componentDidUpdate != null && d.__h.push(function() {
        d.componentDidUpdate(h, p, v);
      });
    }
    if (d.context = w, d.props = y, d.__P = e, d.__e = !1, _ = _t.__r, b = 0, m) {
      for (d.state = d.__s, d.__d = !1, _ && _(t), c = d.render(d.props, d.state, d.context), T = 0; T < d._sb.length; T++) d.__h.push(d._sb[T]);
      d._sb = [];
    } else do
      d.__d = !1, _ && _(t), c = d.render(d.props, d.state, d.context), d.state = d.__s;
    while (d.__d && ++b < 25);
    d.state = d.__s, d.getChildContext != null && (r = Mo(Mo({}, r), d.getChildContext())), m && !f && d.getSnapshotBeforeUpdate != null && (v = d.getSnapshotBeforeUpdate(h, p)), qw(e, Nf(R = c != null && c.type === Oa && c.key == null ? c.props.children : c) ? R : [R], t, n, r, i, o, a, s, l, u), d.base = t.__e, t.__u &= -161, d.__h.length && a.push(d), g && (d.__E = d.__ = null);
  } catch (K) {
    if (t.__v = null, l || o != null) {
      for (t.__u |= l ? 160 : 128; s && s.nodeType === 8 && s.nextSibling; ) s = s.nextSibling;
      o[o.indexOf(s)] = null, t.__e = s;
    } else t.__e = n.__e, t.__k = n.__k;
    _t.__e(K, t, n);
  }
  else o == null && t.__v === n.__v ? (t.__k = n.__k, t.__e = n.__e) : t.__e = SD(n.__e, t, n, r, i, o, a, l, u);
  (c = _t.diffed) && c(t);
}
function Jw(e, t, n) {
  t.__d = void 0;
  for (var r = 0; r < n.length; r++) Vg(n[r], n[++r], n[++r]);
  _t.__c && _t.__c(t, e), e.some(function(i) {
    try {
      e = i.__h, i.__h = [], e.some(function(o) {
        o.call(i);
      });
    } catch (o) {
      _t.__e(o, i.__v);
    }
  });
}
function SD(e, t, n, r, i, o, a, s, l) {
  var u, c, d, f, h, p, v, g = n.props, y = t.props, m = t.type;
  if (m === "svg" ? i = "http://www.w3.org/2000/svg" : m === "math" ? i = "http://www.w3.org/1998/Math/MathML" : i || (i = "http://www.w3.org/1999/xhtml"), o != null) {
    for (u = 0; u < o.length; u++) if ((h = o[u]) && "setAttribute" in h == !!m && (m ? h.localName === m : h.nodeType === 3)) {
      e = h, o[u] = null;
      break;
    }
  }
  if (e == null) {
    if (m === null) return document.createTextNode(y);
    e = document.createElementNS(i, m, y.is && y), s && (_t.__m && _t.__m(t, o), s = !1), o = null;
  }
  if (m === null) g === y || s && e.data === y || (e.data = y);
  else {
    if (o = o && Af.call(e.childNodes), g = n.props || _u, !s && o != null) for (g = {}, u = 0; u < e.attributes.length; u++) g[(h = e.attributes[u]).name] = h.value;
    for (u in g) if (h = g[u], u != "children") {
      if (u == "dangerouslySetInnerHTML") d = h;
      else if (!(u in y)) {
        if (u == "value" && "defaultValue" in y || u == "checked" && "defaultChecked" in y) continue;
        fc(e, u, null, h, i);
      }
    }
    for (u in y) h = y[u], u == "children" ? f = h : u == "dangerouslySetInnerHTML" ? c = h : u == "value" ? p = h : u == "checked" ? v = h : s && typeof h != "function" || g[u] === h || fc(e, u, h, g[u], i);
    if (c) s || d && (c.__html === d.__html || c.__html === e.innerHTML) || (e.innerHTML = c.__html), t.__k = [];
    else if (d && (e.innerHTML = ""), qw(e, Nf(f) ? f : [f], t, n, r, m === "foreignObject" ? "http://www.w3.org/1999/xhtml" : i, o, a, o ? o[0] : n.__k && Ms(n, 0), s, l), o != null) for (u = o.length; u--; ) Yw(o[u]);
    s || (u = "value", m === "progress" && p == null ? e.removeAttribute("value") : p !== void 0 && (p !== e[u] || m === "progress" && !p || m === "option" && p !== g[u]) && fc(e, u, p, g[u], i), u = "checked", v !== void 0 && v !== e[u] && fc(e, u, v, g[u], i));
  }
  return e;
}
function Vg(e, t, n) {
  try {
    if (typeof e == "function") {
      var r = typeof e.__u == "function";
      r && e.__u(), r && t == null || (e.__u = e(t));
    } else e.current = t;
  } catch (i) {
    _t.__e(i, n);
  }
}
function Qw(e, t, n) {
  var r, i;
  if (_t.unmount && _t.unmount(e), (r = e.ref) && (r.current && r.current !== e.__e || Vg(r, null, t)), (r = e.__c) != null) {
    if (r.componentWillUnmount) try {
      r.componentWillUnmount();
    } catch (o) {
      _t.__e(o, t);
    }
    r.base = r.__P = null;
  }
  if (r = e.__k) for (i = 0; i < r.length; i++) r[i] && Qw(r[i], t, n || typeof e.type != "function");
  n || Yw(e.__e), e.__c = e.__ = e.__e = e.__d = void 0;
}
function CD(e, t, n) {
  return this.constructor(e, n);
}
function OD(e, t, n) {
  var r, i, o, a;
  _t.__ && _t.__(e, t), i = (r = typeof n == "function") ? null : t.__k, o = [], a = [], Hg(t, e = (!r && n || t).__k = q(Oa, null, [e]), i || _u, _u, t.namespaceURI, !r && n ? [n] : i ? null : t.firstChild ? Af.call(t.childNodes) : null, o, !r && n ? n : i ? i.__e : t.firstChild, r, a), Jw(o, e, a);
}
Af = Uw.slice, _t = { __e: function(e, t, n, r) {
  for (var i, o, a; t = t.__; ) if ((i = t.__c) && !i.__) try {
    if ((o = i.constructor) && o.getDerivedStateFromError != null && (i.setState(o.getDerivedStateFromError(e)), a = i.__d), i.componentDidCatch != null && (i.componentDidCatch(e, r || {}), a = i.__d), a) return i.__E = i;
  } catch (s) {
    e = s;
  }
  throw e;
} }, Gw = 0, Et.prototype.setState = function(e, t) {
  var n;
  n = this.__s != null && this.__s !== this.state ? this.__s : this.__s = Mo({}, this.state), typeof e == "function" && (e = e(Mo({}, n), this.props)), e && Mo(n, e), e != null && this.__v && (t && this._sb.push(t), D_(this));
}, Et.prototype.forceUpdate = function(e) {
  this.__v && (this.__e = !0, e && this.__h.push(e), D_(this));
}, Et.prototype.render = Oa, da = [], Xw = typeof Promise == "function" ? Promise.prototype.then.bind(Promise.resolve()) : setTimeout, rv = function(e, t) {
  return e.__v.__b - t.__v.__b;
}, dd.__r = 0, Fg = 0, iv = L_(!1), ov = L_(!0);
var AD = "An invariant failed, however the error is obfuscated because this is a production build.", hd = [];
Object.freeze(hd);
var Wg = {};
Object.freeze(Wg);
function cr() {
  return ++$e.mobxGuid;
}
function lt(e) {
  throw on(!1, e), "X";
}
function on(e, t) {
  if (!e)
    throw new Error("[mobx] " + (t || AD));
}
var $_ = [];
function ND(e, t) {
  return process.env.NODE_ENV === "production" || $_.indexOf(e) !== -1 ? !1 : ($_.push(e), console.error("[mobx] Deprecated: " + e), !0);
}
function Gg(e) {
  var t = !1;
  return function() {
    if (!t)
      return t = !0, e.apply(this, arguments);
  };
}
var hc = function() {
};
function MD(e) {
  var t = [];
  return e.forEach(function(n) {
    t.indexOf(n) === -1 && t.push(n);
  }), t;
}
function Xg(e) {
  return e !== null && typeof e == "object";
}
function Fa(e) {
  if (e === null || typeof e != "object")
    return !1;
  var t = Object.getPrototypeOf(e);
  return t === Object.prototype || t === null;
}
function TD(e) {
  if (Js(e) || Qn(e))
    return e;
  if (Array.isArray(e))
    return new Map(e);
  if (Fa(e)) {
    var t = /* @__PURE__ */ new Map();
    for (var n in e)
      t.set(n, e[n]);
    return t;
  } else
    return lt("Cannot convert to map from '" + e + "'");
}
function Zs(e, t, n) {
  Object.defineProperty(e, t, {
    enumerable: !1,
    writable: !0,
    configurable: !0,
    value: n
  });
}
function PD(e, t, n) {
  Object.defineProperty(e, t, {
    enumerable: !1,
    writable: !1,
    configurable: !0,
    value: n
  });
}
function ex(e, t) {
  var n = Object.getOwnPropertyDescriptor(e, t);
  return !n || n.configurable !== !1 && n.writable !== !1;
}
function DD(e, t) {
  process.env.NODE_ENV !== "production" && !ex(e, t) && lt("Cannot make property '" + t.toString() + "' observable, it is not configurable and writable in the target object");
}
function Xo(e, t) {
  var n = "isMobX" + e;
  return t.prototype[n] = !0, function(r) {
    return Xg(r) && r[n] === !0;
  };
}
function Js(e) {
  return e instanceof Map;
}
function zu(e) {
  return e instanceof Set;
}
function Ug(e) {
  var t = /* @__PURE__ */ new Set();
  for (var n in e)
    t.add(n);
  return Object.getOwnPropertySymbols(e).forEach(function(r) {
    Object.getOwnPropertyDescriptor(e, r).enumerable && t.add(r);
  }), Array.from(t);
}
function Fr(e) {
  return e && e.toString ? e.toString() : new String(e).toString();
}
function tx(e) {
  return e === null ? null : typeof e == "object" ? "" + e : e;
}
var RD = typeof Reflect < "u" && Reflect.ownKeys ? Reflect.ownKeys : Object.getOwnPropertySymbols ? function(e) {
  return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e));
} : (
  /* istanbul ignore next */
  Object.getOwnPropertyNames
), rt = Symbol("mobx administration"), Qs = (
  /** @class */
  function() {
    function e(t) {
      t === void 0 && (t = "Atom@" + cr()), this.name = t, this.isPendingUnobservation = !1, this.isBeingObserved = !1, this.observers = /* @__PURE__ */ new Set(), this.diffValue = 0, this.lastAccessedBy = 0, this.lowestObserverState = Bt.NOT_TRACKING;
    }
    return e.prototype.onBecomeObserved = function() {
      this.onBecomeObservedListeners && this.onBecomeObservedListeners.forEach(function(t) {
        return t();
      });
    }, e.prototype.onBecomeUnobserved = function() {
      this.onBecomeUnobservedListeners && this.onBecomeUnobservedListeners.forEach(function(t) {
        return t();
      });
    }, e.prototype.reportObserved = function() {
      return fx(this);
    }, e.prototype.reportChanged = function() {
      gi(), a3(this), yi();
    }, e.prototype.toString = function() {
      return this.name;
    }, e;
  }()
), Yg = Xo("Atom", Qs);
function Kg(e, t, n) {
  t === void 0 && (t = hc), n === void 0 && (n = hc);
  var r = new Qs(e);
  return t !== hc && w3(r, t), n !== hc && mx(r, n), r;
}
function LD(e, t) {
  return e === t;
}
function $D(e, t) {
  return ny(e, t);
}
function kD(e, t) {
  return ny(e, t, 1);
}
function ID(e, t) {
  return Object.is(e, t);
}
var Ts = {
  identity: LD,
  structural: $D,
  default: ID,
  shallow: kD
};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var av = function(e, t) {
  return av = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(n, r) {
    n.__proto__ = r;
  } || function(n, r) {
    for (var i in r) r.hasOwnProperty(i) && (n[i] = r[i]);
  }, av(e, t);
};
function BD(e, t) {
  av(e, t);
  function n() {
    this.constructor = e;
  }
  e.prototype = t === null ? Object.create(t) : (n.prototype = t.prototype, new n());
}
var Zt = function() {
  return Zt = Object.assign || function(t) {
    for (var n, r = 1, i = arguments.length; r < i; r++) {
      n = arguments[r];
      for (var o in n) Object.prototype.hasOwnProperty.call(n, o) && (t[o] = n[o]);
    }
    return t;
  }, Zt.apply(this, arguments);
};
function ci(e) {
  var t = typeof Symbol == "function" && e[Symbol.iterator], n = 0;
  return t ? t.call(e) : {
    next: function() {
      return e && n >= e.length && (e = void 0), { value: e && e[n++], done: !e };
    }
  };
}
function fs(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}
function qg() {
  for (var e = [], t = 0; t < arguments.length; t++)
    e = e.concat(fs(arguments[t]));
  return e;
}
var pd = Symbol("mobx did run lazy initializers"), Bl = Symbol("mobx pending decorators"), jD = {}, zD = {};
function FD(e, t) {
  var n = t ? jD : zD;
  return n[e] || (n[e] = {
    configurable: !0,
    enumerable: t,
    get: function() {
      return Aa(this), this[e];
    },
    set: function(r) {
      Aa(this), this[e] = r;
    }
  });
}
function Aa(e) {
  var t, n;
  if (e[pd] !== !0) {
    var r = e[Bl];
    if (r) {
      Zs(e, pd, !0);
      var i = qg(Object.getOwnPropertySymbols(r), Object.keys(r));
      try {
        for (var o = ci(i), a = o.next(); !a.done; a = o.next()) {
          var s = a.value, l = r[s];
          l.propertyCreator(e, l.prop, l.descriptor, l.decoratorTarget, l.decoratorArguments);
        }
      } catch (u) {
        t = { error: u };
      } finally {
        try {
          a && !a.done && (n = o.return) && n.call(o);
        } finally {
          if (t) throw t.error;
        }
      }
    }
  }
}
function nx(e, t) {
  return function() {
    var r, i = function(a, s, l, u) {
      if (u === !0)
        return t(a, s, l, a, r), null;
      if (process.env.NODE_ENV !== "production" && !k_(arguments) && lt("This function is a decorator, but it wasn't invoked like a decorator"), !Object.prototype.hasOwnProperty.call(a, Bl)) {
        var c = a[Bl];
        Zs(a, Bl, Zt({}, c));
      }
      return a[Bl][s] = {
        prop: s,
        propertyCreator: t,
        descriptor: l,
        decoratorTarget: a,
        decoratorArguments: r
      }, FD(s, e);
    };
    return k_(arguments) ? (r = hd, i.apply(null, arguments)) : (r = Array.prototype.slice.call(arguments), i);
  };
}
function k_(e) {
  return (e.length === 2 || e.length === 3) && (typeof e[1] == "string" || typeof e[1] == "symbol") || e.length === 4 && e[3] === !0;
}
function Fu(e, t, n) {
  return Io(e) ? e : Array.isArray(e) ? ie.array(e, { name: n }) : Fa(e) ? ie.object(e, void 0, { name: n }) : Js(e) ? ie.map(e, { name: n }) : zu(e) ? ie.set(e, { name: n }) : e;
}
function HD(e, t, n) {
  return e == null || Ai(e) || Yi(e) || Qn(e) || qr(e) ? e : Array.isArray(e) ? ie.array(e, { name: n, deep: !1 }) : Fa(e) ? ie.object(e, void 0, { name: n, deep: !1 }) : Js(e) ? ie.map(e, { name: n, deep: !1 }) : zu(e) ? ie.set(e, { name: n, deep: !1 }) : lt(process.env.NODE_ENV !== "production" && "The shallow modifier / decorator can only used in combination with arrays, objects, maps and sets");
}
function Tf(e) {
  return e;
}
function VD(e, t, n) {
  if (process.env.NODE_ENV !== "production" && Io(e))
    throw "observable.struct should not be used with observable values";
  return ny(e, t) ? t : e;
}
function Pf(e) {
  on(e);
  var t = nx(!0, function(r, i, o, a, s) {
    process.env.NODE_ENV !== "production" && on(!o || !o.get, '@observable cannot be used on getter (property "' + Fr(i) + '"), use @computed instead.');
    var l = o ? o.initializer ? o.initializer.call(r) : o.value : void 0;
    ty(r).addObservableProp(i, l, e);
  }), n = (
    // Extra process checks, as this happens during module initialization
    typeof process < "u" && process.env && process.env.NODE_ENV !== "production" ? function() {
      return arguments.length < 2 ? lt("Incorrect decorator invocation. @observable decorator doesn't expect any arguments") : t.apply(null, arguments);
    } : t
  );
  return n.enhancer = e, n;
}
var rx = {
  deep: !0,
  name: void 0,
  defaultDecorator: void 0,
  proxy: !0
};
Object.freeze(rx);
function WD(e) {
  /^(deep|name|equals|defaultDecorator|proxy)$/.test(e) || lt("invalid option for (extend)observable: " + e);
}
function us(e) {
  if (e == null)
    return rx;
  if (typeof e == "string")
    return { name: e, deep: !0, proxy: !0 };
  if (process.env.NODE_ENV !== "production") {
    if (typeof e != "object")
      return lt("expected options object");
    Object.keys(e).forEach(WD);
  }
  return e;
}
var Zg = Pf(Fu), GD = Pf(HD), ix = Pf(Tf), XD = Pf(VD);
function pc(e) {
  return e.defaultDecorator ? e.defaultDecorator.enhancer : e.deep === !1 ? Tf : Fu;
}
function UD(e, t, n) {
  if (typeof arguments[1] == "string" || typeof arguments[1] == "symbol")
    return Zg.apply(null, arguments);
  if (Io(e))
    return e;
  var r = Fa(e) ? ie.object(e, t, n) : Array.isArray(e) ? ie.array(e, t) : Js(e) ? ie.map(e, t) : zu(e) ? ie.set(e, t) : e;
  if (r !== e)
    return r;
  lt(process.env.NODE_ENV !== "production" && "The provided value could not be converted into an observable. If you want just create an observable reference to the object use 'observable.box(value)'");
}
var I_ = {
  box: function(e, t) {
    arguments.length > 2 && xl("box");
    var n = us(t);
    return new xa(e, pc(n), n.name, !0, n.equals);
  },
  array: function(e, t) {
    arguments.length > 2 && xl("array");
    var n = us(t);
    return $3(e, pc(n), n.name);
  },
  map: function(e, t) {
    arguments.length > 2 && xl("map");
    var n = us(t);
    return new ey(e, pc(n), n.name);
  },
  set: function(e, t) {
    arguments.length > 2 && xl("set");
    var n = us(t);
    return new Ax(e, pc(n), n.name);
  },
  object: function(e, t, n) {
    typeof arguments[1] == "string" && xl("object");
    var r = us(n);
    if (r.proxy === !1)
      return dv({}, e, t, r);
    var i = bx(r), o = dv({}, void 0, void 0, r), a = D3(o);
    return wx(a, e, t, i), a;
  },
  ref: ix,
  shallow: GD,
  deep: Zg,
  struct: XD
}, ie = UD;
Object.keys(I_).forEach(function(e) {
  return ie[e] = I_[e];
});
function xl(e) {
  lt(
    // process.env.NODE_ENV !== "production" &&
    "Expected one or two arguments to observable." + e + ". Did you accidentally try to use observable." + e + " as decorator?"
  );
}
var vd = nx(!1, function(e, t, n, r, i) {
  process.env.NODE_ENV !== "production" && on(n && n.get, "Trying to declare a computed value for unspecified getter '" + Fr(t) + "'");
  var o = n.get, a = n.set, s = i[0] || {};
  ty(e).addComputedProp(e, t, Zt({
    get: o,
    set: a,
    context: e
  }, s));
}), YD = vd({ equals: Ts.structural }), Ut = function(t, n, r) {
  if (typeof n == "string" || t !== null && typeof t == "object" && arguments.length === 1)
    return vd.apply(null, arguments);
  process.env.NODE_ENV !== "production" && (on(typeof t == "function", "First argument to `computed` should be an expression."), on(arguments.length < 3, "Computed takes one or two arguments if used as function"));
  var i = typeof n == "object" ? n : {};
  return i.get = t, i.set = typeof n == "function" ? n : i.set, i.name = i.name || t.name || "", new Ds(i);
};
Ut.struct = YD;
var Bt;
(function(e) {
  e[e.NOT_TRACKING = -1] = "NOT_TRACKING", e[e.UP_TO_DATE = 0] = "UP_TO_DATE", e[e.POSSIBLY_STALE = 1] = "POSSIBLY_STALE", e[e.STALE = 2] = "STALE";
})(Bt || (Bt = {}));
var vi;
(function(e) {
  e[e.NONE = 0] = "NONE", e[e.LOG = 1] = "LOG", e[e.BREAK = 2] = "BREAK";
})(vi || (vi = {}));
var gd = (
  /** @class */
  /* @__PURE__ */ function() {
    function e(t) {
      this.cause = t;
    }
    return e;
  }()
);
function jl(e) {
  return e instanceof gd;
}
function sv(e) {
  switch (e.dependenciesState) {
    case Bt.UP_TO_DATE:
      return !1;
    case Bt.NOT_TRACKING:
    case Bt.STALE:
      return !0;
    case Bt.POSSIBLY_STALE: {
      for (var t = Jg(!0), n = el(), r = e.observing, i = r.length, o = 0; o < i; o++) {
        var a = r[o];
        if (Rs(a)) {
          if ($e.disableErrorBoundaries)
            a.get();
          else
            try {
              a.get();
            } catch {
              return Lo(n), Yl(t), !0;
            }
          if (e.dependenciesState === Bt.STALE)
            return Lo(n), Yl(t), !0;
        }
      }
      return sx(e), Lo(n), Yl(t), !1;
    }
  }
}
function Ps(e) {
  var t = e.observers.size > 0;
  $e.computationDepth > 0 && t && lt(process.env.NODE_ENV !== "production" && "Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: " + e.name), !$e.allowStateChanges && (t || $e.enforceActions === "strict") && lt(process.env.NODE_ENV !== "production" && ($e.enforceActions ? "Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: " : "Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: ") + e.name);
}
function KD(e) {
  process.env.NODE_ENV !== "production" && !$e.allowStateReads && $e.observableRequiresReaction && console.warn("[mobx] Observable " + e.name + " being read outside a reactive context");
}
function ox(e, t, n) {
  var r = Jg(!0);
  sx(e), e.newObserving = new Array(e.observing.length + 100), e.unboundDepsCount = 0, e.runId = ++$e.runId;
  var i = $e.trackingDerivation;
  $e.trackingDerivation = e;
  var o;
  if ($e.disableErrorBoundaries === !0)
    o = t.call(n);
  else
    try {
      o = t.call(n);
    } catch (a) {
      o = new gd(a);
    }
  return $e.trackingDerivation = i, ZD(e), qD(e), Yl(r), o;
}
function qD(e) {
  process.env.NODE_ENV !== "production" && e.observing.length === 0 && ($e.reactionRequiresObservable || e.requiresObservable) && console.warn("[mobx] Derivation " + e.name + " is created/updated without reading any observable value");
}
function ZD(e) {
  for (var t = e.observing, n = e.observing = e.newObserving, r = Bt.UP_TO_DATE, i = 0, o = e.unboundDepsCount, a = 0; a < o; a++) {
    var s = n[a];
    s.diffValue === 0 && (s.diffValue = 1, i !== a && (n[i] = s), i++), s.dependenciesState > r && (r = s.dependenciesState);
  }
  for (n.length = i, e.newObserving = null, o = t.length; o--; ) {
    var s = t[o];
    s.diffValue === 0 && cx(s, e), s.diffValue = 0;
  }
  for (; i--; ) {
    var s = n[i];
    s.diffValue === 1 && (s.diffValue = 0, o3(s, e));
  }
  r !== Bt.UP_TO_DATE && (e.dependenciesState = r, e.onBecomeStale());
}
function lv(e) {
  var t = e.observing;
  e.observing = [];
  for (var n = t.length; n--; )
    cx(t[n], e);
  e.dependenciesState = Bt.NOT_TRACKING;
}
function ax(e) {
  var t = el();
  try {
    return e();
  } finally {
    Lo(t);
  }
}
function el() {
  var e = $e.trackingDerivation;
  return $e.trackingDerivation = null, e;
}
function Lo(e) {
  $e.trackingDerivation = e;
}
function Jg(e) {
  var t = $e.allowStateReads;
  return $e.allowStateReads = e, t;
}
function Yl(e) {
  $e.allowStateReads = e;
}
function sx(e) {
  if (e.dependenciesState !== Bt.UP_TO_DATE) {
    e.dependenciesState = Bt.UP_TO_DATE;
    for (var t = e.observing, n = t.length; n--; )
      t[n].lowestObserverState = Bt.UP_TO_DATE;
  }
}
var yd = 0, JD = 1, B_ = Object.getOwnPropertyDescriptor(function() {
}, "name"), QD = B_ && B_.configurable;
function wa(e, t, n) {
  process.env.NODE_ENV !== "production" && (on(typeof t == "function", "`action` can only be invoked on functions"), (typeof e != "string" || !e) && lt("actions should have valid names, got: '" + e + "'"));
  var r = function() {
    return lx(e, t, n || this, arguments);
  };
  return r.isMobxAction = !0, process.env.NODE_ENV !== "production" && QD && Object.defineProperty(r, "name", { value: e }), r;
}
function lx(e, t, n, r) {
  var i = e3(e, n, r);
  try {
    return t.apply(n, r);
  } catch (o) {
    throw i.error = o, o;
  } finally {
    t3(i);
  }
}
function e3(e, t, n) {
  var r = Tn() && !!e, i = 0;
  if (r && process.env.NODE_ENV !== "production") {
    i = Date.now();
    var o = n && n.length || 0, a = new Array(o);
    if (o > 0)
      for (var s = 0; s < o; s++)
        a[s] = n[s];
    xr({
      type: "action",
      name: e,
      object: t,
      arguments: a
    });
  }
  var l = el();
  gi();
  var u = Df(!0), c = Jg(!0), d = {
    prevDerivation: l,
    prevAllowStateChanges: u,
    prevAllowStateReads: c,
    notifySpy: r,
    startTime: i,
    actionId: JD++,
    parentActionId: yd
  };
  return yd = d.actionId, d;
}
function t3(e) {
  yd !== e.actionId && lt("invalid action stack. did you forget to finish an action?"), yd = e.parentActionId, e.error !== void 0 && ($e.suppressReactionErrors = !0), Rf(e.prevAllowStateChanges), Yl(e.prevAllowStateReads), yi(), Lo(e.prevDerivation), e.notifySpy && process.env.NODE_ENV !== "production" && Er({ time: Date.now() - e.startTime }), $e.suppressReactionErrors = !1;
}
function Df(e) {
  var t = $e.allowStateChanges;
  return $e.allowStateChanges = e, t;
}
function Rf(e) {
  $e.allowStateChanges = e;
}
var xa = (
  /** @class */
  function(e) {
    BD(t, e);
    function t(n, r, i, o, a) {
      i === void 0 && (i = "ObservableValue@" + cr()), o === void 0 && (o = !0), a === void 0 && (a = Ts.default);
      var s = e.call(this, i) || this;
      return s.enhancer = r, s.name = i, s.equals = a, s.hasUnreportedChange = !1, s.value = r(n, void 0, i), o && Tn() && process.env.NODE_ENV !== "production" && Na({ type: "create", name: s.name, newValue: "" + s.value }), s;
    }
    return t.prototype.dehanceValue = function(n) {
      return this.dehancer !== void 0 ? this.dehancer(n) : n;
    }, t.prototype.set = function(n) {
      var r = this.value;
      if (n = this.prepareNewValue(n), n !== $e.UNCHANGED) {
        var i = Tn();
        i && process.env.NODE_ENV !== "production" && xr({
          type: "update",
          name: this.name,
          newValue: n,
          oldValue: r
        }), this.setNewValue(n), i && process.env.NODE_ENV !== "production" && Er();
      }
    }, t.prototype.prepareNewValue = function(n) {
      if (Ps(this), zi(this)) {
        var r = Fi(this, {
          object: this,
          type: "update",
          newValue: n
        });
        if (!r)
          return $e.UNCHANGED;
        n = r.newValue;
      }
      return n = this.enhancer(n, this.value, this.name), this.equals(this.value, n) ? $e.UNCHANGED : n;
    }, t.prototype.setNewValue = function(n) {
      var r = this.value;
      this.value = n, this.reportChanged(), mi(this) && _i(this, {
        type: "update",
        object: this,
        newValue: n,
        oldValue: r
      });
    }, t.prototype.get = function() {
      return this.reportObserved(), this.dehanceValue(this.value);
    }, t.prototype.intercept = function(n) {
      return Hu(this, n);
    }, t.prototype.observe = function(n, r) {
      return r && n({
        object: this,
        type: "update",
        newValue: this.value,
        oldValue: void 0
      }), Vu(this, n);
    }, t.prototype.toJSON = function() {
      return this.get();
    }, t.prototype.toString = function() {
      return this.name + "[" + this.value + "]";
    }, t.prototype.valueOf = function() {
      return tx(this.get());
    }, t.prototype[Symbol.toPrimitive] = function() {
      return this.valueOf();
    }, t;
  }(Qs)
), n3 = Xo("ObservableValue", xa), Ds = (
  /** @class */
  function() {
    function e(t) {
      this.dependenciesState = Bt.NOT_TRACKING, this.observing = [], this.newObserving = null, this.isBeingObserved = !1, this.isPendingUnobservation = !1, this.observers = /* @__PURE__ */ new Set(), this.diffValue = 0, this.runId = 0, this.lastAccessedBy = 0, this.lowestObserverState = Bt.UP_TO_DATE, this.unboundDepsCount = 0, this.__mapid = "#" + cr(), this.value = new gd(null), this.isComputing = !1, this.isRunningSetter = !1, this.isTracing = vi.NONE, on(t.get, "missing option for computed: get"), this.derivation = t.get, this.name = t.name || "ComputedValue@" + cr(), t.set && (this.setter = wa(this.name + "-setter", t.set)), this.equals = t.equals || (t.compareStructural || t.struct ? Ts.structural : Ts.default), this.scope = t.context, this.requiresReaction = !!t.requiresReaction, this.keepAlive = !!t.keepAlive;
    }
    return e.prototype.onBecomeStale = function() {
      l3(this);
    }, e.prototype.onBecomeObserved = function() {
      this.onBecomeObservedListeners && this.onBecomeObservedListeners.forEach(function(t) {
        return t();
      });
    }, e.prototype.onBecomeUnobserved = function() {
      this.onBecomeUnobservedListeners && this.onBecomeUnobservedListeners.forEach(function(t) {
        return t();
      });
    }, e.prototype.get = function() {
      this.isComputing && lt("Cycle detected in computation " + this.name + ": " + this.derivation), $e.inBatch === 0 && this.observers.size === 0 && !this.keepAlive ? sv(this) && (this.warnAboutUntrackedRead(), gi(), this.value = this.computeValue(!1), yi()) : (fx(this), sv(this) && this.trackAndCompute() && s3(this));
      var t = this.value;
      if (jl(t))
        throw t.cause;
      return t;
    }, e.prototype.peek = function() {
      var t = this.computeValue(!1);
      if (jl(t))
        throw t.cause;
      return t;
    }, e.prototype.set = function(t) {
      if (this.setter) {
        on(!this.isRunningSetter, "The setter of computed value '" + this.name + "' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"), this.isRunningSetter = !0;
        try {
          this.setter.call(this.scope, t);
        } finally {
          this.isRunningSetter = !1;
        }
      } else
        on(!1, process.env.NODE_ENV !== "production" && "[ComputedValue '" + this.name + "'] It is not possible to assign a new value to a computed value.");
    }, e.prototype.trackAndCompute = function() {
      Tn() && process.env.NODE_ENV !== "production" && Na({
        object: this.scope,
        type: "compute",
        name: this.name
      });
      var t = this.value, n = (
        /* see #1208 */
        this.dependenciesState === Bt.NOT_TRACKING
      ), r = this.computeValue(!0), i = n || jl(t) || jl(r) || !this.equals(t, r);
      return i && (this.value = r), i;
    }, e.prototype.computeValue = function(t) {
      this.isComputing = !0, $e.computationDepth++;
      var n;
      if (t)
        n = ox(this, this.derivation, this.scope);
      else if ($e.disableErrorBoundaries === !0)
        n = this.derivation.call(this.scope);
      else
        try {
          n = this.derivation.call(this.scope);
        } catch (r) {
          n = new gd(r);
        }
      return $e.computationDepth--, this.isComputing = !1, n;
    }, e.prototype.suspend = function() {
      this.keepAlive || (lv(this), this.value = void 0);
    }, e.prototype.observe = function(t, n) {
      var r = this, i = !0, o = void 0;
      return m3(function() {
        var a = r.get();
        if (!i || n) {
          var s = el();
          t({
            type: "update",
            object: r,
            newValue: a,
            oldValue: o
          }), Lo(s);
        }
        i = !1, o = a;
      });
    }, e.prototype.warnAboutUntrackedRead = function() {
      process.env.NODE_ENV !== "production" && (this.requiresReaction === !0 && lt("[mobx] Computed value " + this.name + " is read outside a reactive context"), this.isTracing !== vi.NONE && console.log("[mobx.trace] '" + this.name + "' is being read outside a reactive context. Doing a full recompute"), $e.computedRequiresReaction && console.warn("[mobx] Computed value " + this.name + " is being read outside a reactive context. Doing a full recompute"));
    }, e.prototype.toJSON = function() {
      return this.get();
    }, e.prototype.toString = function() {
      return this.name + "[" + this.derivation.toString() + "]";
    }, e.prototype.valueOf = function() {
      return tx(this.get());
    }, e.prototype[Symbol.toPrimitive] = function() {
      return this.valueOf();
    }, e;
  }()
), Rs = Xo("ComputedValue", Ds), Kc = (
  /** @class */
  /* @__PURE__ */ function() {
    function e() {
      this.version = 5, this.UNCHANGED = {}, this.trackingDerivation = null, this.computationDepth = 0, this.runId = 0, this.mobxGuid = 0, this.inBatch = 0, this.pendingUnobservations = [], this.pendingReactions = [], this.isRunningReactions = !1, this.allowStateChanges = !0, this.allowStateReads = !0, this.enforceActions = !1, this.spyListeners = [], this.globalReactionErrorHandlers = [], this.computedRequiresReaction = !1, this.reactionRequiresObservable = !1, this.observableRequiresReaction = !1, this.computedConfigurable = !1, this.disableErrorBoundaries = !1, this.suppressReactionErrors = !1;
    }
    return e;
  }()
), r3 = {};
function md() {
  return typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : r3;
}
var qc = !0, ux = !1, $e = function() {
  var e = md();
  return e.__mobxInstanceCount > 0 && !e.__mobxGlobals && (qc = !1), e.__mobxGlobals && e.__mobxGlobals.version !== new Kc().version && (qc = !1), qc ? e.__mobxGlobals ? (e.__mobxInstanceCount += 1, e.__mobxGlobals.UNCHANGED || (e.__mobxGlobals.UNCHANGED = {}), e.__mobxGlobals) : (e.__mobxInstanceCount = 1, e.__mobxGlobals = new Kc()) : (setTimeout(function() {
    ux || lt("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`");
  }, 1), new Kc());
}();
function i3() {
  ($e.pendingReactions.length || $e.inBatch || $e.isRunningReactions) && lt("isolateGlobalState should be called before MobX is running any reactions"), ux = !0, qc && (--md().__mobxInstanceCount === 0 && (md().__mobxGlobals = void 0), $e = new Kc());
}
function uv() {
  return $e;
}
function o3(e, t) {
  e.observers.add(t), e.lowestObserverState > t.dependenciesState && (e.lowestObserverState = t.dependenciesState);
}
function cx(e, t) {
  e.observers.delete(t), e.observers.size === 0 && dx(e);
}
function dx(e) {
  e.isPendingUnobservation === !1 && (e.isPendingUnobservation = !0, $e.pendingUnobservations.push(e));
}
function gi() {
  $e.inBatch++;
}
function yi() {
  if (--$e.inBatch === 0) {
    vx();
    for (var e = $e.pendingUnobservations, t = 0; t < e.length; t++) {
      var n = e[t];
      n.isPendingUnobservation = !1, n.observers.size === 0 && (n.isBeingObserved && (n.isBeingObserved = !1, n.onBecomeUnobserved()), n instanceof Ds && n.suspend());
    }
    $e.pendingUnobservations = [];
  }
}
function fx(e) {
  KD(e);
  var t = $e.trackingDerivation;
  return t !== null ? (t.runId !== e.lastAccessedBy && (e.lastAccessedBy = t.runId, t.newObserving[t.unboundDepsCount++] = e, e.isBeingObserved || (e.isBeingObserved = !0, e.onBecomeObserved())), !0) : (e.observers.size === 0 && $e.inBatch > 0 && dx(e), !1);
}
function a3(e) {
  e.lowestObserverState !== Bt.STALE && (e.lowestObserverState = Bt.STALE, e.observers.forEach(function(t) {
    t.dependenciesState === Bt.UP_TO_DATE && (t.isTracing !== vi.NONE && hx(t, e), t.onBecomeStale()), t.dependenciesState = Bt.STALE;
  }));
}
function s3(e) {
  e.lowestObserverState !== Bt.STALE && (e.lowestObserverState = Bt.STALE, e.observers.forEach(function(t) {
    t.dependenciesState === Bt.POSSIBLY_STALE ? t.dependenciesState = Bt.STALE : t.dependenciesState === Bt.UP_TO_DATE && (e.lowestObserverState = Bt.UP_TO_DATE);
  }));
}
function l3(e) {
  e.lowestObserverState === Bt.UP_TO_DATE && (e.lowestObserverState = Bt.POSSIBLY_STALE, e.observers.forEach(function(t) {
    t.dependenciesState === Bt.UP_TO_DATE && (t.dependenciesState = Bt.POSSIBLY_STALE, t.isTracing !== vi.NONE && hx(t, e), t.onBecomeStale());
  }));
}
function hx(e, t) {
  if (console.log("[mobx.trace] '" + e.name + "' is invalidated due to a change in: '" + t.name + "'"), e.isTracing === vi.BREAK) {
    var n = [];
    px(E3(e), n, 1), new Function(`debugger;
/*
Tracing '` + e.name + `'

You are entering this break point because derivation '` + e.name + "' is being traced and '" + t.name + `' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

` + (e instanceof Ds ? e.derivation.toString().replace(/[*]\//g, "/") : "") + `

The dependencies for this derivation are:

` + n.join(`
`) + `
*/
    `)();
  }
}
function px(e, t, n) {
  if (t.length >= 1e3) {
    t.push("(and many more)");
    return;
  }
  t.push("" + new Array(n).join("	") + e.name), e.dependencies && e.dependencies.forEach(function(r) {
    return px(r, t, n + 1);
  });
}
var bu = (
  /** @class */
  function() {
    function e(t, n, r, i) {
      t === void 0 && (t = "Reaction@" + cr()), i === void 0 && (i = !1), this.name = t, this.onInvalidate = n, this.errorHandler = r, this.requiresObservable = i, this.observing = [], this.newObserving = [], this.dependenciesState = Bt.NOT_TRACKING, this.diffValue = 0, this.runId = 0, this.unboundDepsCount = 0, this.__mapid = "#" + cr(), this.isDisposed = !1, this._isScheduled = !1, this._isTrackPending = !1, this._isRunning = !1, this.isTracing = vi.NONE;
    }
    return e.prototype.onBecomeStale = function() {
      this.schedule();
    }, e.prototype.schedule = function() {
      this._isScheduled || (this._isScheduled = !0, $e.pendingReactions.push(this), vx());
    }, e.prototype.isScheduled = function() {
      return this._isScheduled;
    }, e.prototype.runReaction = function() {
      if (!this.isDisposed) {
        if (gi(), this._isScheduled = !1, sv(this)) {
          this._isTrackPending = !0;
          try {
            this.onInvalidate(), this._isTrackPending && Tn() && process.env.NODE_ENV !== "production" && Na({
              name: this.name,
              type: "scheduled-reaction"
            });
          } catch (t) {
            this.reportExceptionInDerivation(t);
          }
        }
        yi();
      }
    }, e.prototype.track = function(t) {
      if (!this.isDisposed) {
        gi();
        var n = Tn(), r;
        n && process.env.NODE_ENV !== "production" && (r = Date.now(), xr({
          name: this.name,
          type: "reaction"
        })), this._isRunning = !0;
        var i = ox(this, t, void 0);
        this._isRunning = !1, this._isTrackPending = !1, this.isDisposed && lv(this), jl(i) && this.reportExceptionInDerivation(i.cause), n && process.env.NODE_ENV !== "production" && Er({
          time: Date.now() - r
        }), yi();
      }
    }, e.prototype.reportExceptionInDerivation = function(t) {
      var n = this;
      if (this.errorHandler) {
        this.errorHandler(t, this);
        return;
      }
      if ($e.disableErrorBoundaries)
        throw t;
      var r = "[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '" + this + "'";
      $e.suppressReactionErrors ? console.warn("[mobx] (error in reaction '" + this.name + "' suppressed, fix error of causing action below)") : console.error(r, t), Tn() && Na({
        type: "error",
        name: this.name,
        message: r,
        error: "" + t
      }), $e.globalReactionErrorHandlers.forEach(function(i) {
        return i(t, n);
      });
    }, e.prototype.dispose = function() {
      this.isDisposed || (this.isDisposed = !0, this._isRunning || (gi(), lv(this), yi()));
    }, e.prototype.getDisposer = function() {
      var t = this.dispose.bind(this);
      return t[rt] = this, t;
    }, e.prototype.toString = function() {
      return "Reaction[" + this.name + "]";
    }, e.prototype.trace = function(t) {
      t === void 0 && (t = !1), M3(this, t);
    }, e;
  }()
), j_ = 100, cv = function(e) {
  return e();
};
function vx() {
  $e.inBatch > 0 || $e.isRunningReactions || cv(u3);
}
function u3() {
  $e.isRunningReactions = !0;
  for (var e = $e.pendingReactions, t = 0; e.length > 0; ) {
    ++t === j_ && (console.error("Reaction doesn't converge to a stable state after " + j_ + " iterations." + (" Probably there is a cycle in the reactive function: " + e[0])), e.splice(0));
    for (var n = e.splice(0), r = 0, i = n.length; r < i; r++)
      n[r].runReaction();
  }
  $e.isRunningReactions = !1;
}
var _d = Xo("Reaction", bu);
function c3(e) {
  var t = cv;
  cv = function(n) {
    return e(function() {
      return t(n);
    });
  };
}
function Tn() {
  return process.env.NODE_ENV !== "production" && !!$e.spyListeners.length;
}
function Na(e) {
  if (process.env.NODE_ENV !== "production" && $e.spyListeners.length)
    for (var t = $e.spyListeners, n = 0, r = t.length; n < r; n++)
      t[n](e);
}
function xr(e) {
  if (process.env.NODE_ENV !== "production") {
    var t = Zt(Zt({}, e), { spyReportStart: !0 });
    Na(t);
  }
}
var d3 = { spyReportEnd: !0 };
function Er(e) {
  process.env.NODE_ENV !== "production" && Na(e ? Zt(Zt({}, e), { spyReportEnd: !0 }) : d3);
}
function f3(e) {
  return process.env.NODE_ENV === "production" ? (console.warn("[mobx.spy] Is a no-op in production builds"), function() {
  }) : ($e.spyListeners.push(e), Gg(function() {
    $e.spyListeners = $e.spyListeners.filter(function(t) {
      return t !== e;
    });
  }));
}
function h3() {
  lt(process.env.NODE_ENV !== "production" && "@action fields are not reassignable");
}
function z_(e) {
  return function(t, n, r) {
    if (r) {
      if (process.env.NODE_ENV !== "production" && r.get !== void 0)
        return lt("@action cannot be used with getters");
      if (r.value)
        return {
          value: wa(e, r.value),
          enumerable: !1,
          configurable: !0,
          writable: !0
          // for typescript, this must be writable, otherwise it cannot inherit :/ (see inheritable actions test)
        };
      var i = r.initializer;
      return {
        enumerable: !1,
        configurable: !0,
        writable: !0,
        initializer: function() {
          return wa(e, i.call(this));
        }
      };
    }
    return p3(e).apply(this, arguments);
  };
}
function p3(e) {
  return function(t, n, r) {
    Object.defineProperty(t, n, {
      configurable: !0,
      enumerable: !1,
      get: function() {
      },
      set: function(i) {
        Zs(this, n, te(e, i));
      }
    });
  };
}
function v3(e, t, n, r) {
  return r === !0 ? (up(e, t, n.value), null) : n ? {
    configurable: !0,
    enumerable: !1,
    get: function() {
      return up(this, t, n.value || n.initializer.call(this)), this[t];
    },
    set: h3
  } : {
    enumerable: !1,
    configurable: !0,
    set: function(i) {
      up(this, t, i);
    },
    get: function() {
    }
  };
}
var te = function(t, n, r, i) {
  if (arguments.length === 1 && typeof t == "function")
    return wa(t.name || "<unnamed action>", t);
  if (arguments.length === 2 && typeof n == "function")
    return wa(t, n);
  if (arguments.length === 1 && typeof t == "string")
    return z_(t);
  if (i === !0)
    Zs(t, n, wa(t.name || n, r.value, this));
  else
    return z_(n).apply(null, arguments);
};
te.bound = v3;
function g3(e, t) {
  var n = typeof e == "string" ? e : e.name || "<unnamed action>", r = typeof e == "function" ? e : t;
  return process.env.NODE_ENV !== "production" && (on(typeof r == "function" && r.length === 0, "`runInAction` expects a function without arguments"), (typeof n != "string" || !n) && lt("actions should have valid names, got: '" + n + "'")), lx(n, r, this, void 0);
}
function y3(e) {
  return typeof e == "function" && e.isMobxAction === !0;
}
function up(e, t, n) {
  Zs(e, t, wa(t, n.bind(e)));
}
function m3(e, t) {
  t === void 0 && (t = Wg), process.env.NODE_ENV !== "production" && (on(typeof e == "function", "Autorun expects a function as first argument"), on(y3(e) === !1, "Autorun does not accept actions since actions are untrackable"));
  var n = t && t.name || e.name || "Autorun@" + cr(), r = !t.scheduler && !t.delay, i;
  if (r)
    i = new bu(n, function() {
      this.track(s);
    }, t.onError, t.requiresObservable);
  else {
    var o = gx(t), a = !1;
    i = new bu(n, function() {
      a || (a = !0, o(function() {
        a = !1, i.isDisposed || i.track(s);
      }));
    }, t.onError, t.requiresObservable);
  }
  function s() {
    e(i);
  }
  return i.schedule(), i.getDisposer();
}
var _3 = function(e) {
  return e();
};
function gx(e) {
  return e.scheduler ? e.scheduler : e.delay ? function(t) {
    return setTimeout(t, e.delay);
  } : _3;
}
function yx(e, t, n) {
  n === void 0 && (n = Wg), process.env.NODE_ENV !== "production" && (on(typeof e == "function", "First argument to reaction should be a function"), on(typeof n == "object", "Third argument of reactions should be an object"));
  var r = n.name || "Reaction@" + cr(), i = te(r, n.onError ? b3(n.onError, t) : t), o = !n.scheduler && !n.delay, a = gx(n), s = !0, l = !1, u, c = n.compareStructural ? Ts.structural : n.equals || Ts.default, d = new bu(r, function() {
    s || o ? f() : l || (l = !0, a(f));
  }, n.onError, n.requiresObservable);
  function f() {
    if (l = !1, !d.isDisposed) {
      var h = !1;
      d.track(function() {
        var p = e(d);
        h = s || !c(u, p), u = p;
      }), s && n.fireImmediately && i(u, d), !s && h === !0 && i(u, d), s && (s = !1);
    }
  }
  return d.schedule(), d.getDisposer();
}
function b3(e, t) {
  return function() {
    try {
      return t.apply(this, arguments);
    } catch (n) {
      e.call(this, n);
    }
  };
}
function w3(e, t, n) {
  return _x("onBecomeObserved", e, t);
}
function mx(e, t, n) {
  return _x("onBecomeUnobserved", e, t);
}
function _x(e, t, n, r) {
  var i = Bo(t), o = n, a = e + "Listeners";
  i[a] ? i[a].add(o) : i[a] = /* @__PURE__ */ new Set([o]);
  var s = i[e];
  return typeof s != "function" ? lt(process.env.NODE_ENV !== "production" && "Not an atom that can be (un)observed") : function() {
    var l = i[a];
    l && (l.delete(o), l.size === 0 && delete i[a]);
  };
}
function x3(e) {
  var t = e.enforceActions, n = e.computedRequiresReaction, r = e.computedConfigurable, i = e.disableErrorBoundaries, o = e.reactionScheduler, a = e.reactionRequiresObservable, s = e.observableRequiresReaction;
  if (e.isolateGlobalState === !0 && i3(), t !== void 0) {
    (typeof t == "boolean" || t === "strict") && ND(`Deprecated value for 'enforceActions', use 'false' => '"never"', 'true' => '"observed"', '"strict"' => "'always'" instead`);
    var l = void 0;
    switch (t) {
      case !0:
      case "observed":
        l = !0;
        break;
      case !1:
      case "never":
        l = !1;
        break;
      case "strict":
      case "always":
        l = "strict";
        break;
      default:
        lt("Invalid value for 'enforceActions': '" + t + "', expected 'never', 'always' or 'observed'");
    }
    $e.enforceActions = l, $e.allowStateChanges = !(l === !0 || l === "strict");
  }
  n !== void 0 && ($e.computedRequiresReaction = !!n), a !== void 0 && ($e.reactionRequiresObservable = !!a), s !== void 0 && ($e.observableRequiresReaction = !!s, $e.allowStateReads = !$e.observableRequiresReaction), r !== void 0 && ($e.computedConfigurable = !!r), i !== void 0 && (i === !0 && console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."), $e.disableErrorBoundaries = !!i), o && c3(o);
}
function dv(e, t, n, r) {
  process.env.NODE_ENV !== "production" && (on(arguments.length >= 2 && arguments.length <= 4, "'extendObservable' expected 2-4 arguments"), on(typeof e == "object", "'extendObservable' expects an object as first argument"), on(!Qn(e), "'extendObservable' should not be used on maps, use map.merge instead")), r = us(r);
  var i = bx(r);
  return Aa(e), ty(e, r.name, i.enhancer), t && wx(e, t, n, i), e;
}
function bx(e) {
  return e.defaultDecorator || (e.deep === !1 ? ix : Zg);
}
function wx(e, t, n, r) {
  var i, o, a, s;
  if (process.env.NODE_ENV !== "production" && (on(!Io(t), "Extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540"), n)) {
    var l = Ug(n);
    try {
      for (var u = ci(l), c = u.next(); !c.done; c = u.next()) {
        var d = c.value;
        d in t || lt("Trying to declare a decorator for unspecified property '" + Fr(d) + "'");
      }
    } catch (y) {
      i = { error: y };
    } finally {
      try {
        c && !c.done && (o = u.return) && o.call(u);
      } finally {
        if (i) throw i.error;
      }
    }
  }
  gi();
  try {
    var l = RD(t);
    try {
      for (var f = ci(l), h = f.next(); !h.done; h = f.next()) {
        var d = h.value, p = Object.getOwnPropertyDescriptor(t, d);
        process.env.NODE_ENV !== "production" && (Fa(t) || lt("'extendObservable' only accepts plain objects as second argument"), Sx(p.value) && lt("Passing a 'computed' as initial property value is no longer supported by extendObservable. Use a getter or decorator instead"));
        var v = n && d in n ? n[d] : p.get ? vd : r;
        process.env.NODE_ENV !== "production" && typeof v != "function" && lt("Not a valid decorator for '" + Fr(d) + "', got: " + v);
        var g = v(e, d, p, !0);
        g && Object.defineProperty(e, d, g);
      }
    } catch (m) {
      a = { error: m };
    } finally {
      try {
        h && !h.done && (s = f.return) && s.call(f);
      } finally {
        if (a) throw a.error;
      }
    }
  } finally {
    yi();
  }
}
function E3(e, t) {
  return xx(Bo(e, t));
}
function xx(e) {
  var t = {
    name: e.name
  };
  return e.observing && e.observing.length > 0 && (t.dependencies = MD(e.observing).map(xx)), t;
}
function Ex(e, t) {
  if (e == null)
    return !1;
  if (t !== void 0) {
    if (Ai(e) === !1 || !e[rt].values.has(t))
      return !1;
    var n = Bo(e, t);
    return Rs(n);
  }
  return Rs(e);
}
function Sx(e) {
  return arguments.length > 1 ? lt(process.env.NODE_ENV !== "production" && "isComputed expects only 1 argument. Use isObservableProp to inspect the observability of a property") : Ex(e);
}
function F_(e, t) {
  return typeof t != "string" ? lt(process.env.NODE_ENV !== "production" && "isComputed expected a property name as second argument") : Ex(e, t);
}
function S3(e, t) {
  return e == null ? !1 : Ai(e) || !!e[rt] || Yg(e) || _d(e) || Rs(e);
}
function Io(e) {
  return arguments.length !== 1 && lt(process.env.NODE_ENV !== "production" && "isObservable expects only 1 argument. Use isObservableProp to inspect the observability of a property"), S3(e);
}
function Ls(e) {
  return Ai(e) ? e[rt].getKeys() : Qn(e) || qr(e) ? Array.from(e.keys()) : Yi(e) ? e.map(function(t, n) {
    return n;
  }) : lt(process.env.NODE_ENV !== "production" && "'keys()' can only be used on observable objects, arrays, sets and maps");
}
function C3(e) {
  return Ai(e) ? Ls(e).map(function(t) {
    return e[t];
  }) : Qn(e) ? Ls(e).map(function(t) {
    return e.get(t);
  }) : qr(e) ? Array.from(e.values()) : Yi(e) ? e.slice() : lt(process.env.NODE_ENV !== "production" && "'values()' can only be used on observable objects, arrays, sets and maps");
}
function O3(e) {
  return Ai(e) ? Ls(e).map(function(t) {
    return [t, e[t]];
  }) : Qn(e) ? Ls(e).map(function(t) {
    return [t, e.get(t)];
  }) : qr(e) ? Array.from(e.entries()) : Yi(e) ? e.map(function(t, n) {
    return [n, t];
  }) : lt(process.env.NODE_ENV !== "production" && "'entries()' can only be used on observable objects, arrays and maps");
}
function Qg(e, t, n) {
  if (arguments.length === 2 && !qr(e)) {
    gi();
    var r = t;
    try {
      for (var i in r)
        Qg(e, i, r[i]);
    } finally {
      yi();
    }
    return;
  }
  if (Ai(e)) {
    var o = e[rt], a = o.values.get(t);
    a ? o.write(t, n) : o.addObservableProp(t, n, o.defaultEnhancer);
  } else if (Qn(e))
    e.set(t, n);
  else if (qr(e))
    e.add(t);
  else if (Yi(e))
    typeof t != "number" && (t = parseInt(t, 10)), on(t >= 0, "Not a valid index: '" + t + "'"), gi(), t >= e.length && (e.length = t + 1), e[t] = n, yi();
  else
    return lt(process.env.NODE_ENV !== "production" && "'set()' can only be used on observable objects, arrays and maps");
}
function Cx(e, t, n, r) {
  return A3(e, t, n);
}
function A3(e, t, n) {
  return Lf(e).observe(t, n);
}
var N3 = {
  detectCycles: !0,
  exportMapsAsObjects: !0,
  recurseEverything: !1
};
function ts(e, t, n, r) {
  return r.detectCycles && e.set(t, n), n;
}
function Eo(e, t, n) {
  if (!t.recurseEverything && !Io(e) || typeof e != "object")
    return e;
  if (e === null)
    return null;
  if (e instanceof Date)
    return e;
  if (n3(e))
    return Eo(e.get(), t, n);
  Io(e) && Ls(e);
  var r = t.detectCycles === !0;
  if (r && e !== null && n.has(e))
    return n.get(e);
  if (Yi(e) || Array.isArray(e)) {
    var i = ts(n, e, [], t), o = e.map(function(h) {
      return Eo(h, t, n);
    });
    i.length = o.length;
    for (var a = 0, s = o.length; a < s; a++)
      i[a] = o[a];
    return i;
  }
  if (qr(e) || Object.getPrototypeOf(e) === Set.prototype)
    if (t.exportMapsAsObjects === !1) {
      var l = ts(n, e, /* @__PURE__ */ new Set(), t);
      return e.forEach(function(h) {
        l.add(Eo(h, t, n));
      }), l;
    } else {
      var u = ts(n, e, [], t);
      return e.forEach(function(h) {
        u.push(Eo(h, t, n));
      }), u;
    }
  if (Qn(e) || Object.getPrototypeOf(e) === Map.prototype)
    if (t.exportMapsAsObjects === !1) {
      var c = ts(n, e, /* @__PURE__ */ new Map(), t);
      return e.forEach(function(h, p) {
        c.set(p, Eo(h, t, n));
      }), c;
    } else {
      var d = ts(n, e, {}, t);
      return e.forEach(function(h, p) {
        d[p] = Eo(h, t, n);
      }), d;
    }
  var f = ts(n, e, {}, t);
  return Ug(e).forEach(function(h) {
    f[h] = Eo(e[h], t, n);
  }), f;
}
function li(e, t) {
  typeof t == "boolean" && (t = { detectCycles: t }), t || (t = N3), t.detectCycles = t.detectCycles === void 0 ? t.recurseEverything === !0 : t.detectCycles === !0;
  var n;
  return t.detectCycles && (n = /* @__PURE__ */ new Map()), Eo(e, t, n);
}
function M3() {
  for (var e = [], t = 0; t < arguments.length; t++)
    e[t] = arguments[t];
  var n = !1;
  typeof e[e.length - 1] == "boolean" && (n = e.pop());
  var r = T3(e);
  if (!r)
    return lt(process.env.NODE_ENV !== "production" && "'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");
  r.isTracing === vi.NONE && console.log("[mobx.trace] '" + r.name + "' tracing enabled"), r.isTracing = n ? vi.BREAK : vi.LOG;
}
function T3(e) {
  switch (e.length) {
    case 0:
      return $e.trackingDerivation;
    case 1:
      return Bo(e[0]);
    case 2:
      return Bo(e[0], e[1]);
  }
}
function di(e, t) {
  t === void 0 && (t = void 0), gi();
  try {
    return e.apply(t);
  } finally {
    yi();
  }
}
function vc(e) {
  return e[rt];
}
function gc(e) {
  return typeof e == "string" || typeof e == "number" || typeof e == "symbol";
}
var P3 = {
  has: function(e, t) {
    if (t === rt || t === "constructor" || t === pd)
      return !0;
    var n = vc(e);
    return gc(t) ? n.has(t) : t in e;
  },
  get: function(e, t) {
    if (t === rt || t === "constructor" || t === pd)
      return e[t];
    var n = vc(e), r = n.values.get(t);
    if (r instanceof Qs) {
      var i = r.get();
      return i === void 0 && n.has(t), i;
    }
    return gc(t) && n.has(t), e[t];
  },
  set: function(e, t, n) {
    return gc(t) ? (Qg(e, t, n), !0) : !1;
  },
  deleteProperty: function(e, t) {
    if (!gc(t))
      return !1;
    var n = vc(e);
    return n.remove(t), !0;
  },
  ownKeys: function(e) {
    var t = vc(e);
    return t.keysAtom.reportObserved(), Reflect.ownKeys(e);
  },
  preventExtensions: function(e) {
    return lt("Dynamic observable objects cannot be frozen"), !1;
  }
};
function D3(e) {
  var t = new Proxy(e, P3);
  return e[rt].proxy = t, t;
}
function zi(e) {
  return e.interceptors !== void 0 && e.interceptors.length > 0;
}
function Hu(e, t) {
  var n = e.interceptors || (e.interceptors = []);
  return n.push(t), Gg(function() {
    var r = n.indexOf(t);
    r !== -1 && n.splice(r, 1);
  });
}
function Fi(e, t) {
  var n = el();
  try {
    for (var r = qg(e.interceptors || []), i = 0, o = r.length; i < o && (t = r[i](t), on(!t || t.type, "Intercept handlers should return nothing or a change object"), !!t); i++)
      ;
    return t;
  } finally {
    Lo(n);
  }
}
function mi(e) {
  return e.changeListeners !== void 0 && e.changeListeners.length > 0;
}
function Vu(e, t) {
  var n = e.changeListeners || (e.changeListeners = []);
  return n.push(t), Gg(function() {
    var r = n.indexOf(t);
    r !== -1 && n.splice(r, 1);
  });
}
function _i(e, t) {
  var n = el(), r = e.changeListeners;
  if (r) {
    r = r.slice();
    for (var i = 0, o = r.length; i < o; i++)
      r[i](t);
    Lo(n);
  }
}
var R3 = 1e4, L3 = {
  get: function(e, t) {
    return t === rt ? e[rt] : t === "length" ? e[rt].getArrayLength() : typeof t == "number" ? oo.get.call(e, t) : typeof t == "string" && !isNaN(t) ? oo.get.call(e, parseInt(t)) : oo.hasOwnProperty(t) ? oo[t] : e[t];
  },
  set: function(e, t, n) {
    return t === "length" && e[rt].setArrayLength(n), typeof t == "number" && oo.set.call(e, t, n), typeof t == "symbol" || isNaN(t) ? e[t] = n : oo.set.call(e, parseInt(t), n), !0;
  },
  preventExtensions: function(e) {
    return lt("Observable arrays cannot be frozen"), !1;
  }
};
function $3(e, t, n, r) {
  n === void 0 && (n = "ObservableArray@" + cr()), r === void 0 && (r = !1);
  var i = new Ox(n, t, r);
  PD(i.values, rt, i);
  var o = new Proxy(i.values, L3);
  if (i.proxy = o, e && e.length) {
    var a = Df(!0);
    i.spliceWithArray(0, 0, e), Rf(a);
  }
  return o;
}
var Ox = (
  /** @class */
  function() {
    function e(t, n, r) {
      this.owned = r, this.values = [], this.proxy = void 0, this.lastKnownLength = 0, this.atom = new Qs(t || "ObservableArray@" + cr()), this.enhancer = function(i, o) {
        return n(i, o, t + "[..]");
      };
    }
    return e.prototype.dehanceValue = function(t) {
      return this.dehancer !== void 0 ? this.dehancer(t) : t;
    }, e.prototype.dehanceValues = function(t) {
      return this.dehancer !== void 0 && t.length > 0 ? t.map(this.dehancer) : t;
    }, e.prototype.intercept = function(t) {
      return Hu(this, t);
    }, e.prototype.observe = function(t, n) {
      return n === void 0 && (n = !1), n && t({
        object: this.proxy,
        type: "splice",
        index: 0,
        added: this.values.slice(),
        addedCount: this.values.length,
        removed: [],
        removedCount: 0
      }), Vu(this, t);
    }, e.prototype.getArrayLength = function() {
      return this.atom.reportObserved(), this.values.length;
    }, e.prototype.setArrayLength = function(t) {
      if (typeof t != "number" || t < 0)
        throw new Error("[mobx.array] Out of range: " + t);
      var n = this.values.length;
      if (t !== n)
        if (t > n) {
          for (var r = new Array(t - n), i = 0; i < t - n; i++)
            r[i] = void 0;
          this.spliceWithArray(n, 0, r);
        } else
          this.spliceWithArray(t, n - t);
    }, e.prototype.updateArrayLength = function(t, n) {
      if (t !== this.lastKnownLength)
        throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");
      this.lastKnownLength += n;
    }, e.prototype.spliceWithArray = function(t, n, r) {
      var i = this;
      Ps(this.atom);
      var o = this.values.length;
      if (t === void 0 ? t = 0 : t > o ? t = o : t < 0 && (t = Math.max(0, o + t)), arguments.length === 1 ? n = o - t : n == null ? n = 0 : n = Math.max(0, Math.min(n, o - t)), r === void 0 && (r = hd), zi(this)) {
        var a = Fi(this, {
          object: this.proxy,
          type: "splice",
          index: t,
          removedCount: n,
          added: r
        });
        if (!a)
          return hd;
        n = a.removedCount, r = a.added;
      }
      if (r = r.length === 0 ? r : r.map(function(u) {
        return i.enhancer(u, void 0);
      }), process.env.NODE_ENV !== "production") {
        var s = r.length - n;
        this.updateArrayLength(o, s);
      }
      var l = this.spliceItemsIntoValues(t, n, r);
      return (n !== 0 || r.length !== 0) && this.notifyArraySplice(t, r, l), this.dehanceValues(l);
    }, e.prototype.spliceItemsIntoValues = function(t, n, r) {
      var i;
      if (r.length < R3)
        return (i = this.values).splice.apply(i, qg([t, n], r));
      var o = this.values.slice(t, t + n);
      return this.values = this.values.slice(0, t).concat(r, this.values.slice(t + n)), o;
    }, e.prototype.notifyArrayChildUpdate = function(t, n, r) {
      var i = !this.owned && Tn(), o = mi(this), a = o || i ? {
        object: this.proxy,
        type: "update",
        index: t,
        newValue: n,
        oldValue: r
      } : null;
      i && process.env.NODE_ENV !== "production" && xr(Zt(Zt({}, a), { name: this.atom.name })), this.atom.reportChanged(), o && _i(this, a), i && process.env.NODE_ENV !== "production" && Er();
    }, e.prototype.notifyArraySplice = function(t, n, r) {
      var i = !this.owned && Tn(), o = mi(this), a = o || i ? {
        object: this.proxy,
        type: "splice",
        index: t,
        removed: r,
        added: n,
        removedCount: r.length,
        addedCount: n.length
      } : null;
      i && process.env.NODE_ENV !== "production" && xr(Zt(Zt({}, a), { name: this.atom.name })), this.atom.reportChanged(), o && _i(this, a), i && process.env.NODE_ENV !== "production" && Er();
    }, e;
  }()
), oo = {
  intercept: function(e) {
    return this[rt].intercept(e);
  },
  observe: function(e, t) {
    t === void 0 && (t = !1);
    var n = this[rt];
    return n.observe(e, t);
  },
  clear: function() {
    return this.splice(0);
  },
  replace: function(e) {
    var t = this[rt];
    return t.spliceWithArray(0, t.values.length, e);
  },
  /**
   * Converts this array back to a (shallow) javascript structure.
   * For a deep clone use mobx.toJS
   */
  toJS: function() {
    return this.slice();
  },
  toJSON: function() {
    return this.toJS();
  },
  /*
   * functions that do alter the internal structure of the array, (based on lib.es6.d.ts)
   * since these functions alter the inner structure of the array, the have side effects.
   * Because the have side effects, they should not be used in computed function,
   * and for that reason the do not call dependencyState.notifyObserved
   */
  splice: function(e, t) {
    for (var n = [], r = 2; r < arguments.length; r++)
      n[r - 2] = arguments[r];
    var i = this[rt];
    switch (arguments.length) {
      case 0:
        return [];
      case 1:
        return i.spliceWithArray(e);
      case 2:
        return i.spliceWithArray(e, t);
    }
    return i.spliceWithArray(e, t, n);
  },
  spliceWithArray: function(e, t, n) {
    var r = this[rt];
    return r.spliceWithArray(e, t, n);
  },
  push: function() {
    for (var e = [], t = 0; t < arguments.length; t++)
      e[t] = arguments[t];
    var n = this[rt];
    return n.spliceWithArray(n.values.length, 0, e), n.values.length;
  },
  pop: function() {
    return this.splice(Math.max(this[rt].values.length - 1, 0), 1)[0];
  },
  shift: function() {
    return this.splice(0, 1)[0];
  },
  unshift: function() {
    for (var e = [], t = 0; t < arguments.length; t++)
      e[t] = arguments[t];
    var n = this[rt];
    return n.spliceWithArray(0, 0, e), n.values.length;
  },
  reverse: function() {
    process.env.NODE_ENV !== "production" && console.warn("[mobx] `observableArray.reverse()` will not update the array in place. Use `observableArray.slice().reverse()` to suppress this warning and perform the operation on a copy, or `observableArray.replace(observableArray.slice().reverse())` to reverse & update in place");
    var e = this.slice();
    return e.reverse.apply(e, arguments);
  },
  sort: function(e) {
    process.env.NODE_ENV !== "production" && console.warn("[mobx] `observableArray.sort()` will not update the array in place. Use `observableArray.slice().sort()` to suppress this warning and perform the operation on a copy, or `observableArray.replace(observableArray.slice().sort())` to sort & update in place");
    var t = this.slice();
    return t.sort.apply(t, arguments);
  },
  remove: function(e) {
    var t = this[rt], n = t.dehanceValues(t.values).indexOf(e);
    return n > -1 ? (this.splice(n, 1), !0) : !1;
  },
  get: function(e) {
    var t = this[rt];
    if (t) {
      if (e < t.values.length)
        return t.atom.reportObserved(), t.dehanceValue(t.values[e]);
      console.warn("[mobx.array] Attempt to read an array index (" + e + ") that is out of bounds (" + t.values.length + "). Please check length first. Out of bound indices will not be tracked by MobX");
    }
  },
  set: function(e, t) {
    var n = this[rt], r = n.values;
    if (e < r.length) {
      Ps(n.atom);
      var i = r[e];
      if (zi(n)) {
        var o = Fi(n, {
          type: "update",
          object: n.proxy,
          index: e,
          newValue: t
        });
        if (!o)
          return;
        t = o.newValue;
      }
      t = n.enhancer(t, i);
      var a = t !== i;
      a && (r[e] = t, n.notifyArrayChildUpdate(e, t, i));
    } else if (e === r.length)
      n.spliceWithArray(e, 0, [t]);
    else
      throw new Error("[mobx.array] Index out of bounds, " + e + " is larger than " + r.length);
  }
};
[
  "concat",
  "flat",
  "includes",
  "indexOf",
  "join",
  "lastIndexOf",
  "slice",
  "toString",
  "toLocaleString"
].forEach(function(e) {
  typeof Array.prototype[e] == "function" && (oo[e] = function() {
    var t = this[rt];
    t.atom.reportObserved();
    var n = t.dehanceValues(t.values);
    return n[e].apply(n, arguments);
  });
});
["every", "filter", "find", "findIndex", "flatMap", "forEach", "map", "some"].forEach(function(e) {
  typeof Array.prototype[e] == "function" && (oo[e] = function(t, n) {
    var r = this, i = this[rt];
    i.atom.reportObserved();
    var o = i.dehanceValues(i.values);
    return o[e](function(a, s) {
      return t.call(n, a, s, r);
    }, n);
  });
});
["reduce", "reduceRight"].forEach(function(e) {
  oo[e] = function() {
    var t = this, n = this[rt];
    n.atom.reportObserved();
    var r = arguments[0];
    return arguments[0] = function(i, o, a) {
      return o = n.dehanceValue(o), r(i, o, a, t);
    }, n.values[e].apply(n.values, arguments);
  };
});
var k3 = Xo("ObservableArrayAdministration", Ox);
function Yi(e) {
  return Xg(e) && k3(e[rt]);
}
var H_, I3 = {}, ey = (
  /** @class */
  function() {
    function e(t, n, r) {
      if (n === void 0 && (n = Fu), r === void 0 && (r = "ObservableMap@" + cr()), this.enhancer = n, this.name = r, this[H_] = I3, this._keysAtom = Kg(this.name + ".keys()"), this[Symbol.toStringTag] = "Map", typeof Map != "function")
        throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");
      this._data = /* @__PURE__ */ new Map(), this._hasMap = /* @__PURE__ */ new Map(), this.merge(t);
    }
    return e.prototype._has = function(t) {
      return this._data.has(t);
    }, e.prototype.has = function(t) {
      var n = this;
      if (!$e.trackingDerivation)
        return this._has(t);
      var r = this._hasMap.get(t);
      if (!r) {
        var i = r = new xa(this._has(t), Tf, this.name + "." + Fr(t) + "?", !1);
        this._hasMap.set(t, i), mx(i, function() {
          return n._hasMap.delete(t);
        });
      }
      return r.get();
    }, e.prototype.set = function(t, n) {
      var r = this._has(t);
      if (zi(this)) {
        var i = Fi(this, {
          type: r ? "update" : "add",
          object: this,
          newValue: n,
          name: t
        });
        if (!i)
          return this;
        n = i.newValue;
      }
      return r ? this._updateValue(t, n) : this._addValue(t, n), this;
    }, e.prototype.delete = function(t) {
      var n = this;
      if (Ps(this._keysAtom), zi(this)) {
        var r = Fi(this, {
          type: "delete",
          object: this,
          name: t
        });
        if (!r)
          return !1;
      }
      if (this._has(t)) {
        var i = Tn(), o = mi(this), r = o || i ? {
          type: "delete",
          object: this,
          oldValue: this._data.get(t).value,
          name: t
        } : null;
        return i && process.env.NODE_ENV !== "production" && xr(Zt(Zt({}, r), { name: this.name, key: t })), di(function() {
          n._keysAtom.reportChanged(), n._updateHasMapEntry(t, !1);
          var s = n._data.get(t);
          s.setNewValue(void 0), n._data.delete(t);
        }), o && _i(this, r), i && process.env.NODE_ENV !== "production" && Er(), !0;
      }
      return !1;
    }, e.prototype._updateHasMapEntry = function(t, n) {
      var r = this._hasMap.get(t);
      r && r.setNewValue(n);
    }, e.prototype._updateValue = function(t, n) {
      var r = this._data.get(t);
      if (n = r.prepareNewValue(n), n !== $e.UNCHANGED) {
        var i = Tn(), o = mi(this), a = o || i ? {
          type: "update",
          object: this,
          oldValue: r.value,
          name: t,
          newValue: n
        } : null;
        i && process.env.NODE_ENV !== "production" && xr(Zt(Zt({}, a), { name: this.name, key: t })), r.setNewValue(n), o && _i(this, a), i && process.env.NODE_ENV !== "production" && Er();
      }
    }, e.prototype._addValue = function(t, n) {
      var r = this;
      Ps(this._keysAtom), di(function() {
        var s = new xa(n, r.enhancer, r.name + "." + Fr(t), !1);
        r._data.set(t, s), n = s.value, r._updateHasMapEntry(t, !0), r._keysAtom.reportChanged();
      });
      var i = Tn(), o = mi(this), a = o || i ? {
        type: "add",
        object: this,
        name: t,
        newValue: n
      } : null;
      i && process.env.NODE_ENV !== "production" && xr(Zt(Zt({}, a), { name: this.name, key: t })), o && _i(this, a), i && process.env.NODE_ENV !== "production" && Er();
    }, e.prototype.get = function(t) {
      return this.has(t) ? this.dehanceValue(this._data.get(t).get()) : this.dehanceValue(void 0);
    }, e.prototype.dehanceValue = function(t) {
      return this.dehancer !== void 0 ? this.dehancer(t) : t;
    }, e.prototype.keys = function() {
      return this._keysAtom.reportObserved(), this._data.keys();
    }, e.prototype.values = function() {
      var t = this, n = this.keys();
      return bd({
        next: function() {
          var r = n.next(), i = r.done, o = r.value;
          return {
            done: i,
            value: i ? void 0 : t.get(o)
          };
        }
      });
    }, e.prototype.entries = function() {
      var t = this, n = this.keys();
      return bd({
        next: function() {
          var r = n.next(), i = r.done, o = r.value;
          return {
            done: i,
            value: i ? void 0 : [o, t.get(o)]
          };
        }
      });
    }, e.prototype[H_ = rt, Symbol.iterator] = function() {
      return this.entries();
    }, e.prototype.forEach = function(t, n) {
      var r, i;
      try {
        for (var o = ci(this), a = o.next(); !a.done; a = o.next()) {
          var s = fs(a.value, 2), l = s[0], u = s[1];
          t.call(n, u, l, this);
        }
      } catch (c) {
        r = { error: c };
      } finally {
        try {
          a && !a.done && (i = o.return) && i.call(o);
        } finally {
          if (r) throw r.error;
        }
      }
    }, e.prototype.merge = function(t) {
      var n = this;
      return Qn(t) && (t = t.toJS()), di(function() {
        var r = Df(!0);
        try {
          Fa(t) ? Ug(t).forEach(function(i) {
            return n.set(i, t[i]);
          }) : Array.isArray(t) ? t.forEach(function(i) {
            var o = fs(i, 2), a = o[0], s = o[1];
            return n.set(a, s);
          }) : Js(t) ? (t.constructor !== Map && lt("Cannot initialize from classes that inherit from Map: " + t.constructor.name), t.forEach(function(i, o) {
            return n.set(o, i);
          })) : t != null && lt("Cannot initialize map from " + t);
        } finally {
          Rf(r);
        }
      }), this;
    }, e.prototype.clear = function() {
      var t = this;
      di(function() {
        ax(function() {
          var n, r;
          try {
            for (var i = ci(t.keys()), o = i.next(); !o.done; o = i.next()) {
              var a = o.value;
              t.delete(a);
            }
          } catch (s) {
            n = { error: s };
          } finally {
            try {
              o && !o.done && (r = i.return) && r.call(i);
            } finally {
              if (n) throw n.error;
            }
          }
        });
      });
    }, e.prototype.replace = function(t) {
      var n = this;
      return di(function() {
        var r, i, o, a, s = TD(t), l = /* @__PURE__ */ new Map(), u = !1;
        try {
          for (var c = ci(n._data.keys()), d = c.next(); !d.done; d = c.next()) {
            var f = d.value;
            if (!s.has(f)) {
              var h = n.delete(f);
              if (h)
                u = !0;
              else {
                var p = n._data.get(f);
                l.set(f, p);
              }
            }
          }
        } catch (T) {
          r = { error: T };
        } finally {
          try {
            d && !d.done && (i = c.return) && i.call(c);
          } finally {
            if (r) throw r.error;
          }
        }
        try {
          for (var v = ci(s.entries()), g = v.next(); !g.done; g = v.next()) {
            var y = fs(g.value, 2), f = y[0], p = y[1], m = n._data.has(f);
            if (n.set(f, p), n._data.has(f)) {
              var E = n._data.get(f);
              l.set(f, E), m || (u = !0);
            }
          }
        } catch (T) {
          o = { error: T };
        } finally {
          try {
            g && !g.done && (a = v.return) && a.call(v);
          } finally {
            if (o) throw o.error;
          }
        }
        if (!u)
          if (n._data.size !== l.size)
            n._keysAtom.reportChanged();
          else
            for (var w = n._data.keys(), S = l.keys(), _ = w.next(), b = S.next(); !_.done; ) {
              if (_.value !== b.value) {
                n._keysAtom.reportChanged();
                break;
              }
              _ = w.next(), b = S.next();
            }
        n._data = l;
      }), this;
    }, Object.defineProperty(e.prototype, "size", {
      get: function() {
        return this._keysAtom.reportObserved(), this._data.size;
      },
      enumerable: !0,
      configurable: !0
    }), e.prototype.toPOJO = function() {
      var t, n, r = {};
      try {
        for (var i = ci(this), o = i.next(); !o.done; o = i.next()) {
          var a = fs(o.value, 2), s = a[0], l = a[1];
          r[typeof s == "symbol" ? s : Fr(s)] = l;
        }
      } catch (u) {
        t = { error: u };
      } finally {
        try {
          o && !o.done && (n = i.return) && n.call(i);
        } finally {
          if (t) throw t.error;
        }
      }
      return r;
    }, e.prototype.toJS = function() {
      return new Map(this);
    }, e.prototype.toJSON = function() {
      return this.toPOJO();
    }, e.prototype.toString = function() {
      var t = this;
      return this.name + "[{ " + Array.from(this.keys()).map(function(n) {
        return Fr(n) + ": " + ("" + t.get(n));
      }).join(", ") + " }]";
    }, e.prototype.observe = function(t, n) {
      return process.env.NODE_ENV !== "production" && on(n !== !0, "`observe` doesn't support fireImmediately=true in combination with maps."), Vu(this, t);
    }, e.prototype.intercept = function(t) {
      return Hu(this, t);
    }, e;
  }()
), Qn = Xo("ObservableMap", ey), V_, B3 = {}, Ax = (
  /** @class */
  function() {
    function e(t, n, r) {
      if (n === void 0 && (n = Fu), r === void 0 && (r = "ObservableSet@" + cr()), this.name = r, this[V_] = B3, this._data = /* @__PURE__ */ new Set(), this._atom = Kg(this.name), this[Symbol.toStringTag] = "Set", typeof Set != "function")
        throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");
      this.enhancer = function(i, o) {
        return n(i, o, r);
      }, t && this.replace(t);
    }
    return e.prototype.dehanceValue = function(t) {
      return this.dehancer !== void 0 ? this.dehancer(t) : t;
    }, e.prototype.clear = function() {
      var t = this;
      di(function() {
        ax(function() {
          var n, r;
          try {
            for (var i = ci(t._data.values()), o = i.next(); !o.done; o = i.next()) {
              var a = o.value;
              t.delete(a);
            }
          } catch (s) {
            n = { error: s };
          } finally {
            try {
              o && !o.done && (r = i.return) && r.call(i);
            } finally {
              if (n) throw n.error;
            }
          }
        });
      });
    }, e.prototype.forEach = function(t, n) {
      var r, i;
      try {
        for (var o = ci(this), a = o.next(); !a.done; a = o.next()) {
          var s = a.value;
          t.call(n, s, s, this);
        }
      } catch (l) {
        r = { error: l };
      } finally {
        try {
          a && !a.done && (i = o.return) && i.call(o);
        } finally {
          if (r) throw r.error;
        }
      }
    }, Object.defineProperty(e.prototype, "size", {
      get: function() {
        return this._atom.reportObserved(), this._data.size;
      },
      enumerable: !0,
      configurable: !0
    }), e.prototype.add = function(t) {
      var n = this;
      if (Ps(this._atom), zi(this)) {
        var r = Fi(this, {
          type: "add",
          object: this,
          newValue: t
        });
        if (!r)
          return this;
      }
      if (!this.has(t)) {
        di(function() {
          n._data.add(n.enhancer(t, void 0)), n._atom.reportChanged();
        });
        var i = Tn(), o = mi(this), r = o || i ? {
          type: "add",
          object: this,
          newValue: t
        } : null;
        i && process.env.NODE_ENV !== "production" && xr(r), o && _i(this, r), i && process.env.NODE_ENV !== "production" && Er();
      }
      return this;
    }, e.prototype.delete = function(t) {
      var n = this;
      if (zi(this)) {
        var r = Fi(this, {
          type: "delete",
          object: this,
          oldValue: t
        });
        if (!r)
          return !1;
      }
      if (this.has(t)) {
        var i = Tn(), o = mi(this), r = o || i ? {
          type: "delete",
          object: this,
          oldValue: t
        } : null;
        return i && process.env.NODE_ENV !== "production" && xr(Zt(Zt({}, r), { name: this.name })), di(function() {
          n._atom.reportChanged(), n._data.delete(t);
        }), o && _i(this, r), i && process.env.NODE_ENV !== "production" && Er(), !0;
      }
      return !1;
    }, e.prototype.has = function(t) {
      return this._atom.reportObserved(), this._data.has(this.dehanceValue(t));
    }, e.prototype.entries = function() {
      var t = 0, n = Array.from(this.keys()), r = Array.from(this.values());
      return bd({
        next: function() {
          var i = t;
          return t += 1, i < r.length ? { value: [n[i], r[i]], done: !1 } : { done: !0 };
        }
      });
    }, e.prototype.keys = function() {
      return this.values();
    }, e.prototype.values = function() {
      this._atom.reportObserved();
      var t = this, n = 0, r = Array.from(this._data.values());
      return bd({
        next: function() {
          return n < r.length ? { value: t.dehanceValue(r[n++]), done: !1 } : { done: !0 };
        }
      });
    }, e.prototype.replace = function(t) {
      var n = this;
      return qr(t) && (t = t.toJS()), di(function() {
        var r = Df(!0);
        try {
          Array.isArray(t) ? (n.clear(), t.forEach(function(i) {
            return n.add(i);
          })) : zu(t) ? (n.clear(), t.forEach(function(i) {
            return n.add(i);
          })) : t != null && lt("Cannot initialize set from " + t);
        } finally {
          Rf(r);
        }
      }), this;
    }, e.prototype.observe = function(t, n) {
      return process.env.NODE_ENV !== "production" && on(n !== !0, "`observe` doesn't support fireImmediately=true in combination with sets."), Vu(this, t);
    }, e.prototype.intercept = function(t) {
      return Hu(this, t);
    }, e.prototype.toJS = function() {
      return new Set(this);
    }, e.prototype.toString = function() {
      return this.name + "[ " + Array.from(this).join(", ") + " ]";
    }, e.prototype[V_ = rt, Symbol.iterator] = function() {
      return this.values();
    }, e;
  }()
), qr = Xo("ObservableSet", Ax), Nx = (
  /** @class */
  function() {
    function e(t, n, r, i) {
      n === void 0 && (n = /* @__PURE__ */ new Map()), this.target = t, this.values = n, this.name = r, this.defaultEnhancer = i, this.keysAtom = new Qs(r + ".keys");
    }
    return e.prototype.read = function(t) {
      return this.values.get(t).get();
    }, e.prototype.write = function(t, n) {
      var r = this.target, i = this.values.get(t);
      if (i instanceof Ds) {
        i.set(n);
        return;
      }
      if (zi(this)) {
        var o = Fi(this, {
          type: "update",
          object: this.proxy || r,
          name: t,
          newValue: n
        });
        if (!o)
          return;
        n = o.newValue;
      }
      if (n = i.prepareNewValue(n), n !== $e.UNCHANGED) {
        var a = mi(this), s = Tn(), o = a || s ? {
          type: "update",
          object: this.proxy || r,
          oldValue: i.value,
          name: t,
          newValue: n
        } : null;
        s && process.env.NODE_ENV !== "production" && xr(Zt(Zt({}, o), { name: this.name, key: t })), i.setNewValue(n), a && _i(this, o), s && process.env.NODE_ENV !== "production" && Er();
      }
    }, e.prototype.has = function(t) {
      var n = this.pendingKeys || (this.pendingKeys = /* @__PURE__ */ new Map()), r = n.get(t);
      if (r)
        return r.get();
      var i = !!this.values.get(t);
      return r = new xa(i, Tf, this.name + "." + Fr(t) + "?", !1), n.set(t, r), r.get();
    }, e.prototype.addObservableProp = function(t, n, r) {
      r === void 0 && (r = this.defaultEnhancer);
      var i = this.target;
      if (DD(i, t), zi(this)) {
        var o = Fi(this, {
          object: this.proxy || i,
          name: t,
          type: "add",
          newValue: n
        });
        if (!o)
          return;
        n = o.newValue;
      }
      var a = new xa(n, r, this.name + "." + Fr(t), !1);
      this.values.set(t, a), n = a.value, Object.defineProperty(i, t, j3(t)), this.notifyPropertyAddition(t, n);
    }, e.prototype.addComputedProp = function(t, n, r) {
      var i = this.target;
      r.name = r.name || this.name + "." + Fr(n), this.values.set(n, new Ds(r)), (t === i || ex(t, n)) && Object.defineProperty(t, n, z3(n));
    }, e.prototype.remove = function(t) {
      if (this.values.has(t)) {
        var n = this.target;
        if (zi(this)) {
          var r = Fi(this, {
            object: this.proxy || n,
            name: t,
            type: "remove"
          });
          if (!r)
            return;
        }
        try {
          gi();
          var i = mi(this), o = Tn(), a = this.values.get(t), s = a && a.get();
          if (a && a.set(void 0), this.keysAtom.reportChanged(), this.values.delete(t), this.pendingKeys) {
            var l = this.pendingKeys.get(t);
            l && l.set(!1);
          }
          delete this.target[t];
          var r = i || o ? {
            type: "remove",
            object: this.proxy || n,
            oldValue: s,
            name: t
          } : null;
          o && process.env.NODE_ENV !== "production" && xr(Zt(Zt({}, r), { name: this.name, key: t })), i && _i(this, r), o && process.env.NODE_ENV !== "production" && Er();
        } finally {
          yi();
        }
      }
    }, e.prototype.illegalAccess = function(t, n) {
      console.warn("Property '" + n + "' of '" + t + "' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner");
    }, e.prototype.observe = function(t, n) {
      return process.env.NODE_ENV !== "production" && on(n !== !0, "`observe` doesn't support the fire immediately property for observable objects."), Vu(this, t);
    }, e.prototype.intercept = function(t) {
      return Hu(this, t);
    }, e.prototype.notifyPropertyAddition = function(t, n) {
      var r = mi(this), i = Tn(), o = r || i ? {
        type: "add",
        object: this.proxy || this.target,
        name: t,
        newValue: n
      } : null;
      if (i && process.env.NODE_ENV !== "production" && xr(Zt(Zt({}, o), { name: this.name, key: t })), r && _i(this, o), i && process.env.NODE_ENV !== "production" && Er(), this.pendingKeys) {
        var a = this.pendingKeys.get(t);
        a && a.set(!0);
      }
      this.keysAtom.reportChanged();
    }, e.prototype.getKeys = function() {
      var t, n;
      this.keysAtom.reportObserved();
      var r = [];
      try {
        for (var i = ci(this.values), o = i.next(); !o.done; o = i.next()) {
          var a = fs(o.value, 2), s = a[0], l = a[1];
          l instanceof xa && r.push(s);
        }
      } catch (u) {
        t = { error: u };
      } finally {
        try {
          o && !o.done && (n = i.return) && n.call(i);
        } finally {
          if (t) throw t.error;
        }
      }
      return r;
    }, e;
  }()
);
function ty(e, t, n) {
  if (t === void 0 && (t = ""), n === void 0 && (n = Fu), Object.prototype.hasOwnProperty.call(e, rt))
    return e[rt];
  process.env.NODE_ENV !== "production" && on(Object.isExtensible(e), "Cannot make the designated object observable; it is not extensible"), Fa(e) || (t = (e.constructor.name || "ObservableObject") + "@" + cr()), t || (t = "ObservableObject@" + cr());
  var r = new Nx(e, /* @__PURE__ */ new Map(), Fr(t), n);
  return Zs(e, rt, r), r;
}
var W_ = /* @__PURE__ */ Object.create(null), G_ = /* @__PURE__ */ Object.create(null);
function j3(e) {
  return W_[e] || (W_[e] = {
    configurable: !0,
    enumerable: !0,
    get: function() {
      return this[rt].read(e);
    },
    set: function(t) {
      this[rt].write(e, t);
    }
  });
}
function X_(e) {
  var t = e[rt];
  return t || (Aa(e), e[rt]);
}
function z3(e) {
  return G_[e] || (G_[e] = {
    configurable: $e.computedConfigurable,
    enumerable: !1,
    get: function() {
      return X_(this).read(e);
    },
    set: function(t) {
      X_(this).write(e, t);
    }
  });
}
var F3 = Xo("ObservableObjectAdministration", Nx);
function Ai(e) {
  return Xg(e) ? (Aa(e), F3(e[rt])) : !1;
}
function Bo(e, t) {
  if (typeof e == "object" && e !== null) {
    if (Yi(e))
      return t !== void 0 && lt(process.env.NODE_ENV !== "production" && "It is not possible to get index atoms from arrays"), e[rt].atom;
    if (qr(e))
      return e[rt];
    if (Qn(e)) {
      var n = e;
      if (t === void 0)
        return n._keysAtom;
      var r = n._data.get(t) || n._hasMap.get(t);
      return r || lt(process.env.NODE_ENV !== "production" && "the entry '" + t + "' does not exist in the observable map '" + fv(e) + "'"), r;
    }
    if (Aa(e), t && !e[rt] && e[t], Ai(e)) {
      if (!t)
        return lt(process.env.NODE_ENV !== "production" && "please specify a property");
      var r = e[rt].values.get(t);
      return r || lt(process.env.NODE_ENV !== "production" && "no observable property '" + t + "' found on the observable object '" + fv(e) + "'"), r;
    }
    if (Yg(e) || Rs(e) || _d(e))
      return e;
  } else if (typeof e == "function" && _d(e[rt]))
    return e[rt];
  return lt(process.env.NODE_ENV !== "production" && "Cannot obtain atom from " + e);
}
function Lf(e, t) {
  if (e || lt("Expecting some object"), t !== void 0)
    return Lf(Bo(e, t));
  if (Yg(e) || Rs(e) || _d(e) || Qn(e) || qr(e))
    return e;
  if (Aa(e), e[rt])
    return e[rt];
  lt(process.env.NODE_ENV !== "production" && "Cannot obtain administration from " + e);
}
function fv(e, t) {
  var n;
  return t !== void 0 ? n = Bo(e, t) : Ai(e) || Qn(e) || qr(e) ? n = Lf(e) : n = Bo(e), n.name;
}
var U_ = Object.prototype.toString;
function ny(e, t, n) {
  return n === void 0 && (n = -1), hv(e, t, n);
}
function hv(e, t, n, r, i) {
  if (e === t)
    return e !== 0 || 1 / e === 1 / t;
  if (e == null || t == null)
    return !1;
  if (e !== e)
    return t !== t;
  var o = typeof e;
  if (o !== "function" && o !== "object" && typeof t != "object")
    return !1;
  var a = U_.call(e);
  if (a !== U_.call(t))
    return !1;
  switch (a) {
    case "[object RegExp]":
    case "[object String]":
      return "" + e == "" + t;
    case "[object Number]":
      return +e != +e ? +t != +t : +e == 0 ? 1 / +e === 1 / t : +e == +t;
    case "[object Date]":
    case "[object Boolean]":
      return +e == +t;
    case "[object Symbol]":
      return typeof Symbol < "u" && Symbol.valueOf.call(e) === Symbol.valueOf.call(t);
    case "[object Map]":
    case "[object Set]":
      n >= 0 && n++;
      break;
  }
  e = Y_(e), t = Y_(t);
  var s = a === "[object Array]";
  if (!s) {
    if (typeof e != "object" || typeof t != "object")
      return !1;
    var l = e.constructor, u = t.constructor;
    if (l !== u && !(typeof l == "function" && l instanceof l && typeof u == "function" && u instanceof u) && "constructor" in e && "constructor" in t)
      return !1;
  }
  if (n === 0)
    return !1;
  n < 0 && (n = -1), r = r || [], i = i || [];
  for (var c = r.length; c--; )
    if (r[c] === e)
      return i[c] === t;
  if (r.push(e), i.push(t), s) {
    if (c = e.length, c !== t.length)
      return !1;
    for (; c--; )
      if (!hv(e[c], t[c], n - 1, r, i))
        return !1;
  } else {
    var d = Object.keys(e), f = void 0;
    if (c = d.length, Object.keys(t).length !== c)
      return !1;
    for (; c--; )
      if (f = d[c], !(H3(t, f) && hv(e[f], t[f], n - 1, r, i)))
        return !1;
  }
  return r.pop(), i.pop(), !0;
}
function Y_(e) {
  return Yi(e) ? e.slice() : Js(e) || Qn(e) || zu(e) || qr(e) ? Array.from(e.entries()) : e;
}
function H3(e, t) {
  return Object.prototype.hasOwnProperty.call(e, t);
}
function bd(e) {
  return e[Symbol.iterator] = V3, e;
}
function V3() {
  return this;
}
if (typeof Proxy > "u" || typeof Symbol > "u")
  throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");
try {
  process.env.NODE_ENV;
} catch {
  var K_ = md();
  typeof process > "u" && (K_.process = {}), K_.process.env = {};
}
(function() {
  function e() {
  }
  if (e.name !== "testCodeMinification" && process.env.NODE_ENV !== "production" && typeof process < "u" && process.env.IGNORE_MOBX_MINIFY_WARNING !== "true") {
    var t = ["process", "env", "NODE_ENV"].join(".");
    console.warn("[mobx] you are running a minified build, but '" + t + "' was not set to 'production' in your bundler. This results in an unnecessarily large and slow bundle");
  }
})();
typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__ == "object" && __MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({
  spy: f3,
  extras: {
    getDebugName: fv
  },
  $mobx: rt
});
function W3(e) {
  return !(e.prototype && e.prototype.render) && !Et.isPrototypeOf(e);
}
function Mx(e) {
  var t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, n = t.prefix, r = n === void 0 ? "" : n, i = t.suffix, o = i === void 0 ? "" : i, a = e.displayName || e.name || e.constructor && e.constructor.name || "<component>";
  return r + a + o;
}
var q_ = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
  return typeof e;
} : function(e) {
  return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
}, Tx = function(e, t) {
  if (!(e instanceof t))
    throw new TypeError("Cannot call a class as a function");
}, Px = /* @__PURE__ */ function() {
  function e(t, n) {
    for (var r = 0; r < n.length; r++) {
      var i = n[r];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i);
    }
  }
  return function(t, n, r) {
    return n && e(t.prototype, n), r && e(t, r), t;
  };
}(), Dx = function(e, t) {
  if (typeof t != "function" && t !== null)
    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
  e.prototype = Object.create(t && t.prototype, {
    constructor: {
      value: e,
      enumerable: !1,
      writable: !0,
      configurable: !0
    }
  }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
}, Rx = function(e, t) {
  if (!e)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t && (typeof t == "object" || typeof t == "function") ? t : e;
}, Z_ = console;
function G3(e) {
  var t = uv().allowStateChanges;
  return uv().allowStateChanges = e, t;
}
function X3(e) {
  uv().allowStateChanges = e;
}
function U3(e, t, n, r, i) {
  var o = G3(e), a = void 0;
  try {
    a = t(n, r, i);
  } finally {
    X3(o);
  }
  return a;
}
function J_(e, t) {
  var n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1, r = e[t], i = Lx[t], o = r ? n === !0 ? function() {
    i.apply(this, arguments), r.apply(this, arguments);
  } : function() {
    r.apply(this, arguments), i.apply(this, arguments);
  } : i;
  e[t] = o;
}
function Q_(e, t) {
  if (e == null || t == null || (typeof e > "u" ? "undefined" : q_(e)) !== "object" || (typeof t > "u" ? "undefined" : q_(t)) !== "object")
    return e !== t;
  var n = Object.keys(e);
  if (n.length !== Object.keys(t).length)
    return !0;
  for (var r = void 0, i = n.length - 1; r = n[i]; i--)
    if (t[r] !== e[r])
      return !0;
  return !1;
}
var Lx = {
  componentWillMount: function() {
    var t = this, n = Mx(this), r = !1, i = !1;
    function o(d) {
      var f = this[d], h = Kg("reactive " + d);
      Object.defineProperty(this, d, {
        configurable: !0,
        enumerable: !0,
        get: function() {
          return h.reportObserved(), f;
        },
        set: function(v) {
          !i && Q_(f, v) ? (f = v, r = !0, h.reportChanged(), r = !1) : f = v;
        }
      });
    }
    o.call(this, "props"), o.call(this, "state");
    var a = this.render.bind(this), s = null, l = !1, u = function() {
      return s = new bu(n + ".render()", function() {
        if (!l && (l = !0, typeof t.componentWillReact == "function" && t.componentWillReact(), t.__$mobxIsUnmounted !== !0)) {
          var f = !0;
          try {
            i = !0, r || Et.prototype.forceUpdate.call(t), f = !1;
          } finally {
            i = !1, f && s.dispose();
          }
        }
      }), s.reactComponent = t, c.$mobx = s, t.render = c, c(t.props, t.state, t.context);
    }, c = function(f, h, p) {
      l = !1;
      var v = void 0, g = void 0;
      if (s.track(function() {
        try {
          g = U3(!1, a, f, h, p);
        } catch (y) {
          v = y;
        }
      }), v)
        throw v;
      return g;
    };
    this.render = u;
  },
  componentWillUnmount: function() {
    this.render.$mobx && this.render.$mobx.dispose(), this.__$mobxIsUnmounted = !0;
  },
  componentDidMount: function() {
  },
  componentDidUpdate: function() {
  },
  shouldComponentUpdate: function(t, n) {
    return this.state !== n ? !0 : Q_(this.props, t);
  }
};
function ry(e) {
  if (arguments.length > 1 && Z_.warn('Mobx observer: Using observer to inject stores is not supported. Use `@connect(["store1", "store2"]) ComponentClass instead or preferably, use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))``'), e.isMobxInjector === !0 && Z_.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"), W3(e)) {
    var t, n;
    return ry((n = t = function(i) {
      Dx(o, i);
      function o() {
        return Tx(this, o), Rx(this, (o.__proto__ || Object.getPrototypeOf(o)).apply(this, arguments));
      }
      return Px(o, [{
        key: "render",
        value: function() {
          return e.call(this, this.props, this.context);
        }
      }]), o;
    }(Et), t.displayName = Mx(e), n));
  }
  if (!e)
    throw new Error("Please pass a valid component to 'observer'");
  var r = e.prototype || e;
  return Y3(r), e.isMobXReactObserver = !0, e;
}
function Y3(e) {
  J_(e, "componentWillMount", !0), J_(e, "componentDidMount"), e.shouldComponentUpdate || (e.shouldComponentUpdate = Lx.shouldComponentUpdate);
}
var K3 = ry(function(e) {
  var t = e.children;
  return t[0]();
});
K3.displayName = "Observer";
var q3 = typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function Z3(e, t) {
  return t = { exports: {} }, e(t, t.exports), t.exports;
}
Z3(function(e, t) {
  (function(n, r) {
    e.exports = r();
  })(q3, function() {
    var n = {
      childContextTypes: !0,
      contextTypes: !0,
      defaultProps: !0,
      displayName: !0,
      getDefaultProps: !0,
      getDerivedStateFromProps: !0,
      mixins: !0,
      propTypes: !0,
      type: !0
    }, r = {
      name: !0,
      length: !0,
      prototype: !0,
      caller: !0,
      callee: !0,
      arguments: !0,
      arity: !0
    }, i = Object.defineProperty, o = Object.getOwnPropertyNames, a = Object.getOwnPropertySymbols, s = Object.getOwnPropertyDescriptor, l = Object.getPrototypeOf, u = l && l(Object);
    return function c(d, f, h) {
      if (typeof f != "string") {
        if (u) {
          var p = l(f);
          p && p !== u && c(d, p, h);
        }
        var v = o(f);
        a && (v = v.concat(a(f)));
        for (var g = 0; g < v.length; ++g) {
          var y = v[g];
          if (!n[y] && !r[y] && (!h || !h[y])) {
            var m = s(f, y);
            try {
              i(d, y, m);
            } catch {
            }
          }
        }
        return d;
      }
      return d;
    };
  });
});
var e0 = { children: !0, key: !0, ref: !0 }, t0 = console;
(function(e) {
  Dx(t, e);
  function t() {
    return Tx(this, t), Rx(this, (t.__proto__ || Object.getPrototypeOf(t)).apply(this, arguments));
  }
  return Px(t, [{
    key: "render",
    value: function(r) {
      var i = r.children;
      return i.length > 1 ? q(
        "div",
        null,
        " ",
        i,
        " "
      ) : i[0];
    }
  }, {
    key: "getChildContext",
    value: function() {
      var r = {}, i = this.context.mobxStores;
      if (i)
        for (var o in i)
          r[o] = i[o];
      for (var a in this.props)
        !e0[a] && a !== "suppressChangedStoreWarning" && (r[a] = this.props[a]);
      return {
        mobxStores: r
      };
    }
  }, {
    key: "componentWillReceiveProps",
    value: function(r) {
      if (Object.keys(r).length !== Object.keys(this.props).length && t0.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"), !r.suppressChangedStoreWarning)
        for (var i in r)
          !e0[i] && this.props[i] !== r[i] && t0.warn("MobX Provider: Provided store '" + i + "' has changed. Please avoid replacing stores as the change might not propagate to all children");
    }
  }]), t;
})(Et);
if (!Et)
  throw new Error("mobx-preact requires Preact to be available");
var $i, cp, n0, $x = [], An = _t, r0 = An.__b, i0 = An.__r, o0 = An.diffed, a0 = An.__c, s0 = An.unmount, l0 = An.__;
function J3() {
  for (var e; e = $x.shift(); ) if (e.__P && e.__H) try {
    e.__H.__h.forEach(Zc), e.__H.__h.forEach(pv), e.__H.__h = [];
  } catch (t) {
    e.__H.__h = [], An.__e(t, e.__v);
  }
}
An.__b = function(e) {
  $i = null, r0 && r0(e);
}, An.__ = function(e, t) {
  e && t.__k && t.__k.__m && (e.__m = t.__k.__m), l0 && l0(e, t);
}, An.__r = function(e) {
  i0 && i0(e);
  var t = ($i = e.__c).__H;
  t && (cp === $i ? (t.__h = [], $i.__h = [], t.__.forEach(function(n) {
    n.__N && (n.__ = n.__N), n.i = n.__N = void 0;
  })) : (t.__h.forEach(Zc), t.__h.forEach(pv), t.__h = [])), cp = $i;
}, An.diffed = function(e) {
  o0 && o0(e);
  var t = e.__c;
  t && t.__H && (t.__H.__h.length && ($x.push(t) !== 1 && n0 === An.requestAnimationFrame || ((n0 = An.requestAnimationFrame) || Q3)(J3)), t.__H.__.forEach(function(n) {
    n.i && (n.__H = n.i), n.i = void 0;
  })), cp = $i = null;
}, An.__c = function(e, t) {
  t.some(function(n) {
    try {
      n.__h.forEach(Zc), n.__h = n.__h.filter(function(r) {
        return !r.__ || pv(r);
      });
    } catch (r) {
      t.some(function(i) {
        i.__h && (i.__h = []);
      }), t = [], An.__e(r, n.__v);
    }
  }), a0 && a0(e, t);
}, An.unmount = function(e) {
  s0 && s0(e);
  var t, n = e.__c;
  n && n.__H && (n.__H.__.forEach(function(r) {
    try {
      Zc(r);
    } catch (i) {
      t = i;
    }
  }), n.__H = void 0, t && An.__e(t, n.__v));
};
var u0 = typeof requestAnimationFrame == "function";
function Q3(e) {
  var t, n = function() {
    clearTimeout(r), u0 && cancelAnimationFrame(t), setTimeout(e);
  }, r = setTimeout(n, 100);
  u0 && (t = requestAnimationFrame(n));
}
function Zc(e) {
  var t = $i, n = e.__c;
  typeof n == "function" && (e.__c = void 0, n()), $i = t;
}
function pv(e) {
  var t = $i;
  e.__c = e.__(), $i = t;
}
function c0(e, t) {
  for (var n in e) if (n !== "__source" && !(n in t)) return !0;
  for (var r in t) if (r !== "__source" && e[r] !== t[r]) return !0;
  return !1;
}
function d0(e, t) {
  this.props = e, this.context = t;
}
(d0.prototype = new Et()).isPureReactComponent = !0, d0.prototype.shouldComponentUpdate = function(e, t) {
  return c0(this.props, e) || c0(this.state, t);
};
var f0 = _t.__b;
_t.__b = function(e) {
  e.type && e.type.__f && e.ref && (e.props.ref = e.ref, e.ref = null), f0 && f0(e);
};
var e4 = _t.__e;
_t.__e = function(e, t, n, r) {
  if (e.then) {
    for (var i, o = t; o = o.__; ) if ((i = o.__c) && i.__c) return t.__e == null && (t.__e = n.__e, t.__k = n.__k), i.__c(e, t);
  }
  e4(e, t, n, r);
};
var h0 = _t.unmount;
function kx(e, t, n) {
  return e && (e.__c && e.__c.__H && (e.__c.__H.__.forEach(function(r) {
    typeof r.__c == "function" && r.__c();
  }), e.__c.__H = null), (e = function(r, i) {
    for (var o in i) r[o] = i[o];
    return r;
  }({}, e)).__c != null && (e.__c.__P === n && (e.__c.__P = t), e.__c = null), e.__k = e.__k && e.__k.map(function(r) {
    return kx(r, t, n);
  })), e;
}
function Ix(e, t, n) {
  return e && n && (e.__v = null, e.__k = e.__k && e.__k.map(function(r) {
    return Ix(r, t, n);
  }), e.__c && e.__c.__P === t && (e.__e && n.appendChild(e.__e), e.__c.__e = !0, e.__c.__P = n)), e;
}
function dp() {
  this.__u = 0, this.o = null, this.__b = null;
}
function Bx(e) {
  var t = e.__.__c;
  return t && t.__a && t.__a(e);
}
function yc() {
  this.i = null, this.l = null;
}
_t.unmount = function(e) {
  var t = e.__c;
  t && t.__R && t.__R(), t && 32 & e.__u && (e.type = null), h0 && h0(e);
}, (dp.prototype = new Et()).__c = function(e, t) {
  var n = t.__c, r = this;
  r.o == null && (r.o = []), r.o.push(n);
  var i = Bx(r.__v), o = !1, a = function() {
    o || (o = !0, n.__R = null, i ? i(s) : s());
  };
  n.__R = a;
  var s = function() {
    if (!--r.__u) {
      if (r.state.__a) {
        var l = r.state.__a;
        r.__v.__k[0] = Ix(l, l.__c.__P, l.__c.__O);
      }
      var u;
      for (r.setState({ __a: r.__b = null }); u = r.o.pop(); ) u.forceUpdate();
    }
  };
  r.__u++ || 32 & t.__u || r.setState({ __a: r.__b = r.__v.__k[0] }), e.then(a, a);
}, dp.prototype.componentWillUnmount = function() {
  this.o = [];
}, dp.prototype.render = function(e, t) {
  if (this.__b) {
    if (this.__v.__k) {
      var n = document.createElement("div"), r = this.__v.__k[0].__c;
      this.__v.__k[0] = kx(this.__b, n, r.__O = r.__P);
    }
    this.__b = null;
  }
  var i = t.__a && q(Oa, null, e.fallback);
  return i && (i.__u &= -33), [q(Oa, null, t.__a ? null : e.children), i];
};
var p0 = function(e, t, n) {
  if (++n[1] === n[0] && e.l.delete(t), e.props.revealOrder && (e.props.revealOrder[0] !== "t" || !e.l.size)) for (n = e.i; n; ) {
    for (; n.length > 3; ) n.pop()();
    if (n[1] < n[0]) break;
    e.i = n = n[2];
  }
};
(yc.prototype = new Et()).__a = function(e) {
  var t = this, n = Bx(t.__v), r = t.l.get(e);
  return r[0]++, function(i) {
    var o = function() {
      t.props.revealOrder ? (r.push(i), p0(t, e, r)) : i();
    };
    n ? n(o) : o();
  };
}, yc.prototype.render = function(e) {
  this.i = null, this.l = /* @__PURE__ */ new Map();
  var t = fd(e.children);
  e.revealOrder && e.revealOrder[0] === "b" && t.reverse();
  for (var n = t.length; n--; ) this.l.set(t[n], this.i = [1, 0, this.i]);
  return e.children;
}, yc.prototype.componentDidUpdate = yc.prototype.componentDidMount = function() {
  var e = this;
  this.l.forEach(function(t, n) {
    p0(e, n, t);
  });
};
var t4 = typeof Symbol < "u" && Symbol.for && Symbol.for("react.element") || 60103, n4 = /^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/, r4 = /^on(Ani|Tra|Tou|BeforeInp|Compo)/, i4 = /[A-Z0-9]/g, o4 = typeof document < "u", a4 = function(e) {
  return (typeof Symbol < "u" && typeof Symbol() == "symbol" ? /fil|che|rad/ : /fil|che|ra/).test(e);
};
function s4(e, t, n) {
  return t.__k == null && (t.textContent = ""), OD(e, t), typeof n == "function" && n(), e ? e.__c : null;
}
Et.prototype.isReactComponent = {}, ["componentWillMount", "componentWillReceiveProps", "componentWillUpdate"].forEach(function(e) {
  Object.defineProperty(Et.prototype, e, { configurable: !0, get: function() {
    return this["UNSAFE_" + e];
  }, set: function(t) {
    Object.defineProperty(this, e, { configurable: !0, writable: !0, value: t });
  } });
});
var v0 = _t.event;
function l4() {
}
function u4() {
  return this.cancelBubble;
}
function c4() {
  return this.defaultPrevented;
}
_t.event = function(e) {
  return v0 && (e = v0(e)), e.persist = l4, e.isPropagationStopped = u4, e.isDefaultPrevented = c4, e.nativeEvent = e;
};
var d4 = { enumerable: !1, configurable: !0, get: function() {
  return this.class;
} }, g0 = _t.vnode;
_t.vnode = function(e) {
  typeof e.type == "string" && function(t) {
    var n = t.props, r = t.type, i = {}, o = r.indexOf("-") === -1;
    for (var a in n) {
      var s = n[a];
      if (!(a === "value" && "defaultValue" in n && s == null || o4 && a === "children" && r === "noscript" || a === "class" || a === "className")) {
        var l = a.toLowerCase();
        a === "defaultValue" && "value" in n && n.value == null ? a = "value" : a === "download" && s === !0 ? s = "" : l === "translate" && s === "no" ? s = !1 : l[0] === "o" && l[1] === "n" ? l === "ondoubleclick" ? a = "ondblclick" : l !== "onchange" || r !== "input" && r !== "textarea" || a4(n.type) ? l === "onfocus" ? a = "onfocusin" : l === "onblur" ? a = "onfocusout" : r4.test(a) && (a = l) : l = a = "oninput" : o && n4.test(a) ? a = a.replace(i4, "-$&").toLowerCase() : s === null && (s = void 0), l === "oninput" && i[a = l] && (a = "oninputCapture"), i[a] = s;
      }
    }
    r == "select" && i.multiple && Array.isArray(i.value) && (i.value = fd(n.children).forEach(function(u) {
      u.props.selected = i.value.indexOf(u.props.value) != -1;
    })), r == "select" && i.defaultValue != null && (i.value = fd(n.children).forEach(function(u) {
      u.props.selected = i.multiple ? i.defaultValue.indexOf(u.props.value) != -1 : i.defaultValue == u.props.value;
    })), n.class && !n.className ? (i.class = n.class, Object.defineProperty(i, "className", d4)) : (n.className && !n.class || n.class && n.className) && (i.class = i.className = n.className), t.props = i;
  }(e), e.$$typeof = t4, g0 && g0(e);
};
var y0 = _t.__r;
_t.__r = function(e) {
  y0 && y0(e), e.__c;
};
var m0 = _t.diffed;
_t.diffed = function(e) {
  m0 && m0(e);
  var t = e.props, n = e.__e;
  n != null && e.type === "textarea" && "value" in t && t.value !== n.value && (n.value = t.value == null ? "" : t.value);
};
var f4 = 0;
function Q(e, t, n, r, i, o) {
  t || (t = {});
  var a, s, l = t;
  "ref" in t && (a = t.ref, delete t.ref);
  var u = { type: e, props: l, key: n, ref: a, __k: null, __: null, __b: 0, __e: null, __d: void 0, __c: null, constructor: void 0, __v: --f4, __i: -1, __u: 0, __source: i, __self: o };
  if (typeof e == "function" && (a = e.defaultProps)) for (s in a) l[s] === void 0 && (l[s] = a[s]);
  return _t.vnode && _t.vnode(u), u;
}
var jx = typeof global == "object" && global && global.Object === Object && global, h4 = typeof self == "object" && self && self.Object === Object && self, En = jx || h4 || Function("return this")(), Vn = En.Symbol, zx = Object.prototype, p4 = zx.hasOwnProperty, v4 = zx.toString, El = Vn ? Vn.toStringTag : void 0;
function g4(e) {
  var t = p4.call(e, El), n = e[El];
  try {
    e[El] = void 0;
    var r = !0;
  } catch {
  }
  var i = v4.call(e);
  return r && (t ? e[El] = n : delete e[El]), i;
}
var y4 = Object.prototype, m4 = y4.toString;
function _4(e) {
  return m4.call(e);
}
var b4 = "[object Null]", w4 = "[object Undefined]", _0 = Vn ? Vn.toStringTag : void 0;
function er(e) {
  return e == null ? e === void 0 ? w4 : b4 : _0 && _0 in Object(e) ? g4(e) : _4(e);
}
function fn(e) {
  return e != null && typeof e == "object";
}
var x4 = "[object Symbol]";
function Ar(e) {
  return typeof e == "symbol" || fn(e) && er(e) == x4;
}
var E4 = NaN;
function b0(e) {
  return typeof e == "number" ? e : Ar(e) ? E4 : +e;
}
function cn(e, t) {
  for (var n = -1, r = e == null ? 0 : e.length, i = Array(r); ++n < r; )
    i[n] = t(e[n], n, e);
  return i;
}
var ut = Array.isArray, S4 = 1 / 0, w0 = Vn ? Vn.prototype : void 0, x0 = w0 ? w0.toString : void 0;
function Nr(e) {
  if (typeof e == "string")
    return e;
  if (ut(e))
    return cn(e, Nr) + "";
  if (Ar(e))
    return x0 ? x0.call(e) : "";
  var t = e + "";
  return t == "0" && 1 / e == -S4 ? "-0" : t;
}
function $f(e, t) {
  return function(n, r) {
    var i;
    if (n === void 0 && r === void 0)
      return t;
    if (n !== void 0 && (i = n), r !== void 0) {
      if (i === void 0)
        return r;
      typeof n == "string" || typeof r == "string" ? (n = Nr(n), r = Nr(r)) : (n = b0(n), r = b0(r)), i = e(n, r);
    }
    return i;
  };
}
var C4 = $f(function(e, t) {
  return e + t;
}, 0), O4 = /\s/;
function Fx(e) {
  for (var t = e.length; t-- && O4.test(e.charAt(t)); )
    ;
  return t;
}
var A4 = /^\s+/;
function Hx(e) {
  return e && e.slice(0, Fx(e) + 1).replace(A4, "");
}
function an(e) {
  var t = typeof e;
  return e != null && (t == "object" || t == "function");
}
var E0 = NaN, N4 = /^[-+]0x[0-9a-f]+$/i, M4 = /^0b[01]+$/i, T4 = /^0o[0-7]+$/i, P4 = parseInt;
function Xr(e) {
  if (typeof e == "number")
    return e;
  if (Ar(e))
    return E0;
  if (an(e)) {
    var t = typeof e.valueOf == "function" ? e.valueOf() : e;
    e = an(t) ? t + "" : t;
  }
  if (typeof e != "string")
    return e === 0 ? e : +e;
  e = Hx(e);
  var n = M4.test(e);
  return n || T4.test(e) ? P4(e.slice(2), n ? 2 : 8) : N4.test(e) ? E0 : +e;
}
var S0 = 1 / 0, D4 = 17976931348623157e292;
function uo(e) {
  if (!e)
    return e === 0 ? e : 0;
  if (e = Xr(e), e === S0 || e === -S0) {
    var t = e < 0 ? -1 : 1;
    return t * D4;
  }
  return e === e ? e : 0;
}
function yt(e) {
  var t = uo(e), n = t % 1;
  return t === t ? n ? t - n : t : 0;
}
var R4 = "Expected a function";
function L4(e, t) {
  if (typeof t != "function")
    throw new TypeError(R4);
  return e = yt(e), function() {
    if (--e < 1)
      return t.apply(this, arguments);
  };
}
function tr(e) {
  return e;
}
var $4 = "[object AsyncFunction]", k4 = "[object Function]", I4 = "[object GeneratorFunction]", B4 = "[object Proxy]";
function po(e) {
  if (!an(e))
    return !1;
  var t = er(e);
  return t == k4 || t == I4 || t == $4 || t == B4;
}
var Jc = En["__core-js_shared__"], C0 = function() {
  var e = /[^.]+$/.exec(Jc && Jc.keys && Jc.keys.IE_PROTO || "");
  return e ? "Symbol(src)_1." + e : "";
}();
function j4(e) {
  return !!C0 && C0 in e;
}
var z4 = Function.prototype, F4 = z4.toString;
function Ha(e) {
  if (e != null) {
    try {
      return F4.call(e);
    } catch {
    }
    try {
      return e + "";
    } catch {
    }
  }
  return "";
}
var H4 = /[\\^$.*+?()[\]{}|]/g, V4 = /^\[object .+?Constructor\]$/, W4 = Function.prototype, G4 = Object.prototype, X4 = W4.toString, U4 = G4.hasOwnProperty, Y4 = RegExp(
  "^" + X4.call(U4).replace(H4, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
);
function Vx(e) {
  if (!an(e) || j4(e))
    return !1;
  var t = po(e) ? Y4 : V4;
  return t.test(Ha(e));
}
function K4(e, t) {
  return e == null ? void 0 : e[t];
}
function Va(e, t) {
  var n = K4(e, t);
  return Vx(n) ? n : void 0;
}
var wu = Va(En, "WeakMap"), wd = wu && new wu(), Wx = wd ? function(e, t) {
  return wd.set(e, t), e;
} : tr, O0 = Object.create, tl = /* @__PURE__ */ function() {
  function e() {
  }
  return function(t) {
    if (!an(t))
      return {};
    if (O0)
      return O0(t);
    e.prototype = t;
    var n = new e();
    return e.prototype = void 0, n;
  };
}();
function xu(e) {
  return function() {
    var t = arguments;
    switch (t.length) {
      case 0:
        return new e();
      case 1:
        return new e(t[0]);
      case 2:
        return new e(t[0], t[1]);
      case 3:
        return new e(t[0], t[1], t[2]);
      case 4:
        return new e(t[0], t[1], t[2], t[3]);
      case 5:
        return new e(t[0], t[1], t[2], t[3], t[4]);
      case 6:
        return new e(t[0], t[1], t[2], t[3], t[4], t[5]);
      case 7:
        return new e(t[0], t[1], t[2], t[3], t[4], t[5], t[6]);
    }
    var n = tl(e.prototype), r = e.apply(n, t);
    return an(r) ? r : n;
  };
}
var q4 = 1;
function Z4(e, t, n) {
  var r = t & q4, i = xu(e);
  function o() {
    var a = this && this !== En && this instanceof o ? i : e;
    return a.apply(r ? n : this, arguments);
  }
  return o;
}
function Mr(e, t, n) {
  switch (n.length) {
    case 0:
      return e.call(t);
    case 1:
      return e.call(t, n[0]);
    case 2:
      return e.call(t, n[0], n[1]);
    case 3:
      return e.call(t, n[0], n[1], n[2]);
  }
  return e.apply(t, n);
}
var J4 = Math.max;
function Gx(e, t, n, r) {
  for (var i = -1, o = e.length, a = n.length, s = -1, l = t.length, u = J4(o - a, 0), c = Array(l + u), d = !r; ++s < l; )
    c[s] = t[s];
  for (; ++i < a; )
    (d || i < o) && (c[n[i]] = e[i]);
  for (; u--; )
    c[s++] = e[i++];
  return c;
}
var Q4 = Math.max;
function Xx(e, t, n, r) {
  for (var i = -1, o = e.length, a = -1, s = n.length, l = -1, u = t.length, c = Q4(o - s, 0), d = Array(c + u), f = !r; ++i < c; )
    d[i] = e[i];
  for (var h = i; ++l < u; )
    d[h + l] = t[l];
  for (; ++a < s; )
    (f || i < o) && (d[h + n[a]] = e[i++]);
  return d;
}
function eR(e, t) {
  for (var n = e.length, r = 0; n--; )
    e[n] === t && ++r;
  return r;
}
function kf() {
}
var tR = 4294967295;
function Tt(e) {
  this.__wrapped__ = e, this.__actions__ = [], this.__dir__ = 1, this.__filtered__ = !1, this.__iteratees__ = [], this.__takeCount__ = tR, this.__views__ = [];
}
Tt.prototype = tl(kf.prototype);
Tt.prototype.constructor = Tt;
function ws() {
}
var iy = wd ? function(e) {
  return wd.get(e);
} : ws, xs = {}, nR = Object.prototype, rR = nR.hasOwnProperty;
function Qc(e) {
  for (var t = e.name + "", n = xs[t], r = rR.call(xs, t) ? n.length : 0; r--; ) {
    var i = n[r], o = i.func;
    if (o == null || o == e)
      return i.name;
  }
  return t;
}
function Zr(e, t) {
  this.__wrapped__ = e, this.__actions__ = [], this.__chain__ = !!t, this.__index__ = 0, this.__values__ = void 0;
}
Zr.prototype = tl(kf.prototype);
Zr.prototype.constructor = Zr;
function lr(e, t) {
  var n = -1, r = e.length;
  for (t || (t = Array(r)); ++n < r; )
    t[n] = e[n];
  return t;
}
function Ux(e) {
  if (e instanceof Tt)
    return e.clone();
  var t = new Zr(e.__wrapped__, e.__chain__);
  return t.__actions__ = lr(e.__actions__), t.__index__ = e.__index__, t.__values__ = e.__values__, t;
}
var iR = Object.prototype, oR = iR.hasOwnProperty;
function C(e) {
  if (fn(e) && !ut(e) && !(e instanceof Tt)) {
    if (e instanceof Zr)
      return e;
    if (oR.call(e, "__wrapped__"))
      return Ux(e);
  }
  return new Zr(e);
}
C.prototype = kf.prototype;
C.prototype.constructor = C;
function vv(e) {
  var t = Qc(e), n = C[t];
  if (typeof n != "function" || !(t in Tt.prototype))
    return !1;
  if (e === n)
    return !0;
  var r = iy(n);
  return !!r && e === r[0];
}
var aR = 800, sR = 16, lR = Date.now;
function Yx(e) {
  var t = 0, n = 0;
  return function() {
    var r = lR(), i = sR - (r - n);
    if (n = r, i > 0) {
      if (++t >= aR)
        return arguments[0];
    } else
      t = 0;
    return e.apply(void 0, arguments);
  };
}
var Kx = Yx(Wx), uR = /\{\n\/\* \[wrapped with (.+)\] \*/, cR = /,? & /;
function dR(e) {
  var t = e.match(uR);
  return t ? t[1].split(cR) : [];
}
var fR = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;
function hR(e, t) {
  var n = t.length;
  if (!n)
    return e;
  var r = n - 1;
  return t[r] = (n > 1 ? "& " : "") + t[r], t = t.join(n > 2 ? ", " : " "), e.replace(fR, `{
/* [wrapped with ` + t + `] */
`);
}
function oy(e) {
  return function() {
    return e;
  };
}
var xd = function() {
  try {
    var e = Va(Object, "defineProperty");
    return e({}, "", {}), e;
  } catch {
  }
}(), pR = xd ? function(e, t) {
  return xd(e, "toString", {
    configurable: !0,
    enumerable: !1,
    value: oy(t),
    writable: !0
  });
} : tr, ay = Yx(pR);
function ti(e, t) {
  for (var n = -1, r = e == null ? 0 : e.length; ++n < r && t(e[n], n, e) !== !1; )
    ;
  return e;
}
function If(e, t, n, r) {
  for (var i = e.length, o = n + (r ? 1 : -1); r ? o-- : ++o < i; )
    if (t(e[o], o, e))
      return o;
  return -1;
}
function qx(e) {
  return e !== e;
}
function vR(e, t, n) {
  for (var r = n - 1, i = e.length; ++r < i; )
    if (e[r] === t)
      return r;
  return -1;
}
function nl(e, t, n) {
  return t === t ? vR(e, t, n) : If(e, qx, n);
}
function Bf(e, t) {
  var n = e == null ? 0 : e.length;
  return !!n && nl(e, t, 0) > -1;
}
var gR = 1, yR = 2, mR = 8, _R = 16, bR = 32, wR = 64, xR = 128, ER = 256, SR = 512, CR = [
  ["ary", xR],
  ["bind", gR],
  ["bindKey", yR],
  ["curry", mR],
  ["curryRight", _R],
  ["flip", SR],
  ["partial", bR],
  ["partialRight", wR],
  ["rearg", ER]
];
function OR(e, t) {
  return ti(CR, function(n) {
    var r = "_." + n[0];
    t & n[1] && !Bf(e, r) && e.push(r);
  }), e.sort();
}
function Zx(e, t, n) {
  var r = t + "";
  return ay(e, hR(r, OR(dR(r), n)));
}
var AR = 1, NR = 2, MR = 4, TR = 8, A0 = 32, N0 = 64;
function Jx(e, t, n, r, i, o, a, s, l, u) {
  var c = t & TR, d = c ? a : void 0, f = c ? void 0 : a, h = c ? o : void 0, p = c ? void 0 : o;
  t |= c ? A0 : N0, t &= ~(c ? N0 : A0), t & MR || (t &= ~(AR | NR));
  var v = [
    e,
    t,
    i,
    h,
    d,
    p,
    f,
    s,
    l,
    u
  ], g = n.apply(void 0, v);
  return vv(e) && Kx(g, v), g.placeholder = r, Zx(g, e, t);
}
function rl(e) {
  var t = e;
  return t.placeholder;
}
var PR = 9007199254740991, DR = /^(?:0|[1-9]\d*)$/;
function vo(e, t) {
  var n = typeof e;
  return t = t ?? PR, !!t && (n == "number" || n != "symbol" && DR.test(e)) && e > -1 && e % 1 == 0 && e < t;
}
var RR = Math.min;
function LR(e, t) {
  for (var n = e.length, r = RR(t.length, n), i = lr(e); r--; ) {
    var o = t[r];
    e[r] = vo(o, n) ? i[o] : void 0;
  }
  return e;
}
var M0 = "__lodash_placeholder__";
function jo(e, t) {
  for (var n = -1, r = e.length, i = 0, o = []; ++n < r; ) {
    var a = e[n];
    (a === t || a === M0) && (e[n] = M0, o[i++] = n);
  }
  return o;
}
var $R = 1, kR = 2, IR = 8, BR = 16, jR = 128, zR = 512;
function jf(e, t, n, r, i, o, a, s, l, u) {
  var c = t & jR, d = t & $R, f = t & kR, h = t & (IR | BR), p = t & zR, v = f ? void 0 : xu(e);
  function g() {
    for (var y = arguments.length, m = Array(y), E = y; E--; )
      m[E] = arguments[E];
    if (h)
      var w = rl(g), S = eR(m, w);
    if (r && (m = Gx(m, r, i, h)), o && (m = Xx(m, o, a, h)), y -= S, h && y < u) {
      var _ = jo(m, w);
      return Jx(
        e,
        t,
        jf,
        g.placeholder,
        n,
        m,
        _,
        s,
        l,
        u - y
      );
    }
    var b = d ? n : this, T = f ? b[e] : e;
    return y = m.length, s ? m = LR(m, s) : p && y > 1 && m.reverse(), c && l < y && (m.length = l), this && this !== En && this instanceof g && (T = v || xu(T)), T.apply(b, m);
  }
  return g;
}
function FR(e, t, n) {
  var r = xu(e);
  function i() {
    for (var o = arguments.length, a = Array(o), s = o, l = rl(i); s--; )
      a[s] = arguments[s];
    var u = o < 3 && a[0] !== l && a[o - 1] !== l ? [] : jo(a, l);
    if (o -= u.length, o < n)
      return Jx(
        e,
        t,
        jf,
        i.placeholder,
        void 0,
        a,
        u,
        void 0,
        void 0,
        n - o
      );
    var c = this && this !== En && this instanceof i ? r : e;
    return Mr(c, this, a);
  }
  return i;
}
var HR = 1;
function VR(e, t, n, r) {
  var i = t & HR, o = xu(e);
  function a() {
    for (var s = -1, l = arguments.length, u = -1, c = r.length, d = Array(c + l), f = this && this !== En && this instanceof a ? o : e; ++u < c; )
      d[u] = r[u];
    for (; l--; )
      d[u++] = arguments[++s];
    return Mr(f, i ? n : this, d);
  }
  return a;
}
var T0 = "__lodash_placeholder__", fp = 1, WR = 2, GR = 4, P0 = 8, Sl = 128, D0 = 256, XR = Math.min;
function UR(e, t) {
  var n = e[1], r = t[1], i = n | r, o = i < (fp | WR | Sl), a = r == Sl && n == P0 || r == Sl && n == D0 && e[7].length <= t[8] || r == (Sl | D0) && t[7].length <= t[8] && n == P0;
  if (!(o || a))
    return e;
  r & fp && (e[2] = t[2], i |= n & fp ? 0 : GR);
  var s = t[3];
  if (s) {
    var l = e[3];
    e[3] = l ? Gx(l, s, t[4]) : s, e[4] = l ? jo(e[3], T0) : t[4];
  }
  return s = t[5], s && (l = e[5], e[5] = l ? Xx(l, s, t[6]) : s, e[6] = l ? jo(e[5], T0) : t[6]), s = t[7], s && (e[7] = s), r & Sl && (e[8] = e[8] == null ? t[8] : XR(e[8], t[8])), e[9] == null && (e[9] = t[9]), e[0] = t[0], e[1] = i, e;
}
var YR = "Expected a function", R0 = 1, KR = 2, hp = 8, pp = 16, vp = 32, L0 = 64, $0 = Math.max;
function go(e, t, n, r, i, o, a, s) {
  var l = t & KR;
  if (!l && typeof e != "function")
    throw new TypeError(YR);
  var u = r ? r.length : 0;
  if (u || (t &= ~(vp | L0), r = i = void 0), a = a === void 0 ? a : $0(yt(a), 0), s = s === void 0 ? s : yt(s), u -= i ? i.length : 0, t & L0) {
    var c = r, d = i;
    r = i = void 0;
  }
  var f = l ? void 0 : iy(e), h = [
    e,
    t,
    n,
    r,
    i,
    c,
    d,
    o,
    a,
    s
  ];
  if (f && UR(h, f), e = h[0], t = h[1], n = h[2], r = h[3], i = h[4], s = h[9] = h[9] === void 0 ? l ? 0 : e.length : $0(h[9] - u, 0), !s && t & (hp | pp) && (t &= ~(hp | pp)), !t || t == R0)
    var p = Z4(e, t, n);
  else t == hp || t == pp ? p = FR(e, t, s) : (t == vp || t == (R0 | vp)) && !i.length ? p = VR(e, t, n, r) : p = jf.apply(void 0, h);
  var v = f ? Wx : Kx;
  return Zx(v(p, h), e, t);
}
var qR = 128;
function Qx(e, t, n) {
  return t = n ? void 0 : t, t = e && t == null ? e.length : t, go(e, qR, void 0, void 0, void 0, void 0, t);
}
function yo(e, t, n) {
  t == "__proto__" && xd ? xd(e, t, {
    configurable: !0,
    enumerable: !0,
    value: n,
    writable: !0
  }) : e[t] = n;
}
function Ni(e, t) {
  return e === t || e !== e && t !== t;
}
var ZR = Object.prototype, JR = ZR.hasOwnProperty;
function Wu(e, t, n) {
  var r = e[t];
  (!(JR.call(e, t) && Ni(r, n)) || n === void 0 && !(t in e)) && yo(e, t, n);
}
function Ki(e, t, n, r) {
  var i = !n;
  n || (n = {});
  for (var o = -1, a = t.length; ++o < a; ) {
    var s = t[o], l = r ? r(n[s], e[s], s, n, e) : void 0;
    l === void 0 && (l = e[s]), i ? yo(n, s, l) : Wu(n, s, l);
  }
  return n;
}
var k0 = Math.max;
function eE(e, t, n) {
  return t = k0(t === void 0 ? e.length - 1 : t, 0), function() {
    for (var r = arguments, i = -1, o = k0(r.length - t, 0), a = Array(o); ++i < o; )
      a[i] = r[t + i];
    i = -1;
    for (var s = Array(t + 1); ++i < t; )
      s[i] = r[i];
    return s[t] = n(a), Mr(e, this, s);
  };
}
function St(e, t) {
  return ay(eE(e, t, tr), e + "");
}
var QR = 9007199254740991;
function zf(e) {
  return typeof e == "number" && e > -1 && e % 1 == 0 && e <= QR;
}
function hr(e) {
  return e != null && zf(e.length) && !po(e);
}
function Yn(e, t, n) {
  if (!an(n))
    return !1;
  var r = typeof t;
  return (r == "number" ? hr(n) && vo(t, n.length) : r == "string" && t in n) ? Ni(n[t], e) : !1;
}
function il(e) {
  return St(function(t, n) {
    var r = -1, i = n.length, o = i > 1 ? n[i - 1] : void 0, a = i > 2 ? n[2] : void 0;
    for (o = e.length > 3 && typeof o == "function" ? (i--, o) : void 0, a && Yn(n[0], n[1], a) && (o = i < 3 ? void 0 : o, i = 1), t = Object(t); ++r < i; ) {
      var s = n[r];
      s && e(t, s, r, o);
    }
    return t;
  });
}
var e5 = Object.prototype;
function Gu(e) {
  var t = e && e.constructor, n = typeof t == "function" && t.prototype || e5;
  return e === n;
}
function sy(e, t) {
  for (var n = -1, r = Array(e); ++n < e; )
    r[n] = t(n);
  return r;
}
var t5 = "[object Arguments]";
function I0(e) {
  return fn(e) && er(e) == t5;
}
var tE = Object.prototype, n5 = tE.hasOwnProperty, r5 = tE.propertyIsEnumerable, Ma = I0(/* @__PURE__ */ function() {
  return arguments;
}()) ? I0 : function(e) {
  return fn(e) && n5.call(e, "callee") && !r5.call(e, "callee");
};
function ly() {
  return !1;
}
var nE = typeof exports == "object" && exports && !exports.nodeType && exports, B0 = nE && typeof module == "object" && module && !module.nodeType && module, i5 = B0 && B0.exports === nE, j0 = i5 ? En.Buffer : void 0, o5 = j0 ? j0.isBuffer : void 0, zo = o5 || ly, a5 = "[object Arguments]", s5 = "[object Array]", l5 = "[object Boolean]", u5 = "[object Date]", c5 = "[object Error]", d5 = "[object Function]", f5 = "[object Map]", h5 = "[object Number]", p5 = "[object Object]", v5 = "[object RegExp]", g5 = "[object Set]", y5 = "[object String]", m5 = "[object WeakMap]", _5 = "[object ArrayBuffer]", b5 = "[object DataView]", w5 = "[object Float32Array]", x5 = "[object Float64Array]", E5 = "[object Int8Array]", S5 = "[object Int16Array]", C5 = "[object Int32Array]", O5 = "[object Uint8Array]", A5 = "[object Uint8ClampedArray]", N5 = "[object Uint16Array]", M5 = "[object Uint32Array]", rn = {};
rn[w5] = rn[x5] = rn[E5] = rn[S5] = rn[C5] = rn[O5] = rn[A5] = rn[N5] = rn[M5] = !0;
rn[a5] = rn[s5] = rn[_5] = rn[l5] = rn[b5] = rn[u5] = rn[c5] = rn[d5] = rn[f5] = rn[h5] = rn[p5] = rn[v5] = rn[g5] = rn[y5] = rn[m5] = !1;
function T5(e) {
  return fn(e) && zf(e.length) && !!rn[er(e)];
}
function Tr(e) {
  return function(t) {
    return e(t);
  };
}
var rE = typeof exports == "object" && exports && !exports.nodeType && exports, Kl = rE && typeof module == "object" && module && !module.nodeType && module, P5 = Kl && Kl.exports === rE, gp = P5 && jx.process, Jr = function() {
  try {
    var e = Kl && Kl.require && Kl.require("util").types;
    return e || gp && gp.binding && gp.binding("util");
  } catch {
  }
}(), z0 = Jr && Jr.isTypedArray, ol = z0 ? Tr(z0) : T5, D5 = Object.prototype, R5 = D5.hasOwnProperty;
function iE(e, t) {
  var n = ut(e), r = !n && Ma(e), i = !n && !r && zo(e), o = !n && !r && !i && ol(e), a = n || r || i || o, s = a ? sy(e.length, String) : [], l = s.length;
  for (var u in e)
    (t || R5.call(e, u)) && !(a && // Safari 9 has enumerable `arguments.length` in strict mode.
    (u == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
    i && (u == "offset" || u == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
    o && (u == "buffer" || u == "byteLength" || u == "byteOffset") || // Skip index properties.
    vo(u, l))) && s.push(u);
  return s;
}
function oE(e, t) {
  return function(n) {
    return e(t(n));
  };
}
var L5 = oE(Object.keys, Object), $5 = Object.prototype, k5 = $5.hasOwnProperty;
function uy(e) {
  if (!Gu(e))
    return L5(e);
  var t = [];
  for (var n in Object(e))
    k5.call(e, n) && n != "constructor" && t.push(n);
  return t;
}
function wn(e) {
  return hr(e) ? iE(e) : uy(e);
}
var I5 = Object.prototype, B5 = I5.hasOwnProperty, It = il(function(e, t) {
  if (Gu(t) || hr(t)) {
    Ki(t, wn(t), e);
    return;
  }
  for (var n in t)
    B5.call(t, n) && Wu(e, n, t[n]);
});
function j5(e) {
  var t = [];
  if (e != null)
    for (var n in Object(e))
      t.push(n);
  return t;
}
var z5 = Object.prototype, F5 = z5.hasOwnProperty;
function H5(e) {
  if (!an(e))
    return j5(e);
  var t = Gu(e), n = [];
  for (var r in e)
    r == "constructor" && (t || !F5.call(e, r)) || n.push(r);
  return n;
}
function pr(e) {
  return hr(e) ? iE(e, !0) : H5(e);
}
var F0 = il(function(e, t) {
  Ki(t, pr(t), e);
}), Ed = il(function(e, t, n, r) {
  Ki(t, pr(t), e, r);
}), V5 = il(function(e, t, n, r) {
  Ki(t, wn(t), e, r);
}), W5 = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, G5 = /^\w*$/;
function cy(e, t) {
  if (ut(e))
    return !1;
  var n = typeof e;
  return n == "number" || n == "symbol" || n == "boolean" || e == null || Ar(e) ? !0 : G5.test(e) || !W5.test(e) || t != null && e in Object(t);
}
var Eu = Va(Object, "create");
function X5() {
  this.__data__ = Eu ? Eu(null) : {}, this.size = 0;
}
function U5(e) {
  var t = this.has(e) && delete this.__data__[e];
  return this.size -= t ? 1 : 0, t;
}
var Y5 = "__lodash_hash_undefined__", K5 = Object.prototype, q5 = K5.hasOwnProperty;
function Z5(e) {
  var t = this.__data__;
  if (Eu) {
    var n = t[e];
    return n === Y5 ? void 0 : n;
  }
  return q5.call(t, e) ? t[e] : void 0;
}
var J5 = Object.prototype, Q5 = J5.hasOwnProperty;
function eL(e) {
  var t = this.__data__;
  return Eu ? t[e] !== void 0 : Q5.call(t, e);
}
var tL = "__lodash_hash_undefined__";
function nL(e, t) {
  var n = this.__data__;
  return this.size += this.has(e) ? 0 : 1, n[e] = Eu && t === void 0 ? tL : t, this;
}
function Ta(e) {
  var t = -1, n = e == null ? 0 : e.length;
  for (this.clear(); ++t < n; ) {
    var r = e[t];
    this.set(r[0], r[1]);
  }
}
Ta.prototype.clear = X5;
Ta.prototype.delete = U5;
Ta.prototype.get = Z5;
Ta.prototype.has = eL;
Ta.prototype.set = nL;
function rL() {
  this.__data__ = [], this.size = 0;
}
function Ff(e, t) {
  for (var n = e.length; n--; )
    if (Ni(e[n][0], t))
      return n;
  return -1;
}
var iL = Array.prototype, oL = iL.splice;
function aL(e) {
  var t = this.__data__, n = Ff(t, e);
  if (n < 0)
    return !1;
  var r = t.length - 1;
  return n == r ? t.pop() : oL.call(t, n, 1), --this.size, !0;
}
function sL(e) {
  var t = this.__data__, n = Ff(t, e);
  return n < 0 ? void 0 : t[n][1];
}
function lL(e) {
  return Ff(this.__data__, e) > -1;
}
function uL(e, t) {
  var n = this.__data__, r = Ff(n, e);
  return r < 0 ? (++this.size, n.push([e, t])) : n[r][1] = t, this;
}
function mo(e) {
  var t = -1, n = e == null ? 0 : e.length;
  for (this.clear(); ++t < n; ) {
    var r = e[t];
    this.set(r[0], r[1]);
  }
}
mo.prototype.clear = rL;
mo.prototype.delete = aL;
mo.prototype.get = sL;
mo.prototype.has = lL;
mo.prototype.set = uL;
var Su = Va(En, "Map");
function cL() {
  this.size = 0, this.__data__ = {
    hash: new Ta(),
    map: new (Su || mo)(),
    string: new Ta()
  };
}
function dL(e) {
  var t = typeof e;
  return t == "string" || t == "number" || t == "symbol" || t == "boolean" ? e !== "__proto__" : e === null;
}
function Hf(e, t) {
  var n = e.__data__;
  return dL(t) ? n[typeof t == "string" ? "string" : "hash"] : n.map;
}
function fL(e) {
  var t = Hf(this, e).delete(e);
  return this.size -= t ? 1 : 0, t;
}
function hL(e) {
  return Hf(this, e).get(e);
}
function pL(e) {
  return Hf(this, e).has(e);
}
function vL(e, t) {
  var n = Hf(this, e), r = n.size;
  return n.set(e, t), this.size += n.size == r ? 0 : 1, this;
}
function _o(e) {
  var t = -1, n = e == null ? 0 : e.length;
  for (this.clear(); ++t < n; ) {
    var r = e[t];
    this.set(r[0], r[1]);
  }
}
_o.prototype.clear = cL;
_o.prototype.delete = fL;
_o.prototype.get = hL;
_o.prototype.has = pL;
_o.prototype.set = vL;
var gL = "Expected a function";
function Vf(e, t) {
  if (typeof e != "function" || t != null && typeof t != "function")
    throw new TypeError(gL);
  var n = function() {
    var r = arguments, i = t ? t.apply(this, r) : r[0], o = n.cache;
    if (o.has(i))
      return o.get(i);
    var a = e.apply(this, r);
    return n.cache = o.set(i, a) || o, a;
  };
  return n.cache = new (Vf.Cache || _o)(), n;
}
Vf.Cache = _o;
var yL = 500;
function mL(e) {
  var t = Vf(e, function(r) {
    return n.size === yL && n.clear(), r;
  }), n = t.cache;
  return t;
}
var _L = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, bL = /\\(\\)?/g, aE = mL(function(e) {
  var t = [];
  return e.charCodeAt(0) === 46 && t.push(""), e.replace(_L, function(n, r, i, o) {
    t.push(i ? o.replace(bL, "$1") : r || n);
  }), t;
});
function Wt(e) {
  return e == null ? "" : Nr(e);
}
function Uo(e, t) {
  return ut(e) ? e : cy(e, t) ? [e] : aE(Wt(e));
}
var wL = 1 / 0;
function qi(e) {
  if (typeof e == "string" || Ar(e))
    return e;
  var t = e + "";
  return t == "0" && 1 / e == -wL ? "-0" : t;
}
function Wa(e, t) {
  t = Uo(t, e);
  for (var n = 0, r = t.length; e != null && n < r; )
    e = e[qi(t[n++])];
  return n && n == r ? e : void 0;
}
function al(e, t, n) {
  var r = e == null ? void 0 : Wa(e, t);
  return r === void 0 ? n : r;
}
function dy(e, t) {
  for (var n = -1, r = t.length, i = Array(r), o = e == null; ++n < r; )
    i[n] = o ? void 0 : al(e, t[n]);
  return i;
}
function Yo(e, t) {
  for (var n = -1, r = t.length, i = e.length; ++n < r; )
    e[i + n] = t[n];
  return e;
}
var H0 = Vn ? Vn.isConcatSpreadable : void 0;
function xL(e) {
  return ut(e) || Ma(e) || !!(H0 && e && e[H0]);
}
function $n(e, t, n, r, i) {
  var o = -1, a = e.length;
  for (n || (n = xL), i || (i = []); ++o < a; ) {
    var s = e[o];
    t > 0 && n(s) ? t > 1 ? $n(s, t - 1, n, r, i) : Yo(i, s) : r || (i[i.length] = s);
  }
  return i;
}
function sE(e) {
  var t = e == null ? 0 : e.length;
  return t ? $n(e, 1) : [];
}
function bo(e) {
  return ay(eE(e, void 0, sE), e + "");
}
var EL = bo(dy), Wf = oE(Object.getPrototypeOf, Object), SL = "[object Object]", CL = Function.prototype, OL = Object.prototype, lE = CL.toString, AL = OL.hasOwnProperty, NL = lE.call(Object);
function Xu(e) {
  if (!fn(e) || er(e) != SL)
    return !1;
  var t = Wf(e);
  if (t === null)
    return !0;
  var n = AL.call(t, "constructor") && t.constructor;
  return typeof n == "function" && n instanceof n && lE.call(n) == NL;
}
var ML = "[object DOMException]", TL = "[object Error]";
function fy(e) {
  if (!fn(e))
    return !1;
  var t = er(e);
  return t == TL || t == ML || typeof e.message == "string" && typeof e.name == "string" && !Xu(e);
}
var uE = St(function(e, t) {
  try {
    return Mr(e, void 0, t);
  } catch (n) {
    return fy(n) ? n : new Error(n);
  }
}), PL = "Expected a function";
function cE(e, t) {
  var n;
  if (typeof t != "function")
    throw new TypeError(PL);
  return e = yt(e), function() {
    return --e > 0 && (n = t.apply(this, arguments)), e <= 1 && (t = void 0), n;
  };
}
var DL = 1, RL = 32, Gf = St(function(e, t, n) {
  var r = DL;
  if (n.length) {
    var i = jo(n, rl(Gf));
    r |= RL;
  }
  return go(e, r, t, n, i);
});
Gf.placeholder = {};
var LL = bo(function(e, t) {
  return ti(t, function(n) {
    n = qi(n), yo(e, n, Gf(e[n], e));
  }), e;
}), $L = 1, kL = 2, IL = 32, hy = St(function(e, t, n) {
  var r = $L | kL;
  if (n.length) {
    var i = jo(n, rl(hy));
    r |= IL;
  }
  return go(t, r, e, n, i);
});
hy.placeholder = {};
function Qr(e, t, n) {
  var r = -1, i = e.length;
  t < 0 && (t = -t > i ? 0 : i + t), n = n > i ? i : n, n < 0 && (n += i), i = t > n ? 0 : n - t >>> 0, t >>>= 0;
  for (var o = Array(i); ++r < i; )
    o[r] = e[r + t];
  return o;
}
function Ko(e, t, n) {
  var r = e.length;
  return n = n === void 0 ? r : n, !t && n >= r ? e : Qr(e, t, n);
}
var BL = "\\ud800-\\udfff", jL = "\\u0300-\\u036f", zL = "\\ufe20-\\ufe2f", FL = "\\u20d0-\\u20ff", HL = jL + zL + FL, VL = "\\ufe0e\\ufe0f", WL = "\\u200d", GL = RegExp("[" + WL + BL + HL + VL + "]");
function sl(e) {
  return GL.test(e);
}
function XL(e) {
  return e.split("");
}
var dE = "\\ud800-\\udfff", UL = "\\u0300-\\u036f", YL = "\\ufe20-\\ufe2f", KL = "\\u20d0-\\u20ff", qL = UL + YL + KL, ZL = "\\ufe0e\\ufe0f", JL = "[" + dE + "]", gv = "[" + qL + "]", yv = "\\ud83c[\\udffb-\\udfff]", QL = "(?:" + gv + "|" + yv + ")", fE = "[^" + dE + "]", hE = "(?:\\ud83c[\\udde6-\\uddff]){2}", pE = "[\\ud800-\\udbff][\\udc00-\\udfff]", e$ = "\\u200d", vE = QL + "?", gE = "[" + ZL + "]?", t$ = "(?:" + e$ + "(?:" + [fE, hE, pE].join("|") + ")" + gE + vE + ")*", n$ = gE + vE + t$, r$ = "(?:" + [fE + gv + "?", gv, hE, pE, JL].join("|") + ")", i$ = RegExp(yv + "(?=" + yv + ")|" + r$ + n$, "g");
function o$(e) {
  return e.match(i$) || [];
}
function Ci(e) {
  return sl(e) ? o$(e) : XL(e);
}
function yE(e) {
  return function(t) {
    t = Wt(t);
    var n = sl(t) ? Ci(t) : void 0, r = n ? n[0] : t.charAt(0), i = n ? Ko(n, 1).join("") : t.slice(1);
    return r[e]() + i;
  };
}
var py = yE("toUpperCase");
function mE(e) {
  return py(Wt(e).toLowerCase());
}
function vy(e, t, n, r) {
  var i = -1, o = e == null ? 0 : e.length;
  for (r && o && (n = e[++i]); ++i < o; )
    n = t(n, e[i], i, e);
  return n;
}
function gy(e) {
  return function(t) {
    return e == null ? void 0 : e[t];
  };
}
var a$ = {
  // Latin-1 Supplement block.
  À: "A",
  Á: "A",
  Â: "A",
  Ã: "A",
  Ä: "A",
  Å: "A",
  à: "a",
  á: "a",
  â: "a",
  ã: "a",
  ä: "a",
  å: "a",
  Ç: "C",
  ç: "c",
  Ð: "D",
  ð: "d",
  È: "E",
  É: "E",
  Ê: "E",
  Ë: "E",
  è: "e",
  é: "e",
  ê: "e",
  ë: "e",
  Ì: "I",
  Í: "I",
  Î: "I",
  Ï: "I",
  ì: "i",
  í: "i",
  î: "i",
  ï: "i",
  Ñ: "N",
  ñ: "n",
  Ò: "O",
  Ó: "O",
  Ô: "O",
  Õ: "O",
  Ö: "O",
  Ø: "O",
  ò: "o",
  ó: "o",
  ô: "o",
  õ: "o",
  ö: "o",
  ø: "o",
  Ù: "U",
  Ú: "U",
  Û: "U",
  Ü: "U",
  ù: "u",
  ú: "u",
  û: "u",
  ü: "u",
  Ý: "Y",
  ý: "y",
  ÿ: "y",
  Æ: "Ae",
  æ: "ae",
  Þ: "Th",
  þ: "th",
  ß: "ss",
  // Latin Extended-A block.
  Ā: "A",
  Ă: "A",
  Ą: "A",
  ā: "a",
  ă: "a",
  ą: "a",
  Ć: "C",
  Ĉ: "C",
  Ċ: "C",
  Č: "C",
  ć: "c",
  ĉ: "c",
  ċ: "c",
  č: "c",
  Ď: "D",
  Đ: "D",
  ď: "d",
  đ: "d",
  Ē: "E",
  Ĕ: "E",
  Ė: "E",
  Ę: "E",
  Ě: "E",
  ē: "e",
  ĕ: "e",
  ė: "e",
  ę: "e",
  ě: "e",
  Ĝ: "G",
  Ğ: "G",
  Ġ: "G",
  Ģ: "G",
  ĝ: "g",
  ğ: "g",
  ġ: "g",
  ģ: "g",
  Ĥ: "H",
  Ħ: "H",
  ĥ: "h",
  ħ: "h",
  Ĩ: "I",
  Ī: "I",
  Ĭ: "I",
  Į: "I",
  İ: "I",
  ĩ: "i",
  ī: "i",
  ĭ: "i",
  į: "i",
  ı: "i",
  Ĵ: "J",
  ĵ: "j",
  Ķ: "K",
  ķ: "k",
  ĸ: "k",
  Ĺ: "L",
  Ļ: "L",
  Ľ: "L",
  Ŀ: "L",
  Ł: "L",
  ĺ: "l",
  ļ: "l",
  ľ: "l",
  ŀ: "l",
  ł: "l",
  Ń: "N",
  Ņ: "N",
  Ň: "N",
  Ŋ: "N",
  ń: "n",
  ņ: "n",
  ň: "n",
  ŋ: "n",
  Ō: "O",
  Ŏ: "O",
  Ő: "O",
  ō: "o",
  ŏ: "o",
  ő: "o",
  Ŕ: "R",
  Ŗ: "R",
  Ř: "R",
  ŕ: "r",
  ŗ: "r",
  ř: "r",
  Ś: "S",
  Ŝ: "S",
  Ş: "S",
  Š: "S",
  ś: "s",
  ŝ: "s",
  ş: "s",
  š: "s",
  Ţ: "T",
  Ť: "T",
  Ŧ: "T",
  ţ: "t",
  ť: "t",
  ŧ: "t",
  Ũ: "U",
  Ū: "U",
  Ŭ: "U",
  Ů: "U",
  Ű: "U",
  Ų: "U",
  ũ: "u",
  ū: "u",
  ŭ: "u",
  ů: "u",
  ű: "u",
  ų: "u",
  Ŵ: "W",
  ŵ: "w",
  Ŷ: "Y",
  ŷ: "y",
  Ÿ: "Y",
  Ź: "Z",
  Ż: "Z",
  Ž: "Z",
  ź: "z",
  ż: "z",
  ž: "z",
  Ĳ: "IJ",
  ĳ: "ij",
  Œ: "Oe",
  œ: "oe",
  ŉ: "'n",
  ſ: "s"
}, s$ = gy(a$), l$ = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g, u$ = "\\u0300-\\u036f", c$ = "\\ufe20-\\ufe2f", d$ = "\\u20d0-\\u20ff", f$ = u$ + c$ + d$, h$ = "[" + f$ + "]", p$ = RegExp(h$, "g");
function _E(e) {
  return e = Wt(e), e && e.replace(l$, s$).replace(p$, "");
}
var v$ = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;
function g$(e) {
  return e.match(v$) || [];
}
var y$ = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;
function m$(e) {
  return y$.test(e);
}
var bE = "\\ud800-\\udfff", _$ = "\\u0300-\\u036f", b$ = "\\ufe20-\\ufe2f", w$ = "\\u20d0-\\u20ff", x$ = _$ + b$ + w$, wE = "\\u2700-\\u27bf", xE = "a-z\\xdf-\\xf6\\xf8-\\xff", E$ = "\\xac\\xb1\\xd7\\xf7", S$ = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf", C$ = "\\u2000-\\u206f", O$ = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000", EE = "A-Z\\xc0-\\xd6\\xd8-\\xde", A$ = "\\ufe0e\\ufe0f", SE = E$ + S$ + C$ + O$, CE = "['’]", V0 = "[" + SE + "]", N$ = "[" + x$ + "]", OE = "\\d+", M$ = "[" + wE + "]", AE = "[" + xE + "]", NE = "[^" + bE + SE + OE + wE + xE + EE + "]", T$ = "\\ud83c[\\udffb-\\udfff]", P$ = "(?:" + N$ + "|" + T$ + ")", D$ = "[^" + bE + "]", ME = "(?:\\ud83c[\\udde6-\\uddff]){2}", TE = "[\\ud800-\\udbff][\\udc00-\\udfff]", cs = "[" + EE + "]", R$ = "\\u200d", W0 = "(?:" + AE + "|" + NE + ")", L$ = "(?:" + cs + "|" + NE + ")", G0 = "(?:" + CE + "(?:d|ll|m|re|s|t|ve))?", X0 = "(?:" + CE + "(?:D|LL|M|RE|S|T|VE))?", PE = P$ + "?", DE = "[" + A$ + "]?", $$ = "(?:" + R$ + "(?:" + [D$, ME, TE].join("|") + ")" + DE + PE + ")*", k$ = "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])", I$ = "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])", B$ = DE + PE + $$, j$ = "(?:" + [M$, ME, TE].join("|") + ")" + B$, z$ = RegExp([
  cs + "?" + AE + "+" + G0 + "(?=" + [V0, cs, "$"].join("|") + ")",
  L$ + "+" + X0 + "(?=" + [V0, cs + W0, "$"].join("|") + ")",
  cs + "?" + W0 + "+" + G0,
  cs + "+" + X0,
  I$,
  k$,
  OE,
  j$
].join("|"), "g");
function F$(e) {
  return e.match(z$) || [];
}
function RE(e, t, n) {
  return e = Wt(e), t = n ? void 0 : t, t === void 0 ? m$(e) ? F$(e) : g$(e) : e.match(t) || [];
}
var H$ = "['’]", V$ = RegExp(H$, "g");
function ll(e) {
  return function(t) {
    return vy(RE(_E(t).replace(V$, "")), e, "");
  };
}
var W$ = ll(function(e, t, n) {
  return t = t.toLowerCase(), e + (n ? mE(t) : t);
});
function G$() {
  if (!arguments.length)
    return [];
  var e = arguments[0];
  return ut(e) ? e : [e];
}
var X$ = En.isFinite, U$ = Math.min;
function yy(e) {
  var t = Math[e];
  return function(n, r) {
    if (n = Xr(n), r = r == null ? 0 : U$(yt(r), 292), r && X$(n)) {
      var i = (Wt(n) + "e").split("e"), o = t(i[0] + "e" + (+i[1] + r));
      return i = (Wt(o) + "e").split("e"), +(i[0] + "e" + (+i[1] - r));
    }
    return t(n);
  };
}
var Y$ = yy("ceil");
function LE(e) {
  var t = C(e);
  return t.__chain__ = !0, t;
}
var K$ = Math.ceil, q$ = Math.max;
function Z$(e, t, n) {
  (n ? Yn(e, t, n) : t === void 0) ? t = 1 : t = q$(yt(t), 0);
  var r = e == null ? 0 : e.length;
  if (!r || t < 1)
    return [];
  for (var i = 0, o = 0, a = Array(K$(r / t)); i < r; )
    a[o++] = Qr(e, i, i += t);
  return a;
}
function Ga(e, t, n) {
  return e === e && (n !== void 0 && (e = e <= n ? e : n), t !== void 0 && (e = e >= t ? e : t)), e;
}
function J$(e, t, n) {
  return n === void 0 && (n = t, t = void 0), n !== void 0 && (n = Xr(n), n = n === n ? n : 0), t !== void 0 && (t = Xr(t), t = t === t ? t : 0), Ga(Xr(e), t, n);
}
function Q$() {
  this.__data__ = new mo(), this.size = 0;
}
function e8(e) {
  var t = this.__data__, n = t.delete(e);
  return this.size = t.size, n;
}
function t8(e) {
  return this.__data__.get(e);
}
function n8(e) {
  return this.__data__.has(e);
}
var r8 = 200;
function i8(e, t) {
  var n = this.__data__;
  if (n instanceof mo) {
    var r = n.__data__;
    if (!Su || r.length < r8 - 1)
      return r.push([e, t]), this.size = ++n.size, this;
    n = this.__data__ = new _o(r);
  }
  return n.set(e, t), this.size = n.size, this;
}
function bi(e) {
  var t = this.__data__ = new mo(e);
  this.size = t.size;
}
bi.prototype.clear = Q$;
bi.prototype.delete = e8;
bi.prototype.get = t8;
bi.prototype.has = n8;
bi.prototype.set = i8;
function $E(e, t) {
  return e && Ki(t, wn(t), e);
}
function o8(e, t) {
  return e && Ki(t, pr(t), e);
}
var kE = typeof exports == "object" && exports && !exports.nodeType && exports, U0 = kE && typeof module == "object" && module && !module.nodeType && module, a8 = U0 && U0.exports === kE, Y0 = a8 ? En.Buffer : void 0, K0 = Y0 ? Y0.allocUnsafe : void 0;
function IE(e, t) {
  if (t)
    return e.slice();
  var n = e.length, r = K0 ? K0(n) : new e.constructor(n);
  return e.copy(r), r;
}
function qo(e, t) {
  for (var n = -1, r = e == null ? 0 : e.length, i = 0, o = []; ++n < r; ) {
    var a = e[n];
    t(a, n, e) && (o[i++] = a);
  }
  return o;
}
function my() {
  return [];
}
var s8 = Object.prototype, l8 = s8.propertyIsEnumerable, q0 = Object.getOwnPropertySymbols, _y = q0 ? function(e) {
  return e == null ? [] : (e = Object(e), qo(q0(e), function(t) {
    return l8.call(e, t);
  }));
} : my;
function u8(e, t) {
  return Ki(e, _y(e), t);
}
var c8 = Object.getOwnPropertySymbols, BE = c8 ? function(e) {
  for (var t = []; e; )
    Yo(t, _y(e)), e = Wf(e);
  return t;
} : my;
function d8(e, t) {
  return Ki(e, BE(e), t);
}
function jE(e, t, n) {
  var r = t(e);
  return ut(e) ? r : Yo(r, n(e));
}
function mv(e) {
  return jE(e, wn, _y);
}
function by(e) {
  return jE(e, pr, BE);
}
var _v = Va(En, "DataView"), bv = Va(En, "Promise"), Es = Va(En, "Set"), Z0 = "[object Map]", f8 = "[object Object]", J0 = "[object Promise]", Q0 = "[object Set]", eb = "[object WeakMap]", tb = "[object DataView]", h8 = Ha(_v), p8 = Ha(Su), v8 = Ha(bv), g8 = Ha(Es), y8 = Ha(wu), jn = er;
(_v && jn(new _v(new ArrayBuffer(1))) != tb || Su && jn(new Su()) != Z0 || bv && jn(bv.resolve()) != J0 || Es && jn(new Es()) != Q0 || wu && jn(new wu()) != eb) && (jn = function(e) {
  var t = er(e), n = t == f8 ? e.constructor : void 0, r = n ? Ha(n) : "";
  if (r)
    switch (r) {
      case h8:
        return tb;
      case p8:
        return Z0;
      case v8:
        return J0;
      case g8:
        return Q0;
      case y8:
        return eb;
    }
  return t;
});
var m8 = Object.prototype, _8 = m8.hasOwnProperty;
function b8(e) {
  var t = e.length, n = new e.constructor(t);
  return t && typeof e[0] == "string" && _8.call(e, "index") && (n.index = e.index, n.input = e.input), n;
}
var Sd = En.Uint8Array;
function wy(e) {
  var t = new e.constructor(e.byteLength);
  return new Sd(t).set(new Sd(e)), t;
}
function w8(e, t) {
  var n = t ? wy(e.buffer) : e.buffer;
  return new e.constructor(n, e.byteOffset, e.byteLength);
}
var x8 = /\w*$/;
function E8(e) {
  var t = new e.constructor(e.source, x8.exec(e));
  return t.lastIndex = e.lastIndex, t;
}
var nb = Vn ? Vn.prototype : void 0, rb = nb ? nb.valueOf : void 0;
function S8(e) {
  return rb ? Object(rb.call(e)) : {};
}
function zE(e, t) {
  var n = t ? wy(e.buffer) : e.buffer;
  return new e.constructor(n, e.byteOffset, e.length);
}
var C8 = "[object Boolean]", O8 = "[object Date]", A8 = "[object Map]", N8 = "[object Number]", M8 = "[object RegExp]", T8 = "[object Set]", P8 = "[object String]", D8 = "[object Symbol]", R8 = "[object ArrayBuffer]", L8 = "[object DataView]", $8 = "[object Float32Array]", k8 = "[object Float64Array]", I8 = "[object Int8Array]", B8 = "[object Int16Array]", j8 = "[object Int32Array]", z8 = "[object Uint8Array]", F8 = "[object Uint8ClampedArray]", H8 = "[object Uint16Array]", V8 = "[object Uint32Array]";
function W8(e, t, n) {
  var r = e.constructor;
  switch (t) {
    case R8:
      return wy(e);
    case C8:
    case O8:
      return new r(+e);
    case L8:
      return w8(e, n);
    case $8:
    case k8:
    case I8:
    case B8:
    case j8:
    case z8:
    case F8:
    case H8:
    case V8:
      return zE(e, n);
    case A8:
      return new r();
    case N8:
    case P8:
      return new r(e);
    case M8:
      return E8(e);
    case T8:
      return new r();
    case D8:
      return S8(e);
  }
}
function FE(e) {
  return typeof e.constructor == "function" && !Gu(e) ? tl(Wf(e)) : {};
}
var G8 = "[object Map]";
function X8(e) {
  return fn(e) && jn(e) == G8;
}
var ib = Jr && Jr.isMap, HE = ib ? Tr(ib) : X8, U8 = "[object Set]";
function Y8(e) {
  return fn(e) && jn(e) == U8;
}
var ob = Jr && Jr.isSet, VE = ob ? Tr(ob) : Y8, K8 = 1, q8 = 2, Z8 = 4, WE = "[object Arguments]", J8 = "[object Array]", Q8 = "[object Boolean]", ek = "[object Date]", tk = "[object Error]", GE = "[object Function]", nk = "[object GeneratorFunction]", rk = "[object Map]", ik = "[object Number]", XE = "[object Object]", ok = "[object RegExp]", ak = "[object Set]", sk = "[object String]", lk = "[object Symbol]", uk = "[object WeakMap]", ck = "[object ArrayBuffer]", dk = "[object DataView]", fk = "[object Float32Array]", hk = "[object Float64Array]", pk = "[object Int8Array]", vk = "[object Int16Array]", gk = "[object Int32Array]", yk = "[object Uint8Array]", mk = "[object Uint8ClampedArray]", _k = "[object Uint16Array]", bk = "[object Uint32Array]", Kt = {};
Kt[WE] = Kt[J8] = Kt[ck] = Kt[dk] = Kt[Q8] = Kt[ek] = Kt[fk] = Kt[hk] = Kt[pk] = Kt[vk] = Kt[gk] = Kt[rk] = Kt[ik] = Kt[XE] = Kt[ok] = Kt[ak] = Kt[sk] = Kt[lk] = Kt[yk] = Kt[mk] = Kt[_k] = Kt[bk] = !0;
Kt[tk] = Kt[GE] = Kt[uk] = !1;
function Ur(e, t, n, r, i, o) {
  var a, s = t & K8, l = t & q8, u = t & Z8;
  if (n && (a = i ? n(e, r, i, o) : n(e)), a !== void 0)
    return a;
  if (!an(e))
    return e;
  var c = ut(e);
  if (c) {
    if (a = b8(e), !s)
      return lr(e, a);
  } else {
    var d = jn(e), f = d == GE || d == nk;
    if (zo(e))
      return IE(e, s);
    if (d == XE || d == WE || f && !i) {
      if (a = l || f ? {} : FE(e), !s)
        return l ? d8(e, o8(a, e)) : u8(e, $E(a, e));
    } else {
      if (!Kt[d])
        return i ? e : {};
      a = W8(e, d, s);
    }
  }
  o || (o = new bi());
  var h = o.get(e);
  if (h)
    return h;
  o.set(e, a), VE(e) ? e.forEach(function(g) {
    a.add(Ur(g, t, n, g, e, o));
  }) : HE(e) && e.forEach(function(g, y) {
    a.set(y, Ur(g, t, n, y, e, o));
  });
  var p = u ? l ? by : mv : l ? pr : wn, v = c ? void 0 : p(e);
  return ti(v || e, function(g, y) {
    v && (y = g, g = e[y]), Wu(a, y, Ur(g, t, n, y, e, o));
  }), a;
}
var wk = 4;
function xk(e) {
  return Ur(e, wk);
}
var Ek = 1, Sk = 4;
function it(e) {
  return Ur(e, Ek | Sk);
}
var Ck = 1, Ok = 4;
function Ak(e, t) {
  return t = typeof t == "function" ? t : void 0, Ur(e, Ck | Ok, t);
}
var Nk = 4;
function Mk(e, t) {
  return t = typeof t == "function" ? t : void 0, Ur(e, Nk, t);
}
function Tk() {
  return new Zr(this.value(), this.__chain__);
}
function Pk(e) {
  for (var t = -1, n = e == null ? 0 : e.length, r = 0, i = []; ++t < n; ) {
    var o = e[t];
    o && (i[r++] = o);
  }
  return i;
}
function Dk() {
  var e = arguments.length;
  if (!e)
    return [];
  for (var t = Array(e - 1), n = arguments[0], r = e; r--; )
    t[r - 1] = arguments[r];
  return Yo(ut(n) ? lr(n) : [n], $n(t, 1));
}
var Rk = "__lodash_hash_undefined__";
function Lk(e) {
  return this.__data__.set(e, Rk), this;
}
function $k(e) {
  return this.__data__.has(e);
}
function Pa(e) {
  var t = -1, n = e == null ? 0 : e.length;
  for (this.__data__ = new _o(); ++t < n; )
    this.add(e[t]);
}
Pa.prototype.add = Pa.prototype.push = Lk;
Pa.prototype.has = $k;
function xy(e, t) {
  for (var n = -1, r = e == null ? 0 : e.length; ++n < r; )
    if (t(e[n], n, e))
      return !0;
  return !1;
}
function Cu(e, t) {
  return e.has(t);
}
var kk = 1, Ik = 2;
function UE(e, t, n, r, i, o) {
  var a = n & kk, s = e.length, l = t.length;
  if (s != l && !(a && l > s))
    return !1;
  var u = o.get(e), c = o.get(t);
  if (u && c)
    return u == t && c == e;
  var d = -1, f = !0, h = n & Ik ? new Pa() : void 0;
  for (o.set(e, t), o.set(t, e); ++d < s; ) {
    var p = e[d], v = t[d];
    if (r)
      var g = a ? r(v, p, d, t, e, o) : r(p, v, d, e, t, o);
    if (g !== void 0) {
      if (g)
        continue;
      f = !1;
      break;
    }
    if (h) {
      if (!xy(t, function(y, m) {
        if (!Cu(h, m) && (p === y || i(p, y, n, r, o)))
          return h.push(m);
      })) {
        f = !1;
        break;
      }
    } else if (!(p === v || i(p, v, n, r, o))) {
      f = !1;
      break;
    }
  }
  return o.delete(e), o.delete(t), f;
}
function Ey(e) {
  var t = -1, n = Array(e.size);
  return e.forEach(function(r, i) {
    n[++t] = [i, r];
  }), n;
}
function Xf(e) {
  var t = -1, n = Array(e.size);
  return e.forEach(function(r) {
    n[++t] = r;
  }), n;
}
var Bk = 1, jk = 2, zk = "[object Boolean]", Fk = "[object Date]", Hk = "[object Error]", Vk = "[object Map]", Wk = "[object Number]", Gk = "[object RegExp]", Xk = "[object Set]", Uk = "[object String]", Yk = "[object Symbol]", Kk = "[object ArrayBuffer]", qk = "[object DataView]", ab = Vn ? Vn.prototype : void 0, yp = ab ? ab.valueOf : void 0;
function Zk(e, t, n, r, i, o, a) {
  switch (n) {
    case qk:
      if (e.byteLength != t.byteLength || e.byteOffset != t.byteOffset)
        return !1;
      e = e.buffer, t = t.buffer;
    case Kk:
      return !(e.byteLength != t.byteLength || !o(new Sd(e), new Sd(t)));
    case zk:
    case Fk:
    case Wk:
      return Ni(+e, +t);
    case Hk:
      return e.name == t.name && e.message == t.message;
    case Gk:
    case Uk:
      return e == t + "";
    case Vk:
      var s = Ey;
    case Xk:
      var l = r & Bk;
      if (s || (s = Xf), e.size != t.size && !l)
        return !1;
      var u = a.get(e);
      if (u)
        return u == t;
      r |= jk, a.set(e, t);
      var c = UE(s(e), s(t), r, i, o, a);
      return a.delete(e), c;
    case Yk:
      if (yp)
        return yp.call(e) == yp.call(t);
  }
  return !1;
}
var Jk = 1, Qk = Object.prototype, e6 = Qk.hasOwnProperty;
function t6(e, t, n, r, i, o) {
  var a = n & Jk, s = mv(e), l = s.length, u = mv(t), c = u.length;
  if (l != c && !a)
    return !1;
  for (var d = l; d--; ) {
    var f = s[d];
    if (!(a ? f in t : e6.call(t, f)))
      return !1;
  }
  var h = o.get(e), p = o.get(t);
  if (h && p)
    return h == t && p == e;
  var v = !0;
  o.set(e, t), o.set(t, e);
  for (var g = a; ++d < l; ) {
    f = s[d];
    var y = e[f], m = t[f];
    if (r)
      var E = a ? r(m, y, f, t, e, o) : r(y, m, f, e, t, o);
    if (!(E === void 0 ? y === m || i(y, m, n, r, o) : E)) {
      v = !1;
      break;
    }
    g || (g = f == "constructor");
  }
  if (v && !g) {
    var w = e.constructor, S = t.constructor;
    w != S && "constructor" in e && "constructor" in t && !(typeof w == "function" && w instanceof w && typeof S == "function" && S instanceof S) && (v = !1);
  }
  return o.delete(e), o.delete(t), v;
}
var n6 = 1, sb = "[object Arguments]", lb = "[object Array]", mc = "[object Object]", r6 = Object.prototype, ub = r6.hasOwnProperty;
function i6(e, t, n, r, i, o) {
  var a = ut(e), s = ut(t), l = a ? lb : jn(e), u = s ? lb : jn(t);
  l = l == sb ? mc : l, u = u == sb ? mc : u;
  var c = l == mc, d = u == mc, f = l == u;
  if (f && zo(e)) {
    if (!zo(t))
      return !1;
    a = !0, c = !1;
  }
  if (f && !c)
    return o || (o = new bi()), a || ol(e) ? UE(e, t, n, r, i, o) : Zk(e, t, l, n, r, i, o);
  if (!(n & n6)) {
    var h = c && ub.call(e, "__wrapped__"), p = d && ub.call(t, "__wrapped__");
    if (h || p) {
      var v = h ? e.value() : e, g = p ? t.value() : t;
      return o || (o = new bi()), i(v, g, n, r, o);
    }
  }
  return f ? (o || (o = new bi()), t6(e, t, n, r, i, o)) : !1;
}
function Uu(e, t, n, r, i) {
  return e === t ? !0 : e == null || t == null || !fn(e) && !fn(t) ? e !== e && t !== t : i6(e, t, n, r, Uu, i);
}
var o6 = 1, a6 = 2;
function Sy(e, t, n, r) {
  var i = n.length, o = i, a = !r;
  if (e == null)
    return !o;
  for (e = Object(e); i--; ) {
    var s = n[i];
    if (a && s[2] ? s[1] !== e[s[0]] : !(s[0] in e))
      return !1;
  }
  for (; ++i < o; ) {
    s = n[i];
    var l = s[0], u = e[l], c = s[1];
    if (a && s[2]) {
      if (u === void 0 && !(l in e))
        return !1;
    } else {
      var d = new bi();
      if (r)
        var f = r(u, c, l, e, t, d);
      if (!(f === void 0 ? Uu(c, u, o6 | a6, r, d) : f))
        return !1;
    }
  }
  return !0;
}
function YE(e) {
  return e === e && !an(e);
}
function Cy(e) {
  for (var t = wn(e), n = t.length; n--; ) {
    var r = t[n], i = e[r];
    t[n] = [r, i, YE(i)];
  }
  return t;
}
function KE(e, t) {
  return function(n) {
    return n == null ? !1 : n[e] === t && (t !== void 0 || e in Object(n));
  };
}
function qE(e) {
  var t = Cy(e);
  return t.length == 1 && t[0][2] ? KE(t[0][0], t[0][1]) : function(n) {
    return n === e || Sy(n, e, t);
  };
}
function s6(e, t) {
  return e != null && t in Object(e);
}
function ZE(e, t, n) {
  t = Uo(t, e);
  for (var r = -1, i = t.length, o = !1; ++r < i; ) {
    var a = qi(t[r]);
    if (!(o = e != null && n(e, a)))
      break;
    e = e[a];
  }
  return o || ++r != i ? o : (i = e == null ? 0 : e.length, !!i && zf(i) && vo(a, i) && (ut(e) || Ma(e)));
}
function Oy(e, t) {
  return e != null && ZE(e, t, s6);
}
var l6 = 1, u6 = 2;
function JE(e, t) {
  return cy(e) && YE(t) ? KE(qi(e), t) : function(n) {
    var r = al(n, e);
    return r === void 0 && r === t ? Oy(n, e) : Uu(t, r, l6 | u6);
  };
}
function Ay(e) {
  return function(t) {
    return t == null ? void 0 : t[e];
  };
}
function c6(e) {
  return function(t) {
    return Wa(t, e);
  };
}
function QE(e) {
  return cy(e) ? Ay(qi(e)) : c6(e);
}
function ht(e) {
  return typeof e == "function" ? e : e == null ? tr : typeof e == "object" ? ut(e) ? JE(e[0], e[1]) : qE(e) : QE(e);
}
var d6 = "Expected a function";
function f6(e) {
  var t = e == null ? 0 : e.length, n = ht;
  return e = t ? cn(e, function(r) {
    if (typeof r[1] != "function")
      throw new TypeError(d6);
    return [n(r[0]), r[1]];
  }) : [], St(function(r) {
    for (var i = -1; ++i < t; ) {
      var o = e[i];
      if (Mr(o[0], this, r))
        return Mr(o[1], this, r);
    }
  });
}
function eS(e, t, n) {
  var r = n.length;
  if (e == null)
    return !r;
  for (e = Object(e); r--; ) {
    var i = n[r], o = t[i], a = e[i];
    if (a === void 0 && !(i in e) || !o(a))
      return !1;
  }
  return !0;
}
function h6(e) {
  var t = wn(e);
  return function(n) {
    return eS(n, e, t);
  };
}
var p6 = 1;
function v6(e) {
  return h6(Ur(e, p6));
}
function g6(e, t) {
  return t == null || eS(e, t, wn(t));
}
function y6(e, t, n, r) {
  for (var i = -1, o = e == null ? 0 : e.length; ++i < o; ) {
    var a = e[i];
    t(r, a, n(a), e);
  }
  return r;
}
function tS(e) {
  return function(t, n, r) {
    for (var i = -1, o = Object(t), a = r(t), s = a.length; s--; ) {
      var l = a[e ? s : ++i];
      if (n(o[l], l, o) === !1)
        break;
    }
    return t;
  };
}
var Ny = tS();
function Zi(e, t) {
  return e && Ny(e, t, wn);
}
function nS(e, t) {
  return function(n, r) {
    if (n == null)
      return n;
    if (!hr(n))
      return e(n, r);
    for (var i = n.length, o = t ? i : -1, a = Object(n); (t ? o-- : ++o < i) && r(a[o], o, a) !== !1; )
      ;
    return n;
  };
}
var Zo = nS(Zi);
function m6(e, t, n, r) {
  return Zo(e, function(i, o, a) {
    t(r, i, n(i), a);
  }), r;
}
function Uf(e, t) {
  return function(n, r) {
    var i = ut(n) ? y6 : m6, o = t ? t() : {};
    return i(n, e, ht(r), o);
  };
}
var _6 = Object.prototype, b6 = _6.hasOwnProperty, w6 = Uf(function(e, t, n) {
  b6.call(e, n) ? ++e[n] : yo(e, n, 1);
});
function x6(e, t) {
  var n = tl(e);
  return t == null ? n : $E(n, t);
}
var E6 = 8;
function My(e, t, n) {
  t = n ? void 0 : t;
  var r = go(e, E6, void 0, void 0, void 0, void 0, void 0, t);
  return r.placeholder = My.placeholder, r;
}
My.placeholder = {};
var S6 = 16;
function Ty(e, t, n) {
  t = n ? void 0 : t;
  var r = go(e, S6, void 0, void 0, void 0, void 0, void 0, t);
  return r.placeholder = Ty.placeholder, r;
}
Ty.placeholder = {};
var ed = function() {
  return En.Date.now();
}, C6 = "Expected a function", O6 = Math.max, A6 = Math.min;
function Yf(e, t, n) {
  var r, i, o, a, s, l, u = 0, c = !1, d = !1, f = !0;
  if (typeof e != "function")
    throw new TypeError(C6);
  t = Xr(t) || 0, an(n) && (c = !!n.leading, d = "maxWait" in n, o = d ? O6(Xr(n.maxWait) || 0, t) : o, f = "trailing" in n ? !!n.trailing : f);
  function h(_) {
    var b = r, T = i;
    return r = i = void 0, u = _, a = e.apply(T, b), a;
  }
  function p(_) {
    return u = _, s = setTimeout(y, t), c ? h(_) : a;
  }
  function v(_) {
    var b = _ - l, T = _ - u, R = t - b;
    return d ? A6(R, o - T) : R;
  }
  function g(_) {
    var b = _ - l, T = _ - u;
    return l === void 0 || b >= t || b < 0 || d && T >= o;
  }
  function y() {
    var _ = ed();
    if (g(_))
      return m(_);
    s = setTimeout(y, v(_));
  }
  function m(_) {
    return s = void 0, f && r ? h(_) : (r = i = void 0, a);
  }
  function E() {
    s !== void 0 && clearTimeout(s), u = 0, r = l = i = s = void 0;
  }
  function w() {
    return s === void 0 ? a : m(ed());
  }
  function S() {
    var _ = ed(), b = g(_);
    if (r = arguments, i = this, l = _, b) {
      if (s === void 0)
        return p(l);
      if (d)
        return clearTimeout(s), s = setTimeout(y, t), h(l);
    }
    return s === void 0 && (s = setTimeout(y, t)), a;
  }
  return S.cancel = E, S.flush = w, S;
}
function N6(e, t) {
  return e == null || e !== e ? t : e;
}
var rS = Object.prototype, M6 = rS.hasOwnProperty, T6 = St(function(e, t) {
  e = Object(e);
  var n = -1, r = t.length, i = r > 2 ? t[2] : void 0;
  for (i && Yn(t[0], t[1], i) && (r = 1); ++n < r; )
    for (var o = t[n], a = pr(o), s = -1, l = a.length; ++s < l; ) {
      var u = a[s], c = e[u];
      (c === void 0 || Ni(c, rS[u]) && !M6.call(e, u)) && (e[u] = o[u]);
    }
  return e;
});
function wv(e, t, n) {
  (n !== void 0 && !Ni(e[t], n) || n === void 0 && !(t in e)) && yo(e, t, n);
}
function vn(e) {
  return fn(e) && hr(e);
}
function xv(e, t) {
  if (!(t === "constructor" && typeof e[t] == "function") && t != "__proto__")
    return e[t];
}
function iS(e) {
  return Ki(e, pr(e));
}
function P6(e, t, n, r, i, o, a) {
  var s = xv(e, n), l = xv(t, n), u = a.get(l);
  if (u) {
    wv(e, n, u);
    return;
  }
  var c = o ? o(s, l, n + "", e, t, a) : void 0, d = c === void 0;
  if (d) {
    var f = ut(l), h = !f && zo(l), p = !f && !h && ol(l);
    c = l, f || h || p ? ut(s) ? c = s : vn(s) ? c = lr(s) : h ? (d = !1, c = IE(l, !0)) : p ? (d = !1, c = zE(l, !0)) : c = [] : Xu(l) || Ma(l) ? (c = s, Ma(s) ? c = iS(s) : (!an(s) || po(s)) && (c = FE(l))) : d = !1;
  }
  d && (a.set(l, c), i(c, l, r, o, a), a.delete(l)), wv(e, n, c);
}
function Kf(e, t, n, r, i) {
  e !== t && Ny(t, function(o, a) {
    if (i || (i = new bi()), an(o))
      P6(e, t, a, n, Kf, r, i);
    else {
      var s = r ? r(xv(e, a), o, a + "", e, t, i) : void 0;
      s === void 0 && (s = o), wv(e, a, s);
    }
  }, pr);
}
function oS(e, t, n, r, i, o) {
  return an(e) && an(t) && (o.set(t, e), Kf(e, t, void 0, oS, o), o.delete(t)), e;
}
var aS = il(function(e, t, n, r) {
  Kf(e, t, n, r);
}), D6 = St(function(e) {
  return e.push(void 0, oS), Mr(aS, void 0, e);
}), R6 = "Expected a function";
function sS(e, t, n) {
  if (typeof e != "function")
    throw new TypeError(R6);
  return setTimeout(function() {
    e.apply(void 0, n);
  }, t);
}
var L6 = St(function(e, t) {
  return sS(e, 1, t);
}), $6 = St(function(e, t, n) {
  return sS(e, Xr(t) || 0, n);
});
function Py(e, t, n) {
  for (var r = -1, i = e == null ? 0 : e.length; ++r < i; )
    if (n(t, e[r]))
      return !0;
  return !1;
}
var k6 = 200;
function Yu(e, t, n, r) {
  var i = -1, o = Bf, a = !0, s = e.length, l = [], u = t.length;
  if (!s)
    return l;
  n && (t = cn(t, Tr(n))), r ? (o = Py, a = !1) : t.length >= k6 && (o = Cu, a = !1, t = new Pa(t));
  e:
    for (; ++i < s; ) {
      var c = e[i], d = n == null ? c : n(c);
      if (c = r || c !== 0 ? c : 0, a && d === d) {
        for (var f = u; f--; )
          if (t[f] === d)
            continue e;
        l.push(c);
      } else o(t, d, r) || l.push(c);
    }
  return l;
}
var I6 = St(function(e, t) {
  return vn(e) ? Yu(e, $n(t, 1, vn, !0)) : [];
});
function dr(e) {
  var t = e == null ? 0 : e.length;
  return t ? e[t - 1] : void 0;
}
var B6 = St(function(e, t) {
  var n = dr(t);
  return vn(n) && (n = void 0), vn(e) ? Yu(e, $n(t, 1, vn, !0), ht(n)) : [];
}), j6 = St(function(e, t) {
  var n = dr(t);
  return vn(n) && (n = void 0), vn(e) ? Yu(e, $n(t, 1, vn, !0), void 0, n) : [];
}), z6 = $f(function(e, t) {
  return e / t;
}, 1);
function F6(e, t, n) {
  var r = e == null ? 0 : e.length;
  return r ? (t = n || t === void 0 ? 1 : yt(t), Qr(e, t < 0 ? 0 : t, r)) : [];
}
function H6(e, t, n) {
  var r = e == null ? 0 : e.length;
  return r ? (t = n || t === void 0 ? 1 : yt(t), t = r - t, Qr(e, 0, t < 0 ? 0 : t)) : [];
}
function qf(e, t, n, r) {
  for (var i = e.length, o = r ? i : -1; (r ? o-- : ++o < i) && t(e[o], o, e); )
    ;
  return n ? Qr(e, r ? 0 : o, r ? o + 1 : i) : Qr(e, r ? o + 1 : 0, r ? i : o);
}
function V6(e, t) {
  return e && e.length ? qf(e, ht(t), !0, !0) : [];
}
function W6(e, t) {
  return e && e.length ? qf(e, ht(t), !0) : [];
}
function Ji(e) {
  return typeof e == "function" ? e : tr;
}
function st(e, t) {
  var n = ut(e) ? ti : Zo;
  return n(e, Ji(t));
}
function G6(e, t) {
  for (var n = e == null ? 0 : e.length; n-- && t(e[n], n, e) !== !1; )
    ;
  return e;
}
var lS = tS(!0);
function Dy(e, t) {
  return e && lS(e, t, wn);
}
var uS = nS(Dy, !0);
function cb(e, t) {
  var n = ut(e) ? G6 : uS;
  return n(e, Ji(t));
}
function X6(e, t, n) {
  e = Wt(e), t = Nr(t);
  var r = e.length;
  n = n === void 0 ? r : Ga(yt(n), 0, r);
  var i = n;
  return n -= t.length, n >= 0 && e.slice(n, i) == t;
}
function U6(e, t) {
  return cn(t, function(n) {
    return [n, e[n]];
  });
}
function Y6(e) {
  var t = -1, n = Array(e.size);
  return e.forEach(function(r) {
    n[++t] = [r, r];
  }), n;
}
var K6 = "[object Map]", q6 = "[object Set]";
function cS(e) {
  return function(t) {
    var n = jn(t);
    return n == K6 ? Ey(t) : n == q6 ? Y6(t) : U6(t, e(t));
  };
}
var Gi = cS(wn), db = cS(pr), Z6 = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#39;"
}, J6 = gy(Z6), dS = /[&<>"']/g, Q6 = RegExp(dS.source);
function fS(e) {
  return e = Wt(e), e && Q6.test(e) ? e.replace(dS, J6) : e;
}
var hS = /[\\^$.*+?()[\]{}|]/g, eI = RegExp(hS.source);
function tI(e) {
  return e = Wt(e), e && eI.test(e) ? e.replace(hS, "\\$&") : e;
}
function pS(e, t) {
  for (var n = -1, r = e == null ? 0 : e.length; ++n < r; )
    if (!t(e[n], n, e))
      return !1;
  return !0;
}
function nI(e, t) {
  var n = !0;
  return Zo(e, function(r, i, o) {
    return n = !!t(r, i, o), n;
  }), n;
}
function rI(e, t, n) {
  var r = ut(e) ? pS : nI;
  return n && Yn(e, t, n) && (t = void 0), r(e, ht(t));
}
var iI = 4294967295;
function vS(e) {
  return e ? Ga(yt(e), 0, iI) : 0;
}
function oI(e, t, n, r) {
  var i = e.length;
  for (n = yt(n), n < 0 && (n = -n > i ? 0 : i + n), r = r === void 0 || r > i ? i : yt(r), r < 0 && (r += i), r = n > r ? 0 : vS(r); n < r; )
    e[n++] = t;
  return e;
}
function aI(e, t, n, r) {
  var i = e == null ? 0 : e.length;
  return i ? (n && typeof n != "number" && Yn(e, t, n) && (n = 0, r = i), oI(e, t, n, r)) : [];
}
function gS(e, t) {
  var n = [];
  return Zo(e, function(r, i, o) {
    t(r, i, o) && n.push(r);
  }), n;
}
function zl(e, t) {
  var n = ut(e) ? qo : gS;
  return n(e, ht(t));
}
function yS(e) {
  return function(t, n, r) {
    var i = Object(t);
    if (!hr(t)) {
      var o = ht(n);
      t = wn(t), n = function(s) {
        return o(i[s], s, i);
      };
    }
    var a = e(t, n, r);
    return a > -1 ? i[o ? t[a] : a] : void 0;
  };
}
var sI = Math.max;
function Ry(e, t, n) {
  var r = e == null ? 0 : e.length;
  if (!r)
    return -1;
  var i = n == null ? 0 : yt(n);
  return i < 0 && (i = sI(r + i, 0)), If(e, ht(t), i);
}
var Fo = yS(Ry);
function mS(e, t, n) {
  var r;
  return n(e, function(i, o, a) {
    if (t(i, o, a))
      return r = o, !1;
  }), r;
}
function lI(e, t) {
  return mS(e, ht(t), Zi);
}
var uI = Math.max, cI = Math.min;
function _S(e, t, n) {
  var r = e == null ? 0 : e.length;
  if (!r)
    return -1;
  var i = r - 1;
  return n !== void 0 && (i = yt(n), i = n < 0 ? uI(r + i, 0) : cI(i, r - 1)), If(e, ht(t), i, !0);
}
var dI = yS(_S);
function fI(e, t) {
  return mS(e, ht(t), Dy);
}
function fb(e) {
  return e && e.length ? e[0] : void 0;
}
function bS(e, t) {
  var n = -1, r = hr(e) ? Array(e.length) : [];
  return Zo(e, function(i, o, a) {
    r[++n] = t(i, o, a);
  }), r;
}
function Kn(e, t) {
  var n = ut(e) ? cn : bS;
  return n(e, ht(t));
}
function hI(e, t) {
  return $n(Kn(e, t), 1);
}
var pI = 1 / 0;
function vI(e, t) {
  return $n(Kn(e, t), pI);
}
function gI(e, t, n) {
  return n = n === void 0 ? 1 : yt(n), $n(Kn(e, t), n);
}
var yI = 1 / 0;
function mI(e) {
  var t = e == null ? 0 : e.length;
  return t ? $n(e, yI) : [];
}
function _I(e, t) {
  var n = e == null ? 0 : e.length;
  return n ? (t = t === void 0 ? 1 : yt(t), $n(e, t)) : [];
}
var bI = 512;
function wI(e) {
  return go(e, bI);
}
var xI = yy("floor"), EI = "Expected a function", SI = 8, CI = 32, OI = 128, AI = 256;
function wS(e) {
  return bo(function(t) {
    var n = t.length, r = n, i = Zr.prototype.thru;
    for (e && t.reverse(); r--; ) {
      var o = t[r];
      if (typeof o != "function")
        throw new TypeError(EI);
      if (i && !a && Qc(o) == "wrapper")
        var a = new Zr([], !0);
    }
    for (r = a ? r : n; ++r < n; ) {
      o = t[r];
      var s = Qc(o), l = s == "wrapper" ? iy(o) : void 0;
      l && vv(l[0]) && l[1] == (OI | SI | CI | AI) && !l[4].length && l[9] == 1 ? a = a[Qc(l[0])].apply(a, l[3]) : a = o.length == 1 && vv(o) ? a[s]() : a.thru(o);
    }
    return function() {
      var u = arguments, c = u[0];
      if (a && u.length == 1 && ut(c))
        return a.plant(c).value();
      for (var d = 0, f = n ? t[d].apply(this, u) : c; ++d < n; )
        f = t[d].call(this, f);
      return f;
    };
  });
}
var NI = wS(), MI = wS(!0);
function TI(e, t) {
  return e == null ? e : Ny(e, Ji(t), pr);
}
function PI(e, t) {
  return e == null ? e : lS(e, Ji(t), pr);
}
function DI(e, t) {
  return e && Zi(e, Ji(t));
}
function RI(e, t) {
  return e && Dy(e, Ji(t));
}
function LI(e) {
  for (var t = -1, n = e == null ? 0 : e.length, r = {}; ++t < n; ) {
    var i = e[t];
    r[i[0]] = i[1];
  }
  return r;
}
function Zf(e, t) {
  return qo(t, function(n) {
    return po(e[n]);
  });
}
function $I(e) {
  return e == null ? [] : Zf(e, wn(e));
}
function kI(e) {
  return e == null ? [] : Zf(e, pr(e));
}
var II = Object.prototype, BI = II.hasOwnProperty, jI = Uf(function(e, t, n) {
  BI.call(e, n) ? e[n].push(t) : yo(e, n, [t]);
});
function Ly(e, t) {
  return e > t;
}
function Jf(e) {
  return function(t, n) {
    return typeof t == "string" && typeof n == "string" || (t = Xr(t), n = Xr(n)), e(t, n);
  };
}
var zI = Jf(Ly), FI = Jf(function(e, t) {
  return e >= t;
}), HI = Object.prototype, VI = HI.hasOwnProperty;
function WI(e, t) {
  return e != null && VI.call(e, t);
}
function $s(e, t) {
  return e != null && ZE(e, t, WI);
}
var GI = Math.max, XI = Math.min;
function UI(e, t, n) {
  return e >= XI(t, n) && e < GI(t, n);
}
function YI(e, t, n) {
  return t = uo(t), n === void 0 ? (n = t, t = 0) : n = uo(n), e = Xr(e), UI(e, t, n);
}
var KI = "[object String]";
function Qf(e) {
  return typeof e == "string" || !ut(e) && fn(e) && er(e) == KI;
}
function $y(e, t) {
  return cn(t, function(n) {
    return e[n];
  });
}
function ul(e) {
  return e == null ? [] : $y(e, wn(e));
}
var qI = Math.max;
function ZI(e, t, n, r) {
  e = hr(e) ? e : ul(e), n = n && !r ? yt(n) : 0;
  var i = e.length;
  return n < 0 && (n = qI(i + n, 0)), Qf(e) ? n <= i && e.indexOf(t, n) > -1 : !!i && nl(e, t, n) > -1;
}
var JI = Math.max;
function xS(e, t, n) {
  var r = e == null ? 0 : e.length;
  if (!r)
    return -1;
  var i = n == null ? 0 : yt(n);
  return i < 0 && (i = JI(r + i, 0)), nl(e, t, i);
}
function QI(e) {
  var t = e == null ? 0 : e.length;
  return t ? Qr(e, 0, -1) : [];
}
var eB = Math.min;
function ky(e, t, n) {
  for (var r = n ? Py : Bf, i = e[0].length, o = e.length, a = o, s = Array(o), l = 1 / 0, u = []; a--; ) {
    var c = e[a];
    a && t && (c = cn(c, Tr(t))), l = eB(c.length, l), s[a] = !n && (t || i >= 120 && c.length >= 120) ? new Pa(a && c) : void 0;
  }
  c = e[0];
  var d = -1, f = s[0];
  e:
    for (; ++d < i && u.length < l; ) {
      var h = c[d], p = t ? t(h) : h;
      if (h = n || h !== 0 ? h : 0, !(f ? Cu(f, p) : r(u, p, n))) {
        for (a = o; --a; ) {
          var v = s[a];
          if (!(v ? Cu(v, p) : r(e[a], p, n)))
            continue e;
        }
        f && f.push(p), u.push(h);
      }
    }
  return u;
}
function Iy(e) {
  return vn(e) ? e : [];
}
var tB = St(function(e) {
  var t = cn(e, Iy);
  return t.length && t[0] === e[0] ? ky(t) : [];
}), nB = St(function(e) {
  var t = dr(e), n = cn(e, Iy);
  return t === dr(n) ? t = void 0 : n.pop(), n.length && n[0] === e[0] ? ky(n, ht(t)) : [];
}), rB = St(function(e) {
  var t = dr(e), n = cn(e, Iy);
  return t = typeof t == "function" ? t : void 0, t && n.pop(), n.length && n[0] === e[0] ? ky(n, void 0, t) : [];
});
function iB(e, t, n, r) {
  return Zi(e, function(i, o, a) {
    t(r, n(i), o, a);
  }), r;
}
function ES(e, t) {
  return function(n, r) {
    return iB(n, e, t(r), {});
  };
}
var oB = Object.prototype, aB = oB.toString, sB = ES(function(e, t, n) {
  t != null && typeof t.toString != "function" && (t = aB.call(t)), e[t] = n;
}, oy(tr)), SS = Object.prototype, lB = SS.hasOwnProperty, uB = SS.toString, cB = ES(function(e, t, n) {
  t != null && typeof t.toString != "function" && (t = uB.call(t)), lB.call(e, t) ? e[t].push(n) : e[t] = [n];
}, ht);
function CS(e, t) {
  return t.length < 2 ? e : Wa(e, Qr(t, 0, -1));
}
function Ku(e, t, n) {
  t = Uo(t, e), e = CS(e, t);
  var r = e == null ? e : e[qi(dr(t))];
  return r == null ? void 0 : Mr(r, e, n);
}
var dB = St(Ku), fB = St(function(e, t, n) {
  var r = -1, i = typeof t == "function", o = hr(e) ? Array(e.length) : [];
  return Zo(e, function(a) {
    o[++r] = i ? Mr(t, a, n) : Ku(a, t, n);
  }), o;
}), hB = "[object ArrayBuffer]";
function pB(e) {
  return fn(e) && er(e) == hB;
}
var hb = Jr && Jr.isArrayBuffer, vB = hb ? Tr(hb) : pB, gB = "[object Boolean]";
function Cd(e) {
  return e === !0 || e === !1 || fn(e) && er(e) == gB;
}
var yB = "[object Date]";
function mB(e) {
  return fn(e) && er(e) == yB;
}
var pb = Jr && Jr.isDate, _B = pb ? Tr(pb) : mB;
function bB(e) {
  return fn(e) && e.nodeType === 1 && !Xu(e);
}
var wB = "[object Map]", xB = "[object Set]", EB = Object.prototype, SB = EB.hasOwnProperty;
function By(e) {
  if (e == null)
    return !0;
  if (hr(e) && (ut(e) || typeof e == "string" || typeof e.splice == "function" || zo(e) || ol(e) || Ma(e)))
    return !e.length;
  var t = jn(e);
  if (t == wB || t == xB)
    return !e.size;
  if (Gu(e))
    return !uy(e).length;
  for (var n in e)
    if (SB.call(e, n))
      return !1;
  return !0;
}
function Od(e, t) {
  return Uu(e, t);
}
function CB(e, t, n) {
  n = typeof n == "function" ? n : void 0;
  var r = n ? n(e, t) : void 0;
  return r === void 0 ? Uu(e, t, void 0, n) : !!r;
}
var OB = En.isFinite;
function AB(e) {
  return typeof e == "number" && OB(e);
}
function OS(e) {
  return typeof e == "number" && e == yt(e);
}
function NB(e, t) {
  return e === t || Sy(e, t, Cy(t));
}
function MB(e, t, n) {
  return n = typeof n == "function" ? n : void 0, Sy(e, t, Cy(t), n);
}
var TB = "[object Number]";
function AS(e) {
  return typeof e == "number" || fn(e) && er(e) == TB;
}
function PB(e) {
  return AS(e) && e != +e;
}
var DB = Jc ? po : ly, RB = "Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";
function LB(e) {
  if (DB(e))
    throw new Error(RB);
  return Vx(e);
}
function Ea(e) {
  return e == null;
}
function $B(e) {
  return e === null;
}
var kB = "[object RegExp]";
function IB(e) {
  return fn(e) && er(e) == kB;
}
var vb = Jr && Jr.isRegExp, jy = vb ? Tr(vb) : IB, gb = 9007199254740991;
function BB(e) {
  return OS(e) && e >= -gb && e <= gb;
}
function Da(e) {
  return e === void 0;
}
var jB = "[object WeakMap]";
function zB(e) {
  return fn(e) && jn(e) == jB;
}
var FB = "[object WeakSet]";
function HB(e) {
  return fn(e) && er(e) == FB;
}
var VB = 1;
function WB(e) {
  return ht(typeof e == "function" ? e : Ur(e, VB));
}
var GB = Array.prototype, XB = GB.join;
function UB(e, t) {
  return e == null ? "" : XB.call(e, t);
}
var YB = ll(function(e, t, n) {
  return e + (n ? "-" : "") + t.toLowerCase();
}), KB = Uf(function(e, t, n) {
  yo(e, n, t);
});
function qB(e, t, n) {
  for (var r = n + 1; r--; )
    if (e[r] === t)
      return r;
  return r;
}
var ZB = Math.max, JB = Math.min;
function QB(e, t, n) {
  var r = e == null ? 0 : e.length;
  if (!r)
    return -1;
  var i = r;
  return n !== void 0 && (i = yt(n), i = i < 0 ? ZB(r + i, 0) : JB(i, r - 1)), t === t ? qB(e, t, i) : If(e, qx, i, !0);
}
var e7 = ll(function(e, t, n) {
  return e + (n ? " " : "") + t.toLowerCase();
}), t7 = yE("toLowerCase");
function zy(e, t) {
  return e < t;
}
var n7 = Jf(zy), r7 = Jf(function(e, t) {
  return e <= t;
});
function NS(e, t) {
  var n = {};
  return t = ht(t), Zi(e, function(r, i, o) {
    yo(n, t(r, i, o), r);
  }), n;
}
function i7(e, t) {
  var n = {};
  return t = ht(t), Zi(e, function(r, i, o) {
    yo(n, i, t(r, i, o));
  }), n;
}
var o7 = 1;
function a7(e) {
  return qE(Ur(e, o7));
}
var s7 = 1;
function l7(e, t) {
  return JE(e, Ur(t, s7));
}
function eh(e, t, n) {
  for (var r = -1, i = e.length; ++r < i; ) {
    var o = e[r], a = t(o);
    if (a != null && (s === void 0 ? a === a && !Ar(a) : n(a, s)))
      var s = a, l = o;
  }
  return l;
}
function u7(e) {
  return e && e.length ? eh(e, tr, Ly) : void 0;
}
function c7(e, t) {
  return e && e.length ? eh(e, ht(t), Ly) : void 0;
}
function Fy(e, t) {
  for (var n, r = -1, i = e.length; ++r < i; ) {
    var o = t(e[r]);
    o !== void 0 && (n = n === void 0 ? o : n + o);
  }
  return n;
}
var d7 = NaN;
function MS(e, t) {
  var n = e == null ? 0 : e.length;
  return n ? Fy(e, t) / n : d7;
}
function f7(e) {
  return MS(e, tr);
}
function h7(e, t) {
  return MS(e, ht(t));
}
var ks = il(function(e, t, n) {
  Kf(e, t, n);
}), p7 = St(function(e, t) {
  return function(n) {
    return Ku(n, e, t);
  };
}), v7 = St(function(e, t) {
  return function(n) {
    return Ku(e, n, t);
  };
});
function g7(e) {
  return e && e.length ? eh(e, tr, zy) : void 0;
}
function y7(e, t) {
  return e && e.length ? eh(e, ht(t), zy) : void 0;
}
function TS(e, t, n) {
  var r = wn(t), i = Zf(t, r), o = !(an(n) && "chain" in n) || !!n.chain, a = po(e);
  return ti(i, function(s) {
    var l = t[s];
    e[s] = l, a && (e.prototype[s] = function() {
      var u = this.__chain__;
      if (o || u) {
        var c = e(this.__wrapped__), d = c.__actions__ = lr(this.__actions__);
        return d.push({ func: l, args: arguments, thisArg: e }), c.__chain__ = u, c;
      }
      return l.apply(e, Yo([this.value()], arguments));
    });
  }), e;
}
var m7 = $f(function(e, t) {
  return e * t;
}, 1), _7 = "Expected a function";
function qu(e) {
  if (typeof e != "function")
    throw new TypeError(_7);
  return function() {
    var t = arguments;
    switch (t.length) {
      case 0:
        return !e.call(this);
      case 1:
        return !e.call(this, t[0]);
      case 2:
        return !e.call(this, t[0], t[1]);
      case 3:
        return !e.call(this, t[0], t[1], t[2]);
    }
    return !e.apply(this, t);
  };
}
function b7(e) {
  for (var t, n = []; !(t = e.next()).done; )
    n.push(t.value);
  return n;
}
var w7 = "[object Map]", x7 = "[object Set]", mp = Vn ? Vn.iterator : void 0;
function PS(e) {
  if (!e)
    return [];
  if (hr(e))
    return Qf(e) ? Ci(e) : lr(e);
  if (mp && e[mp])
    return b7(e[mp]());
  var t = jn(e), n = t == w7 ? Ey : t == x7 ? Xf : ul;
  return n(e);
}
function E7() {
  this.__values__ === void 0 && (this.__values__ = PS(this.value()));
  var e = this.__index__ >= this.__values__.length, t = e ? void 0 : this.__values__[this.__index__++];
  return { done: e, value: t };
}
function DS(e, t) {
  var n = e.length;
  if (n)
    return t += t < 0 ? n : 0, vo(t, n) ? e[t] : void 0;
}
function S7(e, t) {
  return e && e.length ? DS(e, yt(t)) : void 0;
}
function C7(e) {
  return e = yt(e), St(function(t) {
    return DS(t, e);
  });
}
function Hy(e, t) {
  return t = Uo(t, e), e = CS(e, t), e == null || delete e[qi(dr(t))];
}
function O7(e) {
  return Xu(e) ? void 0 : e;
}
var A7 = 1, N7 = 2, M7 = 4, T7 = bo(function(e, t) {
  var n = {};
  if (e == null)
    return n;
  var r = !1;
  t = cn(t, function(o) {
    return o = Uo(o, e), r || (r = o.length > 1), o;
  }), Ki(e, by(e), n), r && (n = Ur(n, A7 | N7 | M7, O7));
  for (var i = t.length; i--; )
    Hy(n, t[i]);
  return n;
});
function Zu(e, t, n, r) {
  if (!an(e))
    return e;
  t = Uo(t, e);
  for (var i = -1, o = t.length, a = o - 1, s = e; s != null && ++i < o; ) {
    var l = qi(t[i]), u = n;
    if (l === "__proto__" || l === "constructor" || l === "prototype")
      return e;
    if (i != a) {
      var c = s[l];
      u = r ? r(c, l, s) : void 0, u === void 0 && (u = an(c) ? c : vo(t[i + 1]) ? [] : {});
    }
    Wu(s, l, u), s = s[l];
  }
  return e;
}
function RS(e, t, n) {
  for (var r = -1, i = t.length, o = {}; ++r < i; ) {
    var a = t[r], s = Wa(e, a);
    n(s, a) && Zu(o, Uo(a, e), s);
  }
  return o;
}
function LS(e, t) {
  if (e == null)
    return {};
  var n = cn(by(e), function(r) {
    return [r];
  });
  return t = ht(t), RS(e, n, function(r, i) {
    return t(r, i[0]);
  });
}
function P7(e, t) {
  return LS(e, qu(ht(t)));
}
function D7(e) {
  return cE(2, e);
}
function R7(e, t) {
  var n = e.length;
  for (e.sort(t); n--; )
    e[n] = e[n].value;
  return e;
}
function $S(e, t) {
  if (e !== t) {
    var n = e !== void 0, r = e === null, i = e === e, o = Ar(e), a = t !== void 0, s = t === null, l = t === t, u = Ar(t);
    if (!s && !u && !o && e > t || o && a && l && !s && !u || r && a && l || !n && l || !i)
      return 1;
    if (!r && !o && !u && e < t || u && n && i && !r && !o || s && n && i || !a && i || !l)
      return -1;
  }
  return 0;
}
function L7(e, t, n) {
  for (var r = -1, i = e.criteria, o = t.criteria, a = i.length, s = n.length; ++r < a; ) {
    var l = $S(i[r], o[r]);
    if (l) {
      if (r >= s)
        return l;
      var u = n[r];
      return l * (u == "desc" ? -1 : 1);
    }
  }
  return e.index - t.index;
}
function kS(e, t, n) {
  t.length ? t = cn(t, function(o) {
    return ut(o) ? function(a) {
      return Wa(a, o.length === 1 ? o[0] : o);
    } : o;
  }) : t = [tr];
  var r = -1;
  t = cn(t, Tr(ht));
  var i = bS(e, function(o, a, s) {
    var l = cn(t, function(u) {
      return u(o);
    });
    return { criteria: l, index: ++r, value: o };
  });
  return R7(i, function(o, a) {
    return L7(o, a, n);
  });
}
function $7(e, t, n, r) {
  return e == null ? [] : (ut(t) || (t = t == null ? [] : [t]), n = r ? void 0 : n, ut(n) || (n = n == null ? [] : [n]), kS(e, t, n));
}
function Vy(e) {
  return bo(function(t) {
    return t = cn(t, Tr(ht)), St(function(n) {
      var r = this;
      return e(t, function(i) {
        return Mr(i, r, n);
      });
    });
  });
}
var k7 = Vy(cn), I7 = St, B7 = Math.min, j7 = I7(function(e, t) {
  t = t.length == 1 && ut(t[0]) ? cn(t[0], Tr(ht)) : cn($n(t, 1), Tr(ht));
  var n = t.length;
  return St(function(r) {
    for (var i = -1, o = B7(r.length, n); ++i < o; )
      r[i] = t[i].call(this, r[i]);
    return Mr(e, this, r);
  });
}), z7 = Vy(pS), F7 = Vy(xy), H7 = 9007199254740991, V7 = Math.floor;
function Ev(e, t) {
  var n = "";
  if (!e || t < 1 || t > H7)
    return n;
  do
    t % 2 && (n += e), t = V7(t / 2), t && (e += e);
  while (t);
  return n;
}
var W7 = Ay("length"), IS = "\\ud800-\\udfff", G7 = "\\u0300-\\u036f", X7 = "\\ufe20-\\ufe2f", U7 = "\\u20d0-\\u20ff", Y7 = G7 + X7 + U7, K7 = "\\ufe0e\\ufe0f", q7 = "[" + IS + "]", Sv = "[" + Y7 + "]", Cv = "\\ud83c[\\udffb-\\udfff]", Z7 = "(?:" + Sv + "|" + Cv + ")", BS = "[^" + IS + "]", jS = "(?:\\ud83c[\\udde6-\\uddff]){2}", zS = "[\\ud800-\\udbff][\\udc00-\\udfff]", J7 = "\\u200d", FS = Z7 + "?", HS = "[" + K7 + "]?", Q7 = "(?:" + J7 + "(?:" + [BS, jS, zS].join("|") + ")" + HS + FS + ")*", ej = HS + FS + Q7, tj = "(?:" + [BS + Sv + "?", Sv, jS, zS, q7].join("|") + ")", yb = RegExp(Cv + "(?=" + Cv + ")|" + tj + ej, "g");
function nj(e) {
  for (var t = yb.lastIndex = 0; yb.test(e); )
    ++t;
  return t;
}
function cl(e) {
  return sl(e) ? nj(e) : W7(e);
}
var rj = Math.ceil;
function Ad(e, t) {
  t = t === void 0 ? " " : Nr(t);
  var n = t.length;
  if (n < 2)
    return n ? Ev(t, e) : t;
  var r = Ev(t, rj(e / cl(t)));
  return sl(t) ? Ko(Ci(r), 0, e).join("") : r.slice(0, e);
}
var ij = Math.ceil, oj = Math.floor;
function aj(e, t, n) {
  e = Wt(e), t = yt(t);
  var r = t ? cl(e) : 0;
  if (!t || r >= t)
    return e;
  var i = (t - r) / 2;
  return Ad(oj(i), n) + e + Ad(ij(i), n);
}
function sj(e, t, n) {
  e = Wt(e), t = yt(t);
  var r = t ? cl(e) : 0;
  return t && r < t ? e + Ad(t - r, n) : e;
}
function lj(e, t, n) {
  e = Wt(e), t = yt(t);
  var r = t ? cl(e) : 0;
  return t && r < t ? Ad(t - r, n) + e : e;
}
var uj = /^\s+/, cj = En.parseInt;
function dj(e, t, n) {
  return n || t == null ? t = 0 : t && (t = +t), cj(Wt(e).replace(uj, ""), t || 0);
}
var fj = 32, th = St(function(e, t) {
  var n = jo(t, rl(th));
  return go(e, fj, void 0, t, n);
});
th.placeholder = {};
var hj = 64, Wy = St(function(e, t) {
  var n = jo(t, rl(Wy));
  return go(e, hj, void 0, t, n);
});
Wy.placeholder = {};
var pj = Uf(function(e, t, n) {
  e[n ? 0 : 1].push(t);
}, function() {
  return [[], []];
});
function vj(e, t) {
  return RS(e, t, function(n, r) {
    return Oy(e, r);
  });
}
var ma = bo(function(e, t) {
  return e == null ? {} : vj(e, t);
});
function gj(e) {
  for (var t, n = this; n instanceof kf; ) {
    var r = Ux(n);
    r.__index__ = 0, r.__values__ = void 0, t ? i.__wrapped__ = r : t = r;
    var i = r;
    n = n.__wrapped__;
  }
  return i.__wrapped__ = e, t;
}
function yj(e) {
  return function(t) {
    return e == null ? void 0 : Wa(e, t);
  };
}
function mj(e, t, n, r) {
  for (var i = n - 1, o = e.length; ++i < o; )
    if (r(e[i], t))
      return i;
  return -1;
}
var _j = Array.prototype, mb = _j.splice;
function Gy(e, t, n, r) {
  var i = r ? mj : nl, o = -1, a = t.length, s = e;
  for (e === t && (t = lr(t)), n && (s = cn(e, Tr(n))); ++o < a; )
    for (var l = 0, u = t[o], c = n ? n(u) : u; (l = i(s, c, l, r)) > -1; )
      s !== e && mb.call(s, l, 1), mb.call(e, l, 1);
  return e;
}
function VS(e, t) {
  return e && e.length && t && t.length ? Gy(e, t) : e;
}
var bj = St(VS);
function wj(e, t, n) {
  return e && e.length && t && t.length ? Gy(e, t, ht(n)) : e;
}
function xj(e, t, n) {
  return e && e.length && t && t.length ? Gy(e, t, void 0, n) : e;
}
var Ej = Array.prototype, Sj = Ej.splice;
function WS(e, t) {
  for (var n = e ? t.length : 0, r = n - 1; n--; ) {
    var i = t[n];
    if (n == r || i !== o) {
      var o = i;
      vo(i) ? Sj.call(e, i, 1) : Hy(e, i);
    }
  }
  return e;
}
var Cj = bo(function(e, t) {
  var n = e == null ? 0 : e.length, r = dy(e, t);
  return WS(e, cn(t, function(i) {
    return vo(i, n) ? +i : i;
  }).sort($S)), r;
}), Oj = Math.floor, Aj = Math.random;
function Xy(e, t) {
  return e + Oj(Aj() * (t - e + 1));
}
var Nj = parseFloat, Mj = Math.min, Tj = Math.random;
function Pj(e, t, n) {
  if (n && typeof n != "boolean" && Yn(e, t, n) && (t = n = void 0), n === void 0 && (typeof t == "boolean" ? (n = t, t = void 0) : typeof e == "boolean" && (n = e, e = void 0)), e === void 0 && t === void 0 ? (e = 0, t = 1) : (e = uo(e), t === void 0 ? (t = e, e = 0) : t = uo(t)), e > t) {
    var r = e;
    e = t, t = r;
  }
  if (n || e % 1 || t % 1) {
    var i = Tj();
    return Mj(e + i * (t - e + Nj("1e-" + ((i + "").length - 1))), t);
  }
  return Xy(e, t);
}
var Dj = Math.ceil, Rj = Math.max;
function Lj(e, t, n, r) {
  for (var i = -1, o = Rj(Dj((t - e) / (n || 1)), 0), a = Array(o); o--; )
    a[r ? o : ++i] = e, e += n;
  return a;
}
function GS(e) {
  return function(t, n, r) {
    return r && typeof r != "number" && Yn(t, n, r) && (n = r = void 0), t = uo(t), n === void 0 ? (n = t, t = 0) : n = uo(n), r = r === void 0 ? t < n ? 1 : -1 : uo(r), Lj(t, n, r, e);
  };
}
var $j = GS(), kj = GS(!0), Ij = 256, Bj = bo(function(e, t) {
  return go(e, Ij, void 0, void 0, void 0, t);
});
function XS(e, t, n, r, i) {
  return i(e, function(o, a, s) {
    n = r ? (r = !1, o) : t(n, o, a, s);
  }), n;
}
function US(e, t, n) {
  var r = ut(e) ? vy : XS, i = arguments.length < 3;
  return r(e, ht(t), n, i, Zo);
}
function jj(e, t, n, r) {
  var i = e == null ? 0 : e.length;
  for (r && i && (n = e[--i]); i--; )
    n = t(n, e[i], i, e);
  return n;
}
function zj(e, t, n) {
  var r = ut(e) ? jj : XS, i = arguments.length < 3;
  return r(e, ht(t), n, i, uS);
}
function Fj(e, t) {
  var n = ut(e) ? qo : gS;
  return n(e, qu(ht(t)));
}
function Hj(e, t) {
  var n = [];
  if (!(e && e.length))
    return n;
  var r = -1, i = [], o = e.length;
  for (t = ht(t); ++r < o; ) {
    var a = e[r];
    t(a, r, e) && (n.push(a), i.push(r));
  }
  return WS(e, i), n;
}
function Vj(e, t, n) {
  return (n ? Yn(e, t, n) : t === void 0) ? t = 1 : t = yt(t), Ev(Wt(e), t);
}
function Wj() {
  var e = arguments, t = Wt(e[0]);
  return e.length < 3 ? t : t.replace(e[1], e[2]);
}
var Gj = "Expected a function";
function Xj(e, t) {
  if (typeof e != "function")
    throw new TypeError(Gj);
  return t = t === void 0 ? t : yt(t), St(e, t);
}
function Uj(e, t, n) {
  t = Uo(t, e);
  var r = -1, i = t.length;
  for (i || (i = 1, e = void 0); ++r < i; ) {
    var o = e == null ? void 0 : e[qi(t[r])];
    o === void 0 && (r = i, o = n), e = po(o) ? o.call(e) : o;
  }
  return e;
}
var Yj = Array.prototype, Kj = Yj.reverse;
function Ov(e) {
  return e == null ? e : Kj.call(e);
}
var qj = yy("round");
function YS(e) {
  var t = e.length;
  return t ? e[Xy(0, t - 1)] : void 0;
}
function Zj(e) {
  return YS(ul(e));
}
function Jj(e) {
  var t = ut(e) ? YS : Zj;
  return t(e);
}
function nh(e, t) {
  var n = -1, r = e.length, i = r - 1;
  for (t = t === void 0 ? r : t; ++n < t; ) {
    var o = Xy(n, i), a = e[o];
    e[o] = e[n], e[n] = a;
  }
  return e.length = t, e;
}
function Qj(e, t) {
  return nh(lr(e), Ga(t, 0, e.length));
}
function e9(e, t) {
  var n = ul(e);
  return nh(n, Ga(t, 0, n.length));
}
function t9(e, t, n) {
  (n ? Yn(e, t, n) : t === void 0) ? t = 1 : t = yt(t);
  var r = ut(e) ? Qj : e9;
  return r(e, t);
}
function KS(e, t, n) {
  return e == null ? e : Zu(e, t, n);
}
function n9(e, t, n, r) {
  return r = typeof r == "function" ? r : void 0, e == null ? e : Zu(e, t, n, r);
}
function r9(e) {
  return nh(lr(e));
}
function i9(e) {
  return nh(ul(e));
}
function o9(e) {
  var t = ut(e) ? r9 : i9;
  return t(e);
}
var a9 = "[object Map]", s9 = "[object Set]";
function l9(e) {
  if (e == null)
    return 0;
  if (hr(e))
    return Qf(e) ? cl(e) : e.length;
  var t = jn(e);
  return t == a9 || t == s9 ? e.size : uy(e).length;
}
function u9(e, t, n) {
  var r = e == null ? 0 : e.length;
  return r ? (n && typeof n != "number" && Yn(e, t, n) ? (t = 0, n = r) : (t = t == null ? 0 : yt(t), n = n === void 0 ? r : yt(n)), Qr(e, t, n)) : [];
}
var c9 = ll(function(e, t, n) {
  return e + (n ? "_" : "") + t.toLowerCase();
});
function d9(e, t) {
  var n;
  return Zo(e, function(r, i, o) {
    return n = t(r, i, o), !n;
  }), !!n;
}
function f9(e, t, n) {
  var r = ut(e) ? xy : d9;
  return n && Yn(e, t, n) && (t = void 0), r(e, ht(t));
}
var qS = St(function(e, t) {
  if (e == null)
    return [];
  var n = t.length;
  return n > 1 && Yn(e, t[0], t[1]) ? t = [] : n > 2 && Yn(t[0], t[1], t[2]) && (t = [t[0]]), kS(e, $n(t, 1), []);
}), h9 = 4294967295, p9 = h9 - 1, v9 = Math.floor, g9 = Math.min;
function Uy(e, t, n, r) {
  var i = 0, o = e == null ? 0 : e.length;
  if (o === 0)
    return 0;
  t = n(t);
  for (var a = t !== t, s = t === null, l = Ar(t), u = t === void 0; i < o; ) {
    var c = v9((i + o) / 2), d = n(e[c]), f = d !== void 0, h = d === null, p = d === d, v = Ar(d);
    if (a)
      var g = r || p;
    else u ? g = p && (r || f) : s ? g = p && f && (r || !h) : l ? g = p && f && !h && (r || !v) : h || v ? g = !1 : g = r ? d <= t : d < t;
    g ? i = c + 1 : o = c;
  }
  return g9(o, p9);
}
var y9 = 4294967295, m9 = y9 >>> 1;
function rh(e, t, n) {
  var r = 0, i = e == null ? r : e.length;
  if (typeof t == "number" && t === t && i <= m9) {
    for (; r < i; ) {
      var o = r + i >>> 1, a = e[o];
      a !== null && !Ar(a) && (n ? a <= t : a < t) ? r = o + 1 : i = o;
    }
    return i;
  }
  return Uy(e, t, tr, n);
}
function _9(e, t) {
  return rh(e, t);
}
function b9(e, t, n) {
  return Uy(e, t, ht(n));
}
function w9(e, t) {
  var n = e == null ? 0 : e.length;
  if (n) {
    var r = rh(e, t);
    if (r < n && Ni(e[r], t))
      return r;
  }
  return -1;
}
function x9(e, t) {
  return rh(e, t, !0);
}
function E9(e, t, n) {
  return Uy(e, t, ht(n), !0);
}
function S9(e, t) {
  var n = e == null ? 0 : e.length;
  if (n) {
    var r = rh(e, t, !0) - 1;
    if (Ni(e[r], t))
      return r;
  }
  return -1;
}
function ZS(e, t) {
  for (var n = -1, r = e.length, i = 0, o = []; ++n < r; ) {
    var a = e[n], s = t ? t(a) : a;
    if (!n || !Ni(s, l)) {
      var l = s;
      o[i++] = a === 0 ? 0 : a;
    }
  }
  return o;
}
function C9(e) {
  return e && e.length ? ZS(e) : [];
}
function O9(e, t) {
  return e && e.length ? ZS(e, ht(t)) : [];
}
var A9 = 4294967295;
function N9(e, t, n) {
  return n && typeof n != "number" && Yn(e, t, n) && (t = n = void 0), n = n === void 0 ? A9 : n >>> 0, n ? (e = Wt(e), e && (typeof t == "string" || t != null && !jy(t)) && (t = Nr(t), !t && sl(e)) ? Ko(Ci(e), 0, n) : e.split(t, n)) : [];
}
var M9 = "Expected a function", T9 = Math.max;
function P9(e, t) {
  if (typeof e != "function")
    throw new TypeError(M9);
  return t = t == null ? 0 : T9(yt(t), 0), St(function(n) {
    var r = n[t], i = Ko(n, 0, t);
    return r && Yo(i, r), Mr(e, this, i);
  });
}
var D9 = ll(function(e, t, n) {
  return e + (n ? " " : "") + py(t);
});
function R9(e, t, n) {
  return e = Wt(e), n = n == null ? 0 : Ga(yt(n), 0, e.length), t = Nr(t), e.slice(n, n + t.length) == t;
}
function L9() {
  return {};
}
function $9() {
  return "";
}
function k9() {
  return !0;
}
var I9 = $f(function(e, t) {
  return e - t;
}, 0);
function B9(e) {
  return e && e.length ? Fy(e, tr) : 0;
}
function j9(e, t) {
  return e && e.length ? Fy(e, ht(t)) : 0;
}
function z9(e) {
  var t = e == null ? 0 : e.length;
  return t ? Qr(e, 1, t) : [];
}
function F9(e, t, n) {
  return e && e.length ? (t = n || t === void 0 ? 1 : yt(t), Qr(e, 0, t < 0 ? 0 : t)) : [];
}
function H9(e, t, n) {
  var r = e == null ? 0 : e.length;
  return r ? (t = n || t === void 0 ? 1 : yt(t), t = r - t, Qr(e, t < 0 ? 0 : t, r)) : [];
}
function V9(e, t) {
  return e && e.length ? qf(e, ht(t), !1, !0) : [];
}
function W9(e, t) {
  return e && e.length ? qf(e, ht(t)) : [];
}
function G9(e, t) {
  return t(e), e;
}
var JS = Object.prototype, X9 = JS.hasOwnProperty;
function _b(e, t, n, r) {
  return e === void 0 || Ni(e, JS[n]) && !X9.call(r, n) ? t : e;
}
var U9 = {
  "\\": "\\",
  "'": "'",
  "\n": "n",
  "\r": "r",
  "\u2028": "u2028",
  "\u2029": "u2029"
};
function Y9(e) {
  return "\\" + U9[e];
}
var QS = /<%=([\s\S]+?)%>/g, K9 = /<%-([\s\S]+?)%>/g, q9 = /<%([\s\S]+?)%>/g, Av = {
  /**
   * Used to detect `data` property values to be HTML-escaped.
   *
   * @memberOf _.templateSettings
   * @type {RegExp}
   */
  escape: K9,
  /**
   * Used to detect code to be evaluated.
   *
   * @memberOf _.templateSettings
   * @type {RegExp}
   */
  evaluate: q9,
  /**
   * Used to detect `data` property values to inject.
   *
   * @memberOf _.templateSettings
   * @type {RegExp}
   */
  interpolate: QS,
  /**
   * Used to reference the data object in the template text.
   *
   * @memberOf _.templateSettings
   * @type {string}
   */
  variable: "",
  /**
   * Used to import variables into the compiled template.
   *
   * @memberOf _.templateSettings
   * @type {Object}
   */
  imports: {
    /**
     * A reference to the `lodash` function.
     *
     * @memberOf _.templateSettings.imports
     * @type {Function}
     */
    _: { escape: fS }
  }
}, Z9 = "Invalid `variable` option passed into `_.template`", J9 = /\b__p \+= '';/g, Q9 = /\b(__p \+=) '' \+/g, ez = /(__e\(.*?\)|\b__t\)) \+\n'';/g, tz = /[()=,{}\[\]\/\s]/, nz = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, _c = /($^)/, rz = /['\n\r\u2028\u2029\\]/g, iz = Object.prototype, bb = iz.hasOwnProperty;
function oz(e, t, n) {
  var r = Av.imports._.templateSettings || Av;
  n && Yn(e, t, n) && (t = void 0), e = Wt(e), t = Ed({}, t, r, _b);
  var i = Ed({}, t.imports, r.imports, _b), o = wn(i), a = $y(i, o), s, l, u = 0, c = t.interpolate || _c, d = "__p += '", f = RegExp(
    (t.escape || _c).source + "|" + c.source + "|" + (c === QS ? nz : _c).source + "|" + (t.evaluate || _c).source + "|$",
    "g"
  ), h = bb.call(t, "sourceURL") ? "//# sourceURL=" + (t.sourceURL + "").replace(/\s/g, " ") + `
` : "";
  e.replace(f, function(g, y, m, E, w, S) {
    return m || (m = E), d += e.slice(u, S).replace(rz, Y9), y && (s = !0, d += `' +
__e(` + y + `) +
'`), w && (l = !0, d += `';
` + w + `;
__p += '`), m && (d += `' +
((__t = (` + m + `)) == null ? '' : __t) +
'`), u = S + g.length, g;
  }), d += `';
`;
  var p = bb.call(t, "variable") && t.variable;
  if (!p)
    d = `with (obj) {
` + d + `
}
`;
  else if (tz.test(p))
    throw new Error(Z9);
  d = (l ? d.replace(J9, "") : d).replace(Q9, "$1").replace(ez, "$1;"), d = "function(" + (p || "obj") + `) {
` + (p ? "" : `obj || (obj = {});
`) + "var __t, __p = ''" + (s ? ", __e = _.escape" : "") + (l ? `, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
` : `;
`) + d + `return __p
}`;
  var v = uE(function() {
    return Function(o, h + "return " + d).apply(void 0, a);
  });
  if (v.source = d, fy(v))
    throw v;
  return v;
}
var az = "Expected a function";
function e2(e, t, n) {
  var r = !0, i = !0;
  if (typeof e != "function")
    throw new TypeError(az);
  return an(n) && (r = "leading" in n ? !!n.leading : r, i = "trailing" in n ? !!n.trailing : i), Yf(e, t, {
    leading: r,
    maxWait: t,
    trailing: i
  });
}
function Ju(e, t) {
  return t(e);
}
var sz = 9007199254740991, _p = 4294967295, lz = Math.min;
function uz(e, t) {
  if (e = yt(e), e < 1 || e > sz)
    return [];
  var n = _p, r = lz(e, _p);
  t = Ji(t), e -= _p;
  for (var i = sy(r, t); ++n < e; )
    t(n);
  return i;
}
function cz() {
  return this;
}
function t2(e, t) {
  var n = e;
  return n instanceof Tt && (n = n.value()), vy(t, function(r, i) {
    return i.func.apply(i.thisArg, Yo([r], i.args));
  }, n);
}
function bp() {
  return t2(this.__wrapped__, this.__actions__);
}
function dz(e) {
  return Wt(e).toLowerCase();
}
function fz(e) {
  return ut(e) ? cn(e, qi) : Ar(e) ? [e] : lr(aE(Wt(e)));
}
var wb = 9007199254740991;
function hz(e) {
  return e ? Ga(yt(e), -wb, wb) : e === 0 ? e : 0;
}
function pz(e) {
  return Wt(e).toUpperCase();
}
function vz(e, t, n) {
  var r = ut(e), i = r || zo(e) || ol(e);
  if (t = ht(t), n == null) {
    var o = e && e.constructor;
    i ? n = r ? new o() : [] : an(e) ? n = po(o) ? tl(Wf(e)) : {} : n = {};
  }
  return (i ? ti : Zi)(e, function(a, s, l) {
    return t(n, a, s, l);
  }), n;
}
function n2(e, t) {
  for (var n = e.length; n-- && nl(t, e[n], 0) > -1; )
    ;
  return n;
}
function r2(e, t) {
  for (var n = -1, r = e.length; ++n < r && nl(t, e[n], 0) > -1; )
    ;
  return n;
}
function gz(e, t, n) {
  if (e = Wt(e), e && (n || t === void 0))
    return Hx(e);
  if (!e || !(t = Nr(t)))
    return e;
  var r = Ci(e), i = Ci(t), o = r2(r, i), a = n2(r, i) + 1;
  return Ko(r, o, a).join("");
}
function yz(e, t, n) {
  if (e = Wt(e), e && (n || t === void 0))
    return e.slice(0, Fx(e) + 1);
  if (!e || !(t = Nr(t)))
    return e;
  var r = Ci(e), i = n2(r, Ci(t)) + 1;
  return Ko(r, 0, i).join("");
}
var mz = /^\s+/;
function _z(e, t, n) {
  if (e = Wt(e), e && (n || t === void 0))
    return e.replace(mz, "");
  if (!e || !(t = Nr(t)))
    return e;
  var r = Ci(e), i = r2(r, Ci(t));
  return Ko(r, i).join("");
}
var bz = 30, wz = "...", xz = /\w*$/;
function Ez(e, t) {
  var n = bz, r = wz;
  if (an(t)) {
    var i = "separator" in t ? t.separator : i;
    n = "length" in t ? yt(t.length) : n, r = "omission" in t ? Nr(t.omission) : r;
  }
  e = Wt(e);
  var o = e.length;
  if (sl(e)) {
    var a = Ci(e);
    o = a.length;
  }
  if (n >= o)
    return e;
  var s = n - cl(r);
  if (s < 1)
    return r;
  var l = a ? Ko(a, 0, s).join("") : e.slice(0, s);
  if (i === void 0)
    return l + r;
  if (a && (s += l.length - s), jy(i)) {
    if (e.slice(s).search(i)) {
      var u, c = l;
      for (i.global || (i = RegExp(i.source, Wt(xz.exec(i)) + "g")), i.lastIndex = 0; u = i.exec(c); )
        var d = u.index;
      l = l.slice(0, d === void 0 ? s : d);
    }
  } else if (e.indexOf(Nr(i), s) != s) {
    var f = l.lastIndexOf(i);
    f > -1 && (l = l.slice(0, f));
  }
  return l + r;
}
function Sz(e) {
  return Qx(e, 1);
}
var Cz = {
  "&amp;": "&",
  "&lt;": "<",
  "&gt;": ">",
  "&quot;": '"',
  "&#39;": "'"
}, Oz = gy(Cz), i2 = /&(?:amp|lt|gt|quot|#39);/g, Az = RegExp(i2.source);
function Nz(e) {
  return e = Wt(e), e && Az.test(e) ? e.replace(i2, Oz) : e;
}
var Mz = 1 / 0, Tz = Es && 1 / Xf(new Es([, -0]))[1] == Mz ? function(e) {
  return new Es(e);
} : ws, Pz = 200;
function Ho(e, t, n) {
  var r = -1, i = Bf, o = e.length, a = !0, s = [], l = s;
  if (n)
    a = !1, i = Py;
  else if (o >= Pz) {
    var u = t ? null : Tz(e);
    if (u)
      return Xf(u);
    a = !1, i = Cu, l = new Pa();
  } else
    l = t ? [] : s;
  e:
    for (; ++r < o; ) {
      var c = e[r], d = t ? t(c) : c;
      if (c = n || c !== 0 ? c : 0, a && d === d) {
        for (var f = l.length; f--; )
          if (l[f] === d)
            continue e;
        t && l.push(d), s.push(c);
      } else i(l, d, n) || (l !== s && l.push(d), s.push(c));
    }
  return s;
}
var Dz = St(function(e) {
  return Ho($n(e, 1, vn, !0));
}), Rz = St(function(e) {
  var t = dr(e);
  return vn(t) && (t = void 0), Ho($n(e, 1, vn, !0), ht(t));
}), Lz = St(function(e) {
  var t = dr(e);
  return t = typeof t == "function" ? t : void 0, Ho($n(e, 1, vn, !0), void 0, t);
});
function $z(e) {
  return e && e.length ? Ho(e) : [];
}
function kz(e, t) {
  return e && e.length ? Ho(e, ht(t)) : [];
}
function Iz(e, t) {
  return t = typeof t == "function" ? t : void 0, e && e.length ? Ho(e, void 0, t) : [];
}
var Bz = 0;
function jz(e) {
  var t = ++Bz;
  return Wt(e) + t;
}
function zz(e, t) {
  return e == null ? !0 : Hy(e, t);
}
var Fz = Math.max;
function Yy(e) {
  if (!(e && e.length))
    return [];
  var t = 0;
  return e = qo(e, function(n) {
    if (vn(n))
      return t = Fz(n.length, t), !0;
  }), sy(t, function(n) {
    return cn(e, Ay(n));
  });
}
function o2(e, t) {
  if (!(e && e.length))
    return [];
  var n = Yy(e);
  return t == null ? n : cn(n, function(r) {
    return Mr(t, void 0, r);
  });
}
function a2(e, t, n, r) {
  return Zu(e, t, n(Wa(e, t)), r);
}
function Hz(e, t, n) {
  return e == null ? e : a2(e, t, Ji(n));
}
function Vz(e, t, n, r) {
  return r = typeof r == "function" ? r : void 0, e == null ? e : a2(e, t, Ji(n), r);
}
var Wz = ll(function(e, t, n) {
  return e + (n ? " " : "") + t.toUpperCase();
});
function Gz(e) {
  return e == null ? [] : $y(e, pr(e));
}
var Xz = St(function(e, t) {
  return vn(e) ? Yu(e, t) : [];
});
function Uz(e, t) {
  return th(Ji(t), e);
}
var Yz = bo(function(e) {
  var t = e.length, n = t ? e[0] : 0, r = this.__wrapped__, i = function(o) {
    return dy(o, e);
  };
  return t > 1 || this.__actions__.length || !(r instanceof Tt) || !vo(n) ? this.thru(i) : (r = r.slice(n, +n + (t ? 1 : 0)), r.__actions__.push({
    func: Ju,
    args: [i],
    thisArg: void 0
  }), new Zr(r, this.__chain__).thru(function(o) {
    return t && !o.length && o.push(void 0), o;
  }));
});
function Kz() {
  return LE(this);
}
function qz() {
  var e = this.__wrapped__;
  if (e instanceof Tt) {
    var t = e;
    return this.__actions__.length && (t = new Tt(this)), t = t.reverse(), t.__actions__.push({
      func: Ju,
      args: [Ov],
      thisArg: void 0
    }), new Zr(t, this.__chain__);
  }
  return this.thru(Ov);
}
function Ky(e, t, n) {
  var r = e.length;
  if (r < 2)
    return r ? Ho(e[0]) : [];
  for (var i = -1, o = Array(r); ++i < r; )
    for (var a = e[i], s = -1; ++s < r; )
      s != i && (o[i] = Yu(o[i] || a, e[s], t, n));
  return Ho($n(o, 1), t, n);
}
var Zz = St(function(e) {
  return Ky(qo(e, vn));
}), Jz = St(function(e) {
  var t = dr(e);
  return vn(t) && (t = void 0), Ky(qo(e, vn), ht(t));
}), Qz = St(function(e) {
  var t = dr(e);
  return t = typeof t == "function" ? t : void 0, Ky(qo(e, vn), void 0, t);
}), eF = St(Yy);
function s2(e, t, n) {
  for (var r = -1, i = e.length, o = t.length, a = {}; ++r < i; ) {
    var s = r < o ? t[r] : void 0;
    n(a, e[r], s);
  }
  return a;
}
function tF(e, t) {
  return s2(e || [], t || [], Wu);
}
function nF(e, t) {
  return s2(e || [], t || [], Zu);
}
var rF = St(function(e) {
  var t = e.length, n = t > 1 ? e[t - 1] : void 0;
  return n = typeof n == "function" ? (e.pop(), n) : void 0, o2(e, n);
});
const He = {
  chunk: Z$,
  compact: Pk,
  concat: Dk,
  difference: I6,
  differenceBy: B6,
  differenceWith: j6,
  drop: F6,
  dropRight: H6,
  dropRightWhile: V6,
  dropWhile: W6,
  fill: aI,
  findIndex: Ry,
  findLastIndex: _S,
  first: fb,
  flatten: sE,
  flattenDeep: mI,
  flattenDepth: _I,
  fromPairs: LI,
  head: fb,
  indexOf: xS,
  initial: QI,
  intersection: tB,
  intersectionBy: nB,
  intersectionWith: rB,
  join: UB,
  last: dr,
  lastIndexOf: QB,
  nth: S7,
  pull: bj,
  pullAll: VS,
  pullAllBy: wj,
  pullAllWith: xj,
  pullAt: Cj,
  remove: Hj,
  reverse: Ov,
  slice: u9,
  sortedIndex: _9,
  sortedIndexBy: b9,
  sortedIndexOf: w9,
  sortedLastIndex: x9,
  sortedLastIndexBy: E9,
  sortedLastIndexOf: S9,
  sortedUniq: C9,
  sortedUniqBy: O9,
  tail: z9,
  take: F9,
  takeRight: H9,
  takeRightWhile: V9,
  takeWhile: W9,
  union: Dz,
  unionBy: Rz,
  unionWith: Lz,
  uniq: $z,
  uniqBy: kz,
  uniqWith: Iz,
  unzip: Yy,
  unzipWith: o2,
  without: Xz,
  xor: Zz,
  xorBy: Jz,
  xorWith: Qz,
  zip: eF,
  zipObject: tF,
  zipObjectDeep: nF,
  zipWith: rF
}, Yt = {
  countBy: w6,
  each: st,
  eachRight: cb,
  every: rI,
  filter: zl,
  find: Fo,
  findLast: dI,
  flatMap: hI,
  flatMapDeep: vI,
  flatMapDepth: gI,
  forEach: st,
  forEachRight: cb,
  groupBy: jI,
  includes: ZI,
  invokeMap: fB,
  keyBy: KB,
  map: Kn,
  orderBy: $7,
  partition: pj,
  reduce: US,
  reduceRight: zj,
  reject: Fj,
  sample: Jj,
  sampleSize: t9,
  shuffle: o9,
  size: l9,
  some: f9,
  sortBy: qS
}, iF = {
  now: ed
}, hn = {
  after: L4,
  ary: Qx,
  before: cE,
  bind: Gf,
  bindKey: hy,
  curry: My,
  curryRight: Ty,
  debounce: Yf,
  defer: L6,
  delay: $6,
  flip: wI,
  memoize: Vf,
  negate: qu,
  once: D7,
  overArgs: j7,
  partial: th,
  partialRight: Wy,
  rearg: Bj,
  rest: Xj,
  spread: P9,
  throttle: e2,
  unary: Sz,
  wrap: Uz
}, Qe = {
  castArray: G$,
  clone: xk,
  cloneDeep: it,
  cloneDeepWith: Ak,
  cloneWith: Mk,
  conformsTo: g6,
  eq: Ni,
  gt: zI,
  gte: FI,
  isArguments: Ma,
  isArray: ut,
  isArrayBuffer: vB,
  isArrayLike: hr,
  isArrayLikeObject: vn,
  isBoolean: Cd,
  isBuffer: zo,
  isDate: _B,
  isElement: bB,
  isEmpty: By,
  isEqual: Od,
  isEqualWith: CB,
  isError: fy,
  isFinite: AB,
  isFunction: po,
  isInteger: OS,
  isLength: zf,
  isMap: HE,
  isMatch: NB,
  isMatchWith: MB,
  isNaN: PB,
  isNative: LB,
  isNil: Ea,
  isNull: $B,
  isNumber: AS,
  isObject: an,
  isObjectLike: fn,
  isPlainObject: Xu,
  isRegExp: jy,
  isSafeInteger: BB,
  isSet: VE,
  isString: Qf,
  isSymbol: Ar,
  isTypedArray: ol,
  isUndefined: Da,
  isWeakMap: zB,
  isWeakSet: HB,
  lt: n7,
  lte: r7,
  toArray: PS,
  toFinite: uo,
  toInteger: yt,
  toLength: vS,
  toNumber: Xr,
  toPlainObject: iS,
  toSafeInteger: hz,
  toString: Wt
}, nr = {
  add: C4,
  ceil: Y$,
  divide: z6,
  floor: xI,
  max: u7,
  maxBy: c7,
  mean: f7,
  meanBy: h7,
  min: g7,
  minBy: y7,
  multiply: m7,
  round: qj,
  subtract: I9,
  sum: B9,
  sumBy: j9
}, qy = {
  clamp: J$,
  inRange: YI,
  random: Pj
}, ct = {
  assign: It,
  assignIn: F0,
  assignInWith: Ed,
  assignWith: V5,
  at: EL,
  create: x6,
  defaults: T6,
  defaultsDeep: D6,
  entries: Gi,
  entriesIn: db,
  extend: F0,
  extendWith: Ed,
  findKey: lI,
  findLastKey: fI,
  forIn: TI,
  forInRight: PI,
  forOwn: DI,
  forOwnRight: RI,
  functions: $I,
  functionsIn: kI,
  get: al,
  has: $s,
  hasIn: Oy,
  invert: sB,
  invertBy: cB,
  invoke: dB,
  keys: wn,
  keysIn: pr,
  mapKeys: NS,
  mapValues: i7,
  merge: ks,
  mergeWith: aS,
  omit: T7,
  omitBy: P7,
  pick: ma,
  pickBy: LS,
  result: Uj,
  set: KS,
  setWith: n9,
  toPairs: Gi,
  toPairsIn: db,
  transform: vz,
  unset: zz,
  update: Hz,
  updateWith: Vz,
  values: ul,
  valuesIn: Gz
}, Qi = {
  at: Yz,
  chain: LE,
  commit: Tk,
  lodash: C,
  next: E7,
  plant: gj,
  reverse: qz,
  tap: G9,
  thru: Ju,
  toIterator: cz,
  toJSON: bp,
  value: bp,
  valueOf: bp,
  wrapperChain: Kz
}, Ft = {
  camelCase: W$,
  capitalize: mE,
  deburr: _E,
  endsWith: X6,
  escape: fS,
  escapeRegExp: tI,
  kebabCase: YB,
  lowerCase: e7,
  lowerFirst: t7,
  pad: aj,
  padEnd: sj,
  padStart: lj,
  parseInt: dj,
  repeat: Vj,
  replace: Wj,
  snakeCase: c9,
  split: N9,
  startCase: D9,
  startsWith: R9,
  template: oz,
  templateSettings: Av,
  toLower: dz,
  toUpper: pz,
  trim: gz,
  trimEnd: yz,
  trimStart: _z,
  truncate: Ez,
  unescape: Nz,
  upperCase: Wz,
  upperFirst: py,
  words: RE
}, Gt = {
  attempt: uE,
  bindAll: LL,
  cond: f6,
  conforms: v6,
  constant: oy,
  defaultTo: N6,
  flow: NI,
  flowRight: MI,
  identity: tr,
  iteratee: WB,
  matches: a7,
  matchesProperty: l7,
  method: p7,
  methodOf: v7,
  mixin: TS,
  noop: ws,
  nthArg: C7,
  over: k7,
  overEvery: z7,
  overSome: F7,
  property: QE,
  propertyOf: yj,
  range: $j,
  rangeRight: kj,
  stubArray: my,
  stubFalse: ly,
  stubObject: L9,
  stubString: $9,
  stubTrue: k9,
  times: uz,
  toPath: fz,
  uniqueId: jz
};
function oF() {
  var e = new Tt(this.__wrapped__);
  return e.__actions__ = lr(this.__actions__), e.__dir__ = this.__dir__, e.__filtered__ = this.__filtered__, e.__iteratees__ = lr(this.__iteratees__), e.__takeCount__ = this.__takeCount__, e.__views__ = lr(this.__views__), e;
}
function aF() {
  if (this.__filtered__) {
    var e = new Tt(this);
    e.__dir__ = -1, e.__filtered__ = !0;
  } else
    e = this.clone(), e.__dir__ *= -1;
  return e;
}
var sF = Math.max, lF = Math.min;
function uF(e, t, n) {
  for (var r = -1, i = n.length; ++r < i; ) {
    var o = n[r], a = o.size;
    switch (o.type) {
      case "drop":
        e += a;
        break;
      case "dropRight":
        t -= a;
        break;
      case "take":
        t = lF(t, e + a);
        break;
      case "takeRight":
        e = sF(e, t - a);
        break;
    }
  }
  return { start: e, end: t };
}
var cF = 1, dF = 2, fF = Math.min;
function hF() {
  var e = this.__wrapped__.value(), t = this.__dir__, n = ut(e), r = t < 0, i = n ? e.length : 0, o = uF(0, i, this.__views__), a = o.start, s = o.end, l = s - a, u = r ? s : a - 1, c = this.__iteratees__, d = c.length, f = 0, h = fF(l, this.__takeCount__);
  if (!n || !r && i == l && h == l)
    return t2(e, this.__actions__);
  var p = [];
  e:
    for (; l-- && f < h; ) {
      u += t;
      for (var v = -1, g = e[u]; ++v < d; ) {
        var y = c[v], m = y.iteratee, E = y.type, w = m(g);
        if (E == dF)
          g = w;
        else if (!w) {
          if (E == cF)
            continue e;
          break e;
        }
      }
      p[f++] = g;
    }
  return p;
}
/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
var pF = "4.17.21", vF = 2, gF = 1, yF = 3, l2 = 4294967295, mF = Array.prototype, _F = Object.prototype, u2 = _F.hasOwnProperty, xb = Vn ? Vn.iterator : void 0, bF = Math.max, Eb = Math.min, Zy = /* @__PURE__ */ function(e) {
  return function(t, n, r) {
    if (r == null) {
      var i = an(n), o = i && wn(n), a = o && o.length && Zf(n, o);
      (a ? a.length : i) || (r = n, n = t, t = this);
    }
    return e(t, n, r);
  };
}(TS);
C.after = hn.after;
C.ary = hn.ary;
C.assign = ct.assign;
C.assignIn = ct.assignIn;
C.assignInWith = ct.assignInWith;
C.assignWith = ct.assignWith;
C.at = ct.at;
C.before = hn.before;
C.bind = hn.bind;
C.bindAll = Gt.bindAll;
C.bindKey = hn.bindKey;
C.castArray = Qe.castArray;
C.chain = Qi.chain;
C.chunk = He.chunk;
C.compact = He.compact;
C.concat = He.concat;
C.cond = Gt.cond;
C.conforms = Gt.conforms;
C.constant = Gt.constant;
C.countBy = Yt.countBy;
C.create = ct.create;
C.curry = hn.curry;
C.curryRight = hn.curryRight;
C.debounce = hn.debounce;
C.defaults = ct.defaults;
C.defaultsDeep = ct.defaultsDeep;
C.defer = hn.defer;
C.delay = hn.delay;
C.difference = He.difference;
C.differenceBy = He.differenceBy;
C.differenceWith = He.differenceWith;
C.drop = He.drop;
C.dropRight = He.dropRight;
C.dropRightWhile = He.dropRightWhile;
C.dropWhile = He.dropWhile;
C.fill = He.fill;
C.filter = Yt.filter;
C.flatMap = Yt.flatMap;
C.flatMapDeep = Yt.flatMapDeep;
C.flatMapDepth = Yt.flatMapDepth;
C.flatten = He.flatten;
C.flattenDeep = He.flattenDeep;
C.flattenDepth = He.flattenDepth;
C.flip = hn.flip;
C.flow = Gt.flow;
C.flowRight = Gt.flowRight;
C.fromPairs = He.fromPairs;
C.functions = ct.functions;
C.functionsIn = ct.functionsIn;
C.groupBy = Yt.groupBy;
C.initial = He.initial;
C.intersection = He.intersection;
C.intersectionBy = He.intersectionBy;
C.intersectionWith = He.intersectionWith;
C.invert = ct.invert;
C.invertBy = ct.invertBy;
C.invokeMap = Yt.invokeMap;
C.iteratee = Gt.iteratee;
C.keyBy = Yt.keyBy;
C.keys = wn;
C.keysIn = ct.keysIn;
C.map = Yt.map;
C.mapKeys = ct.mapKeys;
C.mapValues = ct.mapValues;
C.matches = Gt.matches;
C.matchesProperty = Gt.matchesProperty;
C.memoize = hn.memoize;
C.merge = ct.merge;
C.mergeWith = ct.mergeWith;
C.method = Gt.method;
C.methodOf = Gt.methodOf;
C.mixin = Zy;
C.negate = qu;
C.nthArg = Gt.nthArg;
C.omit = ct.omit;
C.omitBy = ct.omitBy;
C.once = hn.once;
C.orderBy = Yt.orderBy;
C.over = Gt.over;
C.overArgs = hn.overArgs;
C.overEvery = Gt.overEvery;
C.overSome = Gt.overSome;
C.partial = hn.partial;
C.partialRight = hn.partialRight;
C.partition = Yt.partition;
C.pick = ct.pick;
C.pickBy = ct.pickBy;
C.property = Gt.property;
C.propertyOf = Gt.propertyOf;
C.pull = He.pull;
C.pullAll = He.pullAll;
C.pullAllBy = He.pullAllBy;
C.pullAllWith = He.pullAllWith;
C.pullAt = He.pullAt;
C.range = Gt.range;
C.rangeRight = Gt.rangeRight;
C.rearg = hn.rearg;
C.reject = Yt.reject;
C.remove = He.remove;
C.rest = hn.rest;
C.reverse = He.reverse;
C.sampleSize = Yt.sampleSize;
C.set = ct.set;
C.setWith = ct.setWith;
C.shuffle = Yt.shuffle;
C.slice = He.slice;
C.sortBy = Yt.sortBy;
C.sortedUniq = He.sortedUniq;
C.sortedUniqBy = He.sortedUniqBy;
C.split = Ft.split;
C.spread = hn.spread;
C.tail = He.tail;
C.take = He.take;
C.takeRight = He.takeRight;
C.takeRightWhile = He.takeRightWhile;
C.takeWhile = He.takeWhile;
C.tap = Qi.tap;
C.throttle = hn.throttle;
C.thru = Ju;
C.toArray = Qe.toArray;
C.toPairs = ct.toPairs;
C.toPairsIn = ct.toPairsIn;
C.toPath = Gt.toPath;
C.toPlainObject = Qe.toPlainObject;
C.transform = ct.transform;
C.unary = hn.unary;
C.union = He.union;
C.unionBy = He.unionBy;
C.unionWith = He.unionWith;
C.uniq = He.uniq;
C.uniqBy = He.uniqBy;
C.uniqWith = He.uniqWith;
C.unset = ct.unset;
C.unzip = He.unzip;
C.unzipWith = He.unzipWith;
C.update = ct.update;
C.updateWith = ct.updateWith;
C.values = ct.values;
C.valuesIn = ct.valuesIn;
C.without = He.without;
C.words = Ft.words;
C.wrap = hn.wrap;
C.xor = He.xor;
C.xorBy = He.xorBy;
C.xorWith = He.xorWith;
C.zip = He.zip;
C.zipObject = He.zipObject;
C.zipObjectDeep = He.zipObjectDeep;
C.zipWith = He.zipWith;
C.entries = ct.toPairs;
C.entriesIn = ct.toPairsIn;
C.extend = ct.assignIn;
C.extendWith = ct.assignInWith;
Zy(C, C);
C.add = nr.add;
C.attempt = Gt.attempt;
C.camelCase = Ft.camelCase;
C.capitalize = Ft.capitalize;
C.ceil = nr.ceil;
C.clamp = qy.clamp;
C.clone = Qe.clone;
C.cloneDeep = Qe.cloneDeep;
C.cloneDeepWith = Qe.cloneDeepWith;
C.cloneWith = Qe.cloneWith;
C.conformsTo = Qe.conformsTo;
C.deburr = Ft.deburr;
C.defaultTo = Gt.defaultTo;
C.divide = nr.divide;
C.endsWith = Ft.endsWith;
C.eq = Qe.eq;
C.escape = Ft.escape;
C.escapeRegExp = Ft.escapeRegExp;
C.every = Yt.every;
C.find = Yt.find;
C.findIndex = He.findIndex;
C.findKey = ct.findKey;
C.findLast = Yt.findLast;
C.findLastIndex = He.findLastIndex;
C.findLastKey = ct.findLastKey;
C.floor = nr.floor;
C.forEach = Yt.forEach;
C.forEachRight = Yt.forEachRight;
C.forIn = ct.forIn;
C.forInRight = ct.forInRight;
C.forOwn = ct.forOwn;
C.forOwnRight = ct.forOwnRight;
C.get = ct.get;
C.gt = Qe.gt;
C.gte = Qe.gte;
C.has = ct.has;
C.hasIn = ct.hasIn;
C.head = He.head;
C.identity = tr;
C.includes = Yt.includes;
C.indexOf = He.indexOf;
C.inRange = qy.inRange;
C.invoke = ct.invoke;
C.isArguments = Qe.isArguments;
C.isArray = ut;
C.isArrayBuffer = Qe.isArrayBuffer;
C.isArrayLike = Qe.isArrayLike;
C.isArrayLikeObject = Qe.isArrayLikeObject;
C.isBoolean = Qe.isBoolean;
C.isBuffer = Qe.isBuffer;
C.isDate = Qe.isDate;
C.isElement = Qe.isElement;
C.isEmpty = Qe.isEmpty;
C.isEqual = Qe.isEqual;
C.isEqualWith = Qe.isEqualWith;
C.isError = Qe.isError;
C.isFinite = Qe.isFinite;
C.isFunction = Qe.isFunction;
C.isInteger = Qe.isInteger;
C.isLength = Qe.isLength;
C.isMap = Qe.isMap;
C.isMatch = Qe.isMatch;
C.isMatchWith = Qe.isMatchWith;
C.isNaN = Qe.isNaN;
C.isNative = Qe.isNative;
C.isNil = Qe.isNil;
C.isNull = Qe.isNull;
C.isNumber = Qe.isNumber;
C.isObject = an;
C.isObjectLike = Qe.isObjectLike;
C.isPlainObject = Qe.isPlainObject;
C.isRegExp = Qe.isRegExp;
C.isSafeInteger = Qe.isSafeInteger;
C.isSet = Qe.isSet;
C.isString = Qe.isString;
C.isSymbol = Qe.isSymbol;
C.isTypedArray = Qe.isTypedArray;
C.isUndefined = Qe.isUndefined;
C.isWeakMap = Qe.isWeakMap;
C.isWeakSet = Qe.isWeakSet;
C.join = He.join;
C.kebabCase = Ft.kebabCase;
C.last = dr;
C.lastIndexOf = He.lastIndexOf;
C.lowerCase = Ft.lowerCase;
C.lowerFirst = Ft.lowerFirst;
C.lt = Qe.lt;
C.lte = Qe.lte;
C.max = nr.max;
C.maxBy = nr.maxBy;
C.mean = nr.mean;
C.meanBy = nr.meanBy;
C.min = nr.min;
C.minBy = nr.minBy;
C.stubArray = Gt.stubArray;
C.stubFalse = Gt.stubFalse;
C.stubObject = Gt.stubObject;
C.stubString = Gt.stubString;
C.stubTrue = Gt.stubTrue;
C.multiply = nr.multiply;
C.nth = He.nth;
C.noop = Gt.noop;
C.now = iF.now;
C.pad = Ft.pad;
C.padEnd = Ft.padEnd;
C.padStart = Ft.padStart;
C.parseInt = Ft.parseInt;
C.random = qy.random;
C.reduce = Yt.reduce;
C.reduceRight = Yt.reduceRight;
C.repeat = Ft.repeat;
C.replace = Ft.replace;
C.result = ct.result;
C.round = nr.round;
C.sample = Yt.sample;
C.size = Yt.size;
C.snakeCase = Ft.snakeCase;
C.some = Yt.some;
C.sortedIndex = He.sortedIndex;
C.sortedIndexBy = He.sortedIndexBy;
C.sortedIndexOf = He.sortedIndexOf;
C.sortedLastIndex = He.sortedLastIndex;
C.sortedLastIndexBy = He.sortedLastIndexBy;
C.sortedLastIndexOf = He.sortedLastIndexOf;
C.startCase = Ft.startCase;
C.startsWith = Ft.startsWith;
C.subtract = nr.subtract;
C.sum = nr.sum;
C.sumBy = nr.sumBy;
C.template = Ft.template;
C.times = Gt.times;
C.toFinite = Qe.toFinite;
C.toInteger = yt;
C.toLength = Qe.toLength;
C.toLower = Ft.toLower;
C.toNumber = Qe.toNumber;
C.toSafeInteger = Qe.toSafeInteger;
C.toString = Qe.toString;
C.toUpper = Ft.toUpper;
C.trim = Ft.trim;
C.trimEnd = Ft.trimEnd;
C.trimStart = Ft.trimStart;
C.truncate = Ft.truncate;
C.unescape = Ft.unescape;
C.uniqueId = Gt.uniqueId;
C.upperCase = Ft.upperCase;
C.upperFirst = Ft.upperFirst;
C.each = Yt.forEach;
C.eachRight = Yt.forEachRight;
C.first = He.head;
Zy(C, function() {
  var e = {};
  return Zi(C, function(t, n) {
    u2.call(C.prototype, n) || (e[n] = t);
  }), e;
}(), { chain: !1 });
C.VERSION = pF;
(C.templateSettings = Ft.templateSettings).imports._ = C;
ti(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function(e) {
  C[e].placeholder = C;
});
ti(["drop", "take"], function(e, t) {
  Tt.prototype[e] = function(n) {
    n = n === void 0 ? 1 : bF(yt(n), 0);
    var r = this.__filtered__ && !t ? new Tt(this) : this.clone();
    return r.__filtered__ ? r.__takeCount__ = Eb(n, r.__takeCount__) : r.__views__.push({
      size: Eb(n, l2),
      type: e + (r.__dir__ < 0 ? "Right" : "")
    }), r;
  }, Tt.prototype[e + "Right"] = function(n) {
    return this.reverse()[e](n).reverse();
  };
});
ti(["filter", "map", "takeWhile"], function(e, t) {
  var n = t + 1, r = n == gF || n == yF;
  Tt.prototype[e] = function(i) {
    var o = this.clone();
    return o.__iteratees__.push({
      iteratee: ht(i),
      type: n
    }), o.__filtered__ = o.__filtered__ || r, o;
  };
});
ti(["head", "last"], function(e, t) {
  var n = "take" + (t ? "Right" : "");
  Tt.prototype[e] = function() {
    return this[n](1).value()[0];
  };
});
ti(["initial", "tail"], function(e, t) {
  var n = "drop" + (t ? "" : "Right");
  Tt.prototype[e] = function() {
    return this.__filtered__ ? new Tt(this) : this[n](1);
  };
});
Tt.prototype.compact = function() {
  return this.filter(tr);
};
Tt.prototype.find = function(e) {
  return this.filter(e).head();
};
Tt.prototype.findLast = function(e) {
  return this.reverse().find(e);
};
Tt.prototype.invokeMap = St(function(e, t) {
  return typeof e == "function" ? new Tt(this) : this.map(function(n) {
    return Ku(n, e, t);
  });
});
Tt.prototype.reject = function(e) {
  return this.filter(qu(ht(e)));
};
Tt.prototype.slice = function(e, t) {
  e = yt(e);
  var n = this;
  return n.__filtered__ && (e > 0 || t < 0) ? new Tt(n) : (e < 0 ? n = n.takeRight(-e) : e && (n = n.drop(e)), t !== void 0 && (t = yt(t), n = t < 0 ? n.dropRight(-t) : n.take(t - e)), n);
};
Tt.prototype.takeRightWhile = function(e) {
  return this.reverse().takeWhile(e).reverse();
};
Tt.prototype.toArray = function() {
  return this.take(l2);
};
Zi(Tt.prototype, function(e, t) {
  var n = /^(?:filter|find|map|reject)|While$/.test(t), r = /^(?:head|last)$/.test(t), i = C[r ? "take" + (t == "last" ? "Right" : "") : t], o = r || /^find/.test(t);
  i && (C.prototype[t] = function() {
    var a = this.__wrapped__, s = r ? [1] : arguments, l = a instanceof Tt, u = s[0], c = l || ut(a), d = function(y) {
      var m = i.apply(C, Yo([y], s));
      return r && f ? m[0] : m;
    };
    c && n && typeof u == "function" && u.length != 1 && (l = c = !1);
    var f = this.__chain__, h = !!this.__actions__.length, p = o && !f, v = l && !h;
    if (!o && c) {
      a = v ? a : new Tt(this);
      var g = e.apply(a, s);
      return g.__actions__.push({ func: Ju, args: [d], thisArg: void 0 }), new Zr(g, f);
    }
    return p && v ? e.apply(this, s) : (g = this.thru(d), p ? r ? g.value()[0] : g.value() : g);
  });
});
ti(["pop", "push", "shift", "sort", "splice", "unshift"], function(e) {
  var t = mF[e], n = /^(?:push|sort|unshift)$/.test(e) ? "tap" : "thru", r = /^(?:pop|shift)$/.test(e);
  C.prototype[e] = function() {
    var i = arguments;
    if (r && !this.__chain__) {
      var o = this.value();
      return t.apply(ut(o) ? o : [], i);
    }
    return this[n](function(a) {
      return t.apply(ut(a) ? a : [], i);
    });
  };
});
Zi(Tt.prototype, function(e, t) {
  var n = C[t];
  if (n) {
    var r = n.name + "";
    u2.call(xs, r) || (xs[r] = []), xs[r].push({ name: t, func: n });
  }
});
xs[jf(void 0, vF).name] = [{
  name: "wrapper",
  func: void 0
}];
Tt.prototype.clone = oF;
Tt.prototype.reverse = aF;
Tt.prototype.value = hF;
C.prototype.at = Qi.at;
C.prototype.chain = Qi.wrapperChain;
C.prototype.commit = Qi.commit;
C.prototype.next = Qi.next;
C.prototype.plant = Qi.plant;
C.prototype.reverse = Qi.reverse;
C.prototype.toJSON = C.prototype.valueOf = C.prototype.value = Qi.value;
C.prototype.first = C.prototype.head;
xb && (C.prototype[xb] = Qi.toIterator);
var wF = function(e, t) {
  var n = {};
  for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
  if (e != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, r = Object.getOwnPropertySymbols(e); i < r.length; i++)
      t.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[i]) && (n[r[i]] = e[r[i]]);
  return n;
}, Ou;
(function(e) {
  function t(n) {
    var r = wF(n, []), i = n.container;
    if (!i)
      throw new Error("Ensure the container of LogicFlow is specified and valid.");
    return It({}, e.defaults, r);
  }
  e.get = t;
})(Ou || (Ou = {}));
(function(e) {
  e.defaults = {
    background: !1,
    grid: !1,
    textEdit: !0,
    snapline: !0,
    outline: !1,
    disabledTools: []
  };
})(Ou || (Ou = {}));
var Sb = {
  node: !1,
  edge: !1
}, xF = {
  node: !0,
  edge: !0
}, EF = function(e) {
  return !e || typeof e == "boolean" ? it(e === !0 ? xF : Sb) : ks(it(Sb), e);
}, SF = function() {
  return al(window, "navigator.userAgent", "").match(/MSIE|Trident/) !== null;
};
function zn(e) {
  try {
    return JSON.parse(JSON.stringify(e));
  } catch {
    return e;
  }
}
var bc = 200, CF = 9999, OF = 10, Pt;
(function(e) {
  e[e.DEFAULT = 1] = "DEFAULT", e[e.TEXT_EDIT = 2] = "TEXT_EDIT", e[e.SHOW_MENU = 3] = "SHOW_MENU", e[e.ALLOW_CONNECT = 4] = "ALLOW_CONNECT", e[e.NOT_ALLOW_CONNECT = 5] = "NOT_ALLOW_CONNECT";
})(Pt || (Pt = {}));
var un;
(function(e) {
  e.NODE = "node", e.EDGE = "edge", e.GRAPH = "graph";
})(un || (un = {}));
var gt;
(function(e) {
  e.NODE = "node", e.CIRCLE_NODE = "circle-node", e.POLYGON_NODE = "polygon-node", e.RECT_NODE = "rect-node", e.TEXT_NODE = "text-node", e.ELLIPSE_NODE = "ellipse-node", e.DIAMOND_NODE = "diamond-node", e.HTML_NODE = "html-node", e.CUSTOM_HTML_NODE = "custom-html-node", e.EDGE = "edge", e.LINE_EDGE = "line-edge", e.POLYLINE_EDGE = "polyline-edge", e.BEZIER_EDGE = "bezier-edge", e.GRAPH = "graph";
})(gt || (gt = {}));
var Fe;
(function(e) {
  e.ELEMENT_CLICK = "element:click", e.NODE_ADD = "node:add", e.NODE_DELETE = "node:delete", e.NODE_CLICK = "node:click", e.NODE_DBCLICK = "node:dbclick", e.NODE_GROUP_COPY = "node:group-copy-add", e.NODE_DND_ADD = "node:dnd-add", e.NODE_DND_DRAG = "node:dnd-drag", e.NODE_MOUSEDOWN = "node:mousedown", e.NODE_DRAGSTART = "node:dragstart", e.NODE_DRAG = "node:drag", e.NODE_DROP = "node:drop", e.NODE_MOUSEUP = "node:mouseup", e.NODE_MOUSEMOVE = "node:mousemove", e.NODE_MOUSEENTER = "node:mouseenter", e.NODE_MOUSELEAVE = "node:mouseleave", e.NODE_CONTEXTMENU = "node:contextmenu", e.NODE_ROTATE = "node:rotate", e.NODE_RESIZE = "node:resize", e.NODE_FOCUS = "node:focus", e.NODE_BLUR = "node:blur", e.NODE_PROPERTIES_CHANGE = "node:properties-change", e.NODE_PROPERTIES_DELETE = "node:properties-delete", e.EDGE_ADD = "edge:add", e.EDGE_DELETE = "edge:delete", e.EDGE_CLICK = "edge:click", e.EDGE_DBCLICK = "edge:dbclick", e.EDGE_FOCUS = "edge:focus", e.EDGE_BLUR = "edge:blur", e.EDGE_MOUSEENTER = "edge:mouseenter", e.EDGE_MOUSELEAVE = "edge:mouseleave", e.EDGE_CONTEXTMENU = "edge:contextmenu", e.EDGE_ADJUST = "edge:adjust", e.EDGE_EXCHANGE_NODE = "edge:exchange-node", e.ANCHOR_DRAGSTART = "anchor:dragstart", e.ANCHOR_DRAG = "anchor:drag", e.ANCHOR_DROP = "anchor:drop", e.ANCHOR_DRAGEND = "anchor:dragend", e.ADJUST_POINT_MOUSEDOWN = "adjustPoint:mousedown", e.ADJUST_POINT_MOUSEUP = "adjustPoint:mouseup", e.ADJUST_POINT_MOUSEMOVE = "adjustPoint:mousemove", e.ADJUST_POINT_DRAGSTART = "adjustPoint:dragstart", e.ADJUST_POINT_DRAG = "adjustPoint:drag", e.ADJUST_POINT_DROP = "adjustPoint:drop", e.ADJUST_POINT_DRAGEND = "adjustPoint:dragend", e.BLANK_MOUSEDOWN = "blank:mousedown", e.BLANK_DRAGSTART = "blank:dragstart", e.BLANK_DRAG = "blank:drag", e.BLANK_DROP = "blank:drop", e.BLANK_MOUSEMOVE = "blank:mousemove", e.BLANK_MOUSEUP = "blank:mouseup", e.BLANK_CLICK = "blank:click", e.BLANK_CONTEXTMENU = "blank:contextmenu", e.SELECTION_MOUSEDOWN = "selection:mousedown", e.SELECTION_DRAGSTART = "selection:dragstart", e.SELECTION_DRAG = "selection:drag", e.SELECTION_DROP = "selection:drop", e.SELECTION_MOUSEMOVE = "selection:mousemove", e.SELECTION_MOUSEUP = "selection:mouseup", e.SELECTION_CONTEXTMENU = "selection:contextmenu", e.CONNECTION_NOT_ALLOWED = "connection:not-allowed", e.TEXT_MOUSEDOWN = "text:mousedown", e.TEXT_DRAGSTART = "text:dragstart", e.TEXT_DRAG = "text:drag", e.TEXT_DROP = "text:drop", e.TEXT_CLICK = "text:click", e.TEXT_DBCLICK = "text:dbclick", e.TEXT_BLUR = "text:blur", e.TEXT_MOUSEMOVE = "text:mousemove", e.TEXT_MOUSEUP = "text:mouseup", e.TEXT_FOCUS = "text:focus", e.TEXT_ADD = "text:add", e.TEXT_UPDATE = "text:update", e.TEXT_CLEAR = "text:clear", e.LABEL_MOUSEDOWN = "label:mousedown", e.LABEL_DRAGSTART = "label:dragstart", e.LABEL_DRAG = "label:drag", e.LABEL_DROP = "label:drop", e.LABEL_CLICK = "label:click", e.LABEL_DBCLICK = "label:dbclick", e.LABEL_BLUR = "label:blur", e.LABEL_MOUSEMOVE = "label:mousemove", e.LABEL_MOUSEUP = "label:mouseup", e.LABEL_FOCUS = "label:focus", e.LABEL_ADD = "label:add", e.LABEL_UPDATE = "label:update", e.LABEL_CLEAR = "label:clear", e.LABEL_DELETE = "label:delete", e.LABEL_SHOULD_ADD = "label:should-add", e.LABEL_BATCH_ADD = "label:batch-add", e.LABEL_SHOULD_UPDATE = "label:should-update", e.LABEL_SHOULD_DELETE = "label:should-delete", e.LABEL_BATCH_DELETE = "label:batch-delete", e.LABEL_NOT_ALLOWED_ADD = "label:not-allowed-add", e.HISTORY_CHANGE = "history:change", e.GRAPH_TRANSFORM = "graph:transform", e.GRAPH_RENDERED = "graph:rendered", e.GRAPH_UPDATED = "graph:updated";
})(Fe || (Fe = {}));
var fi;
(function(e) {
  e[e.DEFAULT = 0] = "DEFAULT", e[e.INCREASE = 1] = "INCREASE";
})(fi || (fi = {}));
var qt;
(function(e) {
  e.HORIZONTAL = "horizontal", e.VERTICAL = "vertical";
})(qt || (qt = {}));
var Yr;
(function(e) {
  e.TEXT = "text", e.LABEL = "label";
})(Yr || (Yr = {}));
var AF = 0, ni = (
  /** @class */
  function() {
    function e(t) {
      var n = t.onDragStart, r = n === void 0 ? ws : n, i = t.onDragging, o = i === void 0 ? ws : i, a = t.onDragEnd, s = a === void 0 ? ws : a, l = t.eventType, u = l === void 0 ? "" : l, c = t.eventCenter, d = t.step, f = d === void 0 ? 1 : d, h = t.isStopPropagation, p = h === void 0 ? !0 : h, v = t.model, g = t.data, y = this;
      this.isDragging = !1, this.isStartDragging = !1, this.startX = 0, this.startY = 0, this.sumDeltaX = 0, this.sumDeltaY = 0, this.handleMouseDown = function(m) {
        var E, w, S = window == null ? void 0 : window.document;
        if (m.button === AF) {
          y.isStopPropagation && m.stopPropagation(), y.isStartDragging = !0, y.startX = m.clientX, y.startY = m.clientY, S.addEventListener("mousemove", y.handleMouseMove, !1), S.addEventListener("mouseup", y.handleMouseUp, !1);
          var _ = (E = y.model) === null || E === void 0 ? void 0 : E.getData();
          (w = y.eventCenter) === null || w === void 0 || w.emit(Fe["".concat(y.eventType, "_MOUSEDOWN")], {
            e: m,
            data: y.data || _
          }), y.startTime = (/* @__PURE__ */ new Date()).getTime();
        }
      }, this.handleMouseMove = function(m) {
        var E, w;
        if (y.isStopPropagation && m.stopPropagation(), !!y.isStartDragging && (y.sumDeltaX += m.clientX - y.startX, y.sumDeltaY += m.clientY - y.startY, y.startX = m.clientX, y.startY = m.clientY, y.step <= 1 || Math.abs(y.sumDeltaX) > y.step || Math.abs(y.sumDeltaY) > y.step)) {
          var S = y.sumDeltaX % y.step, _ = y.sumDeltaY % y.step, b = y.sumDeltaX - S, T = y.sumDeltaY - _;
          y.sumDeltaX = S, y.sumDeltaY = _;
          var R = (E = y.model) === null || E === void 0 ? void 0 : E.getData();
          y.isDragging || ((w = y.eventCenter) === null || w === void 0 || w.emit(Fe["".concat(y.eventType, "_DRAGSTART")], {
            e: m,
            data: y.data || R
          }), y.onDragStart({ event: m })), y.isDragging = !0, Promise.resolve().then(function() {
            var B, K;
            y.onDragging({
              deltaX: b,
              deltaY: T,
              event: m
            }), (B = y.eventCenter) === null || B === void 0 || B.emit(Fe["".concat(y.eventType, "_MOUSEMOVE")], {
              deltaX: b,
              deltaY: T,
              e: m,
              data: y.data || R
            }), (K = y.eventCenter) === null || K === void 0 || K.emit(Fe["".concat(y.eventType, "_DRAG")], {
              e: m,
              data: y.data || R
            });
          });
        }
      }, this.handleMouseUp = function(m) {
        var E = window.document;
        y.isStartDragging = !1, y.isStopPropagation && m.stopPropagation(), Promise.resolve().then(function() {
          var w, S, _;
          E.removeEventListener("mousemove", y.handleMouseMove, !1), E.removeEventListener("mouseup", y.handleMouseUp, !1);
          var b = (w = y.model) === null || w === void 0 ? void 0 : w.getData();
          (S = y.eventCenter) === null || S === void 0 || S.emit(Fe["".concat(y.eventType, "_MOUSEUP")], {
            e: m,
            data: y.data || b
          }), y.isDragging && (y.isDragging = !1, y.onDragEnd({ event: m }), (_ = y.eventCenter) === null || _ === void 0 || _.emit(Fe["".concat(y.eventType, "_DROP")], {
            e: m,
            data: y.data || b
          }));
        });
      }, this.cancelDrag = function() {
        var m = window == null ? void 0 : window.document;
        m.removeEventListener("mousemove", y.handleMouseMove, !1), m.removeEventListener("mouseup", y.handleMouseUp, !1), y.onDragEnd({ event: void 0 }), y.isDragging = !1;
      }, this.destroy = function() {
        y.isStartDragging && y.cancelDrag();
      }, this.onDragStart = r, this.onDragging = o, this.onDragEnd = s, this.step = f, this.isStopPropagation = p, this.eventType = u, this.eventCenter = c, this.model = v, this.data = g;
    }
    return e.prototype.setStep = function(t) {
      this.step = t;
    }, e.prototype.setModel = function(t) {
      this.model = t;
    }, e;
  }()
), NF = function(e) {
  var t = e.x, n = e.y, r = e.width, i = e.height;
  return {
    x: t - r / 2,
    y: n - i / 2,
    x1: t + r / 2,
    y1: n + i / 2
  };
}, MF = function(e) {
  var t = e.startPoint, n = e.endPoint, r = (t.x + n.x) / 2, i = (t.y + n.y) / 2, o = Math.abs(t.x - n.x) + 10, a = Math.abs(t.y - n.y) + 10;
  return {
    x: r - o / 2,
    y: i - a / 2,
    x1: r + o / 2,
    y1: i + a / 2
  };
}, TF = function(e) {
  var t = e.points, n = Ra(t), r = Mu(n, 8), i = r.x, o = r.y, a = r.width, s = r.height;
  return {
    x: i - a / 2,
    y: o - s / 2,
    x1: i + a / 2,
    y1: o + s / 2
  };
}, PF = function(e) {
  var t = e.path, n = Jy(t), r = Mu(n, 8), i = r.x, o = r.y, a = r.width, s = r.height;
  return {
    x: i - a / 2,
    y: o - s / 2,
    x1: i + a / 2,
    y1: o + s / 2
  };
}, DF = function(e) {
  if (e.modelType === gt.LINE_EDGE)
    return MF(e);
  if (e.modelType === gt.POLYLINE_EDGE)
    return TF(e);
  if (e.modelType === gt.BEZIER_EDGE)
    return PF(e);
}, RF = function(e, t, n, r) {
  var i = (t.y - e.y) * (r.x - n.x) - (e.x - t.x) * (n.y - r.y);
  if (i === 0)
    return !1;
  var o = ((t.x - e.x) * (r.x - n.x) * (n.y - e.y) + (t.y - e.y) * (r.x - n.x) * e.x - (r.y - n.y) * (t.x - e.x) * n.x) / i, a = -((t.y - e.y) * (r.y - n.y) * (n.x - e.x) + (t.x - e.x) * (r.y - n.y) * e.y - (r.x - n.x) * (t.y - e.y) * n.y) / i;
  return (
    // 交点在线段1上
    (o - e.x) * (o - t.x) <= 0 && (a - e.y) * (a - t.y) <= 0 && // 且交点也在线段2上
    (o - n.x) * (o - r.x) <= 0 && (a - n.y) * (a - r.y) <= 0 ? {
      x: o,
      y: a
    } : !1
  );
}, Au = function(e, t, n) {
  var r = e.x, i = e.y, o = t.x, a = t.y, s = n.x, l = n.y, u = (l - a) / (s - o), c = a - u * o;
  return (r >= o && r <= s || r <= o && r >= s) && (i >= a && i <= l || i <= a && i >= l) && Math.abs(i - u * r - c) < Number.EPSILON;
}, Nu = function(e) {
  var t = e.start, n = e.end, r = e.offset, i = e.verticalLength, o = e.type, a = {
    leftX: 0,
    leftY: 0,
    rightX: 0,
    rightY: 0
  }, s = Math.atan((n.y - t.y) / (n.x - t.x)), l = Math.atan(r / i), u = Math.sqrt(i * i + r * r);
  return o === "start" ? n.x >= t.x ? (a.leftX = t.x + u * Math.sin(s + l), a.leftY = t.y - u * Math.cos(s + l), a.rightX = t.x - u * Math.sin(s - l), a.rightY = t.y + u * Math.cos(s - l)) : (a.leftX = t.x - u * Math.sin(s + l), a.leftY = t.y + u * Math.cos(s + l), a.rightX = t.x + u * Math.sin(s - l), a.rightY = t.y - u * Math.cos(s - l)) : o === "end" && (n.x >= t.x ? (a.leftX = n.x + u * Math.sin(s - l), a.leftY = n.y - u * Math.cos(s - l), a.rightX = n.x - u * Math.sin(s + l), a.rightY = n.y + u * Math.cos(s + l)) : (a.leftX = n.x - u * Math.sin(s - l), a.leftY = n.y + u * Math.cos(s - l), a.rightX = n.x + u * Math.sin(s + l), a.rightY = n.y - u * Math.cos(s + l))), a;
}, hs = function() {
  return hs = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, hs.apply(this, arguments);
}, Hr = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, To = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
}, LF = function(e, t) {
  return Math.abs(e.centerX - t.centerX) * 2 < e.width + t.width && Math.abs(e.centerY - t.centerY) * 2 < e.height + t.height;
}, Nv = function(e) {
  var t = [], n = {};
  return e.forEach(function(r) {
    var i = "".concat(r.x, "-").concat(r.y);
    r.id = i, n[i] = r;
  }), Object.keys(n).forEach(function(r) {
    t.push(n[r]);
  }), t;
}, Nd = function(e, t) {
  return e.width === 0 && e.height === 0 ? e : {
    x: e.x,
    y: e.y,
    centerX: e.centerX,
    centerY: e.centerY,
    minX: e.minX - t,
    minY: e.minY - t,
    maxX: e.maxX + t,
    maxY: e.maxY + t,
    height: e.height + 2 * t,
    width: e.width + 2 * t
  };
}, $F = function(e, t) {
  var n = Math.abs(e.x - t.centerX), r = Math.abs(e.y - t.centerY);
  return n / t.width > r / t.height ? qt.HORIZONTAL : qt.VERTICAL;
}, Md = function(e, t, n) {
  var r = $F(n, t);
  return r === qt.HORIZONTAL ? {
    x: n.x > e.centerX ? e.maxX : e.minX,
    y: n.y
  } : {
    x: n.x,
    y: n.y > e.centerY ? e.maxY : e.minY
  };
}, Cb = function(e, t) {
  var n = Math.min(e.minX, t.minX), r = Math.min(e.minY, t.minY), i = Math.max(e.maxX, t.maxX), o = Math.max(e.maxY, t.maxY);
  return {
    x: (n + i) / 2,
    y: (r + o) / 2,
    centerX: (n + i) / 2,
    centerY: (r + o) / 2,
    minX: n,
    minY: r,
    maxX: i,
    maxY: o,
    height: o - r,
    width: i - n
  };
}, Mu = function(e, t) {
  e === void 0 && (e = []);
  var n = [], r = [];
  e.forEach(function(c) {
    n.push(c.x), r.push(c.y);
  });
  var i = Math.min.apply(Math, To([], Hr(n), !1)), o = Math.max.apply(Math, To([], Hr(n), !1)), a = Math.min.apply(Math, To([], Hr(r), !1)), s = Math.max.apply(Math, To([], Hr(r), !1)), l = o - i, u = s - a;
  return t && (l += t, u += t), {
    centerX: (i + o) / 2,
    centerY: (a + s) / 2,
    maxX: o,
    maxY: s,
    minX: i,
    minY: a,
    x: (i + o) / 2,
    y: (a + s) / 2,
    height: u,
    width: l
  };
}, Td = function(e) {
  var t = e.minX, n = e.minY, r = e.maxX, i = e.maxY;
  return [
    {
      x: t,
      y: n
    },
    {
      x: r,
      y: n
    },
    {
      x: r,
      y: i
    },
    {
      x: t,
      y: i
    }
  ];
}, wc = function(e, t) {
  var n = e.x, r = e.y;
  return n < t.minX || n > t.maxX || r < t.minY || r > t.maxY;
}, kF = function(e, t) {
  return t < e.minX || t > e.maxX ? [] : [
    {
      x: t,
      y: e.minY
    },
    {
      x: t,
      y: e.maxY
    }
  ];
}, IF = function(e, t) {
  return t < e.minY || t > e.maxY ? [] : [
    {
      x: e.minX,
      y: t
    },
    {
      x: e.maxX,
      y: t
    }
  ];
}, BF = function(e, t) {
  return To(To([], Hr(kF(e, t.x)), !1), Hr(IF(e, t.y)), !1);
}, Mv = function(e, t) {
  return Math.abs(e.x - t.x) + Math.abs(e.y - t.y);
}, jF = function(e, t) {
  var n = -2, r = 0;
  return t.forEach(function(i) {
    i && (e.x === i.x && (r += n), e.y === i.y && (r += n));
  }), r;
}, Ob = function(e, t, n, r, i) {
  return Mv(e, t) + Mv(e, n) + jF(e, [t, n, r, i]);
}, c2 = function(e, t, n, r, i) {
  i || (i = 0), e.unshift(t[r]), n[r] && n[r] !== r && i <= 100 && c2(e, t, n, n[r], i + 1);
}, zF = function(e, t) {
  var n = e.indexOf(t);
  n > -1 && e.splice(n, 1);
}, Fl = function(e, t, n, r) {
  var i = t.x - e.x, o = t.y - e.y, a = r.x - n.x, s = r.y - n.y, l = (-o * (e.x - n.x) + i * (e.y - n.y)) / (-a * o + i * s), u = (a * (e.y - n.y) - s * (e.x - n.x)) / (-a * o + i * s);
  return l >= 0 && l <= 1 && u >= 0 && u <= 1;
}, Ab = function(e, t, n) {
  if (n.width === 0 && n.height === 0)
    return !1;
  var r = Hr(Td(n), 4), i = r[0], o = r[1], a = r[2], s = r[3];
  return Fl(e, t, i, o) || Fl(e, t, i, s) || Fl(e, t, o, a) || Fl(e, t, a, s);
}, FF = function(e, t, n, r) {
  var i = [];
  return e.forEach(function(o) {
    o !== t && (o.x === t.x || o.y === t.y) && !Ab(o, t, n) && !Ab(o, t, r) && i.push(o);
  }), Nv(i);
}, HF = function(e, t, n, r, i, o, a) {
  var s = [], l = [t], u = {}, c = {}, d = {};
  t.id && (c[t.id] = 0, d[t.id] = Ob(t, n, t));
  var f = {};
  e.forEach(function(v) {
    v.id && (f[v.id] = v);
  });
  for (var h = function() {
    var v, g = 1 / 0;
    if (l.forEach(function(m) {
      m.id && d[m.id] < g && (g = d[m.id], v = m);
    }), v === n && n.id) {
      var y = [];
      return c2(y, f, u, n.id), { value: y };
    }
    if (!v)
      return { value: [t, n] };
    zF(l, v), s.push(v), FF(e, v, r, i).forEach(function(m) {
      if (s.indexOf(m) === -1 && (l.indexOf(m) === -1 && l.push(m), v != null && v.id && (m != null && m.id))) {
        var E = d[v.id] + Mv(v, m);
        if (c[m.id] && E >= c[m.id])
          return;
        u[m.id] = v.id, c[m.id] = E, d[m.id] = c[m.id] + Ob(m, n, t, o, a);
      }
    });
  }; l.length; ) {
    var p = h();
    if (typeof p == "object")
      return p.value;
  }
  return [t, n];
}, Nb = function(e) {
  return sr(e);
}, d2 = function(e) {
  for (var t = 1; t < e.length - 1; ) {
    var n = e[t - 1], r = e[t], i = e[t + 1];
    n.x === r.x && r.x === i.x || n.y === r.y && r.y === i.y ? e.splice(t, 1) : t++;
  }
  return e;
}, Mb = function(e, t, n, r, i) {
  var o = Nb(n), a = Nb(r), s = Nd(o, i), l = Nd(a, i), u = Md(s, o, e), c = Md(l, a, t);
  if (LF(s, l)) {
    var d = WF(e, t, u, c);
    return To(To([e, u], Hr(d), !1), [c, t], !1);
  }
  var f = Mu([u, c]), h = Cb(s, f), p = Cb(l, f), v = [];
  v = v.concat(Td(h)), v = v.concat(Td(p));
  var g = {
    x: (e.x + t.x) / 2,
    y: (e.y + t.y) / 2
  };
  [f, h, p].forEach(function(m) {
    v = v.concat(BF(m, g).filter(function(E) {
      return wc(E, s) && wc(E, l);
    }));
  }), [
    {
      x: u.x,
      y: c.y
    },
    {
      x: c.x,
      y: u.y
    }
  ].forEach(function(m) {
    wc(m, s) && wc(m, l) && v.push(m);
  }), v.unshift(u), v.push(c), v = Nv(v);
  var y = HF(v, u, c, o, a, e, t);
  return y.unshift(e), y.push(t), y.length > 2 && (y = d2(y)), Nv(y);
}, VF = function(e) {
  if (e.length === 1) {
    var t = Hr(e, 1), n = t[0];
    return [n, n];
  } else {
    for (var r = e[0], i = e[1], o = hi(r.x, r.y, i.x, i.y), a = 1; a < e.length - 1; a++) {
      var s = e[a], l = e[a + 1], u = hi(s.x, s.y, l.x, l.y);
      u > o && (o = u, r = s, i = l);
    }
    return [r, i];
  }
}, Tb = function(e, t, n) {
  var r = Po(e, n), i = Po(t, n);
  return r && i;
}, Pb = function(e, t, n) {
  var r = Po(e, n), i = Po(t, n), o = r && i, a = r || i;
  return !o && a;
}, Db = function(e, t, n) {
  for (var r = void 0, i = sr(n), o = Td(i), a = 0; a < o.length; a++) {
    var s = Fl(e, t, o[a], o[(a + 1) % o.length]);
    s && (r = [o[a], o[(a + 1) % o.length]]);
  }
  if (r)
    return RF(e, t, r[0], r[1]);
}, Pd = function(e, t) {
  var n = void 0;
  return e.x === t.x ? n = qt.VERTICAL : e.y === t.y && (n = qt.HORIZONTAL), n;
}, Ra = function(e) {
  var t = e.split(" "), n = [];
  return t && t.forEach(function(r) {
    var i = Hr(r.split(","), 2), o = i[0], a = i[1];
    n.push({
      x: Number(o),
      y: Number(a)
    });
  }), n;
}, WF = function(e, t, n, r) {
  var i = [], o = Pd(e, n), a = Pd(t, r);
  if (o === a)
    e.y === n.y ? (i.push({
      x: n.x,
      y: (n.y + r.y) / 2
    }), i.push({
      x: r.x,
      y: (n.y + r.y) / 2
    })) : (i.push({
      x: (n.x + r.x) / 2,
      y: n.y
    }), i.push({
      x: (n.x + r.x) / 2,
      y: r.y
    }));
  else {
    var s = {
      x: n.x,
      y: r.y
    }, l = Au(s, e, n), u = Au(s, t, r);
    if (l || u)
      s = {
        x: r.x,
        y: n.y
      };
    else {
      var c = Rb(s, e, n), d = Rb(s, t, r);
      c && d && (s = {
        x: r.x,
        y: n.y
      });
    }
    i.push(s);
  }
  return i;
}, Rb = function(e, t, n) {
  return e.x === t.x && e.x === n.x || e.y === t.y && e.y === n.y;
}, f2 = function(e) {
  if (!e)
    return 0;
  for (var t = 0, n = 0; n < e.length; n++) {
    var r = e.charCodeAt(n);
    e.match(/[A-Z]/) ? t += 1.5 : r >= 1 && r <= 126 || r >= 65376 && r <= 65439 ? t += 1 : t += 2;
  }
  return t;
}, GF = function(e) {
  var t = e.start, n = e.end, r;
  if (t.x === n.x && t.y === n.y)
    r = "";
  else {
    var i = {
      start: t,
      end: n,
      offset: 10,
      verticalLength: 5
    }, o = Nu(hs(hs({}, i), { type: "start" })), a = Nu(hs(hs({}, i), { type: "end" }));
    r = "M".concat(o.leftX, " ").concat(o.leftY, `
    L`).concat(o.rightX, " ").concat(o.rightY, `
    L`).concat(a.rightX, " ").concat(a.rightY, `
    L`).concat(a.leftX, " ").concat(a.leftY, " z");
  }
  return {
    d: r,
    fill: "transparent",
    stroke: "transparent",
    strokeWidth: 1,
    strokeDasharray: "4, 4"
  };
}, Lb = function(e) {
  var t = e.start, n = e.end, r = e.sourceNode, i = e.targetNode, o = e.offset, a = sr(r), s = sr(i), l = Nd(a, o), u = Nd(s, o), c = Md(l, a, t), d = Md(u, s, n);
  return {
    sNext: c,
    ePre: d
  };
}, Jy = function(e) {
  var t = e.replace(/M/g, "").replace(/C/g, ",").split(","), n = xc(t[0]), r = xc(t[1]), i = xc(t[2]), o = xc(t[3]);
  return [n, r, i, o];
}, xc = function(e) {
  var t = Hr(e.replace(/(^\s*)/g, "").split(" "), 2), n = t[0], r = t[1];
  return {
    x: +n,
    y: +r
  };
}, $b = function(e, t) {
  var n = Hr(e, 4), r = n[0], i = n[1], o = n[2], a = n[3], s = RH(r, i, o, a, t);
  return [s, e[3]];
}, h2 = function(e, t) {
  for (var n = e.x, r = e.y, i = Ra(t), o = Number.MAX_SAFE_INTEGER, a, s = [], l = 0; l < i.length; l++)
    s.push({
      start: i[l],
      end: i[(l + 1) % i.length]
    });
  if (s.forEach(function(f) {
    var h = f.start, p = f.end;
    if (h.x === p.x) {
      var v = {
        x: h.x,
        y: r
      }, g = Au(v, h, p);
      if (g) {
        var y = Math.abs(h.x - n);
        y < o && (o = y, a = v);
      }
    } else if (h.y === p.y) {
      var v = {
        x: n,
        y: h.y
      }, g = Au(v, h, p);
      if (g) {
        var y = Math.abs(h.y - r);
        y < o && (o = y, a = v);
      }
    }
  }), !a) {
    var u = s[0], c = u.start, d = u.end;
    a = {
      x: c.x + (d.x - c.x) / 2,
      y: c.y + (d.y - c.y) / 2
    };
  }
  return a;
}, XF = function(e) {
  return ma(e, [
    "id",
    "type",
    "sourceNodeId",
    "sourceAnchorId",
    "targetNodeId",
    "targetAnchorId",
    "pointsList",
    "startPoint",
    "endPoint",
    "properties"
  ]);
}, kb = function(e, t) {
  return Math.sqrt(Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2));
};
function UF(e, t) {
  return typeof t != "function" ? function(n, r, i) {
    return Object.assign({ type: e.edgeType }, i);
  } : function(n, r, i) {
    var o = t(n, r, i);
    return o ? typeof o == "string" ? Object.assign({}, i, { type: o }) : Object.assign({ type: o }, i) : { type: e.edgeType };
  };
}
var YF = function(e) {
  var t = e.rows, n = e.rowsLength, r = e.fontSize, i = 0;
  return st(t, function(o) {
    var a = f2(o);
    i = a > i ? a : i;
  }), {
    width: Math.ceil(i / 2) * r + r / 4,
    height: n * (r + 2) + r / 4
  };
}, ns = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Ec = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
};
function Is(e, t) {
  return t * Math.round(e / t) || e;
}
function KF(e, t, n) {
  if (!e)
    return [];
  var r = Math.min.apply(Math, Ec([], ns(e.map(function(v) {
    return v[0];
  })), !1)), i = Math.max.apply(Math, Ec([], ns(e.map(function(v) {
    return v[0];
  })), !1)), o = Math.min.apply(Math, Ec([], ns(e.map(function(v) {
    return v[1];
  })), !1)), a = Math.max.apply(Math, Ec([], ns(e.map(function(v) {
    return v[1];
  })), !1)), s = -r, l = -o, u = e.map(function(v) {
    var g = ns(v, 2), y = g[0], m = g[1];
    return [
      y + s,
      m + l
    ];
  }), c = i - r, d = a - o, f = t ? t / c : 1, h = n ? n / d : 1, p = Math.min(f, h);
  return u.map(function(v) {
    var g = ns(v, 2), y = g[0], m = g[1];
    return [y * p, m * p];
  });
}
var wp = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, xp = function(e, t, n) {
  var r = wp(e, 2), i = r[0], o = r[1], a = wp(t, 2), s = a[0], l = a[1], u = wp(n, 2), c = u[0], d = u[1];
  return i > s && i < c && o > l && o < d;
}, p2 = function(e, t) {
  var n = t.multipleSelectKey, r = !1;
  switch (n) {
    case "meta":
      r = e.metaKey;
      break;
    case "alt":
      r = e.altKey;
      break;
    case "shift":
      r = e.shiftKey;
      break;
    case "ctrl":
      r = e.ctrlKey;
      break;
    default:
      r = !1;
      break;
  }
  return r;
}, Qy = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}();
function Ib(e, t) {
  return e instanceof Pn && t instanceof Pn;
}
var v2 = (
  /** @class */
  function(e) {
    Qy(t, e);
    function t(n, r, i) {
      var o = e.call(this, 3) || this;
      return o[0] = n, o[1] = r, o[2] = i, o.x = n, o.y = r, o.z = i, Object.setPrototypeOf(o, t.prototype), o;
    }
    return t.prototype.add = function(n) {
      if (Ib(this, n))
        return new Pn(this.x + n.x, this.y + n.y);
      var r = this.z + n.z;
      return new Tv((this.x + n.x) / r, (this.y + n.y) / r);
    }, t.prototype.subtract = function(n) {
      if (Ib(this, n))
        return new Pn(this.x - n.x, this.y - n.y);
      var r = this.z - n.z;
      return r === 0 ? new Pn(this.x - n.x, this.y - n.y) : new Tv((this.x - n.x) / r, (this.y - n.y) / r);
    }, t;
  }(Array)
), Pn = (
  /** @class */
  function(e) {
    Qy(t, e);
    function t(n, r, i) {
      var o = e.call(this, n, r, i ?? 0) || this;
      return Object.setPrototypeOf(o, t.prototype), o;
    }
    return t.prototype.toString = function() {
      return "Vector";
    }, t.prototype.dot = function(n) {
      var r = this;
      return n.reduce(function(i, o, a) {
        return i + o * r[a];
      });
    }, t.prototype.cross = function(n) {
      return new t(this.y * n.z - this.z * n.y, this.z * n.x - this.x * n.z, this.x * n.y - this.y * n.x);
    }, t.prototype.getLength = function() {
      return Math.hypot(this.x, this.y);
    }, t.prototype.normalize = function() {
      var n = this.getLength();
      return new t(this.x / n, this.y / n);
    }, t.prototype.crossZ = function(n) {
      return this.x * n.y - this.y * n.x;
    }, t.prototype.angle = function(n) {
      var r = this.crossZ(n), i = Math.acos(this.normalize().dot(n.normalize()));
      return r >= 0 ? i : -i;
    }, t;
  }(v2)
), Tv = (
  /** @class */
  function(e) {
    Qy(t, e);
    function t(n, r) {
      var i = e.call(this, n, r, 1) || this;
      return Object.setPrototypeOf(i, t.prototype), i;
    }
    return t.prototype.toString = function() {
      return "Point";
    }, t;
  }(v2)
), ih = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), rs = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Ep = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
}, oh = (
  /** @class */
  function(e) {
    ih(t, e);
    function t() {
      for (var n = [], r = 0; r < arguments.length; r++)
        n[r] = arguments[r];
      var i = e.call(this, n.length) || this;
      return i.fill(new Array(3)), n.forEach(function(o, a) {
        i[a] = o;
      }), i.columns = n[0].length, i.rows = n.length, Object.setPrototypeOf(i, t.prototype), i;
    }
    return t.prototype.getRow = function(n) {
      return this[n];
    }, t.prototype.getColumn = function(n) {
      return Ep([], rs(this.map(function(r) {
        return r[n];
      })), !1);
    }, t.prototype.transpose = function() {
      for (var n = [], r = 0; r < this.columns; r++)
        n.push(this.getColumn(r));
      return new (t.bind.apply(t, Ep([void 0], rs(n), !1)))();
    }, t.prototype.cross = function(n) {
      var r = new Array(this.rows).fill("").map(function() {
        return [];
      });
      if (this.columns === n.rows)
        for (var i = 0; i < this.rows; i++)
          for (var o = this.getRow(i), a = function(l) {
            var u = n.getColumn(l);
            r[i][l] = o.reduce(function(c, d, f) {
              return c + d * u[f];
            }, 0);
          }, s = 0; s < n.columns; s++)
            a(s);
      return new (t.bind.apply(t, Ep([void 0], rs(r), !1)))();
    }, t.prototype.to2D = function() {
      return this.map(function(n) {
        return [n[0], n[1]];
      });
    }, t.prototype.toPoints = function() {
      return this.map(function(n) {
        return new Tv(n[0], n[1]);
      });
    }, t.prototype.toString = function() {
      var n = rs(this[0], 2), r = n[0], i = n[1], o = rs(this[1], 2), a = o[0], s = o[1], l = rs(this[2], 2), u = l[0], c = l[1];
      return "matrix(".concat(r, " ").concat(i, " ").concat(a, " ").concat(s, " ").concat(u, " ").concat(c, ")");
    }, t.prototype.translate = function(n, r) {
      return this.cross(new ah(n, r));
    }, t.prototype.rotate = function(n) {
      return this.cross(new qF(n));
    }, t.prototype.scale = function(n, r) {
      return this.cross(new ZF(n, r));
    }, t;
  }(Array)
), qF = (
  /** @class */
  function(e) {
    ih(t, e);
    function t(n) {
      var r = e.call(this, new Pn(+Math.cos(n).toFixed(2), +Math.sin(n).toFixed(2), 0), new Pn(-Math.sin(n).toFixed(2), +Math.cos(n).toFixed(2), 0), new Pn(0, 0, 1)) || this;
      return Object.setPrototypeOf(r, t.prototype), r;
    }
    return t.prototype.inverse = function() {
      return this.transpose();
    }, t;
  }(oh)
), ZF = (
  /** @class */
  function(e) {
    ih(t, e);
    function t(n, r) {
      var i = e.call(this, new Pn(n, 0, 0), new Pn(0, r, 0), new Pn(0, 0, 1)) || this;
      return i.sx = n, i.sy = r, Object.setPrototypeOf(i, t.prototype), i;
    }
    return t.prototype.inverse = function() {
      return new t(1 / this.sx, 1 / this.sy);
    }, t;
  }(oh)
), ah = (
  /** @class */
  function(e) {
    ih(t, e);
    function t(n, r) {
      var i = e.call(this, new Pn(1, 0, 0), new Pn(0, 1, 0), new Pn(n, r, 1)) || this;
      return i.tx = n, i.ty = r, Object.setPrototypeOf(i, t.prototype), i;
    }
    return t.prototype.inverse = function() {
      return new t(-this.tx, -this.ty);
    }, t;
  }(oh)
);
x3({ isolateGlobalState: !0 });
var Dd = function() {
  return Dd = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Dd.apply(this, arguments);
}, Pv = function(e) {
  var t = e.anchors;
  return t;
}, Rd = function(e, t) {
  for (var n = t.nodes, r, i = n.length - 1; i >= 0; i--) {
    var o = n[i], a = eH(e, o);
    if (a) {
      var s = o.getTargetAnchor(e);
      if (s) {
        var l = {
          node: o,
          anchorIndex: s.index,
          anchor: s.anchor
        };
        (!r || JF(o, r.node, t)) && (r = l);
      }
    }
  }
  return r;
}, JF = function(e, t, n) {
  return e.zIndex > t.zIndex ? !0 : n.nodesMap[e.id].index > n.nodesMap[t.id].index;
}, QF = function(e, t) {
  for (var n = Pv(t), r, i = Number.MAX_SAFE_INTEGER, o = 0; o < n.length; o++) {
    var a = hi(e.x, e.y, n[o].x, n[o].y);
    a < i && (i = a, r = {
      index: o,
      anchor: Dd(Dd({}, n[o]), { x: n[o].x, y: n[o].y, id: n[o].id })
    });
  }
  return r;
}, hi = function(e, t, n, r) {
  return Math.hypot(e - n, t - r);
}, Po = function(e, t) {
  var n = !1, r = 0, i = sr(t);
  return e.x >= i.minX - r && e.x <= i.maxX + r && e.y >= i.minY - r && e.y <= i.maxY + r && (n = !0), n;
}, eH = function(e, t) {
  var n = !1, r = 5, i = sr(t);
  return e.x >= i.minX - r && e.x <= i.maxX + r && e.y >= i.minY - r && e.y <= i.maxY + r && (n = !0), n;
}, sr = function(e) {
  var t = e.x, n = e.y, r = e.width, i = e.height;
  return {
    minX: t - r / 2,
    minY: n - i / 2,
    maxX: t + r / 2,
    maxY: n + i / 2,
    x: t,
    y: n,
    width: r,
    height: i,
    centerX: t,
    centerY: n
  };
}, tH = function(e) {
  var t = e, n = t.x, r = t.y, i = t.width, o = t.height, a = t.radius;
  return [
    {
      x: n - i / 2 + a,
      y: r - o / 2 + a,
      r: a
    },
    {
      x: n + i / 2 - a,
      y: r - o / 2 + a,
      r: a
    },
    {
      x: n - i / 2 + a,
      y: r + o / 2 - a,
      r: a
    },
    {
      x: n + i / 2 - a,
      y: r + o / 2 - a,
      r: a
    }
  ];
}, Bb = function(e, t, n) {
  var r = tH(n), i, o = Number.MAX_SAFE_INTEGER;
  return r.forEach(function(a) {
    var s = hi(e.x, e.y, a.x, a.y);
    s < o && (o = s, i = a);
  }), Dv(e, t, i);
}, Dv = function(e, t, n) {
  var r, i = n.x, o = n.y, a = n.r;
  if (t === qt.HORIZONTAL) {
    var s = i - Math.sqrt(a * a - (e.y - o) * (e.y - o)), l = i + Math.sqrt(a * a - (e.y - o) * (e.y - o)), u = Math.abs(s - e.x) < Math.abs(l - e.x) ? s : l;
    r = {
      x: u,
      y: e.y
    };
  } else if (t === qt.VERTICAL) {
    var c = o - Math.sqrt(a * a - (e.x - i) * (e.x - i)), d = o + Math.sqrt(a * a - (e.x - i) * (e.x - i)), f = Math.abs(c - e.y) < Math.abs(d - e.y) ? c : d;
    r = {
      x: e.x,
      y: f
    };
  }
  return r;
}, jb = function(e, t) {
  var n = t, r = !1, i = n.x, o = n.y, a = n.width, s = n.height, l = n.radius, u = {
    minX: i - a / 2 + l,
    maxX: i + a / 2 - l,
    minY: o - s / 2 + l,
    maxY: o + s / 2 - l
  };
  return e.y === o + s / 2 || e.y === o - s / 2 ? r = e.x > u.minX && e.x < u.maxX : (e.x === i + a / 2 || e.x === i - a / 2) && (r = e.y > u.minY && e.y < u.maxY), r;
}, zb = function(e, t, n) {
  var r, i = n, o = i.x, a = i.y, s = i.rx, l = i.ry;
  if (t === qt.HORIZONTAL) {
    var u = o - Math.sqrt(s * s - (e.y - a) * (e.y - a) * s * s / (l * l)), c = o + Math.sqrt(s * s - (e.y - a) * (e.y - a) * s * s / (l * l)), d = Math.abs(u - e.x) < Math.abs(c - e.x) ? u : c;
    r = {
      x: d,
      y: e.y
    };
  } else if (t === qt.VERTICAL) {
    var f = a - Math.sqrt(l * l - (e.x - o) * (e.x - o) * l * l / (s * s)), h = a + Math.sqrt(l * l - (e.x - o) * (e.x - o) * l * l / (s * s)), p = Math.abs(f - e.y) < Math.abs(h - e.y) ? f : h;
    r = {
      x: e.x,
      y: p
    };
  }
  return r;
}, Sc = function(e, t, n) {
  for (var r = n.pointsPosition, i = Number.MAX_SAFE_INTEGER, o, a = [], s = 0; s < r.length; s++)
    a.push({
      start: r[s],
      end: r[(s + 1) % r.length]
    });
  return a.forEach(function(l) {
    var u = l.start, c = l.end, d = u, f = c;
    u.x > c.x && (d = c, f = u);
    var h = {
      x: e.x,
      y: e.y
    };
    if (d.x === f.x && t === qt.HORIZONTAL && (h = {
      x: d.x,
      y: e.y
    }), d.y === f.y && t === qt.VERTICAL && (h = {
      x: e.x,
      y: d.y
    }), d.x !== f.x && d.y !== f.y) {
      var p = (f.y - d.y) / (f.x - d.x), v = (d.x * f.y - f.x * d.y) / (d.x - f.x);
      t === qt.HORIZONTAL ? h = {
        x: (e.y - v) / p,
        y: e.y
      } : t === qt.VERTICAL && (h = {
        x: e.x,
        y: p * e.x + v
      });
    }
    var g = Au(h, u, c);
    if (g) {
      var y = hi(h.x, h.y, e.x, e.y);
      y < i && (i = y, o = h);
    }
  }), o;
}, nH = function(e) {
  var t = ma(e, [
    "id",
    "type",
    "x",
    "y",
    "text",
    "label",
    "properties",
    "virtual",
    // 区域节点是否为dnd添加的虚拟节点
    "rotate",
    // TODO: 确认是否可以加到此处
    "resizable",
    "rotatable"
  ]);
  return t;
}, Fb = function(e, t, n, r) {
  var i = e.x, o = e.y;
  return t.x > e.x ? i = e.x + n / 2 : t.x < e.x && (i = e.x - n / 2), t.y > e.y ? o = e.y + r / 2 : t.y < e.y && (o = e.y - r / 2), {
    x: i,
    y: o
  };
}, g2 = function(e) {
  var t = e.rows, n = e.style, r = e.rowsLength, i = e.className, o = document.createElement("div");
  o.className = i, o.style.fontSize = "".concat(n.fontSize), o.style.width = "".concat(n.width), o.style.lineHeight = "".concat(n.lineHeight), o.style.padding = "".concat(n.padding), n.fontFamily && (o.style.fontFamily = "".concat(n.fontFamily)), r > 1 ? t.forEach(function(s) {
    var l = document.createElement("div");
    l.textContent = s, o.appendChild(l);
  }) : o.textContent = t[0], document.body.appendChild(o);
  var a = o.clientHeight;
  return document.body.removeChild(o), a;
}, Hb = function(e) {
  var t = e.rows, n = e.rowsLength, r = e.fontSize, i = 0;
  return t && t.forEach(function(o) {
    var a = f2(o);
    i = a > i ? a : i;
  }), {
    width: Math.ceil(i / 2) * r + r / 4,
    height: n * (r + 2) + r / 4
  };
}, Bs = function(e) {
  return typeof e != "object" ? {
    isAllPass: !!e,
    msg: e ? "" : "不允许连接"
  } : e;
};
let Cc;
const rH = new Uint8Array(16);
function iH() {
  if (!Cc && (Cc = typeof crypto < "u" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto), !Cc))
    throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
  return Cc(rH);
}
const On = [];
for (let e = 0; e < 256; ++e)
  On.push((e + 256).toString(16).slice(1));
function oH(e, t = 0) {
  return On[e[t + 0]] + On[e[t + 1]] + On[e[t + 2]] + On[e[t + 3]] + "-" + On[e[t + 4]] + On[e[t + 5]] + "-" + On[e[t + 6]] + On[e[t + 7]] + "-" + On[e[t + 8]] + On[e[t + 9]] + "-" + On[e[t + 10]] + On[e[t + 11]] + On[e[t + 12]] + On[e[t + 13]] + On[e[t + 14]] + On[e[t + 15]];
}
const aH = typeof crypto < "u" && crypto.randomUUID && crypto.randomUUID.bind(crypto), Vb = {
  randomUUID: aH
};
function sH(e, t, n) {
  if (Vb.randomUUID && !t && !e)
    return Vb.randomUUID();
  e = e || {};
  const r = e.random || (e.rng || iH)();
  return r[6] = r[6] & 15 | 64, r[8] = r[8] & 63 | 128, oH(r);
}
var $o = function() {
  return sH();
}, ql = /* @__PURE__ */ new Map(), y2 = function(e) {
  var t = $o();
  function n() {
    e();
    var i = ql.get(t);
    if (i) {
      var o = window.requestAnimationFrame(n);
      ql.set(t, o);
    }
  }
  var r = window.requestAnimationFrame(n);
  return ql.set(t, r), t;
}, Ld = function(e) {
  var t = ql.get(e);
  t && (window.cancelAnimationFrame(t), ql.delete(e));
}, Tu = function() {
  return Tu = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Tu.apply(this, arguments);
}, lH = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function m2(e) {
  var t = e.x, n = t === void 0 ? 0 : t, r = e.y, i = r === void 0 ? 0 : r, o = e.value, a = e.fontSize, s = a === void 0 ? 12 : a, l = e.fill, u = l === void 0 ? "currentColor" : l, c = e.overflowMode, d = c === void 0 ? "default" : c, f = e.textWidth, h = f === void 0 ? void 0 : f, p = e.model, v = {
    x: n,
    y: i,
    fill: u,
    fontSize: s,
    textAnchor: "middle",
    dominantBaseline: "central"
    // ...props,
  };
  if (st(Gi(e), function(S) {
    var _ = lH(S, 2), b = _[0], T = _[1];
    typeof T != "object" && (v[b] = T);
  }), o) {
    var g = String(o).split(/[\r\n]/g), y = g.length;
    if (d !== "default") {
      var m = p.BaseType, E = p.modelType;
      if (m === un.NODE && E !== gt.TEXT_NODE || m === un.EDGE && h)
        return uH(e);
    }
    if (y > 1) {
      var w = g.map(function(S, _) {
        var b = s + 2, T = (_ - (y - 1) / 2) * b;
        return Q("tspan", { className: "lf-text-tspan", x: n, y: i + T, children: S });
      });
      return Q("text", Tu({}, v, { children: w }));
    }
    return Q("text", Tu({}, v, { children: o }));
  }
  return null;
}
function uH(e) {
  var t = e.x, n = e.y, r = e.value, i = e.model, o = e.textWidth, a = e.fontSize, s = a === void 0 ? 12 : a, l = e.lineHeight, u = e.fontFamily, c = u === void 0 ? "" : u, d = e.wrapPadding, f = d === void 0 ? "0, 0" : d, h = e.overflowMode, p = i.width, v = i.height, g = i.textHeight, y = o || p, m = String(r).split(/[\r\n]/g), E = m.length, w = g2({
    rows: m,
    style: {
      fontSize: "".concat(s, "px"),
      width: "".concat(y, "px"),
      fontFamily: c,
      lineHeight: l,
      padding: f
    },
    rowsLength: E,
    className: "lf-get-text-height"
  }), S = v > w ? v : w;
  g && (S = g);
  var _ = h === "ellipsis";
  return _ && (S = s + 2), Q("g", { children: Q("foreignObject", { width: y, height: S, x: t - y / 2, y: n - S / 2, style: { overflow: "visible", textAlign: "left" }, children: Q("div", { className: "lf-node-text-auto-wrap", style: {
    minHeight: S,
    width: y,
    padding: f
  }, children: Q("div", { className: _ ? "lf-node-text-ellipsis-content" : "lf-node-text-auto-wrap-content", title: _ ? m.join("") : "", style: Tu({}, e), children: m.map(function(b) {
    return Q("div", { className: "lf-node-text--auto-wrap-inner", children: b });
  }) }) }) }) });
}
var Rv = function() {
  return Rv = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Rv.apply(this, arguments);
}, cH = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function js(e) {
  var t = {
    // default
    x1: 10,
    y1: 10,
    x2: 20,
    y2: 20,
    stroke: "black"
    // ...props
  };
  return st(Gi(e), function(n) {
    var r = cH(n, 2), i = r[0], o = r[1];
    (i === "style" || typeof o != "object") && (t[i] = o);
  }), Q("line", Rv({}, t));
}
var Lv = function() {
  return Lv = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Lv.apply(this, arguments);
}, dH = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function Vr(e) {
  var t = e.x, n = e.y, r = e.width, i = e.height, o = e.className, a = e.strokeWidth, s = e.radius, l = s === void 0 ? 0 : s, u = t - r / 2, c = n - i / 2, d = {};
  return d["stroke-width"] = a, st(Gi(e), function(f) {
    var h = dH(f, 2), p = h[0], v = h[1];
    typeof v != "object" && (d[p] = v);
  }), o ? d.className = "lf-basic-shape ".concat(o) : d.className = "lf-basic-shape", l && (d.rx = l, d.ry = l), d.x = u, d.y = c, Q("rect", Lv({}, d));
}
var $v = function() {
  return $v = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, $v.apply(this, arguments);
}, fH = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function Pu(e) {
  var t = {
    d: ""
  };
  return st(Gi(e), function(n) {
    var r = fH(n, 2), i = r[0], o = r[1];
    (i === "style" || typeof o != "object") && (t[i] = o);
  }), Q("path", $v({}, t));
}
var kv = function() {
  return kv = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, kv.apply(this, arguments);
}, hH = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function zs(e) {
  var t = e.x, n = t === void 0 ? 0 : t, r = e.y, i = r === void 0 ? 0 : r, o = e.r, a = o === void 0 ? 4 : o, s = e.className, l = {
    cx: n,
    cy: i,
    r: a,
    fill: "transparent",
    fillOpacity: 1,
    strokeWidth: 1,
    stroke: "#000",
    strokeOpacity: 1
  };
  return st(Gi(e), function(u) {
    var c = hH(u, 2), d = c[0], f = c[1];
    typeof f != "object" && (l[d] = f);
  }), s ? l.className = "lf-basic-shape ".concat(s) : l.className = "lf-basic-shape", Q("circle", kv({}, l));
}
var Iv = function() {
  return Iv = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Iv.apply(this, arguments);
}, pH = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function vH(e) {
  var t = e.x, n = t === void 0 ? 0 : t, r = e.y, i = r === void 0 ? 0 : r, o = e.rx, a = o === void 0 ? 4 : o, s = e.ry, l = s === void 0 ? 4 : s, u = e.className, c = {
    cx: n,
    cy: i,
    rx: a,
    ry: l,
    fill: "transparent",
    fillOpacity: 1,
    strokeWidth: 1,
    stroke: "#000",
    strokeOpacity: 1
  };
  return st(Gi(e), function(d) {
    var f = pH(d, 2), h = f[0], p = f[1];
    typeof p != "object" && (c[h] = p);
  }), u ? c.className = "lf-basic-shape ".concat(u) : c.className = "lf-basic-shape", Q("ellipse", Iv({}, c));
}
var Bv = function() {
  return Bv = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Bv.apply(this, arguments);
}, gH = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function em(e) {
  var t = e.points, n = t === void 0 ? [] : t, r = e.className, i = {
    fill: "transparent",
    fillOpacity: 1,
    strokeWidth: 1,
    stroke: "#000",
    strokeOpacity: 1,
    points: ""
  };
  return st(Gi(e), function(o) {
    var a = gH(o, 2), s = a[0], l = a[1];
    typeof l != "object" && (i[s] = l);
  }), r ? i.classNmae = "lf-basic-shape ".concat(r) : i.className = "lf-basic-shape", i.points = n.map(function(o) {
    return o.join(",");
  }).join(" "), Q("polygon", Bv({}, i));
}
var jv = function() {
  return jv = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, jv.apply(this, arguments);
}, yH = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
};
function mH(e) {
  var t = e.className, n = {
    points: "",
    fill: "none"
  };
  return st(Gi(e), function(r) {
    var i = yH(r, 2), o = i[0], a = i[1];
    (o === "style" || typeof a != "object") && (n[o] = a);
  }), t && (n.className = "".concat(t)), Q("polyline", jv({}, n));
}
var _2 = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Du = function() {
  return Du = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Du.apply(this, arguments);
}, _H = function(e, t) {
  var n = {};
  for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
  if (e != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, r = Object.getOwnPropertySymbols(e); i < r.length; i++)
      t.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[i]) && (n[r[i]] = e[r[i]]);
  return n;
}, bH = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Vt;
(function(e) {
  e[e.LEFT_TOP = 0] = "LEFT_TOP", e[e.RIGHT_TOP = 1] = "RIGHT_TOP", e[e.RIGHT_BOTTOM = 2] = "RIGHT_BOTTOM", e[e.LEFT_BOTTOM = 3] = "LEFT_BOTTOM";
})(Vt || (Vt = {}));
var wH = (
  /** @class */
  function(e) {
    _2(t, e);
    function t(n) {
      var r = e.call(this) || this;
      r.updateEdgePointByAnchors = function() {
        var s = r.nodeModel, l = s.id, u = s.anchors, c = r.graphModel.getNodeEdges(l);
        st(c, function(d) {
          if (d.sourceNodeId === l) {
            var f = Fo(u, function(h) {
              return h.id === d.sourceAnchorId;
            });
            f && d.updateStartPoint({
              x: f.x,
              y: f.y
            });
          } else if (d.targetNodeId === l) {
            var f = Fo(u, function(p) {
              return p.id === d.targetAnchorId;
            });
            f && d.updateEndPoint({
              x: f.x,
              y: f.y
            });
          }
        });
      }, r.triggerResizeEvent = function(s, l, u, c, d, f) {
        r.graphModel.eventCenter.emit(Fe.NODE_RESIZE, {
          preData: s,
          data: l,
          deltaX: u,
          deltaY: c,
          index: d,
          model: f
        });
      }, r.recalcResizeInfo = function(s, l, u, c, d) {
        u === void 0 && (u = 1), c === void 0 && (c = !1), d === void 0 && (d = !1);
        var f = it(l), h = f.deltaX, p = f.deltaY, v = f.width, g = f.height, y = f.PCTResizeInfo;
        if (y) {
          var m = 4, E = 0, w = 0;
          switch (s) {
            case Vt.LEFT_TOP:
              w = (h * -1 - p) / m;
              break;
            case Vt.RIGHT_TOP:
              w = (h - p) / m;
              break;
            case Vt.RIGHT_BOTTOM:
              w = (h + p) / m;
              break;
            case Vt.LEFT_BOTTOM:
              w = (h * -1 + p) / m;
              break;
          }
          w !== 0 && (E = Math.round(w / y.ResizeBasis.basisHeight * 1e5) / 1e3), y.ResizePCT.widthPCT = Math.max(Math.min(y.ResizePCT.widthPCT + E, y.ScaleLimit.maxScaleLimit), y.ScaleLimit.minScaleLimit), y.ResizePCT.heightPCT = Math.max(Math.min(y.ResizePCT.heightPCT + E, y.ScaleLimit.maxScaleLimit), y.ScaleLimit.minScaleLimit);
          var S = Math.round(y.ResizePCT.widthPCT * y.ResizeBasis.basisWidth / 100), _ = Math.round(y.ResizePCT.heightPCT * y.ResizeBasis.basisHeight / 100);
          switch (s) {
            case Vt.LEFT_TOP:
              h = v - S, p = g - _;
              break;
            case Vt.RIGHT_TOP:
              h = S - v, p = g - _;
              break;
            case Vt.RIGHT_BOTTOM:
              h = S - v, p = _ - g;
              break;
            case Vt.LEFT_BOTTOM:
              h = v - S, p = _ - g;
              break;
          }
          return f;
        }
        switch (s) {
          case Vt.LEFT_TOP:
            f.width = c ? v : v - h * u, f.height = d ? g : g - p * u;
            break;
          case Vt.RIGHT_TOP:
            f.width = c ? v : v + h * u, f.height = d ? g : g - p * u;
            break;
          case Vt.RIGHT_BOTTOM:
            f.width = c ? v : v + h * u, f.height = d ? g : g + p * u;
            break;
          case Vt.LEFT_BOTTOM:
            f.width = c ? v : v - h * u, f.height = d ? g : g + p * u;
            break;
        }
        return f;
      }, r.resizeNode = function(s) {
        var l = s.deltaX, u = s.deltaY, c = r.index, d = r.props, f = d.model, h = d.graphModel, p = d.x, v = d.y;
        b2({
          x: p,
          y: v,
          deltaX: l,
          deltaY: u,
          index: c,
          nodeModel: f,
          graphModel: h,
          cancelCallback: function() {
            r.dragHandler.cancelDrag();
          }
        });
      }, r.onDragging = function(s) {
        var l = s.deltaX, u = s.deltaY, c = r.graphModel.transformModel, d = bH(c.fixDeltaXY(l, u), 2), f = d[0], h = d[1];
        r.resizeNode({
          deltaX: f,
          deltaY: h
        });
      }, r.onDragEnd = function() {
        var s = r.nodeModel.x, l = r.nodeModel.y;
        r.nodeModel.moveTo(s, l), r.updateEdgePointByAnchors();
      };
      var i = n.index, o = n.model, a = n.graphModel;
      return r.index = i, r.nodeModel = o, r.graphModel = a, r.dragHandler = new ni({
        onDragging: r.onDragging,
        onDragEnd: r.onDragEnd,
        step: a.gridSize
      }), r;
    }
    return t.prototype.componentWillUnmount = function() {
      this.dragHandler.destroy();
    }, t.prototype.render = function() {
      var n = this.props, r = n.x, i = n.y, o = n.direction, a = n.model, s = a.getResizeControlStyle(), l = s.width, u = s.height, c = _H(s, ["width", "height"]);
      return Q("g", { className: "lf-resize-control lf-resize-control-".concat(o), children: [Q(Vr, Du({ className: "lf-resize-control-content", x: r, y: i, width: l ?? 7, height: u ?? 7 }, c)), Q(Vr, { className: "lf-resize-control-content", x: r, y: i, width: 25, height: 25, fill: "transparent", stroke: "transparent", onMouseDown: this.dragHandler.handleMouseDown })] });
    }, t;
  }(Et)
), xH = (
  /** @class */
  function(e) {
    _2(t, e);
    function t() {
      return e.call(this) || this;
    }
    return t.prototype.getResizeControl = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = sr(r), a = o.minX, s = o.minY, l = o.maxX, u = o.maxY, c = [
        {
          index: Vt.LEFT_TOP,
          direction: "nw",
          x: a,
          y: s
        },
        // 左上角
        {
          index: Vt.RIGHT_TOP,
          direction: "ne",
          x: l,
          y: s
        },
        // 右上角
        {
          index: Vt.RIGHT_BOTTOM,
          direction: "se",
          x: l,
          y: u
        },
        // 右下角
        {
          index: Vt.LEFT_BOTTOM,
          direction: "sw",
          x: a,
          y: u
        }
        // 左下角
      ];
      return Kn(c, function(d) {
        return Q(wH, Du({}, d, { model: r, graphModel: i }));
      });
    }, t.prototype.getResizeOutline = function() {
      var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.getResizeOutlineStyle();
      return Q(Vr, Du({}, s, { x: r, y: i, width: o, height: a }));
    }, t.prototype.render = function() {
      return Q("g", { className: "lf-resize-control-group", children: [this.getResizeOutline(), this.getResizeControl()] });
    }, t;
  }(Et)
);
function EH(e, t) {
  var n = e.x, r = e.y, i = t.x, o = t.y, a = {
    x: n + (i - n) / 2,
    y: r + (o - r) / 2
  };
  return a;
}
function Hl(e, t, n) {
  var r = SH(n), i = e.x - t.x, o = e.y - t.y, a = i * Math.cos(r) - o * Math.sin(r) + t.x, s = i * Math.sin(r) + o * Math.cos(r) + t.y;
  return {
    x: a,
    y: s
  };
}
function SH(e) {
  return e * Math.PI / 180;
}
function CH(e) {
  return e / Math.PI * 180;
}
function OH(e, t, n, r, i, o, a, s, l) {
  s === void 0 && (s = !1), l === void 0 && (l = !1);
  var u = t.deltaX, c = t.deltaY, d = t.width, f = t.height, h = CH(n), p = {
    x: r,
    // control锚点的坐标x
    y: i
    // control锚点的坐标y
  }, v = { x: o, y: a }, g = Hl(p, v, h), y = {
    x: g.x + u,
    y: g.y + c
  }, m = TH(g, y, v, h, s, l, d, f), E = m.width, w = m.height, S = m.center;
  return t.width = E * e, t.height = w * e, t.deltaX = (S.x - v.x) * 2, t.deltaY = (S.y - v.y) * 2, t;
}
var AH = function(e, t, n, r, i, o, a, s, l, u) {
  n === void 0 && (n = 1), r === void 0 && (r = !1), i === void 0 && (i = !1), o === void 0 && (o = 0);
  var c = it(t), d = c.deltaX, f = c.deltaY, h = c.width, p = c.height, v = c.PCTResizeInfo;
  if (v) {
    var g = 4, y = 0, m = 0;
    switch (e) {
      case Vt.LEFT_TOP:
        m = (d * -1 - f) / g;
        break;
      case Vt.RIGHT_TOP:
        m = (d - f) / g;
        break;
      case Vt.RIGHT_BOTTOM:
        m = (d + f) / g;
        break;
      case Vt.LEFT_BOTTOM:
        m = (d * -1 + f) / g;
        break;
    }
    m !== 0 && (y = Math.round(m / v.ResizeBasis.basisHeight * 1e5) / 1e3), v.ResizePCT.widthPCT = Math.max(Math.min(v.ResizePCT.widthPCT + y, v.ScaleLimit.maxScaleLimit), v.ScaleLimit.minScaleLimit), v.ResizePCT.heightPCT = Math.max(Math.min(v.ResizePCT.heightPCT + y, v.ScaleLimit.maxScaleLimit), v.ScaleLimit.minScaleLimit);
    var E = Math.round(v.ResizePCT.widthPCT * v.ResizeBasis.basisWidth / 100), w = Math.round(v.ResizePCT.heightPCT * v.ResizeBasis.basisHeight / 100);
    switch (e) {
      case Vt.LEFT_TOP:
        d = h - E, f = p - w;
        break;
      case Vt.RIGHT_TOP:
        d = E - h, f = p - w;
        break;
      case Vt.RIGHT_BOTTOM:
        d = E - h, f = w - p;
        break;
      case Vt.LEFT_BOTTOM:
        d = h - E, f = w - p;
        break;
    }
    return c;
  }
  if (o % (2 * Math.PI) !== 0 && a !== void 0 && s !== void 0)
    return OH(n, c, o, a, s, l, u, r, i);
  switch (e) {
    case Vt.LEFT_TOP:
      c.width = r ? h : h - d * n, c.height = i ? p : p - f * n;
      break;
    case Vt.RIGHT_TOP:
      c.width = r ? h : h + d * n, c.height = i ? p : p - f * n;
      break;
    case Vt.RIGHT_BOTTOM:
      c.width = r ? h : h + d * n, c.height = i ? p : p + f * n;
      break;
    case Vt.LEFT_BOTTOM:
      c.width = r ? h : h - d * n, c.height = i ? p : p + f * n;
      break;
  }
  return c;
}, NH = function(e, t) {
  var n = e.id, r = e.anchors, i = t.getNodeEdges(n);
  st(i, function(o) {
    if (o.sourceNodeId === n) {
      var a = Fo(r, function(s) {
        return s.id === o.sourceAnchorId;
      });
      a && o.updateStartPoint({
        x: a.x,
        y: a.y
      });
    } else if (o.targetNodeId === n) {
      var a = Fo(r, function(l) {
        return l.id === o.targetAnchorId;
      });
      a && o.updateEndPoint({
        x: a.x,
        y: a.y
      });
    }
  });
}, MH = function(e, t, n, r, i, o, a) {
  a.eventCenter.emit(Fe.NODE_RESIZE, {
    preData: e,
    data: t,
    deltaX: n,
    deltaY: r,
    index: i,
    model: o
  });
}, b2 = function(e) {
  var t = e.x, n = e.y, r = e.deltaX, i = e.deltaY, o = e.index, a = e.nodeModel, s = e.graphModel, l = e.cancelCallback, u = a.r, c = a.rx, d = a.ry, f = a.width, h = a.height, p = a.PCTResizeInfo, v = a.minWidth, g = a.minHeight, y = a.maxWidth, m = a.maxHeight, E = a.rotate, w = a.x, S = a.y, _ = v === y, b = g === m, T = {
    width: u || c || f,
    height: u || d || h,
    deltaX: r,
    deltaY: i,
    PCTResizeInfo: p
  }, R = u || c && d ? 1 / 2 : 1, B = t, K = n, ae = AH(o, T, R, _, b, E, B, K, w, S);
  if (ae.width < v || ae.width > y || ae.height < g || ae.height > m) {
    l == null || l();
    return;
  }
  (E % (2 * Math.PI) == 0 || p || B === void 0 || K === void 0) && (ae.deltaX = _ ? 0 : ae.deltaX, ae.deltaY = b ? 0 : ae.deltaY);
  var x = a.getData(), P = a.resize(ae);
  x.x === P.x && x.y === P.y || (NH(a, s), MH(x, P, r, i, o, a, s));
};
function TH(e, t, n, r, i, o, a, s) {
  i === void 0 && (i = !1), o === void 0 && (o = !1);
  var l = {
    x: n.x - (e.x - n.x),
    y: n.y - (e.y - n.y)
  }, u = EH(l, t), c = Hl(t, u, -r), d = Hl(l, u, -r);
  if (i) {
    var f = Math.abs(c.x - d.x), h = f - a;
    u.x > c.x ? u.x = u.x + h / 2 : u.x = u.x - h / 2;
  }
  if (o) {
    var p = Math.abs(c.y - d.y), v = p - s;
    u.y > c.y ? u.y = u.y + v / 2 : u.y = u.y - v / 2;
  }
  if (i || o) {
    var g = Hl(d, u, r), y = g.x - l.x, m = g.y - l.y;
    u.x = u.x - y, u.y = u.y - m, d = Hl(l, u, -r), c = {
      x: u.x - (d.x - u.x),
      y: u.y - (d.y - u.y)
    };
  }
  var E = Math.abs(c.x - d.x), w = Math.abs(c.y - d.y);
  return i && (E = a), o && (w = s), {
    width: E,
    height: w,
    center: u
  };
}
var PH = 100, DH = {
  x: 1,
  y: 0,
  z: 0
};
function RH(e, t, n, r, i) {
  for (var o = function(h) {
    if (h < 0 || h > 1)
      throw new RangeError('The value range of parameter "t" is [0,1]');
    return {
      x: e.x * Math.pow(1 - h, 3) + 3 * t.x * h * Math.pow(1 - h, 2) + 3 * n.x * Math.pow(h, 2) * (1 - h) + r.x * Math.pow(h, 3),
      y: e.y * Math.pow(1 - h, 3) + 3 * t.y * h * Math.pow(1 - h, 2) + 3 * n.y * Math.pow(h, 2) * (1 - h) + r.y * Math.pow(h, 3)
    };
  }, a = 0, s = 2, l = r.x, u = r.y, c = r; a < i && s < 50; ) {
    c = o(1 - s / PH);
    var d = c.x, f = c.y;
    a = hi(l, u, d, f), s++;
  }
  return c;
}
function LH(e, t) {
  return e.x * t.y - e.y * t.x;
}
function $H(e, t) {
  var n = [e.x, e.y, e.z], r = [t.x, t.y, t.z];
  return r.reduce(function(i, o, a) {
    return i + o * n[a];
  });
}
function kH(e, t) {
  var n = LH(e, t), r = Math.acos($H(Wb(e), Wb(t)));
  return n >= 0 ? r : -r;
}
function Wb(e) {
  var t = Math.hypot(e.x, e.y);
  return {
    x: e.x / t,
    y: e.y / t,
    z: 0
  };
}
function IH(e) {
  return kH(DH, e);
}
function BH(e) {
  return e * (180 / Math.PI);
}
var jH = {
  baseNode: {
    fill: "#fff",
    stroke: "#000",
    strokeWidth: 2
  },
  baseEdge: {
    stroke: "#000",
    strokeWidth: 2
  },
  rect: {},
  circle: {},
  diamond: {},
  ellipse: {},
  polygon: {},
  text: {
    color: "#000",
    stroke: "none",
    fontSize: 12,
    background: {
      fill: "transparent"
    }
  },
  anchor: {
    stroke: "#000",
    fill: "#fff",
    r: 4,
    hover: {
      r: 10,
      fill: "#949494",
      fillOpacity: 0.5,
      stroke: "#949494"
    }
  },
  anchorLine: {
    stroke: "#000",
    strokeWidth: 2,
    strokeDasharray: "3,2"
  },
  nodeText: {
    color: "#000",
    overflowMode: "default",
    fontSize: 12,
    lineHeight: 1.2
  },
  edgeText: {
    textWidth: 100,
    overflowMode: "default",
    fontSize: 12,
    background: {
      fill: "#fff"
    }
  },
  line: {},
  polyline: {},
  bezier: {
    fill: "none",
    adjustLine: {
      stroke: "#949494"
    },
    adjustAnchor: {
      r: 4,
      fill: "#949494",
      fillOpacity: 1,
      stroke: "#949494"
    }
  },
  arrow: {
    offset: 10,
    verticalLength: 5
    // 箭头垂直于边的距离
  },
  snapline: {
    stroke: "#949494",
    strokeWidth: 1
  },
  edgeAdjust: {
    r: 4,
    fill: "#fff",
    stroke: "#949494",
    strokeWidth: 2
  },
  outline: {
    fill: "transparent",
    stroke: "#949494",
    strokeDasharray: "3,3",
    hover: {
      stroke: "#949494"
    }
  },
  edgeAnimation: {
    stroke: "red",
    strokeDasharray: "10,10",
    strokeDashoffset: "100%",
    animationName: "lf_animate_dash",
    animationDuration: "20s",
    animationIterationCount: "infinite",
    animationTimingFunction: "linear",
    animationDirection: "normal"
  },
  rotateControl: {
    stroke: "#000",
    fill: "#fff",
    strokeWidth: 1.5
  },
  resizeControl: {
    width: 7,
    height: 7,
    fill: "#fff",
    stroke: "#000"
  },
  resizeOutline: {
    fill: "none",
    stroke: "transparent",
    // 矩形默认不显示调整边框
    strokeWidth: 1,
    strokeDasharray: "3,3"
  }
}, w2 = function(e) {
  var t = it(jH);
  return e && (t = ks(t, e)), t;
}, zH = w2, FH = 1e3, HH = 999, tm = function() {
  return ++FH;
}, VH = function() {
  return --HH;
}, pn = function() {
  return pn = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, pn.apply(this, arguments);
}, Ke = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, sh = (
  /** @class */
  function() {
    function e(t, n) {
      var r;
      this.BaseType = un.EDGE, this.id = "", this.type = "", this.sourceNodeId = "", this.targetNodeId = "", this.textMode = Yr.TEXT, this.text = {
        value: "",
        x: 0,
        y: 0,
        draggable: !1,
        editable: !0
      }, this.points = "", this.pointsList = [], this.virtual = !1, this.isSelected = !1, this.isHovered = !1, this.isHitable = !0, this.isHittable = !0, this.draggable = !0, this.visible = !0, this.isAnimation = !1, this.isShowAdjustPoint = !1, this.zIndex = 0, this.state = Pt.DEFAULT, this.modelType = gt.EDGE, this.customTextPosition = !1, this.style = {}, this.arrowConfig = {
        markerEnd: "url(#marker-end-".concat(this.id, ")"),
        markerStart: "url(#marker-start-".concat(this.id, ")")
      }, this.graphModel = n, this.properties = (r = t.properties) !== null && r !== void 0 ? r : {}, this.initEdgeData(t), this.setAttributes();
    }
    return e.prototype.initEdgeData = function(t) {
      if (t.properties || (t.properties = {}), !t.id) {
        var n = this.graphModel.idGenerator, r = n && n(t.type), i = this.createId();
        t.id = i || r || $o();
      }
      this.arrowConfig.markerEnd = "url(#marker-end-".concat(t.id, ")"), this.arrowConfig.markerStart = "url(#marker-start-".concat(t.id, ")");
      var o = this.graphModel.editConfigModel.adjustEdgeStartAndEnd;
      this.isShowAdjustPoint = o, It(this, XF(t));
      var a = this.graphModel.overlapMode;
      a === fi.INCREASE && (this.zIndex = t.zIndex || tm()), this.setAnchors(), this.initPoints(), this.formatText(t);
    }, e.prototype.setAttributes = function() {
    }, e.prototype.createId = function() {
      return null;
    }, e.prototype.getEdgeStyle = function() {
      return pn(pn({}, this.graphModel.theme.baseEdge), this.style);
    }, e.prototype.getAdjustPointStyle = function() {
      return pn({}, this.graphModel.theme.edgeAdjust);
    }, e.prototype.getTextStyle = function() {
      var t = this.graphModel.theme.edgeText;
      return it(t);
    }, e.prototype.getEdgeAnimationStyle = function() {
      var t = this.graphModel.theme.edgeAnimation;
      return it(t);
    }, e.prototype.getArrowStyle = function() {
      var t = this.getEdgeStyle(), n = this.getEdgeAnimationStyle(), r = this.graphModel.theme.arrow, i = this.isAnimation ? n.stroke : t.stroke;
      return pn(pn(pn({}, t), { fill: i, stroke: i }), r);
    }, e.prototype.getOutlineStyle = function() {
      var t = this.graphModel, n = t.theme.outline;
      return it(n);
    }, e.prototype.getTextPosition = function() {
      return {
        x: 0,
        y: 0
      };
    }, Object.defineProperty(e.prototype, "sourceNode", {
      /**
       * 边的前一个节点
       */
      get: function() {
        var t, n;
        return (n = (t = this.graphModel) === null || t === void 0 ? void 0 : t.nodesMap[this.sourceNodeId]) === null || n === void 0 ? void 0 : n.model;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "targetNode", {
      /**
       * 边的后一个节点
       */
      get: function() {
        var t, n;
        return (n = (t = this.graphModel) === null || t === void 0 ? void 0 : t.nodesMap[this.targetNodeId]) === null || n === void 0 ? void 0 : n.model;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "textPosition", {
      get: function() {
        return this.getTextPosition();
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.getBeginAnchor = function(t, n, r) {
      var i, o, a = Pv(t);
      if (r) {
        if (i = Fo(a, function(s) {
          return s.id === r;
        }), i)
          return i;
        console.warn("未在节点上找到指定的起点锚点".concat(r, "，已使用默认锚点作为起点"));
      }
      return a.forEach(function(s) {
        var l = kb(s, n);
        (o === void 0 || l < o) && (o = l, i = s);
      }), i;
    }, e.prototype.getEndAnchor = function(t, n) {
      var r = this, i, o, a = Pv(t);
      if (n) {
        if (i = Fo(a, function(s) {
          return s.id === n;
        }), i)
          return i;
        console.warn("未在节点上找到指定的终点锚点".concat(n, "，已使用默认锚点作为终点"));
      }
      return a.forEach(function(s) {
        if (r.startPoint) {
          var l = kb(s, r.startPoint);
          (o === void 0 || l < o) && (o = l, i = s);
        }
      }), i;
    }, e.prototype.getProperties = function() {
      return li(this.properties);
    }, e.prototype.getData = function() {
      var t = this.properties;
      Io(t) && (t = li(t));
      var n = {
        id: this.id,
        type: this.type,
        properties: t,
        sourceNodeId: this.sourceNodeId,
        targetNodeId: this.targetNodeId,
        startPoint: It({}, this.startPoint),
        endPoint: It({}, this.endPoint)
      };
      this.graphModel.overlapMode === fi.INCREASE && (n.zIndex = this.zIndex);
      var r = this.text, i = r.x, o = r.y, a = r.value;
      return a && (n.text = {
        x: i,
        y: o,
        value: a
      }), n;
    }, e.prototype.getHistoryData = function() {
      return this.getData();
    }, e.prototype.setProperty = function(t, n) {
      Qg(this.properties, t, zn(n)), this.setAttributes();
    }, e.prototype.deleteProperty = function(t) {
      delete this.properties[t], this.setAttributes();
    }, e.prototype.setProperties = function(t) {
      this.properties = pn(pn({}, li(this.properties)), zn(t)), this.setAttributes();
    }, e.prototype.changeEdgeId = function(t) {
      var n = this.arrowConfig, r = n.markerEnd, i = n.markerStart;
      i && i === "url(#marker-start-".concat(this.id, ")") && (this.arrowConfig.markerStart = "url(#marker-start-".concat(t, ")")), r && r === "url(#marker-end-".concat(this.id, ")") && (this.arrowConfig.markerEnd = "url(#marker-end-".concat(t, ")")), this.id = t;
    }, e.prototype.setStyle = function(t, n) {
      var r;
      this.style = pn(pn({}, this.style), (r = {}, r[t] = zn(n), r));
    }, e.prototype.setStyles = function(t) {
      this.style = pn(pn({}, this.style), zn(t));
    }, e.prototype.updateStyles = function(t) {
      this.style = pn({}, zn(t));
    }, e.prototype.setTextMode = function(t) {
      this.textMode = t;
    }, e.prototype.formatText = function(t) {
      var n, r, i, o = this.textPosition, a = o.x, s = o.y, l = t.text, u = {
        value: "",
        x: a,
        y: s,
        draggable: !1,
        editable: !0
      };
      l && (typeof l == "string" ? u = pn(pn({}, u), { value: l }) : (u = pn(pn({}, u), { x: (n = l.x) !== null && n !== void 0 ? n : a, y: (r = l.y) !== null && r !== void 0 ? r : s, value: (i = l.value) !== null && i !== void 0 ? i : "" }), Da(l.draggable) || (u.draggable = l.draggable), Da(l.editable) || (u.editable = l.editable))), this.text = u;
    }, e.prototype.resetTextPosition = function() {
      var t = this.textPosition, n = t.x, r = t.y;
      this.text.x = n, this.text.y = r;
    }, e.prototype.moveText = function(t, n) {
      var r = this.text, i = r.x, o = r.y, a = r.value, s = r.draggable, l = r.editable;
      this.text = {
        value: a,
        editable: l,
        draggable: s,
        x: i + t,
        y: o + n
      };
    }, e.prototype.setText = function(t) {
      t && It(this.text, t);
    }, e.prototype.updateText = function(t) {
      this.text = pn(pn({}, li(this.text)), { value: t });
    }, e.prototype.setAnchors = function() {
      if (!this.sourceAnchorId || !this.startPoint) {
        var t = this.getBeginAnchor(this.sourceNode, this.targetNode, this.sourceAnchorId);
        if (!t)
          throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");
        this.startPoint || (this.startPoint = {
          x: t.x,
          y: t.y
        }), this.sourceAnchorId || (this.sourceAnchorId = t.id);
      }
      if (!this.targetAnchorId || !this.endPoint) {
        var t = this.getEndAnchor(this.targetNode, this.targetAnchorId);
        if (!t)
          throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");
        this.endPoint || (this.endPoint = {
          x: t.x,
          y: t.y
        }), this.targetAnchorId || (this.targetAnchorId = t.id);
      }
    }, e.prototype.setSelected = function(t) {
      t === void 0 && (t = !0), this.isSelected = t;
    }, e.prototype.setHovered = function(t) {
      t === void 0 && (t = !0), this.isHovered = t;
    }, e.prototype.setHitable = function(t) {
      t === void 0 && (t = !0), this.isHitable = t;
    }, e.prototype.setHittable = function(t) {
      t === void 0 && (t = !0), this.isHittable = t;
    }, e.prototype.openEdgeAnimation = function() {
      this.isAnimation = !0;
    }, e.prototype.closeEdgeAnimation = function() {
      this.isAnimation = !1;
    }, e.prototype.setElementState = function(t, n) {
      this.state = t, this.additionStateData = n;
    }, e.prototype.updateStartPoint = function(t) {
      this.startPoint = t;
    }, e.prototype.moveStartPoint = function(t, n) {
      this.startPoint && (this.startPoint.x += t, this.startPoint.y += n);
    }, e.prototype.updateEndPoint = function(t) {
      this.endPoint = t;
    }, e.prototype.moveEndPoint = function(t, n) {
      this.endPoint && (this.endPoint.x += t, this.endPoint.y += n);
    }, e.prototype.setZIndex = function(t) {
      t === void 0 && (t = 0), this.zIndex = t;
    }, e.prototype.initPoints = function() {
    }, e.prototype.updateAttributes = function(t) {
      It(this, t);
    }, e.prototype.getAdjustStart = function() {
      return this.startPoint;
    }, e.prototype.getAdjustEnd = function() {
      return this.endPoint;
    }, e.prototype.updateAfterAdjustStartAndEnd = function(t) {
      var n = t.startPoint, r = t.endPoint;
      this.updateStartPoint({ x: n.x, y: n.y }), this.updateEndPoint({ x: r.x, y: r.y });
    }, e.BaseType = un.EDGE, Ke([
      ie
    ], e.prototype, "type", void 0), Ke([
      ie
    ], e.prototype, "sourceNodeId", void 0), Ke([
      ie
    ], e.prototype, "targetNodeId", void 0), Ke([
      ie
    ], e.prototype, "startPoint", void 0), Ke([
      ie
    ], e.prototype, "endPoint", void 0), Ke([
      ie
    ], e.prototype, "textMode", void 0), Ke([
      ie
    ], e.prototype, "text", void 0), Ke([
      ie
    ], e.prototype, "properties", void 0), Ke([
      ie
    ], e.prototype, "points", void 0), Ke([
      ie
    ], e.prototype, "pointsList", void 0), Ke([
      ie
    ], e.prototype, "isSelected", void 0), Ke([
      ie
    ], e.prototype, "isHovered", void 0), Ke([
      ie
    ], e.prototype, "isHitable", void 0), Ke([
      ie
    ], e.prototype, "isHittable", void 0), Ke([
      ie
    ], e.prototype, "draggable", void 0), Ke([
      ie
    ], e.prototype, "visible", void 0), Ke([
      ie
    ], e.prototype, "isAnimation", void 0), Ke([
      ie
    ], e.prototype, "isShowAdjustPoint", void 0), Ke([
      ie
    ], e.prototype, "zIndex", void 0), Ke([
      ie
    ], e.prototype, "state", void 0), Ke([
      ie
    ], e.prototype, "style", void 0), Ke([
      ie
    ], e.prototype, "arrowConfig", void 0), Ke([
      Ut
    ], e.prototype, "sourceNode", null), Ke([
      Ut
    ], e.prototype, "targetNode", null), Ke([
      Ut
    ], e.prototype, "textPosition", null), Ke([
      te
    ], e.prototype, "setProperty", null), Ke([
      te
    ], e.prototype, "deleteProperty", null), Ke([
      te
    ], e.prototype, "setProperties", null), Ke([
      te
    ], e.prototype, "changeEdgeId", null), Ke([
      te
    ], e.prototype, "setStyle", null), Ke([
      te
    ], e.prototype, "setStyles", null), Ke([
      te
    ], e.prototype, "updateStyles", null), Ke([
      te
    ], e.prototype, "setTextMode", null), Ke([
      te
    ], e.prototype, "formatText", null), Ke([
      te
    ], e.prototype, "resetTextPosition", null), Ke([
      te
    ], e.prototype, "moveText", null), Ke([
      te
    ], e.prototype, "setText", null), Ke([
      te
    ], e.prototype, "updateText", null), Ke([
      te
    ], e.prototype, "setAnchors", null), Ke([
      te
    ], e.prototype, "setSelected", null), Ke([
      te
    ], e.prototype, "setHovered", null), Ke([
      te
    ], e.prototype, "setHitable", null), Ke([
      te
    ], e.prototype, "setHittable", null), Ke([
      te
    ], e.prototype, "openEdgeAnimation", null), Ke([
      te
    ], e.prototype, "closeEdgeAnimation", null), Ke([
      te
    ], e.prototype, "setElementState", null), Ke([
      te
    ], e.prototype, "updateStartPoint", null), Ke([
      te
    ], e.prototype, "moveStartPoint", null), Ke([
      te
    ], e.prototype, "updateEndPoint", null), Ke([
      te
    ], e.prototype, "moveEndPoint", null), Ke([
      te
    ], e.prototype, "setZIndex", null), Ke([
      te
    ], e.prototype, "initPoints", null), Ke([
      te
    ], e.prototype, "updateAttributes", null), Ke([
      te
    ], e.prototype, "getAdjustStart", null), Ke([
      te
    ], e.prototype, "getAdjustEnd", null), Ke([
      te
    ], e.prototype, "updateAfterAdjustStartAndEnd", null), e;
  }()
), WH = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), fa = function() {
  return fa = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, fa.apply(this, arguments);
}, ii = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, Sp = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, zv = (
  /** @class */
  function(e) {
    WH(t, e);
    function t(n, r) {
      var i = e.call(this, n, r) || this;
      return i.modelType = gt.BEZIER_EDGE, i.path = "", i.initEdgeData(n), i.setAttributes(), i;
    }
    return t.prototype.initEdgeData = function(n) {
      this.offset = 100, e.prototype.initEdgeData.call(this, n);
    }, t.prototype.getEdgeStyle = function() {
      var n = this.graphModel.theme.bezier, r = e.prototype.getEdgeStyle.call(this), i = this.properties.style, o = i === void 0 ? {} : i;
      return fa(fa(fa({}, r), it(n)), it(o));
    }, t.prototype.getTextPosition = function() {
      if (this.pointsList && this.pointsList.length > 0) {
        var n = 0, r = 0;
        return this.pointsList.forEach(function(i) {
          var o = i.x, a = i.y;
          n += o, r += a;
        }), {
          x: n / this.pointsList.length,
          y: r / this.pointsList.length
        };
      }
      return {
        x: (this.startPoint.x + this.endPoint.x) / 2,
        y: (this.startPoint.y + this.endPoint.y) / 2
      };
    }, t.prototype.getData = function() {
      var n = e.prototype.getData.call(this), r = this.pointsList.map(function(i) {
        var o = i.x, a = i.y;
        return { x: o, y: a };
      });
      return fa(fa({}, n), { pointsList: r });
    }, t.prototype.getControls = function() {
      var n = this.startPoint, r = this.endPoint, i = Lb({
        start: n,
        end: r,
        sourceNode: this.sourceNode,
        targetNode: this.targetNode,
        offset: this.offset
      });
      return i;
    }, t.prototype.getPath = function(n) {
      var r = Sp(n, 4), i = r[0], o = r[1], a = r[2], s = r[3];
      return "M ".concat(i.x, " ").concat(i.y, `
    C `).concat(o.x, " ").concat(o.y, `,
    `).concat(a.x, " ").concat(a.y, `,
    `).concat(s.x, " ").concat(s.y);
    }, t.prototype.initPoints = function() {
      this.pointsList.length > 0 ? this.path = this.getPath(this.pointsList) : this.updatePoints();
    }, t.prototype.updatePoints = function() {
      var n = this.getControls(), r = n.sNext, i = n.ePre;
      this.updatePath(r, i);
    }, t.prototype.updatePath = function(n, r) {
      n = it(n), r = it(r);
      var i = {
        x: this.startPoint.x,
        y: this.startPoint.y
      }, o = {
        x: this.endPoint.x,
        y: this.endPoint.y
      };
      if (!n || !r) {
        var a = this.getControls();
        n = a.sNext, r = a.ePre;
      }
      this.pointsList = [i, n, r, o], this.path = this.getPath(this.pointsList);
    }, t.prototype.updateStartPoint = function(n) {
      this.startPoint = Object.assign({}, n), this.updatePoints();
    }, t.prototype.updateEndPoint = function(n) {
      this.endPoint = Object.assign({}, n), this.updatePoints();
    }, t.prototype.moveStartPoint = function(n, r) {
      this.startPoint.x += n, this.startPoint.y += r;
      var i = Sp(this.pointsList, 3), o = i[1], a = i[2];
      o.x += n, o.y += r, this.updatePath(o, a);
    }, t.prototype.moveEndPoint = function(n, r) {
      this.endPoint.x += n, this.endPoint.y += r;
      var i = Sp(this.pointsList, 3), o = i[1], a = i[2];
      a.x += n, a.y += r, this.updatePath(o, a);
    }, t.prototype.updateAdjustAnchor = function(n, r) {
      var i;
      r === "sNext" ? this.pointsList[1] = n : r === "ePre" && (this.pointsList[2] = n), this.path = this.getPath(this.pointsList), !((i = this.text) === null || i === void 0) && i.value && this.setText(It({}, this.text, this.textPosition));
    }, t.prototype.getAdjustStart = function() {
      return this.pointsList[0] || this.startPoint;
    }, t.prototype.getAdjustEnd = function() {
      var n = this.pointsList;
      return n[n.length - 1] || this.endPoint;
    }, t.prototype.updateAfterAdjustStartAndEnd = function(n) {
      var r = n.startPoint, i = n.endPoint, o = n.sourceNode, a = n.targetNode, s = Lb({
        start: r,
        end: i,
        sourceNode: o,
        targetNode: a,
        offset: this.offset
      }), l = s.sNext, u = s.ePre;
      this.pointsList = [r, l, u, i], this.initPoints();
    }, ii([
      ie
    ], t.prototype, "path", void 0), ii([
      te
    ], t.prototype, "initPoints", null), ii([
      te
    ], t.prototype, "updatePoints", null), ii([
      te
    ], t.prototype, "updateStartPoint", null), ii([
      te
    ], t.prototype, "updateEndPoint", null), ii([
      te
    ], t.prototype, "moveStartPoint", null), ii([
      te
    ], t.prototype, "moveEndPoint", null), ii([
      te
    ], t.prototype, "updateAdjustAnchor", null), ii([
      te
    ], t.prototype, "getAdjustStart", null), ii([
      te
    ], t.prototype, "getAdjustEnd", null), ii([
      te
    ], t.prototype, "updateAfterAdjustStartAndEnd", null), t;
  }(sh)
), GH = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Zl = function() {
  return Zl = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Zl.apply(this, arguments);
}, Gb = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, XH = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
}, Fv = (
  /** @class */
  function(e) {
    GH(t, e);
    function t() {
      var n = e.apply(this, XH([], Gb(arguments), !1)) || this;
      return n.modelType = gt.LINE_EDGE, n;
    }
    return t.prototype.getEdgeStyle = function() {
      var n = this.graphModel.theme.line, r = e.prototype.getEdgeStyle.call(this), i = this.properties.style, o = i === void 0 ? {} : i;
      return Zl(Zl(Zl({}, r), it(n)), it(o));
    }, t.prototype.initEdgeData = function(n) {
      e.prototype.initEdgeData.call(this, n), this.points = this.getPath([this.startPoint, this.endPoint]);
    }, t.prototype.getPath = function(n) {
      var r = Gb(n, 2), i = r[0], o = r[1];
      return "".concat(i.x, ",").concat(i.y, " ").concat(o.x, ",").concat(o.y);
    }, t.prototype.getTextPosition = function() {
      return {
        x: (this.startPoint.x + this.endPoint.x) / 2,
        y: (this.startPoint.y + this.endPoint.y) / 2
      };
    }, t;
  }(sh)
), UH = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Jl = function() {
  return Jl = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Jl.apply(this, arguments);
}, In = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, Xb = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, YH = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
}, Fs = (
  /** @class */
  function(e) {
    UH(t, e);
    function t() {
      var n = e.apply(this, YH([], Xb(arguments), !1)) || this;
      return n.modelType = gt.POLYLINE_EDGE, n.draggingPointList = [], n;
    }
    return t.prototype.initEdgeData = function(n) {
      this.offset = 30, e.prototype.initEdgeData.call(this, n);
    }, t.prototype.getEdgeStyle = function() {
      var n = this.graphModel.theme.polyline, r = e.prototype.getEdgeStyle.call(this), i = this.properties.style, o = i === void 0 ? {} : i;
      return Jl(Jl(Jl({}, r), it(n)), it(o));
    }, t.prototype.getTextPosition = function() {
      var n, r = (n = this.text) === null || n === void 0 ? void 0 : n.value;
      if (this.dbClickPosition && !r) {
        var i = this.dbClickPosition, o = i.x, a = i.y;
        return { x: o, y: a };
      }
      var s = Ra(this.points), l = Xb(VF(s), 2), u = l[0], c = l[1];
      return {
        x: (u.x + c.x) / 2,
        y: (u.y + c.y) / 2
      };
    }, t.prototype.getAfterAnchor = function(n, r, i) {
      var o, a;
      return i.forEach(function(s) {
        var l;
        n === qt.HORIZONTAL ? l = Math.abs(r.y - s.y) : n === qt.VERTICAL && (l = Math.abs(r.x - s.x)), (!a || a > l) && (a = l, o = s);
      }), o;
    }, t.prototype.getCrossPoint = function(n, r, i) {
      var o;
      return n === qt.HORIZONTAL ? o = {
        x: i.x,
        y: r.y
      } : n === qt.VERTICAL && (o = {
        x: r.x,
        y: i.y
      }), o;
    }, t.prototype.removeCrossPoints = function(n, r, i) {
      var o = i.map(function(y) {
        return y;
      });
      if (n === 1) {
        var a = o[n], s = o[r], l = o[n - 1], u = Tb(l, a, this.sourceNode);
        if (u) {
          var c = Pb(a, s, this.sourceNode);
          if (c) {
            var d = Db(a, s, this.sourceNode);
            d && (o[n] = d, o.splice(n - 1, 1), n--, r--);
          }
        } else {
          var f = this.sourceNode.anchors;
          f.forEach(function(y) {
            if (y.x === l.x && y.x === a.x || y.y === l.y && y.y === a.y) {
              var m = hi(y.x, y.y, a.x, a.y), E = hi(l.x, l.y, a.x, a.y);
              m < E && (o[n - 1] = y);
            }
          });
        }
      }
      if (r === i.length - 2) {
        var h = o[n], p = o[r], v = o[r + 1], g = Tb(p, v, this.targetNode);
        if (g) {
          var c = Pb(h, p, this.targetNode);
          if (c) {
            var d = Db(h, p, this.targetNode);
            d && (o[r] = d, o.splice(r + 1, 1));
          }
        } else {
          var f = this.targetNode.anchors;
          f.forEach(function(m) {
            if (m.x === v.x && m.x === p.x || m.y === v.y && m.y === p.y) {
              var E = hi(m.x, m.y, p.x, p.y), w = hi(v.x, v.y, p.x, p.y);
              E < w && (o[r + 1] = m);
            }
          });
        }
      }
      return o;
    }, t.prototype.getDraggingPoints = function(n, r, i, o, a) {
      var s = a.map(function(c) {
        return c;
      }), l = this.getAfterAnchor(n, i, o), u = this.getCrossPoint(n, i, l);
      return r === "start" ? (s.unshift(u), s.unshift(l)) : (s.push(u), s.push(l)), s;
    }, t.prototype.updateCrossPoints = function(n) {
      var r = n.map(function(m) {
        return m;
      }), i = n[0], o = n[1], a = n[r.length - 2], s = n[r.length - 1], l = this, u = l.sourceNode, c = l.targetNode, d = u.modelType, f = c.modelType, h = Pd(i, o), p = r[0];
      switch (d) {
        case gt.RECT_NODE:
          if (u.radius !== 0) {
            var v = jb(i, u);
            v || (p = Bb(i, h, u));
          }
          break;
        case gt.CIRCLE_NODE:
          p = Dv(i, h, u);
          break;
        case gt.ELLIPSE_NODE:
          p = zb(i, h, u);
          break;
        case gt.DIAMOND_NODE:
          p = Sc(i, h, u);
          break;
        case gt.POLYGON_NODE:
          p = Sc(i, h, u);
          break;
      }
      p && (r[0] = p);
      var g = Pd(a, s), y = r[r.length - 1];
      switch (f) {
        case gt.RECT_NODE:
          if (c.radius !== 0) {
            var v = jb(s, c);
            v || (y = Bb(s, g, c));
          }
          break;
        case gt.CIRCLE_NODE:
          y = Dv(s, g, c);
          break;
        case gt.ELLIPSE_NODE:
          y = zb(s, g, c);
          break;
        case gt.DIAMOND_NODE:
          y = Sc(s, g, c);
          break;
        case gt.POLYGON_NODE:
          y = Sc(s, g, c);
          break;
      }
      return y && (r[r.length - 1] = y), r;
    }, t.prototype.getData = function() {
      var n = e.prototype.getData.call(this), r = this.pointsList.map(function(i) {
        var o = i.x, a = i.y;
        return {
          x: o,
          y: a
        };
      });
      return Object.assign({}, n, {
        pointsList: r
      });
    }, t.prototype.getPath = function(n) {
      return n.map(function(r) {
        return "".concat(r.x, ",").concat(r.y);
      }).join(" ");
    }, t.prototype.initPoints = function() {
      this.pointsList.length > 0 ? this.points = this.getPath(this.pointsList) : this.updatePoints();
    }, t.prototype.updatePoints = function() {
      var n = Mb({
        x: this.startPoint.x,
        y: this.startPoint.y
      }, {
        x: this.endPoint.x,
        y: this.endPoint.y
      }, this.sourceNode, this.targetNode, this.offset || 0);
      this.pointsList = n, this.points = n.map(function(r) {
        return "".concat(r.x, ",").concat(r.y);
      }).join(" ");
    }, t.prototype.updateStartPoint = function(n) {
      this.startPoint = Object.assign({}, n), this.updatePoints();
    }, t.prototype.moveStartPoint = function(n, r) {
      this.startPoint.x += n, this.startPoint.y += r, this.updatePoints();
    }, t.prototype.updateEndPoint = function(n) {
      this.endPoint = Object.assign({}, n), this.updatePoints();
    }, t.prototype.moveEndPoint = function(n, r) {
      this.endPoint.x += n, this.endPoint.y += r, this.updatePoints();
    }, t.prototype.updatePointsList = function(n, r) {
      this.pointsList.forEach(function(a) {
        a.x += n, a.y += r;
      });
      var i = this.pointsList[0];
      this.startPoint = Object.assign({}, i);
      var o = this.pointsList[this.pointsList.length - 1];
      this.endPoint = Object.assign({}, o), this.initPoints();
    }, t.prototype.dragAppendStart = function() {
      this.draggingPointList = this.pointsList.map(function(n) {
        return n;
      });
    }, t.prototype.dragAppendSimple = function(n, r) {
      var i;
      this.isDragging = !0;
      var o = n.start, a = n.end, s = n.startIndex, l = n.endIndex, u = n.direction, c = this.pointsList, d = c;
      return u === qt.HORIZONTAL ? (c[s] = {
        x: o.x,
        y: o.y + r.y
      }, c[l] = {
        x: a.x,
        y: a.y + r.y
      }, d = this.pointsList.map(function(f) {
        return f;
      })) : u === qt.VERTICAL && (c[s] = {
        x: o.x + r.x,
        y: o.y
      }, c[l] = {
        x: a.x + r.x,
        y: a.y
      }, d = this.pointsList.map(function(f) {
        return f;
      })), this.updatePointsAfterDrag(d), this.draggingPointList = d, !((i = this.text) === null || i === void 0) && i.value && this.setText(It({}, this.text, this.textPosition)), {
        start: It({}, c[s]),
        end: It({}, c[l]),
        startIndex: s,
        endIndex: l,
        direction: u
      };
    }, t.prototype.dragAppend = function(n, r) {
      var i;
      this.isDragging = !0;
      var o = n.start, a = n.end, s = n.startIndex, l = n.endIndex, u = n.direction, c = this.pointsList;
      if (u === qt.HORIZONTAL) {
        c[s] = {
          x: o.x,
          y: o.y + r.y
        }, c[l] = {
          x: a.x,
          y: a.y + r.y
        };
        var d = this.pointsList.map(function(g) {
          return g;
        });
        if (s !== 0 && l !== this.pointsList.length - 1 && (d = this.removeCrossPoints(s, l, d)), s === 0) {
          var f = {
            x: o.x,
            y: o.y + r.y
          }, h = Po(f, this.sourceNode);
          if (!h) {
            var p = this.sourceNode.anchors;
            d = this.getDraggingPoints(u, "start", f, p, d);
          }
        }
        if (l === this.pointsList.length - 1) {
          var v = {
            x: a.x,
            y: a.y + r.y
          }, h = Po(v, this.targetNode);
          if (!h) {
            var p = this.targetNode.anchors;
            d = this.getDraggingPoints(u, "end", v, p, d);
          }
        }
        this.updatePointsAfterDrag(d), this.draggingPointList = d;
      } else if (u === qt.VERTICAL) {
        c[s] = {
          x: o.x + r.x,
          y: o.y
        }, c[l] = {
          x: a.x + r.x,
          y: a.y
        };
        var d = this.pointsList.map(function(y) {
          return y;
        });
        if (s !== 0 && l !== this.pointsList.length - 1 && (d = this.removeCrossPoints(s, l, d)), s === 0) {
          var f = {
            x: o.x + r.x,
            y: o.y
          }, h = Po(f, this.sourceNode);
          if (!h) {
            var p = this.sourceNode.anchors;
            d = this.getDraggingPoints(u, "start", f, p, d);
          }
        }
        if (l === this.pointsList.length - 1) {
          var v = {
            x: a.x + r.x,
            y: a.y
          }, h = Po(v, this.targetNode);
          if (!h) {
            var p = this.targetNode.anchors;
            d = this.getDraggingPoints(u, "end", v, p, d);
          }
        }
        this.updatePointsAfterDrag(d), this.draggingPointList = d;
      }
      return !((i = this.text) === null || i === void 0) && i.value && this.setText(It({}, this.text, this.textPosition)), {
        start: It({}, c[s]),
        end: It({}, c[l]),
        startIndex: s,
        endIndex: l,
        direction: u
      };
    }, t.prototype.dragAppendEnd = function() {
      if (this.draggingPointList) {
        var n = d2(Ra(this.points));
        this.pointsList = n.map(function(o) {
          return o;
        }), this.draggingPointList = [];
        var r = n[0];
        this.startPoint = It({}, r);
        var i = n[n.length - 1];
        this.endPoint = It({}, i);
      }
      this.isDragging = !1;
    }, t.prototype.updatePointsAfterDrag = function(n) {
      var r = this.updateCrossPoints(n);
      this.points = r.map(function(i) {
        return "".concat(i.x, ",").concat(i.y);
      }).join(" ");
    }, t.prototype.getAdjustStart = function() {
      return this.pointsList[0] || this.startPoint;
    }, t.prototype.getAdjustEnd = function() {
      var n = this.pointsList;
      return n[n.length - 1] || this.endPoint;
    }, t.prototype.updateAfterAdjustStartAndEnd = function(n) {
      var r = n.startPoint, i = n.endPoint, o = n.sourceNode, a = n.targetNode;
      this.pointsList = Mb({
        x: r.x,
        y: r.y
      }, {
        x: i.x,
        y: i.y
      }, o, a, this.offset || 0), this.initPoints();
    }, In([
      ie
    ], t.prototype, "dbClickPosition", void 0), In([
      te
    ], t.prototype, "initPoints", null), In([
      te
    ], t.prototype, "updatePoints", null), In([
      te
    ], t.prototype, "updateStartPoint", null), In([
      te
    ], t.prototype, "moveStartPoint", null), In([
      te
    ], t.prototype, "updateEndPoint", null), In([
      te
    ], t.prototype, "moveEndPoint", null), In([
      te
    ], t.prototype, "updatePointsList", null), In([
      te
    ], t.prototype, "dragAppendStart", null), In([
      te
    ], t.prototype, "dragAppendSimple", null), In([
      te
    ], t.prototype, "dragAppend", null), In([
      te
    ], t.prototype, "dragAppendEnd", null), In([
      te
    ], t.prototype, "updatePointsAfterDrag", null), In([
      te
    ], t.prototype, "getAdjustStart", null), In([
      te
    ], t.prototype, "getAdjustEnd", null), In([
      te
    ], t.prototype, "updateAfterAdjustStartAndEnd", null), t;
  }(sh)
), mn = function() {
  return mn = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, mn.apply(this, arguments);
}, nt = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, Ub = function(e) {
  var t = typeof Symbol == "function" && Symbol.iterator, n = t && e[t], r = 0;
  if (n) return n.call(e);
  if (e && typeof e.length == "number") return {
    next: function() {
      return e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e };
    }
  };
  throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, KH = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Jo = (
  /** @class */
  function() {
    function e(t, n) {
      var r;
      this.BaseType = un.NODE, this.id = "", this.type = "", this.x = 0, this.y = 0, this.textMode = Yr.TEXT, this.text = {
        value: "",
        x: 0,
        y: 0,
        draggable: !1,
        editable: !0
      }, this._width = 100, this._height = 80, this.minWidth = 30, this.minHeight = 30, this.maxWidth = 2e3, this.maxHeight = 2e3, this.anchorsOffset = [], this.virtual = !1, this.isSelected = !1, this.isHovered = !1, this.isShowAnchor = !1, this.isDragging = !1, this.isHitable = !0, this.isHittable = !0, this.draggable = !0, this.visible = !0, this.rotatable = !0, this.resizable = !0, this.zIndex = 1, this.state = Pt.DEFAULT, this.autoToFront = !0, this.style = {}, this._rotate = 0, this.modelType = gt.NODE, this.additionStateData = {}, this.targetRules = [], this.sourceRules = [], this.moveRules = [], this.resizeRules = [], this.hasSetTargetRules = !1, this.hasSetSourceRules = !1, this.graphModel = n, this.properties = (r = t.properties) !== null && r !== void 0 ? r : {}, this.initNodeData(t), this.setAttributes();
    }
    return Object.defineProperty(e.prototype, "width", {
      get: function() {
        return this._width;
      },
      set: function(t) {
        this._width = t;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "height", {
      get: function() {
        return this._height;
      },
      set: function(t) {
        this._height = t;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "rotate", {
      get: function() {
        return this._rotate;
      },
      set: function(t) {
        this._rotate = t;
        var n = this, r = n.x, i = r === void 0 ? 0 : r, o = n.y, a = o === void 0 ? 0 : o;
        this.transform = new ah(-i, -a).rotate(t).translate(i, a).toString();
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "incoming", {
      /**
       * 获取进入当前节点的边和节点
       */
      get: function() {
        return {
          nodes: this.graphModel.getNodeIncomingNode(this.id),
          edges: this.graphModel.getNodeIncomingEdge(this.id)
        };
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "outgoing", {
      /*
       * 获取离开当前节点的边和节点
       */
      get: function() {
        return {
          nodes: this.graphModel.getNodeOutgoingNode(this.id),
          edges: this.graphModel.getNodeOutgoingEdge(this.id)
        };
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.initNodeData = function(t) {
      if (t.properties || (t.properties = {}), !t.id) {
        var n = this.graphModel.idGenerator, r = n && n(t.type), i = this.createId();
        t.id = i || r || $o();
      }
      this.formatText(t), It(this, nH(t));
      var o = this.graphModel.overlapMode;
      o === fi.INCREASE && (this.zIndex = t.zIndex || tm());
    }, e.prototype.setAttributes = function() {
    }, e.prototype.createId = function() {
      return null;
    }, e.prototype.setTextMode = function(t) {
      this.textMode = t;
    }, e.prototype.formatText = function(t) {
      var n, r, i, o = t.x, a = t.y, s = t.text, l = {
        value: "",
        x: o,
        y: a,
        draggable: !1,
        editable: !0
      };
      s && (typeof s == "string" ? l.value = s : (l = mn(mn({}, l), { x: (n = s.x) !== null && n !== void 0 ? n : o, y: (r = s.y) !== null && r !== void 0 ? r : a, value: (i = s.value) !== null && i !== void 0 ? i : "" }), Da(s.draggable) || (l.draggable = s.draggable), Da(s.editable) || (l.editable = s.editable))), t.text = l;
    }, e.prototype.resize = function(t) {
      var n = t.width, r = t.height, i = t.deltaX, o = t.deltaY, a = this.isAllowResizeNode(i, o, n, r);
      return a ? (this.move(i / 2, o / 2), this.width = n, this.height = r, this.setProperties({
        width: n,
        height: r
      }), this.getData()) : this.getData();
    }, e.prototype.proportionalResize = function() {
    }, e.prototype.getData = function() {
      var t = this.text, n = t.x, r = t.y, i = t.value, o = this.properties;
      Io(o) && (o = li(o)), Ea(o.width) && (o.width = this.width), Ea(o.height) && (o.height = this.height);
      var a = {
        id: this.id,
        type: this.type,
        x: this.x,
        y: this.y,
        properties: o
      };
      return this.rotate && (a.rotate = this.rotate), this.graphModel.overlapMode === fi.INCREASE && (a.zIndex = this.zIndex), i && (a.text = {
        x: n,
        y: r,
        value: i
      }), a;
    }, e.prototype.getHistoryData = function() {
      return this.getData();
    }, e.prototype.getProperties = function() {
      return li(this.properties);
    }, e.prototype.getOuterGAttributes = function() {
      return {
        className: ""
      };
    }, e.prototype.getNodeStyle = function() {
      return mn(mn({}, this.graphModel.theme.baseNode), this.style);
    }, e.prototype.getTextStyle = function() {
      var t = this.graphModel.theme.nodeText, n = this.properties.textStyle, r = n === void 0 ? {} : n;
      return mn(mn({}, it(t)), it(r));
    }, e.prototype.getRotateControlStyle = function() {
      var t = this.graphModel.theme.rotateControl;
      return it(t);
    }, e.prototype.getResizeControlStyle = function() {
      var t = this.graphModel.theme.resizeControl;
      return it(t);
    }, e.prototype.getResizeOutlineStyle = function() {
      var t = this.graphModel.theme.resizeOutline;
      return it(t);
    }, e.prototype.getAnchorStyle = function(t) {
      var n = this.graphModel.theme.anchor;
      return it(n);
    }, e.prototype.getAnchorLineStyle = function(t) {
      var n = this.graphModel.theme.anchorLine;
      return it(n);
    }, e.prototype.getOutlineStyle = function() {
      var t = this.graphModel.theme.outline;
      return it(t);
    }, e.prototype.isAllowConnectedAsSource = function(t, n, r, i) {
      var o = this.hasSetSourceRules ? this.sourceRules : this.getConnectedSourceRules();
      this.hasSetSourceRules = !0;
      for (var a = !0, s = "", l = 0; l < o.length; l++) {
        var u = o[l];
        if (!u.validate.call(this, this, t, n, r, i)) {
          a = !1, s = u.message;
          break;
        }
      }
      return {
        isAllPass: a,
        msg: s
      };
    }, e.prototype.getConnectedSourceRules = function() {
      return this.sourceRules;
    }, e.prototype.isAllowConnectedAsTarget = function(t, n, r, i) {
      var o = this.hasSetTargetRules ? this.targetRules : this.getConnectedTargetRules();
      this.hasSetTargetRules = !0;
      for (var a = !0, s = "", l = 0; l < o.length; l++) {
        var u = o[l];
        if (!u.validate.call(this, t, this, n, r, i)) {
          a = !1, s = u.message;
          break;
        }
      }
      return {
        isAllPass: a,
        msg: s
      };
    }, e.prototype.isAllowMoveNode = function(t, n) {
      var r, i, o = !0, a = !0, s = this.moveRules.concat(this.graphModel.nodeMoveRules);
      try {
        for (var l = Ub(s), u = l.next(); !u.done; u = l.next()) {
          var c = u.value, d = c(this, t, n);
          if (!d)
            return !1;
          if (typeof d == "object") {
            var f = d;
            if (!f.x && !f.y)
              return !1;
            o = o && f.x, a = a && f.y;
          }
        }
      } catch (h) {
        r = { error: h };
      } finally {
        try {
          u && !u.done && (i = l.return) && i.call(l);
        } finally {
          if (r) throw r.error;
        }
      }
      return {
        x: o,
        y: a
      };
    }, e.prototype.getConnectedTargetRules = function() {
      return this.targetRules;
    }, e.prototype.getAnchorsByOffset = function() {
      var t = this, n = t.anchorsOffset, r = t.id, i = t.x, o = t.y;
      return n && n.length > 0 ? n.map(function(a, s) {
        return a.length ? (a = a, {
          id: "".concat(r, "_").concat(s),
          x: i + a[0],
          y: o + a[1]
        }) : (a = a, mn(mn({}, a), { x: i + a.x, y: o + a.y, id: a.id || "".concat(r, "_").concat(s) }));
      }) : this.getDefaultAnchor();
    }, e.prototype.getDefaultAnchor = function() {
      return [];
    }, e.prototype.getTargetAnchor = function(t) {
      return QF(t, this);
    }, e.prototype.getBounds = function() {
      return {
        minX: this.x - this.width / 2,
        minY: this.y - this.height / 2,
        maxX: this.x + this.width / 2,
        maxY: this.y + this.height / 2
      };
    }, Object.defineProperty(e.prototype, "anchors", {
      get: function() {
        var t = this.getAnchorsByOffset(), n = this, r = n.x, i = n.y, o = n.rotate;
        return t.forEach(function(a) {
          var s = a.x, l = a.y, u = KH(new oh([s, l, 1]).translate(-r, -i).rotate(o).translate(r, i)[0], 2), c = u[0], d = u[1];
          a.x = c, a.y = d;
        }), t;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.getAnchorInfo = function(t) {
      if (!Ea(t))
        for (var n = 0; n < this.anchors.length; n++) {
          var r = this.anchors[n];
          if (r.id === t)
            return r;
        }
    }, e.prototype.addNodeMoveRules = function(t) {
      this.moveRules.includes(t) || this.moveRules.push(t);
    }, e.prototype.isAllowMoveByXORY = function(t, n, r) {
      var i, o;
      if (r)
        i = !0, o = !0;
      else {
        var a = this.isAllowMoveNode(t, n);
        typeof a == "boolean" ? (i = a, o = a) : (i = a.x, o = a.y);
      }
      return {
        isAllowMoveX: i,
        isAllowMoveY: o
      };
    }, e.prototype.move = function(t, n, r) {
      r === void 0 && (r = !1);
      var i = this.isAllowMoveByXORY(t, n, r), o = i.isAllowMoveX, a = i.isAllowMoveY;
      return o && (this.x = this.x + t, this.text && this.moveText(t, 0)), a && (this.y = this.y + n, this.text && this.moveText(0, n)), (o || a) && (this.rotate = this._rotate), o || a;
    }, e.prototype.getMoveDistance = function(t, n, r) {
      r === void 0 && (r = !1);
      var i = this.isAllowMoveByXORY(t, n, r), o = i.isAllowMoveX, a = i.isAllowMoveY, s = 0, l = 0;
      return o && t && (this.x = this.x + t, this.text && this.moveText(t, 0), s = t), a && n && (this.y = this.y + n, this.text && this.moveText(0, n), l = n), [s, l];
    }, e.prototype.moveTo = function(t, n, r) {
      r === void 0 && (r = !1);
      var i = t - this.x, o = n - this.y;
      return !r && !this.isAllowMoveNode(i, o) ? !1 : (this.text && this.moveText(i, o), this.x = t, this.y = n, !0);
    }, e.prototype.moveText = function(t, n) {
      var r = this.text, i = r.x, o = r.y, a = r.value, s = r.draggable, l = r.editable;
      this.text = {
        value: a,
        editable: l,
        draggable: s,
        x: i + t,
        y: o + n
      };
    }, e.prototype.updateText = function(t) {
      this.text = mn(mn({}, li(this.text)), { value: t });
    }, e.prototype.addNodeResizeRules = function(t) {
      this.resizeRules.includes(t) || this.resizeRules.push(t);
    }, e.prototype.isAllowResizeNode = function(t, n, r, i) {
      var o, a, s = this.resizeRules.concat(this.graphModel.nodeResizeRules);
      try {
        for (var l = Ub(s), u = l.next(); !u.done; u = l.next()) {
          var c = u.value, d = c(this, t, n, r, i);
          if (!d)
            return !1;
        }
      } catch (f) {
        o = { error: f };
      } finally {
        try {
          u && !u.done && (a = l.return) && a.call(l);
        } finally {
          if (o) throw o.error;
        }
      }
      return !0;
    }, e.prototype.setSelected = function(t) {
      t === void 0 && (t = !0), this.isSelected = t;
    }, e.prototype.setHovered = function(t) {
      t === void 0 && (t = !0), this.isHovered = t, this.setIsShowAnchor(t);
    }, e.prototype.setIsShowAnchor = function(t) {
      t === void 0 && (t = !0), this.isShowAnchor = t;
    }, e.prototype.setRotatable = function(t) {
      t === void 0 && (t = !0), this.rotatable = t;
    }, e.prototype.setResizable = function(t) {
      t === void 0 && (t = !0), this.resizable = t;
    }, e.prototype.setHitable = function(t) {
      t === void 0 && (t = !0), this.isHitable = t;
    }, e.prototype.setHittable = function(t) {
      t === void 0 && (t = !0), this.isHittable = t;
    }, e.prototype.setElementState = function(t, n) {
      this.state = t, this.additionStateData = n;
    }, e.prototype.updateProperties = function(t, n) {
      var r = li(this.properties);
      this.properties = t, this.setAttributes(), this.graphModel.eventCenter.emit(Fe.NODE_PROPERTIES_CHANGE, {
        id: this.id,
        keys: n,
        preProperties: r,
        properties: t
      });
    }, e.prototype.setProperty = function(t, n) {
      var r = li(this.properties), i = it(r);
      KS(i, t, zn(n)), this.updateProperties(i, [t]);
    }, e.prototype.setProperties = function(t) {
      var n = li(this.properties), r = mn(mn({}, n), zn(t)), i = [];
      NS(t, function(o, a) {
        ($s(n, a) && n[a] !== o || !$s(n, a)) && i.push(a);
      }), this.updateProperties(r, i);
    }, e.prototype.deleteProperty = function(t) {
      delete this.properties[t], this.setAttributes();
    }, e.prototype.setStyle = function(t, n) {
      var r;
      this.style = mn(mn({}, this.style), (r = {}, r[t] = zn(n), r));
    }, e.prototype.setStyles = function(t) {
      this.style = mn(mn({}, this.style), zn(t));
    }, e.prototype.updateStyles = function(t) {
      this.style = mn({}, zn(t));
    }, e.prototype.setZIndex = function(t) {
      t === void 0 && (t = 1), this.zIndex = t;
    }, e.prototype.updateAttributes = function(t) {
      It(this, t);
    }, e.BaseType = un.NODE, nt([
      ie
    ], e.prototype, "type", void 0), nt([
      ie
    ], e.prototype, "x", void 0), nt([
      ie
    ], e.prototype, "y", void 0), nt([
      ie
    ], e.prototype, "textMode", void 0), nt([
      ie
    ], e.prototype, "text", void 0), nt([
      ie
    ], e.prototype, "properties", void 0), nt([
      ie
    ], e.prototype, "_width", void 0), nt([
      ie
    ], e.prototype, "_height", void 0), nt([
      ie
    ], e.prototype, "anchorsOffset", void 0), nt([
      ie
    ], e.prototype, "isSelected", void 0), nt([
      ie
    ], e.prototype, "isHovered", void 0), nt([
      ie
    ], e.prototype, "isShowAnchor", void 0), nt([
      ie
    ], e.prototype, "isDragging", void 0), nt([
      ie
    ], e.prototype, "isHitable", void 0), nt([
      ie
    ], e.prototype, "isHittable", void 0), nt([
      ie
    ], e.prototype, "draggable", void 0), nt([
      ie
    ], e.prototype, "visible", void 0), nt([
      ie
    ], e.prototype, "rotatable", void 0), nt([
      ie
    ], e.prototype, "resizable", void 0), nt([
      ie
    ], e.prototype, "zIndex", void 0), nt([
      ie
    ], e.prototype, "state", void 0), nt([
      ie
    ], e.prototype, "autoToFront", void 0), nt([
      ie
    ], e.prototype, "style", void 0), nt([
      ie
    ], e.prototype, "transform", void 0), nt([
      ie
    ], e.prototype, "_rotate", void 0), nt([
      Ut
    ], e.prototype, "incoming", null), nt([
      Ut
    ], e.prototype, "outgoing", null), nt([
      te
    ], e.prototype, "setTextMode", null), nt([
      te
    ], e.prototype, "addNodeMoveRules", null), nt([
      te
    ], e.prototype, "move", null), nt([
      te
    ], e.prototype, "getMoveDistance", null), nt([
      te
    ], e.prototype, "moveTo", null), nt([
      te
    ], e.prototype, "moveText", null), nt([
      te
    ], e.prototype, "updateText", null), nt([
      te
    ], e.prototype, "addNodeResizeRules", null), nt([
      te
    ], e.prototype, "setSelected", null), nt([
      te
    ], e.prototype, "setHovered", null), nt([
      te
    ], e.prototype, "setIsShowAnchor", null), nt([
      te
    ], e.prototype, "setRotatable", null), nt([
      te
    ], e.prototype, "setResizable", null), nt([
      te
    ], e.prototype, "setHitable", null), nt([
      te
    ], e.prototype, "setHittable", null), nt([
      te
    ], e.prototype, "setElementState", null), nt([
      te
    ], e.prototype, "setProperty", null), nt([
      te
    ], e.prototype, "setProperties", null), nt([
      te
    ], e.prototype, "deleteProperty", null), nt([
      te
    ], e.prototype, "setStyle", null), nt([
      te
    ], e.prototype, "setStyles", null), nt([
      te
    ], e.prototype, "updateStyles", null), nt([
      te
    ], e.prototype, "setZIndex", null), nt([
      te
    ], e.prototype, "updateAttributes", null), e;
  }()
), qH = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Ql = function() {
  return Ql = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Ql.apply(this, arguments);
}, Cp = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, $d = (
  /** @class */
  function(e) {
    qH(t, e);
    function t(n, r) {
      var i = e.call(this, n, r) || this;
      return i.modelType = gt.CIRCLE_NODE, i.r = 50, i.initNodeData(n), i.setAttributes(), i;
    }
    return Object.defineProperty(t.prototype, "width", {
      get: function() {
        return this.r * 2;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "height", {
      get: function() {
        return this.r * 2;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.setAttributes = function() {
      e.prototype.setAttributes.call(this);
      var n = this.properties.r;
      n && (this.r = n);
    }, t.prototype.getNodeStyle = function() {
      var n = e.prototype.getNodeStyle.call(this), r = this.graphModel.theme.circle, i = this.properties.style, o = i === void 0 ? {} : i;
      return Ql(Ql(Ql({}, n), it(r)), it(o));
    }, t.prototype.getDefaultAnchor = function() {
      var n = this, r = n.x, i = n.y, o = n.r;
      return [
        { x: r, y: i - o, id: "".concat(this.id, "_0") },
        { x: r + o, y: i, id: "".concat(this.id, "_1") },
        { x: r, y: i + o, id: "".concat(this.id, "_2") },
        { x: r - o, y: i, id: "".concat(this.id, "_3") }
      ];
    }, t.prototype.resize = function(n) {
      var r = n.width, i = n.deltaX, o = n.deltaY;
      return this.move(i / 2, o / 2), this.r = r, this.setProperties({
        r
      }), this.getData();
    }, Cp([
      ie
    ], t.prototype, "r", void 0), Cp([
      Ut
    ], t.prototype, "width", null), Cp([
      Ut
    ], t.prototype, "height", null), t;
  }(Jo)
), ZH = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), eu = function() {
  return eu = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, eu.apply(this, arguments);
}, is = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, Oc = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Hv = (
  /** @class */
  function(e) {
    ZH(t, e);
    function t(n, r) {
      var i = e.call(this, n, r) || this;
      return i.modelType = gt.DIAMOND_NODE, i.rx = 30, i.ry = 50, i.initNodeData(n), i.setAttributes(), i;
    }
    return t.prototype.setAttributes = function() {
      e.prototype.setAttributes.call(this);
      var n = this.properties, r = n.rx, i = n.ry;
      r && (this.rx = r), i && (this.ry = i);
    }, t.prototype.getNodeStyle = function() {
      var n = e.prototype.getNodeStyle.call(this), r = this.graphModel.theme.diamond, i = this.properties.style, o = i === void 0 ? {} : i;
      return eu(eu(eu({}, n), it(r)), it(o));
    }, Object.defineProperty(t.prototype, "points", {
      get: function() {
        var n = this, r = n.x, i = n.y, o = n.rx, a = n.ry;
        return [
          [r, i - a],
          [r + o, i],
          [r, i + a],
          [r - o, i]
        ];
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "pointsPosition", {
      get: function() {
        return Kn(this.points, function(n) {
          var r = Oc(n, 2), i = r[0], o = r[1];
          return { x: i, y: o };
        });
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "width", {
      get: function() {
        var n = Number.MAX_SAFE_INTEGER, r = Number.MIN_SAFE_INTEGER;
        return st(this.points, function(i) {
          var o = Oc(i, 1), a = o[0];
          a < n && (n = a), a > r && (r = a);
        }), r - n;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "height", {
      get: function() {
        var n = Number.MAX_SAFE_INTEGER, r = Number.MIN_SAFE_INTEGER;
        return st(this.points, function(i) {
          var o = Oc(i, 2), a = o[1];
          a < n && (n = a), a > r && (r = a);
        }), r - n;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.getDefaultAnchor = function() {
      var n = this;
      return Kn(this.points, function(r, i) {
        var o = Oc(r, 2), a = o[0], s = o[1];
        return {
          x: a,
          y: s,
          id: "".concat(n.id, "_").concat(i)
        };
      });
    }, t.prototype.resize = function(n) {
      var r = n.width, i = n.height, o = n.deltaX, a = n.deltaY;
      return this.move(o / 2, a / 2), this.rx = r, this.ry = i, this.setProperties({
        rx: r,
        ry: i
      }), this.getData();
    }, is([
      ie
    ], t.prototype, "rx", void 0), is([
      ie
    ], t.prototype, "ry", void 0), is([
      Ut
    ], t.prototype, "points", null), is([
      Ut
    ], t.prototype, "pointsPosition", null), is([
      Ut
    ], t.prototype, "width", null), is([
      Ut
    ], t.prototype, "height", null), t;
  }(Jo)
), JH = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), tu = function() {
  return tu = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, tu.apply(this, arguments);
}, Ac = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, Vv = (
  /** @class */
  function(e) {
    JH(t, e);
    function t(n, r) {
      var i = e.call(this, n, r) || this;
      return i.modelType = gt.ELLIPSE_NODE, i.rx = 30, i.ry = 45, i.initNodeData(n), i.setAttributes(), i;
    }
    return t.prototype.setAttributes = function() {
      e.prototype.setAttributes.call(this);
      var n = this.properties, r = n.rx, i = n.ry;
      r && (this.rx = r), i && (this.ry = i);
    }, t.prototype.getNodeStyle = function() {
      var n = e.prototype.getNodeStyle.call(this), r = this.graphModel.theme.ellipse, i = this.properties.style, o = i === void 0 ? {} : i;
      return tu(tu(tu({}, n), it(r)), it(o));
    }, Object.defineProperty(t.prototype, "width", {
      get: function() {
        return this.rx * 2;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "height", {
      get: function() {
        return this.ry * 2;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.getDefaultAnchor = function() {
      var n = this, r = n.x, i = n.y, o = n.rx, a = n.ry;
      return [
        { x: r, y: i - a, id: "".concat(this.id, "_0") },
        { x: r + o, y: i, id: "".concat(this.id, "_1") },
        { x: r, y: i + a, id: "".concat(this.id, "_2") },
        { x: r - o, y: i, id: "".concat(this.id, "_3") }
      ];
    }, t.prototype.resize = function(n) {
      var r = n.width, i = n.height, o = n.deltaX, a = n.deltaY;
      return this.move(o / 2, a / 2), this.rx = r, this.ry = i, this.setProperties({
        rx: r,
        ry: i
      }), this.getData();
    }, Ac([
      ie
    ], t.prototype, "rx", void 0), Ac([
      ie
    ], t.prototype, "ry", void 0), Ac([
      Ut
    ], t.prototype, "width", null), Ac([
      Ut
    ], t.prototype, "height", null), t;
  }(Jo)
), QH = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), nu = function() {
  return nu = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, nu.apply(this, arguments);
}, Nc = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, Mc = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, kd = (
  /** @class */
  function(e) {
    QH(t, e);
    function t(n, r) {
      var i = e.call(this, n, r) || this;
      return i.modelType = gt.POLYGON_NODE, i.points = [
        [50, 0],
        [100, 50],
        [50, 100],
        [0, 50]
        // 菱形
        // [0,100], [50,25], [50,75], [100,0] // 闪电
        // [100, 10],
        // [40, 198],
        // [190, 78],
        // [10, 78],
        // [160, 198], // 五角星
      ], i.initNodeData(n), i.setAttributes(), i;
    }
    return t.prototype.setAttributes = function() {
      e.prototype.setAttributes.call(this);
      var n = this.properties, r = n.points, i = n.width, o = n.height, a = r || this.points;
      this.points = KF(a, i, o);
    }, t.prototype.getNodeStyle = function() {
      var n = e.prototype.getNodeStyle.call(this), r = this.graphModel.theme.polygon, i = this.properties.style, o = i === void 0 ? {} : i;
      return nu(nu(nu({}, n), it(r)), it(o));
    }, Object.defineProperty(t.prototype, "pointsPosition", {
      /**
       * 由于大多数情况下，我们初始化拿到的多边形坐标都是基于原点的（例如绘图工具到处的svg）。
       * 在logicflow中对多边形进行移动，我们不需要去更新points，
       * 而是去更新多边形中心点即可。
       */
      get: function() {
        var n = this, r = n.x, i = n.y, o = n.width, a = n.height;
        return this.points.map(function(s) {
          return {
            x: s[0] + r - o / 2,
            y: s[1] + i - a / 2
          };
        });
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "width", {
      get: function() {
        var n = Number.MAX_SAFE_INTEGER, r = Number.MIN_SAFE_INTEGER;
        return this.points.forEach(function(i) {
          var o = Mc(i, 1), a = o[0];
          a < n && (n = a), a > r && (r = a);
        }), r - n;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "height", {
      get: function() {
        var n = Number.MAX_SAFE_INTEGER, r = Number.MIN_SAFE_INTEGER;
        return this.points.forEach(function(i) {
          var o = Mc(i, 2), a = o[1];
          a < n && (n = a), a > r && (r = a);
        }), r - n;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.getDefaultAnchor = function() {
      var n = this, r = this, i = r.x, o = r.y, a = r.width, s = r.height, l = r.points;
      return l.map(function(u, c) {
        var d = Mc(u, 2), f = d[0], h = d[1];
        return {
          x: i + f - a / 2,
          y: o + h - s / 2,
          id: "".concat(n.id, "_").concat(c)
        };
      });
    }, t.prototype.resize = function(n) {
      var r = this, i = n.width, o = n.height, a = n.deltaX, s = n.deltaY;
      this.move(a / 2, s / 2);
      var l = Kn(this.points, function(u) {
        var c = Mc(u, 2), d = c[0], f = c[1];
        return [
          d * i / r.width,
          f * o / r.height
        ];
      });
      return this.points = l, this.properties.points = l, this.getData();
    }, Nc([
      ie
    ], t.prototype, "points", void 0), Nc([
      Ut
    ], t.prototype, "pointsPosition", null), Nc([
      Ut
    ], t.prototype, "width", null), Nc([
      Ut
    ], t.prototype, "height", null), t;
  }(Jo)
), eV = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), ru = function() {
  return ru = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, ru.apply(this, arguments);
}, tV = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, Hs = (
  /** @class */
  function(e) {
    eV(t, e);
    function t(n, r) {
      var i = e.call(this, n, r) || this;
      return i.modelType = gt.RECT_NODE, i.radius = 0, i.initNodeData(n), i.setAttributes(), i;
    }
    return t.prototype.setAttributes = function() {
      e.prototype.setAttributes.call(this);
      var n = this.properties, r = n.width, i = n.height, o = n.radius;
      Ea(r) || (this.width = r), Ea(i) || (this.height = i), Ea(o) || (this.radius = o);
    }, t.prototype.getDefaultAnchor = function() {
      var n = this, r = n.x, i = n.y, o = n.width, a = n.height;
      return [
        { x: r, y: i - a / 2, id: "".concat(this.id, "_0") },
        { x: r + o / 2, y: i, id: "".concat(this.id, "_1") },
        { x: r, y: i + a / 2, id: "".concat(this.id, "_2") },
        { x: r - o / 2, y: i, id: "".concat(this.id, "_3") }
      ];
    }, t.prototype.getNodeStyle = function() {
      var n = e.prototype.getNodeStyle.call(this), r = this.graphModel.theme.rect, i = this.properties.style, o = i === void 0 ? {} : i;
      return ru(ru(ru({}, n), it(r)), it(o));
    }, tV([
      ie
    ], t.prototype, "radius", void 0), t;
  }(Jo)
), nV = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), iu = function() {
  return iu = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, iu.apply(this, arguments);
}, Yb = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, rV = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, iV = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
}, Wv = (
  /** @class */
  function(e) {
    nV(t, e);
    function t() {
      var n = e.apply(this, iV([], rV(arguments), !1)) || this;
      return n.modelType = gt.TEXT_NODE, n;
    }
    return t.prototype.getTextStyle = function() {
      var n = e.prototype.getTextStyle.call(this), r = this.graphModel.theme.text, i = this.properties.textStyle;
      return iu(iu(iu({}, n), it(r)), it(i));
    }, Object.defineProperty(t.prototype, "width", {
      get: function() {
        var n = String(this.text.value).split(/[\r\n]/g), r = this.getTextStyle().fontSize, i = Hb({
          rows: n,
          fontSize: r,
          rowsLength: n.length
        }).width;
        return i;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "height", {
      get: function() {
        var n = String(this.text.value).split(/[\r\n]/g), r = this.getTextStyle().fontSize, i = Hb({
          rows: n,
          fontSize: r,
          rowsLength: n.length
        }).height;
        return i;
      },
      enumerable: !1,
      configurable: !0
    }), Yb([
      Ut
    ], t.prototype, "width", null), Yb([
      Ut
    ], t.prototype, "height", null), t;
  }(Jo)
), oV = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Gv = (
  /** @class */
  function(e) {
    oV(t, e);
    function t(n, r) {
      var i = e.call(this, n, r) || this;
      return i.modelType = gt.HTML_NODE, i.setAttributes(), i;
    }
    return t.prototype.setAttributes = function() {
      e.prototype.setAttributes.call(this);
      var n = this.properties, r = n.width, i = n.height;
      r && (this.width = r), i && (this.height = i);
    }, t.prototype.getDefaultAnchor = function() {
      var n = this, r = n.x, i = n.y, o = n.width, a = n.height;
      return [
        { x: r, y: i - a / 2, id: "".concat(this.id, "_0") },
        { x: r + o / 2, y: i, id: "".concat(this.id, "_1") },
        { x: r, y: i + a / 2, id: "".concat(this.id, "_2") },
        { x: r - o / 2, y: i, id: "".concat(this.id, "_3") }
      ];
    }, t;
  }(Jo)
), kt = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, aV = {
  // SilentMode 下允许用户操作画布
  stopZoomGraph: !1,
  stopScrollGraph: !1,
  stopMoveGraph: !1,
  // 节点 & 边相关配置
  adjustEdge: !1,
  adjustEdgeStartAndEnd: !1,
  adjustNodePosition: !1,
  hideAnchors: !0,
  allowRotate: !1,
  allowResize: !1,
  nodeSelectedOutline: !0,
  // 文本相关配置
  textEdit: !1,
  nodeTextEdit: !1,
  edgeTextEdit: !1,
  textDraggable: !1,
  nodeTextDraggable: !1,
  edgeTextDraggable: !1
}, Tc = [
  "isSilentMode",
  // 是否为静默模式
  "stopZoomGraph",
  // 禁止缩放画布
  "stopScrollGraph",
  // 禁止鼠标滚动移动画布
  "stopMoveGraph",
  // 禁止拖动画布
  "adjustEdge",
  // 允许调整边
  "adjustEdgeMiddle",
  // 允许调整边中点
  "adjustEdgeStartAndEnd",
  // 允许调整边起点和终点
  "adjustEdgeStart",
  // 允许调整边起点
  "adjustEdgeEnd",
  // 允许调整边终点
  "adjustNodePosition",
  // 允许拖动节点
  "hideAnchors",
  // 隐藏节点所有锚点
  "allowRotate",
  // 是否允许节点旋转
  "allowResize",
  // 是否允许节点缩放
  "autoExpand",
  // 是否自动展开
  "hoverOutline",
  // 显示节点悬浮时的外框
  "nodeSelectedOutline",
  // 节点被选中时是否显示 outline
  "edgeSelectedOutline",
  // 边被选中时是否显示 outline
  "textEdit",
  // 是否允许文本可编辑（全局）
  "nodeTextEdit",
  // 允许节点文本可以编辑
  "edgeTextEdit",
  // 允许边文本可以编辑
  "textDraggable",
  // 是否允许文本可拖拽（全局）
  "nodeTextDraggable",
  // 允许节点文本可以拖拽
  "edgeTextDraggable",
  // 允许边文本可以拖拽
  "multipleSelectKey",
  // 多选按键
  // 2.0.0 新增配置
  "textMode",
  // 文本模式（全局）
  "nodeTextMode",
  // 节点文本模式
  "edgeTextMode",
  // 边文本模式
  "nodeTextMultiple",
  // 是否支持多个节点文本
  "edgeTextMultiple",
  // 是否支持多个边文本
  "nodeTextVertical",
  // 节点文本是否纵向显示
  "edgeTextVertical"
  // 边文本是否纵向显示
], sV = (
  /** @class */
  function() {
    function e(t) {
      this.isSilentMode = !1, this.stopZoomGraph = !1, this.stopMoveGraph = !1, this.stopScrollGraph = !1, this.textMode = Yr.TEXT, this.textEdit = !0, this.textDraggable = !1, this.nodeTextEdit = !0, this.nodeTextDraggable = !1, this.nodeTextMultiple = !1, this.nodeTextVertical = !1, this.nodeTextMode = Yr.TEXT, this.edgeTextMode = Yr.TEXT, this.edgeTextEdit = !0, this.edgeTextDraggable = !1, this.edgeTextMultiple = !1, this.edgeTextVertical = !1, this.hideAnchors = !1, this.allowRotate = !1, this.allowResize = !1, this.hoverOutline = !0, this.nodeSelectedOutline = !0, this.adjustNodePosition = !0, this.autoExpand = !1, this.adjustEdge = !0, this.adjustEdgeMiddle = !1, this.adjustEdgeStartAndEnd = !1, this.adjustEdgeStart = !1, this.adjustEdgeEnd = !1, this.edgeSelectedOutline = !0, this.multipleSelectKey = "", It(this, this.computeConfig(t));
    }
    return e.prototype.updateEditConfig = function(t) {
      var n = this.computeConfig(t);
      It(this, n);
    }, e.prototype.computeConfig = function(t) {
      var n = t.isSilentMode, r = t.textDraggable, i = t.textMode, o = t.textEdit, a = t.adjustEdgeStartAndEnd, s = {};
      if (n === !1 && It(s, this.stagedConfig), n === !0 && n !== this.isSilentMode) {
        var l = ma(aV, Tc);
        this.stagedConfig = ma(this, Tc), It(s, l);
      }
      Da(o) || It(s, {
        nodeTextEdit: o,
        edgeTextEdit: o
      }), Da(r) || It(s, {
        nodeTextDraggable: r,
        edgeTextDraggable: r
      }), i && It(s, {
        nodeTextMode: i,
        edgeTextMode: i
      }), Cd(a) && It(s, {
        adjustEdgeStart: a,
        adjustEdgeEnd: a
      });
      var u = ma(t, Tc);
      return It(s, u);
    }, e.prototype.updateTextMode = function(t) {
      this.textMode = t, this.edgeTextMode = t, this.nodeTextMode = t;
    }, e.prototype.getConfig = function() {
      return ma(this, Tc);
    }, kt([
      ie
    ], e.prototype, "isSilentMode", void 0), kt([
      ie
    ], e.prototype, "stopZoomGraph", void 0), kt([
      ie
    ], e.prototype, "stopMoveGraph", void 0), kt([
      ie
    ], e.prototype, "stopScrollGraph", void 0), kt([
      ie
    ], e.prototype, "textMode", void 0), kt([
      ie
    ], e.prototype, "textEdit", void 0), kt([
      ie
    ], e.prototype, "textDraggable", void 0), kt([
      ie
    ], e.prototype, "nodeTextEdit", void 0), kt([
      ie
    ], e.prototype, "nodeTextDraggable", void 0), kt([
      ie
    ], e.prototype, "nodeTextMultiple", void 0), kt([
      ie
    ], e.prototype, "nodeTextVertical", void 0), kt([
      ie
    ], e.prototype, "nodeTextMode", void 0), kt([
      ie
    ], e.prototype, "edgeTextMode", void 0), kt([
      ie
    ], e.prototype, "edgeTextEdit", void 0), kt([
      ie
    ], e.prototype, "edgeTextDraggable", void 0), kt([
      ie
    ], e.prototype, "edgeTextMultiple", void 0), kt([
      ie
    ], e.prototype, "edgeTextVertical", void 0), kt([
      ie
    ], e.prototype, "hideAnchors", void 0), kt([
      ie
    ], e.prototype, "allowRotate", void 0), kt([
      ie
    ], e.prototype, "allowResize", void 0), kt([
      ie
    ], e.prototype, "hoverOutline", void 0), kt([
      ie
    ], e.prototype, "nodeSelectedOutline", void 0), kt([
      ie
    ], e.prototype, "adjustNodePosition", void 0), kt([
      ie
    ], e.prototype, "autoExpand", void 0), kt([
      ie
    ], e.prototype, "adjustEdge", void 0), kt([
      ie
    ], e.prototype, "adjustEdgeMiddle", void 0), kt([
      ie
    ], e.prototype, "adjustEdgeStartAndEnd", void 0), kt([
      ie
    ], e.prototype, "adjustEdgeStart", void 0), kt([
      ie
    ], e.prototype, "adjustEdgeEnd", void 0), kt([
      ie
    ], e.prototype, "edgeSelectedOutline", void 0), kt([
      te
    ], e.prototype, "updateEditConfig", null), kt([
      te
    ], e.prototype, "updateTextMode", null), e;
  }()
), lV = "*", uV = (
  /** @class */
  function() {
    function e() {
      this._events = {};
    }
    return e.prototype.on = function(t, n, r) {
      var i = this;
      t == null || t.split(",").forEach(function(o) {
        o = o.trim(), i._events[o] || (i._events[o] = []), i._events[o].push({
          callback: n,
          once: !!r
        });
      });
    }, e.prototype.once = function(t, n) {
      var r = this;
      t == null || t.split(",").forEach(function(i) {
        i = i.trim(), r.on(i, n, !0);
      });
    }, e.prototype.emit = function(t, n) {
      var r = this;
      t == null || t.split(",").forEach(function(i) {
        var o = r._events[i] || [], a = r._events[lV] || [], s = function(l) {
          for (var u = l.length, c = 0; c < u; c++)
            if (l[c]) {
              var d = l[c], f = d.callback, h = d.once;
              h && (l.splice(c, 1), l.length === 0 && delete r._events[i], u--, c--), f.apply(r, [n]);
            }
        };
        s(o), s(a);
      });
    }, e.prototype.off = function(t, n) {
      var r = this;
      t || (this._events = {}), t.split(",").forEach(function(i) {
        if (!n)
          delete r._events[i];
        else {
          for (var o = r._events[i] || [], a = o.length, s = 0; s < a; s++)
            o[s].callback === n && (o.splice(s, 1), a--, s--);
          o.length === 0 && delete r._events[i];
        }
      });
    }, e.prototype.getEvents = function() {
      return this._events;
    }, e;
  }()
), cV = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Xv = function() {
  return Xv = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Xv.apply(this, arguments);
}, dV = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, fV = (
  /** @class */
  function(e) {
    cV(t, e);
    function t(n) {
      var r = e.call(this) || this;
      r.stepScrollX = 0, r.stepScrollY = 0, r.onDragging = function(s) {
        var l = s.deltaX, u = s.deltaY;
        r.setState({
          isDragging: !0
        });
        var c = r.props.graphModel, d = c.transformModel, f = c.editConfigModel;
        f.stopMoveGraph !== !0 && d.translate(l, u);
      }, r.onDragEnd = function() {
        r.setState({
          isDragging: !1
        });
      }, r.zoomHandler = function(s) {
        var l = r.props, u = l.graphModel, c = u.editConfigModel, d = u.transformModel, f = u.gridSize, h = l.graphModel, p = s.deltaX, v = s.deltaY;
        if (!c.stopScrollGraph && !s.ctrlKey && !s.metaKey) {
          if (s.preventDefault(), r.stepScrollX += p, r.stepScrollY += v, Math.abs(r.stepScrollX) >= f) {
            var g = r.stepScrollX % f, y = r.stepScrollX - g;
            d.translate(-y * d.SCALE_X, 0), r.stepScrollX = g;
          }
          if (Math.abs(r.stepScrollY) >= f) {
            var m = r.stepScrollY % f, E = r.stepScrollY - m;
            d.translate(0, -E * d.SCALE_Y), r.stepScrollY = m;
          }
          return;
        }
        if (!c.stopZoomGraph) {
          s.preventDefault();
          var w = h.getPointByClient({
            x: s.clientX,
            y: s.clientY
          }), S = w.canvasOverlayPosition, _ = S.x, b = S.y;
          d.zoom(s.deltaY < 0, [_, b]);
        }
      }, r.clickHandler = function(s) {
        var l = s.target;
        if (l.getAttribute("name") === "canvas-overlay") {
          var u = r.props.graphModel, c = u.selectElements;
          c.size > 0 && u.clearSelectElements(), u.eventCenter.emit(Fe.BLANK_CLICK, { e: s });
        }
      }, r.handleContextMenu = function(s) {
        var l = s.target;
        if (l.getAttribute("name") === "canvas-overlay") {
          s.preventDefault();
          var u = r.props.graphModel, c = u.getPointByClient({
            x: s.clientX,
            y: s.clientY
          });
          u.eventCenter.emit(Fe.BLANK_CONTEXTMENU, {
            e: s,
            position: c
          });
        }
      }, r.mouseDownHandler = function(s) {
        var l = r.props.graphModel, u = l.eventCenter, c = l.editConfigModel, d = l.transformModel.SCALE_X, f = l.gridSize, h = s.target, p = !c.adjustEdge && !c.adjustNodePosition;
        (h.getAttribute("name") === "canvas-overlay" || p) && (c.stopMoveGraph !== !0 ? (r.stepDrag.setStep(f * d), r.stepDrag.handleMouseDown(s)) : u.emit(Fe.BLANK_MOUSEDOWN, { e: s }), r.clickHandler(s));
      };
      var i = n.graphModel, o = i.gridSize, a = i.eventCenter;
      return r.stepDrag = new ni({
        onDragging: r.onDragging,
        onDragEnd: r.onDragEnd,
        step: o,
        eventType: "BLANK",
        isStopPropagation: !1,
        eventCenter: a,
        model: void 0
      }), r.state = {
        isDragging: !1
      }, r;
    }
    return t.prototype.render = function() {
      var n = this.props.graphModel.transformModel, r = n.getTransformStyle().transform, i = this.props, o = i.children, a = i.dnd, s = this.state.isDragging;
      return Q("svg", Xv({ xmlns: "http://www.w3.org/2000/svg", width: "100%", height: "100%", name: "canvas-overlay", onWheel: this.zoomHandler, onMouseDown: this.mouseDownHandler, onContextMenu: this.handleContextMenu, className: s ? "lf-canvas-overlay lf-dragging" : "lf-canvas-overlay lf-drag-able" }, a.eventMap(), { children: Q("g", { transform: r, children: o }) }));
    }, t = dV([
      qn
    ], t), t;
  }(Et)
), x2 = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Ru = function() {
  return Ru = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Ru.apply(this, arguments);
}, hV = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, pV = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Kb = (
  /** @class */
  function(e) {
    x2(t, e);
    function t() {
      var n = e.call(this) || this;
      return n.onDragging = function(r) {
        var i = r.event, o = n.props, a = o.graphModel, s = o.bezierModel, l = o.type, u = a.getPointByClient({
          x: i.clientX,
          y: i.clientY
        }).canvasOverlayPosition, c = u.x, d = u.y;
        s.updateAdjustAnchor({
          x: c,
          y: d
        }, l), a.eventCenter.emit(Fe.EDGE_ADJUST, {
          data: s.getData()
        });
      }, n.onDragEnd = function() {
        var r = n.props.bezierModel;
        r.isDragging = !1;
      }, n.dragHandler = new ni({
        onDragging: n.onDragging,
        onDragEnd: n.onDragEnd
      }), n;
    }
    return t.prototype.render = function() {
      var n = this, r = this.props.position, i = r.x, o = r.y, a = this.props.bezierModel, s = a.getEdgeStyle().adjustAnchor;
      return Q(zs, Ru({ className: "lf-bezier-adjust-anchor", x: i, y: o }, s, { onMouseDown: function(l) {
        n.dragHandler.handleMouseDown(l);
      } }));
    }, t;
  }(Et)
), vV = (
  /** @class */
  function(e) {
    x2(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.getBezierAdjust = function(n, r) {
      var i = n.path, o = n.id, a = Jy(i), s = pV(a, 4), l = s[0], u = s[1], c = s[2], d = s[3], f = n.getEdgeStyle().adjustLine, h = [];
      return h.push(Q(js, Ru({ x1: l.x, y1: l.y, x2: u.x, y2: u.y }, f))), h.push(Q(Kb, { position: u, bezierModel: n, graphModel: r, type: "sNext" }, "".concat(o, "_ePre"))), h.push(Q(js, Ru({ x1: d.x, y1: d.y, x2: c.x, y2: c.y }, f))), h.push(Q(Kb, { position: c, bezierModel: n, graphModel: r, type: "ePre" }, "".concat(o, "_sNext"))), h;
    }, t.prototype.selectedBezierEdge = function() {
      for (var n = this.props.graphModel, r = n.edges, i = [], o = 0; o < r.length; o++) {
        var a = r[o];
        a.isSelected && a.modelType === gt.BEZIER_EDGE && a.draggable && i.push(this.getBezierAdjust(a, n));
      }
      return i;
    }, t.prototype.render = function() {
      return Q("g", { className: "lf-bezier-adjust", children: this.selectedBezierEdge() });
    }, t = hV([
      qn
    ], t), t;
  }(Et)
), gV = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), yV = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, mV = (
  /** @class */
  function(e) {
    gV(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.render = function() {
      var n = this.props.background;
      return Q("div", { className: "lf-background", children: Q("div", { style: an(n) ? n : {}, className: "lf-background-area" }) });
    }, t = yV([
      qn
    ], t), t;
  }(Et)
), _V = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), bV = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, Id = (
  /** @class */
  function(e) {
    _V(t, e);
    function t(n) {
      var r = e.call(this, n) || this;
      return r.id = $o(), r.gridOptions = r.props.graphModel.grid, r;
    }
    return t.prototype.renderDot = function() {
      var n = this.gridOptions, r = n.config, i = n.size, o = i === void 0 ? 1 : i, a = n.visible, s = r ?? {}, l = s.color, u = s.thickness, c = u === void 0 ? 2 : u, d = Math.min(Math.max(2, c), o / 4), f = a ? 1 : 0;
      return Q("g", { fill: l, opacity: f, children: [Q("circle", { cx: 0, cy: 0, r: d / 2 }), Q("circle", { cx: 0, cy: o, r: d / 2 }), Q("circle", { cx: o, cy: 0, r: d / 2 }), Q("circle", { cx: o, cy: o, r: d / 2 })] });
    }, t.prototype.renderMesh = function() {
      var n = this.gridOptions, r = n.config, i = n.size, o = i === void 0 ? 1 : i, a = n.visible, s = r ?? {}, l = s.color, u = s.thickness, c = u === void 0 ? 1 : u, d = Math.min(Math.max(1, c), o / 2), f = "M 0 0 H ".concat(o, " V ").concat(o, " H 0 Z"), h = a ? 1 : 0;
      return Q("path", { d: f, stroke: l, strokeWidth: d / 2, opacity: h, fill: "transparent" });
    }, t.prototype.render = function() {
      var n = this.props.graphModel.transformModel, r = this.gridOptions, i = r.type, o = r.size, a = o === void 0 ? 1 : o, s = n.SCALE_X, l = n.SKEW_Y, u = n.SKEW_X, c = n.SCALE_Y, d = n.TRANSLATE_X, f = n.TRANSLATE_Y, h = [
        s,
        l,
        u,
        c,
        d,
        f
      ].join(","), p = "matrix(".concat(h, ")");
      return Q("div", { className: "lf-grid", children: Q("svg", { xmlns: "http://www.w3.org/2000/svg", version: "1.1", width: "100%", height: "100%", children: [Q("defs", { children: Q("pattern", { id: this.id, patternUnits: "userSpaceOnUse", patternTransform: p, x: "0", y: "0", width: a, height: a, children: [i === "dot" && this.renderDot(), i === "mesh" && this.renderMesh()] }) }), Q("rect", { width: "100%", height: "100%", fill: "url(#".concat(this.id, ")") })] }) });
    }, t = bV([
      qn
    ], t), t;
  }(Et)
);
(function(e) {
  e.defaultProps = {
    size: OF,
    visible: !0,
    type: "dot",
    config: {
      color: "#ababab",
      thickness: 1
    }
  };
  function t(n) {
    var r = it(e.defaultProps);
    return typeof n == "number" ? It(r, { size: n }) : typeof n == "boolean" ? It(r, { visible: n }) : It(r, n);
  }
  e.getGridOptions = t;
})(Id || (Id = {}));
var wV = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), xV = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, EV = (
  /** @class */
  function(e) {
    wV(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.render = function() {
      var n = this.props.graphModel.transformModel, r = n.getTransformStyle().transform, i = this.props.children;
      return Q("svg", { xmlns: "http://www.w3.org/2000/svg", version: "1.1", width: "100%", height: "100%", className: "modification-overlay", children: Q("g", { transform: r, children: i }) });
    }, t = xV([
      qn
    ], t), t;
  }(Et)
), SV = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Co = function() {
  return Co = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Co.apply(this, arguments);
}, CV = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, OV = (
  /** @class */
  function(e) {
    SV(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.getNodesOutline = function() {
      var n = this.props.graphModel, r = n.nodes, i = n.editConfigModel, o = i.hoverOutline, a = i.nodeSelectedOutline, s = [];
      return r.forEach(function(l) {
        if (l.isHovered || l.isSelected) {
          var u = l.isHovered, c = l.isSelected, d = l.x, f = l.y, h = l.width, p = l.height;
          if (a && c || o && u) {
            var v = l.getOutlineStyle(), g = {};
            if (Object.keys(v).forEach(function(m) {
              m !== "hover" && (g[m] = v[m]);
            }), u) {
              var y = v.hover;
              g = Co(Co({}, g), y);
            }
            s.push(Q(Vr, Co({
              transform: l.transform,
              className: "lf-outline-node",
              x: d,
              y: f,
              // width: width + 10,
              // height: height + 10,
              width: h + 10,
              height: p + 10
            }, g)));
          }
        }
      }), s;
    }, t.prototype.getEdgeOutline = function() {
      for (var n = this.props.graphModel, r = n.edges, i = n.editConfigModel, o = i.edgeSelectedOutline, a = i.hoverOutline, s = [], l = 0; l < r.length; l++) {
        var u = r[l];
        (o && u.isSelected || a && u.isHovered) && (u.modelType === gt.LINE_EDGE ? s.push(this.getLineOutline(u)) : u.modelType === gt.POLYLINE_EDGE ? s.push(this.getPolylineOutline(u)) : u.modelType === gt.BEZIER_EDGE && s.push(this.getBezierOutline(u)));
      }
      return s;
    }, t.prototype.getLineOutline = function(n) {
      var r = n.startPoint, i = n.endPoint, o = (r.x + i.x) / 2, a = (r.y + i.y) / 2, s = Math.abs(r.x - i.x) + 10, l = Math.abs(r.y - i.y) + 10, u = n.getOutlineStyle();
      return Q(Vr, Co({ className: "lf-outline-edge", x: o, y: a, width: s, height: l }, u));
    }, t.prototype.getPolylineOutline = function(n) {
      var r = n.points, i = Ra(r), o = Mu(i, 8), a = o.x, s = o.y, l = o.width, u = o.height, c = n.getOutlineStyle();
      return Q(Vr, Co({ className: "lf-outline", x: a, y: s, width: l, height: u }, c));
    }, t.prototype.getBezierOutline = function(n) {
      var r = n.path, i = Jy(r), o = Mu(i, 8), a = o.x, s = o.y, l = o.width, u = o.height, c = n.getOutlineStyle();
      return Q(Vr, Co({ className: "lf-outline", x: a, y: s, width: l, height: u }, c));
    }, t.prototype.render = function() {
      return Q("g", { className: "lf-outline", children: [this.getNodesOutline(), this.getEdgeOutline()] });
    }, t = CV([
      qn
    ], t), t;
  }(Et)
), AV = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Oo = function() {
  return Oo = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Oo.apply(this, arguments);
}, NV = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, MV = (
  /** @class */
  function(e) {
    AV(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.render = function() {
      var n = this.props.snaplineModel, r = n ?? {}, i = r.position, o = r.isShowHorizontal, a = r.isShowVertical, s = n == null ? void 0 : n.getStyle(), l = i ?? {}, u = l.x, c = u === void 0 ? 0 : u, d = l.y, f = d === void 0 ? 0 : d, h = Oo(Oo({ x1: -1e5, y1: f, x2: 1e5, y2: f }, s), { stroke: o ? s == null ? void 0 : s.stroke : "none" }), p = Oo(Oo({ x1: c, y1: -1e5, x2: c, y2: 1e5 }, s), { stroke: a ? s == null ? void 0 : s.stroke : "none" });
      return Q("g", { className: "lf-snapline", children: [Q(js, Oo({}, h)), Q(js, Oo({}, p))] });
    }, t = NV([
      qn
    ], t), t;
  }(Et)
), TV = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), PV = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, DV = (
  /** @class */
  function(e) {
    TV(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.componentDidMount = function() {
      this.triggerToolRender();
    }, t.prototype.componentDidUpdate = function() {
      this.triggerToolRender();
    }, t.prototype.getTools = function() {
      var n = this.props, r = n.tool, i = n.graphModel, o = i.textEditElement, a = r.getTools(), s = a.map(function(l) {
        return q(l, {
          textEditElement: o,
          graphModel: i,
          lf: r.instance
        });
      });
      return r.components = s, s;
    }, t.prototype.triggerToolRender = function() {
      var n = this.props, r = n.tool, i = n.graphModel, o = document.querySelector("#ToolOverlay_".concat(i.flowId)), a = r.getInstance();
      a.components.forEach(function(s) {
        return s(a, o);
      }), a.components = [];
    }, t.prototype.render = function() {
      var n = this.props.graphModel;
      return Q("div", { className: "lf-tool-overlay", id: "ToolOverlay_".concat(n.flowId), children: this.getTools() });
    }, t = PV([
      qn
    ], t), t;
  }(Et)
), Ao = function() {
  return Ao = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Ao.apply(this, arguments);
}, We = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, RV = function(e) {
  var t = typeof Symbol == "function" && Symbol.iterator, n = t && e[t], r = 0;
  if (n) return n.call(e);
  if (e && typeof e.length == "number") return {
    next: function() {
      return e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e };
    }
  };
  throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, xn = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Rr = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
}, LV = (
  /** @class */
  function() {
    function e(t) {
      var n = this;
      this.modelMap = /* @__PURE__ */ new Map(), this.nodeModelMap = /* @__PURE__ */ new Map(), this.edgeModelMap = /* @__PURE__ */ new Map(), this.elementsModelMap = /* @__PURE__ */ new Map(), this.nodeMoveRules = [], this.nodeResizeRules = [], this.nodes = [], this.edges = [], this.overlapMode = fi.DEFAULT, this.gridSize = 1, this.partial = !1, this.waitCleanEffects = [];
      var r = t.container, i = t.partial, o = t.background, a = o === void 0 ? {} : o, s = t.grid, l = t.idGenerator, u = t.edgeGenerator, c = t.animation, d = t.customTrajectory;
      this.rootEl = r, this.partial = !!i, this.background = a, typeof s == "object" && (this.gridSize = s.size || 1), this.theme = w2(t.style), this.grid = Id.getGridOptions(s ?? !1), this.edgeType = t.edgeType || "polyline", this.animation = EF(c), this.overlapMode = t.overlapMode || fi.DEFAULT, this.width = t.width || this.rootEl.getBoundingClientRect().width, this.height = t.height || this.rootEl.getBoundingClientRect().height;
      var f = new ResizeObserver(Yf(function(h) {
        var p, v;
        try {
          for (var g = RV(h), y = g.next(); !y.done; y = g.next()) {
            var m = y.value;
            m.target === n.rootEl && (n.resize(), n.eventCenter.emit("graph:resize", {
              target: n.rootEl,
              contentRect: m.contentRect
            }));
          }
        } catch (E) {
          p = { error: E };
        } finally {
          try {
            y && !y.done && (v = g.return) && v.call(g);
          } finally {
            if (p) throw p.error;
          }
        }
      }, 16));
      f.observe(this.rootEl), this.waitCleanEffects.push(function() {
        f.disconnect();
      }), this.eventCenter = new uV(), this.editConfigModel = new sV(t), this.transformModel = new IV(this.eventCenter, t), this.flowId = $o(), this.idGenerator = l, this.edgeGenerator = UF(this, u), this.customTrajectory = d;
    }
    return Object.defineProperty(e.prototype, "nodesMap", {
      get: function() {
        return this.nodes.reduce(function(t, n, r) {
          return t[n.id] = {
            index: r,
            model: n
          }, t;
        }, {});
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "edgesMap", {
      get: function() {
        return this.edges.reduce(function(t, n, r) {
          return t[n.id] = {
            index: r,
            model: n
          }, t;
        }, {});
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "modelsMap", {
      get: function() {
        return Rr(Rr([], xn(this.nodes), !1), xn(this.edges), !1).reduce(function(t, n) {
          return t[n.id] = n, t;
        }, {});
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "sortElements", {
      /**
       * 基于zIndex对元素进行排序。
       * todo: 性能优化
       */
      get: function() {
        for (var t = Rr(Rr([], xn(this.nodes), !1), xn(this.edges), !1).sort(function(s, l) {
          return s.zIndex - l.zIndex;
        }), n = [], r = [
          -bc,
          -bc
        ], i = [
          this.width + bc,
          this.height + bc
        ], o = 0; o < t.length; o++) {
          var a = t[o];
          a.visible && (!this.partial || a.isSelected || this.isElementInArea(a, r, i, !1, !1)) && n.push(a);
        }
        return n;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "textEditElement", {
      /**
       * 当前编辑的元素，低频操作，先循环找。
       */
      get: function() {
        var t = this.nodes.find(function(r) {
          return r.state === Pt.TEXT_EDIT;
        }), n = this.edges.find(function(r) {
          return r.state === Pt.TEXT_EDIT;
        });
        return t || n;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "selectElements", {
      /**
       * 当前画布所有被选中的元素
       */
      get: function() {
        var t = /* @__PURE__ */ new Map();
        return this.nodes.forEach(function(n) {
          n.isSelected && t.set(n.id, n);
        }), this.edges.forEach(function(n) {
          n.isSelected && t.set(n.id, n);
        }), t;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(e.prototype, "selectNodes", {
      get: function() {
        var t = [];
        return this.nodes.forEach(function(n) {
          n.isSelected && t.push(n);
        }), t;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.getAreaElement = function(t, n, r, i, o) {
      var a = this;
      r === void 0 && (r = !0), i === void 0 && (i = !0), o === void 0 && (o = !1);
      var s = [];
      return st(Rr(Rr([], xn(this.nodes), !1), xn(this.edges), !1), function(l) {
        var u = a.isElementInArea(l, t, n, r, i);
        (!o || l.visible) && u && s.push(l);
      }), s;
    }, e.prototype.getModel = function(t) {
      return this.modelMap.get(t);
    }, e.prototype.getNodeModelById = function(t) {
      var n;
      return this.fakeNode && t === this.fakeNode.id ? this.fakeNode : (n = this.nodesMap[t]) === null || n === void 0 ? void 0 : n.model;
    }, e.prototype.getPointByClient = function(t) {
      var n = t.x, r = t.y, i = this.rootEl.getBoundingClientRect(), o = {
        x: n - i.left,
        y: r - i.top
      }, a = xn(this.transformModel.HtmlPointToCanvasPoint([
        o.x,
        o.y
      ]), 2), s = a[0], l = a[1], u = { x: s, y: l };
      return {
        domOverlayPosition: o,
        canvasOverlayPosition: u
      };
    }, e.prototype.isElementInArea = function(t, n, r, i, o) {
      var a;
      if (i === void 0 && (i = !0), o === void 0 && (o = !0), t.BaseType === un.NODE) {
        t = t;
        for (var s = sr(t), l = s.minX, u = s.minY, c = s.maxX, d = s.maxY, f = [
          {
            x: l,
            y: u
          },
          {
            x: c,
            y: u
          },
          {
            x: c,
            y: d
          },
          {
            x: l,
            y: d
          }
        ], h = o, p = 0; p < f.length; p++) {
          var v = f[p], g = v.x, y = v.y;
          if (a = xn(this.transformModel.CanvasPointToHtmlPoint([g, y]), 2), g = a[0], y = a[1], xp([g, y], n, r) !== o) {
            h = !o;
            break;
          }
        }
        return h;
      }
      if (t.BaseType === un.EDGE) {
        t = t;
        var m = t.startPoint, E = t.endPoint, w = this.transformModel.CanvasPointToHtmlPoint([
          m.x,
          m.y
        ]), S = this.transformModel.CanvasPointToHtmlPoint([
          E.x,
          E.y
        ]), _ = xp(w, n, r), b = xp(S, n, r);
        return i ? _ && b : _ || b;
      }
      return !1;
    }, e.prototype.graphDataToModel = function(t) {
      var n = this;
      if ((!this.width || !this.height) && this.resize(), !t) {
        this.nodes = [], this.edges = [];
        return;
      }
      if (t.nodes ? this.nodes = Kn(t.nodes, function(i) {
        return n.getModelAfterSnapToGrid(i);
      }) : this.nodes = [], t.edges) {
        var r = this.edgeType;
        this.edges = Kn(t.edges, function(i) {
          var o, a = n.getModel((o = i.type) !== null && o !== void 0 ? o : r);
          if (!a)
            throw new Error("找不到".concat(i.type, "对应的边。"));
          var s = new a(i, n), l = s.sourceNodeId, u = s.targetNodeId, c = s.sourceAnchorId, d = c === void 0 ? "" : c, f = s.targetAnchorId, h = f === void 0 ? "" : f, p = s.startPoint, v = s.endPoint, g = s.text, y = s.textPosition, m = function(K, ae, x, P) {
            var L = K == null ? void 0 : K.anchors.find(function(k) {
              return k.id === ae;
            });
            L && !Od(L, x) && P(L);
          }, E = n.getNodeModelById(l), w = n.getNodeModelById(u);
          if (m(E, d, p, s.updateStartPoint.bind(s)), m(w, h, v, s.updateEndPoint.bind(s)), g) {
            var S = g.x, _ = g.y, b = y.x, T = y.y;
            if (S && _ && b && T) {
              var R = S - b, B = _ - T;
              s.resetTextPosition(), s.moveText(R, B);
            }
          }
          return n.edgeModelMap.set(s.id, s), n.elementsModelMap.set(s.id, s), s;
        });
      } else
        this.edges = [];
    }, e.prototype.modelToGraphData = function() {
      var t = [];
      this.edges.forEach(function(r) {
        var i = r.getData();
        i && !r.virtual && t.push(i);
      });
      var n = [];
      return this.nodes.forEach(function(r) {
        var i = r.getData();
        i && !r.virtual && n.push(i);
      }), {
        nodes: n,
        edges: t
      };
    }, e.prototype.modelToHistoryData = function() {
      for (var t = !1, n = [], r = 0; r < this.nodes.length; r++) {
        var i = this.nodes[r];
        if (i.isDragging) {
          t = !0;
          break;
        } else
          n.push(i.getHistoryData());
      }
      if (t)
        return !1;
      for (var o = !1, a = [], s = 0; s < this.edges.length; s++) {
        var l = this.edges[s];
        if (l.isDragging) {
          o = !0;
          break;
        } else
          a.push(l.getHistoryData());
      }
      return o ? !1 : {
        nodes: n,
        edges: a
      };
    }, e.prototype.getEdgeModelById = function(t) {
      var n;
      return (n = this.edgesMap[t]) === null || n === void 0 ? void 0 : n.model;
    }, e.prototype.getElement = function(t) {
      return this.modelsMap[t];
    }, e.prototype.getNodeEdges = function(t) {
      for (var n = [], r = 0; r < this.edges.length; r++) {
        var i = this.edges[r], o = i.sourceNodeId === t, a = i.targetNodeId === t;
        (o || a) && n.push(i);
      }
      return n;
    }, e.prototype.getSelectElements = function(t) {
      t === void 0 && (t = !0);
      var n = this.selectElements, r = {
        nodes: [],
        edges: []
      };
      return n.forEach(function(i) {
        if (i.BaseType === un.NODE && r.nodes.push(i.getData()), i.BaseType === un.EDGE) {
          var o = i.getData(), a = n.get(o.sourceNodeId) && n.get(o.targetNodeId);
          (t || a) && r.edges.push(o);
        }
      }), r;
    }, e.prototype.updateAttributes = function(t, n) {
      var r = this.getElement(t);
      r == null || r.updateAttributes(n);
    }, e.prototype.changeNodeId = function(t, n) {
      return n || (n = $o()), this.nodesMap[n] ? (console.warn("当前流程图已存在节点".concat(n, ", 修改失败")), "") : this.nodesMap[t] ? (this.edges.forEach(function(r) {
        r.sourceNodeId === t && (r.sourceNodeId = n), r.targetNodeId === t && (r.targetNodeId = n);
      }), this.nodesMap[t].model.id = n, this.nodesMap[n] = this.nodesMap[t], n) : (console.warn("当前流程图找不到节点".concat(t, ", 修改失败")), "");
    }, e.prototype.changeEdgeId = function(t, n) {
      return n || (n = $o()), this.edgesMap[n] ? (console.warn("当前流程图已存在边: ".concat(n, ", 修改失败")), "") : this.edgesMap[t] ? (this.edges.forEach(function(r) {
        r.id === t && r.changeEdgeId(n);
      }), n) : (console.warn("当前流程图找不到边: ".concat(n, ", 修改失败")), "");
    }, e.prototype.getTextModel = function(t) {
      var n = this.editConfigModel, r = n.textMode, i = n.nodeTextMode, o = n.edgeTextMode;
      if (t.BaseType === un.NODE)
        return t.textMode || i || r || Yr.TEXT;
      if (t.BaseType === un.EDGE)
        return t.textMode || o || r || Yr.TEXT;
    }, e.prototype.setTextMode = function(t, n) {
      this.editConfigModel.updateEditConfig({ textMode: t });
    }, e.prototype.setFakeNode = function(t) {
      this.fakeNode = t;
    }, e.prototype.removeFakeNode = function() {
      this.fakeNode = null;
    }, e.prototype.setModel = function(t, n) {
      return this.modelMap.set(t, n);
    }, e.prototype.toFront = function(t) {
      var n, r, i, o = ((n = this.nodesMap[t]) === null || n === void 0 ? void 0 : n.model) || ((r = this.edgesMap[t]) === null || r === void 0 ? void 0 : r.model);
      o && (this.overlapMode === fi.DEFAULT && ((i = this.topElement) === null || i === void 0 || i.setZIndex(), o.setZIndex(CF), this.topElement = o), this.overlapMode === fi.INCREASE && this.setElementZIndex(t, "top"));
    }, e.prototype.setElementZIndex = function(t, n) {
      var r, i, o = ((r = this.nodesMap[t]) === null || r === void 0 ? void 0 : r.model) || ((i = this.edgesMap[t]) === null || i === void 0 ? void 0 : i.model);
      if (o) {
        var a = void 0;
        typeof n == "number" ? a = n : (n === "top" && (a = tm()), n === "bottom" && (a = VH())), o.setZIndex(a);
      }
    }, e.prototype.deleteNode = function(t) {
      var n = this.nodesMap[t].model, r = n.getData();
      this.deleteEdgeBySource(t), this.deleteEdgeByTarget(t), this.nodes.splice(this.nodesMap[t].index, 1), this.eventCenter.emit(Fe.NODE_DELETE, {
        data: r,
        model: n
      });
    }, e.prototype.addNode = function(t, n, r) {
      n === void 0 && (n = Fe.NODE_ADD);
      var i = zn(t), o = i.id;
      o && this.nodesMap[o] && delete i.id;
      var a = this.getModelAfterSnapToGrid(i);
      this.nodes.push(a);
      var s = a.getData(), l = { data: s };
      return r && (l.e = r), this.eventCenter.emit(n, l), a;
    }, e.prototype.getModelAfterSnapToGrid = function(t) {
      var n = this.getModel(t.type);
      if (!n)
        throw new Error("找不到".concat(t.type, "对应的节点，请确认是否已注册此类型节点。"));
      var r = t.x, i = t.y;
      r && i && (t.x = Is(r, this.gridSize), t.y = Is(i, this.gridSize), typeof t.text == "object" && t.text !== null && (t.text.x += t.x - r, t.text.y += t.y - i));
      var o = new n(t, this);
      return this.nodeModelMap.set(o.id, o), this.elementsModelMap.set(o.id, o), o;
    }, e.prototype.cloneNode = function(t) {
      var n = this.getNodeModelById(t), r = n == null ? void 0 : n.getData();
      if (r) {
        r.x += 30, r.y += 30, r.id = "", typeof r.text == "object" && r.text !== null && (r.text.x += 30, r.text.y += 30);
        var i = this.addNode(r);
        return i.setSelected(!0), n == null || n.setSelected(!1), i.getData();
      }
    }, e.prototype.moveNode = function(t, n, r, i) {
      var o;
      i === void 0 && (i = !1);
      var a = this.nodesMap[t];
      if (!a) {
        console.warn("不存在id为".concat(t, "的节点"));
        return;
      }
      var s = a.model;
      o = xn(s.getMoveDistance(n, r, i), 2), n = o[0], r = o[1], this.moveEdge(t, n, r);
    }, e.prototype.moveNode2Coordinate = function(t, n, r, i) {
      i === void 0 && (i = !1);
      var o = this.nodesMap[t];
      if (!o) {
        console.warn("不存在id为".concat(t, "的节点"));
        return;
      }
      var a = o.model, s = a.x, l = a.y, u = n - s, c = r - l;
      this.moveNode(t, u, c, i);
    }, e.prototype.editText = function(t) {
      this.setElementStateById(t, Pt.TEXT_EDIT);
    }, e.prototype.addEdge = function(t) {
      var n = zn(t), r = n.type;
      r || (r = this.edgeType), n.id && this.edgesMap[n.id] && delete n.id;
      var i = this.getModel(r);
      if (!i)
        throw new Error("找不到".concat(r, "对应的边，请确认是否已注册此类型边。"));
      var o = new i(Ao(Ao({}, n), { type: r }), this);
      this.edgeModelMap.set(o.id, o), this.elementsModelMap.set(o.id, o);
      var a = o.getData();
      return this.edges.push(o), this.eventCenter.emit(Fe.EDGE_ADD, { data: a }), o;
    }, e.prototype.moveEdge = function(t, n, r) {
      for (var i = 0; i < this.edges.length; i++) {
        var o = this.edges[i], a = o.textPosition, s = a.x, l = a.y, u = this.edges[i].sourceNodeId === t, c = this.edges[i].targetNodeId === t;
        u && o.moveStartPoint(n, r), c && o.moveEndPoint(n, r), (u || c) && this.handleEdgeTextMove(o, s, l);
      }
    }, e.prototype.handleEdgeTextMove = function(t, n, r) {
      var i;
      if (t.customTextPosition) {
        t.resetTextPosition();
        return;
      }
      if (t.modelType === gt.POLYLINE_EDGE && (!((i = t.text) === null || i === void 0) && i.value)) {
        var o = t.text, a = h2(o, t.points);
        t.moveText(a.x - o.x, a.y - o.y);
      }
      var s = t.textPosition, l = s.x, u = s.y;
      t.moveText(l - n, u - r);
    }, e.prototype.deleteEdgeBySourceAndTarget = function(t, n) {
      for (var r = 0; r < this.edges.length; r++)
        if (this.edges[r].sourceNodeId === t && this.edges[r].targetNodeId === n) {
          var i = this.edges[r].getData();
          this.edges.splice(r, 1), r--, this.eventCenter.emit(Fe.EDGE_DELETE, { data: i });
        }
    }, e.prototype.deleteEdgeById = function(t) {
      var n = this.edgesMap[t];
      if (n) {
        var r = this.edgesMap[t].index, i = this.edgesMap[t].model.getData();
        this.edges.splice(r, 1), this.eventCenter.emit(Fe.EDGE_DELETE, { data: i });
      }
    }, e.prototype.deleteEdgeBySource = function(t) {
      for (var n = 0; n < this.edges.length; n++)
        if (this.edges[n].sourceNodeId === t) {
          var r = this.edges[n].getData();
          this.edges.splice(n, 1), n--, this.eventCenter.emit(Fe.EDGE_DELETE, { data: r });
        }
    }, e.prototype.deleteEdgeByTarget = function(t) {
      for (var n = 0; n < this.edges.length; n++)
        if (this.edges[n].targetNodeId === t) {
          var r = this.edges[n].getData();
          this.edges.splice(n, 1), n--, this.eventCenter.emit(Fe.EDGE_DELETE, { data: r });
        }
    }, e.prototype.setElementStateById = function(t, n, r) {
      this.nodes.forEach(function(i) {
        i.id === t ? i.setElementState(n, r) : i.setElementState(Pt.DEFAULT);
      }), this.edges.forEach(function(i) {
        i.id === t ? i.setElementState(n, r) : i.setElementState(Pt.DEFAULT);
      });
    }, e.prototype.updateText = function(t, n) {
      var r = Fo(Rr(Rr([], xn(this.nodes), !1), xn(this.edges), !1), function(i) {
        return i.id === t;
      });
      r == null || r.updateText(n);
    }, e.prototype.selectNodeById = function(t, n) {
      var r;
      n === void 0 && (n = !1), n || this.clearSelectElements();
      var i = (r = this.nodesMap[t]) === null || r === void 0 ? void 0 : r.model;
      i == null || i.setSelected(!0);
    }, e.prototype.selectEdgeById = function(t, n) {
      var r;
      n === void 0 && (n = !1), n || this.clearSelectElements();
      var i = (r = this.edgesMap[t]) === null || r === void 0 ? void 0 : r.model;
      i == null || i.setSelected(!0);
    }, e.prototype.selectElementById = function(t, n) {
      n === void 0 && (n = !1), n || this.clearSelectElements();
      var r = this.getElement(t);
      r == null || r.setSelected(!0);
    }, e.prototype.clearSelectElements = function() {
      var t;
      this.selectElements.forEach(function(n) {
        n == null || n.setSelected(!1);
      }), this.selectElements.clear(), this.overlapMode === fi.DEFAULT && ((t = this.topElement) === null || t === void 0 || t.setZIndex());
    }, e.prototype.moveNodes = function(t, n, r, i) {
      var o, a, s, l = this;
      i === void 0 && (i = !1);
      for (var u = t.reduce(function(E, w) {
        var S, _ = (S = l.nodesMap[w]) === null || S === void 0 ? void 0 : S.model;
        return _ && (E[w] = _.getMoveDistance(n, r, i)), E;
      }, {}), c = 0; c < this.edges.length; c++) {
        var d = this.edges[c], f = d.textPosition, h = f.x, p = f.y, v = u[d.sourceNodeId], g = u[d.targetNodeId], y = void 0, m = void 0;
        v && g && d.modelType === gt.POLYLINE_EDGE ? (o = xn(v, 2), y = o[0], m = o[1], d.updatePointsList(y, m)) : (v && (a = xn(v, 2), y = a[0], m = a[1], d.moveStartPoint(y, m)), g && (s = xn(g, 2), y = s[0], m = s[1], d.moveEndPoint(y, m))), (v || g) && this.handleEdgeTextMove(d, h, p);
      }
    }, e.prototype.addNodeMoveRules = function(t) {
      this.nodeMoveRules.includes(t) || this.nodeMoveRules.push(t);
    }, e.prototype.addNodeResizeRules = function(t) {
      this.nodeResizeRules.includes(t) || this.nodeResizeRules.push(t);
    }, e.prototype.setDefaultEdgeType = function(t) {
      this.edgeType = t;
    }, e.prototype.changeNodeType = function(t, n) {
      var r = this.getNodeModelById(t);
      if (!r) {
        console.warn("找不到id为".concat(t, "的节点"));
        return;
      }
      var i = r.getData();
      i.type = n;
      var o = this.getModel(n);
      if (!o)
        throw new Error("找不到".concat(n, "对应的节点，请确认是否已注册此类型节点。"));
      var a = new o(i, this);
      this.nodes.splice(this.nodesMap[t].index, 1, a);
      var s = this.getNodeEdges(t);
      s.forEach(function(l) {
        if (l.sourceNodeId === t) {
          var u = Fb(a, l.startPoint, a.width, a.height);
          l.updateStartPoint(u);
        }
        if (l.targetNodeId === t) {
          var u = Fb(a, l.endPoint, a.width, a.height);
          l.updateEndPoint(u);
        }
      });
    }, e.prototype.changeEdgeType = function(t, n) {
      var r = this.getEdgeModelById(t);
      if (!r) {
        console.warn("找不到id为".concat(t, "的边"));
        return;
      }
      if (r.type !== n) {
        var i = r.getData();
        i.type = n;
        var o = this.getModel(n);
        if (!o)
          throw new Error("找不到".concat(n, "对应的节点，请确认是否已注册此类型节点。"));
        delete i.pointsList;
        var a = new o(i, this);
        this.edges.splice(this.edgesMap[t].index, 1, a);
      }
    }, e.prototype.getNodeIncomingEdge = function(t) {
      var n = [];
      return this.edges.forEach(function(r) {
        r.targetNodeId === t && n.push(r);
      }), n;
    }, e.prototype.getNodeOutgoingEdge = function(t) {
      var n = [];
      return this.edges.forEach(function(r) {
        r.sourceNodeId === t && n.push(r);
      }), n;
    }, e.prototype.getAnchorIncomingEdge = function(t) {
      var n = [];
      return this.edges.forEach(function(r) {
        r.targetAnchorId === t && n.push(r);
      }), n;
    }, e.prototype.getAnchorOutgoingEdge = function(t) {
      var n = [];
      return this.edges.forEach(function(r) {
        r.sourceAnchorId === t && n.push(r);
      }), n;
    }, e.prototype.getNodeIncomingNode = function(t) {
      var n = this, r = [];
      return this.edges.forEach(function(i) {
        var o;
        i.targetNodeId === t && r.push((o = n.nodesMap[i.sourceNodeId]) === null || o === void 0 ? void 0 : o.model);
      }), r;
    }, e.prototype.getNodeOutgoingNode = function(t) {
      var n = this, r = [];
      return this.edges.forEach(function(i) {
        i.sourceNodeId === t && r.push(n.nodesMap[i.targetNodeId].model);
      }), r;
    }, e.prototype.setTheme = function(t) {
      this.theme = zH(Ao(Ao({}, this.theme), t));
    }, e.prototype.updateGridOptions = function(t) {
      ks(this.grid, t);
    }, e.prototype.updateBackgroundOptions = function(t) {
      Cd(t) || Cd(this.background) ? this.background = t : this.background = Ao(Ao({}, this.background), t);
    }, e.prototype.resize = function(t, n) {
      this.width = t || this.rootEl.getBoundingClientRect().width, this.height = n || this.rootEl.getBoundingClientRect().height, (!this.width || !this.height) && console.warn("渲染画布的时候无法获取画布宽高，请确认在container已挂载到DOM。@see https://github.com/didi/LogicFlow/issues/675");
    }, e.prototype.clearData = function() {
      this.nodes = [], this.edges = [];
    }, e.prototype.getVirtualRectSize = function() {
      var t = this.nodes, n = [], r = [];
      t.forEach(function(f) {
        var h = f.x, p = f.y, v = f.width, g = f.height, y = f.getNodeStyle().strokeWidth, m = y === void 0 ? 0 : y, E = h + v / 2 + m, w = h - v / 2 - m, S = p + g / 2 + m, _ = p - g / 2 - m;
        n = n.concat([E, w].filter(function(b) {
          return !Number.isNaN(b);
        })), r = r.concat([S, _].filter(function(b) {
          return !Number.isNaN(b);
        }));
      });
      var i = Math.min.apply(Math, Rr([], xn(n), !1)), o = Math.max.apply(Math, Rr([], xn(n), !1)), a = Math.min.apply(Math, Rr([], xn(r), !1)), s = Math.max.apply(Math, Rr([], xn(r), !1)), l = o - i || 0, u = s - a || 0, c = i + l / 2, d = a + u / 2;
      return {
        width: l,
        height: u,
        x: c,
        y: d
      };
    }, e.prototype.translateCenter = function() {
      var t = this, n = t.nodes, r = t.width, i = t.height, o = t.rootEl, a = t.transformModel;
      if (n.length) {
        var s = r || o.clientWidth, l = i || o.clientHeight, u = this.getVirtualRectSize(), c = u.x, d = u.y;
        a.focusOn(c, d, s, l);
      }
    }, e.prototype.fitView = function(t, n) {
      t === void 0 && (t = 20), n === void 0 && (n = 20);
      var r = this, i = r.nodes, o = r.width, a = r.height, s = r.rootEl, l = r.transformModel;
      if (i.length) {
        var u = o || s.clientWidth, c = a || s.clientHeight, d = this.getVirtualRectSize(), f = d.width, h = d.height, p = d.x, v = d.y, g = (f + n) / u, y = (h + t) / c, m = 1 / Math.max(g, y), E = [u / 2, c / 2];
        l.zoom(m, E), l.focusOn(p, v, u, c);
      }
    }, e.prototype.openEdgeAnimation = function(t) {
      var n = this.getEdgeModelById(t);
      n == null || n.openEdgeAnimation();
    }, e.prototype.closeEdgeAnimation = function(t) {
      var n = this.getEdgeModelById(t);
      n == null || n.closeEdgeAnimation();
    }, e.prototype.getPartial = function() {
      return this.partial;
    }, e.prototype.setPartial = function(t) {
      this.partial = t;
    }, e.prototype.destroy = function() {
      try {
        this.waitCleanEffects.forEach(function(t) {
          t();
        });
      } catch (t) {
        console.warn("error on destroy GraphModel", t);
      }
      this.waitCleanEffects.length = 0;
    }, We([
      ie
    ], e.prototype, "width", void 0), We([
      ie
    ], e.prototype, "height", void 0), We([
      ie
    ], e.prototype, "grid", void 0), We([
      ie
    ], e.prototype, "edgeType", void 0), We([
      ie
    ], e.prototype, "nodes", void 0), We([
      ie
    ], e.prototype, "edges", void 0), We([
      ie
    ], e.prototype, "fakeNode", void 0), We([
      ie
    ], e.prototype, "overlapMode", void 0), We([
      ie
    ], e.prototype, "background", void 0), We([
      ie
    ], e.prototype, "gridSize", void 0), We([
      ie
    ], e.prototype, "transformModel", void 0), We([
      ie
    ], e.prototype, "editConfigModel", void 0), We([
      ie
    ], e.prototype, "partial", void 0), We([
      Ut
    ], e.prototype, "nodesMap", null), We([
      Ut
    ], e.prototype, "edgesMap", null), We([
      Ut
    ], e.prototype, "modelsMap", null), We([
      Ut
    ], e.prototype, "sortElements", null), We([
      Ut
    ], e.prototype, "textEditElement", null), We([
      Ut
    ], e.prototype, "selectElements", null), We([
      Ut
    ], e.prototype, "selectNodes", null), We([
      te
    ], e.prototype, "setTextMode", null), We([
      te
    ], e.prototype, "setFakeNode", null), We([
      te
    ], e.prototype, "removeFakeNode", null), We([
      te
    ], e.prototype, "setModel", null), We([
      te
    ], e.prototype, "toFront", null), We([
      te
    ], e.prototype, "setElementZIndex", null), We([
      te
    ], e.prototype, "deleteNode", null), We([
      te
    ], e.prototype, "addNode", null), We([
      te
    ], e.prototype, "cloneNode", null), We([
      te
    ], e.prototype, "moveNode", null), We([
      te
    ], e.prototype, "moveNode2Coordinate", null), We([
      te
    ], e.prototype, "editText", null), We([
      te
    ], e.prototype, "addEdge", null), We([
      te
    ], e.prototype, "moveEdge", null), We([
      te
    ], e.prototype, "deleteEdgeBySourceAndTarget", null), We([
      te
    ], e.prototype, "deleteEdgeById", null), We([
      te
    ], e.prototype, "deleteEdgeBySource", null), We([
      te
    ], e.prototype, "deleteEdgeByTarget", null), We([
      te
    ], e.prototype, "setElementStateById", null), We([
      te
    ], e.prototype, "updateText", null), We([
      te
    ], e.prototype, "selectNodeById", null), We([
      te
    ], e.prototype, "selectEdgeById", null), We([
      te
    ], e.prototype, "selectElementById", null), We([
      te
    ], e.prototype, "clearSelectElements", null), We([
      te
    ], e.prototype, "moveNodes", null), We([
      te
    ], e.prototype, "setDefaultEdgeType", null), We([
      te
    ], e.prototype, "changeNodeType", null), We([
      te
    ], e.prototype, "changeEdgeType", null), We([
      te
    ], e.prototype, "getNodeIncomingEdge", null), We([
      te
    ], e.prototype, "getNodeOutgoingEdge", null), We([
      te
    ], e.prototype, "getAnchorIncomingEdge", null), We([
      te
    ], e.prototype, "getAnchorOutgoingEdge", null), We([
      te
    ], e.prototype, "getNodeIncomingNode", null), We([
      te
    ], e.prototype, "getNodeOutgoingNode", null), We([
      te
    ], e.prototype, "setTheme", null), We([
      te
    ], e.prototype, "resize", null), We([
      te
    ], e.prototype, "clearData", null), We([
      te
    ], e.prototype, "translateCenter", null), We([
      te
    ], e.prototype, "fitView", null), We([
      te
    ], e.prototype, "openEdgeAnimation", null), We([
      te
    ], e.prototype, "closeEdgeAnimation", null), We([
      te
    ], e.prototype, "setPartial", null), e;
  }()
), ha = function() {
  return ha = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, ha.apply(this, arguments);
}, Cl = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, $V = (
  /** @class */
  function() {
    function e(t) {
      this.isShowHorizontal = !1, this.isShowVertical = !1, this.position = {
        x: 0,
        y: 0
      }, this.graphModel = t;
    }
    return e.prototype.getStyle = function() {
      return ha({}, this.graphModel.theme.snapline);
    }, e.prototype.getCenterSnapLine = function(t, n) {
      for (var r = t.x, i = t.y, o = !1, a = !1, s = 0; s < n.length; s++) {
        var l = n[s];
        if (l.id !== t.id && (r === l.x && (o = !0), i === l.y && (a = !0), o && a))
          break;
      }
      return {
        isShowVertical: o,
        isShowHorizontal: a,
        position: {
          x: r,
          y: i
        }
      };
    }, e.prototype.getHorizontalSnapline = function(t, n) {
      var r = !1, i = 0, o = t.id, a;
      if (o) {
        var s = this.graphModel.fakeNode;
        if (s && s.id === o)
          a = sr(s);
        else {
          var l = this.graphModel.getNodeModelById(o);
          l && (a = sr(l));
        }
      }
      for (var u = 0; u < n.length; u++) {
        var c = n[u];
        if (c.id !== t.id) {
          var d = sr(c);
          if (d.minY === (a == null ? void 0 : a.minY) || d.maxY === (a == null ? void 0 : a.minY)) {
            r = !0, i = a.minY;
            break;
          }
          if (d.minY === (a == null ? void 0 : a.maxY) || d.maxY === (a == null ? void 0 : a.maxY)) {
            r = !0, i = a.maxY;
            break;
          }
        }
      }
      return {
        isShowHorizontal: r,
        isShowVertical: this.isShowVertical,
        position: ha(ha({}, this.position), { y: i })
      };
    }, e.prototype.getVerticalSnapline = function(t, n) {
      var r = !1, i = 0, o = t.id, a;
      if (o) {
        var s = this.graphModel.fakeNode;
        if (s && s.id === o)
          a = sr(s);
        else {
          var l = this.graphModel.getNodeModelById(o);
          l && (a = sr(l));
        }
      }
      for (var u = 0; u < n.length; u++) {
        var c = n[u];
        if (c.id !== t.id) {
          var d = sr(c);
          if (d.minX === (a == null ? void 0 : a.minX) || d.maxX === (a == null ? void 0 : a.minX)) {
            r = !0, i = a.minX;
            break;
          }
          if (d.minX === (a == null ? void 0 : a.maxX) || d.maxX === (a == null ? void 0 : a.maxX)) {
            r = !0, i = a.maxX;
            break;
          }
        }
      }
      return {
        isShowHorizontal: this.isShowHorizontal,
        isShowVertical: r,
        position: ha(ha({}, this.position), { x: i })
      };
    }, e.prototype.getSnapLinePosition = function(t, n) {
      var r = this.getCenterSnapLine(t, n), i = r.isShowHorizontal, o = r.isShowVertical;
      if (!i) {
        var a = this.getHorizontalSnapline(t, n);
        a.isShowHorizontal && (r.isShowHorizontal = a.isShowHorizontal, r.position.y = a.position.y);
      }
      if (!o) {
        var s = this.getVerticalSnapline(t, n);
        s.isShowVertical && (r.isShowVertical = s.isShowVertical, r.position.x = s.position.x);
      }
      return r;
    }, e.prototype.setSnaplineInfo = function(t) {
      var n = t.isShowHorizontal, r = t.isShowVertical, i = t.position;
      this.position = i, this.isShowHorizontal = n, this.isShowVertical = r;
    }, e.prototype.clearSnapline = function() {
      this.position = {
        x: 0,
        y: 0
      }, this.isShowHorizontal = !1, this.isShowVertical = !1;
    }, e.prototype.setNodeSnapLine = function(t) {
      var n = this.graphModel.nodes, r = this.getSnapLinePosition(t, n);
      this.setSnaplineInfo(r);
    }, Cl([
      ie
    ], e.prototype, "isShowHorizontal", void 0), Cl([
      ie
    ], e.prototype, "isShowVertical", void 0), Cl([
      ie
    ], e.prototype, "position", void 0), Cl([
      te
    ], e.prototype, "clearSnapline", null), Cl([
      te
    ], e.prototype, "setNodeSnapLine", null), e;
  }()
), oi = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, os = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, kV = {
  false: [-1 / 0, -1 / 0, 1 / 0, 1 / 0],
  true: [-1 / 0, -1 / 0, 1 / 0, 1 / 0],
  vertical: [-1 / 0, 0, 1 / 0, 0],
  horizontal: [0, -1 / 0, 0, 1 / 0]
}, IV = (
  /** @class */
  function() {
    function e(t, n) {
      this.MINI_SCALE_SIZE = 0.2, this.MAX_SCALE_SIZE = 16, this.SCALE_X = 1, this.SKEW_Y = 0, this.SKEW_X = 0, this.SCALE_Y = 1, this.TRANSLATE_X = 0, this.TRANSLATE_Y = 0, this.ZOOM_SIZE = 0.04, this.translateLimitMinX = -1 / 0, this.translateLimitMinY = -1 / 0, this.translateLimitMaxX = 1 / 0, this.translateLimitMaxY = 1 / 0, this.eventCenter = t;
      var r = n.stopMoveGraph, i = r === void 0 ? !1 : r;
      this.updateTranslateLimits(i);
    }
    return e.prototype.setZoomMiniSize = function(t) {
      this.MINI_SCALE_SIZE = t;
    }, e.prototype.setZoomMaxSize = function(t) {
      this.MAX_SCALE_SIZE = t;
    }, e.prototype.HtmlPointToCanvasPoint = function(t) {
      var n = os(t, 2), r = n[0], i = n[1];
      return [
        (r - this.TRANSLATE_X) / this.SCALE_X,
        (i - this.TRANSLATE_Y) / this.SCALE_Y
      ];
    }, e.prototype.CanvasPointToHtmlPoint = function(t) {
      var n = os(t, 2), r = n[0], i = n[1];
      return [
        r * this.SCALE_X + this.TRANSLATE_X,
        i * this.SCALE_Y + this.TRANSLATE_Y
      ];
    }, e.prototype.moveCanvasPointByHtml = function(t, n, r) {
      var i = os(t, 2), o = i[0], a = i[1];
      return [o + n / this.SCALE_X, a + r / this.SCALE_Y];
    }, e.prototype.fixDeltaXY = function(t, n) {
      return [t / this.SCALE_X, n / this.SCALE_Y];
    }, e.prototype.getTransformStyle = function() {
      var t = [
        this.SCALE_X,
        this.SKEW_Y,
        this.SKEW_X,
        this.SCALE_Y,
        this.TRANSLATE_X,
        this.TRANSLATE_Y
      ].join(",");
      return {
        transform: "matrix(".concat(t, ")")
      };
    }, e.prototype.zoom = function(t, n) {
      t === void 0 && (t = !1);
      var r = this.SCALE_X, i = this.SCALE_Y;
      return typeof t == "number" ? (r = t, i = t) : t ? (r += this.ZOOM_SIZE, i += this.ZOOM_SIZE) : (r -= this.ZOOM_SIZE, i -= this.ZOOM_SIZE), r < this.MINI_SCALE_SIZE || r > this.MAX_SCALE_SIZE ? "".concat(this.SCALE_X * 100, "%") : (n && (this.TRANSLATE_X -= (r - this.SCALE_X) * n[0], this.TRANSLATE_Y -= (i - this.SCALE_Y) * n[1]), this.SCALE_X = r, this.SCALE_Y = i, this.emitGraphTransform("zoom"), "".concat(this.SCALE_X * 100, "%"));
    }, e.prototype.emitGraphTransform = function(t) {
      this.eventCenter.emit(Fe.GRAPH_TRANSFORM, {
        type: t,
        transform: {
          SCALE_X: this.SCALE_X,
          SKEW_Y: this.SKEW_Y,
          SKEW_X: this.SKEW_X,
          SCALE_Y: this.SCALE_Y,
          TRANSLATE_X: this.TRANSLATE_X,
          TRANSLATE_Y: this.TRANSLATE_Y
        }
      });
    }, e.prototype.resetZoom = function() {
      this.SCALE_X = 1, this.SCALE_Y = 1, this.emitGraphTransform("resetZoom");
    }, e.prototype.translate = function(t, n) {
      this.TRANSLATE_X + t <= this.translateLimitMaxX && this.TRANSLATE_X + t >= this.translateLimitMinX && (this.TRANSLATE_X += t), this.TRANSLATE_Y + n <= this.translateLimitMaxY && this.TRANSLATE_Y + n >= this.translateLimitMinY && (this.TRANSLATE_Y += n), this.emitGraphTransform("translate");
    }, e.prototype.focusOn = function(t, n, r, i) {
      var o = os(this.CanvasPointToHtmlPoint([t, n]), 2), a = o[0], s = o[1], l = os([r / 2 - a, i / 2 - s], 2), u = l[0], c = l[1];
      this.TRANSLATE_X += u, this.TRANSLATE_Y += c, this.emitGraphTransform("focusOn");
    }, e.prototype.updateTranslateLimits = function(t) {
      var n;
      n = os(Array.isArray(t) && t.length === 4 ? t : kV[t.toString()], 4), this.translateLimitMinX = n[0], this.translateLimitMinY = n[1], this.translateLimitMaxX = n[2], this.translateLimitMaxY = n[3];
    }, oi([
      ie
    ], e.prototype, "SCALE_X", void 0), oi([
      ie
    ], e.prototype, "SKEW_Y", void 0), oi([
      ie
    ], e.prototype, "SKEW_X", void 0), oi([
      ie
    ], e.prototype, "SCALE_Y", void 0), oi([
      ie
    ], e.prototype, "TRANSLATE_X", void 0), oi([
      ie
    ], e.prototype, "TRANSLATE_Y", void 0), oi([
      ie
    ], e.prototype, "ZOOM_SIZE", void 0), oi([
      te
    ], e.prototype, "zoom", null), oi([
      te
    ], e.prototype, "resetZoom", null), oi([
      te
    ], e.prototype, "translate", null), oi([
      te
    ], e.prototype, "focusOn", null), e;
  }()
), BV = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), jV = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, zV = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, FV = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
}, HV = (
  /** @class */
  function(e) {
    BV(t, e);
    function t() {
      var n = e.apply(this, FV([], zV(arguments), !1)) || this;
      return n.handleResize = function() {
        n.props.graphModel.resize();
      }, n.throttleResize = function() {
        return e2(n.handleResize, 200);
      }, n;
    }
    return t.prototype.componentDidMount = function() {
      window.addEventListener("resize", this.throttleResize);
    }, t.prototype.componentDidUpdate = function() {
      var n = this.props.graphModel.modelToGraphData();
      this.props.graphModel.eventCenter.emit(Fe.GRAPH_UPDATED, { data: n });
    }, t.prototype.componentWillUnmount = function() {
      window.removeEventListener("resize", this.throttleResize);
    }, t.prototype.getComponent = function(n, r, i) {
      i === void 0 && (i = "canvas-overlay");
      var o = this.props.getView, a = o(n.type);
      return a ? Q(a, { model: n, graphModel: r, overlay: i }, n.id) : null;
    }, t.prototype.render = function() {
      var n = this, r = this.props, i = r.graphModel, o = r.tool, a = r.options, s = r.dnd, l = r.snaplineModel, u = {};
      a.width && (u.width = "".concat(i.width, "px")), a.height && (u.height = "".concat(i.height, "px"));
      var c = i.fakeNode, d = i.editConfigModel, f = i.background, h = d.adjustEdge;
      return Q("div", { className: "lf-graph", "flow-id": i.flowId, style: u, children: [Q(fV, { graphModel: i, dnd: s, children: [Q("g", { className: "lf-base", children: Kn(i.sortElements, function(p) {
        return n.getComponent(p, i);
      }) }), c ? this.getComponent(c, i) : ""] }), Q(EV, { graphModel: i, children: [Q(OV, { graphModel: i }), h ? Q(vV, { graphModel: i }) : "", a.snapline !== !1 ? Q(MV, { snaplineModel: l }) : ""] }), Q(DV, { graphModel: i, tool: o }), f && Q(mV, { background: f }), Q(Id, { graphModel: i })] });
    }, t = jV([
      qn
    ], t), t;
  }(Et)
), VV = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Li = function() {
  return Li = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Li.apply(this, arguments);
}, WV = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, GV = (
  /** @class */
  function(e) {
    VV(t, e);
    function t() {
      var n = e.call(this) || this;
      return n.onDragStart = function(r) {
        var i = r.event, o = n.props, a = o.anchorData, s = o.nodeModel, l = o.graphModel;
        l.selectNodeById(s.id), s.autoToFront && l.toFront(s.id), l.eventCenter.emit(Fe.ANCHOR_DRAGSTART, {
          data: a,
          e: i,
          nodeModel: s
        }), n.setState({
          startX: a.x,
          startY: a.y,
          endX: a.x,
          endY: a.y
        });
      }, n.onDragging = function(r) {
        var i = r.event, o = n.props, a = o.graphModel, s = o.nodeModel, l = o.anchorData, u = a.transformModel, c = a.eventCenter, d = a.width, f = a.height, h = a.editConfigModel, p = h.autoExpand, v = h.stopMoveGraph;
        if (i) {
          var g = i.clientX, y = i.clientY, m = a.getPointByClient({
            x: g,
            y
          }), E = m.domOverlayPosition, w = E.x, S = E.y, _ = m.canvasOverlayPosition, b = _.x, T = _.y;
          n.t && Ld(n.t);
          var R = [], B = 10;
          w < 10 ? R = [B, 0] : w + 10 > d ? R = [-B, 0] : S < 10 ? R = [0, B] : S + 10 > f && (R = [0, -B]), n.setState({
            endX: b,
            endY: T,
            dragging: !0
          }), n.moveAnchorEnd(b, T), R.length > 0 && !v && p && (n.t = y2(function() {
            var K = WV(R, 2), ae = K[0], x = K[1];
            u.translate(ae, x);
            var P = n.state, L = P.endX, k = P.endY;
            n.setState({
              endX: L - ae,
              endY: k - x
            }), n.moveAnchorEnd(L - ae, k - x);
          })), c.emit(Fe.ANCHOR_DRAG, {
            data: l,
            e: i,
            nodeModel: s
          });
        }
      }, n.onDragEnd = function(r) {
        var i = r.event;
        n.t && Ld(n.t);
        var o = n.checkEnd(i);
        n.setState({
          startX: 0,
          startY: 0,
          endX: 0,
          endY: 0,
          dragging: !1
        }), n.sourceRuleResults.clear(), n.targetRuleResults.clear();
        var a = n.props, s = a.graphModel, l = a.nodeModel, u = a.anchorData;
        s.eventCenter.emit(Fe.ANCHOR_DRAGEND, {
          data: u,
          e: i,
          nodeModel: l,
          edgeModel: o ?? void 0
        });
      }, n.checkEnd = function(r) {
        var i, o = n.props, a = o.graphModel, s = o.nodeModel, l = o.anchorData, u = l.x, c = l.y, d = l.id, f = n.state, h = f.endX, p = f.endY, v = f.dragging, g = Rd({
          x: h,
          y: p
        }, a);
        if (n.preTargetNode && n.preTargetNode.state !== Pt.DEFAULT && n.preTargetNode.setElementState(Pt.DEFAULT), !!v && g && g.node) {
          var y = g.node, m = g.anchor.id, E = "".concat(s.id, "_").concat(y.id, "_").concat(m, "_").concat(d), w = n.sourceRuleResults.get(E) || {}, S = w.isAllPass, _ = w.msg, b = n.targetRuleResults.get(E) || {}, T = b.isAllPass, R = b.msg;
          if (S && T) {
            y.setElementState(Pt.DEFAULT);
            var B = a.getNodeModelById(g.node.id), K = (i = a.edgeGenerator) === null || i === void 0 ? void 0 : i.call(a, s.getData(), B == null ? void 0 : B.getData()), ae = a.addEdge(Li(Li({}, K), { sourceNodeId: s.id, sourceAnchorId: d, startPoint: {
              x: u,
              y: c
            }, targetNodeId: g.node.id, targetAnchorId: g.anchor.id, endPoint: {
              x: g.anchor.x,
              y: g.anchor.y
            } })), x = n.props.anchorData;
            return a.eventCenter.emit(Fe.ANCHOR_DROP, {
              data: x,
              e: r,
              nodeModel: s,
              edgeModel: ae
            }), ae;
          }
          var P = y.getData();
          return a.eventCenter.emit(Fe.CONNECTION_NOT_ALLOWED, {
            data: P,
            msg: R || _ || "不允许添加连线"
          }), null;
        }
      }, n.sourceRuleResults = /* @__PURE__ */ new Map(), n.targetRuleResults = /* @__PURE__ */ new Map(), n.state = {
        startX: 0,
        startY: 0,
        endX: 0,
        endY: 0,
        dragging: !1
      }, n.dragHandler = new ni({
        onDragStart: n.onDragStart,
        onDragging: n.onDragging,
        onDragEnd: n.onDragEnd
      }), n;
    }
    return t.prototype.getAnchorShape = function() {
      var n = this.props, r = n.anchorData, i = n.style, o = n.node, a = o.getAnchorShape(r);
      if (a)
        return a;
      var s = r.x, l = r.y, u = Li(Li({}, i), i == null ? void 0 : i.hover);
      return Q("g", { children: [Q(zs, Li({ className: "lf-node-anchor-hover" }, u, { x: s, y: l })), Q(zs, Li({ className: "lf-node-anchor" }, i, { x: s, y: l }))] });
    }, Object.defineProperty(t.prototype, "customTrajectory", {
      get: function() {
        var n = this.props.graphModel.customTrajectory;
        return n;
      },
      enumerable: !1,
      configurable: !0
    }), Object.defineProperty(t.prototype, "relateEdges", {
      get: function() {
        var n = this.props, r = n.graphModel, i = r.getAnchorIncomingEdge, o = r.getAnchorOutgoingEdge, a = n.anchorData.id;
        return {
          incomingEdgeList: i(a),
          outgoingEdgeList: o(a)
        };
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.moveAnchorEnd = function(n, r) {
      var i, o, a = this.props, s = a.graphModel, l = a.nodeModel, u = a.anchorData, c = Rd({
        x: n,
        y: r
      }, s);
      if (c) {
        var d = c.node, f = c.anchor.id;
        if (this.preTargetNode && this.preTargetNode !== c.node && this.preTargetNode.setElementState(Pt.DEFAULT), u.id === f)
          return;
        this.preTargetNode = d;
        var h = "".concat(l.id, "_").concat(d.id, "_").concat(f, "_").concat(u.id);
        if (!this.targetRuleResults.has(h)) {
          var p = c.anchor, v = l.isAllowConnectedAsSource(d, u, p), g = d.isAllowConnectedAsTarget(l, u, p);
          this.sourceRuleResults.set(h, Bs(v)), this.targetRuleResults.set(h, Bs(g));
        }
        var y = ((i = this.sourceRuleResults.get(h)) !== null && i !== void 0 ? i : {}).isAllPass, m = ((o = this.targetRuleResults.get(h)) !== null && o !== void 0 ? o : {}).isAllPass;
        y && m ? d.setElementState(Pt.ALLOW_CONNECT) : d.setElementState(Pt.NOT_ALLOW_CONNECT);
      } else this.preTargetNode && this.preTargetNode.state !== Pt.DEFAULT && this.preTargetNode.setElementState(Pt.DEFAULT);
    }, t.prototype.isShowLine = function() {
      var n = this.state, r = n.startX, i = n.startY, o = n.endX, a = n.endY, s = hi(r, i, o, a);
      return s > 10;
    }, t.prototype.render = function() {
      var n = this, r = this.state, i = r.startX, o = r.startY, a = r.endX, s = r.endY, l = this.props, u = l.anchorData.edgeAddable, c = l.edgeStyle;
      return (
        // className="lf-anchor" 作为下载时，需要将锚点删除的依据，不要修改类名
        Q("g", { className: "lf-anchor", children: [Q("g", { onMouseDown: function(d) {
          u !== !1 && n.dragHandler.handleMouseDown(d);
        }, children: this.getAnchorShape() }), this.isShowLine() && (this.customTrajectory ? this.customTrajectory(Li({ sourcePoint: {
          x: i,
          y: o
        }, targetPoint: {
          x: a,
          y: s
        } }, c)) : Q(js, Li({ x1: i, y1: o, x2: a, y2: s }, c, { "pointer-events": "none" })))] })
      );
    }, t;
  }(Et)
), XV = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Uv = function() {
  return Uv = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Uv.apply(this, arguments);
}, UV = (
  /** @class */
  function(e) {
    XV(t, e);
    function t(n) {
      var r = e.call(this, n) || this;
      return r.style = {}, r.onDragging = function(i) {
        var o, a = i.event, s = r.props, l = s.graphModel, u = s.nodeModel, c = s.eventCenter, d = l.selectNodes, f = u.x, h = u.y, p = a.clientX, v = a.clientY, g = l.getPointByClient({
          x: p,
          y: v
        }).canvasOverlayPosition, y = g.x, m = g.y, E = new Pn(y - f, m - h), w = ((o = r.normal) === null || o === void 0 ? void 0 : o.angle(E)) - r.defaultAngle, S = new ah(-f, -h).rotate(w).translate(f, h).toString();
        u.transform = S, u.rotate = w;
        var _ = Kn(d, function(T) {
          return T.id;
        });
        _.indexOf(u.id) === -1 && (_ = [u.id]);
        var b = US(_, function(T, R) {
          var B = l.getNodeModelById(R);
          return T[R] = B == null ? void 0 : B.getMoveDistance(0, 0, !1), T;
        }, {});
        _.forEach(function(T) {
          var R = l.getNodeEdges(T);
          R.forEach(function(B) {
            if (b[B.sourceNodeId]) {
              var K = l.getNodeModelById(B.sourceNodeId), ae = K.anchors.find(function(x) {
                return x.id === B.sourceAnchorId;
              });
              B.updateStartPoint(ae);
            }
            if (b[B.targetNodeId]) {
              var K = l.getNodeModelById(B.targetNodeId), ae = K.anchors.find(function(L) {
                return L.id === B.targetAnchorId;
              });
              B.updateEndPoint(ae);
            }
          });
        }), c.emit(Fe.NODE_ROTATE, {
          e: a,
          model: u,
          data: u.getData()
        });
      }, r.style = n.style, r.stepperDrag = new ni({
        onDragging: r.onDragging
      }), r;
    }
    return t.prototype.render = function() {
      var n = this, r = this.props.nodeModel, i = r.x, o = r.y, a = r.width, s = r.height, l = i + a / 2 + 20, u = o - s / 2 - 20;
      return this.normal = new Pn(1, 0), this.defaultAngle = this.normal.angle(new Pn(l - i, u - o)), r.defaultAngle = this.defaultAngle, Q("g", { className: "lf-rotate-control", children: Q("g", { onMouseDown: function(c) {
        n.stepperDrag.handleMouseDown(c);
      }, children: Q(zs, Uv({}, this.style, { cx: l, cy: u })) }) });
    }, t;
  }(Et)
), E2 = { exports: {} };
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/
(function(e) {
  (function() {
    var t = {}.hasOwnProperty;
    function n() {
      for (var o = "", a = 0; a < arguments.length; a++) {
        var s = arguments[a];
        s && (o = i(o, r(s)));
      }
      return o;
    }
    function r(o) {
      if (typeof o == "string" || typeof o == "number")
        return o;
      if (typeof o != "object")
        return "";
      if (Array.isArray(o))
        return n.apply(null, o);
      if (o.toString !== Object.prototype.toString && !o.toString.toString().includes("[native code]"))
        return o.toString();
      var a = "";
      for (var s in o)
        t.call(o, s) && o[s] && (a = i(a, s));
      return a;
    }
    function i(o, a) {
      return a ? o ? o + " " + a : o + a : o;
    }
    e.exports ? (n.default = n, e.exports = n) : window.classNames = n;
  })();
})(E2);
var YV = E2.exports;
const Yv = /* @__PURE__ */ Sf(YV);
var KV = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Kv = function() {
  return Kv = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Kv.apply(this, arguments);
}, qV = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, S2 = (
  /** @class */
  function(e) {
    KV(t, e);
    function t(n) {
      var r = e.call(this) || this;
      r.mouseDownHandler = function(o) {
        var a = r.props, s = a.draggable, l = a.model, u = a.graphModel, c = u.editConfigModel.nodeTextDraggable;
        (s ?? c) && (r.stepperDrag.model = l, r.stepperDrag.handleMouseDown(o));
      }, r.onDragging = function(o) {
        var a = o.deltaX, s = o.deltaY, l = r.props, u = l.model, c = l.graphModel.transformModel;
        if (a || s) {
          var d = qV(c.fixDeltaXY(a, s), 2), f = d[0], h = d[1];
          u.moveText(f, h);
        }
      }, r.dbClickHandler = function() {
        var o = r.props, a = o.editable, s = o.graphModel.eventCenter, l = o.model;
        a && l.setElementState(Pt.TEXT_EDIT), s.emit(Fe.TEXT_DBCLICK, {
          data: l.text,
          model: l
        });
      };
      var i = n.draggable;
      return r.stepperDrag = new ni({
        onDragging: r.onDragging,
        step: 1,
        // model,
        eventType: "TEXT",
        isStopPropagation: i
      }), r;
    }
    return t.prototype.getShape = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = i.editConfigModel, a = r.text, s = a.value, l = a.x, u = a.y, c = a.editable, d = a.draggable, f = {
        x: l,
        y: u,
        className: "",
        value: s
      }, h = r.getTextStyle(), p = o.nodeTextDraggable || d;
      return Q(m2, Kv({}, f, h, { className: Yv({
        "lf-element-text": c,
        "lf-text-draggable": !c && p,
        "lf-text-disabled": !c && !p
      }), model: r }));
    }, t.prototype.render = function() {
      var n = this.props.model.text;
      if (n)
        return Q("g", { onMouseDown: this.mouseDownHandler, onDblClick: this.dbClickHandler, children: this.getShape() });
    }, t;
  }(Et)
), ZV = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), ai = function() {
  return ai = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, ai.apply(this, arguments);
}, Pc = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, JV = (
  /** @class */
  function(e) {
    ZV(t, e);
    function t(n) {
      var r = e.call(this, n) || this;
      return r.setHoverOn = function() {
        r.setState({
          isHovered: !0
        });
      }, r.setHoverOff = function() {
        r.setState({
          isHovered: !1
        });
      }, r.state = {
        isHovered: !1
      }, r;
    }
    return t.prototype.getBackground = function() {
      var n = this.state.isHovered, r = this.props.model, i = r.text, o = r.getTextStyle(), a = o.background || {};
      if (n && o.hover && o.hover.background && (a = ai(ai({}, a), o.hover.background)), i != null && i.value && (a == null ? void 0 : a.fill) !== "transparent") {
        var s = o.fontSize, l = o.textWidth, u = o.lineHeight, c = o.overflowMode, d = a.wrapPadding, f = i == null ? void 0 : i.value.split(/[\r\n]/g), h = f.length, p = i.x, v = i.y, g = {};
        if (c === "autoWrap" && l) {
          var y = g2({
            rows: f,
            style: {
              fontSize: "".concat(s, "px"),
              width: "".concat(l, "px"),
              lineHeight: u,
              padding: d
            },
            rowsLength: h,
            className: "lf-get-text-height"
          });
          g = ai(ai({}, a), { x: p, y: v, width: l, height: y });
        } else {
          var m = YF({ rows: f, rowsLength: h, fontSize: s }), E = m.width, w = m.height;
          if (c === "ellipsis" && (E = l, w = s + 2), typeof a.wrapPadding == "string") {
            var S = a.wrapPadding.split(",").filter(function(Ne) {
              return Ne.trim();
            }).map(function(Ne) {
              return parseFloat(Ne.trim());
            });
            if (S.length > 0 && S.length <= 4) {
              if (S.length === 1) {
                var _ = Pc(S, 1), b = _[0];
                S = [b, b, b, b];
              } else if (S.length === 2) {
                var T = Pc(S, 2), R = T[0], B = T[1];
                S = [R, B, R, B];
              } else if (S.length === 3) {
                var K = Pc(S, 3), ae = K[0], B = K[1], x = K[2];
                S = [ae, B, x, B];
              }
              var P = Pc(S, 4), L = P[0], k = P[1], J = P[2], de = P[3];
              E += k + de, w += L + J, p = p + (k - de) / 2, v = v + (J - L) / 2;
            }
          }
          g = ai(ai({}, a), { x: p - 1, y: v - 1, width: E, height: w });
        }
        return Q(Vr, ai({}, g));
      }
      return null;
    }, t.prototype.getShape = function() {
      var n = this.props.model, r = n.text, i = r.x, o = r.y, a = r.value;
      if (!a)
        return null;
      var s = n.getTextStyle(), l = ai({ x: i, y: o, value: a, model: n, className: "lf-element-text" }, s);
      return Q("g", { className: "lf-line-text", onMouseEnter: this.setHoverOn, onMouseLeave: this.setHoverOff, children: [this.getBackground(), Q(m2, ai({}, l))] });
    }, t;
  }(S2)
), QV = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Bd = function() {
  return Bd = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Bd.apply(this, arguments);
}, eW = function(e, t) {
  var n = {};
  for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
  if (e != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, r = Object.getOwnPropertySymbols(e); i < r.length; i++)
      t.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[i]) && (n[r[i]] = e[r[i]]);
  return n;
}, Dc = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Qo = (
  /** @class */
  function(e) {
    QV(t, e);
    function t(n) {
      var r = e.call(this) || this;
      r.onDragStart = function(l) {
        var u = l.event, c = r.props, d = c.model, f = c.graphModel;
        if (u) {
          var h = f.getPointByClient({
            x: u.clientX,
            y: u.clientY
          }).canvasOverlayPosition, p = h.x, v = h.y;
          r.moveOffset = {
            dx: d.x - p,
            dy: d.y - v
          };
        }
      }, r.onDragging = function(l) {
        var u, c, d, f, h = l.event, p = r.props, v = p.model, g = p.graphModel, y = g.editConfigModel, m = y.stopMoveGraph, E = y.autoExpand, w = g.transformModel, S = g.selectNodes, _ = g.width, b = g.height, T = g.gridSize;
        v.isDragging = !0;
        var R = h, B = R.clientX, K = R.clientY, ae = g.getPointByClient({
          x: B,
          y: K
        }).canvasOverlayPosition, x = ae.x, P = ae.y, L = Dc(w.CanvasPointToHtmlPoint([x, P]), 2), k = L[0], J = L[1];
        if (x = x + ((c = (u = r.moveOffset) === null || u === void 0 ? void 0 : u.dx) !== null && c !== void 0 ? c : 0), P = P + ((f = (d = r.moveOffset) === null || d === void 0 ? void 0 : d.dy) !== null && f !== void 0 ? f : 0), x = Is(x, T), P = Is(P, T), !_ || !b) {
          g.moveNode2Coordinate(v.id, x, P);
          return;
        }
        var de = k < 0 || J < 0 || k > _ || J > b;
        if (!(E && !m && de)) {
          var Ne = Dc(w.CanvasPointToHtmlPoint([
            x - v.width / 2,
            P - v.height / 2
          ]), 2), se = Ne[0], G = Ne[1], be = Dc(w.CanvasPointToHtmlPoint([
            x + v.width / 2,
            P + v.height / 2
          ]), 2), Oe = be[0], Ae = be[1], Re = Math.max(T, 20), $ = [];
          se < 0 ? $ = [Re, 0] : Oe > g.width ? $ = [-Re, 0] : G < 0 ? $ = [0, Re] : Ae > g.height && ($ = [0, -Re]), r.t && Ld(r.t), v.transform = new ah(-x, -P).rotate(v.rotate).translate(x, P).toString();
          var re = S.map(function(ee) {
            return ee.id;
          });
          re.indexOf(v.id) === -1 && (re = [v.id]), $.length > 0 && !m && E ? r.t = y2(function() {
            var ee = Dc($, 2), _e = ee[0], xe = ee[1];
            w.translate(_e ?? 0, xe ?? 0);
            var ye = -(_e ?? 0) / w.SCALE_X, Ge = -(xe ?? 0) / w.SCALE_X;
            g.moveNodes(re, ye, Ge);
          }) : g.moveNodes(re, x - v.x, P - v.y);
        }
      }, r.onDragEnd = function() {
        r.t && Ld(r.t);
        var l = r.props.model;
        l.isDragging = !1;
      }, r.onMouseOut = function(l) {
        SF() && r.setHoverOff(l);
      }, r.handleMouseUp = function() {
        var l = r.props.model;
        r.mouseUpDrag = l.isDragging;
      }, r.handleClick = function(l) {
        var u = r.mouseUpDrag === !1;
        if (r.startTime) {
          var c = r.props, d = c.model, f = c.graphModel;
          if (u) {
            var h = d.getData(), p = f.getPointByClient({
              x: l.clientX,
              y: l.clientY
            }), v = {
              data: h,
              e: l,
              position: p,
              isSelected: !1,
              isMultiple: !1
            }, g = l.button === 2, y = l.detail === 2;
            if (!g) {
              var m = f.editConfigModel, E = p2(l, m);
              v.isMultiple = E, d.isSelected && !y && E ? (v.isSelected = !1, d.setSelected(!1)) : (f.selectNodeById(d.id, E), v.isSelected = !0, r.toFront()), y ? (m.nodeTextEdit && d.text.editable && m.textMode === Yr.TEXT && (d.setSelected(!1), f.setElementStateById(d.id, Pt.TEXT_EDIT)), f.eventCenter.emit(Fe.NODE_DBCLICK, v)) : (f.eventCenter.emit(Fe.ELEMENT_CLICK, v), f.eventCenter.emit(Fe.NODE_CLICK, v));
            }
          }
        }
      }, r.handleContextMenu = function(l) {
        l.preventDefault();
        var u = r.props, c = u.model, d = u.graphModel, f = c.getData(), h = d.getPointByClient({
          x: l.clientX,
          y: l.clientY
        });
        d.setElementStateById(c.id, Pt.SHOW_MENU, h.domOverlayPosition), c.isSelected || d.selectNodeById(c.id), d.eventCenter.emit(Fe.NODE_CONTEXTMENU, {
          data: f,
          e: l,
          position: h
        }), r.toFront();
      }, r.handleMouseDown = function(l) {
        var u = r.props, c = u.model, d = u.graphModel;
        r.startTime = (/* @__PURE__ */ new Date()).getTime();
        var f = d.editConfigModel;
        f.adjustNodePosition && c.draggable && r.stepDrag && r.stepDrag.handleMouseDown(l);
      }, r.handleFocus = function() {
        var l = r.props, u = l.model, c = l.graphModel;
        c.eventCenter.emit(Fe.NODE_FOCUS, {
          data: u.getData()
        });
      }, r.handleBlur = function() {
        var l = r.props, u = l.model, c = l.graphModel;
        c.eventCenter.emit(Fe.NODE_BLUR, {
          data: u.getData()
        });
      }, r.setHoverOn = function(l) {
        var u = r.props, c = u.model, d = u.graphModel;
        if (!c.isHovered) {
          var f = c.getData();
          c.setHovered(!0), d.eventCenter.emit(Fe.NODE_MOUSEENTER, {
            data: f,
            e: l
          });
        }
      }, r.setHoverOff = function(l) {
        var u = r.props, c = u.model, d = u.graphModel, f = c.getData();
        c.isHovered && (c.setHovered(!1), d.eventCenter.emit(Fe.NODE_MOUSELEAVE, {
          data: f,
          e: l
        }));
      };
      var i = n.graphModel, o = i.gridSize, a = i.eventCenter, s = n.model;
      return r.stepDrag = new ni({
        onDragStart: r.onDragStart,
        onDragging: r.onDragging,
        onDragEnd: r.onDragEnd,
        step: o,
        eventType: "NODE",
        isStopPropagation: !1,
        eventCenter: a,
        model: s
      }), r.modelDisposer = yx(function() {
        return r.props;
      }, function(l) {
        l && l.model && r.stepDrag.setModel(l.model);
      }), r;
    }
    return t.prototype.componentWillUnmount = function() {
      this.modelDisposer && this.modelDisposer();
    }, t.prototype.componentDidMount = function() {
    }, t.prototype.componentDidUpdate = function() {
    }, t.prototype.getAnchorShape = function(n) {
      return null;
    }, t.prototype.getAnchors = function() {
      var n = this, r = this.props, i = r.model, o = r.graphModel, a = i.isSelected, s = i.isHitable, l = i.isDragging, u = i.isShowAnchor;
      return s && (a || u) && !l ? Kn(i.anchors, function(c, d) {
        var f = i.getAnchorLineStyle(c), h = i.getAnchorStyle(c);
        return Q(GV, { anchorData: c, node: n, style: h, edgeStyle: f, anchorIndex: d, nodeModel: i, graphModel: o, setHoverOff: n.setHoverOff });
      }) : [];
    }, t.prototype.getRotateControl = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = i.editConfigModel, a = o.isSilentMode, s = o.allowRotate, l = r.isSelected, u = r.isHitable, c = r.rotatable, d = r.isHovered, f = s && c, h = r.getRotateControlStyle();
      if (!a && u && (l || d) && f)
        return Q(UV, { graphModel: i, nodeModel: r, eventCenter: i.eventCenter, style: h });
    }, t.prototype.getResizeControl = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = i.editConfigModel, a = o.isSilentMode, s = o.allowResize, l = r.isSelected, u = r.isHitable, c = r.resizable, d = r.isHovered, f = s && c, h = r.getResizeControlStyle();
      return !a && u && (l || d) && f ? Q(xH, { style: h, model: r, graphModel: i }) : null;
    }, t.prototype.getText = function() {
      var n, r = this.props, i = r.model, o = r.graphModel, a = o.editConfigModel;
      if (a.nodeTextMode !== Yr.TEXT || i.state === Pt.TEXT_EDIT)
        return null;
      if (i.text) {
        var s = !1;
        return a.nodeTextDraggable && i.text.draggable && (s = !0), Q(S2, { editable: a.nodeTextEdit && ((n = i.text.editable) !== null && n !== void 0 ? n : !0), model: i, graphModel: o, draggable: s });
      }
      return null;
    }, t.prototype.getStateClassName = function() {
      var n = this.props.model, r = n.state, i = n.isDragging, o = n.isSelected, a = "lf-node";
      switch (r) {
        case Pt.ALLOW_CONNECT:
          a += " lf-node-allow";
          break;
        case Pt.NOT_ALLOW_CONNECT:
          a += " lf-node-not-allow";
          break;
        default:
          a += " lf-node-default";
          break;
      }
      return i && (a += " lf-dragging"), o && (a += " lf-node-selected"), a;
    }, t.prototype.toFront = function() {
      var n = this.props, r = n.model, i = n.graphModel;
      r.autoToFront && i.toFront(r.id);
    }, t.prototype.render = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = i.editConfigModel, a = o.hideAnchors, s = o.adjustNodePosition, l = o.allowRotate, u = o.allowResize, c = i.gridSize, d = i.transformModel.SCALE_X, f = r.isHitable, h = r.draggable, p = r.transform, v = r.getOuterGAttributes(), g = v.className, y = g === void 0 ? "" : g, m = eW(v, ["className"]), E = Q("g", { className: "lf-node-content", children: [Q("g", { transform: p, children: [this.getShape(), this.getText(), l && this.getRotateControl(), u && this.getResizeControl()] }), !a && this.getAnchors()] }), w;
      return f ? (s && h && this.stepDrag.setStep(c * d), w = Q("g", Bd({ className: "".concat(this.getStateClassName(), " ").concat(y), onMouseDown: this.handleMouseDown, onMouseUp: this.handleMouseUp, onClick: this.handleClick, onMouseEnter: this.setHoverOn, onMouseOver: this.setHoverOn, onMouseLeave: this.setHoverOff, onMouseOut: this.onMouseOut, onContextMenu: this.handleContextMenu, onFocus: this.handleFocus, onBlur: this.handleBlur }, m, { children: E }))) : w = Q("g", Bd({ className: "".concat(this.getStateClassName(), " ").concat(y) }, m, { children: E })), w;
    }, t.isObserved = !1, t;
  }(Et)
), tW = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), qv = function() {
  return qv = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, qv.apply(this, arguments);
}, La = (
  /** @class */
  function(e) {
    tW(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.getShape = function() {
      var n = this.props.model, r = n.getNodeStyle();
      return Q(Vr, qv({}, r, { x: n.x, y: n.y, width: n.width, height: n.height, radius: n.radius }));
    }, t;
  }(Qo)
), nW = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Zv = function() {
  return Zv = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Zv.apply(this, arguments);
}, jd = (
  /** @class */
  function(e) {
    nW(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.getShape = function() {
      var n = this.props.model, r = n.x, i = n.y, o = n.r, a = n.getNodeStyle();
      return Q(zs, Zv({}, a, { x: r, y: i, r: o }));
    }, t;
  }(Qo)
), rW = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), zd = function() {
  return zd = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, zd.apply(this, arguments);
}, Fd = (
  /** @class */
  function(e) {
    rW(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.getShape = function() {
      var n = this.props.model, r = n, i = r.x, o = r.y, a = r.width, s = r.height, l = r.points, u = n.getNodeStyle(), c = {
        transform: "matrix(1 0 0 1 ".concat(i - a / 2, " ").concat(o - s / 2, ")")
      };
      return Q("g", zd({}, c, { children: Q(em, zd({}, u, { points: l, x: i, y: o })) }));
    }, t;
  }(Qo)
), iW = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Jv = function() {
  return Jv = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Jv.apply(this, arguments);
}, Qv = (
  /** @class */
  function(e) {
    iW(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.getShape = function() {
      var n = this.props.model, r = n.getNodeStyle();
      return Q("g", { children: Q(em, Jv({}, r, { points: n.points, x: n.x, y: n.y })) });
    }, t;
  }(Qo)
), oW = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), eg = function() {
  return eg = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, eg.apply(this, arguments);
}, tg = (
  /** @class */
  function(e) {
    oW(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.getShape = function() {
      var n = this.props.model, r = n.getNodeStyle();
      return Q(vH, eg({}, r, { x: n.x, y: n.y, rx: n.rx, ry: n.ry }));
    }, t;
  }(Qo)
), aW = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), ou = function() {
  return ou = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, ou.apply(this, arguments);
}, ng = (
  /** @class */
  function(e) {
    aW(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.getBackground = function() {
      var n = this.props.model, r = n.getTextStyle(), i = n.width, o = n.height, a = n.x, s = n.y, l = ou(ou({}, r.background), { x: a, y: s, width: i, height: o });
      return Q(Vr, ou({}, l));
    }, t.prototype.getResizeControl = function() {
      return null;
    }, t.prototype.getShape = function() {
      return Q("g", { children: this.getBackground() });
    }, t;
  }(Qo)
), sW = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), rg = function() {
  return rg = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, rg.apply(this, arguments);
}, lW = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, uW = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
}, ig = (
  /** @class */
  function(e) {
    sW(t, e);
    function t() {
      var n = e.apply(this, uW([], lW(arguments), !1)) || this;
      return n.ref = Mf(), n;
    }
    return Object.defineProperty(t.prototype, "rootEl", {
      get: function() {
        return this.ref.current;
      },
      enumerable: !1,
      configurable: !0
    }), t.prototype.setHtml = function(n) {
      n.appendChild(document.createElement("div"));
    }, t.prototype.confirmUpdate = function(n) {
      this.setHtml(n);
    }, t.prototype.shouldUpdate = function() {
      return this.preProperties && this.preProperties === this.currentProperties ? !1 : (this.preProperties = this.currentProperties, !0);
    }, t.prototype.componentDidMount = function() {
      this.shouldUpdate() && this.rootEl && this.setHtml(this.rootEl);
    }, t.prototype.componentDidUpdate = function() {
      this.shouldUpdate() && this.rootEl && this.confirmUpdate(this.rootEl);
    }, t.prototype.componentWillUnmount = function() {
      this.rootEl.innerHTML = "";
    }, t.prototype.getShape = function() {
      var n = this.props.model, r = n.x, i = n.y, o = n.height, a = n.width, s = n.getNodeStyle();
      return this.currentProperties = JSON.stringify(n.properties), Q("foreignObject", rg({}, s, { x: r - a / 2, y: i - o / 2, width: a, height: o, ref: this.ref }));
    }, t;
  }(Qo)
), cW = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), si = function() {
  return si = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, si.apply(this, arguments);
}, dW = function(e, t) {
  var n = {};
  for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
  if (e != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, r = Object.getOwnPropertySymbols(e); i < r.length; i++)
      t.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[i]) && (n[r[i]] = e[r[i]]);
  return n;
}, fW = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, ki;
(function(e) {
  e.SOURCE = "SOURCE", e.TARGET = "TARGET";
})(ki || (ki = {}));
var qb = (
  /** @class */
  function(e) {
    cW(t, e);
    function t(n) {
      var r = e.call(this) || this;
      r.handleMouseDown = function(l) {
        r.stepDrag && r.stepDrag.handleMouseDown(l);
      }, r.onDragStart = function() {
        var l = r.props, u = l.x, c = l.y, d = l.edgeModel, f = d.startPoint, h = d.endPoint, p = d.pointsList;
        r.oldEdge = {
          startPoint: f,
          endPoint: h,
          pointsList: p
        }, r.setState({
          endX: u,
          endY: c,
          dragging: !0
        });
      }, r.onDragging = function(l) {
        var u = l.deltaX, c = l.deltaY, d = r.state, f = d.endX, h = d.endY, p = r.props, v = p.graphModel, g = p.type, y = v.transformModel, m = v.editConfigModel, E = fW(y.moveCanvasPointByHtml([f, h], u, c), 2), w = E[0], S = E[1];
        r.setState({
          endX: w,
          endY: S,
          dragging: !0
        });
        var _ = r.props.edgeModel, b = Rd({
          x: f,
          y: h
        }, v);
        if (b && b.node && r.isAllowAdjust(b).pass) {
          var T = _.startPoint, R = _.endPoint, B = _.sourceNode, K = _.targetNode, ae = g === ki.SOURCE ? {
            startPoint: {
              x: b.anchor.x,
              y: b.anchor.y
            },
            endPoint: {
              x: R.x,
              y: R.y
            },
            sourceNode: b.node,
            targetNode: K
          } : {
            startPoint: {
              x: T.x,
              y: T.y
            },
            endPoint: {
              x: b.anchor.x,
              y: b.anchor.y
            },
            sourceNode: B,
            targetNode: b.node
          };
          _.updateAfterAdjustStartAndEnd(ae);
        } else
          g === ki.SOURCE ? _.updateStartPoint({ x: w, y: S }) : _.updateEndPoint({ x: w, y: S });
        _.text.value && m.adjustEdge && _.setText(Object.assign({}, _.text, _.textPosition));
      }, r.onDragEnd = function(l) {
        var u, c, d, f = l.event;
        try {
          r.setState({
            dragging: !1
          });
          var h = r.props, p = h.graphModel, v = h.edgeModel, g = h.type, y = r.state, m = y.endX, E = y.endY, w = y.dragging, S = Rd({
            x: m,
            y: E
          }, p);
          if (!w)
            return;
          var _ = !1, b = void 0;
          if (S && S.node) {
            var T = r.isAllowAdjust(S), R = T.pass, B = T.msg, K = T.newTargetNode;
            if (R) {
              var ae = v.getData(), x = ae.text, P = ae.sourceAnchorId, L = P === void 0 ? "" : P, k = ae.targetAnchorId, J = k === void 0 ? "" : k, de = dW(ae, ["text", "sourceAnchorId", "targetAnchorId"]);
              if (b = si(si({ sourceAnchorId: L, targetAnchorId: J }, de), { text: (x == null ? void 0 : x.value) || "" }), g === ki.SOURCE) {
                var Ne = p.getNodeModelById(S.node.id), se = p.getNodeModelById(v.targetNodeId), G = (u = p.edgeGenerator) === null || u === void 0 ? void 0 : u.call(p, Ne == null ? void 0 : Ne.getData(), se == null ? void 0 : se.getData(), b);
                b = si(si({}, G), { sourceNodeId: S.node.id, sourceAnchorId: S.anchor.id, startPoint: {
                  x: S.anchor.x,
                  y: S.anchor.y
                }, targetNodeId: v.targetNodeId, endPoint: si({}, v.endPoint) }), v.sourceNodeId === S.node.id && v.sourceAnchorId === S.anchor.id && (_ = !0);
              } else if (g === ki.TARGET) {
                var Ne = p.getNodeModelById(v.sourceNodeId), se = p.getNodeModelById(S.node.id), G = (c = p.edgeGenerator) === null || c === void 0 ? void 0 : c.call(p, Ne == null ? void 0 : Ne.getData(), se == null ? void 0 : se.getData(), b);
                b = si(si({}, G), { sourceNodeId: v.sourceNodeId, startPoint: si({}, v.startPoint), targetNodeId: S.node.id, targetAnchorId: S.anchor.id, endPoint: {
                  x: S.anchor.x,
                  y: S.anchor.y
                } }), v.targetNodeId === S.node.id && v.targetAnchorId === S.anchor.id && (_ = !0);
              }
            } else {
              _ = !0;
              var be = K.getData();
              p.eventCenter.emit(Fe.CONNECTION_NOT_ALLOWED, {
                data: be,
                msg: B
              });
            }
          } else
            _ = !0;
          if (_)
            r.recoveryEdge();
          else {
            var Oe = v.getData();
            p.deleteEdgeById(v.id);
            var Ae = p.addEdge(si({}, b));
            p.eventCenter.emit(Fe.EDGE_EXCHANGE_NODE, {
              data: {
                newEdge: Ae.getData(),
                oldEdge: Oe
              }
            });
          }
          (d = r.preTargetNode) === null || d === void 0 || d.setElementState(Pt.DEFAULT);
        } finally {
          var p = r.props.graphModel;
          p.eventCenter.emit(Fe.ADJUST_POINT_DRAGEND, {
            e: f,
            data: r.stepDragData
          });
        }
      }, r.recoveryEdge = function() {
        var l = r.props.edgeModel, u = r.oldEdge, c = u.startPoint, d = u.endPoint, f = u.pointsList;
        l.updateStartPoint(c), l.updateEndPoint(d), l.modelType !== gt.LINE_EDGE && (l.pointsList = f ?? [], l.initPoints());
      }, r.getAdjustPointStyle = function() {
        var l = r.props.graphModel.theme, u = l.edgeAdjust;
        return u;
      }, r.state = {
        dragging: !1,
        endX: 0,
        endY: 0
      }, r.targetRuleResults = /* @__PURE__ */ new Map(), r.sourceRuleResults = /* @__PURE__ */ new Map();
      var i = n.type, o = n.edgeModel, a = n.graphModel, s = a.eventCenter;
      return r.stepDragData = {
        type: i,
        edgeData: o.getData()
      }, r.stepDrag = new ni({
        onDragStart: r.onDragStart,
        onDragging: r.onDragging,
        onDragEnd: r.onDragEnd,
        eventType: "ADJUST_POINT",
        isStopPropagation: !1,
        eventCenter: s,
        data: r.stepDragData
      }), r;
    }
    return t.prototype.isAllowAdjust = function(n) {
      var r = this.props, i = r.edgeModel, o = i.id, a = i.sourceNode, s = i.targetNode, l = i.sourceAnchorId, u = i.targetAnchorId, c = r.type, d, f, h, p;
      if (c === ki.SOURCE ? (d = n.node, f = s, h = n.anchor, p = s.getAnchorInfo(u)) : (d = a, f = n.node, p = n.anchor, h = a.getAnchorInfo(l)), this.preTargetNode && this.preTargetNode !== n.node && this.preTargetNode.setElementState(Pt.DEFAULT), this.preTargetNode = n.node, p.id === h.id)
        return {
          pass: !1,
          msg: "",
          newTargetNode: f
        };
      var v = "".concat(d.id, "_").concat(f.id, "_").concat(h.id, "_").concat(p.id);
      if (!this.targetRuleResults.has(v)) {
        var g = d.isAllowConnectedAsSource(f, h, p, o), y = f.isAllowConnectedAsTarget(d, h, p, o);
        this.sourceRuleResults.set(v, Bs(g)), this.targetRuleResults.set(v, Bs(y));
      }
      var m = this.sourceRuleResults.get(v), E = m.isAllPass, w = m.msg, S = this.targetRuleResults.get(v), _ = S.isAllPass, b = S.msg, T = E && _ ? Pt.ALLOW_CONNECT : Pt.NOT_ALLOW_CONNECT;
      return c === ki.SOURCE ? d.setElementState(T) : f.setElementState(T), {
        pass: E && _,
        msg: b || w,
        newTargetNode: f
      };
    }, t.prototype.render = function() {
      var n = this.props, r = n.x, i = n.y, o = n.getAdjustPointShape, a = n.edgeModel, s = this.state.dragging;
      return Q("g", { pointerEvents: s ? "none" : "", onMouseDown: this.handleMouseDown, children: s ? "" : o(r, i, a) });
    }, t;
  }(Et)
), hW = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), og = function() {
  return og = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, og.apply(this, arguments);
};
(function(e) {
  hW(t, e);
  function t() {
    return e !== null && e.apply(this, arguments) || this;
  }
  return t.prototype.getArrowAttributes = function() {
    var n = this.props, r = n.arrowInfo, i = n.style, o = r.start, a = r.end, s = {
      start: o,
      end: a,
      offset: i.offset,
      verticalLength: i.verticalLength,
      type: "end"
    }, l = Nu(s), u = l.leftX, c = l.leftY, d = l.rightX, f = l.rightY;
    return og({ d: "M".concat(u, " ").concat(c, " L").concat(a.x, " ").concat(a.y, " L").concat(d, " ").concat(f, " z") }, i);
  }, t.prototype.getShape = function() {
    var n = this.getArrowAttributes(), r = n.d, i = n.strokeWidth, o = n.stroke, a = n.fill;
    return Q(Pu, { d: r, fill: a, strokeWidth: i, stroke: o });
  }, t.prototype.render = function() {
    return Q("g", { className: "lf-arrow", children: this.getShape() });
  }, t;
})(Et);
var pW = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), au = function() {
  return au = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, au.apply(this, arguments);
}, vW = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, lh = (
  /** @class */
  function(e) {
    pW(t, e);
    function t() {
      var n = e.call(this) || this;
      return n.textRef = Mf(), n.handleHover = function(r, i) {
        var o = n.props, a = o.model, s = o.graphModel.eventCenter;
        a.setHovered(r);
        var l = r ? Fe.EDGE_MOUSEENTER : Fe.EDGE_MOUSELEAVE, u = a.getData();
        s.emit(l, {
          data: u,
          e: i
        });
      }, n.setHoverOn = function(r) {
        var i = n.props.model.isHovered;
        i || (n.textRef && n.textRef.current && n.textRef.current.setHoverOn(), n.handleHover(!0, r));
      }, n.setHoverOff = function(r) {
        var i = n.props.model.isHovered;
        i && (n.textRef && n.textRef.current && n.textRef.current.setHoverOff(), n.handleHover(!1, r));
      }, n.handleContextMenu = function(r) {
        r.preventDefault(), n.contextMenuTime = (/* @__PURE__ */ new Date()).getTime(), n.clickTimer && clearTimeout(n.clickTimer);
        var i = n.props, o = i.model, a = i.graphModel, s = a.getPointByClient({
          x: r.clientX,
          y: r.clientY
        });
        a.setElementStateById(o.id, Pt.SHOW_MENU, s.domOverlayPosition), n.toFront(), o.isSelected || a.selectEdgeById(o.id);
        var l = o == null ? void 0 : o.getData();
        a.eventCenter.emit(Fe.EDGE_CONTEXTMENU, {
          data: l,
          e: r,
          position: s
        });
      }, n.handleMouseDown = function(r) {
        r.stopPropagation(), n.startTime = (/* @__PURE__ */ new Date()).getTime();
      }, n.handleMouseUp = function() {
        var r = n.props.model;
        n.mouseUpDrag = r.isDragging;
      }, n.handleClick = function(r) {
        if (n.startTime && !n.mouseUpDrag) {
          var i = r.button === 2;
          if (!i) {
            var o = r.detail === 2, a = n.props, s = a.model, l = a.graphModel, u = s == null ? void 0 : s.getData(), c = l.getPointByClient({
              x: r.clientX,
              y: r.clientY
            });
            if (o) {
              var d = l.editConfigModel, f = l.textEditElement, h = s.id, p = s.text, v = s.modelType;
              if (f && f.id === h && l.setElementStateById(h, Pt.DEFAULT), d.edgeTextEdit && p.editable && (s.setSelected(!1), l.setElementStateById(h, Pt.TEXT_EDIT)), v === gt.POLYLINE_EDGE) {
                var g = s, y = l.getPointByClient({
                  x: r.x,
                  y: r.y
                }).canvasOverlayPosition, m = y.x, E = y.y;
                g.dbClickPosition = h2({
                  x: m,
                  y: E
                }, g.points);
              }
              l.eventCenter.emit(Fe.EDGE_DBCLICK, {
                data: u,
                e: r,
                position: c
              });
            } else
              l.eventCenter.emit(Fe.ELEMENT_CLICK, {
                data: u,
                e: r,
                position: c
              }), l.eventCenter.emit(Fe.EDGE_CLICK, {
                data: u,
                e: r,
                position: c
              });
            var w = l.editConfigModel;
            l.selectEdgeById(s.id, p2(r, w)), n.toFront();
          }
        }
      }, n.handleFocus = function() {
        var r = n.props, i = r.model, o = r.graphModel;
        o.eventCenter.emit(Fe.EDGE_FOCUS, {
          data: i.getData()
        });
      }, n.handleBlur = function() {
        var r = n.props, i = r.model, o = r.graphModel;
        o.eventCenter.emit(Fe.EDGE_BLUR, {
          data: i.getData()
        });
      }, n;
    }
    return t.prototype.getShape = function() {
      return Q("g", { children: this.getEdge() });
    }, t.prototype.getTextStyle = function() {
    }, t.prototype.getText = function() {
      var n, r = this.props, i = r.model, o = r.graphModel, a = o.editConfigModel;
      if (a.edgeTextMode !== Yr.TEXT || i.state === Pt.TEXT_EDIT)
        return null;
      if (i.text) {
        var s = !1;
        return a.edgeTextDraggable && i.text.draggable && (s = !0), Q(JV, { ref: this.textRef, editable: a.edgeTextEdit && ((n = i.text.editable) !== null && n !== void 0 ? n : !0), model: i, graphModel: o, draggable: s });
      }
      return null;
    }, t.prototype.getArrowInfo = function() {
      var n = this.props.model, r = n.startPoint, i = n.endPoint, o = n.isSelected, a = this.state.hover;
      return {
        start: r,
        end: i,
        hover: a,
        isSelected: o
      };
    }, t.prototype.getLastTwoPoints = function() {
      var n = this.props.model, r = n.startPoint, i = n.endPoint;
      return [r, i];
    }, t.prototype.getArrowStyle = function() {
      return console.error("getArrowStyle is deprecated in 1.2.0, please use model.getArrowStyle"), null;
    }, t.prototype.getArrow = function() {
      var n = this.props.model, r = n.id, i = n.getArrowStyle(), o = i.refY, a = o === void 0 ? 0 : o, s = i.refX, l = s === void 0 ? 2 : s, u = vW(this.getLastTwoPoints(), 2), c = u[0], d = u[1], f = "auto";
      return c !== null && d !== null && (f = BH(IH({
        x: d.x - c.x,
        y: d.y - c.y,
        z: 0
      }))), Q("g", { children: Q("defs", { children: [Q("marker", { id: "marker-start-".concat(r), refX: -l, refY: a, overflow: "visible", orient: "auto", markerUnits: "userSpaceOnUse", children: this.getStartArrow() }), Q("marker", { id: "marker-end-".concat(r), refX: l, refY: a, overflow: "visible", orient: f, markerUnits: "userSpaceOnUse", children: this.getEndArrow() })] }) });
    }, t.prototype.getStartArrow = function() {
      return Q("path", {});
    }, t.prototype.getEndArrow = function() {
      var n = this.props.model, r = n.getArrowStyle(), i = r.stroke, o = r.strokeWidth, a = r.offset, s = r.verticalLength;
      return Q("path", { stroke: i, fill: i, strokeWidth: o, transform: "rotate(180)", d: "M 0 0 L ".concat(a, " -").concat(s, " L ").concat(a, " ").concat(s, " Z") });
    }, t.prototype.getAdjustPointShape = function(n, r, i) {
      var o = i.getAdjustPointStyle();
      return Q(zs, au({ className: "lf-edge-adjust-point" }, o, { x: n, y: r }));
    }, t.prototype.getAdjustPoints = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = i.editConfigModel, a = o.adjustEdgeStartAndEnd, s = o.adjustEdgeStart, l = o.adjustEdgeEnd, u = r.getAdjustStart(), c = r.getAdjustEnd();
      return Q("g", { children: [a && s && Q(qb, au({ type: ki.SOURCE }, u, { getAdjustPointShape: this.getAdjustPointShape, edgeModel: r, graphModel: i })), a && l && Q(qb, au({ type: ki.TARGET }, c, { getAdjustPointShape: this.getAdjustPointShape, edgeModel: r, graphModel: i }))] });
    }, t.prototype.getAnimation = function() {
      console.error("getAnimation is deprecated in 1.2.0, please use model.getEdgeAnimationStyle");
    }, t.prototype.getAppendWidth = function() {
      return Q("g", {});
    }, t.prototype.getAppend = function() {
      return Q("g", { className: "lf-edge-append", children: this.getAppendWidth() });
    }, t.prototype.getEdge = function() {
      return null;
    }, t.prototype.toFront = function() {
      var n = this.props, r = n.graphModel, i = n.model;
      r.toFront(i.id);
    }, t.prototype.render = function() {
      var n = this.props.model, r = n.isSelected, i = n.isHitable, o = n.isShowAdjustPoint;
      return Q("g", { children: [Q("g", { className: [
        "lf-edge",
        !i && "pointer-none",
        r && "lf-edge-selected"
      ].filter(Boolean).join(" "), onMouseDown: this.handleMouseDown, onMouseUp: this.handleMouseUp, onClick: this.handleClick, onContextMenu: this.handleContextMenu, onMouseOver: this.setHoverOn, onMouseEnter: this.setHoverOn, onMouseLeave: this.setHoverOff, onFocus: this.handleFocus, onBlur: this.handleBlur, children: [this.getShape(), this.getAppend(), this.getText(), this.getArrow()] }), o && r ? this.getAdjustPoints() : ""] });
    }, t.isObserved = !1, t;
  }(Et)
), gW = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), ag = function() {
  return ag = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, ag.apply(this, arguments);
}, yW = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, sg = (
  /** @class */
  function(e) {
    gW(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.getEdge = function() {
      var n = this.props.model, r = n.getEdgeStyle(), i = n, o = i.path, a = i.isAnimation, s = i.arrowConfig, l = n.getEdgeAnimationStyle(), u = l.strokeDasharray, c = l.stroke, d = l.strokeDashoffset, f = l.animationName, h = l.animationDuration, p = l.animationIterationCount, v = l.animationTimingFunction, g = l.animationDirection;
      return Q(Pu, ag({ d: o }, r, s, a ? {
        strokeDasharray: u,
        stroke: c,
        style: {
          strokeDashoffset: d,
          animationName: f,
          animationDuration: h,
          animationIterationCount: p,
          animationTimingFunction: v,
          animationDirection: g
        }
      } : {}));
    }, t.prototype.getAppendWidth = function() {
      var n = this.props.model.path;
      return Q(Pu, { d: n, strokeWidth: 10, stroke: "transparent", fill: "none" });
    }, t.prototype.getArrowInfo = function() {
      var n = this.props.model, r = this.state.hover, i = n.isSelected, o = n.getArrowStyle().offset, a = n.pointsList.map(function(d) {
        return {
          x: d.x,
          y: d.y
        };
      }), s = yW($b(a, o), 2), l = s[0], u = s[1], c = {
        start: l,
        end: u,
        hover: r,
        isSelected: i
      };
      return c;
    }, t.prototype.getLastTwoPoints = function() {
      var n = this.props.model, r = n.getArrowStyle().offset, i = n.pointsList.map(function(o) {
        return {
          x: o.x,
          y: o.y
        };
      });
      return $b(i, r);
    }, t;
  }(lh)
), mW = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), lg = function() {
  return lg = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, lg.apply(this, arguments);
}, ug = (
  /** @class */
  function(e) {
    mW(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.getEdge = function() {
      var n = this.props.model, r = n.startPoint, i = n.endPoint, o = n.isAnimation, a = n.arrowConfig, s = n.getEdgeStyle(), l = n.getEdgeAnimationStyle(), u = l.strokeDasharray, c = l.stroke, d = l.strokeDashoffset, f = l.animationName, h = l.animationDuration, p = l.animationIterationCount, v = l.animationTimingFunction, g = l.animationDirection;
      return Q(js, lg({}, s, { x1: r.x, y1: r.y, x2: i.x, y2: i.y }, a, o ? {
        strokeDasharray: u,
        stroke: c,
        style: {
          strokeDashoffset: d,
          animationName: f,
          animationDuration: h,
          animationIterationCount: p,
          animationTimingFunction: v,
          animationDirection: g
        }
      } : {}));
    }, t.prototype.getAppendWidth = function() {
      var n = this.props.model, r = n.startPoint, i = n.endPoint, o = {
        start: r,
        end: i
      }, a = GF(o), s = a.d, l = a.strokeWidth, u = a.fill, c = a.strokeDasharray, d = a.stroke;
      return Q(Pu, { d: s, fill: u, strokeWidth: l, stroke: d, strokeDasharray: c });
    }, t;
  }(lh)
), _W = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), pa = function() {
  return pa = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, pa.apply(this, arguments);
}, bW = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Vs = (
  /** @class */
  function(e) {
    _W(t, e);
    function t() {
      var n = e.call(this) || this;
      return n.onDragStart = function() {
        var r = n.props.model;
        r.dragAppendStart(), n.isShowAdjustPointTemp = r.isShowAdjustPoint, r.isShowAdjustPoint = !1;
      }, n.onDragging = function(r) {
        var i = r.deltaX, o = r.deltaY, a = n.props, s = a.model, l = a.graphModel;
        n.isDragging = !0;
        var u = l.transformModel, c = l.editConfigModel, d = bW(u.fixDeltaXY(i, o), 2), f = d[0], h = d[1], p = s, v = c.adjustEdgeMiddle;
        v ? n.appendInfo = p.dragAppendSimple(n.appendInfo, {
          x: f,
          y: h
        }) : n.appendInfo = p.dragAppend(n.appendInfo, {
          x: f,
          y: h
        });
      }, n.onDragEnd = function() {
        var r, i = n.props, o = i.model, a = i.graphModel.eventCenter, s = o;
        s.dragAppendEnd(), n.isDragging = !1, s.isShowAdjustPoint = (r = n.isShowAdjustPointTemp) !== null && r !== void 0 ? r : !1, n.appendInfo = void 0, a.emit(Fe.EDGE_ADJUST, { data: s.getData() });
      }, n.beforeDragStart = function(r, i) {
        i.draggable && n.drag.handleMouseDown(r), n.appendInfo = i;
      }, n.drag = new ni({
        onDragStart: n.onDragStart,
        onDragging: n.onDragging,
        onDragEnd: n.onDragEnd,
        isStopPropagation: !1
      }), n;
    }
    return t.prototype.getEdge = function() {
      var n = this.props.model, r = n.points, i = n.isAnimation, o = n.arrowConfig, a = n.getEdgeStyle(), s = n.getEdgeAnimationStyle(), l = s.strokeDasharray, u = s.stroke, c = s.strokeDashoffset, d = s.animationName, f = s.animationDuration, h = s.animationIterationCount, p = s.animationTimingFunction, v = s.animationDirection;
      return Q(mH, pa({ points: r }, a, o, i ? {
        strokeDasharray: l,
        stroke: u,
        style: {
          strokeDashoffset: c,
          animationName: d,
          animationDuration: f,
          animationIterationCount: h,
          animationTimingFunction: p,
          animationDirection: v
        }
      } : {}));
    }, t.prototype.getArrowInfo = function() {
      var n = this.props.model, r = n.points, i = n.isSelected, o = this.state.hover, a = Ra(r), s = a[0], l = a[0];
      return a.length >= 2 && (s = a[a.length - 2], l = a[a.length - 1]), {
        start: s,
        end: l,
        hover: o,
        isSelected: i
      };
    }, t.prototype.getLastTwoPoints = function() {
      var n = this.props.model, r = n.points, i = Ra(r), o = i[0], a = i[0];
      return i.length >= 2 && (o = i[i.length - 2], a = i[i.length - 1]), [o, a];
    }, t.prototype.getAppendAttributes = function(n) {
      var r = n.start, i = n.end, o;
      if (r.x === i.x && r.y === i.y)
        o = "";
      else {
        var a = {
          start: r,
          end: i,
          offset: 10,
          verticalLength: 5
        }, s = Nu(pa(pa({}, a), { type: "start" })), l = Nu(pa(pa({}, a), { type: "end" }));
        o = "M".concat(s.leftX, " ").concat(s.leftY, `
      L`).concat(s.rightX, " ").concat(s.rightY, `
      L`).concat(l.rightX, " ").concat(l.rightY, `
      L`).concat(l.leftX, " ").concat(l.leftY, " z");
      }
      return {
        d: o,
        fill: "transparent",
        stroke: "transparent",
        strokeWidth: 1,
        strokeDasharray: "4, 4"
      };
    }, t.prototype.getAppendShape = function(n) {
      var r = this.getAppendAttributes(n), i = r.d, o = r.strokeWidth, a = r.fill, s = r.strokeDasharray, l = r.stroke;
      return Q(Pu, { d: i, fill: a, strokeWidth: o, stroke: l, strokeDasharray: s });
    }, t.prototype.getAppendWidth = function() {
      for (var n = this, r = this.props, i = r.model, o = r.graphModel, a = i.pointsList, s = i.draggable, l = [], u = a.length, c = function(h) {
        var p = "lf-polyline-append", v = {
          start: {
            x: a[h].x,
            y: a[h].y
          },
          end: {
            x: a[h + 1].x,
            y: a[h + 1].y
          },
          startIndex: h,
          endIndex: h + 1,
          direction: qt.HORIZONTAL,
          draggable: !0
        }, g = Q("g", { className: p, children: d.getAppendShape(v) }), y = o.editConfigModel, m = y.adjustEdge, E = y.adjustEdgeMiddle;
        if (m && s) {
          var w = v.startIndex, S = v.endIndex, _ = E && (w === 0 || S === u - 1);
          v.draggable = !_, v.start.x === v.end.x ? (v.draggable && (p += "-ew-resize"), v.direction = qt.VERTICAL) : v.start.y === v.end.y && (v.draggable && (p += "-ns-resize"), v.direction = qt.HORIZONTAL), g = Q("g", { className: d.isDragging ? "lf-dragging" : "lf-drag-able", onMouseDown: function(b) {
            return n.beforeDragStart(b, v);
          }, children: Q("g", { className: p, children: d.getAppendShape(v) }) });
        }
        l.push(g);
      }, d = this, f = 0; f < u - 1; f++)
        c(f);
      return Q("g", { children: l });
    }, t;
  }(lh)
), ps = function() {
  return ps = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, ps.apply(this, arguments);
}, wW = (
  /** @class */
  function() {
    function e(t) {
      var n = this;
      this.nodeConfig = null, this.fakeNode = null, this.stopDrag = function() {
        n.nodeConfig = null, window.document.removeEventListener("mouseup", n.stopDrag);
      }, this.dragEnter = function(i) {
        !n.nodeConfig || n.fakeNode || (n.fakeNode = n.lf.createFakeNode(ps(ps({}, n.nodeConfig), n.clientToLocalPoint({
          x: i.clientX,
          y: i.clientY
        }))));
      }, this.onDragOver = function(i) {
        if (i.preventDefault(), n.fakeNode) {
          var o = n.clientToLocalPoint({
            x: i.clientX,
            y: i.clientY
          }), a = o.x, s = o.y;
          n.fakeNode.moveTo(a, s);
          var l = n.fakeNode.getData();
          n.lf.setNodeSnapLine(l), n.lf.graphModel.eventCenter.emit(Fe.NODE_DND_DRAG, {
            data: l,
            e: i
          });
        }
        return !1;
      }, this.onDragLeave = function() {
        n.fakeNode && (n.lf.removeNodeSnapLine(), n.lf.graphModel.removeFakeNode(), n.fakeNode = null);
      }, this.onDrop = function(i) {
        !n.lf.graphModel || !i || !n.nodeConfig || (n.lf.addNode(ps(ps({}, n.nodeConfig), n.clientToLocalPoint({
          x: i.clientX,
          y: i.clientY
        })), Fe.NODE_DND_ADD, i), i.preventDefault(), i.stopPropagation(), n.nodeConfig = null, n.lf.removeNodeSnapLine(), n.lf.graphModel.removeFakeNode(), n.fakeNode = null);
      };
      var r = t.lf;
      this.lf = r;
    }
    return e.prototype.clientToLocalPoint = function(t) {
      var n = t.x, r = t.y, i = al(this.lf.options, ["grid", "size"]), o = this.lf.graphModel.getPointByClient({
        x: n,
        y: r
      }), a = o.canvasOverlayPosition, s = a.x, l = a.y;
      return {
        x: Is(s, i),
        y: Is(l, i)
      };
    }, e.prototype.startDrag = function(t) {
      var n = this.lf.graphModel.editConfigModel;
      n != null && n.isSilentMode || (this.nodeConfig = t, window.document.addEventListener("mouseup", this.stopDrag));
    }, e.prototype.eventMap = function() {
      return {
        onMouseEnter: this.dragEnter,
        onMouseOver: this.dragEnter,
        // IE11
        onMouseMove: this.onDragOver,
        onMouseLeave: this.onDragLeave,
        // onMouseOut: this.onDragLeave, // IE11
        onMouseUp: this.onDrop
      };
    }, e;
  }()
);
function xW(e, t) {
  e.on("node:mousemove", function(n) {
    var r = n.data;
    t.setNodeSnapLine(r);
  }), e.on("node:mouseup", function() {
    t.clearSnapline();
  });
}
var EW = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), io = function() {
  return io = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, io.apply(this, arguments);
}, SW = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, CW = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, OW = (
  /** @class */
  function(e) {
    EW(t, e);
    function t(n) {
      var r = e.call(this, n) || this;
      return r.ref = Mf(), r.__prevText = {
        type: "",
        text: "",
        id: ""
      }, r.keyupHandler = function(i) {
        var o = r.props.graphModel.textEditElement;
        i.key === "Enter" && i.altKey && (o == null || o.setElementState(Pt.DEFAULT));
      }, r.inputHandler = function(i) {
        var o = i.target.innerText, a = r.props.graphModel.textEditElement;
        a && (r.__prevText = {
          type: a.type,
          text: o.replace(/(\r\n)+$|(\n)+$/, ""),
          // fix #488: 文本后面的换行符不保留
          id: a.id
        });
      }, r.keydownHandler = function(i) {
        i.stopPropagation();
      }, r.state = {
        style: {
          left: 0,
          top: 0
        }
      }, r;
    }
    return t.getDerivedStateFromProps = function(n) {
      var r, i = n.textEditElement, o = n.graphModel, a = o.transformModel, s = o.theme, l = s.inputText, u;
      if (i) {
        if (!(!((r = i.text) === null || r === void 0) && r.value) && i.BaseType === un.EDGE) {
          var c = i.text, d = i.textPosition, f = d.x, h = d.y;
          c.x = f, c.y = h, i.setText(c);
        }
        var p = {
          resize: "auto",
          whiteSpace: "normal",
          wordBreak: "break-all"
        };
        if (i.BaseType === un.EDGE) {
          var v = s.edgeText, g = v.overflowMode, y = v.lineHeight, m = v.wrapPadding, E = v.textWidth;
          E && g === "autoWrap" && (u = io(io({}, p), { width: E, minWidth: E, lineHeight: y, padding: m }));
        } else if (i.BaseType === un.NODE) {
          var w = s.nodeText, g = w.overflowMode, y = w.lineHeight, m = w.wrapPadding, E = w.textWidth, S = i.width, _ = i.modelType, b = i.textWidth, T = b || E || S;
          (_ !== gt.TEXT_NODE && g === "autoWrap" || _ === gt.TEXT_NODE && E) && (u = io(io({}, p), { width: T, minWidth: T, lineHeight: y, padding: m }));
        }
        var R = i.text, B = R.x, K = R.y, ae = CW(a.CanvasPointToHtmlPoint([B, K]), 2), x = ae[0], P = ae[1];
        return {
          style: io(io({ left: x, top: P }, u), l)
        };
      }
      return null;
    }, t.prototype.componentDidUpdate = function() {
      var n = this.props.graphModel;
      if (this.ref.current && (this.ref.current.focus(), this.placeCaretAtEnd(this.ref.current)), this.__prevText.id !== "") {
        var r = this.__prevText, i = r.text, o = r.id;
        n.updateText(o, i), n.eventCenter.emit(Fe.TEXT_UPDATE, {
          data: io({}, this.__prevText)
        }), this.__prevText.id = "", this.__prevText.text = "", this.__prevText.type = "";
      }
    }, t.prototype.placeCaretAtEnd = function(n) {
      if (window.getSelection !== void 0 && document.createRange !== void 0) {
        var r = document.createRange();
        r.selectNodeContents(n), r.collapse(!1);
        var i = window.getSelection();
        i == null || i.removeAllRanges(), i == null || i.addRange(r);
      }
    }, t.prototype.render = function() {
      var n, r = this.props.graphModel.textEditElement, i = this.state.style;
      return r ? Q("div", { contentEditable: !0, className: "lf-text-input", style: i, ref: this.ref, onKeyUp: this.keyupHandler, onKeyDown: this.keydownHandler, onKeyPress: this.keydownHandler, onInput: this.inputHandler, children: (n = r.text) === null || n === void 0 ? void 0 : n.value }, r.id) : null;
    }, t.toolName = "text-edit-tool", t = SW([
      qn
    ], t), t;
  }(Et)
), AW = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), NW = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, Op = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, MW = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
}, TW = (
  /** @class */
  function(e) {
    AW(t, e);
    function t(n) {
      var r = e.call(this, n) || this;
      r.handleMouseDown = function(s) {
        r.stepDrag.handleMouseDown(s);
      }, r.handleWheelEvent = function(s) {
        var l, u;
        s.preventDefault();
        var c = s.deltaX, d = s.deltaY, f = s.clientX, h = s.clientY, p = s.ctrlKey, v = new WheelEvent("wheel", {
          deltaX: c,
          deltaY: d,
          clientX: f,
          clientY: h,
          ctrlKey: p
        });
        (u = (l = r.props.lf.container) === null || l === void 0 ? void 0 : l.querySelector('.lf-canvas-overlay[name="canvas-overlay"]')) === null || u === void 0 || u.dispatchEvent(v);
      }, r.onDragging = function(s) {
        var l = s.deltaX, u = s.deltaY, c = r.props, d = c.graphModel, f = c.lf, h = f.getTransform(), p = h.SCALE_X, v = h.SCALE_Y, g = d.getSelectElements(!0);
        d.moveNodes(g.nodes.map(function(y) {
          return y.id;
        }), l / p, u / v);
      }, r.handleContextMenu = function(s) {
        s.preventDefault();
        var l = r.props, u = l.graphModel, c = l.graphModel, d = c.eventCenter, f = c.selectElements, h = u.getPointByClient({
          x: s.clientX,
          y: s.clientY
        }), p = {
          nodes: [],
          edges: []
        }, v = MW([], Op(f.values()), !1);
        v.forEach(function(g) {
          g.BaseType === un.NODE && p.nodes.push(g.getData()), g.BaseType === un.EDGE && p.edges.push(g.getData());
        }), d.emit(Fe.SELECTION_CONTEXTMENU, {
          data: p,
          e: s,
          position: h
        });
      };
      var i = n.graphModel, o = i.gridSize, a = i.eventCenter;
      return r.stepDrag = new ni({
        onDragging: r.onDragging,
        step: o,
        eventType: "SELECTION",
        eventCenter: a
      }), r;
    }
    return t.prototype.render = function() {
      var n, r, i = this.props.graphModel, o = i.selectElements, a = i.transformModel, s = this.props.lf.getTransform(), l = s.SCALE_X, u = s.SCALE_Y;
      if (!(o.size <= 1)) {
        var c = Number.MAX_SAFE_INTEGER, d = Number.MAX_SAFE_INTEGER, f = Number.MIN_SAFE_INTEGER, h = Number.MIN_SAFE_INTEGER;
        o.forEach(function(v) {
          var g;
          v.BaseType === un.NODE && (g = NF(v)), v.BaseType === un.EDGE && (g = DF(v)), g !== void 0 && (c = Math.min(c, g.x), d = Math.min(d, g.y), f = Math.max(f, g.x1), h = Math.max(h, g.y1));
        }), n = Op(a.CanvasPointToHtmlPoint([c, d]), 2), c = n[0], d = n[1], r = Op(a.CanvasPointToHtmlPoint([f, h]), 2), f = r[0], h = r[1];
        var p = {
          left: "".concat(c - 20 * l / 2, "px"),
          top: "".concat(d - 20 * u / 2, "px"),
          width: "".concat(f - c + 20 * l, "px"),
          height: "".concat(h - d + 20 * u, "px"),
          "border-width": "".concat(2 * l, "px")
        };
        return Q("div", { className: "lf-multiple-select", style: p, onMouseDown: this.handleMouseDown, onContextMenu: this.handleContextMenu, onWheel: this.handleWheelEvent });
      }
    }, t.toolName = "multiple-select-tool", t = NW([
      qn
    ], t), t;
  }(Et)
), Ap = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, PW = [OW, TW], DW = (
  /** @class */
  function() {
    function e(t) {
      var n = this;
      this.toolMap = /* @__PURE__ */ new Map(), this.disabledToolMap = /* @__PURE__ */ new Map(), this.instance = t, st(PW, function(o) {
        n.isDisabled(o.toolName) || n.registerTool(o.toolName, o);
      });
      var r = t.graphModel, i = r.eventCenter;
      i.on("".concat(Fe.GRAPH_TRANSFORM, ",").concat(Fe.NODE_CLICK, ",").concat(Fe.BLANK_CLICK, " "), function() {
        var o, a = r.textEditElement, s = r.editConfigModel, l = s.edgeTextEdit, u = s.nodeTextEdit;
        (l || u) && a && ((o = r.textEditElement) === null || o === void 0 || o.setElementState(Pt.DEFAULT));
      });
    }
    return e.prototype.isDisabled = function(t) {
      var n;
      return ((n = this.instance.options.disabledTools) === null || n === void 0 ? void 0 : n.indexOf(t)) !== -1;
    }, e.prototype.registerTool = function(t, n) {
      this.toolMap.set(t, n);
    }, e.prototype.disableTool = function(t) {
      var n = this.toolMap.get(t);
      if (n)
        return this.disabledToolMap.set(t, n), this.toolMap.delete(t), !0;
      throw new Error("禁用失败，不存在名为 ${tool} 的工具");
    }, e.prototype.enableTool = function(t) {
      var n = this.disabledToolMap.get(t);
      if (n)
        return this.toolMap.set(t, n), this.disabledToolMap.delete(t), !0;
      throw new Error("不存在名为 ${tool} 的工具");
    }, e.prototype.getTools = function() {
      return Array.from(this.toolMap.values());
    }, e.prototype.getInstance = function() {
      return this.instance;
    }, Ap([
      ie
    ], e.prototype, "toolMap", void 0), Ap([
      te
    ], e.prototype, "disableTool", null), Ap([
      te
    ], e.prototype, "enableTool", null), e;
  }()
);
function RW(e) {
  throw new Error("[mobx-utils] " + e);
}
function Hd(e, t) {
  t === void 0 && (t = "Illegal state"), e || RW(t);
}
var C2 = function(e) {
  return e && e !== Object.prototype && Object.getOwnPropertyNames(e).concat(C2(Object.getPrototypeOf(e)) || []);
}, LW = function(e) {
  var t = C2(e), n = t.filter(function(r, i) {
    return t.indexOf(r) === i;
  });
  return n;
}, $W = function(e) {
  return LW(e).filter(function(t) {
    return t !== "constructor" && !~t.indexOf("__");
  });
}, O2 = "pending", Vd = "fulfilled", nm = "rejected";
function kW(e) {
  switch (this.state) {
    case O2:
      return e.pending && e.pending(this.value);
    case nm:
      return e.rejected && e.rejected(this.value);
    case Vd:
      return e.fulfilled ? e.fulfilled(this.value) : this.value;
  }
}
function Zb(e, t) {
  if (Hd(arguments.length <= 2, "fromPromise expects up to two arguments"), Hd(typeof e == "function" || typeof e == "object" && e && typeof e.then == "function", "Please pass a promise or function to fromPromise"), e.isPromiseBasedObservable === !0)
    return e;
  typeof e == "function" && (e = new Promise(e));
  var n = e;
  e.then(te("observableFromPromise-resolve", function(i) {
    n.value = i, n.state = Vd;
  }), te("observableFromPromise-reject", function(i) {
    n.value = i, n.state = nm;
  })), n.isPromiseBasedObservable = !0, n.case = kW;
  var r = t && t.state === Vd ? t.value : void 0;
  return dv(n, {
    value: r,
    state: O2
  }, {}, { deep: !1 }), n;
}
(function(e) {
  e.reject = te("fromPromise.reject", function(n) {
    var r = e(Promise.reject(n));
    return r.state = nm, r.value = n, r;
  });
  function t(n) {
    n === void 0 && (n = void 0);
    var r = e(Promise.resolve(n));
    return r.state = Vd, r.value = n, r;
  }
  e.resolve = te("fromPromise.resolve", t);
})(Zb || (Zb = {}));
var Rc = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
};
(function() {
  function e(t, n) {
    var r = this;
    g3(function() {
      r.current = n, r.subscription = t.subscribe(r);
    });
  }
  return e.prototype.dispose = function() {
    this.subscription && this.subscription.unsubscribe();
  }, e.prototype.next = function(t) {
    this.current = t;
  }, e.prototype.complete = function() {
    this.dispose();
  }, e.prototype.error = function(t) {
    this.current = t, this.dispose();
  }, Rc([
    ie.ref
  ], e.prototype, "current", void 0), Rc([
    te.bound
  ], e.prototype, "next", null), Rc([
    te.bound
  ], e.prototype, "complete", null), Rc([
    te.bound
  ], e.prototype, "error", null), e;
})();
var Wd = function() {
  return Wd = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Wd.apply(this, arguments);
}, Ol = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, IW = ["model", "reset", "submit", "isDirty", "isPropertyDirty", "resetProperty"];
(function() {
  function e(t) {
    var n = this;
    this.model = t, this.localValues = ie.map({}), this.localComputedValues = ie.map({}), this.isPropertyDirty = function(r) {
      return n.localValues.has(r);
    }, Hd(Ai(t), "createViewModel expects an observable object"), $W(t).forEach(function(r) {
      if (!(r === rt || r === "__mobxDidRunLazyInitializers")) {
        if (Hd(IW.indexOf(r) === -1, "The propertyname " + r + " is reserved and cannot be used with viewModels"), F_(t, r)) {
          var i = Lf(t, r).derivation;
          n.localComputedValues.set(r, Ut(i.bind(n)));
        }
        var o = Object.getOwnPropertyDescriptor(t, r), a = o ? { enumerable: o.enumerable } : {};
        Object.defineProperty(n, r, Wd(Wd({}, a), { configurable: !0, get: function() {
          return F_(t, r) ? n.localComputedValues.get(r).get() : n.isPropertyDirty(r) ? n.localValues.get(r) : n.model[r];
        }, set: te(function(s) {
          s !== n.model[r] ? n.localValues.set(r, s) : n.localValues.delete(r);
        }) }));
      }
    });
  }
  return Object.defineProperty(e.prototype, "isDirty", {
    get: function() {
      return this.localValues.size > 0;
    },
    enumerable: !1,
    configurable: !0
  }), Object.defineProperty(e.prototype, "changedValues", {
    get: function() {
      return this.localValues.toJS();
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.submit = function() {
    var t = this;
    Ls(this.localValues).forEach(function(n) {
      var r = t.localValues.get(n), i = t.model[n];
      Yi(i) ? i.replace(r) : Qn(i) ? (i.clear(), i.merge(r)) : Sx(r) || (t.model[n] = r);
    }), this.localValues.clear();
  }, e.prototype.reset = function() {
    this.localValues.clear();
  }, e.prototype.resetProperty = function(t) {
    this.localValues.delete(t);
  }, Ol([
    Ut
  ], e.prototype, "isDirty", null), Ol([
    Ut
  ], e.prototype, "changedValues", null), Ol([
    te.bound
  ], e.prototype, "submit", null), Ol([
    te.bound
  ], e.prototype, "reset", null), Ol([
    te.bound
  ], e.prototype, "resetProperty", null), e;
})();
function Np(e) {
  if (!e)
    return "ROOT";
  for (var t = []; e.parent; )
    t.push(e.path), e = e.parent;
  return t.reverse().join("/");
}
function Mp(e) {
  return Ai(e) || Yi(e) || Qn(e);
}
function BW(e, t) {
  var n = /* @__PURE__ */ new WeakMap();
  function r(s) {
    var l = n.get(s.object);
    i(s, l), t(s, Np(l), e);
  }
  function i(s, l) {
    switch (s.type) {
      case "add":
        o(s.newValue, l, s.name);
        break;
      case "update":
        a(s.oldValue), o(s.newValue, l, s.name || "" + s.index);
        break;
      case "remove":
      case "delete":
        a(s.oldValue);
        break;
      case "splice":
        s.removed.map(a), s.added.forEach(function(d, f) {
          return o(d, l, "" + (s.index + f));
        });
        for (var u = s.index + s.addedCount; u < s.object.length; u++)
          if (Mp(s.object[u])) {
            var c = n.get(s.object[u]);
            c && (c.path = "" + u);
          }
        break;
    }
  }
  function o(s, l, u) {
    if (Mp(s)) {
      var c = n.get(s);
      if (c) {
        if (c.parent !== l || c.path !== u)
          throw new Error("The same observable object cannot appear twice in the same tree," + (" trying to assign it to '" + Np(l) + "/" + u + "',") + (" but it already exists at '" + Np(c.parent) + "/" + c.path + "'"));
      } else {
        var d = {
          parent: l,
          path: u,
          dispose: Cx(s, r)
        };
        n.set(s, d), O3(s).forEach(function(f) {
          var h = f[0], p = f[1];
          return o(p, d, h);
        });
      }
    }
  }
  function a(s) {
    if (Mp(s)) {
      var l = n.get(s);
      if (!l)
        return;
      n.delete(s), l.dispose(), C3(s).forEach(a);
    }
  }
  return o(e, void 0, ""), function() {
    a(e);
  };
}
var jW = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) i.hasOwnProperty(o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}();
(function(e) {
  jW(t, e);
  function t(n, r, i) {
    var o = i === void 0 ? {} : i, a = o.name, s = a === void 0 ? "ogm" + (Math.random() * 1e3 | 0) : a, l = o.keyToName, u = l === void 0 ? function(f) {
      return "" + f;
    } : l, c = e.call(this) || this;
    c._keyToName = u, c._groupBy = r, c._ogmInfoKey = Symbol("ogmInfo" + s), c._base = n;
    for (var d = 0; d < n.length; d++)
      c._addItem(n[d]);
    return c._disposeBaseObserver = Cx(c._base, function(f) {
      if (f.type === "splice")
        di(function() {
          for (var h = 0, p = f.removed; h < p.length; h++) {
            var v = p[h];
            c._removeItem(v);
          }
          for (var g = 0, y = f.added; g < y.length; g++) {
            var m = y[g];
            c._addItem(m);
          }
        });
      else if (f.type === "update")
        di(function() {
          c._removeItem(f.oldValue), c._addItem(f.newValue);
        });
      else
        throw new Error("illegal state");
    }), c;
  }
  return t.prototype.clear = function() {
    throw new Error("not supported");
  }, t.prototype.delete = function(n) {
    throw new Error("not supported");
  }, t.prototype.set = function(n, r) {
    throw new Error("not supported");
  }, t.prototype.dispose = function() {
    this._disposeBaseObserver();
    for (var n = 0; n < this._base.length; n++) {
      var r = this._base[n], i = r[this._ogmInfoKey];
      i.reaction(), delete r[this._ogmInfoKey];
    }
  }, t.prototype._getGroupArr = function(n) {
    var r = e.prototype.get.call(this, n);
    return r === void 0 && (r = ie([], { name: "GroupArray[" + this._keyToName(n) + "]", deep: !1 }), e.prototype.set.call(this, n, r)), r;
  }, t.prototype._removeFromGroupArr = function(n, r) {
    var i = e.prototype.get.call(this, n);
    i.length === 1 ? e.prototype.delete.call(this, n) : (r === i.length - 1 || (i[r] = i[i.length - 1], i[r][this._ogmInfoKey].groupArrIndex = r), i.length--);
  }, t.prototype._addItem = function(n) {
    var r = this, i = this._groupBy(n), o = this._getGroupArr(i), a = {
      groupByValue: i,
      groupArrIndex: o.length,
      reaction: yx(function() {
        return r._groupBy(n);
      }, function(s, l) {
        var u = n[r._ogmInfoKey];
        r._removeFromGroupArr(u.groupByValue, u.groupArrIndex);
        var c = r._getGroupArr(s), d = c.length;
        c.push(n), u.groupByValue = s, u.groupArrIndex = d;
      })
    };
    Object.defineProperty(n, this._ogmInfoKey, {
      configurable: !0,
      enumerable: !1,
      value: a
    }), o.push(n);
  }, t.prototype._removeItem = function(n) {
    var r = n[this._ogmInfoKey];
    this._removeFromGroupArr(r.groupByValue, r.groupArrIndex), r.reaction(), delete n[this._ogmInfoKey];
  }, t;
})(ey);
Promise.resolve(), typeof queueMicrotask < "u" || typeof process < "u" && process.nextTick;
var cg = function() {
  return cg = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, cg.apply(this, arguments);
}, zW = (
  /** @class */
  function() {
    function e(t) {
      this.undos = [], this.redos = [], this.callbacks = [], this.stopWatch = null, this.curData = null, this.maxSize = 50, this.waitTime = 100, this.eventCenter = t;
    }
    return e.prototype.add = function(t) {
      Od(dr(this.undos), t) || (this.undos.push(t), Od(this.curData, t) || (this.redos = []), this.eventCenter.emit(Fe.HISTORY_CHANGE, {
        data: {
          undos: this.undos,
          redos: this.redos,
          undoAble: this.undoAble(),
          redoAble: this.redoAble()
        }
      }), this.undos.length > this.maxSize && this.undos.shift());
    }, e.prototype.undoAble = function() {
      return this.undos.length > 1;
    }, e.prototype.undo = function() {
      if (this.undoAble()) {
        var t = this.undos.pop();
        this.redos.push(t);
        var n = this.undos.pop();
        return this.curData = it(n), n;
      }
    }, e.prototype.redoAble = function() {
      return this.redos.length > 0;
    }, e.prototype.redo = function() {
      if (this.redoAble()) {
        var t = this.redos.pop();
        return this.curData = it(t), t;
      }
    }, e.prototype.watch = function(t) {
      var n = this;
      this.stopWatch && this.stopWatch(), this.undos.push(t.modelToGraphData()), this.stopWatch = BW(
        // TODO：避免用户触发「The same observable object cannot appear twice in the same tree」 错误
        // 例如：在自定义节点的 setAttributes 方法中，将 nodeModel 属性赋值给另一个 observable 属性
        // eg:
        // setAttributes() {
        //   this.width = 120
        //   this.height = 50
        //
        //   if (this.text) {
        //     this.properties.text = this.text;
        //     this.text.value = '';
        //   }
        // }
        // 解决方案：使用 cloneDeep 方法，将 observable 对象克隆一份。需要测试下面操作是否会造成其它问题
        // https://stackoverflow.com/questions/55328504/a-node-cannot-exists-twice-in-the-state-tree-mobx-state-tree
        // cloneDeep(model),
        t,
        Yf(function() {
          var r = t.modelToHistoryData();
          r && n.add(cg({}, r));
        }, this.waitTime)
      );
    }, e;
  }()
), A2 = { exports: {} };
(function(e) {
  (function(t, n, r) {
    if (!t)
      return;
    for (var i = {
      8: "backspace",
      9: "tab",
      13: "enter",
      16: "shift",
      17: "ctrl",
      18: "alt",
      20: "capslock",
      27: "esc",
      32: "space",
      33: "pageup",
      34: "pagedown",
      35: "end",
      36: "home",
      37: "left",
      38: "up",
      39: "right",
      40: "down",
      45: "ins",
      46: "del",
      91: "meta",
      93: "meta",
      224: "meta"
    }, o = {
      106: "*",
      107: "+",
      109: "-",
      110: ".",
      111: "/",
      186: ";",
      187: "=",
      188: ",",
      189: "-",
      190: ".",
      191: "/",
      192: "`",
      219: "[",
      220: "\\",
      221: "]",
      222: "'"
    }, a = {
      "~": "`",
      "!": "1",
      "@": "2",
      "#": "3",
      $: "4",
      "%": "5",
      "^": "6",
      "&": "7",
      "*": "8",
      "(": "9",
      ")": "0",
      _: "-",
      "+": "=",
      ":": ";",
      '"': "'",
      "<": ",",
      ">": ".",
      "?": "/",
      "|": "\\"
    }, s = {
      option: "alt",
      command: "meta",
      return: "enter",
      escape: "esc",
      plus: "+",
      mod: /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? "meta" : "ctrl"
    }, l, u = 1; u < 20; ++u)
      i[111 + u] = "f" + u;
    for (u = 0; u <= 9; ++u)
      i[u + 96] = u.toString();
    function c(b, T, R) {
      if (b.addEventListener) {
        b.addEventListener(T, R, !1);
        return;
      }
      b.attachEvent("on" + T, R);
    }
    function d(b) {
      if (b.type == "keypress") {
        var T = String.fromCharCode(b.which);
        return b.shiftKey || (T = T.toLowerCase()), T;
      }
      return i[b.which] ? i[b.which] : o[b.which] ? o[b.which] : String.fromCharCode(b.which).toLowerCase();
    }
    function f(b, T) {
      return b.sort().join(",") === T.sort().join(",");
    }
    function h(b) {
      var T = [];
      return b.shiftKey && T.push("shift"), b.altKey && T.push("alt"), b.ctrlKey && T.push("ctrl"), b.metaKey && T.push("meta"), T;
    }
    function p(b) {
      if (b.preventDefault) {
        b.preventDefault();
        return;
      }
      b.returnValue = !1;
    }
    function v(b) {
      if (b.stopPropagation) {
        b.stopPropagation();
        return;
      }
      b.cancelBubble = !0;
    }
    function g(b) {
      return b == "shift" || b == "ctrl" || b == "alt" || b == "meta";
    }
    function y() {
      if (!l) {
        l = {};
        for (var b in i)
          b > 95 && b < 112 || i.hasOwnProperty(b) && (l[i[b]] = b);
      }
      return l;
    }
    function m(b, T, R) {
      return R || (R = y()[b] ? "keydown" : "keypress"), R == "keypress" && T.length && (R = "keydown"), R;
    }
    function E(b) {
      return b === "+" ? ["+"] : (b = b.replace(/\+{2}/g, "+plus"), b.split("+"));
    }
    function w(b, T) {
      var R, B, K, ae = [];
      for (R = E(b), K = 0; K < R.length; ++K)
        B = R[K], s[B] && (B = s[B]), T && T != "keypress" && a[B] && (B = a[B], ae.push("shift")), g(B) && ae.push(B);
      return T = m(B, ae, T), {
        key: B,
        modifiers: ae,
        action: T
      };
    }
    function S(b, T) {
      return b === null || b === n ? !1 : b === T ? !0 : S(b.parentNode, T);
    }
    function _(b) {
      var T = this;
      if (b = b || n, !(T instanceof _))
        return new _(b);
      T.target = b, T._callbacks = {}, T._directMap = {};
      var R = {}, B, K = !1, ae = !1, x = !1;
      function P(G) {
        G = G || {};
        var be = !1, Oe;
        for (Oe in R) {
          if (G[Oe]) {
            be = !0;
            continue;
          }
          R[Oe] = 0;
        }
        be || (x = !1);
      }
      function L(G, be, Oe, Ae, Re, $) {
        var re, ee, _e = [], xe = Oe.type;
        if (!T._callbacks[G])
          return [];
        for (xe == "keyup" && g(G) && (be = [G]), re = 0; re < T._callbacks[G].length; ++re)
          if (ee = T._callbacks[G][re], !(!Ae && ee.seq && R[ee.seq] != ee.level) && xe == ee.action && (xe == "keypress" && !Oe.metaKey && !Oe.ctrlKey || f(be, ee.modifiers))) {
            var ye = !Ae && ee.combo == Re, Ge = Ae && ee.seq == Ae && ee.level == $;
            (ye || Ge) && T._callbacks[G].splice(re, 1), _e.push(ee);
          }
        return _e;
      }
      function k(G, be, Oe, Ae) {
        T.stopCallback(be, be.target || be.srcElement, Oe, Ae) || G(be, Oe) === !1 && (p(be), v(be));
      }
      T._handleKey = function(G, be, Oe) {
        var Ae = L(G, be, Oe), Re, $ = {}, re = 0, ee = !1;
        for (Re = 0; Re < Ae.length; ++Re)
          Ae[Re].seq && (re = Math.max(re, Ae[Re].level));
        for (Re = 0; Re < Ae.length; ++Re) {
          if (Ae[Re].seq) {
            if (Ae[Re].level != re)
              continue;
            ee = !0, $[Ae[Re].seq] = 1, k(Ae[Re].callback, Oe, Ae[Re].combo, Ae[Re].seq);
            continue;
          }
          ee || k(Ae[Re].callback, Oe, Ae[Re].combo);
        }
        var _e = Oe.type == "keypress" && ae;
        Oe.type == x && !g(G) && !_e && P($), ae = ee && Oe.type == "keydown";
      };
      function J(G) {
        typeof G.which != "number" && (G.which = G.keyCode);
        var be = d(G);
        if (be) {
          if (G.type == "keyup" && K === be) {
            K = !1;
            return;
          }
          T.handleKey(be, h(G), G);
        }
      }
      function de() {
        clearTimeout(B), B = setTimeout(P, 1e3);
      }
      function Ne(G, be, Oe, Ae) {
        R[G] = 0;
        function Re(xe) {
          return function() {
            x = xe, ++R[G], de();
          };
        }
        function $(xe) {
          k(Oe, xe, G), Ae !== "keyup" && (K = d(xe)), setTimeout(P, 10);
        }
        for (var re = 0; re < be.length; ++re) {
          var ee = re + 1 === be.length, _e = ee ? $ : Re(Ae || w(be[re + 1]).action);
          se(be[re], _e, Ae, G, re);
        }
      }
      function se(G, be, Oe, Ae, Re) {
        T._directMap[G + ":" + Oe] = be, G = G.replace(/\s+/g, " ");
        var $ = G.split(" "), re;
        if ($.length > 1) {
          Ne(G, $, be, Oe);
          return;
        }
        re = w(G, Oe), T._callbacks[re.key] = T._callbacks[re.key] || [], L(re.key, re.modifiers, { type: re.action }, Ae, G, Re), T._callbacks[re.key][Ae ? "unshift" : "push"]({
          callback: be,
          modifiers: re.modifiers,
          action: re.action,
          seq: Ae,
          level: Re,
          combo: G
        });
      }
      T._bindMultiple = function(G, be, Oe) {
        for (var Ae = 0; Ae < G.length; ++Ae)
          se(G[Ae], be, Oe);
      }, c(b, "keypress", J), c(b, "keydown", J), c(b, "keyup", J);
    }
    _.prototype.bind = function(b, T, R) {
      var B = this;
      return b = b instanceof Array ? b : [b], B._bindMultiple.call(B, b, T, R), B;
    }, _.prototype.unbind = function(b, T) {
      var R = this;
      return R.bind.call(R, b, function() {
      }, T);
    }, _.prototype.trigger = function(b, T) {
      var R = this;
      return R._directMap[b + ":" + T] && R._directMap[b + ":" + T]({}, b), R;
    }, _.prototype.reset = function() {
      var b = this;
      return b._callbacks = {}, b._directMap = {}, b;
    }, _.prototype.stopCallback = function(b, T) {
      var R = this;
      if ((" " + T.className + " ").indexOf(" mousetrap ") > -1 || S(T, R.target))
        return !1;
      if ("composedPath" in b && typeof b.composedPath == "function") {
        var B = b.composedPath()[0];
        B !== b.target && (T = B);
      }
      return T.tagName == "INPUT" || T.tagName == "SELECT" || T.tagName == "TEXTAREA" || T.isContentEditable;
    }, _.prototype.handleKey = function() {
      var b = this;
      return b._handleKey.apply(b, arguments);
    }, _.addKeycodes = function(b) {
      for (var T in b)
        b.hasOwnProperty(T) && (i[T] = b[T]);
      l = null;
    }, _.init = function() {
      var b = _(n);
      for (var T in b)
        T.charAt(0) !== "_" && (_[T] = /* @__PURE__ */ function(R) {
          return function() {
            return b[R].apply(b, arguments);
          };
        }(T));
    }, _.init(), t.Mousetrap = _, e.exports && (e.exports = _);
  })(typeof window < "u" ? window : null, typeof window < "u" ? document : null);
})(A2);
var FW = A2.exports;
const HW = /* @__PURE__ */ Sf(FW);
var Do = function() {
  return Do = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Do.apply(this, arguments);
}, VW = function(e, t) {
  var n = {};
  for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
  if (e != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, r = Object.getOwnPropertySymbols(e); i < r.length; i++)
      t.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[i]) && (n[r[i]] = e[r[i]]);
  return n;
}, Di = null;
function Jb(e, t) {
  return e.x += t, e.y += t, By(e.text) || (e.text.x += t, e.text.y += t), e;
}
function Qb(e, t) {
  return e.startPoint && (e.startPoint.x += t, e.startPoint.y += t), e.endPoint && (e.endPoint.x += t, e.endPoint.y += t), e.pointsList && e.pointsList.length > 0 && e.pointsList.forEach(function(n) {
    n.x += t, n.y += t;
  }), By(e.text) || (e.text.x += t, e.text.y += t), e;
}
function WW(e, t) {
  var n = e.x, r = e.y, i = e.text, o = i ? {
    x: i.x + t,
    y: i.y + t,
    value: i.value
  } : void 0;
  return Do(Do({}, e), { id: "", x: n + t, y: r + t, text: o });
}
function GW(e, t) {
  var n = e.startPoint, r = e.endPoint, i = e.pointsList, o = e.text, a = VW(
    e,
    ["startPoint", "endPoint", "pointsList", "text"]
  );
  a.id = "";
  var s = {
    x: n.x + t,
    y: n.y + t
  }, l = {
    x: r.x + t,
    y: r.y + t
  }, u = Kn(i, function(d) {
    return {
      x: d.x + t,
      y: d.y + t
    };
  }), c = o ? Do(Do({}, o), { x: o.x + t, y: o.y + t }) : void 0;
  return Do(Do({}, a), { startPoint: s, endPoint: l, pointsList: u, text: c });
}
var as = 40, Lc = 40;
function XW(e, t) {
  var n = e.keyboard, r = n.options.keyboard;
  n.on(["cmd + c", "ctrl + c"], function() {
    if (Lc = as, !(r != null && r.enabled) || t.textEditElement)
      return !0;
    var i = e.options.guards, o = t.getSelectElements(!1), a = i && i.beforeClone ? i.beforeClone(o) : !0;
    return !a || o.nodes.length === 0 && o.edges.length === 0 ? (Di = null, !0) : (Di = o, Di.nodes.forEach(function(s) {
      return Jb(s, as);
    }), Di.edges.forEach(function(s) {
      return Qb(s, as);
    }), !1);
  }), n.on(["cmd + v", "ctrl + v"], function() {
    if (!(r != null && r.enabled) || t.textEditElement)
      return !0;
    if (Di && (Di.nodes || Di.edges)) {
      e.clearSelectElements();
      var i = e.addElements(Di, Lc);
      if (!i)
        return !0;
      i.nodes.forEach(function(o) {
        return e.selectElementById(o.id, !0);
      }), i.edges.forEach(function(o) {
        return e.selectElementById(o.id, !0);
      }), Di.nodes.forEach(function(o) {
        return Jb(o, as);
      }), Di.edges.forEach(function(o) {
        return Qb(o, as);
      }), Lc = Lc + as;
    }
    return !1;
  }), n.on(["cmd + z", "ctrl + z"], function() {
    return !(r != null && r.enabled) || t.textEditElement ? !0 : (e.undo(), !1);
  }), n.on(["cmd + y", "ctrl + y"], function() {
    return !(r != null && r.enabled) || t.textEditElement ? !0 : (e.redo(), !1);
  }), n.on(["backspace"], function() {
    if (!(r != null && r.enabled) || t.textEditElement)
      return !0;
    var i = t.getSelectElements(!0);
    return e.clearSelectElements(), i.edges.forEach(function(o) {
      return o.id && e.deleteEdge(o.id);
    }), i.nodes.forEach(function(o) {
      return o.id && e.deleteNode(o.id);
    }), !1;
  });
}
var UW = (
  /** @class */
  function() {
    function e(t) {
      t.keyboard || (t.keyboard = { enabled: !1 }), this.options = t;
      var n = t.lf;
      this.target = n.container, this.mousetrap = new HW(this.target), t.keyboard.enabled && !n.options.isSilentMode && this.enable(!0);
    }
    return e.prototype.initShortcuts = function() {
      var t = this, n, r = ((n = this.options.keyboard) !== null && n !== void 0 ? n : {}).shortcuts;
      if (r)
        if (ut(r))
          r.forEach(function(s) {
            var l = s.keys, u = s.callback, c = s.action;
            return t.on(l, u, c);
          });
        else {
          var i = r.keys, o = r.callback, a = r.action;
          this.on(i, o, a);
        }
    }, e.prototype.on = function(t, n, r) {
      this.mousetrap.bind(this.getKeys(t), n, r);
    }, Object.defineProperty(e.prototype, "disabled", {
      get: function() {
        var t, n;
        return ((n = (t = this.options) === null || t === void 0 ? void 0 : t.keyboard) === null || n === void 0 ? void 0 : n.enabled) !== !0;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.off = function(t, n) {
      this.mousetrap.unbind(this.getKeys(t), n);
    }, e.prototype.enable = function(t) {
      (this.disabled || t) && (this.options.keyboard && (this.options.keyboard.enabled = !0), this.target instanceof HTMLElement && (this.target.setAttribute("tabindex", "-1"), this.target.style.outline = "none"));
    }, e.prototype.disable = function() {
      this.disabled || (this.options.keyboard && (this.options.keyboard.enabled = !1), this.target instanceof HTMLElement && this.target.removeAttribute("tabindex"));
    }, e.prototype.getKeys = function(t) {
      var n = this;
      return (Array.isArray(t) ? t : [t]).map(function(r) {
        return n.formatKey(r);
      });
    }, e.prototype.formatKey = function(t) {
      return t.toLowerCase().replace(/\s/g, "").replace("delete", "del").replace("cmd", "command");
    }, e;
  }()
), No = function() {
  return No = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, No.apply(this, arguments);
}, $c = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Tp = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
}, Pp = Symbol("plugin registered by Logicflow.use"), dg = (
  /** @class */
  function() {
    function e(t) {
      var n = this, r;
      this.viewMap = /* @__PURE__ */ new Map(), this.components = [], this.extension = {}, this.setView = function(u, c) {
        return n.viewMap.set(u, c);
      }, this.getView = function(u) {
        return n.viewMap.get(u);
      };
      var i = Ou.get(t), o = i.container, a = i.width, s = i.height;
      this.options = i, this.container = this.initContainer(o, a, s), this.graphModel = new LV(No(No({}, i), { container: this.container })), this.plugins = (r = i.plugins) !== null && r !== void 0 ? r : [];
      var l = this.graphModel.eventCenter;
      this.tool = new DW(this), this.dnd = new wW({ lf: this }), this.history = new zW(l), this.keyboard = new UW({
        lf: this,
        keyboard: i.keyboard
      }), i.snapline !== !1 && (this.snaplineModel = new $V(this.graphModel), xW(l, this.snaplineModel)), i.isSilentMode || (XW(this, this.graphModel), this.keyboard.initShortcuts()), this.defaultRegister(), this.installPlugins(i.disabledPlugins);
    }
    return e.prototype.initContainer = function(t, n, r) {
      var i = document.createElement("div");
      return i.style.position = "relative", i.style.width = n ? "".concat(n, "px") : "100%", i.style.height = r ? "".concat(r, "px") : "100%", t.innerHTML = "", t.appendChild(i), i;
    }, Object.defineProperty(e.prototype, Symbol.toStringTag, {
      get: function() {
        return e.toStringTag;
      },
      enumerable: !1,
      configurable: !0
    }), e.prototype.register = function(t, n, r) {
      if (r === void 0 && (r = !0), typeof t != "string") {
        this.registerElement(t);
        return;
      }
      var i = {
        BaseEdge: lh,
        BaseEdgeModel: sh,
        BaseNode: Qo,
        BaseNodeModel: Jo,
        RectNode: La,
        RectNodeModel: Hs,
        CircleNode: jd,
        CircleNodeModel: $d,
        PolygonNode: Fd,
        PolygonNodeModel: kd,
        TextNode: ng,
        TextNodeModel: Wv,
        LineEdge: ug,
        LineEdgeModel: Fv,
        DiamondNode: Qv,
        DiamondNodeModel: Hv,
        PolylineEdge: Vs,
        PolylineEdgeModel: Fs,
        BezierEdge: sg,
        BezierEdgeModel: zv,
        EllipseNode: tg,
        EllipseNodeModel: Vv,
        HtmlNode: ig,
        HtmlNodeModel: Gv,
        // mobx,
        h: q,
        type: t
      };
      if (this.viewMap.forEach(function(u) {
        var c = u.extendKey;
        c && (i[c] = u);
      }), this.graphModel.modelMap.forEach(function(u) {
        var c = u.extendKey;
        c && (i[c] = u);
      }), n) {
        var o = n(i), a = o.view, s = o.model, l = a;
        r && !l.isObserved && (l.isObserved = !0, l = qn(l)), this.setView(t, l), this.graphModel.setModel(t, s);
      }
    }, e.prototype.registerElement = function(t) {
      var n = t.view;
      t.isObserverView !== !1 && !n.isObserved && (n.isObserved = !0, n = qn(n)), this.setView(t.type, n), this.graphModel.setModel(t.type, t.model);
    }, e.prototype.batchRegister = function(t) {
      var n = this;
      t === void 0 && (t = []), st(t, function(r) {
        n.registerElement(r);
      });
    }, e.prototype.defaultRegister = function() {
      var t = [
        // Node
        {
          type: "rect",
          view: La,
          model: Hs
        },
        {
          type: "circle",
          view: jd,
          model: $d
        },
        {
          type: "polygon",
          view: Fd,
          model: kd
        },
        {
          type: "text",
          view: ng,
          model: Wv
        },
        {
          type: "ellipse",
          view: tg,
          model: Vv
        },
        {
          type: "diamond",
          view: Qv,
          model: Hv
        },
        {
          type: "html",
          view: ig,
          model: Gv
        },
        // Edge
        {
          type: "line",
          view: ug,
          model: Fv
        },
        {
          type: "polyline",
          view: Vs,
          model: Fs
        },
        {
          type: "bezier",
          view: sg,
          model: zv
        }
      ];
      this.batchRegister(t);
    }, e.prototype.addNode = function(t, n, r) {
      return n === void 0 && (n = Fe.NODE_ADD), this.graphModel.addNode(t, n, r);
    }, e.prototype.deleteNode = function(t) {
      var n = this.graphModel.getNodeModelById(t);
      if (!n)
        return !1;
      var r = n.getData(), i = this.options.guards, o = i != null && i.beforeDelete ? i.beforeDelete(r) : !0;
      return o && this.graphModel.deleteNode(t), o;
    }, e.prototype.cloneNode = function(t) {
      var n = this.graphModel.getNodeModelById(t), r = n == null ? void 0 : n.getData();
      if (r) {
        var i = this.options.guards, o = i != null && i.beforeClone ? i.beforeClone(r) : !0;
        if (o)
          return this.graphModel.cloneNode(t);
      }
    }, e.prototype.changeNodeId = function(t, n) {
      return this.graphModel.changeNodeId(t, n);
    }, e.prototype.changeNodeType = function(t, n) {
      this.graphModel.changeNodeType(t, n);
    }, e.prototype.getNodeModelById = function(t) {
      return this.graphModel.getNodeModelById(t);
    }, e.prototype.getNodeDataById = function(t) {
      var n = this.getNodeModelById(t);
      return n == null ? void 0 : n.getData();
    }, e.prototype.getNodeIncomingEdge = function(t) {
      return this.graphModel.getNodeIncomingEdge(t);
    }, e.prototype.getNodeOutgoingEdge = function(t) {
      return this.graphModel.getNodeOutgoingEdge(t);
    }, e.prototype.getNodeIncomingNode = function(t) {
      return this.graphModel.getNodeIncomingNode(t);
    }, e.prototype.getNodeOutgoingNode = function(t) {
      return this.graphModel.getNodeOutgoingNode(t);
    }, e.prototype.createFakeNode = function(t) {
      var n = this.graphModel.modelMap.get(t.type);
      if (!n)
        return console.warn("不存在为".concat(t.type, "类型的节点")), null;
      var r = new n(No(No({}, t), { virtual: !0 }), this.graphModel);
      return this.graphModel.setFakeNode(r), r;
    }, e.prototype.removeFakeNode = function() {
      this.graphModel.removeFakeNode();
    }, e.prototype.setNodeSnapLine = function(t) {
      var n;
      (n = this.snaplineModel) === null || n === void 0 || n.setNodeSnapLine(t);
    }, e.prototype.removeNodeSnapLine = function() {
      var t;
      (t = this.snaplineModel) === null || t === void 0 || t.clearSnapline();
    }, e.prototype.setDefaultEdgeType = function(t) {
      this.graphModel.setDefaultEdgeType(t);
    }, e.prototype.addEdge = function(t) {
      return this.graphModel.addEdge(t);
    }, e.prototype.getEdgeDataById = function(t) {
      var n = this.getEdgeModelById(t);
      return n == null ? void 0 : n.getData();
    }, e.prototype.getEdgeModelById = function(t) {
      return this.graphModel.getEdgeModelById(t);
    }, e.prototype.getEdgeModels = function(t) {
      var n = t.sourceNodeId, r = t.targetNodeId, i = [], o = this.graphModel.edges;
      return n && r ? st(o, function(a) {
        a.sourceNodeId === n && a.targetNodeId === r && i.push(a);
      }) : n ? st(o, function(a) {
        a.sourceNodeId === n && i.push(a);
      }) : r && st(o, function(a) {
        a.targetNodeId === r && i.push(a);
      }), i;
    }, e.prototype.changeEdgeId = function(t, n) {
      return this.graphModel.changeEdgeId(t, n);
    }, e.prototype.changeEdgeType = function(t, n) {
      this.graphModel.changeEdgeType(t, n);
    }, e.prototype.deleteEdge = function(t) {
      var n = this.graphModel.getEdgeModelById(t);
      if (!n)
        return !1;
      var r = n.getData(), i = this.options.guards, o = i != null && i.beforeDelete ? i.beforeDelete(r) : !0;
      return o && this.graphModel.deleteEdgeById(t), o;
    }, e.prototype.deleteEdgeByNodeId = function(t) {
      var n = t.sourceNodeId, r = t.targetNodeId;
      n && r ? this.graphModel.deleteEdgeBySourceAndTarget(n, r) : n ? this.graphModel.deleteEdgeBySource(n) : r && this.graphModel.deleteEdgeByTarget(r);
    }, e.prototype.getNodeEdges = function(t) {
      return this.graphModel.getNodeEdges(t);
    }, e.prototype.addElements = function(t, n) {
      var r = this, i = t.nodes, o = t.edges;
      n === void 0 && (n = 40), console.log("distance", n);
      var a = {}, s = {
        nodes: [],
        edges: []
      };
      return st(i, function(l) {
        var u = l.id, c = r.addNode(l);
        u && (a[u] = c.id), s.nodes.push(c);
      }), st(o, function(l) {
        var u = l.sourceNodeId, c = l.targetNodeId;
        a[u] && (u = a[u]), a[c] && (c = a[c]);
        var d = r.graphModel.addEdge(No(No({}, l), { sourceNodeId: u, targetNodeId: c }));
        s.edges.push(d);
      }), s;
    }, e.prototype.selectElementById = function(t, n, r) {
      n === void 0 && (n = !1), r === void 0 && (r = !0), this.graphModel.selectElementById(t, n), !n && r && this.graphModel.toFront(t);
    }, e.prototype.getSelectElements = function(t) {
      return t === void 0 && (t = !0), this.graphModel.getSelectElements(t);
    }, e.prototype.clearSelectElements = function() {
      this.graphModel.clearSelectElements();
    }, e.prototype.getModelById = function(t) {
      return this.graphModel.getElement(t);
    }, e.prototype.getDataById = function(t) {
      var n;
      return (n = this.graphModel.getElement(t)) === null || n === void 0 ? void 0 : n.getData();
    }, e.prototype.deleteElement = function(t) {
      var n, r, i, o = this.getModelById(t);
      if (!o)
        return !1;
      var a = (n = {}, n[un.NODE] = this.deleteNode, n[un.EDGE] = this.deleteEdge, n);
      return (i = (r = a[o.BaseType]) === null || r === void 0 ? void 0 : r.call(this, t)) !== null && i !== void 0 ? i : !1;
    }, e.prototype.setElementZIndex = function(t, n) {
      return this.graphModel.setElementZIndex(t, n);
    }, e.prototype.getAreaElement = function(t, n, r, i, o) {
      return r === void 0 && (r = !0), i === void 0 && (i = !0), o === void 0 && (o = !1), this.graphModel.getAreaElement(t, n, r, i, o).map(function(a) {
        return a.getData();
      });
    }, e.prototype.setProperties = function(t, n) {
      var r;
      (r = this.graphModel.getElement(t)) === null || r === void 0 || r.setProperties(zn(n));
    }, e.prototype.getProperties = function(t) {
      var n;
      return (n = this.graphModel.getElement(t)) === null || n === void 0 ? void 0 : n.getProperties();
    }, e.prototype.deleteProperty = function(t, n) {
      var r;
      (r = this.graphModel.getElement(t)) === null || r === void 0 || r.deleteProperty(n);
    }, e.prototype.updateAttributes = function(t, n) {
      this.graphModel.updateAttributes(t, n);
    }, e.prototype.editText = function(t) {
      this.graphModel.editText(t);
    }, e.prototype.updateText = function(t, n) {
      this.graphModel.updateText(t, n);
    }, e.prototype.updateEditConfig = function(t) {
      var n = this.graphModel, r = n.editConfigModel, i = n.transformModel;
      r.updateEditConfig(t), (t == null ? void 0 : t.stopMoveGraph) !== void 0 && i.updateTranslateLimits(t.stopMoveGraph), t != null && t.isSilentMode ? this.keyboard.disable() : this.keyboard.enable(!0);
    }, e.prototype.getEditConfig = function() {
      return this.graphModel.editConfigModel.getConfig();
    }, e.prototype.setTheme = function(t) {
      this.graphModel.setTheme(t);
    }, e.prototype.focusByElement = function(t) {
      var n = void 0, r = this.getNodeModelById(t);
      if (r) {
        var i = r.getData(), o = i.x, a = i.y;
        n = {
          x: o,
          y: a
        };
      }
      var s = this.getEdgeModelById(t);
      if (s) {
        var l = s.textPosition, o = l.x, a = l.y;
        n = {
          x: o,
          y: a
        };
      }
      n && this.focusByCoordinate(n);
    }, e.prototype.focusByCoordinate = function(t) {
      var n = this.graphModel, r = n.transformModel, i = n.width, o = n.height, a = t.x, s = t.y;
      r.focusOn(a, s, i, o);
    }, e.prototype.focusOn = function(t) {
      if (typeof t == "string")
        this.focusByElement(t);
      else if ("x" in t && "y" in t)
        this.focusByCoordinate(t);
      else {
        var n = t.id, r = t.coordinate;
        n && this.focusByElement(n), r && this.focusByCoordinate(r);
      }
    }, e.prototype.resize = function(t, n) {
      this.graphModel.resize(t, n), this.options.width = this.graphModel.width, this.options.height = this.graphModel.height;
    }, e.prototype.toFront = function(t) {
      this.graphModel.toFront(t);
    }, e.prototype.getPointByClient = function(t, n) {
      if (typeof t == "object")
        return this.graphModel.getPointByClient(t);
      if (typeof n == "number")
        return this.graphModel.getPointByClient({
          x: t,
          y: n
        });
    }, e.prototype.getGraphData = function() {
      for (var t = [], n = 0; n < arguments.length; n++)
        t[n] = arguments[n];
      var r = this.getGraphRawData();
      return this.adapterOut ? this.adapterOut.apply(this, Tp([r], $c(t), !1)) : r;
    }, e.prototype.getGraphRawData = function() {
      return this.graphModel.modelToGraphData();
    }, e.prototype.clearData = function() {
      this.graphModel.clearData();
    }, e.prototype.renderRawData = function(t) {
      this.graphModel.graphDataToModel(zn(t)), this.options.history !== !1 && this.history.watch(this.graphModel), s4(Q(HV, { getView: this.getView, tool: this.tool, options: this.options, dnd: this.dnd, snaplineModel: this.snaplineModel, graphModel: this.graphModel }), this.container), this.emit(Fe.GRAPH_RENDERED, {
        data: this.graphModel.modelToGraphData(),
        graphModel: this.graphModel
      });
    }, e.prototype.render = function(t) {
      var n = it(t);
      this.adapterIn && (n = this.adapterIn(n)), this.renderRawData(n);
    }, e.prototype.undo = function() {
      if (this.history.undoAble()) {
        var t = zn(this.history.undo());
        this.clearSelectElements(), this.graphModel.graphDataToModel(t);
      }
    }, e.prototype.redo = function() {
      if (this.history.redoAble()) {
        var t = zn(this.history.redo());
        this.clearSelectElements(), this.graphModel.graphDataToModel(t);
      }
    }, e.prototype.zoom = function(t, n) {
      var r = this.graphModel.transformModel;
      return r.zoom(t, n);
    }, e.prototype.resetZoom = function() {
      var t = this.graphModel.transformModel;
      t.resetZoom();
    }, e.prototype.setZoomMiniSize = function(t) {
      var n = this.graphModel.transformModel;
      n.setZoomMiniSize(t);
    }, e.prototype.setZoomMaxSize = function(t) {
      var n = this.graphModel.transformModel;
      n.setZoomMaxSize(t);
    }, e.prototype.getTransform = function() {
      var t = this.graphModel.transformModel, n = t.SCALE_X, r = t.SCALE_Y, i = t.TRANSLATE_X, o = t.TRANSLATE_Y;
      return {
        SCALE_X: n,
        SCALE_Y: r,
        TRANSLATE_X: i,
        TRANSLATE_Y: o
      };
    }, e.prototype.translate = function(t, n) {
      var r = this.graphModel.transformModel;
      r.translate(t, n);
    }, e.prototype.resetTranslate = function() {
      var t = this.graphModel.transformModel, n = t.TRANSLATE_X, r = t.TRANSLATE_Y;
      this.translate(-n, -r);
    }, e.prototype.translateCenter = function() {
      this.graphModel.translateCenter();
    }, e.prototype.fitView = function(t, n) {
      n === void 0 && (n = t), this.graphModel.fitView(t, n);
    }, e.prototype.openEdgeAnimation = function(t) {
      this.graphModel.openEdgeAnimation(t);
    }, e.prototype.closeEdgeAnimation = function(t) {
      this.graphModel.closeEdgeAnimation(t);
    }, e.prototype.on = function(t, n) {
      this.graphModel.eventCenter.on(t, n);
    }, e.prototype.off = function(t, n) {
      this.graphModel.eventCenter.off(t, n);
    }, e.prototype.once = function(t, n) {
      this.graphModel.eventCenter.once(t, n);
    }, e.prototype.emit = function(t, n) {
      this.graphModel.eventCenter.emit(t, n);
    }, e.use = function(t, n) {
      var r, i = t.pluginName;
      if (!i)
        throw new Error("请给插件指定 pluginName!");
      this.extensions.set(i, (r = {}, r[Pp] = Pp, r.extension = t, r.props = n, r));
    }, e.prototype.installPlugins = function(t) {
      var n = this;
      t === void 0 && (t = []);
      var r = Array.from(e.extensions, function(o) {
        var a = $c(o, 2), s = a[1];
        return s;
      }), i = Tp(Tp([], $c(this.plugins), !1), $c(r), !1);
      st(i, function(o) {
        var a, s;
        Pp in o ? (a = o.extension, s = o.props) : a = o;
        var l = a == null ? void 0 : a.pluginName;
        xS(t, l) === -1 && n.installPlugin(a, s);
      });
    }, e.prototype.installPlugin = function(t, n) {
      var r, i;
      if ("pluginName" in t && "install" in t) {
        var o = t.pluginName, a = t.install, s = t.render;
        o && (a && a.call(t, this, e), s && this.components.push(s.bind(t)), this.extension[o] = t);
        return;
      }
      var l = t, u = l.pluginName, c = new l({
        lf: this,
        LogicFlow: e,
        props: n,
        // TODO: 这里的 options 应该传入插件对应的 options，而不是全局的 options
        // 所以应该这么写 this.options.pluginsOptions[ExtensionCtor.pluginName] ?? {}
        options: (i = (r = this.options.pluginsOptions) === null || r === void 0 ? void 0 : r[u]) !== null && i !== void 0 ? i : {}
      });
      c.render && this.components.push(c.render.bind(c)), this.extension[u] = c;
    }, e.prototype.destroy = function() {
      this.graphModel.destroy();
    }, e.extensions = /* @__PURE__ */ new Map(), e;
  }()
);
(function(e) {
  e.toStringTag = "LF.".concat(e.name);
})(dg || (dg = {}));
const Xa = dg;
function qn(e) {
  return ry(e);
}
var YW = (
  /** @class */
  function() {
    function e() {
      globalThis._ids = this, this._ids = /* @__PURE__ */ new Set();
    }
    return e.prototype.generateId = function() {
      return "xxxxxxx".replace(/[x]/g, function(t) {
        var n = Math.random() * 16 | 0, r = t === "x" ? n : n & 3 | 8;
        return r.toString(16);
      });
    }, e.prototype.next = function() {
      for (var t = this.generateId(); this._ids.has(t); )
        t = this.generateId();
      return this._ids.add(t), t;
    }, e;
  }()
), KW = (globalThis == null ? void 0 : globalThis._ids) || new YW();
function dl() {
  return KW.next();
}
var N2 = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}();
(function(e) {
  N2(t, e);
  function t(n, r) {
    return n.id || (n.id = "Event_".concat(dl())), n.text || (n.text = ""), n.text && typeof n.text == "string" && (n.text = {
      value: n.text,
      x: n.x,
      y: n.y + 40
    }), e.call(this, n, r) || this;
  }
  return t.prototype.setAttributes = function() {
    this.r = 18;
  }, t.prototype.getConnectedTargetRules = function() {
    var n = e.prototype.getConnectedTargetRules.call(this), r = {
      message: "起始节点不能作为边的终点",
      validate: function() {
        return !1;
      }
    };
    return n.push(r), n;
  }, t.extendKey = "StartEventModel", t;
})($d);
(function(e) {
  N2(t, e);
  function t() {
    return e !== null && e.apply(this, arguments) || this;
  }
  return t.extendKey = "StartEventNode", t;
})(jd);
var M2 = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Gd = function() {
  return Gd = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Gd.apply(this, arguments);
};
(function(e) {
  M2(t, e);
  function t(n, r) {
    return n.id || (n.id = "Event_".concat(dl())), n.text || (n.text = ""), n.text && typeof n.text == "string" && (n.text = {
      value: n.text,
      x: n.x,
      y: n.y + 40
    }), e.call(this, n, r) || this;
  }
  return t.prototype.setAttributes = function() {
    this.r = 18;
  }, t.prototype.getConnectedSourceRules = function() {
    var n = e.prototype.getConnectedSourceRules.call(this), r = {
      message: "结束节点不能作为边的起点",
      validate: function() {
        return !1;
      }
    };
    return n.push(r), n;
  }, t.extendKey = "EndEventModel", t;
})($d);
(function(e) {
  M2(t, e);
  function t() {
    return e !== null && e.apply(this, arguments) || this;
  }
  return t.prototype.getAnchorStyle = function() {
    return {
      visibility: "hidden"
    };
  }, t.prototype.getShape = function() {
    var n = this.props.model, r = n.getNodeStyle(), i = n, o = i.x, a = i.y, s = i.r, l = e.prototype.getShape.call(this);
    return q("g", {}, l, q("circle", Gd(Gd({}, r), { cx: o, cy: a, r: s - 5 })));
  }, t.extendKey = "EndEventView", t;
})(jd);
var T2 = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}();
(function(e) {
  T2(t, e);
  function t(n, r) {
    return n.id || (n.id = "Flow_".concat(dl())), e.call(this, n, r) || this;
  }
  return t.extendKey = "SequenceFlowModel", t;
})(Fs);
(function(e) {
  T2(t, e);
  function t() {
    return e !== null && e.apply(this, arguments) || this;
  }
  return t.extendKey = "SequenceFlowEdge", t;
})(Vs);
var P2 = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), su = function() {
  return su = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, su.apply(this, arguments);
};
(function(e) {
  P2(t, e);
  function t(n, r) {
    var i = this;
    return n.id || (n.id = "Gateway_".concat(dl())), n.text || (n.text = ""), n.text && typeof n.text == "string" && (n.text = {
      value: n.text,
      x: n.x,
      y: n.y + 40
    }), i = e.call(this, n, r) || this, i.points = [
      [25, 0],
      [50, 25],
      [25, 50],
      [0, 25]
    ], i;
  }
  return t.extendKey = "ExclusiveGatewayModel", t;
})(kd);
(function(e) {
  P2(t, e);
  function t() {
    return e !== null && e.apply(this, arguments) || this;
  }
  return t.prototype.getShape = function() {
    var n = this.props.model, r = n, i = r.x, o = r.y, a = r.width, s = r.height, l = r.points, u = n.getNodeStyle();
    return q(
      "g",
      {
        transform: "matrix(1 0 0 1 ".concat(i - a / 2, " ").concat(o - s / 2, ")")
      },
      // @ts-ignore TODO: 确认 h('polygon') 报错的问题
      q("polygon", su(su({}, u), { x: i, y: o, points: l })),
      q("path", su({ d: "m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z" }, u))
    );
  }, t.extendKey = "ExclusiveGatewayNode", t;
})(Fd);
var D2 = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), fg = function() {
  return fg = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, fg.apply(this, arguments);
};
(function(e) {
  D2(t, e);
  function t(n, r) {
    return n.id || (n.id = "Activity_".concat(dl())), e.call(this, n, r) || this;
  }
  return t.extendKey = "ServiceTaskModel", t;
})(Hs);
(function(e) {
  D2(t, e);
  function t() {
    return e !== null && e.apply(this, arguments) || this;
  }
  return t.prototype.getLabelShape = function() {
    var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.getNodeStyle();
    return q("svg", {
      x: r - o / 2 + 5,
      y: i - a / 2 + 5,
      width: 30,
      height: 30,
      viewBox: "0 0 1274 1024"
    }, q("path", {
      fill: s.stroke,
      d: "M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"
    }));
  }, t.prototype.getShape = function() {
    var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.radius, l = n.getNodeStyle();
    return q("g", {}, [
      q("rect", fg({ x: r - o / 2, y: i - a / 2, rx: s, ry: s, width: o, height: a }, l)),
      this.getLabelShape()
    ]);
  }, t.extendKey = "ServiceTaskNode", t;
})(La);
var R2 = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Xd = function() {
  return Xd = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Xd.apply(this, arguments);
};
(function(e) {
  R2(t, e);
  function t(n, r) {
    return n.id || (n.id = "Activity_".concat(dl())), e.call(this, n, r) || this;
  }
  return t.extendKey = "UserTaskModel", t;
})(Hs);
(function(e) {
  R2(t, e);
  function t() {
    return e !== null && e.apply(this, arguments) || this;
  }
  return t.prototype.getLabelShape = function() {
    var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.getNodeStyle();
    return q("svg", {
      x: r - o / 2 + 5,
      y: i - a / 2 + 5,
      width: 25,
      height: 25,
      viewBox: "0 0 1274 1024"
    }, q("path", {
      fill: s.stroke,
      d: "M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"
    }));
  }, t.prototype.getShape = function() {
    var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.radius, l = n.getNodeStyle();
    return q("g", {}, [
      q("rect", Xd(Xd({}, l), { x: r - o / 2, y: i - a / 2, rx: s, ry: s, width: o, height: a })),
      this.getLabelShape()
    ]);
  }, t.extendKey = "UserTaskNode", t;
})(La);
var qW = (
  /** @class */
  function() {
    function e() {
      globalThis._ids = this, this._ids = /* @__PURE__ */ new Set();
    }
    return e.prototype.generateId = function() {
      return "xxxxxxx".replace(/[x]/g, function(t) {
        var n = Math.random() * 16 | 0, r = t === "x" ? n : n & 3 | 8;
        return r.toString(16);
      });
    }, e.prototype.next = function() {
      for (var t = this.generateId(); this._ids.has(t); )
        t = this.generateId();
      return this._ids.add(t), t;
    }, e;
  }()
), ZW = (globalThis == null ? void 0 : globalThis._ids) || new qW();
function e1() {
  return ZW.next();
}
function L2(e) {
  return Object.prototype.toString.call(e);
}
function JW(e) {
  return "  ".repeat(e);
}
function Ud(e) {
  var t = e;
  return L2(e) === "[object Object]" ? (t = {}, Object.keys(e).forEach(function(n) {
    var r = n;
    n.charAt(0) === "-" && (r = n.substring(1)), t[r] = Ud(e[n]);
  })) : Array.isArray(e) && (t = [], e.forEach(function(n, r) {
    t[r] = Ud(n);
  })), t;
}
function QW(e) {
  var t = e;
  try {
    typeof t != "string" && (t = JSON.parse(e));
  } catch {
    t = JSON.stringify(Ud(e)).replace(/"/g, "'");
  }
  return t;
}
var aa = `	
`;
function td(e, t, n) {
  var r = JW(n);
  if (e !== 0 && e !== !1 && !e)
    return aa + r + "<".concat(t, " />");
  var i = "";
  if (t === "#text")
    return aa + r + e;
  if (t === "#cdata-section")
    return aa + r + "<![CDATA[" + e + "]]>";
  if (t === "#comment")
    return aa + r + "<!--" + e + "-->";
  if ("".concat(t).charAt(0) === "-")
    return " " + t.substring(1) + '="' + QW(e) + '"';
  if (Array.isArray(e))
    e.forEach(function(l) {
      i += td(l, t, n + 1);
    });
  else if (L2(e) === "[object Object]") {
    var o = Object.keys(e), a = "", s = "";
    i += (n === 0 ? "" : aa + r) + "<" + t, o.forEach(function(l) {
      l.charAt(0) === "-" ? a += td(e[l], l, n + 1) : s += td(e[l], l, n + 1);
    }), i += a + (s !== "" ? ">".concat(s).concat(aa + r, "</").concat(t, ">") : " />");
  } else
    i += aa + r + "<".concat(t, ">").concat(e.toString(), "</").concat(t, ">");
  return i;
}
function $2(e) {
  var t = "";
  for (var n in e)
    t += td(e[n], n, 0);
  return t;
}
var rr = function() {
};
rr.ObjTree = function() {
  return this;
};
rr.ObjTree.VERSION = "0.23";
rr.ObjTree.prototype.xmlDecl = `<?xml version="1.0" encoding="UTF-8" ?>
`;
rr.ObjTree.prototype.attr_prefix = "-";
rr.ObjTree.prototype.parseXML = function(e) {
  var t;
  if (window.DOMParser) {
    var n = new DOMParser(), r = n.parseFromString(e, "application/xml");
    if (!r)
      return;
    t = r.documentElement;
  } else window.ActiveXObject && (n = new ActiveXObject("Microsoft.XMLDOM"), n.async = !1, n.loadXML(e), t = n.documentElement);
  if (t)
    return this.parseDOM(t);
};
rr.ObjTree.prototype.parseHTTP = function(e, t, n) {
  var r = {};
  for (var i in t)
    r[i] = t[i];
  if (r.method || (typeof r.postBody > "u" && typeof r.postbody > "u" && typeof r.parameters > "u" ? r.method = "get" : r.method = "post"), n) {
    r.asynchronous = !0;
    var o = this, a = n, s = r.onComplete;
    r.onComplete = function(c) {
      var d;
      c && c.responseXML && c.responseXML.documentElement && (d = o.parseDOM(c.responseXML.documentElement)), a(d, c), s && s(c);
    };
  } else
    r.asynchronous = !1;
  var l;
  if (typeof HTTP < "u" && HTTP.Request) {
    r.uri = e;
    var u = new HTTP.Request(r);
    u && (l = u.transport);
  } else if (typeof Ajax < "u" && Ajax.Request) {
    var u = new Ajax.Request(e, r);
    u && (l = u.transport);
  }
  if (n)
    return l;
  if (l && l.responseXML && l.responseXML.documentElement)
    return this.parseDOM(l.responseXML.documentElement);
};
rr.ObjTree.prototype.parseDOM = function(e) {
  if (e) {
    if (this.__force_array = {}, this.force_array)
      for (var t = 0; t < this.force_array.length; t++)
        this.__force_array[this.force_array[t]] = 1;
    var n = this.parseElement(e);
    if (this.__force_array[e.nodeName] && (n = [n]), e.nodeType != 11) {
      var r = {};
      r[e.nodeName] = n, n = r;
    }
    return n;
  }
};
rr.ObjTree.prototype.parseElement = function(e) {
  if (e.nodeType != 7) {
    if (e.nodeType == 3 || e.nodeType == 4 || e.nodeType == 8) {
      var t = e.nodeValue.match(/[^\x00-\x20]/);
      return t == null ? void 0 : e.nodeValue;
    }
    var n = null, r = {};
    if (e.attributes && e.attributes.length) {
      n = {};
      for (var i = 0; i < e.attributes.length; i++) {
        var o = e.attributes[i].nodeName;
        if (typeof o == "string") {
          var a = e.attributes[i].nodeValue;
          try {
            a = JSON.parse(e.attributes[i].nodeValue.replace(/'/g, '"'));
          } catch {
            a = e.attributes[i].nodeValue;
          }
          a && (o = this.attr_prefix + o, typeof r[o] > "u" && (r[o] = 0), r[o]++, this.addNode(n, o, r[o], a));
        }
      }
    }
    if (e.childNodes && e.childNodes.length) {
      var s = !0;
      n && (s = !1);
      for (var i = 0; i < e.childNodes.length && s; i++) {
        var l = e.childNodes[i].nodeType;
        l == 3 || l == 4 || l == 8 || (s = !1);
      }
      if (s) {
        n || (n = "");
        for (var i = 0; i < e.childNodes.length; i++)
          n += e.childNodes[i].nodeValue;
      } else {
        n || (n = {});
        for (var i = 0; i < e.childNodes.length; i++) {
          var o = e.childNodes[i].nodeName;
          if (typeof o == "string") {
            var a = this.parseElement(e.childNodes[i]);
            a && (typeof r[o] > "u" && (r[o] = 0), r[o]++, this.addNode(n, o, r[o], a));
          }
        }
      }
    } else
      n === null && (n = {});
    return n;
  }
};
rr.ObjTree.prototype.addNode = function(e, t, n, r) {
  this.__force_array[t] ? (n == 1 && (e[t] = []), e[t][e[t].length] = r) : n == 1 ? e[t] = r : n == 2 ? e[t] = [e[t], r] : e[t][e[t].length] = r;
};
rr.ObjTree.prototype.writeXML = function(e) {
  var t = this.hash_to_xml(null, e);
  return this.xmlDecl + t;
};
rr.ObjTree.prototype.hash_to_xml = function(e, t) {
  var n = [], r = [];
  for (var i in t)
    if (t.hasOwnProperty(i)) {
      var o = t[i];
      i.charAt(0) != this.attr_prefix ? typeof o > "u" || o == null ? n[n.length] = "<" + i + " />" : typeof o == "object" && o.constructor == Array ? n[n.length] = this.array_to_xml(i, o) : typeof o == "object" ? n[n.length] = this.hash_to_xml(i, o) : n[n.length] = this.scalar_to_xml(i, o) : r[r.length] = " " + i.substring(1) + '="' + this.xml_escape(o) + '"';
    }
  var a = r.join(""), s = n.join("");
  return typeof e > "u" || e == null || (n.length > 0 ? s.match(/\n/) ? s = "<" + e + a + `>
` + s + "</" + e + `>
` : s = "<" + e + a + ">" + s + "</" + e + `>
` : s = "<" + e + a + ` />
`), s;
};
rr.ObjTree.prototype.array_to_xml = function(e, t) {
  for (var n = [], r = 0; r < t.length; r++) {
    var i = t[r];
    typeof i > "u" || i == null ? n[n.length] = "<" + e + " />" : typeof i == "object" && i.constructor == Array ? n[n.length] = this.array_to_xml(e, i) : typeof i == "object" ? n[n.length] = this.hash_to_xml(e, i) : n[n.length] = this.scalar_to_xml(e, i);
  }
  return n.join("");
};
rr.ObjTree.prototype.scalar_to_xml = function(e, t) {
  return e == "#text" ? this.xml_escape(t) : "<" + e + ">" + this.xml_escape(t) + "</" + e + `>
`;
};
rr.ObjTree.prototype.xml_escape = function(e) {
  return e.replace(/&/g, "&").replace(/</g, "<").replace(/>/g, ">").replace(/"/g, '"');
};
var k2 = function(e) {
  return new rr.ObjTree().parseXML(e);
}, eG = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), hg = function() {
  return hg = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, hg.apply(this, arguments);
}, uh = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Xi;
(function(e) {
  e.START = "bpmn:startEvent", e.END = "bpmn:endEvent", e.GATEWAY = "bpmn:exclusiveGateway", e.USER = "bpmn:userTask", e.SYSTEM = "bpmn:serviceTask", e.FLOW = "bpmn:sequenceFlow";
})(Xi || (Xi = {}));
var I2 = [
  "-name",
  "-id",
  "bpmn:incoming",
  "bpmn:outgoing",
  "-sourceRef",
  "-targetRef"
], t1 = [
  "properties",
  "startPoint",
  "endPoint",
  "pointsList"
];
function n1(e) {
  var t = e ? t1.concat(e) : t1;
  return function(n) {
    function r(i) {
      var o = {};
      return typeof i == "string" ? i : Array.isArray(i) ? i.map(function(a) {
        return r(a);
      }) : (Object.entries(i).forEach(function(a) {
        var s = uh(a, 2), l = s[0], u = s[1];
        typeof u != "object" ? l.indexOf("-") === 0 || ["#text", "#cdata-section", "#comment"].includes(l) ? o[l] = u : o["-".concat(l)] = u : t.includes(l) ? o["-".concat(l)] = r(u) : o[l] = r(u);
      }), o);
    }
    return r(n);
  };
}
function Yd(e) {
  var t = {};
  return Object.entries(e).forEach(function(n) {
    var r = uh(n, 2), i = r[0], o = r[1];
    i.indexOf("-") === 0 ? t[i.substring(1)] = Ud(o) : typeof o == "string" ? t[i] = o : Object.prototype.toString.call(o) === "[object Object]" ? t[i] = Yd(o) : Array.isArray(o) ? t[i] = o.map(function(a) {
      return Yd(a);
    }) : t[i] = o;
  }), t;
}
function tG(e, t, n) {
  var r = /* @__PURE__ */ new Map();
  t.nodes.forEach(function(o) {
    var a, s = {
      "-id": o.id
      // 如果是xml的属性，json中属性用'-'开头
    };
    if (!((a = o.text) === null || a === void 0) && a.value && (s["-name"] = o.text.value), o.properties) {
      var l = n1(n)(o.properties);
      Object.assign(s, l);
    }
    r.set(o.id, s), e[o.type] ? Array.isArray(e[o.type]) ? e[o.type].push(s) : e[o.type] = [e[o.type], s] : e[o.type] = s;
  });
  var i = t.edges.map(function(o) {
    var a, s, l = r.get(o.targetNodeId);
    l["bpmn:incoming"] ? Array.isArray(l["bpmn:incoming"]) ? l["bpmn:incoming"].push(o.id) : l["bpmn:incoming"] = [l["bpmn:incoming"], o.id] : l["bpmn:incoming"] = o.id;
    var u = {
      "-id": o.id,
      "-sourceRef": o.sourceNodeId,
      "-targetRef": o.targetNodeId
    };
    if (!((a = o.text) === null || a === void 0) && a.value && (u["-name"] = (s = o.text) === null || s === void 0 ? void 0 : s.value), o.properties) {
      var c = n1(n)(o.properties);
      Object.assign(u, c);
    }
    return u;
  });
  t.edges.forEach(function(o) {
    var a = r.get(o.sourceNodeId);
    a["bpmn:outgoing"] ? Array.isArray(a["bpmn:outgoing"]) ? a["bpmn:outgoing"].push(o.id) : a["bpmn:outgoing"] = [a["bpmn:outgoing"], o.id] : a["bpmn:outgoing"] = o.id;
  }), e[Xi.FLOW] = i;
}
function nG(e, t) {
  e["bpmndi:BPMNEdge"] = t.edges.map(function(n) {
    var r, i = n.id, o = n.pointsList.map(function(s) {
      var l = s.x, u = s.y;
      return {
        "-x": l,
        "-y": u
      };
    }), a = {
      "-id": "".concat(i, "_di"),
      "-bpmnElement": i,
      "di:waypoint": o
    };
    return !((r = n.text) === null || r === void 0) && r.value && (a["bpmndi:BPMNLabel"] = {
      "dc:Bounds": {
        "-x": n.text.x - n.text.value.length * 10 / 2,
        "-y": n.text.y - 7,
        "-width": n.text.value.length * 10,
        "-height": 14
      }
    }), a;
  }), e["bpmndi:BPMNShape"] = t.nodes.map(function(n) {
    var r, i = n.id, o = 100, a = 80, s = n.x, l = n.y, u = ea.shapeConfigMap.get(n.type);
    u && (o = u.width, a = u.height), s -= o / 2, l -= a / 2;
    var c = {
      "-id": "".concat(i, "_di"),
      "-bpmnElement": i,
      "dc:Bounds": {
        "-x": s,
        "-y": l,
        "-width": o,
        "-height": a
      }
    };
    return !((r = n.text) === null || r === void 0) && r.value && (c["bpmndi:BPMNLabel"] = {
      "dc:Bounds": {
        "-x": n.text.x - n.text.value.length * 10 / 2,
        "-y": n.text.y - 7,
        "-width": n.text.value.length * 10,
        "-height": 14
      }
    }), c;
  });
}
function rG(e) {
  var t = [], n = [], r = e["bpmn:definitions"];
  if (r) {
    var i = r["bpmn:process"];
    Object.keys(i).forEach(function(o) {
      if (o.indexOf("bpmn:") === 0) {
        var a = i[o];
        if (o === Xi.FLOW) {
          var s = r["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];
          n = oG(a, s);
        } else {
          var l = r["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];
          t = t.concat(iG(a, l, o));
        }
      }
    });
  }
  return {
    nodes: t,
    edges: n
  };
}
function iG(e, t, n) {
  var r = [];
  if (Array.isArray(e))
    e.forEach(function(a) {
      var s;
      Array.isArray(t) ? s = t.find(function(u) {
        return u["-bpmnElement"] === a["-id"];
      }) : s = t;
      var l = r1(s, n, a);
      r.push(l);
    });
  else {
    var i = void 0;
    Array.isArray(t) ? i = t.find(function(a) {
      return a["-bpmnElement"] === e["-id"];
    }) : i = t;
    var o = r1(i, n, e);
    r.push(o);
  }
  return r;
}
function r1(e, t, n) {
  var r = Number(e["dc:Bounds"]["-x"]), i = Number(e["dc:Bounds"]["-y"]), o = n["-name"], a = ea.shapeConfigMap.get(t);
  a && (r += a.width / 2, i += a.height / 2);
  var s;
  Object.entries(n).forEach(function(d) {
    var f = uh(d, 2), h = f[0], p = f[1];
    I2.indexOf(h) === -1 && (s || (s = {}), s[h] = p);
  }), s && (s = Yd(s));
  var l;
  if (o && (l = {
    x: r,
    y: i,
    value: o
  }, e["bpmndi:BPMNLabel"] && e["bpmndi:BPMNLabel"]["dc:Bounds"])) {
    var u = e["bpmndi:BPMNLabel"]["dc:Bounds"];
    l.x = Number(u["-x"]) + Number(u["-width"]) / 2, l.y = Number(u["-y"]) + Number(u["-height"]) / 2;
  }
  var c = {
    id: e["-bpmnElement"],
    type: t,
    x: r,
    y: i,
    properties: s
  };
  return l && (c.text = l), c;
}
function oG(e, t) {
  var n = [];
  if (Array.isArray(e))
    e.forEach(function(i) {
      var o;
      Array.isArray(t) ? o = t.find(function(a) {
        return a["-bpmnElement"] === i["-id"];
      }) : o = t, n.push(i1(o, i));
    });
  else {
    var r = void 0;
    Array.isArray(t) ? r = t.find(function(i) {
      return i["-bpmnElement"] === e["-id"];
    }) : r = t, n.push(i1(r, e));
  }
  return n;
}
function i1(e, t) {
  var n, r = t["-name"] ? "".concat(t["-name"]) : "";
  if (r) {
    var i = e["bpmndi:BPMNLabel"]["dc:Bounds"], o = 0;
    r.split(`
`).forEach(function(l) {
      o < l.length && (o = l.length);
    }), n = {
      value: r,
      x: Number(i["-x"]) + o * 10 / 2,
      y: Number(i["-y"]) + 7
    };
  }
  var a;
  Object.entries(t).forEach(function(l) {
    var u = uh(l, 2), c = u[0], d = u[1];
    I2.indexOf(c) === -1 && (a || (a = {}), a[c] = d);
  }), a && (a = Yd(a));
  var s = {
    id: t["-id"],
    type: Xi.FLOW,
    pointsList: e["di:waypoint"].map(function(l) {
      return {
        x: Number(l["-x"]),
        y: Number(l["-y"])
      };
    }),
    sourceNodeId: t["-sourceRef"],
    targetNodeId: t["-targetRef"],
    properties: a
  };
  return n && (s.text = n), s;
}
var ea = (
  /** @class */
  function() {
    function e(t) {
      var n = t.lf, r = this;
      this.adapterOut = function(i, o) {
        var a = hg({}, r.processAttributes);
        tG(a, i, o);
        var s = {
          "-id": "BPMNPlane_1",
          "-bpmnElement": a["-id"]
        };
        nG(s, i);
        var l = r.definitionAttributes;
        l["bpmn:process"] = a, l["bpmndi:BPMNDiagram"] = {
          "-id": "BPMNDiagram_1",
          "bpmndi:BPMNPlane": s
        };
        var u = {
          "bpmn:definitions": l
        };
        return u;
      }, this.adapterIn = function(i) {
        if (i)
          return rG(i);
      }, n.adapterIn = function(i) {
        return r.adapterIn(i);
      }, n.adapterOut = function(i, o) {
        return r.adapterOut(i, o);
      }, this.processAttributes = {
        "-isExecutable": "true",
        "-id": "Process_".concat(e1())
      }, this.definitionAttributes = {
        "-id": "Definitions_".concat(e1()),
        "-xmlns:xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "-xmlns:bpmn": "http://www.omg.org/spec/BPMN/20100524/MODEL",
        "-xmlns:bpmndi": "http://www.omg.org/spec/BPMN/20100524/DI",
        "-xmlns:dc": "http://www.omg.org/spec/DD/20100524/DC",
        "-xmlns:di": "http://www.omg.org/spec/DD/20100524/DI",
        "-targetNamespace": "http://logic-flow.org",
        "-exporter": "logicflow",
        "-exporterVersion": "1.2.0"
      };
    }
    return e.prototype.setCustomShape = function(t, n) {
      e.shapeConfigMap.set(t, n);
    }, e.pluginName = "bpmn-adapter", e.shapeConfigMap = /* @__PURE__ */ new Map(), e;
  }()
);
ea.shapeConfigMap.set(Xi.START, {
  width: O_.width,
  height: O_.height
});
ea.shapeConfigMap.set(Xi.END, {
  width: A_.width,
  height: A_.height
});
ea.shapeConfigMap.set(Xi.GATEWAY, {
  width: N_.width,
  height: N_.height
});
ea.shapeConfigMap.set(Xi.SYSTEM, {
  width: M_.width,
  height: M_.height
});
ea.shapeConfigMap.set(Xi.USER, {
  width: T_.width,
  height: T_.height
});
(function(e) {
  eG(t, e);
  function t(n) {
    var r = e.call(this, n) || this;
    r.adapterXmlIn = function(o) {
      var a = k2(o);
      return r.adapterIn(a);
    }, r.adapterXmlOut = function(o, a) {
      var s = r.adapterOut(o, a);
      return $2(s);
    };
    var i = n.lf;
    return i.adapterIn = r.adapterXmlIn, i.adapterOut = r.adapterXmlOut, r;
  }
  return t.pluginName = "bpmnXmlAdapter", t;
})(ea);
var aG = (
  /** @class */
  function() {
    function e() {
      globalThis._ids = this, this._ids = /* @__PURE__ */ new Set();
    }
    return e.prototype.generateId = function() {
      var t = "xxxxxxx".replace(/[x]/g, function(n) {
        var r = Math.random() * 16 | 0, i = n === "x" ? r : r & 3 | 8;
        return i.toString(16);
      });
      return t;
    }, e.prototype.next = function() {
      for (var t = this.generateId(); this._ids.has(t); )
        t = this.generateId();
      return this._ids.add(t), t;
    }, e;
  }()
), sG = (globalThis == null ? void 0 : globalThis._ids) || new aG();
function lG() {
  return sG.next();
}
q("circle", {
  cx: 18,
  cy: 18,
  r: 11,
  style: "stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"
}), q("path", {
  d: "M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"
}), q("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(0,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), q("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(30,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), q("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(60,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), q("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(90,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), q("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(120,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), q("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(150,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), q("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(180,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), q("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(210,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), q("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(240,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), q("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(270,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), q("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(300,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
}), q("path", {
  d: "M 18,18 m 0,7.5 l -0,2.25",
  transform: "rotate(330,18,18)",
  style: "fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"
});
q("circle", {
  cx: 18,
  cy: 18,
  r: 10,
  style: "stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"
});
q("circle", {
  cx: 25,
  cy: 25,
  r: 13,
  style: "stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"
});
var uG = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), va = function() {
  return va = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, va.apply(this, arguments);
}, cG = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, dG = ni, fG = (
  /** @class */
  function(e) {
    uG(t, e);
    function t(n) {
      var r = e.call(this) || this;
      return r.updatePosition = function(i) {
        var o = i.deltaX, a = i.deltaY, s = r.nodeModel, l = s.x, u = s.y;
        r.nodeModel.x = l + o / 2, r.nodeModel.y = u + a / 2, r.nodeModel.moveText(o / 2, a / 2);
      }, r.getResize = function(i) {
        var o = i.index, a = i.deltaX, s = i.deltaY, l = i.width, u = i.height, c = i.PCTResizeInfo, d = i.pct, f = d === void 0 ? 1 : d, h = i.freezeWidth, p = h === void 0 ? !1 : h, v = i.freezeHeight, g = v === void 0 ? !1 : v, y = {
          width: l,
          height: u,
          deltaX: a,
          deltaY: s
        };
        if (c) {
          var m = 4, E = 0, w = 0;
          switch (o) {
            case 0:
              w = (a * -1 - s) / m;
              break;
            case 1:
              w = (a - s) / m;
              break;
            case 2:
              w = (a + s) / m;
              break;
            case 3:
              w = (a * -1 + s) / m;
              break;
          }
          w !== 0 && (E = Math.round(w / c.ResizeBasis.basisHeight * 1e5) / 1e3), c.ResizePCT.widthPCT = Math.max(Math.min(c.ResizePCT.widthPCT + E, c.ScaleLimit.maxScaleLimit), c.ScaleLimit.minScaleLimit), c.ResizePCT.heightPCT = Math.max(Math.min(c.ResizePCT.heightPCT + E, c.ScaleLimit.maxScaleLimit), c.ScaleLimit.minScaleLimit);
          var S = Math.round(c.ResizePCT.widthPCT * c.ResizeBasis.basisWidth / 100), _ = Math.round(c.ResizePCT.heightPCT * c.ResizeBasis.basisHeight / 100);
          switch (o) {
            case 0:
              a = l - S, s = u - _;
              break;
            case 1:
              a = S - l, s = u - _;
              break;
            case 2:
              a = S - l, s = _ - u;
              break;
            case 3:
              a = l - S, s = _ - u;
              break;
          }
          return y.width = S, y.height = _, y.deltaX = a / f, y.deltaY = s / f, y;
        }
        switch (o) {
          case 0:
            y.width = p ? l : l - a * f, y.height = g ? u : u - s * f;
            break;
          case 1:
            y.width = p ? l : l + a * f, y.height = g ? u : u - s * f;
            break;
          case 2:
            y.width = p ? l : l + a * f, y.height = g ? u : u + s * f;
            break;
          case 3:
            y.width = p ? l : l - a * f, y.height = g ? u : u + s * f;
            break;
        }
        return y;
      }, r.updateEdgePointByAnchors = function() {
        var i = r.nodeModel, o = i.id, a = i.anchors, s = r.getNodeEdges(o);
        s.sourceEdges.forEach(function(l) {
          var u = a.find(function(c) {
            return c.id === l.sourceAnchorId;
          });
          u && l.updateStartPoint({
            x: u.x,
            y: u.y
          });
        }), s.targetEdges.forEach(function(l) {
          var u = a.find(function(c) {
            return c.id === l.targetAnchorId;
          });
          u && l.updateEndPoint({
            x: u.x,
            y: u.y
          });
        });
      }, r.updateRect = function(i) {
        var o = i.deltaX, a = i.deltaY, s = r.nodeModel, l = s.x, u = s.y, c = s.width, d = s.height, f = s.radius, h = s.PCTResizeInfo, p = r.nodeModel, v = p.minWidth, g = p.minHeight, y = p.maxWidth, m = p.maxHeight, E = r.index, w = v === y, S = g === m, _ = r.getResize({
          index: E,
          deltaX: o,
          deltaY: a,
          width: c,
          height: d,
          PCTResizeInfo: h,
          pct: 1,
          freezeWidth: w,
          freezeHeight: S
        });
        if (_.width < v || _.width > y || _.height < g || _.height > m) {
          r.dragHandler.cancelDrag();
          return;
        }
        r.updatePosition({
          deltaX: w ? 0 : _.deltaX,
          deltaY: S ? 0 : _.deltaY
        }), r.nodeModel.width = _.width, r.nodeModel.height = _.height, r.nodeModel.setProperties({
          nodeSize: {
            width: _.width,
            height: _.height
          }
        });
        var b = {
          x: l,
          y: u,
          width: c,
          height: d,
          radius: f
        }, T = {
          x: r.nodeModel.x,
          y: r.nodeModel.y,
          width: r.nodeModel.width,
          height: r.nodeModel.height,
          radius: f
        };
        r.updateEdgePointByAnchors(), r.eventEmit({
          deltaX: o,
          deltaY: a,
          beforeNode: b,
          afterNode: T
        });
      }, r.updateEllipse = function(i) {
        var o = i.deltaX, a = i.deltaY, s = r.nodeModel, l = s.rx, u = s.ry, c = s.x, d = s.y, f = s.PCTResizeInfo, h = r.index, p = r.nodeModel, v = p.minWidth, g = p.minHeight, y = p.maxWidth, m = p.maxHeight, E = v === y, w = g === m, S = l, _ = u, b = r.getResize({
          index: h,
          deltaX: o,
          deltaY: a,
          width: S,
          height: _,
          PCTResizeInfo: f,
          pct: 1 / 2,
          freezeWidth: E,
          freezeHeight: w
        });
        if (b.width < v / 2 || b.width > y / 2 || b.height < g / 2 || b.height > m / 2) {
          r.dragHandler.cancelDrag();
          return;
        }
        r.updatePosition({
          deltaX: E ? 0 : b.deltaX,
          deltaY: w ? 0 : b.deltaY
        }), r.nodeModel.rx = b.width, r.nodeModel.ry = b.height, r.nodeModel.setProperties({
          nodeSize: {
            rx: b.width,
            ry: b.height
          }
        });
        var T = {
          x: c,
          y: d
        }, R = {
          rx: b.width,
          ry: b.height,
          x: r.nodeModel.x,
          y: r.nodeModel.y
        };
        r.updateEdgePointByAnchors(), r.eventEmit({
          deltaX: o,
          deltaY: a,
          beforeNode: va(va({}, T), { rx: l, ry: u }),
          afterNode: R
        });
      }, r.updateDiamond = function(i) {
        var o = i.deltaX, a = i.deltaY, s = r.nodeModel, l = s.rx, u = s.ry, c = s.x, d = s.y, f = s.PCTResizeInfo, h = r.index, p = r.nodeModel, v = p.minWidth, g = p.minHeight, y = p.maxWidth, m = p.maxHeight, E = v === y, w = g === m, S = l, _ = u, b = r.getResize({
          index: h,
          deltaX: o,
          deltaY: a,
          width: S,
          height: _,
          PCTResizeInfo: f,
          pct: 1 / 2,
          freezeWidth: E,
          freezeHeight: w
        });
        if (b.width < v / 2 || b.width > y / 2 || b.height < g / 2 || b.height > m / 2) {
          r.dragHandler.cancelDrag();
          return;
        }
        r.updatePosition({
          deltaX: E ? 0 : b.deltaX,
          deltaY: w ? 0 : b.deltaY
        }), r.nodeModel.rx = b.width, r.nodeModel.ry = b.height, r.nodeModel.setProperties({
          nodeSize: {
            rx: b.width,
            ry: b.height
          }
        });
        var T = {
          x: c,
          y: d,
          rx: l,
          ry: u
        }, R = {
          rx: b.width,
          ry: b.height,
          x: r.nodeModel.x,
          y: r.nodeModel.y
        };
        r.updateEdgePointByAnchors(), r.eventEmit({
          deltaX: o,
          deltaY: a,
          beforeNode: T,
          afterNode: R
        });
      }, r.eventEmit = function(i) {
        var o = i.deltaX, a = i.deltaY, s = i.beforeNode, l = i.afterNode, u = r.nodeModel, c = u.id, d = u.modelType, f = u.type, h = va({ id: c, modelType: d, type: f }, s), p = va({ id: c, modelType: d, type: f }, l);
        r.graphModel.eventCenter.emit("node:resize", {
          preData: h,
          data: p,
          deltaX: o,
          deltaY: a,
          index: r.index,
          model: r.nodeModel
        });
      }, r.onDragging = function(i) {
        var o, a = i.deltaX, s = i.deltaY, l = r.graphModel.transformModel, u = r.nodeModel.modelType;
        o = cG(l.fixDeltaXY(a, s), 2), a = o[0], s = o[1], u === gt.RECT_NODE || u === gt.HTML_NODE ? r.updateRect({
          deltaX: a,
          deltaY: s
        }) : u === gt.ELLIPSE_NODE ? r.updateEllipse({
          deltaX: a,
          deltaY: s
        }) : u === gt.DIAMOND_NODE && r.updateDiamond({
          deltaX: a,
          deltaY: s
        });
      }, r.onDragEnd = function() {
        var i = r.graphModel.gridSize, o = i === void 0 ? 1 : i, a = o * Math.round(r.nodeModel.x / o), s = o * Math.round(r.nodeModel.y / o);
        r.nodeModel.moveTo(a, s), r.updateEdgePointByAnchors();
      }, r.index = n.index, r.nodeModel = n.model, r.graphModel = n.graphModel, r.dragHandler = new dG({
        onDragging: r.onDragging,
        onDragEnd: r.onDragEnd,
        step: 1
      }), r;
    }
    return t.prototype.getNodeEdges = function(n) {
      for (var r = this.graphModel, i = r.edges, o = [], a = [], s = 0; s < i.length; s++) {
        var l = i[s];
        l.sourceNodeId === n ? o.push(l) : i[s].targetNodeId === n && a.push(l);
      }
      return {
        sourceEdges: o,
        targetEdges: a
      };
    }, t.prototype.render = function() {
      var n = this.props, r = n.x, i = n.y, o = n.index, a = n.model, s = a.getControlPointStyle();
      return Q("g", { className: "lf-resize-control-".concat(o), children: Q(Vr, va({ className: "lf-node-control", x: r, y: i }, s, { onMouseDown: this.dragHandler.handleMouseDown })) });
    }, t;
  }(Et)
), hG = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), Kd = function() {
  return Kd = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, Kd.apply(this, arguments);
}, ch = (
  /** @class */
  function(e) {
    hG(t, e);
    function t() {
      var n = e.call(this) || this;
      return n.state = {}, n;
    }
    return t.prototype.getResizeControl = function() {
      var n = this.props, r = n.model, i = n.graphModel, o = r.x, a = r.y, s = r.width, l = r.height, u = {
        minX: o - s / 2,
        minY: a - l / 2,
        maxX: o + s / 2,
        maxY: a + l / 2
      }, c = u.minX, d = u.minY, f = u.maxX, h = u.maxY, p = [
        // 左上角
        {
          x: c,
          y: d
        },
        // 右上角
        {
          x: f,
          y: d
        },
        // 右下角
        {
          x: f,
          y: h
        },
        // 左下角
        {
          x: c,
          y: h
        }
      ];
      return p.map(function(v, g) {
        return Q(fG, Kd({ index: g }, v, { model: r, graphModel: i }));
      });
    }, t.prototype.getGroupSolid = function() {
      var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.getResizeOutlineStyle();
      return Q(Vr, Kd({}, s, { x: r, y: i, width: o, height: a }));
    }, t.prototype.render = function() {
      return Q("g", { className: "lf-resize-control", children: [this.getGroupSolid(), this.getResizeControl()] });
    }, t;
  }(Et)
), B2 = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), pG = (
  /** @class */
  function(e) {
    B2(t, e);
    function t(n, r) {
      var i = e.call(this, n, r) || this, o = n.properties.nodeSize;
      return o && (i.rx = o.rx, i.ry = o.ry), i;
    }
    return t.prototype.initNodeData = function(n) {
      e.prototype.initNodeData.call(this, n), this.minWidth = 30, this.minHeight = 30, this.maxWidth = 2e3, this.maxHeight = 2e3;
    }, t.prototype.getOutlineStyle = function() {
      var n = e.prototype.getOutlineStyle.call(this), r = this.graphModel.editConfigModel.isSilentMode;
      return r || (n.stroke = "none", n.hover && (n.hover.stroke = "none")), n;
    }, t.prototype.getResizeOutlineStyle = function() {
      return {
        fill: "none",
        stroke: "transparent",
        strokeWidth: 1,
        strokeDasharray: "3,3"
      };
    }, t.prototype.getControlPointStyle = function() {
      return {
        width: 7,
        height: 7,
        fill: "#FFFFFF",
        stroke: "#000000"
      };
    }, t.prototype.enableProportionResize = function(n) {
      if (n === void 0 && (n = !0), n) {
        var r = {
          widthPCT: 100,
          heightPCT: 100
        }, i = {
          basisWidth: this.rx,
          basisHeight: this.ry
        }, o = {
          maxScaleLimit: Math.min(this.maxWidth / (this.rx * 2) * 100, this.maxHeight / (this.ry * 2) * 100),
          minScaleLimit: Math.max(this.minWidth / (this.rx * 2) * 100, this.minHeight / (this.ry * 2) * 100)
        };
        this.PCTResizeInfo = {
          ResizePCT: r,
          ResizeBasis: i,
          ScaleLimit: o
        };
      } else
        delete this.PCTResizeInfo;
    }, t;
  }(Vv)
), vG = (
  /** @class */
  function(e) {
    B2(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.getControlGroup = function() {
      var n = this.props, r = n.model, i = n.graphModel;
      return Q(ch, { model: r, graphModel: i });
    }, t.prototype.getResizeShape = function() {
      return e.prototype.getShape.call(this);
    }, t.prototype.getShape = function() {
      var n = this.props, r = n.model, i = n.graphModel.editConfigModel.isSilentMode;
      return Q("g", { children: [this.getResizeShape(), r.isSelected && !i ? this.getControlGroup() : ""] });
    }, t;
  }(tg)
), j2 = {
  type: "ellipse",
  view: vG,
  model: pG
}, z2 = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), pg = function() {
  return pg = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, pg.apply(this, arguments);
}, gG = (
  /** @class */
  function(e) {
    z2(t, e);
    function t(n, r) {
      var i = e.call(this, n, r) || this, o = n.properties.nodeSize;
      return o && (i.rx = o.rx, i.ry = o.ry), i;
    }
    return t.prototype.initNodeData = function(n) {
      e.prototype.initNodeData.call(this, n), this.minWidth = 30, this.minHeight = 30, this.maxWidth = 2e3, this.maxHeight = 2e3, this.gridSize = 1;
    }, t.prototype.getOutlineStyle = function() {
      var n = e.prototype.getOutlineStyle.call(this), r = this.graphModel.editConfigModel.isSilentMode;
      return r || (n.stroke = "none", n.hover && (n.hover.stroke = "none")), n;
    }, t.prototype.getResizeOutlineStyle = function() {
      return {
        fill: "none",
        stroke: "transparent",
        strokeWidth: 1,
        strokeDasharray: "3,3"
      };
    }, t.prototype.getControlPointStyle = function() {
      return {
        width: 7,
        height: 7,
        fill: "#FFFFFF",
        stroke: "#000000"
      };
    }, t.prototype.enableProportionResize = function(n) {
      if (n === void 0 && (n = !0), n) {
        var r = {
          widthPCT: 100,
          heightPCT: 100
        }, i = {
          basisWidth: this.rx,
          basisHeight: this.ry
        }, o = {
          maxScaleLimit: Math.min(this.maxWidth / (this.rx * 2) * 100, this.maxHeight / (this.ry * 2) * 100),
          minScaleLimit: Math.max(this.minWidth / (this.rx * 2) * 100, this.minHeight / (this.ry * 2) * 100)
        };
        this.PCTResizeInfo = {
          ResizePCT: r,
          ResizeBasis: i,
          ScaleLimit: o
        };
      } else
        delete this.PCTResizeInfo;
    }, t;
  }(Hv)
), yG = (
  /** @class */
  function(e) {
    z2(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.getControlGroup = function() {
      var n = this.props, r = n.model, i = n.graphModel;
      return Q(ch, { model: r, graphModel: i });
    }, t.prototype.getResizeShape = function() {
      var n = this.props.model, r = n.points, i = n.getNodeStyle();
      return Q("g", { children: Q(em, pg({}, i, { points: r })) });
    }, t.prototype.getShape = function() {
      var n = this.props, r = n.model.isSelected, i = n.graphModel.editConfigModel.isSilentMode;
      return Q("g", { children: [this.getResizeShape(), r && !i ? this.getControlGroup() : ""] });
    }, t;
  }(Qv)
), F2 = {
  type: "diamond",
  view: yG,
  model: gG
}, H2 = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}();
(function(e) {
  H2(t, e);
  function t(n, r) {
    var i = e.call(this, n, r) || this, o = n.properties.nodeSize;
    return o && (i.width = o.width, i.height = o.height), i;
  }
  return t.prototype.initNodeData = function(n) {
    e.prototype.initNodeData.call(this, n), this.minWidth = 30, this.minHeight = 30, this.maxWidth = 2e3, this.maxHeight = 2e3;
  }, t.prototype.getOutlineStyle = function() {
    var n = e.prototype.getOutlineStyle.call(this), r = this.graphModel.editConfigModel.isSilentMode;
    return r || (n.stroke = "none", n.hover && (n.hover.stroke = "none")), n;
  }, t.prototype.getResizeOutlineStyle = function() {
    return {
      fill: "none",
      stroke: "transparent",
      strokeWidth: 1,
      strokeDasharray: "3,3"
    };
  }, t.prototype.getControlPointStyle = function() {
    return {
      width: 7,
      height: 7,
      fill: "#FFFFFF",
      stroke: "#000000"
    };
  }, t.prototype.enableProportionResize = function(n) {
    if (n === void 0 && (n = !0), n) {
      var r = {
        widthPCT: 100,
        heightPCT: 100
      }, i = {
        basisWidth: this.width,
        basisHeight: this.height
      }, o = {
        maxScaleLimit: Math.min(this.maxWidth / this.width * 100, this.maxHeight / this.height * 100),
        minScaleLimit: Math.max(this.minWidth / this.width * 100, this.minHeight / this.height * 100)
      };
      this.PCTResizeInfo = {
        ResizePCT: r,
        ResizeBasis: i,
        ScaleLimit: o
      };
    } else
      delete this.PCTResizeInfo;
  }, t;
})(Gv);
(function(e) {
  H2(t, e);
  function t() {
    return e !== null && e.apply(this, arguments) || this;
  }
  return t.prototype.getControlGroup = function() {
    var n = this.props, r = n.model, i = n.graphModel;
    return Q(ch, { model: r, graphModel: i });
  }, t.prototype.getResizeShape = function() {
    return e.prototype.getShape.call(this);
  }, t.prototype.getShape = function() {
    var n = this.props, r = n.model.isSelected, i = n.graphModel.editConfigModel.isSilentMode;
    return Q("g", { children: [this.getResizeShape(), r && !i ? this.getControlGroup() : ""] });
  }, t;
})(ig);
var V2 = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), W2 = (
  /** @class */
  function(e) {
    V2(t, e);
    function t(n, r) {
      var i = e.call(this, n, r) || this, o = n.properties.nodeSize;
      return o && (i.width = o.width, i.height = o.height), i;
    }
    return t.prototype.initNodeData = function(n) {
      e.prototype.initNodeData.call(this, n), this.minWidth = 30, this.minHeight = 30, this.maxWidth = 2e3, this.maxHeight = 2e3;
    }, t.prototype.getOutlineStyle = function() {
      var n = e.prototype.getOutlineStyle.call(this), r = this.graphModel.editConfigModel.isSilentMode;
      return r || (n.stroke = "none", n.hover && (n.hover.stroke = "none")), n;
    }, t.prototype.getResizeOutlineStyle = function() {
      return {
        fill: "none",
        stroke: "transparent",
        // 矩形默认不显示调整边框
        strokeWidth: 1,
        strokeDasharray: "3,3"
      };
    }, t.prototype.getControlPointStyle = function() {
      return {
        width: 7,
        height: 7,
        fill: "#FFFFFF",
        stroke: "#000000"
      };
    }, t.prototype.enableProportionResize = function(n) {
      if (n === void 0 && (n = !0), n) {
        var r = {
          widthPCT: 100,
          heightPCT: 100
        }, i = {
          basisWidth: this.width,
          basisHeight: this.height
        }, o = {
          maxScaleLimit: Math.min(this.maxWidth / this.width * 100, this.maxHeight / this.height * 100),
          minScaleLimit: Math.max(this.minWidth / this.width * 100, this.minHeight / this.height * 100)
        };
        this.PCTResizeInfo = {
          ResizePCT: r,
          ResizeBasis: i,
          ScaleLimit: o
        };
      } else
        delete this.PCTResizeInfo;
    }, t;
  }(Hs)
), G2 = (
  /** @class */
  function(e) {
    V2(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.getControlGroup = function() {
      var n = this.props, r = n.model, i = n.graphModel;
      return Q(ch, { model: r, graphModel: i });
    }, t.prototype.getResizeShape = function() {
      return e.prototype.getShape.call(this);
    }, t.prototype.getShape = function() {
      var n = this.props, r = n.model.isSelected, i = n.graphModel.editConfigModel.isSilentMode;
      return Q("g", { children: [this.getResizeShape(), r && !i ? this.getControlGroup() : ""] });
    }, t;
  }(La)
), eo = {
  type: "rect",
  view: G2,
  model: W2
}, X2 = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), qd = function() {
  return qd = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, qd.apply(this, arguments);
}, sa = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, la = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
}, o1 = 500, a1 = 300, mG = -1e4;
(function(e) {
  X2(t, e);
  function t() {
    var n = e.apply(this, la([], sa(arguments), !1)) || this;
    return n.isGroup = !0, n.isFolded = !1, n.unfoldedWidth = o1, n.unfoldedHeight = a1, n.childrenLastFoldStatus = {}, n;
  }
  return t.prototype.initNodeData = function(n) {
    var r = this;
    e.prototype.initNodeData.call(this, n);
    var i = [];
    ut(n.children) && (i = n.children), this.children = new Set(i), this.width = o1, this.height = a1, this.foldedWidth = 80, this.foldedHeight = 60, this.zIndex = mG, this.radius = 0, this.text.editable = !1, this.text.draggable = !1, this.isRestrict = !1, this.resizable = !1, this.autoToFront = !1, this.foldable = !1, this.properties.isFolded === void 0 && (this.properties.isFolded = !1), this.isFolded = !!this.properties.isFolded, setTimeout(function() {
      r.isFolded && r.foldGroup(r.isFolded);
    });
  }, t.prototype.getResizeOutlineStyle = function() {
    var n = e.prototype.getResizeOutlineStyle.call(this);
    return n.stroke = "none", n;
  }, t.prototype.foldGroup = function(n) {
    var r = this;
    if (n !== this.isFolded) {
      this.setProperty("isFolded", n), this.isFolded = n, n ? (this.x = this.x - this.width / 2 + this.foldedWidth / 2, this.y = this.y - this.height / 2 + this.foldedHeight / 2, this.unfoldedWidth = this.width, this.unfoldedHeight = this.height, this.width = this.foldedWidth, this.height = this.foldedHeight) : (this.width = this.unfoldedWidth, this.height = this.unfoldedHeight, this.x = this.x + this.width / 2 - this.foldedWidth / 2, this.y = this.y + this.height / 2 - this.foldedHeight / 2);
      var i = la(la([], sa(this.incoming.edges), !1), sa(this.outgoing.edges), !1);
      this.children.forEach(function(o) {
        var a = r.graphModel.getElement(o);
        if (a) {
          var s = a.isFolded;
          if (a.isGroup && !a.isFolded && a.foldGroup(n), a.isGroup && !n) {
            var l = r.childrenLastFoldStatus[o];
            l !== void 0 && l !== a.isFolded && a.foldGroup(l);
          }
          r.childrenLastFoldStatus[o] = !!s, a.visible = !n;
          var u = a.incoming.edges, c = a.outgoing.edges;
          i = la(la(la([], sa(i), !1), sa(u), !1), sa(c), !1);
        }
      }), this.foldEdge(n, i);
    }
  }, t.prototype.getAnchorStyle = function(n) {
    var r = e.prototype.getAnchorStyle.call(this, n);
    return r.stroke = "transparent", r.fill = "transparent", r.hover.fill = "transparent", r.hover.stroke = "transparent", r;
  }, t.prototype.foldEdge = function(n, r) {
    var i = this;
    r.forEach(function(o, a) {
      var s = o.id, l = o.sourceNodeId, u = o.targetNodeId, c = o.startPoint, d = o.endPoint, f = o.type, h = o.text, p = o.getProperties(), v = {
        id: "".concat(s, "__").concat(a),
        sourceNodeId: l,
        targetNodeId: u,
        startPoint: c,
        endPoint: d,
        type: f,
        properties: p,
        text: h == null ? void 0 : h.value
      };
      o.virtual && i.graphModel.deleteEdgeById(o.id);
      var g = i.graphModel.group.getNodeGroup(u);
      g || (g = i.graphModel.getNodeModelById(u));
      var y = i.graphModel.group.getNodeGroup(l);
      y || (y = i.graphModel.getNodeModelById(l)), n && o.visible !== !1 && (i.children.has(l) || i.id === l ? (v.startPoint = void 0, v.sourceNodeId = i.id) : (v.endPoint = void 0, v.targetNodeId = i.id), (g.id !== i.id || y.id !== i.id) && i.createVirtualEdge(v), o.visible = !1), !n && o.visible === !1 && (g && g.isGroup && g.isFolded ? (v.targetNodeId = g.id, v.endPoint = void 0, i.createVirtualEdge(v)) : y && y.isGroup && y.isFolded ? (v.sourceNodeId = y.id, v.startPoint = void 0, i.createVirtualEdge(v)) : o.visible = !0);
    });
  }, t.prototype.createVirtualEdge = function(n) {
    n.pointsList = void 0;
    var r = this.graphModel.addEdge(n);
    r.virtual = !0, r.text.editable = !1, r.isFoldedEdge = !0;
  }, t.prototype.isInRange = function(n) {
    var r = n.minX, i = n.minY, o = n.maxX, a = n.maxY;
    return r >= this.x - this.width / 2 && o <= this.x + this.width / 2 && i >= this.y - this.height / 2 && a <= this.y + this.height / 2;
  }, t.prototype.isAllowMoveTo = function(n) {
    var r = n.minX, i = n.minY, o = n.maxX, a = n.maxY;
    return {
      x: r >= this.x - this.width / 2 && o <= this.x + this.width / 2,
      y: i >= this.y - this.height / 2 && a <= this.y + this.height / 2
    };
  }, t.prototype.setAllowAppendChild = function(n) {
    this.setProperty("groupAddable", n);
  }, t.prototype.addChild = function(n) {
    this.children.add(n), this.graphModel.eventCenter.emit("group:add-node", { data: this.getData() });
  }, t.prototype.removeChild = function(n) {
    this.children.delete(n), this.graphModel.eventCenter.emit("group:remove-node", {
      data: this.getData()
    });
  }, t.prototype.getAddableOutlineStyle = function() {
    return {
      stroke: "#FEB663",
      strokeWidth: 2,
      strokeDasharray: "4 4",
      fill: "transparent"
    };
  }, t.prototype.getData = function() {
    var n = this, r = e.prototype.getData.call(this);
    r.children = [], console.log("this.children", this.children), this.children.forEach(function(o) {
      var a = n.graphModel.getNodeModelById(o);
      a && !a.virtual && r.children.push(o);
    });
    var i = r.properties;
    return i == null || delete i.groupAddable, i == null || delete i.isFolded, r;
  }, t.prototype.getHistoryData = function() {
    var n = e.prototype.getData.call(this);
    n.children = la([], sa(this.children), !1), n.isGroup = !0;
    var r = n.properties;
    return r == null || delete r.groupAddable, r != null && r.isFolded && (n.x = n.x + this.unfoldedWidth / 2 - this.foldedWidth / 2, n.y = n.y + this.unfoldedHeight / 2 - this.foldedHeight / 2), n;
  }, t.prototype.isAllowAppendIn = function(n) {
    return console.info("_nodeData", n), !0;
  }, t.prototype.toBack = function() {
    this.zIndex--;
  }, t;
})(W2);
(function(e) {
  X2(t, e);
  function t() {
    return e !== null && e.apply(this, arguments) || this;
  }
  return t.prototype.getControlGroup = function() {
    var n = this.props.model, r = n.resizable, i = n.properties;
    return r && !i.isFolded ? e.prototype.getControlGroup.call(this) : null;
  }, t.prototype.getAddableShape = function() {
    var n = this.props.model, r = n.width, i = n.height, o = n.x, a = n.y, s = n.radius, l = n.properties, u = n.getAddableOutlineStyle;
    if (!l.groupAddable)
      return null;
    var c = this.props.model.getNodeStyle().strokeWidth, d = c === void 0 ? 0 : c, f = u(), h = r + d + 8, p = i + d + 8;
    return q("rect", qd(qd({}, f), { width: h, height: p, x: o - h / 2, y: a - p / 2, rx: s, ry: s }));
  }, t.prototype.getFoldIcon = function() {
    var n = this.props.model, r = n.x - n.width / 2 + 5, i = n.y - n.height / 2 + 5;
    if (!n.foldable)
      return null;
    var o = q("path", {
      fill: "none",
      stroke: "#818281",
      strokeWidth: 2,
      "pointer-events": "none",
      d: n.properties.isFolded ? "M ".concat(r + 3, ",").concat(i + 6, " ").concat(r + 11, ",").concat(i + 6, " M").concat(r + 7, ",").concat(i + 2, " ").concat(r + 7, ",").concat(i + 10) : "M ".concat(r + 3, ",").concat(i + 6, " ").concat(r + 11, ",").concat(i + 6, " ")
    });
    return q("g", {}, [
      q("rect", {
        height: 12,
        width: 14,
        rx: 2,
        ry: 2,
        strokeWidth: 1,
        fill: "#F4F5F6",
        stroke: "#CECECE",
        cursor: "pointer",
        x: n.x - n.width / 2 + 5,
        y: n.y - n.height / 2 + 5,
        onClick: function() {
          n.foldGroup(!n.properties.isFolded);
        }
      }),
      o
    ]);
  }, t.prototype.getResizeShape = function() {
    return q("g", {}, [
      this.getAddableShape(),
      e.prototype.getResizeShape.call(this),
      this.getFoldIcon()
    ]);
  }, t;
})(G2);
var s1 = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), lu = function() {
  return lu = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, lu.apply(this, arguments);
};
function _G(e) {
  var t = (
    /** @class */
    function(r) {
      s1(i, r);
      function i(o, a) {
        o.id || (o.id = "Flow_".concat(lG()));
        var s = lu(lu(lu({}, {}), o.properties), {
          // panels: ['condition'],
          isDefaultFlow: !1
        });
        return o.properties = s, r.call(this, o, a) || this;
      }
      return i.extendKey = "SequenceFlowModel", i;
    }(Fs)
  ), n = (
    /** @class */
    function(r) {
      s1(i, r);
      function i() {
        return r !== null && r.apply(this, arguments) || this;
      }
      return i.prototype.getStartArrow = function() {
        var o = this.props.model, a = o.properties.isDefaultFlow;
        return a ? q("path", {
          refX: 15,
          stroke: "#000000",
          strokeWidth: 2,
          d: "M 20 5 10 -5 z"
        }) : q("path", {
          d: ""
        });
      }, i.extendKey = "SequenceFlowEdge", i;
    }(Vs)
  );
  return {
    type: "bpmn:sequenceFlow",
    view: n,
    model: t
  };
}
_G();
var l1 = {
  width: 40,
  height: 40
}, u1 = {
  width: 40,
  height: 40
}, c1 = {
  width: 100,
  height: 80
}, Zd = {
  width: 100,
  height: 80
}, d1 = {
  width: 100,
  height: 80
}, f1 = {
  width: 100,
  height: 80
}, h1 = {
  width: 100,
  height: 80
}, p1 = {
  width: 100,
  height: 80
}, v1 = {
  width: 100,
  height: 80
}, g1 = {
  width: 100,
  height: 80
}, ir = function() {
};
ir.ObjTree = function() {
  return this;
};
ir.ObjTree.VERSION = "0.23";
ir.ObjTree.prototype.xmlDecl = `<?xml version="1.0" encoding="UTF-8" ?>
`;
ir.ObjTree.prototype.attr_prefix = "-";
ir.ObjTree.prototype.parseXML = function(e) {
  var t;
  if (window.DOMParser) {
    var n = new DOMParser(), r = n.parseFromString(e, "application/xml");
    if (!r)
      return;
    t = r.documentElement;
  } else window.ActiveXObject && (n = new ActiveXObject("Microsoft.XMLDOM"), n.async = !1, n.loadXML(e), t = n.documentElement);
  if (t) {
    var i = this.parseDOM(t);
    return i;
  }
};
ir.ObjTree.prototype.parseHTTP = function(e, t, n) {
  var r = {};
  for (var i in t)
    r[i] = t[i];
  if (r.method || (typeof r.postBody > "u" && typeof r.postbody > "u" && typeof r.parameters > "u" ? r.method = "get" : r.method = "post"), n) {
    r.asynchronous = !0;
    var o = this, a = n, s = r.onComplete;
    r.onComplete = function(c) {
      var d;
      c && c.responseXML && c.responseXML.documentElement && (d = o.parseDOM(c.responseXML.documentElement)), a(d, c), s && s(c);
    };
  } else
    r.asynchronous = !1;
  var l;
  if (typeof HTTP < "u" && HTTP.Request) {
    r.uri = e;
    var u = new HTTP.Request(r);
    u && (l = u.transport);
  } else if (typeof Ajax < "u" && Ajax.Request) {
    var u = new Ajax.Request(e, r);
    u && (l = u.transport);
  }
  if (n)
    return l;
  if (l && l.responseXML && l.responseXML.documentElement)
    return this.parseDOM(l.responseXML.documentElement);
};
ir.ObjTree.prototype.parseDOM = function(e) {
  if (e) {
    if (this.__force_array = {}, this.force_array)
      for (var t = 0; t < this.force_array.length; t++)
        this.__force_array[this.force_array[t]] = 1;
    var n = this.parseElement(e);
    if (this.__force_array[e.nodeName] && (n = [n]), e.nodeType !== 11) {
      var r = {};
      r[e.nodeName] = n, n = r;
    }
    return n;
  }
};
ir.ObjTree.prototype.parseElement = function(e) {
  if (e.nodeType !== 7) {
    if (e.nodeType === 3 || e.nodeType === 4 || e.nodeType === 8) {
      var t = e.nodeValue.match(/[^\x00-\x20]/);
      return t == null ? void 0 : e.nodeValue;
    }
    var n = null, r = {};
    if (e.attributes && e.attributes.length) {
      n = {};
      for (var i = 0; i < e.attributes.length; i++) {
        var o = e.attributes[i].nodeName;
        if (typeof o == "string") {
          var a = e.attributes[i].nodeValue;
          try {
            a = JSON.parse(e.attributes[i].nodeValue.replace(/'/g, '"'));
          } catch {
            a = e.attributes[i].nodeValue;
          }
          a != null && (o = this.attr_prefix + o, typeof r[o] > "u" && (r[o] = 0), r[o]++, this.addNode(n, o, r[o], a));
        }
      }
    }
    if (e.childNodes && e.childNodes.length) {
      var s = !0;
      n && (s = !1);
      for (var i = 0; i < e.childNodes.length && s; i++) {
        var l = e.childNodes[i].nodeType;
        l === 3 || l === 4 || l === 8 || (s = !1);
      }
      if (s) {
        n || (n = "");
        for (var i = 0; i < e.childNodes.length; i++)
          n += e.childNodes[i].nodeValue;
      } else {
        n || (n = {});
        for (var i = 0; i < e.childNodes.length; i++) {
          var o = e.childNodes[i].nodeName;
          if (typeof o == "string") {
            var a = this.parseElement(e.childNodes[i]);
            a && (typeof r[o] > "u" && (r[o] = 0), r[o]++, this.addNode(n, o, r[o], a));
          }
        }
      }
    } else
      n === null && (n = {});
    return n;
  }
};
ir.ObjTree.prototype.addNode = function(e, t, n, r) {
  this.__force_array[t] ? (n === 1 && (e[t] = []), e[t][e[t].length] = r) : n === 1 ? e[t] = r : n === 2 ? e[t] = [e[t], r] : e[t][e[t].length] = r;
};
ir.ObjTree.prototype.writeXML = function(e) {
  var t = this.hash_to_xml(null, e);
  return this.xmlDecl + t;
};
ir.ObjTree.prototype.hash_to_xml = function(e, t) {
  var n = [], r = [];
  for (var i in t)
    if ($s(t, i)) {
      var o = t[i];
      i.charAt(0) !== this.attr_prefix ? typeof o > "u" || o == null ? n[n.length] = "<".concat(i, " />") : typeof o == "object" && o.constructor === Array ? n[n.length] = this.array_to_xml(i, o) : typeof o == "object" ? n[n.length] = this.hash_to_xml(i, o) : n[n.length] = this.scalar_to_xml(i, o) : r[r.length] = " ".concat(i.substring(1), '="').concat(this.xml_escape(o), '"');
    }
  var a = r.join(""), s = n.join("");
  return typeof e > "u" || e == null || (n.length > 0 ? s.match(/\n/) ? s = "<".concat(e).concat(a, `>
`).concat(s, "</").concat(e, `>
`) : s = "<".concat(e).concat(a, ">").concat(s, "</").concat(e, `>
`) : s = "<".concat(e).concat(a, ` />
`)), s;
};
ir.ObjTree.prototype.array_to_xml = function(e, t) {
  for (var n = [], r = 0; r < t.length; r++) {
    var i = t[r];
    typeof i > "u" || i == null ? n[n.length] = "<".concat(e, " />") : typeof i == "object" && i.constructor === Array ? n[n.length] = this.array_to_xml(e, i) : typeof i == "object" ? n[n.length] = this.hash_to_xml(e, i) : n[n.length] = this.scalar_to_xml(e, i);
  }
  return n.join("");
};
ir.ObjTree.prototype.scalar_to_xml = function(e, t) {
  return e === "#text" ? this.xml_escape(t) : "<".concat(e, ">").concat(this.xml_escape(t), "</").concat(e, `>
`);
};
ir.ObjTree.prototype.xml_escape = function(e) {
  return e.replace(/&/g, "&").replace(/</g, "<").replace(/>/g, ">").replace(/"/g, '"');
};
var bG = function(e) {
  return new ir.ObjTree().parseXML(e);
};
function U2(e) {
  return Object.prototype.toString.call(e);
}
function y1(e) {
  return "  ".repeat(e);
}
function Jd(e) {
  return U2(e) === "[object Object]" ? Object.keys(e).reduce(function(t, n) {
    var r = n;
    return n.charAt(0) === "-" && (r = n.substring(1)), t[r] = Jd(e[n]), t;
  }, {}) : Array.isArray(e) ? e.map(function(t) {
    return Jd(t);
  }) : e;
}
function wG(e) {
  var t = e;
  try {
    typeof t != "string" && (t = JSON.parse(e));
  } catch {
    t = JSON.stringify(Jd(e)).replace(/"/g, "'");
  }
  return t;
}
var m1 = `	
`;
function nd(e, t, n) {
  var r = y1(n), i = "", o = m1 + r;
  if (t === "-json")
    return "";
  if (t === "#text")
    return o + e;
  if (t === "#cdata-section")
    return "".concat(o, "<![CDATA[").concat(e, "]]>");
  if (t === "#comment")
    return "".concat(o, "<!--").concat(e, "-->");
  if ("".concat(t).charAt(0) === "-")
    return " ".concat(t.substring(1), '="').concat(wG(e), '"');
  if (Array.isArray(e))
    i += e.map(function(u) {
      return nd(u, t, n + 1);
    }).join("");
  else if (U2(e) === "[object Object]") {
    var a = Object.keys(e), s = "", l = e["-json"] ? m1 + y1(n + 1) + e["-json"] : "";
    i += "".concat(n === 0 ? "" : o, "<").concat(t), a.forEach(function(u) {
      u.charAt(0) === "-" ? s += nd(e[u], u, n + 1) : l += nd(e[u], u, n + 1);
    }), i += s + (l !== "" ? ">".concat(l).concat(o, "</").concat(t, ">") : " />");
  } else
    i += "".concat(o, "<").concat(t, ">").concat(e.toString(), "</").concat(t, ">");
  return i;
}
function xG(e) {
  var t = "";
  for (var n in e)
    t += nd(e[n], n, 0);
  return t;
}
var EG = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), vg = function() {
  return vg = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, vg.apply(this, arguments);
}, _1 = function(e, t) {
  var n = {};
  for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
  if (e != null && typeof Object.getOwnPropertySymbols == "function")
    for (var i = 0, r = Object.getOwnPropertySymbols(e); i < r.length; i++)
      t.indexOf(r[i]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[i]) && (n[r[i]] = e[r[i]]);
  return n;
}, rm = function(e) {
  var t = typeof Symbol == "function" && Symbol.iterator, n = t && e[t], r = 0;
  if (n) return n.call(e);
  if (e && typeof e.length == "number") return {
    next: function() {
      return e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e };
    }
  };
  throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, Bn = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, ui = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
}, Zn;
(function(e) {
  e.START = "bpmn:startEvent", e.END = "bpmn:endEvent", e.INTERMEDIATE_CATCH = "bpmn:intermediateCatchEvent", e.INTERMEDIATE_THROW = "bpmn:intermediateThrowEvent", e.BOUNDARY = "bpmn:boundaryEvent", e.PARALLEL_GATEWAY = "bpmn:parallelGateway", e.INCLUSIVE_GATEWAY = "bpmn:inclusiveGateway", e.EXCLUSIVE_GATEWAY = "bpmn:exclusiveGateway", e.USER = "bpmn:userTask", e.SYSTEM = "bpmn:serviceTask", e.FLOW = "bpmn:sequenceFlow", e.SUBPROCESS = "bpmn:subProcess";
})(Zn || (Zn = {}));
var Y2 = [
  "-name",
  "-id",
  "bpmn:incoming",
  "bpmn:outgoing",
  "-sourceRef",
  "-targetRef",
  "-children"
], SG = [
  "properties",
  "startPoint",
  "endPoint",
  "pointsList"
], Qd = {
  in: [],
  out: [
    "properties.panels",
    "properties.nodeSize",
    "properties.definitionId",
    "properties.timerValue",
    "properties.timerType",
    "properties.definitionType",
    "properties.parent",
    "properties.isBoundaryEventTouchingTask"
  ]
}, K2 = function(e, t) {
  var n = Object.keys(t || {});
  return n.forEach(function(r) {
    if (e[r]) {
      var i = t[r], o = i.in, a = i.out;
      o && (e[r].in = o), a && (e[r].out = a);
    } else
      e[r] = t[r];
  }), e;
}, Ir = {
  "bpmn:startEvent": {
    out: function(e) {
      var t, n, r = e.properties;
      return ((n = (t = Ir[r.definitionType]) === null || t === void 0 ? void 0 : t.out) === null || n === void 0 ? void 0 : n.call(t, e)) || {};
    }
  },
  // 'bpmn:endEvent': undefined,
  "bpmn:intermediateCatchEvent": {
    out: function(e) {
      var t, n, r = e.properties;
      return ((n = (t = Ir[r.definitionType]) === null || t === void 0 ? void 0 : t.out) === null || n === void 0 ? void 0 : n.call(t, e)) || {};
    }
  },
  "bpmn:intermediateThrowEvent": {
    out: function(e) {
      var t, n, r = e.properties;
      return ((n = (t = Ir[r.definitionType]) === null || t === void 0 ? void 0 : t.out) === null || n === void 0 ? void 0 : n.call(t, e)) || {};
    }
  },
  "bpmn:boundaryEvent": {
    out: function(e) {
      var t, n, r = e.properties;
      return ((n = (t = Ir[r.definitionType]) === null || t === void 0 ? void 0 : t.out) === null || n === void 0 ? void 0 : n.call(t, e)) || {};
    }
  },
  // 'bpmn:userTask': undefined,
  "bpmn:sequenceFlow": {
    out: function(e) {
      var t = e.properties, n = t.expressionType, r = t.condition;
      return r ? n === "cdata" ? {
        json: '<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'.concat(r, "}]]></bpmn:conditionExpression>")
      } : {
        json: '<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'.concat(r, "</bpmn:conditionExpression>")
      } : {
        json: ""
      };
    }
  },
  // 'bpmn:subProcess': undefined,
  // 'bpmn:participant': undefined,
  "bpmn:timerEventDefinition": {
    out: function(e) {
      var t = e.properties, n = t.timerType, r = t.timerValue, i = t.definitionId, o = function() {
        return "<bpmn:".concat(n, ' xsi:type="bpmn:tFormalExpression">').concat(r, "</bpmn:").concat(n, ">");
      };
      return {
        json: '<bpmn:timerEventDefinition id="'.concat(i, '"').concat(n && r ? ">".concat(o(), "</bpmn:timerEventDefinition>") : "/>")
      };
    },
    in: function(e, t) {
      var n, r, i, o, a = e, s = t["-id"], l = "", u = "";
      try {
        for (var c = rm(Object.keys(t)), d = c.next(); !d.done; d = c.next()) {
          var f = d.value;
          f.includes("bpmn:") && (i = Bn(f.split(":"), 2), l = i[1], u = (o = t[f]) === null || o === void 0 ? void 0 : o["#text"]);
        }
      } catch (h) {
        n = { error: h };
      } finally {
        try {
          d && !d.done && (r = c.return) && r.call(c);
        } finally {
          if (n) throw n.error;
        }
      }
      return {
        "-definitionId": s,
        "-definitionType": a,
        "-timerType": l,
        "-timerValue": u
      };
    }
  },
  "bpmn:conditionExpression": {
    in: function(e, t) {
      var n, r = "", i = "";
      return t["#cdata-section"] ? (i = "cdata", r = ((n = /^\$\{(.*)\}$/g.exec(t["#cdata-section"])) === null || n === void 0 ? void 0 : n[1]) || "") : t["#text"] && (i = "normal", r = t["#text"]), {
        "-condition": r,
        "-expressionType": i
      };
    }
  }
};
function CG(e) {
  var t = e ?? {}, n = t.retainedAttrsFields, r = t.excludeFields, i = t.transformer, o = new Set(ui(ui([], Bn(SG), !1), Bn(n || []), !1)), a = {
    in: new Set(ui(ui([], Bn(Qd.in), !1), Bn((r == null ? void 0 : r.in) || []), !1)),
    out: new Set(ui(ui([], Bn(Qd.out), !1), Bn((r == null ? void 0 : r.out) || []), !1))
  };
  return Ir = K2(Ir, i), function(s) {
    var l = s.nodes, u = s.edges;
    function c(d, f) {
      var h, p;
      if ((d == null ? void 0 : d.flag) !== 1) {
        var v;
        if ((v = Ir[d.type]) && v.out) {
          var g = v.out(d), y = Object.keys(g);
          y.length > 0 && y.forEach(function(R) {
            d[R] = g[R];
          });
        }
        d != null && d.children && (d.children = d.children.map(function(R) {
          var B = l.find(function(K) {
            return K.id === R;
          }) || u.find(function(K) {
            return K.id === R;
          });
          return B || {};
        }));
        var m = {};
        if (typeof d == "string")
          return d;
        if (Array.isArray(d))
          return d.map(function(R) {
            return c(R, "");
          }).filter(function(R) {
            return R != null;
          });
        try {
          for (var E = rm(Object.entries(d)), w = E.next(); !w.done; w = E.next()) {
            var S = Bn(w.value, 2), _ = S[0], b = S[1];
            if ((b == null ? void 0 : b.flag) === 1)
              return;
            var T = [f, _].filter(function(R) {
              return R;
            }).join(".");
            a.out.has(T) || (typeof b != "object" ? _.indexOf("-") === 0 || ["#text", "#cdata-section", "#comment"].includes(_) ? m[_] = b : m["-".concat(_)] = b : o.has(T) ? m["-".concat(_)] = c(b, T) : m[_] = c(b, T));
          }
        } catch (R) {
          h = { error: R };
        } finally {
          try {
            w && !w.done && (p = E.return) && p.call(E);
          } finally {
            if (h) throw h.error;
          }
        }
        return m;
      }
    }
    return c(s, "");
  };
}
function ef(e) {
  var t, n, r = {};
  try {
    for (var i = rm(Object.entries(e)), o = i.next(); !o.done; o = i.next()) {
      var a = Bn(o.value, 2), s = a[0], l = a[1];
      s.indexOf("-") === 0 ? r[s.substring(1)] = Jd(l) : typeof l == "string" ? r[s] = l : Object.prototype.toString.call(l) === "[object Object]" ? r[s] = ef(l) : Array.isArray(l) ? r[s] = l.map(function(u) {
        return ef(u);
      }) : r[s] = l;
    }
  } catch (u) {
    t = { error: u };
  } finally {
    try {
      o && !o.done && (n = i.return) && n.call(i);
    } finally {
      if (t) throw t.error;
    }
  }
  return r;
}
function OG(e, t, n) {
  var r, i = /* @__PURE__ */ new Map(), o = CG(n)(t);
  o.nodes.forEach(function(s) {
    var l = s["-id"], u = s["-type"], c = s.text, d = s.children, f = _1(s, ["-id", "-type", "text", "children"]), h = { "-id": l };
    c != null && c["-value"] && (h["-name"] = c["-value"]), f["-json"] && (h["-json"] = f["-json"]), f["-properties"] && Object.assign(h, f["-properties"]), d && (h.children = d), e[u] || (e[u] = []), e[u].push(h), i.set(l, h);
  });
  var a = o.edges.map(function(s) {
    var l = s["-id"], u = s["-sourceNodeId"], c = s["-targetNodeId"], d = s.text, f = _1(s, ["-id", "-sourceNodeId", "-targetNodeId", "text"]), h = i.get(c);
    h["bpmn:incoming"] || (h["bpmn:incoming"] = []), h["bpmn:incoming"].push(l);
    var p = {
      "-id": l,
      "-sourceRef": u,
      "-targetRef": c
    };
    return d != null && d["-value"] && (p["-name"] = d["-value"]), f["-json"] && (p["-json"] = f["-json"]), f["-properties"] && Object.assign(p, f["-properties"]), p;
  });
  return t.edges.forEach(function(s) {
    var l = s.sourceNodeId, u = s.id, c = i.get(l);
    c["bpmn:outgoing"] || (c["bpmn:outgoing"] = []), c["bpmn:outgoing"].push(u);
  }), (r = e["bpmn:subProcess"]) === null || r === void 0 || r.forEach(function(s) {
    var l = {
      "bpmn:incoming": /* @__PURE__ */ new Set(),
      "bpmn:outgoing": /* @__PURE__ */ new Set()
    }, u = [];
    s.children.forEach(function(v) {
      var g, y = i.get(v["-id"]);
      ["bpmn:incoming", "bpmn:outgoing"].forEach(function(E) {
        y[E] && y[E].forEach(function(w) {
          l[E].add(w);
        });
      });
      var m = (g = e[v["-type"]]) === null || g === void 0 ? void 0 : g.findIndex(function(E) {
        return E["-id"] === v["-id"];
      });
      m >= 0 && e[v["-type"]].splice(m, 1), i.delete(v["-id"]), s[v["-type"]] || (s[v["-type"]] = []), s[v["-type"]].push(y);
    });
    var c = l["bpmn:incoming"], d = l["bpmn:outgoing"];
    d.forEach(function(v) {
      c.has(v) && u.push(v);
    });
    for (var f = function(v) {
      var g = a.findIndex(function(y) {
        return y["-id"] === u[v];
      });
      g >= 0 ? (s["bpmn:sequenceFlow"] || (s["bpmn:sequenceFlow"] = []), s["bpmn:sequenceFlow"].push(a[g]), a.splice(g, 1)) : v++, h = v;
    }, h, p = 0; p < u.length; )
      f(p), p = h;
    delete s.children;
  }), e[Zn.FLOW] = a, e;
}
function AG(e, t) {
  e["bpmndi:BPMNEdge"] = t.edges.map(function(n) {
    var r, i = n.id, o = n.pointsList.map(function(s) {
      var l = s.x, u = s.y;
      return {
        "-x": l,
        "-y": u
      };
    }), a = {
      "-id": "".concat(i, "_di"),
      "-bpmnElement": i,
      "di:waypoint": o
    };
    return !((r = n.text) === null || r === void 0) && r.value && (a["bpmndi:BPMNLabel"] = {
      "dc:Bounds": {
        "-x": n.text.x - n.text.value.length * 10 / 2,
        "-y": n.text.y - 7,
        "-width": n.text.value.length * 10,
        "-height": 14
      }
    }), a;
  }), e["bpmndi:BPMNShape"] = t.nodes.map(function(n) {
    var r, i = n.id, o = 100, a = 80, s = n.x, l = n.y, u = vr.shapeConfigMap.get(n.type);
    u && (o = u.width, a = u.height), s -= o / 2, l -= a / 2;
    var c = {
      "-id": "".concat(i, "_di"),
      "-bpmnElement": i,
      "dc:Bounds": {
        "-x": s,
        "-y": l,
        "-width": o,
        "-height": a
      }
    };
    return !((r = n.text) === null || r === void 0) && r.value && (c["bpmndi:BPMNLabel"] = {
      "dc:Bounds": {
        "-x": n.text.x - n.text.value.length * 10 / 2,
        "-y": n.text.y - 7,
        "-width": n.text.value.length * 10,
        "-height": 14
      }
    }), c;
  });
}
var NG = ["bpmn:incoming", "bpmn:outgoing"];
function MG(e, t) {
  var n = [], r = [], i = /* @__PURE__ */ new Map(), o = t ?? {}, a = o.transformer, s = o.excludeFields, l = {
    in: new Set(ui(ui([], Bn(Qd.in), !1), Bn((s == null ? void 0 : s.in) || []), !1)),
    out: new Set(ui(ui([], Bn(Qd.out), !1), Bn((s == null ? void 0 : s.out) || []), !1))
  };
  Ir = K2(Ir, a);
  var u = e["bpmn:definitions"];
  if (u) {
    var c = u["bpmn:process"];
    (function(f, h) {
      h.forEach(function(p) {
        try {
          Object.keys(f).forEach(function(v) {
            try {
              p(v);
            } catch (g) {
              console.error(g);
            }
          });
        } catch (v) {
          console.error(v);
        }
      });
    })(c, [
      function(f) {
        function h(v) {
          v["-children"] || (v["-children"] = []), Object.keys(v).forEach(function(g) {
            var y;
            g.indexOf("bpmn:") === 0 && !NG.includes(g) && (c[g] || (c[g] = []), !Array.isArray(c[g]) && (c[g] = [c[g]]), Array.isArray(v[g]) ? (y = c[g]).push.apply(y, ui([], Bn(v[g]), !1)) : c[g].push(v[g]), Array.isArray(v[g]) ? v[g].forEach(function(m) {
              !g.includes("Flow") && v["-children"].push(m["-id"]);
            }) : !g.includes("Flow") && v["-children"].push(v[g]["-id"]), delete v[g]);
          });
        }
        if (f === "bpmn:subProcess") {
          var p = c[f];
          Array.isArray(p) ? p.forEach(function(v) {
            f === "bpmn:subProcess" && h(v);
          }) : h(p);
        }
      },
      function(f) {
        var h = function(v) {
          Object.keys(v).forEach(function(g) {
            var y, m;
            if (g.includes("bpmn:")) {
              var E = {};
              Ir[g] && Ir[g].in ? (E = (m = (y = Ir[g]).in) === null || m === void 0 ? void 0 : m.call(y, g, C.cloneDeep(v[g])), delete v[g]) : p(v[g]);
              var w = void 0;
              (w = Reflect.ownKeys(E)).length > 0 && w.forEach(function(S) {
                Reflect.set(v, S, E[S]);
              });
            }
          });
        };
        function p(v) {
          i.set(v["-id"], v), Array.isArray(v) ? v.forEach(function(g) {
            p(g);
          }) : typeof v == "object" && h(v);
        }
        p(c[f]);
      },
      function(f) {
        if (f.indexOf("bpmn:") === 0) {
          var h = c[f];
          if (f === "bpmn:sequenceFlow") {
            var p = u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];
            r = PG(h, p);
          } else {
            var v = u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];
            if (f === "bpmn:boundaryEvent") {
              var g = c[f], y = function(m) {
                var E = m["-attachedToRef"], w = i.get(E);
                w["-boundaryEvents"] || (w["-boundaryEvents"] = []), w["-boundaryEvents"].push(m["-id"]);
              };
              Array.isArray(g) ? g.forEach(function(m) {
                y(m);
              }) : y(g);
            }
            n = n.concat(TG(h, v, f));
          }
        }
      }
    ]);
  }
  var d = function(f, h, p) {
    Object.keys(f).forEach(function(v) {
      var g = p ? "".concat(p, ".").concat(v) : v;
      h.has(g) ? delete f[v] : typeof f[v] == "object" && d(f[v], h, g);
    });
  };
  return n.forEach(function(f) {
    var h, p;
    if (!((h = t == null ? void 0 : t.mapping) === null || h === void 0) && h.in) {
      var v = (p = t == null ? void 0 : t.mapping) === null || p === void 0 ? void 0 : p.in, g = f.type;
      v[g] && (f.type = v[g]);
    }
    d(f, l.in, "");
  }), r.forEach(function(f) {
    var h, p;
    if (!((h = t == null ? void 0 : t.mapping) === null || h === void 0) && h.in) {
      var v = (p = t == null ? void 0 : t.mapping) === null || p === void 0 ? void 0 : p.in, g = f.type;
      v[g] && (f.type = v[g]);
    }
    d(f, l.in, "");
  }), {
    nodes: n,
    edges: r
  };
}
function TG(e, t, n) {
  var r = [];
  if (Array.isArray(e))
    e.forEach(function(a) {
      var s;
      Array.isArray(t) ? s = t.find(function(u) {
        return u["-bpmnElement"] === a["-id"];
      }) : s = t;
      var l = b1(s, n, a);
      r.push(l);
    });
  else {
    var i = void 0;
    Array.isArray(t) ? i = t.find(function(a) {
      return a["-bpmnElement"] === e["-id"];
    }) : i = t;
    var o = b1(i, n, e);
    r.push(o);
  }
  return r;
}
function b1(e, t, n) {
  var r = Number(e["dc:Bounds"]["-x"]), i = Number(e["dc:Bounds"]["-y"]), o = n["-children"], a = n["-name"], s = vr.shapeConfigMap.get(t);
  s && (r += s.width / 2, i += s.height / 2);
  var l = {};
  Object.entries(n).forEach(function(f) {
    var h = Bn(f, 2), p = h[0], v = h[1];
    Y2.includes(p) || (l[p] = v);
  }), l = ef(l);
  var u;
  if (a && (u = {
    x: r,
    y: i,
    value: a
  }, e["bpmndi:BPMNLabel"] && e["bpmndi:BPMNLabel"]["dc:Bounds"])) {
    var c = e["bpmndi:BPMNLabel"]["dc:Bounds"];
    u.x = Number(c["-x"]) + Number(c["-width"]) / 2, u.y = Number(c["-y"]) + Number(c["-height"]) / 2;
  }
  var d = {
    id: e["-bpmnElement"],
    type: t,
    x: r,
    y: i,
    properties: l
  };
  return o && (d.children = o), u && (d.text = u), d;
}
function PG(e, t) {
  var n = [];
  if (Array.isArray(e))
    e.forEach(function(i) {
      var o;
      Array.isArray(t) ? o = t.find(function(a) {
        return a["-bpmnElement"] === i["-id"];
      }) : o = t, n.push(w1(o, i));
    });
  else {
    var r = void 0;
    Array.isArray(t) ? r = t.find(function(i) {
      return i["-bpmnElement"] === e["-id"];
    }) : r = t, n.push(w1(r, e));
  }
  return n;
}
function w1(e, t) {
  var n, r = t["-name"] ? "".concat(t["-name"]) : "";
  if (r) {
    var i = e["bpmndi:BPMNLabel"]["dc:Bounds"], o = 0;
    r.split(`
`).forEach(function(u) {
      o < u.length && (o = u.length);
    }), n = {
      value: r,
      x: Number(i["-x"]) + o * 10 / 2,
      y: Number(i["-y"]) + 7
    };
  }
  var a = {};
  Object.entries(t).forEach(function(u) {
    var c = Bn(u, 2), d = c[0], f = c[1];
    Y2.includes(d) || (a[d] = f);
  }), a = ef(a);
  var s = e["di:waypoint"].map(function(u) {
    return {
      x: Number(u["-x"]),
      y: Number(u["-y"])
    };
  }), l = {
    id: t["-id"],
    type: Zn.FLOW,
    pointsList: s,
    sourceNodeId: t["-sourceRef"],
    targetNodeId: t["-targetRef"],
    properties: a
  };
  return n && (l.text = n), l;
}
var vr = (
  /** @class */
  function() {
    function e(t) {
      var n = t.lf, r = this;
      this.adapterOut = function(i, o) {
        var a, s, l = vg({}, r.processAttributes);
        OG(l, i, o);
        var u = {
          "-id": "BPMNPlane_1",
          "-bpmnElement": l["-id"]
        };
        AG(u, i);
        var c = r.definitionAttributes;
        c["bpmn:process"] = l, c["bpmndi:BPMNDiagram"] = {
          "-id": "BPMNDiagram_1",
          "bpmndi:BPMNPlane": u
        };
        var d = {
          "bpmn:definitions": c
        };
        if (!((a = o == null ? void 0 : o.mapping) === null || a === void 0) && a.out) {
          var f = (s = o == null ? void 0 : o.mapping) === null || s === void 0 ? void 0 : s.out, h = function(p) {
            Array.isArray(p) && p.forEach(function(v) {
              return h(v);
            }), typeof p == "object" && Object.keys(p).forEach(function(v) {
              var g;
              (g = f[v]) ? (p[g] = C.cloneDeep(p[v]), delete p[v], h(p[g])) : h(p[v]);
            });
          };
          h(d);
        }
        return d;
      }, this.adapterIn = function(i, o) {
        if (i)
          return MG(i, o);
      }, n.adapterIn = this.adapterIn, n.adapterOut = this.adapterOut, this.processAttributes = {
        "-isExecutable": "true",
        "-id": "Process"
      }, this.definitionAttributes = {
        "-id": "Definitions",
        "-xmlns:xsi": "http://www.w3.org/2001/XMLSchema-instance",
        "-xmlns:bpmn": "http://www.omg.org/spec/BPMN/20100524/MODEL",
        "-xmlns:bpmndi": "http://www.omg.org/spec/BPMN/20100524/DI",
        "-xmlns:dc": "http://www.omg.org/spec/DD/20100524/DC",
        "-xmlns:di": "http://www.omg.org/spec/DD/20100524/DI",
        "-targetNamespace": "http://logic-flow.org",
        "-exporter": "logicflow",
        "-exporterVersion": "1.2.10"
      };
    }
    return e.prototype.setCustomShape = function(t, n) {
      e.shapeConfigMap.set(t, n);
    }, e.pluginName = "bpmn-adapter", e.shapeConfigMap = /* @__PURE__ */ new Map(), e;
  }()
);
vr.shapeConfigMap.set(Zn.START, {
  width: l1.width,
  height: l1.height
});
vr.shapeConfigMap.set(Zn.END, {
  width: u1.width,
  height: u1.height
});
vr.shapeConfigMap.set(Zn.INTERMEDIATE_CATCH, {
  width: Zd.width,
  height: Zd.height
});
vr.shapeConfigMap.set(Zn.INTERMEDIATE_THROW, {
  width: Zd.width,
  height: Zd.height
});
vr.shapeConfigMap.set(Zn.BOUNDARY, {
  width: c1.width,
  height: c1.height
});
vr.shapeConfigMap.set(Zn.PARALLEL_GATEWAY, {
  width: d1.width,
  height: d1.height
});
vr.shapeConfigMap.set(Zn.INCLUSIVE_GATEWAY, {
  width: f1.width,
  height: f1.height
});
vr.shapeConfigMap.set(Zn.EXCLUSIVE_GATEWAY, {
  width: h1.width,
  height: h1.height
});
vr.shapeConfigMap.set(Zn.SYSTEM, {
  width: p1.width,
  height: p1.height
});
vr.shapeConfigMap.set(Zn.USER, {
  width: v1.width,
  height: v1.height
});
vr.shapeConfigMap.set(Zn.SUBPROCESS, {
  width: g1.width,
  height: g1.height
});
(function(e) {
  EG(t, e);
  function t(n) {
    var r = e.call(this, n) || this;
    r.adapterXmlIn = function(a) {
      var s = bG(a);
      return r.adapterIn(s, r.props);
    }, r.adapterXmlOut = function(a) {
      var s = r.adapterOut(a, r.props);
      return xG(s);
    };
    var i = n.lf, o = n.props;
    return i.adapterIn = r.adapterXmlIn, i.adapterOut = r.adapterXmlOut, r.props = o, r;
  }
  return t.pluginName = "BPMNAdapter", t;
})(vr);
function DG(e, t, n) {
  var r = t.x, i = t.y, o = e.x, a = e.y, s = o - r, l = a - i, u = s * Math.cos(n) - l * Math.sin(n), c = s * Math.sin(n) + l * Math.cos(n), d = u + r, f = c + i;
  return {
    x: d,
    y: f
  };
}
var RG = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), tf = function() {
  return tf = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, tf.apply(this, arguments);
}, LG = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, $G = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
}, kG = (
  /** @class */
  function(e) {
    RG(t, e);
    function t() {
      var n = e.apply(this, $G([], LG(arguments), !1)) || this;
      return n.childrenPositionMap = /* @__PURE__ */ new Map(), n.onNodeRotate = function(r) {
        var i = r.model, o = n.props, a = o.model, s = o.graphModel, l = a.transformWithContainer, u = a.isRestrict, c = n.childrenPositionMap;
        if (!(!l || u) && i.id === a.id) {
          var d = { x: a.x, y: a.y };
          st(Array.from(a.children), function(f) {
            var h = s.getNodeModelById(f);
            if (h) {
              var p = { x: h.x, y: h.y };
              c.has(h.id) ? p = c.get(h.id) : c.set(h.id, p);
              var v = i.rotate * (180 / Math.PI);
              v < 0 && (v += 360);
              var g = v * (Math.PI / 180), y = DG(p, d, g);
              h.moveTo(y.x, y.y), h.rotate = i.rotate;
            }
          });
        }
      }, n.onNodeResize = function(r) {
        var i = r.deltaX, o = r.deltaY, a = r.index, s = r.model, l = r.preData, u = n.props, c = u.model, d = u.graphModel, f = c.transformWithContainer, h = c.isRestrict;
        if (!(!f || h) && s.id === c.id) {
          var p = l.properties, v = p || {}, g = v.width, y = v.height;
          st(Array.from(c.children), function(m) {
            var E = d.getNodeModelById(m);
            if (E) {
              var w = E.width / g * i, S = E.height / y * o;
              b2({
                deltaX: w,
                deltaY: S,
                index: a,
                nodeModel: E,
                graphModel: d,
                cancelCallback: function() {
                }
              });
            }
          });
        }
      }, n.onNodeMouseMove = function(r) {
        var i = r.deltaX, o = r.deltaY, a = r.data, s = n.props, l = s.model, u = s.graphModel, c = u.transformModel, d = c.SCALE_X, f = c.SCALE_Y;
        if (a.id === l.id) {
          var h = n.getNodesInGroup(l, u);
          u.moveNodes(h, i / d, o / f, !0);
        }
      }, n.graphRendered = function() {
        var r = n.props.model;
        r.isCollapsed && r.toggleCollapse(!0);
      }, n;
    }
    return t.prototype.componentDidMount = function() {
      e.prototype.componentDidMount.call(this);
      var n = this.props.graphModel.eventCenter;
      n.on("node:rotate", this.onNodeRotate), n.on("node:resize", this.onNodeResize), n.on("node:mousemove", this.onNodeMouseMove), n.on("graph:rendered", this.graphRendered);
    }, t.prototype.componentWillUnmount = function() {
      e.prototype.componentWillUnmount.call(this);
      var n = this.props.graphModel.eventCenter;
      n.off("node:rotate", this.onNodeRotate), n.off("node:resize", this.onNodeResize), n.off("node:mousemove", this.onNodeMouseMove), n.off("graph:rendered", this.graphRendered);
    }, t.prototype.getNodesInGroup = function(n, r) {
      var i = this, o = [];
      return n.isGroup && st(Array.from(n.children), function(a) {
        o.push(a);
        var s = r.getNodeModelById(a);
        s != null && s.isGroup && (o = o.concat(i.getNodesInGroup(s, r)));
      }), o;
    }, t.prototype.getResizeControl = function() {
      var n = this.props.model, r = n.resizable, i = n.isCollapsed, o = r && !i;
      return o ? e.prototype.getResizeControl.call(this) : null;
    }, t.prototype.getAppendAreaShape = function() {
      var n = this.props.model, r = n.width, i = n.height, o = n.x, a = n.y, s = n.radius, l = n.groupAddable;
      if (!l)
        return null;
      var u = n.getNodeStyle().strokeWidth, c = u === void 0 ? 0 : u, d = n.getAddableOutlineStyle(), f = r + c + 8, h = i + c + 8;
      return q("rect", tf(tf({}, d), { width: f, height: h, x: o - f / 2, y: a - h / 2, rx: s, ry: s }));
    }, t.prototype.getCollapseIcon = function(n, r) {
      return "M ".concat(n + 3, ",").concat(r + 6, " ").concat(n + 11, ",").concat(r + 6, " M").concat(n + 7, ",").concat(r + 2, " ").concat(n + 7, ",").concat(r + 10);
    }, t.prototype.getExpandIcon = function(n, r) {
      return "M ".concat(n + 3, ",").concat(r + 6, " ").concat(n + 11, ",").concat(r + 6, " ");
    }, t.prototype.getOperateIcon = function() {
      var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = r - o / 2 + 10, l = i - a / 2 + 10;
      if (!n.collapsible)
        return null;
      var u = n != null && n.isCollapsed ? this.getCollapseIcon(s, l) : this.getExpandIcon(s, l), c = q("path", {
        fill: "none",
        stroke: "#818281",
        strokeWidth: 2,
        "pointer-events": "none",
        d: u
      });
      return q("g", {}, [
        q("rect", {
          height: 12,
          width: 14,
          rx: 2,
          ry: 2,
          strokeWidth: 1,
          fill: "#f4f5f6",
          stroke: "#cecece",
          cursor: "pointer",
          x: s,
          y: l,
          onClick: function() {
            n.toggleCollapse(!n.isCollapsed);
          }
        }),
        c
      ]);
    }, t.prototype.getShape = function() {
      return q("g", {}, [
        this.getAppendAreaShape(),
        e.prototype.getShape.call(this),
        this.getOperateIcon()
      ]);
    }, t;
  }(La)
), IG = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), nf = function() {
  return nf = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, nf.apply(this, arguments);
}, Dp = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, Al = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Nl = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
}, BG = 400, jG = 230, zG = 80, FG = 60, HG = -1e4, VG = (
  /** @class */
  function(e) {
    IG(t, e);
    function t(n, r) {
      var i = e.call(this, n, r) || this;
      return i.isGroup = !0, i.isRestrict = !1, i.autoResize = !1, i.collapsible = !0, i.isCollapsed = !1, i.groupAddable = !1, i.transformWithContainer = !1, i.childrenLastCollapseStateDict = /* @__PURE__ */ new Map(), i.childrenLastCollapseStateDict = /* @__PURE__ */ new Map(), i.initNodeData(n), i.setAttributes(), i;
    }
    return t.prototype.initNodeData = function(n) {
      var r;
      e.prototype.initNodeData.call(this, n);
      var i = (r = n.properties) !== null && r !== void 0 ? r : {}, o = i.children, a = i.width, s = i.height, l = i.collapsedWidth, u = i.collapsedHeight, c = i.collapsible, d = i.isCollapsed, f = i.zIndex, h = i.isRestrict, p = i.autoResize, v = i.autoToFront, g = i.transformWithContainer;
      this.children = o ? new Set(o) : /* @__PURE__ */ new Set(), this.zIndex = f ?? HG, this.isCollapsed = d ?? !1;
      var y = a ?? BG, m = s ?? jG;
      this.width = y, this.height = m, this.expandWidth = y, this.expandHeight = m, this.collapsedWidth = l ?? zG, this.collapsedHeight = u ?? FG, this.isRestrict = h ?? !1, this.transformWithContainer = g ?? !1, this.autoResize = p ?? !1, this.collapsible = c ?? !0, this.autoToFront = v ?? !1, this.text.editable = !1, this.text.draggable = !1;
    }, t.prototype.setAttributes = function() {
      e.prototype.setAttributes.call(this);
    }, t.prototype.getData = function() {
      var n = this, r = e.prototype.getData.call(this), i = [];
      return st(Array.from(this.children), function(o) {
        var a = n.graphModel.getNodeModelById(o);
        a && !a.virtual && i.push(o);
      }), r.children = i, r.properties && (r.properties.children = i, r.properties.isCollapsed = this.isCollapsed), r;
    }, t.prototype.getHistoryData = function() {
      var n = e.prototype.getHistoryData.call(this);
      n.children = Array.from(this.children), n.isGroup = !0;
      var r = this, i = r.x, o = r.y, a = r.collapsedWidth, s = r.collapsedHeight, l = r.expandWidth, u = r.expandHeight, c = r.isCollapsed;
      return c && (n.x = i + l / 2 - a / 2, n.y = o + u / 2 - s / 2, n.text && (n.text.x = n.text.x + l / 2 - a / 2, n.text.y = n.text.y + u / 2 - s / 2)), n;
    }, t.prototype.toggleCollapse = function(n) {
      var r = this, i = !!n;
      this.isCollapsed = i, i ? this.collapse() : this.expand();
      var o = Nl(Nl([], Al(this.incoming.edges), !1), Al(this.outgoing.edges), !1), a = Array.from(this.children);
      st(a, function(s) {
        var l, u, c = r.graphModel.elementsModelMap.get(s);
        if (c) {
          var d = c.isCollapsed;
          if (c.isGroup) {
            var f = c;
            if (f.isCollapsed || f.toggleCollapse(n), !n) {
              var h = (l = r.childrenLastCollapseStateDict) === null || l === void 0 ? void 0 : l.get(s);
              h !== void 0 && h !== c.isCollapsed && f.toggleCollapse(h);
            }
          }
          if ((u = r.childrenLastCollapseStateDict) === null || u === void 0 || u.set(s, !!d), c.visible = !n, c.BaseType === un.NODE) {
            var p = c.incoming.edges, v = c.outgoing.edges;
            o = Nl(Nl(Nl([], Al(o), !1), Al(p), !1), Al(v), !1);
          }
        }
      }), this.collapseEdge(i, o);
    }, t.prototype.collapse = function() {
      var n = this, r = n.x, i = n.y, o = n.text, a = n.width, s = n.height, l = n.collapsedWidth, u = n.collapsedHeight;
      this.x = r - a / 2 + l / 2, this.y = i - s / 2 + u / 2, this.text.x = o.x - a / 2 + l / 2, this.text.y = o.y - s / 2 + u / 2, this.expandWidth = a, this.expandHeight = s, this.width = l, this.height = u;
    }, t.prototype.expand = function() {
      var n = this, r = n.x, i = n.y, o = n.text, a = n.expandWidth, s = n.expandHeight, l = n.collapsedWidth, u = n.collapsedHeight;
      this.width = a, this.height = s, this.x = r + this.width / 2 - l / 2, this.y = i + this.height / 2 - u / 2, this.text.x = o.x + this.width / 2 - l / 2, this.text.y = o.y + this.height / 2 - u / 2;
    }, t.prototype.createVirtualEdge = function(n) {
      n.pointsList = void 0;
      var r = this.graphModel.addEdge(n);
      r.virtual = !0, r.text.editable = !1, r.isCollapsedEdge = !0;
    }, t.prototype.collapseEdge = function(n, r) {
      var i = this, o = this.graphModel;
      st(r, function(a, s) {
        var l, u = a.getData(), c = u.targetNodeId, d = u.sourceNodeId, f = nf(nf({}, u), { id: "".concat(u.id, "__").concat(s), text: (l = u.text) === null || l === void 0 ? void 0 : l.value });
        a.virtual && o.deleteEdgeById(a.id);
        var h = o.dynamicGroup.getGroupByNodeId(c);
        h || (h = o.getNodeModelById(c));
        var p = o.dynamicGroup.getGroupByNodeId(d);
        p || (p = o.getNodeModelById(d)), n && a.visible && (i.children.has(d) || i.id === d ? (f.startPoint = void 0, f.sourceNodeId = i.id) : (f.endPoint = void 0, f.targetNodeId = i.id), (h.id !== i.id || p.id !== i.id) && i.createVirtualEdge(f), a.visible = !1), !n && !a.visible && (h && h.isGroup && h.isCollapsed ? (f.targetNodeId = h.id, f.endPoint = void 0, i.createVirtualEdge(f)) : p && p.isGroup && p.isCollapsed ? (f.sourceNodeId = p.id, f.startPoint = void 0, i.createVirtualEdge(f)) : a.visible = !0);
      });
    }, t.prototype.isAllowAppendIn = function(n) {
      return !0;
    }, t.prototype.setAllowAppendChild = function(n) {
      this.groupAddable = n;
    }, t.prototype.addChild = function(n) {
      this.children.add(n);
      var r = this.getData();
      this.graphModel.eventCenter.emit("group:add-node", { data: r });
    }, t.prototype.removeChild = function(n) {
      this.children.delete(n);
      var r = this.getData();
      this.graphModel.eventCenter.emit("group:remove-node", { data: r });
    }, t.prototype.toBack = function() {
      this.zIndex--;
    }, t.prototype.getResizeOutlineStyle = function() {
      var n = e.prototype.getResizeOutlineStyle.call(this);
      return n.stroke = "none", n;
    }, t.prototype.getAnchorStyle = function() {
      var n = e.prototype.getAnchorStyle.call(this);
      return n.stroke = "transparent", n.fill = "transparent", n.hover && (n.hover.fill = "transparent", n.hover.stroke = "transparent"), n;
    }, t.prototype.getAddableOutlineStyle = function() {
      return {
        stroke: "#feb663",
        strokeWidth: 2,
        strokeDasharray: "4 4",
        fill: "transparent"
      };
    }, Dp([
      ie
    ], t.prototype, "isCollapsed", void 0), Dp([
      ie
    ], t.prototype, "groupAddable", void 0), Dp([
      ie
    ], t.prototype, "transformWithContainer", void 0), t;
  }(Hs)
);
function WG(e, t) {
  var n = e.minX, r = e.minY, i = e.maxX, o = e.maxY, a = t.x, s = t.y, l = t.width, u = t.height;
  return n >= a - l / 2 && i <= a + l / 2 && r >= s - u / 2 && o <= s + u / 2;
}
function GG(e, t, n, r) {
  var i = e.minX, o = e.minY, a = e.maxX, s = e.maxY, l = t.x, u = t.y, c = t.width, d = t.height, f = i + c / 2, h = o + d / 2, p = a - c / 2, v = s - d / 2;
  return {
    x: l + n >= f && l + n <= p,
    y: u + r >= h && u + r <= v
  };
}
var rf = function() {
  return rf = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, rf.apply(this, arguments);
}, ss = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, ls = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
}, Ua = {
  type: "dynamic-group",
  view: kG,
  model: VG
}, XG = -1e3, kc = -1e4, UG = (
  /** @class */
  function() {
    function e(t) {
      var n = t.lf, r = t.options, i = this;
      this.topGroupZIndex = kc, this.nodeGroupMap = /* @__PURE__ */ new Map(), this.addNodeToGroup = function(o) {
        var a = o.data, s = i.nodeGroupMap.get(a.id);
        if (s) {
          var l = i.lf.getNodeModelById(s);
          l.removeChild(a.id), i.nodeGroupMap.delete(a.id), l.setAllowAppendChild(!1);
        }
        var u = i.lf.getNodeModelById(a.id), c = u == null ? void 0 : u.getBounds();
        if (u && c) {
          if (u.isGroup) {
            var d = u;
            st(Array.from(d.children), function(p) {
              i.nodeGroupMap.set(p, a.id);
            }), i.calibrateTopGroupZIndex([a]), i.onNodeSelect({
              data: a,
              isSelected: !1,
              isMultiple: !1
            });
          }
          var l = i.getGroupByBounds(c, a);
          if (l) {
            var f = l.isAllowAppendIn(a);
            console.log("isAllowAppendIn", f), f ? (l.addChild(a.id), i.nodeGroupMap.set(a.id, l.id), l.setAllowAppendChild(!0)) : i.lf.emit("group:not-allowed", {
              group: l.getData(),
              node: a
            });
          }
        }
      }, this.removeNodeFromGroup = function(o) {
        var a = o.data, s = o.model;
        s.isGroup && a.children && st(Array.from(a.children), function(c) {
          i.nodeGroupMap.delete(c), i.lf.deleteNode(c);
        });
        var l = i.nodeGroupMap.get(a.id);
        if (l) {
          var u = i.lf.getNodeModelById(l);
          u && u.removeChild(a.id), i.nodeGroupMap.delete(a.id);
        }
      }, this.setActiveGroup = function(o) {
        var a = o.data, s = i.lf.getNodeModelById(a.id), l = s == null ? void 0 : s.getBounds();
        if (s && l) {
          var u = i.getGroupByBounds(l, a);
          if (i.activeGroup && i.activeGroup.setAllowAppendChild(!1), !u || s.isGroup && u.id === a.id)
            return;
          var c = u.isAllowAppendIn(a);
          if (!c)
            return;
          i.activeGroup = u, console.log("this.activeGroup", i.activeGroup), i.activeGroup.setAllowAppendChild(!0);
        }
      }, this.onNodeSelect = function(o) {
        var a = o.data, s = o.isMultiple, l = o.isSelected, u = i.lf.getNodeModelById(a.id);
        if (i.sendNodeToFront(u), i.topGroupZIndex > XG) {
          var c = i.lf.graphModel.nodes;
          i.topGroupZIndex = kc;
          var d = qS(zl(c, function(g) {
            return !!g.isGroup;
          }), "zIndex"), f = 0;
          st(d, function(g) {
            g.zIndex !== f && (i.topGroupZIndex++, f = g.zIndex), g.setZIndex(i.topGroupZIndex);
          });
        }
        if (s && l)
          if (u != null && u.isGroup) {
            var h = u.children;
            st(Array.from(h), function(g) {
              var y = i.lf.getNodeModelById(g);
              y == null || y.setSelected(!1);
            });
          } else {
            var p = i.nodeGroupMap.get(a.id);
            if (p) {
              var v = i.lf.getNodeModelById(p);
              v != null && v.isSelected && (u == null || u.setSelected(!1));
            }
          }
      }, this.onNodeMove = function(o) {
        var a = o.deltaX, s = o.deltaY, l = o.data, u = l.id, c = l.x, d = l.y, f = l.properties;
        if (f) {
          var h = f.width, p = f.height, v = i.nodeGroupMap.get(u);
          if (v) {
            var g = i.lf.getNodeModelById(v);
            if (!(!g || !g.isRestrict || !g.autoResize)) {
              var y = c + a / 2, m = d + s / 2, E = y - h / 2, w = m - p / 2, S = y + h / 2, _ = m + p / 2, b = !1, T = g.getBounds(), R = Object.assign({}, T);
              if (E < R.minX && (R.minX = E, b = !0), w < R.minY && (R.minY = w, b = !0), S > R.maxX && (R.maxX = S, b = !0), _ > R.maxY && (R.maxY = _, b = !0), !!b) {
                var B = R.minX + (R.maxX - R.minX) / 2, K = R.minY + (R.maxY - R.minY) / 2, ae = R.maxX - R.minX, x = R.maxY - R.minY;
                g.moveTo(B, K), g.width = ae, g.height = x;
              }
            }
          }
        }
      }, this.onGraphRendered = function(o) {
        var a = o.data;
        console.log("data", a), st(a.nodes, function(s) {
          s.children && st(s.children, function(l) {
            i.nodeGroupMap.set(l, s.id);
          });
        }), i.calibrateTopGroupZIndex(a.nodes);
      }, n.register(Ua), this.lf = n, It(this, r), this.init();
    }
    return e.prototype.getGroupByNodeId = function(t) {
      var n = this.nodeGroupMap.get(t);
      if (n)
        return this.lf.getNodeModelById(n);
    }, e.prototype.getGroupByBounds = function(t, n) {
      var r = this.lf.graphModel.nodes, i = zl(r, function(l) {
        return !!l.isGroup && WG(t, l) && l.id !== n.id;
      }), o = i.length;
      if (o <= 1)
        return i[0];
      for (var a = i[o - 1], s = o - 2; s >= 0; s--)
        i[s].zIndex > a.zIndex && (a = i[s]);
      return a;
    }, e.prototype.sendNodeToFront = function(t) {
      var n = this;
      if (!(!t || !t.isGroup) && (this.topGroupZIndex++, t.setZIndex(this.topGroupZIndex), t.children)) {
        var r = t.children;
        st(Array.from(r), function(i) {
          var o = n.lf.getNodeModelById(i);
          n.sendNodeToFront(o);
        });
      }
    }, e.prototype.getMaxZIndex = function(t) {
      var n = this, r = kc;
      if (t.isGroup && (r = Math.max(r, t.zIndex)), t.children) {
        var i = t.children;
        st(Array.from(i), function(o) {
          var a = n.lf.getNodeModelById(o);
          if (a != null && a.isGroup) {
            var s = n.getMaxZIndex(a);
            r = Math.max(r, s);
          }
        });
      }
      return r;
    }, e.prototype.calibrateTopGroupZIndex = function(t) {
      var n = this, r = kc;
      if (st(t, function(s) {
        var l = n.lf.getNodeModelById(s.id);
        if (l) {
          var u = n.getMaxZIndex(l);
          u > r && (r = u);
        }
      }), !(this.topGroupZIndex >= r)) {
        var i = this.lf.graphModel.nodes, o = zl(i, function(s) {
          return !!s.isGroup;
        }), a = this.topGroupZIndex;
        st(o, function(s) {
          s.zIndex > a && (a = s.zIndex);
        }), this.topGroupZIndex = a;
      }
    }, e.prototype.removeChildrenInGroupNodeData = function(t) {
      var n, r = it(t);
      return delete r.children, !((n = r.properties) === null || n === void 0) && n.children && delete r.properties.children, r;
    }, e.prototype.initGroupChildNodes = function(t, n, r, i) {
      var o = this, a = [], s = [], l = [];
      st(Array.from(n), function(d) {
        var f = o.lf.getNodeModelById(d);
        if (f) {
          var h = f.children, p = f.getData(), v = Fe.NODE_GROUP_COPY || "node:group-copy-add", g = WW(o.removeChildrenInGroupNodeData(p), i), y = o.lf.addNode(g, v);
          if (r.addChild(y.id), t[d] = y.id, a.push(y), l.push.apply(l, ls([], ss(ls(ls([], ss(y.incoming.edges), !1), ss(y.outgoing.edges), !1)), !1)), h instanceof Set) {
            var m = o.initGroupChildNodes(t, h, y, i), E = m.childNodes, w = m.edgesData;
            a.push.apply(a, ls([], ss(E), !1)), s.push.apply(s, ls([], ss(w), !1));
          }
        }
      }), console.log("allRelatedEdges -->>", l);
      var u = zl(l, function(d) {
        return $s(t, d.sourceNodeId) && $s(t, d.targetNodeId);
      }), c = Kn(u, function(d) {
        return d.getData();
      });
      return {
        childNodes: a,
        edgesData: s.concat(c)
      };
    }, e.prototype.createEdge = function(t, n, r) {
      var i, o, a = t.sourceNodeId, s = t.targetNodeId, l = (i = n[a]) !== null && i !== void 0 ? i : a, u = (o = n[s]) !== null && o !== void 0 ? o : s, c = it(t);
      return t.id && typeof t.text == "object" && t.text !== null && (c = GW(t, r)), this.lf.graphModel.addEdge(rf(rf({}, c), { sourceNodeId: l, targetNodeId: u }));
    }, e.prototype.checkGroupBoundsWithChildren = function(t, n, r, i, o) {
      if (t.children)
        for (var a = t.children, s = t.x, l = t.y, u = s + n / 2, c = l + r / 2, d = u - i / 2, f = c - o / 2, h = u + i / 2, p = c + o / 2, v = Array.from(a), g = 0; g < v.length; g++) {
          var y = v[g], m = this.lf.getNodeModelById(y);
          if (m) {
            var E = m.getBounds(), w = E.minX, S = E.minY, _ = E.maxX, b = E.maxY, T = d <= w && f <= S && h >= _ && p >= b;
            if (!T)
              return !1;
          }
        }
      return !0;
    }, e.prototype.init = function() {
      var t = this, n = this.lf, r = n.graphModel;
      r.addNodeMoveRules(function(i, o, a) {
        if (i.isGroup)
          return !0;
        var s = t.nodeGroupMap.get(i.id), l = t.lf.getNodeModelById(s);
        if (l && l.isRestrict) {
          if (l.autoResize)
            return !0;
          var u = l.getBounds();
          return GG(u, i, o, a);
        }
        return !0;
      }), r.addNodeResizeRules(function(i, o, a, s, l) {
        return i.isGroup && i.isRestrict ? t.checkGroupBoundsWithChildren(i, o, a, s, l) : !0;
      }), r.dynamicGroup = this, n.on("node:add,node:drop,node:dnd-add", this.addNodeToGroup), n.on("node:delete", this.removeNodeFromGroup), n.on("node:drag,node:dnd-drag", this.setActiveGroup), n.on("node:click", this.onNodeSelect), n.on("node:mousemove", this.onNodeMove), n.on("graph:rendered", this.onGraphRendered), n.on("graph:updated", function(i) {
        var o = i.data;
        return console.log("data", o);
      }), n.on("group:add-node", function(i) {
        var o = i.data;
        return console.log("group:add-node", o);
      }), n.addElements = function(i, o) {
        var a = i.nodes, s = i.edges;
        o === void 0 && (o = 40);
        var l = {}, u = {
          nodes: [],
          edges: []
        }, c = [];
        return st(a, function(d) {
          var f, h, p = d.id, v = (h = (f = d.properties) === null || f === void 0 ? void 0 : f.children) !== null && h !== void 0 ? h : d.children, g = n.addNode(t.removeChildrenInGroupNodeData(d));
          if (p && (l[p] = g.id), u.nodes.push(g), g.isGroup) {
            var y = t.initGroupChildNodes(l, v, g, o).edgesData;
            c.push.apply(c, ls([], ss(y), !1));
          }
        }), st(c, function(d) {
          t.createEdge(d, l, o);
        }), console.log("selectedEdges --->>>", s), st(s, function(d) {
          u.edges.push(t.createEdge(d, l, o));
        }), u;
      }, this.render();
    }, e.prototype.render = function() {
    }, e.prototype.destroy = function() {
      this.lf.off("node:add,node:drop,node:dnd-add", this.addNodeToGroup), this.lf.off("node:delete", this.removeNodeFromGroup), this.lf.off("node:drag,node:dnd-drag", this.setActiveGroup), this.lf.off("node:click", this.onNodeSelect), this.lf.off("node:mousemove", this.onNodeMove), this.lf.off("graph:rendered", this.onGraphRendered);
    }, e.pluginName = "dynamicGroup", e;
  }()
), Ws;
(function(e) {
  e.HORIZONTAL = "horizontal", e.VERTICAL = "vertical";
})(Ws || (Ws = {}));
var YG = function(e, t, n, r) {
  r === void 0 && (r = 0);
  var i = qG(e, t, n);
  return i <= r;
};
function x1(e) {
  return e * e;
}
function Rp(e, t) {
  return x1(e.x - t.x) + x1(e.y - t.y);
}
var KG = function(e, t, n) {
  var r = Rp(t, n);
  if (r === 0)
    return Rp(e, t);
  var i = ((e.x - t.x) * (n.x - t.x) + (e.y - t.y) * (n.y - t.y)) / r;
  return i = Math.max(0, Math.min(1, i)), Rp(e, {
    x: t.x + i * (n.x - t.x),
    y: t.y + i * (n.y - t.y)
  });
}, qG = function(e, t, n) {
  return Math.sqrt(KG(e, t, n));
}, ZG = function(e) {
  var t = e.x, n = e.y, r = e.width, i = e.height, o = {
    minX: t - r / 2,
    minY: n - i / 2,
    maxX: t + r / 2,
    maxY: n + i / 2,
    x: t,
    y: n,
    width: r,
    height: i,
    centerX: t,
    centerY: n
  };
  return o;
}, JG = function(e, t) {
  var n;
  return e.x === t.x ? n = Ws.VERTICAL : e.y === t.y && (n = Ws.HORIZONTAL), n;
}, QG = function(e, t, n) {
  var r = ZG(e), i = JG(t, n), o = Math.max(t.x, n.x), a = Math.min(t.x, n.x), s = Math.max(t.y, n.y), l = Math.min(t.y, n.y), u = e.x, c = e.y, d = e.width, f = e.height;
  if (i === Ws.HORIZONTAL) {
    if (o >= r.maxX && a <= r.minX)
      return {
        startCrossPoint: {
          x: t.x > n.x ? u + d / 2 : u - d / 2,
          y: t.y
        },
        endCrossPoint: {
          x: t.x > n.x ? u - d / 2 : u + d / 2,
          y: t.y
        }
      };
  } else if (i === Ws.VERTICAL && s >= r.maxY && l <= r.minY)
    return {
      startCrossPoint: {
        x: t.x,
        y: t.y > n.y ? c + f / 2 : c - f / 2
      },
      endCrossPoint: {
        x: t.x,
        y: t.y > n.y ? c - f / 2 : c + f / 2
      }
    };
}, eX = function(e, t, n) {
  n === void 0 && (n = 0);
  for (var r = e.x, i = e.y, o = t.pointsList, a = 0; a < o.length - 1; a++)
    if (YG({
      x: r,
      y: i
    }, o[a], o[a + 1], n)) {
      var s = QG(e, o[a], o[a + 1]);
      if (s)
        return {
          crossIndex: a + 1,
          crossPoints: s
        };
    }
  return {
    crossIndex: -1,
    crossPoints: {
      startCrossPoint: {
        x: 0,
        y: 0
      },
      endCrossPoint: {
        x: 0,
        y: 0
      }
    }
  };
}, E1 = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, Lp = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
}, tX = (
  /** @class */
  function() {
    function e(t) {
      var n = t.lf;
      this._lf = n, this.deviation = 20, this.dndAdd = !0, this.dropAdd = !0, this.eventHandler();
    }
    return e.prototype.eventHandler = function() {
      var t = this;
      this.dndAdd && this._lf.on("node:dnd-add", function(n) {
        var r = n.data;
        t.insetNode(r);
      }), this.dropAdd && this._lf.on("node:drop", function(n) {
        for (var r = n.data, i = t._lf.graphModel.edges, o = r.id, a = !0, s = 0; s < i.length; s++)
          if (i[s].sourceNodeId === o || i[s].targetNodeId === o) {
            a = !1;
            break;
          }
        a && t.insetNode(r);
      });
    }, e.prototype.checkRuleBeforeInsetNode = function(t, n, r, i, o) {
      var a = this._lf.getNodeModelById(t), s = this._lf.getNodeModelById(n), l = a.getAnchorInfo(r), u = s.getAnchorInfo(i), c = a.isAllowConnectedAsSource(o, l, u), d = s.isAllowConnectedAsTarget(o, l, u), f = Bs(c), h = f.isAllPass, p = f.msg, v = Bs(d), g = v.isAllPass, y = v.msg;
      return {
        isPass: h && g,
        sourceMsg: p,
        targetMsg: y
      };
    }, e.prototype.insetNode = function(t) {
      var n = this, r = this._lf.graphModel.edges, i = this._lf.getNodeModelById(t.id), o = i == null ? void 0 : i.getDefaultAnchor(), a = !o || o.length === 0;
      if (a) {
        this._lf.graphModel.eventCenter.emit(Fe.CONNECTION_NOT_ALLOWED, {
          data: t,
          msg: "自定义类型节点不显示锚点，也不允许其他节点连接到此节点"
        });
        return;
      }
      if (i)
        for (var s = 0; s < r.length; s++) {
          var l = eX(i, r[s], this.deviation), u = l.crossIndex, c = l.crossPoints;
          if (u >= 0) {
            var d = r[s], f = d.sourceNodeId, h = d.targetNodeId, p = d.id, v = d.type, g = d.pointsList, y = d.sourceAnchorId, m = d.targetAnchorId, E = it(g[0]), w = it(c.startCrossPoint);
            this._lf.deleteEdge(p);
            var S = this.checkRuleBeforeInsetNode(f, h, y, m, t);
            if (this._lf.addEdge({
              type: v,
              sourceNodeId: f,
              targetNodeId: t.id,
              startPoint: E,
              endPoint: w,
              pointsList: Lp(Lp([], E1(g.slice(0, u)), !1), [
                c.startCrossPoint
              ], !1)
            }), this._lf.addEdge({
              type: v,
              sourceNodeId: t.id,
              targetNodeId: h,
              startPoint: it(c.endCrossPoint),
              endPoint: it(g[g.length - 1]),
              pointsList: Lp([
                c.endCrossPoint
              ], E1(g.slice(u)), !1)
            }), S.isPass)
              break;
            this._lf.graphModel.eventCenter.emit(Fe.CONNECTION_NOT_ALLOWED, {
              data: t,
              msg: S.targetMsg || S.sourceMsg
            }), setTimeout(function() {
              n._lf.undo();
            }, 200);
            break;
          }
        }
    }, e.pluginName = "insertNodeInPolyline", e;
  }()
), nX = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), uu = function() {
  return uu = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, uu.apply(this, arguments);
}, rX = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, iX = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, oX = (
  /** @class */
  function(e) {
    nX(t, e);
    function t(n) {
      var r = e.call(this, n) || this;
      r.textRef = Mf(), r.setHoverOn = function() {
        var l = r.props.element;
        l.isDragging || r.state.isHovered || (r.setState({ isHovered: !0 }), l.setHovered(!0));
      }, r.setHoverOff = function() {
        var l = r.props.element;
        r.state.isHovered && (r.setState({ isHovered: !1 }), l.setHovered(!1));
      }, r.handleMouseDown = function(l) {
        var u, c = r.props, d = c.label, f = c.graphModel, h = f.editConfigModel.nodeTextDraggable;
        ((u = d.draggable) !== null && u !== void 0 ? u : h) && !r.state.isDragging && !r.state.isEditing && r.stepDrag.handleMouseDown(l);
      }, r.handleMouseUp = function(l) {
        r.state.isDragging && r.stepDrag.handleMouseUp(l);
      }, r.handleDragging = function(l) {
        var u = l.deltaX, c = l.deltaY;
        r.state.isDragging || r.setState({ isDragging: !0 });
        var d = r.props, f = d.label, h = d.graphModel, p = h.transformModel, v = iX(p.fixDeltaXY(u, c), 2), g = v[0], y = v[1];
        r.setElementModelLabelInfo({
          x: f.x + g,
          y: f.y + y
        }), h.eventCenter.emit("label:drag", {
          data: f.getData(),
          model: f
        });
      }, r.handleDragEnd = function() {
        r.setState({ isDragging: !1 });
      }, r.handleClick = function(l) {
        var u = r.props, c = u.label, d = u.element, f = u.graphModel;
        d.setSelected(!r.state.isSelected), r.setState({ isSelected: !r.state.isSelected }), r.setElementModelLabelInfo({
          isSelected: !0
        }), f.eventCenter.emit("label:click", {
          data: c.getData(),
          e: l,
          model: d
        });
      }, r.handleDbClick = function(l) {
        var u = r.props, c = u.label, d = u.element, f = u.graphModel;
        if (f.eventCenter.emit("label:dblclick", {
          data: c.getData(),
          e: l,
          model: d
        }), !c.editable) {
          d.setSelected(!0);
          return;
        }
        if (d.setSelected(), d.setElementState(Pt.TEXT_EDIT), r.setState({ isEditing: !0 }), r.textRef.current) {
          r.textRef.current.contentEditable = "true", r.textRef.current.focus();
          var h = document.createRange(), p = window.getSelection();
          h.selectNodeContents(r.textRef.current), h.collapse(!1), p == null || p.removeAllRanges(), p == null || p.addRange(h);
        }
      }, r.handleBlur = function(l) {
        var u = r.props, c = u.label, d = u.element, f = u.graphModel.eventCenter;
        f.emit("label:blur", {
          e: l,
          model: d,
          data: c.getData(),
          element: r.textRef.current
        }), r.setState({
          isDragging: !1,
          isHovered: !1,
          isSelected: !1
        });
      }, r.reCalcLabelSize = function() {
      };
      var i = n.label, o = n.graphModel, a = o.gridSize, s = o.eventCenter;
      return r.stepDrag = new ni({
        onDragging: r.handleDragging,
        onDragEnd: r.handleDragEnd,
        step: a,
        eventType: "LABEL",
        model: i,
        eventCenter: s
      }), r.state = {
        isEditing: !1,
        isHovered: !1,
        isDragging: !1,
        isSelected: !1
      }, r;
    }
    return t.prototype.setElementModelLabelInfo = function(n) {
      var r = this.props, i = r.label, o = r.element, a = r.graphModel, s = o.properties._label, l = s, u = Ry(l, function(f) {
        return f.id === i.id;
      }), c = l[u];
      l[u] = uu(uu({}, c), n);
      var d = a.getElement(o.id);
      d == null || d.setProperty("_label", l);
    }, t.prototype.componentDidMount = function() {
      var n = this, r = this.props, i = r.label, o = r.element, a = r.graphModel;
      a.eventCenter.on("blank:click,node:click,edge:click,label:click", function(s) {
        var l, u, c, d, f = s.data;
        if (((f == null ? void 0 : f.type) !== "label" || f.type === "label" && f.id !== i.id || n.state.isSelected) && n.setState({ isSelected: !1 }), ((f == null ? void 0 : f.type) !== "label" || f.type == "label" && f.id !== i.id) && n.state.isEditing) {
          n.setState({ isEditing: !1 });
          var h = (u = (l = n.textRef.current) === null || l === void 0 ? void 0 : l.innerText) !== null && u !== void 0 ? u : "", p = (d = (c = n.textRef.current) === null || c === void 0 ? void 0 : c.innerHTML) !== null && d !== void 0 ? d : "";
          n.setElementModelLabelInfo({
            value: h,
            content: p,
            isSelected: !1
          }), o.setElementState(Pt.DEFAULT);
        }
        ((f == null ? void 0 : f.type) !== "label" || f.type == "label" && f.id !== i.id) && n.textRef.current && (n.textRef.current.contentEditable = "false");
      });
    }, t.prototype.componentDidUpdate = function() {
    }, t.prototype.componentWillUnmount = function() {
      var n = this.props.graphModel;
      n.eventCenter.off("blank:click,node:click,edge:click");
    }, t.prototype.render = function() {
      var n, r = this.props, i = r.label, o = r.element, a = r.graphModel, s = this.state, l = s.isDragging, u = s.isHovered, c = s.isSelected, d = s.isEditing, f = a.transformModel, h = f.getTransformStyle().transform, p = i.id, v = i.x, g = i.y, y = i.zIndex, m = i.vertical, E = i.style, w = i.rotate, S = i.content, _ = i.labelWidth, b = i.textOverflowMode, T = _ ?? (o.BaseType === "node" ? o.width - 20 : 80), R = {
        left: "".concat(v - T / 2, "px"),
        top: "".concat(g - 10, "px"),
        width: "".concat(T, "px"),
        height: "20px",
        zIndex: y ?? 1,
        transform: w ? "".concat(h, " rotate(").concat(w, "deg)") : "".concat(h, " rotate(").concat(m ? -0.25 : 0, "turn)")
      };
      return Q("div", { id: "element-container-".concat(p), className: Yv("lf-label-editor-container"), style: R, onMouseDown: this.handleMouseDown, onMouseUp: this.handleMouseUp, onClick: this.handleClick, onDblClick: this.handleDbClick, onBlur: this.handleBlur, onMouseEnter: this.setHoverOn, onMouseOver: this.setHoverOn, onMouseLeave: this.setHoverOff, children: Q("div", { ref: this.textRef, id: "editor-container-".concat(p), className: Yv("lf-label-editor", (n = {
        "lf-label-editor-dragging": l,
        "lf-label-editor-editing": d,
        "lf-label-editor-hover": !d && (u || c)
      }, n["lf-label-editor-".concat(b)] = !d, n)), style: uu({ maxWidth: "".concat(T, "px"), boxSizing: "border-box", display: "inline-block", background: d || o.BaseType === "edge" ? "#fff" : "transparent" }, E), dangerouslySetInnerHTML: { __html: S } }) });
    }, t = rX([
      qn
    ], t), t;
  }(Et)
), Lr = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, aX = $o, sX = (
  /** @class */
  function() {
    function e(t, n, r) {
      var i;
      this.type = "label", this.content = "", this.value = "", this.style = {}, this.vertical = !1, this.editable = !0, this.draggable = !0, this.textOverflowMode = "default", this.element = n, this.graphModel = r, this.id = (i = t.id) !== null && i !== void 0 ? i : aX(), this.initLabelData(t);
    }
    return e.prototype.initLabelData = function(t) {
      It(this, t);
    }, e.prototype.getData = function() {
      return {
        id: this.id,
        x: this.x,
        y: this.y,
        type: "label",
        content: this.content,
        value: this.value,
        rotate: this.rotate,
        style: li(this.style),
        draggable: this.draggable,
        editable: this.editable,
        labelWidth: this.labelWidth,
        textOverflowMode: this.textOverflowMode,
        vertical: this.vertical
      };
    }, Lr([
      ie
    ], e.prototype, "x", void 0), Lr([
      ie
    ], e.prototype, "y", void 0), Lr([
      ie
    ], e.prototype, "content", void 0), Lr([
      ie
    ], e.prototype, "value", void 0), Lr([
      ie
    ], e.prototype, "rotate", void 0), Lr([
      ie
    ], e.prototype, "style", void 0), Lr([
      ie
    ], e.prototype, "zIndex", void 0), Lr([
      ie
    ], e.prototype, "vertical", void 0), Lr([
      ie
    ], e.prototype, "editable", void 0), Lr([
      ie
    ], e.prototype, "draggable", void 0), Lr([
      ie
    ], e.prototype, "labelWidth", void 0), Lr([
      ie
    ], e.prototype, "textOverflowMode", void 0), e;
  }()
), q2 = { exports: {} };
(function(e) {
  /*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
  "classList" in document.createElement("_") || function(t) {
    if ("Element" in t) {
      var n = "classList", r = "prototype", i = t.Element[r], o = Object, a = String[r].trim || function() {
        return this.replace(/^\s+|\s+$/g, "");
      }, s = Array[r].indexOf || function(p) {
        for (var v = 0, g = this.length; v < g; v++)
          if (v in this && this[v] === p)
            return v;
        return -1;
      }, l = function(p, v) {
        this.name = p, this.code = DOMException[p], this.message = v;
      }, u = function(p, v) {
        if (v === "")
          throw new l(
            "SYNTAX_ERR",
            "An invalid or illegal string was specified"
          );
        if (/\s/.test(v))
          throw new l(
            "INVALID_CHARACTER_ERR",
            "String contains an invalid character"
          );
        return s.call(p, v);
      }, c = function(p) {
        for (var v = a.call(p.getAttribute("class") || ""), g = v ? v.split(/\s+/) : [], y = 0, m = g.length; y < m; y++)
          this.push(g[y]);
        this._updateClassName = function() {
          p.setAttribute("class", this.toString());
        };
      }, d = c[r] = [], f = function() {
        return new c(this);
      };
      if (l[r] = Error[r], d.item = function(p) {
        return this[p] || null;
      }, d.contains = function(p) {
        return p += "", u(this, p) !== -1;
      }, d.add = function() {
        var p = arguments, v = 0, g = p.length, y, m = !1;
        do
          y = p[v] + "", u(this, y) === -1 && (this.push(y), m = !0);
        while (++v < g);
        m && this._updateClassName();
      }, d.remove = function() {
        var p = arguments, v = 0, g = p.length, y, m = !1, E;
        do
          for (y = p[v] + "", E = u(this, y); E !== -1; )
            this.splice(E, 1), m = !0, E = u(this, y);
        while (++v < g);
        m && this._updateClassName();
      }, d.toggle = function(p, v) {
        p += "";
        var g = this.contains(p), y = g ? v !== !0 && "remove" : v !== !1 && "add";
        return y && this[y](p), v === !0 || v === !1 ? v : !g;
      }, d.toString = function() {
        return this.join(" ");
      }, o.defineProperty) {
        var h = {
          get: f,
          enumerable: !0,
          configurable: !0
        };
        try {
          o.defineProperty(i, n, h);
        } catch (p) {
          p.number === -2146823252 && (h.enumerable = !1, o.defineProperty(i, n, h));
        }
      } else o[r].__defineGetter__ && i.__defineGetter__(n, f);
    }
  }(self);
  /*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
  (function(t) {
    if (t.URL = t.URL || t.webkitURL, t.Blob && t.URL)
      try {
        new Blob();
        return;
      } catch {
      }
    var n = t.BlobBuilder || t.WebKitBlobBuilder || t.MozBlobBuilder || function(i) {
      var o = function(b) {
        return Object.prototype.toString.call(b).match(/^\[object\s(.*)\]$/)[1];
      }, a = function() {
        this.data = [];
      }, s = function(T, R, B) {
        this.data = T, this.size = T.length, this.type = R, this.encoding = B;
      }, l = a.prototype, u = s.prototype, c = i.FileReaderSync, d = function(b) {
        this.code = this[this.name = b];
      }, f = "NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "), h = f.length, p = i.URL || i.webkitURL || i, v = p.createObjectURL, g = p.revokeObjectURL, y = p, m = i.btoa, E = i.atob, w = i.ArrayBuffer, S = i.Uint8Array, _ = /^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;
      for (s.fake = u.fake = !0; h--; )
        d.prototype[f[h]] = h + 1;
      return p.createObjectURL || (y = i.URL = function(b) {
        var T = document.createElementNS("http://www.w3.org/1999/xhtml", "a"), R;
        return T.href = b, "origin" in T || (T.protocol.toLowerCase() === "data:" ? T.origin = null : (R = b.match(_), T.origin = R && R[1])), T;
      }), y.createObjectURL = function(b) {
        var T = b.type, R;
        if (T === null && (T = "application/octet-stream"), b instanceof s)
          return R = "data:" + T, b.encoding === "base64" ? R + ";base64," + b.data : b.encoding === "URI" ? R + "," + decodeURIComponent(b.data) : m ? R + ";base64," + m(b.data) : R + "," + encodeURIComponent(b.data);
        if (v)
          return v.call(p, b);
      }, y.revokeObjectURL = function(b) {
        b.substring(0, 5) !== "data:" && g && g.call(p, b);
      }, l.append = function(b) {
        var T = this.data;
        if (S && (b instanceof w || b instanceof S)) {
          for (var R = "", B = new S(b), K = 0, ae = B.length; K < ae; K++)
            R += String.fromCharCode(B[K]);
          T.push(R);
        } else if (o(b) === "Blob" || o(b) === "File")
          if (c) {
            var x = new c();
            T.push(x.readAsBinaryString(b));
          } else
            throw new d("NOT_READABLE_ERR");
        else b instanceof s ? b.encoding === "base64" && E ? T.push(E(b.data)) : b.encoding === "URI" ? T.push(decodeURIComponent(b.data)) : b.encoding === "raw" && T.push(b.data) : (typeof b != "string" && (b += ""), T.push(unescape(encodeURIComponent(b))));
      }, l.getBlob = function(b) {
        return arguments.length || (b = null), new s(this.data.join(""), b, "raw");
      }, l.toString = function() {
        return "[object BlobBuilder]";
      }, u.slice = function(b, T, R) {
        var B = arguments.length;
        return B < 3 && (R = null), new s(
          this.data.slice(b, B > 1 ? T : this.data.length),
          R,
          this.encoding
        );
      }, u.toString = function() {
        return "[object Blob]";
      }, u.close = function() {
        this.size = 0, delete this.data;
      }, a;
    }(t);
    t.Blob = function(i, o) {
      var a = o && o.type || "", s = new n();
      if (i)
        for (var l = 0, u = i.length; l < u; l++)
          Uint8Array && i[l] instanceof Uint8Array ? s.append(i[l].buffer) : s.append(i[l]);
      var c = s.getBlob(a);
      return !c.slice && c.webkitSlice && (c.slice = c.webkitSlice), c;
    };
    var r = Object.getPrototypeOf || function(i) {
      return i.__proto__;
    };
    t.Blob.prototype = r(new t.Blob());
  })(typeof self < "u" && self || typeof window < "u" && window || Yh.content || Yh), function(t, n) {
    var r = typeof process < "u" && process && process.versions && process.versions.electron;
    r ? t.MediumEditor = n : e.exports = n;
  }(Yh, function() {
    function t(n, r) {
      return this.init(n, r);
    }
    return t.extensions = {}, function(n) {
      function r(l, u) {
        var c, d = Array.prototype.slice.call(arguments, 2);
        u = u || {};
        for (var f = 0; f < d.length; f++) {
          var h = d[f];
          if (h)
            for (c in h)
              h.hasOwnProperty(c) && typeof h[c] < "u" && (l || u.hasOwnProperty(c) === !1) && (u[c] = h[c]);
        }
        return u;
      }
      var i = !1;
      try {
        var o = document.createElement("div"), a = document.createTextNode(" ");
        o.appendChild(a), i = o.contains(a);
      } catch {
      }
      var s = {
        // http://stackoverflow.com/questions/17907445/how-to-detect-ie11#comment30165888_17907562
        // by rg89
        isIE: navigator.appName === "Microsoft Internet Explorer" || navigator.appName === "Netscape" && new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent) !== null,
        isEdge: /Edge\/\d+/.exec(navigator.userAgent) !== null,
        // if firefox
        isFF: navigator.userAgent.toLowerCase().indexOf("firefox") > -1,
        // http://stackoverflow.com/a/11752084/569101
        isMac: n.navigator.platform.toUpperCase().indexOf("MAC") >= 0,
        // https://github.com/jashkenas/underscore
        // Lonely letter MUST USE the uppercase code
        keyCode: {
          BACKSPACE: 8,
          TAB: 9,
          ENTER: 13,
          ESCAPE: 27,
          SPACE: 32,
          DELETE: 46,
          K: 75,
          // K keycode, and not k
          M: 77,
          V: 86
        },
        /**
         * Returns true if it's metaKey on Mac, or ctrlKey on non-Mac.
         * See #591
         */
        isMetaCtrlKey: function(l) {
          return !!(s.isMac && l.metaKey || !s.isMac && l.ctrlKey);
        },
        /**
         * Returns true if the key associated to the event is inside keys array
         *
         * @see : https://github.com/jquery/jquery/blob/0705be475092aede1eddae01319ec931fb9c65fc/src/event.js#L473-L484
         * @see : http://stackoverflow.com/q/4471582/569101
         */
        isKey: function(l, u) {
          var c = s.getKeyCode(l);
          return Array.isArray(u) === !1 ? c === u : u.indexOf(c) !== -1;
        },
        getKeyCode: function(l) {
          var u = l.which;
          return u === null && (u = l.charCode !== null ? l.charCode : l.keyCode), u;
        },
        blockContainerElementNames: [
          // elements our editor generates
          "p",
          "h1",
          "h2",
          "h3",
          "h4",
          "h5",
          "h6",
          "blockquote",
          "pre",
          "ul",
          "li",
          "ol",
          // all other known block elements
          "address",
          "article",
          "aside",
          "audio",
          "canvas",
          "dd",
          "dl",
          "dt",
          "fieldset",
          "figcaption",
          "figure",
          "footer",
          "form",
          "header",
          "hgroup",
          "main",
          "nav",
          "noscript",
          "output",
          "section",
          "video",
          "table",
          "thead",
          "tbody",
          "tfoot",
          "tr",
          "th",
          "td"
        ],
        emptyElementNames: ["br", "col", "colgroup", "hr", "img", "input", "source", "wbr"],
        extend: function() {
          var u = [!0].concat(Array.prototype.slice.call(arguments));
          return r.apply(this, u);
        },
        defaults: function() {
          var u = [!1].concat(Array.prototype.slice.call(arguments));
          return r.apply(this, u);
        },
        /*
         * Create a link around the provided text nodes which must be adjacent to each other and all be
         * descendants of the same closest block container. If the preconditions are not met, unexpected
         * behavior will result.
         */
        createLink: function(l, u, c, d) {
          var f = l.createElement("a");
          return s.moveTextRangeIntoElement(u[0], u[u.length - 1], f), f.setAttribute("href", c), d && (d === "_blank" && f.setAttribute("rel", "noopener noreferrer"), f.setAttribute("target", d)), f;
        },
        /*
         * Given the provided match in the format {start: 1, end: 2} where start and end are indices into the
         * textContent of the provided element argument, modify the DOM inside element to ensure that the text
         * identified by the provided match can be returned as text nodes that contain exactly that text, without
         * any additional text at the beginning or end of the returned array of adjacent text nodes.
         *
         * The only DOM manipulation performed by this function is splitting the text nodes, non-text nodes are
         * not affected in any way.
         */
        findOrCreateMatchingTextNodes: function(l, u, c) {
          for (var d = l.createTreeWalker(u, NodeFilter.SHOW_ALL, null, !1), f = [], h = 0, p = !1, v = null, g = null; (v = d.nextNode()) !== null; )
            if (!(v.nodeType > 3))
              if (v.nodeType === 3) {
                if (!p && c.start < h + v.nodeValue.length && (p = !0, g = s.splitStartNodeIfNeeded(v, c.start, h)), p && s.splitEndNodeIfNeeded(v, g, c.end, h), p && h === c.end)
                  break;
                if (p && h > c.end + 1)
                  throw new Error("PerformLinking overshot the target!");
                p && f.push(g || v), h += v.nodeValue.length, g !== null && (h += g.nodeValue.length, d.nextNode()), g = null;
              } else v.tagName.toLowerCase() === "img" && (!p && c.start <= h && (p = !0), p && f.push(v));
          return f;
        },
        /*
         * Given the provided text node and text coordinates, split the text node if needed to make it align
         * precisely with the coordinates.
         *
         * This function is intended to be called from Util.findOrCreateMatchingTextNodes.
         */
        splitStartNodeIfNeeded: function(l, u, c) {
          return u !== c ? l.splitText(u - c) : null;
        },
        /*
         * Given the provided text node and text coordinates, split the text node if needed to make it align
         * precisely with the coordinates. The newNode argument should from the result of Util.splitStartNodeIfNeeded,
         * if that function has been called on the same currentNode.
         *
         * This function is intended to be called from Util.findOrCreateMatchingTextNodes.
         */
        splitEndNodeIfNeeded: function(l, u, c, d) {
          var f, h;
          f = d + l.nodeValue.length + (u ? u.nodeValue.length : 0) - 1, h = c - d - (u ? l.nodeValue.length : 0), f >= c && d !== f && h !== 0 && (u || l).splitText(h);
        },
        /*
        * Take an element, and break up all of its text content into unique pieces such that:
         * 1) All text content of the elements are in separate blocks. No piece of text content should span
         *    across multiple blocks. This means no element return by this function should have
         *    any blocks as children.
         * 2) The union of the textcontent of all of the elements returned here covers all
         *    of the text within the element.
         *
         *
         * EXAMPLE:
         * In the event that we have something like:
         *
         * <blockquote>
         *   <p>Some Text</p>
         *   <ol>
         *     <li>List Item 1</li>
         *     <li>List Item 2</li>
         *   </ol>
         * </blockquote>
         *
         * This function would return these elements as an array:
         *   [ <p>Some Text</p>, <li>List Item 1</li>, <li>List Item 2</li> ]
         *
         * Since the <blockquote> and <ol> elements contain blocks within them they are not returned.
         * Since the <p> and <li>'s don't contain block elements and cover all the text content of the
         * <blockquote> container, they are the elements returned.
         */
        splitByBlockElements: function(l) {
          if (l.nodeType !== 3 && l.nodeType !== 1)
            return [];
          var u = [], c = t.util.blockContainerElementNames.join(",");
          if (l.nodeType === 3 || l.querySelectorAll(c).length === 0)
            return [l];
          for (var d = 0; d < l.childNodes.length; d++) {
            var f = l.childNodes[d];
            if (f.nodeType === 3)
              u.push(f);
            else if (f.nodeType === 1) {
              var h = f.querySelectorAll(c);
              h.length === 0 ? u.push(f) : u = u.concat(t.util.splitByBlockElements(f));
            }
          }
          return u;
        },
        // Find the next node in the DOM tree that represents any text that is being
        // displayed directly next to the targetNode (passed as an argument)
        // Text that appears directly next to the current node can be:
        //  - A sibling text node
        //  - A descendant of a sibling element
        //  - A sibling text node of an ancestor
        //  - A descendant of a sibling element of an ancestor
        findAdjacentTextNodeWithContent: function(u, c, d) {
          var f = !1, h, p = d.createNodeIterator(u, NodeFilter.SHOW_TEXT, null, !1);
          for (h = p.nextNode(); h; ) {
            if (h === c)
              f = !0;
            else if (f && h.nodeType === 3 && h.nodeValue && h.nodeValue.trim().length > 0)
              break;
            h = p.nextNode();
          }
          return h;
        },
        // Find an element's previous sibling within a medium-editor element
        // If one doesn't exist, find the closest ancestor's previous sibling
        findPreviousSibling: function(l) {
          if (!l || s.isMediumEditorElement(l))
            return !1;
          for (var u = l.previousSibling; !u && !s.isMediumEditorElement(l.parentNode); )
            l = l.parentNode, u = l.previousSibling;
          return u;
        },
        isDescendant: function(u, c, d) {
          if (!u || !c)
            return !1;
          if (u === c)
            return !!d;
          if (u.nodeType !== 1)
            return !1;
          if (i || c.nodeType !== 3)
            return u.contains(c);
          for (var f = c.parentNode; f !== null; ) {
            if (f === u)
              return !0;
            f = f.parentNode;
          }
          return !1;
        },
        // https://github.com/jashkenas/underscore
        isElement: function(u) {
          return !!(u && u.nodeType === 1);
        },
        // https://github.com/jashkenas/underscore
        throttle: function(l, u) {
          var c = 50, d, f, h, p = null, v = 0, g = function() {
            v = Date.now(), p = null, h = l.apply(d, f), p || (d = f = null);
          };
          return !u && u !== 0 && (u = c), function() {
            var y = Date.now(), m = u - (y - v);
            return d = this, f = arguments, m <= 0 || m > u ? (p && (clearTimeout(p), p = null), v = y, h = l.apply(d, f), p || (d = f = null)) : p || (p = setTimeout(g, m)), h;
          };
        },
        traverseUp: function(l, u) {
          if (!l)
            return !1;
          do {
            if (l.nodeType === 1) {
              if (u(l))
                return l;
              if (s.isMediumEditorElement(l))
                return !1;
            }
            l = l.parentNode;
          } while (l);
          return !1;
        },
        htmlEntities: function(l) {
          return String(l).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;");
        },
        // http://stackoverflow.com/questions/6690752/insert-html-at-caret-in-a-contenteditable-div
        insertHTMLCommand: function(l, u) {
          var c, d, f, h, p, v, g, y = !1, m = ["insertHTML", !1, u];
          if (!t.util.isEdge && l.queryCommandSupported("insertHTML"))
            try {
              return l.execCommand.apply(l, m);
            } catch {
            }
          if (c = l.getSelection(), c.rangeCount) {
            if (d = c.getRangeAt(0), g = d.commonAncestorContainer, s.isMediumEditorElement(g) && !g.firstChild)
              d.selectNode(g.appendChild(l.createTextNode("")));
            else if (g.nodeType === 3 && d.startOffset === 0 && d.endOffset === g.nodeValue.length || g.nodeType !== 3 && g.innerHTML === d.toString()) {
              for (; !s.isMediumEditorElement(g) && g.parentNode && g.parentNode.childNodes.length === 1 && !s.isMediumEditorElement(g.parentNode); )
                g = g.parentNode;
              d.selectNode(g);
            }
            for (d.deleteContents(), f = l.createElement("div"), f.innerHTML = u, h = l.createDocumentFragment(); f.firstChild; )
              p = f.firstChild, v = h.appendChild(p);
            d.insertNode(h), v && (d = d.cloneRange(), d.setStartAfter(v), d.collapse(!0), t.selection.selectRange(l, d)), y = !0;
          }
          return l.execCommand.callListeners && l.execCommand.callListeners(m, y), y;
        },
        execFormatBlock: function(l, u) {
          var c = s.getTopBlockContainer(t.selection.getSelectionStart(l)), d;
          if (u === "blockquote") {
            if (c && (d = Array.prototype.slice.call(c.childNodes), d.some(function(f) {
              return s.isBlockContainer(f);
            })))
              return l.execCommand("outdent", !1, null);
            if (s.isIE)
              return l.execCommand("indent", !1, u);
          }
          if (c && u === c.nodeName.toLowerCase() && (u = "p"), s.isIE && (u = "<" + u + ">"), c && c.nodeName.toLowerCase() === "blockquote") {
            if (s.isIE && u === "<p>")
              return l.execCommand("outdent", !1, u);
            if ((s.isFF || s.isEdge) && u === "p")
              return d = Array.prototype.slice.call(c.childNodes), d.some(function(f) {
                return !s.isBlockContainer(f);
              }) && l.execCommand("formatBlock", !1, u), l.execCommand("outdent", !1, u);
          }
          return l.execCommand("formatBlock", !1, u);
        },
        /**
         * Set target to blank on the given el element
         *
         * TODO: not sure if this should be here
         *
         * When creating a link (using core -> createLink) the selection returned by Firefox will be the parent of the created link
         * instead of the created link itself (as it is for Chrome for example), so we retrieve all "a" children to grab the good one by
         * using `anchorUrl` to ensure that we are adding target="_blank" on the good one.
         * This isn't a bulletproof solution anyway ..
         */
        setTargetBlank: function(l, u) {
          var c, d = u || !1;
          if (l.nodeName.toLowerCase() === "a")
            l.target = "_blank", l.rel = "noopener noreferrer";
          else
            for (l = l.getElementsByTagName("a"), c = 0; c < l.length; c += 1)
              (d === !1 || d === l[c].attributes.href.value) && (l[c].target = "_blank", l[c].rel = "noopener noreferrer");
        },
        /*
         * this function is called to explicitly remove the target='_blank' as FF holds on to _blank value even
         * after unchecking the checkbox on anchor form
         */
        removeTargetBlank: function(l, u) {
          var c;
          if (l.nodeName.toLowerCase() === "a")
            l.removeAttribute("target"), l.removeAttribute("rel");
          else
            for (l = l.getElementsByTagName("a"), c = 0; c < l.length; c += 1)
              u === l[c].attributes.href.value && (l[c].removeAttribute("target"), l[c].removeAttribute("rel"));
        },
        /*
         * this function adds one or several classes on an a element.
         * if el parameter is not an a, it will look for a children of el.
         * if no a children are found, it will look for the a parent.
         */
        addClassToAnchors: function(l, u) {
          var c = u.split(" "), d, f;
          if (l.nodeName.toLowerCase() === "a")
            for (f = 0; f < c.length; f += 1)
              l.classList.add(c[f]);
          else {
            var h = l.getElementsByTagName("a");
            if (h.length === 0) {
              var p = s.getClosestTag(l, "a");
              l = p ? [p] : [];
            } else
              l = h;
            for (d = 0; d < l.length; d += 1)
              for (f = 0; f < c.length; f += 1)
                l[d].classList.add(c[f]);
          }
        },
        isListItem: function(l) {
          if (!l)
            return !1;
          if (l.nodeName.toLowerCase() === "li")
            return !0;
          for (var u = l.parentNode, c = u.nodeName.toLowerCase(); c === "li" || !s.isBlockContainer(u) && c !== "div"; ) {
            if (c === "li")
              return !0;
            if (u = u.parentNode, u)
              c = u.nodeName.toLowerCase();
            else
              return !1;
          }
          return !1;
        },
        cleanListDOM: function(l, u) {
          if (u.nodeName.toLowerCase() === "li") {
            var c = u.parentElement;
            c.parentElement.nodeName.toLowerCase() === "p" && (s.unwrap(c.parentElement, l), t.selection.moveCursor(l, u.firstChild, u.firstChild.textContent.length));
          }
        },
        /* splitDOMTree
         *
         * Given a root element some descendant element, split the root element
         * into its own element containing the descendant element and all elements
         * on the left or right side of the descendant ('right' is default)
         *
         * example:
         *
         *         <div>
         *      /    |   \
         *  <span> <span> <span>
         *   / \    / \    / \
         *  1   2  3   4  5   6
         *
         *  If I wanted to split this tree given the <div> as the root and "4" as the leaf
         *  the result would be (the prime ' marks indicates nodes that are created as clones):
         *
         *   SPLITTING OFF 'RIGHT' TREE       SPLITTING OFF 'LEFT' TREE
         *
         *     <div>            <div>'              <div>'      <div>
         *      / \              / \                 / \          |
         * <span> <span>   <span>' <span>       <span> <span>   <span>
         *   / \    |        |      / \           /\     /\       /\
         *  1   2   3        4     5   6         1  2   3  4     5  6
         *
         *  The above example represents splitting off the 'right' or 'left' part of a tree, where
         *  the <div>' would be returned as an element not appended to the DOM, and the <div>
         *  would remain in place where it was
         *
        */
        splitOffDOMTree: function(l, u, c) {
          for (var d = u, f = null, h = !c; d !== l; ) {
            var p = d.parentNode, v = p.cloneNode(!1), g = h ? d : p.firstChild, y;
            for (f && (h ? v.appendChild(f) : y = f), f = v; g; ) {
              var m = g.nextSibling;
              g === d ? (g.hasChildNodes() ? g = g.cloneNode(!1) : g.parentNode.removeChild(g), g.textContent && f.appendChild(g), g = h ? m : null) : (g.parentNode.removeChild(g), (g.hasChildNodes() || g.textContent) && f.appendChild(g), g = m);
            }
            y && f.appendChild(y), d = p;
          }
          return f;
        },
        moveTextRangeIntoElement: function(l, u, c) {
          if (!l || !u)
            return !1;
          var d = s.findCommonRoot(l, u);
          if (!d)
            return !1;
          if (u === l) {
            var f = l.parentNode, h = l.nextSibling;
            return f.removeChild(l), c.appendChild(l), h ? f.insertBefore(c, h) : f.appendChild(c), c.hasChildNodes();
          }
          for (var p = [], v, g, y, m = 0; m < d.childNodes.length; m++)
            if (y = d.childNodes[m], !v)
              s.isDescendant(y, l, !0) && (v = y);
            else if (s.isDescendant(y, u, !0)) {
              g = y;
              break;
            } else
              p.push(y);
          var E = g.nextSibling, w = d.ownerDocument.createDocumentFragment();
          return v === l ? (v.parentNode.removeChild(v), w.appendChild(v)) : w.appendChild(s.splitOffDOMTree(v, l)), p.forEach(function(S) {
            S.parentNode.removeChild(S), w.appendChild(S);
          }), g === u ? (g.parentNode.removeChild(g), w.appendChild(g)) : w.appendChild(s.splitOffDOMTree(g, u, !0)), c.appendChild(w), g.parentNode === d ? d.insertBefore(c, g) : E ? d.insertBefore(c, E) : d.appendChild(c), c.hasChildNodes();
        },
        /* based on http://stackoverflow.com/a/6183069 */
        depthOfNode: function(l) {
          for (var u = 0, c = l; c.parentNode !== null; )
            c = c.parentNode, u++;
          return u;
        },
        findCommonRoot: function(l, u) {
          for (var c = s.depthOfNode(l), d = s.depthOfNode(u), f = l, h = u; c !== d; )
            c > d ? (f = f.parentNode, c -= 1) : (h = h.parentNode, d -= 1);
          for (; f !== h; )
            f = f.parentNode, h = h.parentNode;
          return f;
        },
        /* END - based on http://stackoverflow.com/a/6183069 */
        isElementAtBeginningOfBlock: function(l) {
          for (var u, c; !s.isBlockContainer(l) && !s.isMediumEditorElement(l); ) {
            for (c = l; c = c.previousSibling; )
              if (u = c.nodeType === 3 ? c.nodeValue : c.textContent, u.length > 0)
                return !1;
            l = l.parentNode;
          }
          return !0;
        },
        isMediumEditorElement: function(l) {
          return l && l.getAttribute && !!l.getAttribute("data-medium-editor-element");
        },
        getContainerEditorElement: function(l) {
          return s.traverseUp(l, function(u) {
            return s.isMediumEditorElement(u);
          });
        },
        isBlockContainer: function(l) {
          return l && l.nodeType !== 3 && s.blockContainerElementNames.indexOf(l.nodeName.toLowerCase()) !== -1;
        },
        /* Finds the closest ancestor which is a block container element
         * If element is within editor element but not within any other block element,
         * the editor element is returned
         */
        getClosestBlockContainer: function(l) {
          return s.traverseUp(l, function(u) {
            return s.isBlockContainer(u) || s.isMediumEditorElement(u);
          });
        },
        /* Finds highest level ancestor element which is a block container element
         * If element is within editor element but not within any other block element,
         * the editor element is returned
         */
        getTopBlockContainer: function(l) {
          var u = s.isBlockContainer(l) ? l : !1;
          return s.traverseUp(l, function(c) {
            return s.isBlockContainer(c) && (u = c), !u && s.isMediumEditorElement(c) ? (u = c, !0) : !1;
          }), u;
        },
        getFirstSelectableLeafNode: function(l) {
          for (; l && l.firstChild; )
            l = l.firstChild;
          if (l = s.traverseUp(l, function(c) {
            return s.emptyElementNames.indexOf(c.nodeName.toLowerCase()) === -1;
          }), l.nodeName.toLowerCase() === "table") {
            var u = l.querySelector("th, td");
            u && (l = u);
          }
          return l;
        },
        // TODO: remove getFirstTextNode AND _getFirstTextNode when jumping in 6.0.0 (no code references)
        getFirstTextNode: function(l) {
          return s.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"), s._getFirstTextNode(l);
        },
        _getFirstTextNode: function(l) {
          if (l.nodeType === 3)
            return l;
          for (var u = 0; u < l.childNodes.length; u++) {
            var c = s._getFirstTextNode(l.childNodes[u]);
            if (c !== null)
              return c;
          }
          return null;
        },
        ensureUrlHasProtocol: function(l) {
          return l.indexOf("://") === -1 ? "http://" + l : l;
        },
        warn: function() {
          n.console !== void 0 && typeof n.console.warn == "function" && n.console.warn.apply(n.console, arguments);
        },
        deprecated: function(l, u, c) {
          var d = l + " is deprecated, please use " + u + " instead.";
          c && (d += " Will be removed in " + c), s.warn(d);
        },
        deprecatedMethod: function(l, u, c, d) {
          s.deprecated(l, u, d), typeof this[u] == "function" && this[u].apply(this, c);
        },
        cleanupAttrs: function(l, u) {
          u.forEach(function(c) {
            l.removeAttribute(c);
          });
        },
        cleanupTags: function(l, u) {
          u.indexOf(l.nodeName.toLowerCase()) !== -1 && l.parentNode.removeChild(l);
        },
        unwrapTags: function(l, u) {
          u.indexOf(l.nodeName.toLowerCase()) !== -1 && t.util.unwrap(l, document);
        },
        // get the closest parent
        getClosestTag: function(l, u) {
          return s.traverseUp(l, function(c) {
            return c.nodeName.toLowerCase() === u.toLowerCase();
          });
        },
        unwrap: function(l, u) {
          for (var c = u.createDocumentFragment(), d = Array.prototype.slice.call(l.childNodes), f = 0; f < d.length; f++)
            c.appendChild(d[f]);
          c.childNodes.length ? l.parentNode.replaceChild(c, l) : l.parentNode.removeChild(l);
        },
        guid: function() {
          function l() {
            return Math.floor((1 + Math.random()) * 65536).toString(16).substring(1);
          }
          return l() + l() + "-" + l() + "-" + l() + "-" + l() + "-" + l() + l() + l();
        }
      };
      t.util = s;
    }(window), function() {
      var n = function(r) {
        t.util.extend(this, r);
      };
      n.extend = function(r) {
        var i = this, o;
        r && r.hasOwnProperty("constructor") ? o = r.constructor : o = function() {
          return i.apply(this, arguments);
        }, t.util.extend(o, i);
        var a = function() {
          this.constructor = o;
        };
        return a.prototype = i.prototype, o.prototype = new a(), r && t.util.extend(o.prototype, r), o;
      }, n.prototype = {
        /* init: [function]
         *
         * Called by MediumEditor during initialization.
         * The .base property will already have been set to
         * current instance of MediumEditor when this is called.
         * All helper methods will exist as well
         */
        init: function() {
        },
        /* base: [MediumEditor instance]
         *
         * If not overriden, this will be set to the current instance
         * of MediumEditor, before the init method is called
         */
        base: void 0,
        /* name: [string]
         *
         * 'name' of the extension, used for retrieving the extension.
         * If not set, MediumEditor will set this to be the key
         * used when passing the extension into MediumEditor via the
         * 'extensions' option
         */
        name: void 0,
        /* checkState: [function (node)]
         *
         * If implemented, this function will be called one or more times
         * the state of the editor & toolbar are updated.
         * When the state is updated, the editor does the following:
         *
         * 1) Find the parent node containing the current selection
         * 2) Call checkState on the extension, passing the node as an argument
         * 3) Get the parent node of the previous node
         * 4) Repeat steps #2 and #3 until we move outside the parent contenteditable
         */
        checkState: void 0,
        /* destroy: [function ()]
         *
         * This method should remove any created html, custom event handlers
         * or any other cleanup tasks that should be performed.
         * If implemented, this function will be called when MediumEditor's
         * destroy method has been called.
         */
        destroy: void 0,
        /* As alternatives to checkState, these functions provide a more structured
         * path to updating the state of an extension (usually a button) whenever
         * the state of the editor & toolbar are updated.
         */
        /* queryCommandState: [function ()]
         *
         * If implemented, this function will be called once on each extension
         * when the state of the editor/toolbar is being updated.
         *
         * If this function returns a non-null value, the extension will
         * be ignored as the code climbs the dom tree.
         *
         * If this function returns true, and the setActive() function is defined
         * setActive() will be called
         */
        queryCommandState: void 0,
        /* isActive: [function ()]
         *
         * If implemented, this function will be called when MediumEditor
         * has determined that this extension is 'active' for the current selection.
         * This may be called when the editor & toolbar are being updated,
         * but only if queryCommandState() or isAlreadyApplied() functions
         * are implemented, and when called, return true.
         */
        isActive: void 0,
        /* isAlreadyApplied: [function (node)]
         *
         * If implemented, this function is similar to checkState() in
         * that it will be called repeatedly as MediumEditor moves up
         * the DOM to update the editor & toolbar after a state change.
         *
         * NOTE: This function will NOT be called if checkState() has
         * been implemented. This function will NOT be called if
         * queryCommandState() is implemented and returns a non-null
         * value when called
         */
        isAlreadyApplied: void 0,
        /* setActive: [function ()]
         *
         * If implemented, this function is called when MediumEditor knows
         * that this extension is currently enabled.  Currently, this
         * function is called when updating the editor & toolbar, and
         * only if queryCommandState() or isAlreadyApplied(node) return
         * true when called
         */
        setActive: void 0,
        /* setInactive: [function ()]
         *
         * If implemented, this function is called when MediumEditor knows
         * that this extension is currently disabled.  Curently, this
         * is called at the beginning of each state change for
         * the editor & toolbar. After calling this, MediumEditor
         * will attempt to update the extension, either via checkState()
         * or the combination of queryCommandState(), isAlreadyApplied(node),
         * isActive(), and setActive()
         */
        setInactive: void 0,
        /* getInteractionElements: [function ()]
         *
         * If the extension renders any elements that the user can interact with,
         * this method should be implemented and return the root element or an array
         * containing all of the root elements. MediumEditor will call this function
         * during interaction to see if the user clicked on something outside of the editor.
         * The elements are used to check if the target element of a click or
         * other user event is a descendant of any extension elements.
         * This way, the editor can also count user interaction within editor elements as
         * interactions with the editor, and thus not trigger 'blur'
         */
        getInteractionElements: void 0,
        /************************ Helpers ************************
         * The following are helpers that are either set by MediumEditor
         * during initialization, or are helper methods which either
         * route calls to the MediumEditor instance or provide common
         * functionality for all extensions
         *********************************************************/
        /* window: [Window]
         *
         * If not overriden, this will be set to the window object
         * to be used by MediumEditor and its extensions.  This is
         * passed via the 'contentWindow' option to MediumEditor
         * and is the global 'window' object by default
         */
        window: void 0,
        /* document: [Document]
         *
         * If not overriden, this will be set to the document object
         * to be used by MediumEditor and its extensions. This is
         * passed via the 'ownerDocument' optin to MediumEditor
         * and is the global 'document' object by default
         */
        document: void 0,
        /* getEditorElements: [function ()]
         *
         * Helper function which returns an array containing
         * all the contenteditable elements for this instance
         * of MediumEditor
         */
        getEditorElements: function() {
          return this.base.elements;
        },
        /* getEditorId: [function ()]
         *
         * Helper function which returns a unique identifier
         * for this instance of MediumEditor
         */
        getEditorId: function() {
          return this.base.id;
        },
        /* getEditorOptions: [function (option)]
         *
         * Helper function which returns the value of an option
         * used to initialize this instance of MediumEditor
         */
        getEditorOption: function(r) {
          return this.base.options[r];
        }
      }, [
        // general helpers
        "execAction",
        // event handling
        "on",
        "off",
        "subscribe",
        "trigger"
      ].forEach(function(r) {
        n.prototype[r] = function() {
          return this.base[r].apply(this.base, arguments);
        };
      }), t.Extension = n;
    }(), function() {
      function n(i) {
        return t.util.isBlockContainer(i) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;
      }
      var r = {
        findMatchingSelectionParent: function(i, o) {
          var a = o.getSelection(), s, l;
          return a.rangeCount === 0 ? !1 : (s = a.getRangeAt(0), l = s.commonAncestorContainer, t.util.traverseUp(l, i));
        },
        getSelectionElement: function(i) {
          return this.findMatchingSelectionParent(function(o) {
            return t.util.isMediumEditorElement(o);
          }, i);
        },
        // http://stackoverflow.com/questions/17678843/cant-restore-selection-after-html-modify-even-if-its-the-same-html
        // Tim Down
        exportSelection: function(i, o) {
          if (!i)
            return null;
          var a = null, s = o.getSelection();
          if (s.rangeCount > 0) {
            var l = s.getRangeAt(0), u = l.cloneRange(), c;
            u.selectNodeContents(i), u.setEnd(l.startContainer, l.startOffset), c = u.toString().length, a = {
              start: c,
              end: c + l.toString().length
            }, this.doesRangeStartWithImages(l, o) && (a.startsWithImage = !0);
            var d = this.getTrailingImageCount(i, a, l.endContainer, l.endOffset);
            if (d && (a.trailingImageCount = d), c !== 0) {
              var f = this.getIndexRelativeToAdjacentEmptyBlocks(o, i, l.startContainer, l.startOffset);
              f !== -1 && (a.emptyBlocksIndex = f);
            }
          }
          return a;
        },
        // http://stackoverflow.com/questions/17678843/cant-restore-selection-after-html-modify-even-if-its-the-same-html
        // Tim Down
        //
        // {object} selectionState - the selection to import
        // {DOMElement} root - the root element the selection is being restored inside of
        // {Document} doc - the document to use for managing selection
        // {boolean} [favorLaterSelectionAnchor] - defaults to false. If true, import the cursor immediately
        //      subsequent to an anchor tag if it would otherwise be placed right at the trailing edge inside the
        //      anchor. This cursor positioning, even though visually equivalent to the user, can affect behavior
        //      in MS IE.
        importSelection: function(i, o, a, s) {
          if (!(!i || !o)) {
            var l = a.createRange();
            l.setStart(o, 0), l.collapse(!0);
            var u = o, c = [], d = 0, f = !1, h = !1, p = 0, v = !1, g, y = !1, m = null;
            for ((s || i.startsWithImage || typeof i.emptyBlocksIndex < "u") && (y = !0); !v && u; ) {
              if (u.nodeType > 3) {
                u = c.pop();
                continue;
              }
              if (u.nodeType === 3 && !h)
                g = d + u.length, !f && i.start >= d && i.start <= g && (y || i.start < g ? (l.setStart(u, i.start - d), f = !0) : m = u), f && i.end >= d && i.end <= g && (i.trailingImageCount ? h = !0 : (l.setEnd(u, i.end - d), v = !0)), d = g;
              else {
                if (i.trailingImageCount && h && (u.nodeName.toLowerCase() === "img" && p++, p === i.trailingImageCount)) {
                  for (var E = 0; u.parentNode.childNodes[E] !== u; )
                    E++;
                  l.setEnd(u.parentNode, E + 1), v = !0;
                }
                if (!v && u.nodeType === 1)
                  for (var w = u.childNodes.length - 1; w >= 0; )
                    c.push(u.childNodes[w]), w -= 1;
              }
              v || (u = c.pop());
            }
            !f && m && (l.setStart(m, m.length), l.setEnd(m, m.length)), typeof i.emptyBlocksIndex < "u" && (l = this.importSelectionMoveCursorPastBlocks(a, o, i.emptyBlocksIndex, l)), s && (l = this.importSelectionMoveCursorPastAnchor(i, l)), this.selectRange(a, l);
          }
        },
        // Utility method called from importSelection only
        importSelectionMoveCursorPastAnchor: function(i, o) {
          var a = function(d) {
            return d.nodeName.toLowerCase() === "a";
          };
          if (i.start === i.end && o.startContainer.nodeType === 3 && o.startOffset === o.startContainer.nodeValue.length && t.util.traverseUp(o.startContainer, a)) {
            for (var s = o.startContainer, l = o.startContainer.parentNode; l !== null && l.nodeName.toLowerCase() !== "a"; )
              l.childNodes[l.childNodes.length - 1] !== s ? l = null : (s = l, l = l.parentNode);
            if (l !== null && l.nodeName.toLowerCase() === "a") {
              for (var u = null, c = 0; u === null && c < l.parentNode.childNodes.length; c++)
                l.parentNode.childNodes[c] === l && (u = c);
              o.setStart(l.parentNode, u + 1), o.collapse(!0);
            }
          }
          return o;
        },
        // Uses the emptyBlocksIndex calculated by getIndexRelativeToAdjacentEmptyBlocks
        // to move the cursor back to the start of the correct paragraph
        importSelectionMoveCursorPastBlocks: function(i, o, a, s) {
          var l = i.createTreeWalker(o, NodeFilter.SHOW_ELEMENT, n, !1), u = s.startContainer, c, d, f = 0;
          for (a = a || 1, u.nodeType === 3 && t.util.isBlockContainer(u.previousSibling) ? c = u.previousSibling : c = t.util.getClosestBlockContainer(u); l.nextNode(); )
            if (!d)
              c === l.currentNode && (d = l.currentNode);
            else if (d = l.currentNode, f++, f === a || d.textContent.length > 0)
              break;
          return d || (d = c), s.setStart(t.util.getFirstSelectableLeafNode(d), 0), s;
        },
        // Returns -1 unless the cursor is at the beginning of a paragraph/block
        // If the paragraph/block is preceeded by empty paragraphs/block (with no text)
        // it will return the number of empty paragraphs before the cursor.
        // Otherwise, it will return 0, which indicates the cursor is at the beginning
        // of a paragraph/block, and not at the end of the paragraph/block before it
        getIndexRelativeToAdjacentEmptyBlocks: function(i, o, a, s) {
          if (a.textContent.length > 0 && s > 0)
            return -1;
          var l = a;
          if (l.nodeType !== 3 && (l = a.childNodes[s]), l) {
            if (!t.util.isElementAtBeginningOfBlock(l))
              return -1;
            var u = t.util.findPreviousSibling(l);
            if (u) {
              if (u.nodeValue)
                return -1;
            } else return -1;
          }
          for (var c = t.util.getClosestBlockContainer(a), d = i.createTreeWalker(o, NodeFilter.SHOW_ELEMENT, n, !1), f = 0; d.nextNode(); ) {
            var h = d.currentNode.textContent === "";
            if ((h || f > 0) && (f += 1), d.currentNode === c)
              return f;
            h || (f = 0);
          }
          return f;
        },
        // Returns true if the selection range begins with an image tag
        // Returns false if the range starts with any non empty text nodes
        doesRangeStartWithImages: function(i, o) {
          if (i.startOffset !== 0 || i.startContainer.nodeType !== 1)
            return !1;
          if (i.startContainer.nodeName.toLowerCase() === "img")
            return !0;
          var a = i.startContainer.querySelector("img");
          if (!a)
            return !1;
          for (var s = o.createTreeWalker(i.startContainer, NodeFilter.SHOW_ALL, null, !1); s.nextNode(); ) {
            var l = s.currentNode;
            if (l === a)
              break;
            if (l.nodeValue)
              return !1;
          }
          return !0;
        },
        getTrailingImageCount: function(i, o, a, s) {
          if (s === 0 || a.nodeType !== 1 || a.nodeName.toLowerCase() !== "img" && !a.querySelector("img"))
            return 0;
          for (var l = a.childNodes[s - 1]; l.hasChildNodes(); )
            l = l.lastChild;
          for (var u = i, c = [], d = 0, f = !1, h = !1, p = !1, v, g = 0; !p && u; ) {
            if (u.nodeType > 3) {
              u = c.pop();
              continue;
            }
            if (u.nodeType === 3 && !h)
              g = 0, v = d + u.length, !f && o.start >= d && o.start <= v && (f = !0), f && o.end >= d && o.end <= v && (h = !0), d = v;
            else if (u.nodeName.toLowerCase() === "img" && g++, u === l)
              p = !0;
            else if (u.nodeType === 1)
              for (var y = u.childNodes.length - 1; y >= 0; )
                c.push(u.childNodes[y]), y -= 1;
            p || (u = c.pop());
          }
          return g;
        },
        // determine if the current selection contains any 'content'
        // content being any non-white space text or an image
        selectionContainsContent: function(i) {
          var o = i.getSelection();
          if (!o || o.isCollapsed || !o.rangeCount)
            return !1;
          if (o.toString().trim() !== "")
            return !0;
          var a = this.getSelectedParentElement(o.getRangeAt(0));
          return !!(a && (a.nodeName.toLowerCase() === "img" || a.nodeType === 1 && a.querySelector("img")));
        },
        selectionInContentEditableFalse: function(i) {
          var o, a = this.findMatchingSelectionParent(function(s) {
            var l = s && s.getAttribute("contenteditable");
            return l === "true" && (o = !0), s.nodeName !== "#text" && l === "false";
          }, i);
          return !o && a;
        },
        // http://stackoverflow.com/questions/4176923/html-of-selected-text
        // by Tim Down
        getSelectionHtml: function(o) {
          var a, s = "", l = o.getSelection(), u, c;
          if (l.rangeCount) {
            for (c = o.createElement("div"), a = 0, u = l.rangeCount; a < u; a += 1)
              c.appendChild(l.getRangeAt(a).cloneContents());
            s = c.innerHTML;
          }
          return s;
        },
        /**
         *  Find the caret position within an element irrespective of any inline tags it may contain.
         *
         *  @param {DOMElement} An element containing the cursor to find offsets relative to.
         *  @param {Range} A Range representing cursor position. Will window.getSelection if none is passed.
         *  @return {Object} 'left' and 'right' attributes contain offsets from begining and end of Element
         */
        getCaretOffsets: function(o, a) {
          var s, l;
          return a || (a = window.getSelection().getRangeAt(0)), s = a.cloneRange(), l = a.cloneRange(), s.selectNodeContents(o), s.setEnd(a.endContainer, a.endOffset), l.selectNodeContents(o), l.setStart(a.endContainer, a.endOffset), {
            left: s.toString().length,
            right: l.toString().length
          };
        },
        // http://stackoverflow.com/questions/15867542/range-object-get-selection-parent-node-chrome-vs-firefox
        rangeSelectsSingleNode: function(i) {
          var o = i.startContainer;
          return o === i.endContainer && o.hasChildNodes() && i.endOffset === i.startOffset + 1;
        },
        getSelectedParentElement: function(i) {
          return i ? this.rangeSelectsSingleNode(i) && i.startContainer.childNodes[i.startOffset].nodeType !== 3 ? i.startContainer.childNodes[i.startOffset] : i.startContainer.nodeType === 3 ? i.startContainer.parentNode : i.startContainer : null;
        },
        getSelectedElements: function(i) {
          var o = i.getSelection(), a, s, l;
          if (!o.rangeCount || o.isCollapsed || !o.getRangeAt(0).commonAncestorContainer)
            return [];
          if (a = o.getRangeAt(0), a.commonAncestorContainer.nodeType === 3) {
            for (s = [], l = a.commonAncestorContainer; l.parentNode && l.parentNode.childNodes.length === 1; )
              s.push(l.parentNode), l = l.parentNode;
            return s;
          }
          return [].filter.call(a.commonAncestorContainer.getElementsByTagName("*"), function(u) {
            return typeof o.containsNode == "function" ? o.containsNode(u, !0) : !0;
          });
        },
        selectNode: function(i, o) {
          var a = o.createRange();
          a.selectNodeContents(i), this.selectRange(o, a);
        },
        select: function(i, o, a, s, l) {
          var u = i.createRange();
          return u.setStart(o, a), s ? u.setEnd(s, l) : u.collapse(!0), this.selectRange(i, u), u;
        },
        /**
         *  Clear the current highlighted selection and set the caret to the start or the end of that prior selection, defaults to end.
         *
         *  @param {DomDocument} doc            Current document
         *  @param {boolean} moveCursorToStart  A boolean representing whether or not to set the caret to the beginning of the prior selection.
         */
        clearSelection: function(i, o) {
          o ? i.getSelection().collapseToStart() : i.getSelection().collapseToEnd();
        },
        /**
         * Move cursor to the given node with the given offset.
         *
         * @param  {DomDocument} doc     Current document
         * @param  {DomElement}  node    Element where to jump
         * @param  {integer}     offset  Where in the element should we jump, 0 by default
         */
        moveCursor: function(i, o, a) {
          this.select(i, o, a);
        },
        getSelectionRange: function(i) {
          var o = i.getSelection();
          return o.rangeCount === 0 ? null : o.getRangeAt(0);
        },
        selectRange: function(i, o) {
          var a = i.getSelection();
          a.removeAllRanges(), a.addRange(o);
        },
        // http://stackoverflow.com/questions/1197401/how-can-i-get-the-element-the-caret-is-in-with-javascript-when-using-contentedi
        // by You
        getSelectionStart: function(i) {
          var o = i.getSelection().anchorNode, a = o && o.nodeType === 3 ? o.parentNode : o;
          return a;
        }
      };
      t.selection = r;
    }(), function() {
      function n(i, o) {
        return i ? i.some(function(a) {
          if (typeof a.getInteractionElements != "function")
            return !1;
          var s = a.getInteractionElements();
          return s ? (Array.isArray(s) || (s = [s]), s.some(function(l) {
            return t.util.isDescendant(l, o, !0);
          })) : !1;
        }) : !1;
      }
      var r = function(i) {
        this.base = i, this.options = this.base.options, this.events = [], this.disabledEvents = {}, this.customEvents = {}, this.listeners = {};
      };
      r.prototype = {
        InputEventOnContenteditableSupported: !t.util.isIE && !t.util.isEdge,
        // Helpers for event handling
        attachDOMEvent: function(i, o, a, s) {
          var l = this.base.options.contentWindow, u = this.base.options.ownerDocument;
          i = t.util.isElement(i) || [l, u].indexOf(i) > -1 ? [i] : i, Array.prototype.forEach.call(i, (function(c) {
            c.addEventListener(o, a, s), this.events.push([c, o, a, s]);
          }).bind(this));
        },
        detachDOMEvent: function(i, o, a, s) {
          var l, u, c = this.base.options.contentWindow, d = this.base.options.ownerDocument;
          i && (i = t.util.isElement(i) || [c, d].indexOf(i) > -1 ? [i] : i, Array.prototype.forEach.call(i, (function(f) {
            l = this.indexOfListener(f, o, a, s), l !== -1 && (u = this.events.splice(l, 1)[0], u[0].removeEventListener(u[1], u[2], u[3]));
          }).bind(this)));
        },
        indexOfListener: function(i, o, a, s) {
          var l, u, c;
          for (l = 0, u = this.events.length; l < u; l = l + 1)
            if (c = this.events[l], c[0] === i && c[1] === o && c[2] === a && c[3] === s)
              return l;
          return -1;
        },
        detachAllDOMEvents: function() {
          for (var i = this.events.pop(); i; )
            i[0].removeEventListener(i[1], i[2], i[3]), i = this.events.pop();
        },
        detachAllEventsFromElement: function(i) {
          for (var o = this.events.filter(function(u) {
            return u && u[0].getAttribute && u[0].getAttribute("medium-editor-index") === i.getAttribute("medium-editor-index");
          }), a = 0, s = o.length; a < s; a++) {
            var l = o[a];
            this.detachDOMEvent(l[0], l[1], l[2], l[3]);
          }
        },
        // Attach all existing handlers to a new element
        attachAllEventsToElement: function(i) {
          this.listeners.editableInput && (this.contentCache[i.getAttribute("medium-editor-index")] = i.innerHTML), this.eventsCache && this.eventsCache.forEach(function(o) {
            this.attachDOMEvent(i, o.name, o.handler.bind(this));
          }, this);
        },
        enableCustomEvent: function(i) {
          this.disabledEvents[i] !== void 0 && delete this.disabledEvents[i];
        },
        disableCustomEvent: function(i) {
          this.disabledEvents[i] = !0;
        },
        // custom events
        attachCustomEvent: function(i, o) {
          this.setupListener(i), this.customEvents[i] || (this.customEvents[i] = []), this.customEvents[i].push(o);
        },
        detachCustomEvent: function(i, o) {
          var a = this.indexOfCustomListener(i, o);
          a !== -1 && this.customEvents[i].splice(a, 1);
        },
        indexOfCustomListener: function(i, o) {
          return !this.customEvents[i] || !this.customEvents[i].length ? -1 : this.customEvents[i].indexOf(o);
        },
        detachAllCustomEvents: function() {
          this.customEvents = {};
        },
        triggerCustomEvent: function(i, o, a) {
          this.customEvents[i] && !this.disabledEvents[i] && this.customEvents[i].forEach(function(s) {
            s(o, a);
          });
        },
        // Cleaning up
        destroy: function() {
          this.detachAllDOMEvents(), this.detachAllCustomEvents(), this.detachExecCommand(), this.base.elements && this.base.elements.forEach(function(i) {
            i.removeAttribute("data-medium-focused");
          });
        },
        // Listening to calls to document.execCommand
        // Attach a listener to be notified when document.execCommand is called
        attachToExecCommand: function() {
          this.execCommandListener || (this.execCommandListener = (function(i) {
            this.handleDocumentExecCommand(i);
          }).bind(this), this.wrapExecCommand(), this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener));
        },
        // Remove our listener for calls to document.execCommand
        detachExecCommand: function() {
          var i = this.options.ownerDocument;
          if (!(!this.execCommandListener || !i.execCommand.listeners)) {
            var o = i.execCommand.listeners.indexOf(this.execCommandListener);
            o !== -1 && i.execCommand.listeners.splice(o, 1), i.execCommand.listeners.length || this.unwrapExecCommand();
          }
        },
        // Wrap document.execCommand in a custom method so we can listen to calls to it
        wrapExecCommand: function() {
          var i = this.options.ownerDocument;
          if (!i.execCommand.listeners) {
            var o = function(s, l) {
              i.execCommand.listeners && i.execCommand.listeners.forEach(function(u) {
                u({
                  command: s[0],
                  value: s[2],
                  args: s,
                  result: l
                });
              });
            }, a = function() {
              var s = i.execCommand.orig.apply(this, arguments);
              if (!i.execCommand.listeners)
                return s;
              var l = Array.prototype.slice.call(arguments);
              return o(l, s), s;
            };
            a.orig = i.execCommand, a.listeners = [], a.callListeners = o, i.execCommand = a;
          }
        },
        // Revert document.execCommand back to its original self
        unwrapExecCommand: function() {
          var i = this.options.ownerDocument;
          i.execCommand.orig && (i.execCommand = i.execCommand.orig);
        },
        // Listening to browser events to emit events medium-editor cares about
        setupListener: function(i) {
          if (!this.listeners[i]) {
            switch (i) {
              case "externalInteraction":
                this.attachDOMEvent(this.options.ownerDocument.body, "mousedown", this.handleBodyMousedown.bind(this), !0), this.attachDOMEvent(this.options.ownerDocument.body, "click", this.handleBodyClick.bind(this), !0), this.attachDOMEvent(this.options.ownerDocument.body, "focus", this.handleBodyFocus.bind(this), !0);
                break;
              case "blur":
                this.setupListener("externalInteraction");
                break;
              case "focus":
                this.setupListener("externalInteraction");
                break;
              case "editableInput":
                this.contentCache = {}, this.base.elements.forEach(function(o) {
                  this.contentCache[o.getAttribute("medium-editor-index")] = o.innerHTML;
                }, this), this.InputEventOnContenteditableSupported && this.attachToEachElement("input", this.handleInput), this.InputEventOnContenteditableSupported || (this.setupListener("editableKeypress"), this.keypressUpdateInput = !0, this.attachDOMEvent(document, "selectionchange", this.handleDocumentSelectionChange.bind(this)), this.attachToExecCommand());
                break;
              case "editableClick":
                this.attachToEachElement("click", this.handleClick);
                break;
              case "editableBlur":
                this.attachToEachElement("blur", this.handleBlur);
                break;
              case "editableKeypress":
                this.attachToEachElement("keypress", this.handleKeypress);
                break;
              case "editableKeyup":
                this.attachToEachElement("keyup", this.handleKeyup);
                break;
              case "editableKeydown":
                this.attachToEachElement("keydown", this.handleKeydown);
                break;
              case "editableKeydownSpace":
                this.setupListener("editableKeydown");
                break;
              case "editableKeydownEnter":
                this.setupListener("editableKeydown");
                break;
              case "editableKeydownTab":
                this.setupListener("editableKeydown");
                break;
              case "editableKeydownDelete":
                this.setupListener("editableKeydown");
                break;
              case "editableMouseover":
                this.attachToEachElement("mouseover", this.handleMouseover);
                break;
              case "editableDrag":
                this.attachToEachElement("dragover", this.handleDragging), this.attachToEachElement("dragleave", this.handleDragging);
                break;
              case "editableDrop":
                this.attachToEachElement("drop", this.handleDrop);
                break;
              case "editablePaste":
                this.attachToEachElement("paste", this.handlePaste);
                break;
            }
            this.listeners[i] = !0;
          }
        },
        attachToEachElement: function(i, o) {
          this.eventsCache || (this.eventsCache = []), this.base.elements.forEach(function(a) {
            this.attachDOMEvent(a, i, o.bind(this));
          }, this), this.eventsCache.push({ name: i, handler: o });
        },
        cleanupElement: function(i) {
          var o = i.getAttribute("medium-editor-index");
          o && (this.detachAllEventsFromElement(i), this.contentCache && delete this.contentCache[o]);
        },
        focusElement: function(i) {
          i.focus(), this.updateFocus(i, { target: i, type: "focus" });
        },
        updateFocus: function(i, o) {
          var a = this.base.getFocusedElement(), s;
          a && o.type === "click" && this.lastMousedownTarget && (t.util.isDescendant(a, this.lastMousedownTarget, !0) || n(this.base.extensions, this.lastMousedownTarget)) && (s = a), s || this.base.elements.some(function(u) {
            return !s && t.util.isDescendant(u, i, !0) && (s = u), !!s;
          }, this);
          var l = !t.util.isDescendant(a, i, !0) && !n(this.base.extensions, i);
          s !== a && (a && l && (a.removeAttribute("data-medium-focused"), this.triggerCustomEvent("blur", o, a)), s && (s.setAttribute("data-medium-focused", !0), this.triggerCustomEvent("focus", o, s))), l && this.triggerCustomEvent("externalInteraction", o);
        },
        updateInput: function(i, o) {
          if (this.contentCache) {
            var a = i.getAttribute("medium-editor-index"), s = i.innerHTML;
            s !== this.contentCache[a] && this.triggerCustomEvent("editableInput", o, i), this.contentCache[a] = s;
          }
        },
        handleDocumentSelectionChange: function(i) {
          if (i.currentTarget && i.currentTarget.activeElement) {
            var o = i.currentTarget.activeElement, a;
            this.base.elements.some(function(s) {
              return t.util.isDescendant(s, o, !0) ? (a = s, !0) : !1;
            }, this), a && this.updateInput(a, { target: o, currentTarget: a });
          }
        },
        handleDocumentExecCommand: function() {
          var i = this.base.getFocusedElement();
          i && this.updateInput(i, { target: i, currentTarget: i });
        },
        handleBodyClick: function(i) {
          this.updateFocus(i.target, i);
        },
        handleBodyFocus: function(i) {
          this.updateFocus(i.target, i);
        },
        handleBodyMousedown: function(i) {
          this.lastMousedownTarget = i.target;
        },
        handleInput: function(i) {
          this.updateInput(i.currentTarget, i);
        },
        handleClick: function(i) {
          this.triggerCustomEvent("editableClick", i, i.currentTarget);
        },
        handleBlur: function(i) {
          this.triggerCustomEvent("editableBlur", i, i.currentTarget);
        },
        handleKeypress: function(i) {
          if (this.triggerCustomEvent("editableKeypress", i, i.currentTarget), this.keypressUpdateInput) {
            var o = { target: i.target, currentTarget: i.currentTarget };
            setTimeout((function() {
              this.updateInput(o.currentTarget, o);
            }).bind(this), 0);
          }
        },
        handleKeyup: function(i) {
          this.triggerCustomEvent("editableKeyup", i, i.currentTarget);
        },
        handleMouseover: function(i) {
          this.triggerCustomEvent("editableMouseover", i, i.currentTarget);
        },
        handleDragging: function(i) {
          this.triggerCustomEvent("editableDrag", i, i.currentTarget);
        },
        handleDrop: function(i) {
          this.triggerCustomEvent("editableDrop", i, i.currentTarget);
        },
        handlePaste: function(i) {
          this.triggerCustomEvent("editablePaste", i, i.currentTarget);
        },
        handleKeydown: function(i) {
          if (this.triggerCustomEvent("editableKeydown", i, i.currentTarget), t.util.isKey(i, t.util.keyCode.SPACE))
            return this.triggerCustomEvent("editableKeydownSpace", i, i.currentTarget);
          if (t.util.isKey(i, t.util.keyCode.ENTER) || i.ctrlKey && t.util.isKey(i, t.util.keyCode.M))
            return this.triggerCustomEvent("editableKeydownEnter", i, i.currentTarget);
          if (t.util.isKey(i, t.util.keyCode.TAB))
            return this.triggerCustomEvent("editableKeydownTab", i, i.currentTarget);
          if (t.util.isKey(i, [t.util.keyCode.DELETE, t.util.keyCode.BACKSPACE]))
            return this.triggerCustomEvent("editableKeydownDelete", i, i.currentTarget);
        }
      }, t.Events = r;
    }(), function() {
      var n = t.Extension.extend({
        /* Button Options */
        /* action: [string]
         * The action argument to pass to MediumEditor.execAction()
         * when the button is clicked
         */
        action: void 0,
        /* aria: [string]
         * The value to add as the aria-label attribute of the button
         * element displayed in the toolbar.
         * This is also used as the tooltip for the button
         */
        aria: void 0,
        /* tagNames: [Array]
         * NOTE: This is not used if useQueryState is set to true.
         *
         * Array of element tag names that would indicate that this
         * button has already been applied. If this action has already
         * been applied, the button will be displayed as 'active' in the toolbar
         *
         * Example:
         * For 'bold', if the text is ever within a <b> or <strong>
         * tag that indicates the text is already bold. So the array
         * of tagNames for bold would be: ['b', 'strong']
         */
        tagNames: void 0,
        /* style: [Object]
         * NOTE: This is not used if useQueryState is set to true.
         *
         * A pair of css property & value(s) that indicate that this
         * button has already been applied. If this action has already
         * been applied, the button will be displayed as 'active' in the toolbar
         * Properties of the object:
         *   prop [String]: name of the css property
         *   value [String]: value(s) of the css property
         *                   multiple values can be separated by a '|'
         *
         * Example:
         * For 'bold', if the text is ever within an element with a 'font-weight'
         * style property set to '700' or 'bold', that indicates the text
         * is already bold.  So the style object for bold would be:
         * { prop: 'font-weight', value: '700|bold' }
         */
        style: void 0,
        /* useQueryState: [boolean]
         * Enables/disables whether this button should use the built-in
         * document.queryCommandState() method to determine whether
         * the action has already been applied.  If the action has already
         * been applied, the button will be displayed as 'active' in the toolbar
         *
         * Example:
         * For 'bold', if this is set to true, the code will call:
         * document.queryCommandState('bold') which will return true if the
         * browser thinks the text is already bold, and false otherwise
         */
        useQueryState: void 0,
        /* contentDefault: [string]
         * Default innerHTML to put inside the button
         */
        contentDefault: void 0,
        /* contentFA: [string]
         * The innerHTML to use for the content of the button
         * if the `buttonLabels` option for MediumEditor is set to 'fontawesome'
         */
        contentFA: void 0,
        /* classList: [Array]
         * An array of classNames (strings) to be added to the button
         */
        classList: void 0,
        /* attrs: [object]
         * A set of key-value pairs to add to the button as custom attributes
         */
        attrs: void 0,
        // The button constructor can optionally accept the name of a built-in button
        // (ie 'bold', 'italic', etc.)
        // When the name of a button is passed, it will initialize itself with the
        // configuration for that button
        constructor: function(r) {
          n.isBuiltInButton(r) ? t.Extension.call(this, this.defaults[r]) : t.Extension.call(this, r);
        },
        init: function() {
          t.Extension.prototype.init.apply(this, arguments), this.button = this.createButton(), this.on(this.button, "click", this.handleClick.bind(this));
        },
        /* getButton: [function ()]
         *
         * If implemented, this function will be called when
         * the toolbar is being created.  The DOM Element returned
         * by this function will be appended to the toolbar along
         * with any other buttons.
         */
        getButton: function() {
          return this.button;
        },
        getAction: function() {
          return typeof this.action == "function" ? this.action(this.base.options) : this.action;
        },
        getAria: function() {
          return typeof this.aria == "function" ? this.aria(this.base.options) : this.aria;
        },
        getTagNames: function() {
          return typeof this.tagNames == "function" ? this.tagNames(this.base.options) : this.tagNames;
        },
        createButton: function() {
          var r = this.document.createElement("button"), i = this.contentDefault, o = this.getAria(), a = this.getEditorOption("buttonLabels");
          return r.classList.add("medium-editor-action"), r.classList.add("medium-editor-action-" + this.name), this.classList && this.classList.forEach(function(s) {
            r.classList.add(s);
          }), r.setAttribute("data-action", this.getAction()), o && (r.setAttribute("title", o), r.setAttribute("aria-label", o)), this.attrs && Object.keys(this.attrs).forEach(function(s) {
            r.setAttribute(s, this.attrs[s]);
          }, this), a === "fontawesome" && this.contentFA && (i = this.contentFA), r.innerHTML = i, r;
        },
        handleClick: function(r) {
          r.preventDefault(), r.stopPropagation();
          var i = this.getAction();
          i && this.execAction(i);
        },
        isActive: function() {
          return this.button.classList.contains(this.getEditorOption("activeButtonClass"));
        },
        setInactive: function() {
          this.button.classList.remove(this.getEditorOption("activeButtonClass")), delete this.knownState;
        },
        setActive: function() {
          this.button.classList.add(this.getEditorOption("activeButtonClass")), delete this.knownState;
        },
        queryCommandState: function() {
          var r = null;
          return this.useQueryState && (r = this.base.queryCommandState(this.getAction())), r;
        },
        isAlreadyApplied: function(r) {
          var i = !1, o = this.getTagNames(), a, s;
          return this.knownState === !1 || this.knownState === !0 ? this.knownState : (o && o.length > 0 && (i = o.indexOf(r.nodeName.toLowerCase()) !== -1), !i && this.style && (a = this.style.value.split("|"), s = this.window.getComputedStyle(r, null).getPropertyValue(this.style.prop), a.forEach(function(l) {
            this.knownState || (i = s.indexOf(l) !== -1, (i || this.style.prop !== "text-decoration") && (this.knownState = i));
          }, this)), i);
        }
      });
      n.isBuiltInButton = function(r) {
        return typeof r == "string" && t.extensions.button.prototype.defaults.hasOwnProperty(r);
      }, t.extensions.button = n;
    }(), function() {
      t.extensions.button.prototype.defaults = {
        bold: {
          name: "bold",
          action: "bold",
          aria: "bold",
          tagNames: ["b", "strong"],
          style: {
            prop: "font-weight",
            value: "700|bold"
          },
          useQueryState: !0,
          contentDefault: "<b>B</b>",
          contentFA: '<i class="fa fa-bold"></i>'
        },
        italic: {
          name: "italic",
          action: "italic",
          aria: "italic",
          tagNames: ["i", "em"],
          style: {
            prop: "font-style",
            value: "italic"
          },
          useQueryState: !0,
          contentDefault: "<b><i>I</i></b>",
          contentFA: '<i class="fa fa-italic"></i>'
        },
        underline: {
          name: "underline",
          action: "underline",
          aria: "underline",
          tagNames: ["u"],
          style: {
            prop: "text-decoration",
            value: "underline"
          },
          useQueryState: !0,
          contentDefault: "<b><u>U</u></b>",
          contentFA: '<i class="fa fa-underline"></i>'
        },
        strikethrough: {
          name: "strikethrough",
          action: "strikethrough",
          aria: "strike through",
          tagNames: ["strike"],
          style: {
            prop: "text-decoration",
            value: "line-through"
          },
          useQueryState: !0,
          contentDefault: "<s>A</s>",
          contentFA: '<i class="fa fa-strikethrough"></i>'
        },
        superscript: {
          name: "superscript",
          action: "superscript",
          aria: "superscript",
          tagNames: ["sup"],
          /* firefox doesn't behave the way we want it to, so we CAN'T use queryCommandState for superscript
             https://github.com/guardian/scribe/blob/master/BROWSERINCONSISTENCIES.md#documentquerycommandstate */
          // useQueryState: true
          contentDefault: "<b>x<sup>1</sup></b>",
          contentFA: '<i class="fa fa-superscript"></i>'
        },
        subscript: {
          name: "subscript",
          action: "subscript",
          aria: "subscript",
          tagNames: ["sub"],
          /* firefox doesn't behave the way we want it to, so we CAN'T use queryCommandState for subscript
             https://github.com/guardian/scribe/blob/master/BROWSERINCONSISTENCIES.md#documentquerycommandstate */
          // useQueryState: true
          contentDefault: "<b>x<sub>1</sub></b>",
          contentFA: '<i class="fa fa-subscript"></i>'
        },
        image: {
          name: "image",
          action: "image",
          aria: "image",
          tagNames: ["img"],
          contentDefault: "<b>image</b>",
          contentFA: '<i class="fa fa-picture-o"></i>'
        },
        html: {
          name: "html",
          action: "html",
          aria: "evaluate html",
          tagNames: ["iframe", "object"],
          contentDefault: "<b>html</b>",
          contentFA: '<i class="fa fa-code"></i>'
        },
        orderedlist: {
          name: "orderedlist",
          action: "insertorderedlist",
          aria: "ordered list",
          tagNames: ["ol"],
          useQueryState: !0,
          contentDefault: "<b>1.</b>",
          contentFA: '<i class="fa fa-list-ol"></i>'
        },
        unorderedlist: {
          name: "unorderedlist",
          action: "insertunorderedlist",
          aria: "unordered list",
          tagNames: ["ul"],
          useQueryState: !0,
          contentDefault: "<b>&bull;</b>",
          contentFA: '<i class="fa fa-list-ul"></i>'
        },
        indent: {
          name: "indent",
          action: "indent",
          aria: "indent",
          tagNames: [],
          contentDefault: "<b>&rarr;</b>",
          contentFA: '<i class="fa fa-indent"></i>'
        },
        outdent: {
          name: "outdent",
          action: "outdent",
          aria: "outdent",
          tagNames: [],
          contentDefault: "<b>&larr;</b>",
          contentFA: '<i class="fa fa-outdent"></i>'
        },
        justifyCenter: {
          name: "justifyCenter",
          action: "justifyCenter",
          aria: "center justify",
          tagNames: [],
          style: {
            prop: "text-align",
            value: "center"
          },
          contentDefault: "<b>C</b>",
          contentFA: '<i class="fa fa-align-center"></i>'
        },
        justifyFull: {
          name: "justifyFull",
          action: "justifyFull",
          aria: "full justify",
          tagNames: [],
          style: {
            prop: "text-align",
            value: "justify"
          },
          contentDefault: "<b>J</b>",
          contentFA: '<i class="fa fa-align-justify"></i>'
        },
        justifyLeft: {
          name: "justifyLeft",
          action: "justifyLeft",
          aria: "left justify",
          tagNames: [],
          style: {
            prop: "text-align",
            value: "left"
          },
          contentDefault: "<b>L</b>",
          contentFA: '<i class="fa fa-align-left"></i>'
        },
        justifyRight: {
          name: "justifyRight",
          action: "justifyRight",
          aria: "right justify",
          tagNames: [],
          style: {
            prop: "text-align",
            value: "right"
          },
          contentDefault: "<b>R</b>",
          contentFA: '<i class="fa fa-align-right"></i>'
        },
        // Known inline elements that are not removed, or not removed consistantly across browsers:
        // <span>, <label>, <br>
        removeFormat: {
          name: "removeFormat",
          aria: "remove formatting",
          action: "removeFormat",
          contentDefault: "<b>X</b>",
          contentFA: '<i class="fa fa-eraser"></i>'
        },
        /***** Buttons for appending block elements (append-<element> action) *****/
        quote: {
          name: "quote",
          action: "append-blockquote",
          aria: "blockquote",
          tagNames: ["blockquote"],
          contentDefault: "<b>&ldquo;</b>",
          contentFA: '<i class="fa fa-quote-right"></i>'
        },
        pre: {
          name: "pre",
          action: "append-pre",
          aria: "preformatted text",
          tagNames: ["pre"],
          contentDefault: "<b>0101</b>",
          contentFA: '<i class="fa fa-code fa-lg"></i>'
        },
        h1: {
          name: "h1",
          action: "append-h1",
          aria: "header type one",
          tagNames: ["h1"],
          contentDefault: "<b>H1</b>",
          contentFA: '<i class="fa fa-header"><sup>1</sup>'
        },
        h2: {
          name: "h2",
          action: "append-h2",
          aria: "header type two",
          tagNames: ["h2"],
          contentDefault: "<b>H2</b>",
          contentFA: '<i class="fa fa-header"><sup>2</sup>'
        },
        h3: {
          name: "h3",
          action: "append-h3",
          aria: "header type three",
          tagNames: ["h3"],
          contentDefault: "<b>H3</b>",
          contentFA: '<i class="fa fa-header"><sup>3</sup>'
        },
        h4: {
          name: "h4",
          action: "append-h4",
          aria: "header type four",
          tagNames: ["h4"],
          contentDefault: "<b>H4</b>",
          contentFA: '<i class="fa fa-header"><sup>4</sup>'
        },
        h5: {
          name: "h5",
          action: "append-h5",
          aria: "header type five",
          tagNames: ["h5"],
          contentDefault: "<b>H5</b>",
          contentFA: '<i class="fa fa-header"><sup>5</sup>'
        },
        h6: {
          name: "h6",
          action: "append-h6",
          aria: "header type six",
          tagNames: ["h6"],
          contentDefault: "<b>H6</b>",
          contentFA: '<i class="fa fa-header"><sup>6</sup>'
        }
      };
    }(), function() {
      var n = t.extensions.button.extend({
        init: function() {
          t.extensions.button.prototype.init.apply(this, arguments);
        },
        // default labels for the form buttons
        formSaveLabel: "&#10003;",
        formCloseLabel: "&times;",
        /* activeClass: [string]
         * set class which added to shown form
         */
        activeClass: "medium-editor-toolbar-form-active",
        /* hasForm: [boolean]
         *
         * Setting this to true will cause getForm() to be called
         * when the toolbar is created, so the form can be appended
         * inside the toolbar container
         */
        hasForm: !0,
        /* getForm: [function ()]
         *
         * When hasForm is true, this function must be implemented
         * and return a DOM Element which will be appended to
         * the toolbar container. The form should start hidden, and
         * the extension can choose when to hide/show it
         */
        getForm: function() {
        },
        /* isDisplayed: [function ()]
         *
         * This function should return true/false reflecting
         * whether the form is currently displayed
         */
        isDisplayed: function() {
          return this.hasForm ? this.getForm().classList.contains(this.activeClass) : !1;
        },
        /* hideForm: [function ()]
         *
         * This function should show the form element inside
         * the toolbar container
         */
        showForm: function() {
          this.hasForm && this.getForm().classList.add(this.activeClass);
        },
        /* hideForm: [function ()]
         *
         * This function should hide the form element inside
         * the toolbar container
         */
        hideForm: function() {
          this.hasForm && this.getForm().classList.remove(this.activeClass);
        },
        /************************ Helpers ************************
         * The following are helpers that are either set by MediumEditor
         * during initialization, or are helper methods which either
         * route calls to the MediumEditor instance or provide common
         * functionality for all form extensions
         *********************************************************/
        /* showToolbarDefaultActions: [function ()]
         *
         * Helper method which will turn back the toolbar after canceling
         * the customized form
         */
        showToolbarDefaultActions: function() {
          var r = this.base.getExtensionByName("toolbar");
          r && r.showToolbarDefaultActions();
        },
        /* hideToolbarDefaultActions: [function ()]
         *
         * Helper function which will hide the default contents of the
         * toolbar, but leave the toolbar container in the same state
         * to allow a form to display its custom contents inside the toolbar
         */
        hideToolbarDefaultActions: function() {
          var r = this.base.getExtensionByName("toolbar");
          r && r.hideToolbarDefaultActions();
        },
        /* setToolbarPosition: [function ()]
         *
         * Helper function which will update the size and position
         * of the toolbar based on the toolbar content and the current
         * position of the user's selection
         */
        setToolbarPosition: function() {
          var r = this.base.getExtensionByName("toolbar");
          r && r.setToolbarPosition();
        }
      });
      t.extensions.form = n;
    }(), function() {
      var n = t.extensions.form.extend({
        /* Anchor Form Options */
        /* customClassOption: [string]  (previously options.anchorButton + options.anchorButtonClass)
         * Custom class name the user can optionally have added to their created links (ie 'button').
         * If passed as a non-empty string, a checkbox will be displayed allowing the user to choose
         * whether to have the class added to the created link or not.
         */
        customClassOption: null,
        /* customClassOptionText: [string]
         * text to be shown in the checkbox when the __customClassOption__ is being used.
         */
        customClassOptionText: "Button",
        /* linkValidation: [boolean]  (previously options.checkLinkFormat)
         * enables/disables check for common URL protocols on anchor links.
         */
        linkValidation: !1,
        /* placeholderText: [string]  (previously options.anchorInputPlaceholder)
         * text to be shown as placeholder of the anchor input.
         */
        placeholderText: "Paste or type a link",
        /* targetCheckbox: [boolean]  (previously options.anchorTarget)
         * enables/disables displaying a "Open in new window" checkbox, which when checked
         * changes the `target` attribute of the created link.
         */
        targetCheckbox: !1,
        /* targetCheckboxText: [string]  (previously options.anchorInputCheckboxLabel)
         * text to be shown in the checkbox enabled via the __targetCheckbox__ option.
         */
        targetCheckboxText: "Open in new window",
        // Options for the Button base class
        name: "anchor",
        action: "createLink",
        aria: "link",
        tagNames: ["a"],
        contentDefault: "<b>#</b>",
        contentFA: '<i class="fa fa-link"></i>',
        init: function() {
          t.extensions.form.prototype.init.apply(this, arguments), this.subscribe("editableKeydown", this.handleKeydown.bind(this));
        },
        // Called when the button the toolbar is clicked
        // Overrides ButtonExtension.handleClick
        handleClick: function(r) {
          r.preventDefault(), r.stopPropagation();
          var i = t.selection.getSelectionRange(this.document);
          return i.startContainer.nodeName.toLowerCase() === "a" || i.endContainer.nodeName.toLowerCase() === "a" || t.util.getClosestTag(t.selection.getSelectedParentElement(i), "a") ? this.execAction("unlink") : (this.isDisplayed() || this.showForm(), !1);
        },
        // Called when user hits the defined shortcut (CTRL / COMMAND + K)
        handleKeydown: function(r) {
          t.util.isKey(r, t.util.keyCode.K) && t.util.isMetaCtrlKey(r) && !r.shiftKey && this.handleClick(r);
        },
        // Called by medium-editor to append form to the toolbar
        getForm: function() {
          return this.form || (this.form = this.createForm()), this.form;
        },
        getTemplate: function() {
          var r = [
            '<input type="text" class="medium-editor-toolbar-input" placeholder="',
            this.placeholderText,
            '">'
          ];
          return r.push(
            '<a href="#" class="medium-editor-toolbar-save">',
            this.getEditorOption("buttonLabels") === "fontawesome" ? '<i class="fa fa-check"></i>' : this.formSaveLabel,
            "</a>"
          ), r.push(
            '<a href="#" class="medium-editor-toolbar-close">',
            this.getEditorOption("buttonLabels") === "fontawesome" ? '<i class="fa fa-times"></i>' : this.formCloseLabel,
            "</a>"
          ), this.targetCheckbox && r.push(
            '<div class="medium-editor-toolbar-form-row">',
            '<input type="checkbox" class="medium-editor-toolbar-anchor-target" id="medium-editor-toolbar-anchor-target-field-' + this.getEditorId() + '">',
            '<label for="medium-editor-toolbar-anchor-target-field-' + this.getEditorId() + '">',
            this.targetCheckboxText,
            "</label>",
            "</div>"
          ), this.customClassOption && r.push(
            '<div class="medium-editor-toolbar-form-row">',
            '<input type="checkbox" class="medium-editor-toolbar-anchor-button">',
            "<label>",
            this.customClassOptionText,
            "</label>",
            "</div>"
          ), r.join("");
        },
        // Used by medium-editor when the default toolbar is to be displayed
        isDisplayed: function() {
          return t.extensions.form.prototype.isDisplayed.apply(this);
        },
        hideForm: function() {
          t.extensions.form.prototype.hideForm.apply(this), this.getInput().value = "";
        },
        showForm: function(r) {
          var i = this.getInput(), o = this.getAnchorTargetCheckbox(), a = this.getAnchorButtonCheckbox();
          if (r = r || { value: "" }, typeof r == "string" && (r = {
            value: r
          }), this.base.saveSelection(), this.hideToolbarDefaultActions(), t.extensions.form.prototype.showForm.apply(this), this.setToolbarPosition(), i.value = r.value, i.focus(), o && (o.checked = r.target === "_blank"), a) {
            var s = r.buttonClass ? r.buttonClass.split(" ") : [];
            a.checked = s.indexOf(this.customClassOption) !== -1;
          }
        },
        // Called by core when tearing down medium-editor (destroy)
        destroy: function() {
          if (!this.form)
            return !1;
          this.form.parentNode && this.form.parentNode.removeChild(this.form), delete this.form;
        },
        // core methods
        getFormOpts: function() {
          var r = this.getAnchorTargetCheckbox(), i = this.getAnchorButtonCheckbox(), o = {
            value: this.getInput().value.trim()
          };
          return this.linkValidation && (o.value = this.checkLinkFormat(o.value)), o.target = "_self", r && r.checked && (o.target = "_blank"), i && i.checked && (o.buttonClass = this.customClassOption), o;
        },
        doFormSave: function() {
          var r = this.getFormOpts();
          this.completeFormSave(r);
        },
        completeFormSave: function(r) {
          this.base.restoreSelection(), this.execAction(this.action, r), this.base.checkSelection();
        },
        ensureEncodedUri: function(r) {
          return r === decodeURI(r) ? encodeURI(r) : r;
        },
        ensureEncodedUriComponent: function(r) {
          return r === decodeURIComponent(r) ? encodeURIComponent(r) : r;
        },
        ensureEncodedParam: function(r) {
          var i = r.split("="), o = i[0], a = i[1];
          return o + (a === void 0 ? "" : "=" + this.ensureEncodedUriComponent(a));
        },
        ensureEncodedQuery: function(r) {
          return r.split("&").map(this.ensureEncodedParam.bind(this)).join("&");
        },
        checkLinkFormat: function(r) {
          var i = /^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i, o = i.test(r), a = "", s = /^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/, l = r.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/), u = l[1], c = l[2], d = l[3];
          if (s.test(r))
            return "tel:" + r;
          if (!o) {
            var f = u.split("/")[0];
            (f.match(/.+(\.|:).+/) || f === "localhost") && (a = "http://");
          }
          return a + // Ensure path is encoded
          this.ensureEncodedUri(u) + // Ensure query is encoded
          (c === void 0 ? "" : "?" + this.ensureEncodedQuery(c)) + // Include fragment unencoded as encodeUriComponent is too
          // heavy handed for the many characters allowed in a fragment
          (d === void 0 ? "" : "#" + d);
        },
        doFormCancel: function() {
          this.base.restoreSelection(), this.base.checkSelection();
        },
        // form creation and event handling
        attachFormEvents: function(r) {
          var i = r.querySelector(".medium-editor-toolbar-close"), o = r.querySelector(".medium-editor-toolbar-save"), a = r.querySelector(".medium-editor-toolbar-input");
          this.on(r, "click", this.handleFormClick.bind(this)), this.on(a, "keyup", this.handleTextboxKeyup.bind(this)), this.on(i, "click", this.handleCloseClick.bind(this)), this.on(o, "click", this.handleSaveClick.bind(this), !0);
        },
        createForm: function() {
          var r = this.document, i = r.createElement("div");
          return i.className = "medium-editor-toolbar-form", i.id = "medium-editor-toolbar-form-anchor-" + this.getEditorId(), i.innerHTML = this.getTemplate(), this.attachFormEvents(i), i;
        },
        getInput: function() {
          return this.getForm().querySelector("input.medium-editor-toolbar-input");
        },
        getAnchorTargetCheckbox: function() {
          return this.getForm().querySelector(".medium-editor-toolbar-anchor-target");
        },
        getAnchorButtonCheckbox: function() {
          return this.getForm().querySelector(".medium-editor-toolbar-anchor-button");
        },
        handleTextboxKeyup: function(r) {
          if (r.keyCode === t.util.keyCode.ENTER) {
            r.preventDefault(), this.doFormSave();
            return;
          }
          r.keyCode === t.util.keyCode.ESCAPE && (r.preventDefault(), this.doFormCancel());
        },
        handleFormClick: function(r) {
          r.stopPropagation();
        },
        handleSaveClick: function(r) {
          r.preventDefault(), this.doFormSave();
        },
        handleCloseClick: function(r) {
          r.preventDefault(), this.doFormCancel();
        }
      });
      t.extensions.anchor = n;
    }(), function() {
      var n = t.Extension.extend({
        name: "anchor-preview",
        // Anchor Preview Options
        /* hideDelay: [number]  (previously options.anchorPreviewHideDelay)
         * time in milliseconds to show the anchor tag preview after the mouse has left the anchor tag.
         */
        hideDelay: 500,
        /* previewValueSelector: [string]
         * the default selector to locate where to put the activeAnchor value in the preview
         */
        previewValueSelector: "a",
        /* showWhenToolbarIsVisible: [boolean]
         * determines whether the anchor tag preview shows up when the toolbar is visible
         */
        showWhenToolbarIsVisible: !1,
        /* showOnEmptyLinks: [boolean]
        * determines whether the anchor tag preview shows up on links with href="" or href="#something"
        */
        showOnEmptyLinks: !0,
        init: function() {
          this.anchorPreview = this.createPreview(), this.getEditorOption("elementsContainer").appendChild(this.anchorPreview), this.attachToEditables();
        },
        getInteractionElements: function() {
          return this.getPreviewElement();
        },
        // TODO: Remove this function in 6.0.0
        getPreviewElement: function() {
          return this.anchorPreview;
        },
        createPreview: function() {
          var r = this.document.createElement("div");
          return r.id = "medium-editor-anchor-preview-" + this.getEditorId(), r.className = "medium-editor-anchor-preview", r.innerHTML = this.getTemplate(), this.on(r, "click", this.handleClick.bind(this)), r;
        },
        getTemplate: function() {
          return '<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>';
        },
        destroy: function() {
          this.anchorPreview && (this.anchorPreview.parentNode && this.anchorPreview.parentNode.removeChild(this.anchorPreview), delete this.anchorPreview);
        },
        hidePreview: function() {
          this.anchorPreview && this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"), this.activeAnchor = null;
        },
        showPreview: function(r) {
          return this.anchorPreview.classList.contains("medium-editor-anchor-preview-active") || r.getAttribute("data-disable-preview") ? !0 : (this.previewValueSelector && (this.anchorPreview.querySelector(this.previewValueSelector).textContent = r.attributes.href.value, this.anchorPreview.querySelector(this.previewValueSelector).href = r.attributes.href.value), this.anchorPreview.classList.add("medium-toolbar-arrow-over"), this.anchorPreview.classList.remove("medium-toolbar-arrow-under"), this.anchorPreview.classList.contains("medium-editor-anchor-preview-active") || this.anchorPreview.classList.add("medium-editor-anchor-preview-active"), this.activeAnchor = r, this.positionPreview(), this.attachPreviewHandlers(), this);
        },
        positionPreview: function(r) {
          r = r || this.activeAnchor;
          var i = this.window.innerWidth, o = this.anchorPreview.offsetHeight, a = r.getBoundingClientRect(), s = this.diffLeft, l = this.diffTop, u = this.getEditorOption("elementsContainer"), c = ["absolute", "fixed"].indexOf(window.getComputedStyle(u).getPropertyValue("position")) > -1, d = {}, f, h, p, v, g;
          f = this.anchorPreview.offsetWidth / 2;
          var y = this.base.getExtensionByName("toolbar");
          y && (s = y.diffLeft, l = y.diffTop), h = s - f, c ? (v = u.getBoundingClientRect(), ["top", "left"].forEach(function(m) {
            d[m] = a[m] - v[m];
          }), d.width = a.width, d.height = a.height, a = d, i = v.width, g = u.scrollTop) : g = this.window.pageYOffset, p = a.left + a.width / 2, g += o + a.top + a.height - l - this.anchorPreview.offsetHeight, this.anchorPreview.style.top = Math.round(g) + "px", this.anchorPreview.style.right = "initial", p < f ? (this.anchorPreview.style.left = h + f + "px", this.anchorPreview.style.right = "initial") : i - p < f ? (this.anchorPreview.style.left = "auto", this.anchorPreview.style.right = 0) : (this.anchorPreview.style.left = h + p + "px", this.anchorPreview.style.right = "initial");
        },
        attachToEditables: function() {
          this.subscribe("editableMouseover", this.handleEditableMouseover.bind(this)), this.subscribe("positionedToolbar", this.handlePositionedToolbar.bind(this));
        },
        handlePositionedToolbar: function() {
          this.showWhenToolbarIsVisible || this.hidePreview();
        },
        handleClick: function(r) {
          var i = this.base.getExtensionByName("anchor"), o = this.activeAnchor;
          i && o && (r.preventDefault(), this.base.selectElement(this.activeAnchor), this.base.delay((function() {
            if (o) {
              var a = {
                value: o.attributes.href.value,
                target: o.getAttribute("target"),
                buttonClass: o.getAttribute("class")
              };
              i.showForm(a), o = null;
            }
          }).bind(this))), this.hidePreview();
        },
        handleAnchorMouseout: function() {
          this.anchorToPreview = null, this.off(this.activeAnchor, "mouseout", this.instanceHandleAnchorMouseout), this.instanceHandleAnchorMouseout = null;
        },
        handleEditableMouseover: function(r) {
          var i = t.util.getClosestTag(r.target, "a");
          if (i !== !1) {
            if (!this.showOnEmptyLinks && (!/href=["']\S+["']/.test(i.outerHTML) || /href=["']#\S+["']/.test(i.outerHTML)))
              return !0;
            var o = this.base.getExtensionByName("toolbar");
            if (!this.showWhenToolbarIsVisible && o && o.isDisplayed && o.isDisplayed())
              return !0;
            this.activeAnchor && this.activeAnchor !== i && this.detachPreviewHandlers(), this.anchorToPreview = i, this.instanceHandleAnchorMouseout = this.handleAnchorMouseout.bind(this), this.on(this.anchorToPreview, "mouseout", this.instanceHandleAnchorMouseout), this.base.delay((function() {
              this.anchorToPreview && this.showPreview(this.anchorToPreview);
            }).bind(this));
          }
        },
        handlePreviewMouseover: function() {
          this.lastOver = (/* @__PURE__ */ new Date()).getTime(), this.hovering = !0;
        },
        handlePreviewMouseout: function(r) {
          (!r.relatedTarget || !/anchor-preview/.test(r.relatedTarget.className)) && (this.hovering = !1);
        },
        updatePreview: function() {
          if (this.hovering)
            return !0;
          var r = (/* @__PURE__ */ new Date()).getTime() - this.lastOver;
          r > this.hideDelay && this.detachPreviewHandlers();
        },
        detachPreviewHandlers: function() {
          clearInterval(this.intervalTimer), this.instanceHandlePreviewMouseover && (this.off(this.anchorPreview, "mouseover", this.instanceHandlePreviewMouseover), this.off(this.anchorPreview, "mouseout", this.instanceHandlePreviewMouseout), this.activeAnchor && (this.off(this.activeAnchor, "mouseover", this.instanceHandlePreviewMouseover), this.off(this.activeAnchor, "mouseout", this.instanceHandlePreviewMouseout))), this.hidePreview(), this.hovering = this.instanceHandlePreviewMouseover = this.instanceHandlePreviewMouseout = null;
        },
        // TODO: break up method and extract out handlers
        attachPreviewHandlers: function() {
          this.lastOver = (/* @__PURE__ */ new Date()).getTime(), this.hovering = !0, this.instanceHandlePreviewMouseover = this.handlePreviewMouseover.bind(this), this.instanceHandlePreviewMouseout = this.handlePreviewMouseout.bind(this), this.intervalTimer = setInterval(this.updatePreview.bind(this), 200), this.on(this.anchorPreview, "mouseover", this.instanceHandlePreviewMouseover), this.on(this.anchorPreview, "mouseout", this.instanceHandlePreviewMouseout), this.on(this.activeAnchor, "mouseover", this.instanceHandlePreviewMouseover), this.on(this.activeAnchor, "mouseout", this.instanceHandlePreviewMouseout);
        }
      });
      t.extensions.anchorPreview = n;
    }(), function() {
      var n, r, i, o, a;
      n = [
        " ",
        "	",
        `
`,
        "\r",
        " ",
        " ",
        " ",
        " ",
        " ",
        "\u2028",
        "\u2029"
      ], r = "com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw", i = "(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.](" + r + ")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?«»“”‘’])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.(" + r + "))", o = new RegExp("^(" + r + ")$", "i"), a = new RegExp(i, "gi");
      function s(u) {
        return !t.util.getClosestTag(u, "a");
      }
      var l = t.Extension.extend({
        init: function() {
          t.Extension.prototype.init.apply(this, arguments), this.disableEventHandling = !1, this.subscribe("editableKeypress", this.onKeypress.bind(this)), this.subscribe("editableBlur", this.onBlur.bind(this)), this.document.execCommand("AutoUrlDetect", !1, !1);
        },
        isLastInstance: function() {
          for (var u = 0, c = 0; c < this.window._mediumEditors.length; c++) {
            var d = this.window._mediumEditors[c];
            d !== null && d.getExtensionByName("autoLink") !== void 0 && u++;
          }
          return u === 1;
        },
        destroy: function() {
          this.document.queryCommandSupported("AutoUrlDetect") && this.isLastInstance() && this.document.execCommand("AutoUrlDetect", !1, !0);
        },
        onBlur: function(u, c) {
          this.performLinking(c);
        },
        onKeypress: function(u) {
          this.disableEventHandling || t.util.isKey(u, [t.util.keyCode.SPACE, t.util.keyCode.ENTER]) && (clearTimeout(this.performLinkingTimeout), this.performLinkingTimeout = setTimeout((function() {
            try {
              var c = this.base.exportSelection();
              this.performLinking(u.target) && this.base.importSelection(c, !0);
            } catch (d) {
              window.console && window.console.error("Failed to perform linking", d), this.disableEventHandling = !0;
            }
          }).bind(this), 0));
        },
        performLinking: function(u) {
          var c = t.util.splitByBlockElements(u), d = !1;
          c.length === 0 && (c = [u]);
          for (var f = 0; f < c.length; f++)
            d = this.removeObsoleteAutoLinkSpans(c[f]) || d, d = this.performLinkingWithinElement(c[f]) || d;
          return this.base.events.updateInput(u, { target: u, currentTarget: u }), d;
        },
        removeObsoleteAutoLinkSpans: function(u) {
          if (!u || u.nodeType === 3)
            return !1;
          for (var c = u.querySelectorAll('span[data-auto-link="true"]'), d = !1, f = 0; f < c.length; f++) {
            var h = c[f].textContent;
            if (h.indexOf("://") === -1 && (h = t.util.ensureUrlHasProtocol(h)), c[f].getAttribute("data-href") !== h && s(c[f])) {
              d = !0;
              var p = h.replace(/\s+$/, "");
              if (c[f].getAttribute("data-href") === p) {
                var v = h.length - p.length, g = t.util.splitOffDOMTree(c[f], this.splitTextBeforeEnd(c[f], v));
                c[f].parentNode.insertBefore(g, c[f].nextSibling);
              } else
                t.util.unwrap(c[f], this.document);
            }
          }
          return d;
        },
        splitTextBeforeEnd: function(u, c) {
          for (var d = this.document.createTreeWalker(u, NodeFilter.SHOW_TEXT, null, !1), f = !0; f; )
            f = d.lastChild() !== null;
          for (var h, p, v; c > 0 && v !== null; )
            h = d.currentNode, p = h.nodeValue, p.length > c ? (v = h.splitText(p.length - c), c = 0) : (v = d.previousNode(), c -= p.length);
          return v;
        },
        performLinkingWithinElement: function(u) {
          for (var c = this.findLinkableText(u), d = !1, f = 0; f < c.length; f++) {
            var h = t.util.findOrCreateMatchingTextNodes(
              this.document,
              u,
              c[f]
            );
            this.shouldNotLink(h) || this.createAutoLink(h, c[f].href);
          }
          return d;
        },
        shouldNotLink: function(u) {
          for (var c = !1, d = 0; d < u.length && c === !1; d++)
            c = !!t.util.traverseUp(u[d], function(f) {
              return f.nodeName.toLowerCase() === "a" || f.getAttribute && f.getAttribute("data-auto-link") === "true";
            });
          return c;
        },
        findLinkableText: function(u) {
          for (var c = u.textContent, d = null, f = []; (d = a.exec(c)) !== null; ) {
            var h = !0, p = d.index + d[0].length;
            h = (d.index === 0 || n.indexOf(c[d.index - 1]) !== -1) && (p === c.length || n.indexOf(c[p]) !== -1), h = h && (d[0].indexOf("/") !== -1 || o.test(d[0].split(".").pop().split("?").shift())), h && f.push({
              href: d[0],
              start: d.index,
              end: p
            });
          }
          return f;
        },
        createAutoLink: function(u, c) {
          c = t.util.ensureUrlHasProtocol(c);
          var d = t.util.createLink(this.document, u, c, this.getEditorOption("targetBlank") ? "_blank" : null), f = this.document.createElement("span");
          for (f.setAttribute("data-auto-link", "true"), f.setAttribute("data-href", c), d.insertBefore(f, d.firstChild); d.childNodes.length > 1; )
            f.appendChild(d.childNodes[1]);
        }
      });
      t.extensions.autoLink = l;
    }(), function() {
      var n = "medium-editor-dragover";
      function r(o) {
        var a = t.util.getContainerEditorElement(o), s = Array.prototype.slice.call(a.parentElement.querySelectorAll("." + n));
        s.forEach(function(l) {
          l.classList.remove(n);
        });
      }
      var i = t.Extension.extend({
        name: "fileDragging",
        allowedTypes: ["image"],
        init: function() {
          t.Extension.prototype.init.apply(this, arguments), this.subscribe("editableDrag", this.handleDrag.bind(this)), this.subscribe("editableDrop", this.handleDrop.bind(this));
        },
        handleDrag: function(o) {
          o.preventDefault(), o.dataTransfer.dropEffect = "copy";
          var a = o.target.classList ? o.target : o.target.parentElement;
          r(a), o.type === "dragover" && a.classList.add(n);
        },
        handleDrop: function(o) {
          o.preventDefault(), o.stopPropagation(), this.base.selectElement(o.target);
          var a = this.base.exportSelection();
          a.start = a.end, this.base.importSelection(a), o.dataTransfer.files && Array.prototype.slice.call(o.dataTransfer.files).forEach(function(s) {
            this.isAllowedFile(s) && s.type.match("image") && this.insertImageFile(s);
          }, this), r(o.target);
        },
        isAllowedFile: function(o) {
          return this.allowedTypes.some(function(a) {
            return !!o.type.match(a);
          });
        },
        insertImageFile: function(o) {
          if (typeof FileReader == "function") {
            var a = new FileReader();
            a.readAsDataURL(o), a.addEventListener("load", (function(s) {
              var l = this.document.createElement("img");
              l.src = s.target.result, t.util.insertHTMLCommand(this.document, l.outerHTML);
            }).bind(this));
          }
        }
      });
      t.extensions.fileDragging = i;
    }(), function() {
      var n = t.Extension.extend({
        name: "keyboard-commands",
        /* KeyboardCommands Options */
        /* commands: [Array]
         * Array of objects describing each command and the combination of keys that will trigger it
         * Required for each object:
         *   command [String] (argument passed to editor.execAction())
         *   key [String] (keyboard character that triggers this command)
         *   meta [boolean] (whether the ctrl/meta key has to be active or inactive)
         *   shift [boolean] (whether the shift key has to be active or inactive)
         *   alt [boolean] (whether the alt key has to be active or inactive)
         */
        commands: [
          {
            command: "bold",
            key: "B",
            meta: !0,
            shift: !1,
            alt: !1
          },
          {
            command: "italic",
            key: "I",
            meta: !0,
            shift: !1,
            alt: !1
          },
          {
            command: "underline",
            key: "U",
            meta: !0,
            shift: !1,
            alt: !1
          }
        ],
        init: function() {
          t.Extension.prototype.init.apply(this, arguments), this.subscribe("editableKeydown", this.handleKeydown.bind(this)), this.keys = {}, this.commands.forEach(function(r) {
            var i = r.key.charCodeAt(0);
            this.keys[i] || (this.keys[i] = []), this.keys[i].push(r);
          }, this);
        },
        handleKeydown: function(r) {
          var i = t.util.getKeyCode(r);
          if (this.keys[i]) {
            var o = t.util.isMetaCtrlKey(r), a = !!r.shiftKey, s = !!r.altKey;
            this.keys[i].forEach(function(l) {
              l.meta === o && l.shift === a && (l.alt === s || l.alt === void 0) && (r.preventDefault(), r.stopPropagation(), typeof l.command == "function" ? l.command.apply(this) : l.command !== !1 && this.execAction(l.command));
            }, this);
          }
        }
      });
      t.extensions.keyboardCommands = n;
    }(), function() {
      var n = t.extensions.form.extend({
        name: "fontname",
        action: "fontName",
        aria: "change font name",
        contentDefault: "&#xB1;",
        // ±
        contentFA: '<i class="fa fa-font"></i>',
        fonts: ["", "Arial", "Verdana", "Times New Roman"],
        init: function() {
          t.extensions.form.prototype.init.apply(this, arguments);
        },
        // Called when the button the toolbar is clicked
        // Overrides ButtonExtension.handleClick
        handleClick: function(r) {
          if (r.preventDefault(), r.stopPropagation(), !this.isDisplayed()) {
            var i = this.document.queryCommandValue("fontName") + "";
            this.showForm(i);
          }
          return !1;
        },
        // Called by medium-editor to append form to the toolbar
        getForm: function() {
          return this.form || (this.form = this.createForm()), this.form;
        },
        // Used by medium-editor when the default toolbar is to be displayed
        isDisplayed: function() {
          return this.getForm().style.display === "block";
        },
        hideForm: function() {
          this.getForm().style.display = "none", this.getSelect().value = "";
        },
        showForm: function(r) {
          var i = this.getSelect();
          this.base.saveSelection(), this.hideToolbarDefaultActions(), this.getForm().style.display = "block", this.setToolbarPosition(), i.value = r || "", i.focus();
        },
        // Called by core when tearing down medium-editor (destroy)
        destroy: function() {
          if (!this.form)
            return !1;
          this.form.parentNode && this.form.parentNode.removeChild(this.form), delete this.form;
        },
        // core methods
        doFormSave: function() {
          this.base.restoreSelection(), this.base.checkSelection();
        },
        doFormCancel: function() {
          this.base.restoreSelection(), this.clearFontName(), this.base.checkSelection();
        },
        // form creation and event handling
        createForm: function() {
          var r = this.document, i = r.createElement("div"), o = r.createElement("select"), a = r.createElement("a"), s = r.createElement("a"), l;
          i.className = "medium-editor-toolbar-form", i.id = "medium-editor-toolbar-form-fontname-" + this.getEditorId(), this.on(i, "click", this.handleFormClick.bind(this));
          for (var u = 0; u < this.fonts.length; u++)
            l = r.createElement("option"), l.innerHTML = this.fonts[u], l.value = this.fonts[u], o.appendChild(l);
          return o.className = "medium-editor-toolbar-select", i.appendChild(o), this.on(o, "change", this.handleFontChange.bind(this)), s.setAttribute("href", "#"), s.className = "medium-editor-toobar-save", s.innerHTML = this.getEditorOption("buttonLabels") === "fontawesome" ? '<i class="fa fa-check"></i>' : "&#10003;", i.appendChild(s), this.on(s, "click", this.handleSaveClick.bind(this), !0), a.setAttribute("href", "#"), a.className = "medium-editor-toobar-close", a.innerHTML = this.getEditorOption("buttonLabels") === "fontawesome" ? '<i class="fa fa-times"></i>' : "&times;", i.appendChild(a), this.on(a, "click", this.handleCloseClick.bind(this)), i;
        },
        getSelect: function() {
          return this.getForm().querySelector("select.medium-editor-toolbar-select");
        },
        clearFontName: function() {
          t.selection.getSelectedElements(this.document).forEach(function(r) {
            r.nodeName.toLowerCase() === "font" && r.hasAttribute("face") && r.removeAttribute("face");
          });
        },
        handleFontChange: function() {
          var r = this.getSelect().value;
          r === "" ? this.clearFontName() : this.execAction("fontName", { value: r });
        },
        handleFormClick: function(r) {
          r.stopPropagation();
        },
        handleSaveClick: function(r) {
          r.preventDefault(), this.doFormSave();
        },
        handleCloseClick: function(r) {
          r.preventDefault(), this.doFormCancel();
        }
      });
      t.extensions.fontName = n;
    }(), function() {
      var n = t.extensions.form.extend({
        name: "fontsize",
        action: "fontSize",
        aria: "increase/decrease font size",
        contentDefault: "&#xB1;",
        // ±
        contentFA: '<i class="fa fa-text-height"></i>',
        init: function() {
          t.extensions.form.prototype.init.apply(this, arguments);
        },
        // Called when the button the toolbar is clicked
        // Overrides ButtonExtension.handleClick
        handleClick: function(r) {
          if (r.preventDefault(), r.stopPropagation(), !this.isDisplayed()) {
            var i = this.document.queryCommandValue("fontSize") + "";
            this.showForm(i);
          }
          return !1;
        },
        // Called by medium-editor to append form to the toolbar
        getForm: function() {
          return this.form || (this.form = this.createForm()), this.form;
        },
        // Used by medium-editor when the default toolbar is to be displayed
        isDisplayed: function() {
          return this.getForm().style.display === "block";
        },
        hideForm: function() {
          this.getForm().style.display = "none", this.getInput().value = "";
        },
        showForm: function(r) {
          var i = this.getInput();
          this.base.saveSelection(), this.hideToolbarDefaultActions(), this.getForm().style.display = "block", this.setToolbarPosition(), i.value = r || "", i.focus();
        },
        // Called by core when tearing down medium-editor (destroy)
        destroy: function() {
          if (!this.form)
            return !1;
          this.form.parentNode && this.form.parentNode.removeChild(this.form), delete this.form;
        },
        // core methods
        doFormSave: function() {
          this.base.restoreSelection(), this.base.checkSelection();
        },
        doFormCancel: function() {
          this.base.restoreSelection(), this.clearFontSize(), this.base.checkSelection();
        },
        // form creation and event handling
        createForm: function() {
          var r = this.document, i = r.createElement("div"), o = r.createElement("input"), a = r.createElement("a"), s = r.createElement("a");
          return i.className = "medium-editor-toolbar-form", i.id = "medium-editor-toolbar-form-fontsize-" + this.getEditorId(), this.on(i, "click", this.handleFormClick.bind(this)), o.setAttribute("type", "range"), o.setAttribute("min", "1"), o.setAttribute("max", "7"), o.className = "medium-editor-toolbar-input", i.appendChild(o), this.on(o, "change", this.handleSliderChange.bind(this)), s.setAttribute("href", "#"), s.className = "medium-editor-toobar-save", s.innerHTML = this.getEditorOption("buttonLabels") === "fontawesome" ? '<i class="fa fa-check"></i>' : "&#10003;", i.appendChild(s), this.on(s, "click", this.handleSaveClick.bind(this), !0), a.setAttribute("href", "#"), a.className = "medium-editor-toobar-close", a.innerHTML = this.getEditorOption("buttonLabels") === "fontawesome" ? '<i class="fa fa-times"></i>' : "&times;", i.appendChild(a), this.on(a, "click", this.handleCloseClick.bind(this)), i;
        },
        getInput: function() {
          return this.getForm().querySelector("input.medium-editor-toolbar-input");
        },
        clearFontSize: function() {
          t.selection.getSelectedElements(this.document).forEach(function(r) {
            r.nodeName.toLowerCase() === "font" && r.hasAttribute("size") && r.removeAttribute("size");
          });
        },
        handleSliderChange: function() {
          var r = this.getInput().value;
          r === "4" ? this.clearFontSize() : this.execAction("fontSize", { value: r });
        },
        handleFormClick: function(r) {
          r.stopPropagation();
        },
        handleSaveClick: function(r) {
          r.preventDefault(), this.doFormSave();
        },
        handleCloseClick: function(r) {
          r.preventDefault(), this.doFormCancel();
        }
      });
      t.extensions.fontSize = n;
    }(), function() {
      var n = "%ME_PASTEBIN%", r = null, i = null, o = function(u) {
        u.stopPropagation();
      };
      function a() {
        return [
          // Remove anything but the contents within the BODY element
          [new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g), ""],
          // cleanup comments added by Chrome when pasting html
          [new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g), ""],
          // Trailing BR elements
          [new RegExp(/<br>$/i), ""],
          // replace two bogus tags that begin pastes from google docs
          [new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi), ""],
          [new RegExp(/<\/b>(<br[^>]*>)?$/gi), ""],
          // un-html spaces and newlines inserted by OS X
          [new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g), " "],
          [new RegExp(/<br class="Apple-interchange-newline">/g), "<br>"],
          // replace google docs italics+bold with a span to be replaced once the html is inserted
          [new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi), '<span class="replace-with italic bold">'],
          // replace google docs italics with a span to be replaced once the html is inserted
          [new RegExp(/<span[^>]*font-style:italic[^>]*>/gi), '<span class="replace-with italic">'],
          //[replace google docs bolds with a span to be replaced once the html is inserted
          [new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi), '<span class="replace-with bold">'],
          // replace manually entered b/i/a tags with real ones
          [new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi), "<$1$2>"],
          // replace manually a tags with real ones, converting smart-quotes from google docs
          [new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|“|”)(((?!&quot;|&rdquo;|&ldquo;|"|“|”).)*)(?:&quot;|&rdquo;|&ldquo;|"|“|”)(?:(?!&gt;).)*&gt;/gi), '<a href="$1">'],
          // Newlines between paragraphs in html have no syntactic value,
          // but then have a tendency to accidentally become additional paragraphs down the line
          [new RegExp(/<\/p>\n+/gi), "</p>"],
          [new RegExp(/\n+<p/gi), "<p"],
          // Microsoft Word makes these odd tags, like <o:p></o:p>
          [new RegExp(/<\/?o:[a-z]*>/gi), ""],
          // Microsoft Word adds some special elements around list items
          [new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi), "$1"]
        ];
      }
      function s(u, c, d) {
        var f = u.clipboardData || c.clipboardData || d.dataTransfer, h = {};
        if (!f)
          return h;
        if (f.getData) {
          var p = f.getData("Text");
          p && p.length > 0 && (h["text/plain"] = p);
        }
        if (f.types)
          for (var v = 0; v < f.types.length; v++) {
            var g = f.types[v];
            h[g] = f.getData(g);
          }
        return h;
      }
      var l = t.Extension.extend({
        /* Paste Options */
        /* forcePlainText: [boolean]
         * Forces pasting as plain text.
         */
        forcePlainText: !0,
        /* cleanPastedHTML: [boolean]
         * cleans pasted content from different sources, like google docs etc.
         */
        cleanPastedHTML: !1,
        /* preCleanReplacements: [Array]
         * custom pairs (2 element arrays) of RegExp and replacement text to use during past when
         * __forcePlainText__ or __cleanPastedHTML__ are `true` OR when calling `cleanPaste(text)` helper method.
         * These replacements are executed before any medium editor defined replacements.
         */
        preCleanReplacements: [],
        /* cleanReplacements: [Array]
         * custom pairs (2 element arrays) of RegExp and replacement text to use during paste when
         * __forcePlainText__ or __cleanPastedHTML__ are `true` OR when calling `cleanPaste(text)` helper method.
         * These replacements are executed after any medium editor defined replacements.
         */
        cleanReplacements: [],
        /* cleanAttrs:: [Array]
         * list of element attributes to remove during paste when __cleanPastedHTML__ is `true` or when
         * calling `cleanPaste(text)` or `pasteHTML(html, options)` helper methods.
         */
        cleanAttrs: ["class", "style", "dir"],
        /* cleanTags: [Array]
         * list of element tag names to remove during paste when __cleanPastedHTML__ is `true` or when
         * calling `cleanPaste(text)` or `pasteHTML(html, options)` helper methods.
         */
        cleanTags: ["meta"],
        /* unwrapTags: [Array]
         * list of element tag names to unwrap (remove the element tag but retain its child elements)
         * during paste when __cleanPastedHTML__ is `true` or when
         * calling `cleanPaste(text)` or `pasteHTML(html, options)` helper methods.
         */
        unwrapTags: [],
        init: function() {
          t.Extension.prototype.init.apply(this, arguments), (this.forcePlainText || this.cleanPastedHTML) && (this.subscribe("editableKeydown", this.handleKeydown.bind(this)), this.getEditorElements().forEach(function(u) {
            this.on(u, "paste", this.handlePaste.bind(this));
          }, this), this.subscribe("addElement", this.handleAddElement.bind(this)));
        },
        handleAddElement: function(u, c) {
          this.on(c, "paste", this.handlePaste.bind(this));
        },
        destroy: function() {
          (this.forcePlainText || this.cleanPastedHTML) && this.removePasteBin();
        },
        handlePaste: function(u, c) {
          if (!u.defaultPrevented) {
            var d = s(u, this.window, this.document), f = d["text/html"], h = d["text/plain"];
            this.window.clipboardData && u.clipboardData === void 0 && !f && (f = h), (f || h) && (u.preventDefault(), this.doPaste(f, h, c));
          }
        },
        doPaste: function(u, c, d) {
          var f, h = "", p;
          if (this.cleanPastedHTML && u)
            return this.cleanPaste(u);
          if (c) {
            if (this.getEditorOption("disableReturn") || d && d.getAttribute("data-disable-return"))
              h = t.util.htmlEntities(c);
            else if (f = c.split(/[\r\n]+/g), f.length > 1)
              for (p = 0; p < f.length; p += 1)
                f[p] !== "" && (h += "<p>" + t.util.htmlEntities(f[p]) + "</p>");
            else
              h = t.util.htmlEntities(f[0]);
            t.util.insertHTMLCommand(this.document, h);
          }
        },
        handlePasteBinPaste: function(u) {
          if (u.defaultPrevented) {
            this.removePasteBin();
            return;
          }
          var c = s(u, this.window, this.document), d = c["text/html"], f = c["text/plain"], h = i;
          if (!this.cleanPastedHTML || d) {
            u.preventDefault(), this.removePasteBin(), this.doPaste(d, f, h), this.trigger("editablePaste", { currentTarget: h, target: h }, h);
            return;
          }
          setTimeout((function() {
            this.cleanPastedHTML && (d = this.getPasteBinHtml()), this.removePasteBin(), this.doPaste(d, f, h), this.trigger("editablePaste", { currentTarget: h, target: h }, h);
          }).bind(this), 0);
        },
        handleKeydown: function(u, c) {
          t.util.isKey(u, t.util.keyCode.V) && t.util.isMetaCtrlKey(u) && (u.stopImmediatePropagation(), this.removePasteBin(), this.createPasteBin(c));
        },
        createPasteBin: function(u) {
          var c, d = t.selection.getSelectionRange(this.document), f = this.window.pageYOffset;
          i = u, d && (c = d.getClientRects(), c.length ? f += c[0].top : d.startContainer.getBoundingClientRect !== void 0 ? f += d.startContainer.getBoundingClientRect().top : f += d.getBoundingClientRect().top), r = d;
          var h = this.document.createElement("div");
          h.id = this.pasteBinId = "medium-editor-pastebin-" + +Date.now(), h.setAttribute("style", "border: 1px red solid; position: absolute; top: " + f + "px; width: 10px; height: 10px; overflow: hidden; opacity: 0"), h.setAttribute("contentEditable", !0), h.innerHTML = n, this.document.body.appendChild(h), this.on(h, "focus", o), this.on(h, "focusin", o), this.on(h, "focusout", o), h.focus(), t.selection.selectNode(h, this.document), this.boundHandlePaste || (this.boundHandlePaste = this.handlePasteBinPaste.bind(this)), this.on(h, "paste", this.boundHandlePaste);
        },
        removePasteBin: function() {
          r !== null && (t.selection.selectRange(this.document, r), r = null), i !== null && (i = null);
          var u = this.getPasteBin();
          u && u && (this.off(u, "focus", o), this.off(u, "focusin", o), this.off(u, "focusout", o), this.off(u, "paste", this.boundHandlePaste), u.parentElement.removeChild(u));
        },
        getPasteBin: function() {
          return this.document.getElementById(this.pasteBinId);
        },
        getPasteBinHtml: function() {
          var u = this.getPasteBin();
          if (!u || u.firstChild && u.firstChild.id === "mcepastebin")
            return !1;
          var c = u.innerHTML;
          return !c || c === n ? !1 : c;
        },
        cleanPaste: function(u) {
          var c, d, f, h, p = /<p|<br|<div/.test(u), v = [].concat(
            this.preCleanReplacements || [],
            a(),
            this.cleanReplacements || []
          );
          for (c = 0; c < v.length; c += 1)
            u = u.replace(v[c][0], v[c][1]);
          if (!p)
            return this.pasteHTML(u);
          for (f = this.document.createElement("div"), f.innerHTML = "<p>" + u.split("<br><br>").join("</p><p>") + "</p>", d = f.querySelectorAll("a,p,div,br"), c = 0; c < d.length; c += 1)
            switch (h = d[c], h.innerHTML = h.innerHTML.replace(/\n/gi, " "), h.nodeName.toLowerCase()) {
              case "p":
              case "div":
                this.filterCommonBlocks(h);
                break;
              case "br":
                this.filterLineBreak(h);
                break;
            }
          this.pasteHTML(f.innerHTML);
        },
        pasteHTML: function(u, c) {
          c = t.util.defaults({}, c, {
            cleanAttrs: this.cleanAttrs,
            cleanTags: this.cleanTags,
            unwrapTags: this.unwrapTags
          });
          var d, f, h, p, v = this.document.createDocumentFragment();
          for (v.appendChild(this.document.createElement("body")), p = v.querySelector("body"), p.innerHTML = u, this.cleanupSpans(p), d = p.querySelectorAll("*"), h = 0; h < d.length; h += 1)
            f = d[h], f.nodeName.toLowerCase() === "a" && this.getEditorOption("targetBlank") && t.util.setTargetBlank(f), t.util.cleanupAttrs(f, c.cleanAttrs), t.util.cleanupTags(f, c.cleanTags), t.util.unwrapTags(f, c.unwrapTags);
          t.util.insertHTMLCommand(this.document, p.innerHTML.replace(/&nbsp;/g, " "));
        },
        // TODO (6.0): Make this an internal helper instead of member of paste handler
        isCommonBlock: function(u) {
          return u && (u.nodeName.toLowerCase() === "p" || u.nodeName.toLowerCase() === "div");
        },
        // TODO (6.0): Make this an internal helper instead of member of paste handler
        filterCommonBlocks: function(u) {
          /^\s*$/.test(u.textContent) && u.parentNode && u.parentNode.removeChild(u);
        },
        // TODO (6.0): Make this an internal helper instead of member of paste handler
        filterLineBreak: function(u) {
          this.isCommonBlock(u.previousElementSibling) ? this.removeWithParent(u) : this.isCommonBlock(u.parentNode) && (u.parentNode.firstChild === u || u.parentNode.lastChild === u) ? this.removeWithParent(u) : u.parentNode && u.parentNode.childElementCount === 1 && u.parentNode.textContent === "" && this.removeWithParent(u);
        },
        // TODO (6.0): Make this an internal helper instead of member of paste handler
        // remove an element, including its parent, if it is the only element within its parent
        removeWithParent: function(u) {
          u && u.parentNode && (u.parentNode.parentNode && u.parentNode.childElementCount === 1 ? u.parentNode.parentNode.removeChild(u.parentNode) : u.parentNode.removeChild(u));
        },
        // TODO (6.0): Make this an internal helper instead of member of paste handler
        cleanupSpans: function(u) {
          var c, d, f, h = u.querySelectorAll(".replace-with"), p = function(v) {
            return v && v.nodeName !== "#text" && v.getAttribute("contenteditable") === "false";
          };
          for (c = 0; c < h.length; c += 1)
            d = h[c], f = this.document.createElement(d.classList.contains("bold") ? "b" : "i"), d.classList.contains("bold") && d.classList.contains("italic") ? f.innerHTML = "<i>" + d.innerHTML + "</i>" : f.innerHTML = d.innerHTML, d.parentNode.replaceChild(f, d);
          for (h = u.querySelectorAll("span"), c = 0; c < h.length; c += 1) {
            if (d = h[c], t.util.traverseUp(d, p))
              return !1;
            t.util.unwrap(d, this.document);
          }
        }
      });
      t.extensions.paste = l;
    }(), function() {
      var n = t.Extension.extend({
        name: "placeholder",
        /* Placeholder Options */
        /* text: [string]
         * Text to display in the placeholder
         */
        text: "Type your text",
        /* hideOnClick: [boolean]
         * Should we hide the placeholder on click (true) or when user starts typing (false)
         */
        hideOnClick: !0,
        init: function() {
          t.Extension.prototype.init.apply(this, arguments), this.initPlaceholders(), this.attachEventHandlers();
        },
        initPlaceholders: function() {
          this.getEditorElements().forEach(this.initElement, this);
        },
        handleAddElement: function(r, i) {
          this.initElement(i);
        },
        initElement: function(r) {
          r.getAttribute("data-placeholder") || r.setAttribute("data-placeholder", this.text), this.updatePlaceholder(r);
        },
        destroy: function() {
          this.getEditorElements().forEach(this.cleanupElement, this);
        },
        handleRemoveElement: function(r, i) {
          this.cleanupElement(i);
        },
        cleanupElement: function(r) {
          r.getAttribute("data-placeholder") === this.text && r.removeAttribute("data-placeholder");
        },
        showPlaceholder: function(r) {
          r && (t.util.isFF && r.childNodes.length === 0 ? (r.classList.add("medium-editor-placeholder-relative"), r.classList.remove("medium-editor-placeholder")) : (r.classList.add("medium-editor-placeholder"), r.classList.remove("medium-editor-placeholder-relative")));
        },
        hidePlaceholder: function(r) {
          r && (r.classList.remove("medium-editor-placeholder"), r.classList.remove("medium-editor-placeholder-relative"));
        },
        updatePlaceholder: function(r, i) {
          if (r.querySelector("img, blockquote, ul, ol, table") || r.textContent.replace(/^\s+|\s+$/g, "") !== "")
            return this.hidePlaceholder(r);
          i || this.showPlaceholder(r);
        },
        attachEventHandlers: function() {
          this.hideOnClick && this.subscribe("focus", this.handleFocus.bind(this)), this.subscribe("editableInput", this.handleInput.bind(this)), this.subscribe("blur", this.handleBlur.bind(this)), this.subscribe("addElement", this.handleAddElement.bind(this)), this.subscribe("removeElement", this.handleRemoveElement.bind(this));
        },
        handleInput: function(r, i) {
          var o = this.hideOnClick && i === this.base.getFocusedElement();
          this.updatePlaceholder(i, o);
        },
        handleFocus: function(r, i) {
          this.hidePlaceholder(i);
        },
        handleBlur: function(r, i) {
          this.updatePlaceholder(i);
        }
      });
      t.extensions.placeholder = n;
    }(), function() {
      var n = t.Extension.extend({
        name: "toolbar",
        /* Toolbar Options */
        /* align: ['left'|'center'|'right']
         * When the __static__ option is true, this aligns the static toolbar
         * relative to the medium-editor element.
         */
        align: "center",
        /* allowMultiParagraphSelection: [boolean]
         * enables/disables whether the toolbar should be displayed when
         * selecting multiple paragraphs/block elements
         */
        allowMultiParagraphSelection: !0,
        /* buttons: [Array]
         * the names of the set of buttons to display on the toolbar.
         */
        buttons: ["bold", "italic", "underline", "anchor", "h2", "h3", "quote"],
        /* diffLeft: [Number]
         * value in pixels to be added to the X axis positioning of the toolbar.
         */
        diffLeft: 0,
        /* diffTop: [Number]
         * value in pixels to be added to the Y axis positioning of the toolbar.
         */
        diffTop: -10,
        /* firstButtonClass: [string]
         * CSS class added to the first button in the toolbar.
         */
        firstButtonClass: "medium-editor-button-first",
        /* lastButtonClass: [string]
         * CSS class added to the last button in the toolbar.
         */
        lastButtonClass: "medium-editor-button-last",
        /* standardizeSelectionStart: [boolean]
         * enables/disables standardizing how the beginning of a range is decided
         * between browsers whenever the selected text is analyzed for updating toolbar buttons status.
         */
        standardizeSelectionStart: !1,
        /* static: [boolean]
         * enable/disable the toolbar always displaying in the same location
         * relative to the medium-editor element.
         */
        static: !1,
        /* sticky: [boolean]
         * When the __static__ option is true, this enables/disables the toolbar
         * "sticking" to the viewport and staying visible on the screen while
         * the page scrolls.
         */
        sticky: !1,
        /* stickyTopOffset: [Number]
         * Value in pixel of the top offset above the toolbar
         */
        stickyTopOffset: 0,
        /* updateOnEmptySelection: [boolean]
         * When the __static__ option is true, this enables/disables updating
         * the state of the toolbar buttons even when the selection is collapsed
         * (there is no selection, just a cursor).
         */
        updateOnEmptySelection: !1,
        /* relativeContainer: [node]
         * appending the toolbar to a given node instead of body
         */
        relativeContainer: null,
        init: function() {
          t.Extension.prototype.init.apply(this, arguments), this.initThrottledMethods(), this.relativeContainer ? this.relativeContainer.appendChild(this.getToolbarElement()) : this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement());
        },
        // Helper method to execute method for every extension, but ignoring the toolbar extension
        forEachExtension: function(r, i) {
          return this.base.extensions.forEach(function(o) {
            if (o !== this)
              return r.apply(i || this, arguments);
          }, this);
        },
        // Toolbar creation/deletion
        createToolbar: function() {
          var r = this.document.createElement("div");
          return r.id = "medium-editor-toolbar-" + this.getEditorId(), r.className = "medium-editor-toolbar", this.static ? r.className += " static-toolbar" : this.relativeContainer ? r.className += " medium-editor-relative-toolbar" : r.className += " medium-editor-stalker-toolbar", r.appendChild(this.createToolbarButtons()), this.forEachExtension(function(i) {
            i.hasForm && r.appendChild(i.getForm());
          }), this.attachEventHandlers(), r;
        },
        createToolbarButtons: function() {
          var r = this.document.createElement("ul"), i, o, a, s, l, u;
          return r.id = "medium-editor-toolbar-actions" + this.getEditorId(), r.className = "medium-editor-toolbar-actions", r.style.display = "block", this.buttons.forEach(function(c) {
            typeof c == "string" ? (l = c, u = null) : (l = c.name, u = c), s = this.base.addBuiltInExtension(l, u), s && typeof s.getButton == "function" && (o = s.getButton(this.base), i = this.document.createElement("li"), t.util.isElement(o) ? i.appendChild(o) : i.innerHTML = o, r.appendChild(i));
          }, this), a = r.querySelectorAll("button"), a.length > 0 && (a[0].classList.add(this.firstButtonClass), a[a.length - 1].classList.add(this.lastButtonClass)), r;
        },
        destroy: function() {
          this.toolbar && (this.toolbar.parentNode && this.toolbar.parentNode.removeChild(this.toolbar), delete this.toolbar);
        },
        // Toolbar accessors
        getInteractionElements: function() {
          return this.getToolbarElement();
        },
        getToolbarElement: function() {
          return this.toolbar || (this.toolbar = this.createToolbar()), this.toolbar;
        },
        getToolbarActionsElement: function() {
          return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions");
        },
        // Toolbar event handlers
        initThrottledMethods: function() {
          this.throttledPositionToolbar = t.util.throttle((function() {
            this.base.isActive && this.positionToolbarIfShown();
          }).bind(this));
        },
        attachEventHandlers: function() {
          this.subscribe("blur", this.handleBlur.bind(this)), this.subscribe("focus", this.handleFocus.bind(this)), this.subscribe("editableClick", this.handleEditableClick.bind(this)), this.subscribe("editableKeyup", this.handleEditableKeyup.bind(this)), this.on(this.document.documentElement, "mouseup", this.handleDocumentMouseup.bind(this)), this.static && this.sticky && this.on(this.window, "scroll", this.handleWindowScroll.bind(this), !0), this.on(this.window, "resize", this.handleWindowResize.bind(this));
        },
        handleWindowScroll: function() {
          this.positionToolbarIfShown();
        },
        handleWindowResize: function() {
          this.throttledPositionToolbar();
        },
        handleDocumentMouseup: function(r) {
          if (r && r.target && t.util.isDescendant(this.getToolbarElement(), r.target))
            return !1;
          this.checkState();
        },
        handleEditableClick: function() {
          setTimeout((function() {
            this.checkState();
          }).bind(this), 0);
        },
        handleEditableKeyup: function() {
          this.checkState();
        },
        handleBlur: function() {
          clearTimeout(this.hideTimeout), clearTimeout(this.delayShowTimeout), this.hideTimeout = setTimeout((function() {
            this.hideToolbar();
          }).bind(this), 1);
        },
        handleFocus: function() {
          this.checkState();
        },
        // Hiding/showing toolbar
        isDisplayed: function() {
          return this.getToolbarElement().classList.contains("medium-editor-toolbar-active");
        },
        showToolbar: function() {
          clearTimeout(this.hideTimeout), this.isDisplayed() || (this.getToolbarElement().classList.add("medium-editor-toolbar-active"), this.trigger("showToolbar", {}, this.base.getFocusedElement()));
        },
        hideToolbar: function() {
          this.isDisplayed() && (this.getToolbarElement().classList.remove("medium-editor-toolbar-active"), this.trigger("hideToolbar", {}, this.base.getFocusedElement()));
        },
        isToolbarDefaultActionsDisplayed: function() {
          return this.getToolbarActionsElement().style.display === "block";
        },
        hideToolbarDefaultActions: function() {
          this.isToolbarDefaultActionsDisplayed() && (this.getToolbarActionsElement().style.display = "none");
        },
        showToolbarDefaultActions: function() {
          this.hideExtensionForms(), this.isToolbarDefaultActionsDisplayed() || (this.getToolbarActionsElement().style.display = "block"), this.delayShowTimeout = this.base.delay((function() {
            this.showToolbar();
          }).bind(this));
        },
        hideExtensionForms: function() {
          this.forEachExtension(function(r) {
            r.hasForm && r.isDisplayed() && r.hideForm();
          });
        },
        // Responding to changes in user selection
        // Checks for existance of multiple block elements in the current selection
        multipleBlockElementsSelected: function() {
          var r = /<[^\/>][^>]*><\/[^>]+>/gim, i = new RegExp("<(" + t.util.blockContainerElementNames.join("|") + ")[^>]*>", "g"), o = t.selection.getSelectionHtml(this.document).replace(r, ""), a = o.match(i);
          return !!a && a.length > 1;
        },
        modifySelection: function() {
          var r = this.window.getSelection(), i = r.getRangeAt(0);
          if (this.standardizeSelectionStart && i.startContainer.nodeValue && i.startOffset === i.startContainer.nodeValue.length) {
            var o = t.util.findAdjacentTextNodeWithContent(t.selection.getSelectionElement(this.window), i.startContainer, this.document);
            if (o) {
              for (var a = 0; o.nodeValue.substr(a, 1).trim().length === 0; )
                a = a + 1;
              i = t.selection.select(
                this.document,
                o,
                a,
                i.endContainer,
                i.endOffset
              );
            }
          }
        },
        checkState: function() {
          if (!this.base.preventSelectionUpdates) {
            if (!this.base.getFocusedElement() || t.selection.selectionInContentEditableFalse(this.window))
              return this.hideToolbar();
            var r = t.selection.getSelectionElement(this.window);
            if (!r || this.getEditorElements().indexOf(r) === -1 || r.getAttribute("data-disable-toolbar"))
              return this.hideToolbar();
            if (this.updateOnEmptySelection && this.static)
              return this.showAndUpdateToolbar();
            if (!t.selection.selectionContainsContent(this.document) || this.allowMultiParagraphSelection === !1 && this.multipleBlockElementsSelected())
              return this.hideToolbar();
            this.showAndUpdateToolbar();
          }
        },
        // Updating the toolbar
        showAndUpdateToolbar: function() {
          this.modifySelection(), this.setToolbarButtonStates(), this.trigger("positionToolbar", {}, this.base.getFocusedElement()), this.showToolbarDefaultActions(), this.setToolbarPosition();
        },
        setToolbarButtonStates: function() {
          this.forEachExtension(function(r) {
            typeof r.isActive == "function" && typeof r.setInactive == "function" && r.setInactive();
          }), this.checkActiveButtons();
        },
        checkActiveButtons: function() {
          var r = [], i = null, o = t.selection.getSelectionRange(this.document), a, s = function(l) {
            typeof l.checkState == "function" ? l.checkState(a) : typeof l.isActive == "function" && typeof l.isAlreadyApplied == "function" && typeof l.setActive == "function" && !l.isActive() && l.isAlreadyApplied(a) && l.setActive();
          };
          if (o && (this.forEachExtension(function(l) {
            if (typeof l.queryCommandState == "function" && (i = l.queryCommandState(), i !== null)) {
              i && typeof l.setActive == "function" && l.setActive();
              return;
            }
            r.push(l);
          }), a = t.selection.getSelectedParentElement(o), !!this.getEditorElements().some(function(l) {
            return t.util.isDescendant(l, a, !0);
          })))
            for (; a && (r.forEach(s), !t.util.isMediumEditorElement(a)); )
              a = a.parentNode;
        },
        // Positioning toolbar
        positionToolbarIfShown: function() {
          this.isDisplayed() && this.setToolbarPosition();
        },
        setToolbarPosition: function() {
          var r = this.base.getFocusedElement(), i = this.window.getSelection();
          if (!r)
            return this;
          (this.static || !i.isCollapsed) && (this.showToolbar(), this.relativeContainer || (this.static ? this.positionStaticToolbar(r) : this.positionToolbar(i)), this.trigger("positionedToolbar", {}, this.base.getFocusedElement()));
        },
        positionStaticToolbar: function(r) {
          this.getToolbarElement().style.left = "0";
          var i = this.document.documentElement && this.document.documentElement.scrollTop || this.document.body.scrollTop, o = this.window.innerWidth, a = this.getToolbarElement(), s = r.getBoundingClientRect(), l = s.top + i, u = s.left + s.width / 2, c = a.offsetHeight, d = a.offsetWidth, f = d / 2, h;
          switch (this.sticky ? i > l + r.offsetHeight - c - this.stickyTopOffset ? (a.style.top = l + r.offsetHeight - c + "px", a.classList.remove("medium-editor-sticky-toolbar")) : i > l - c - this.stickyTopOffset ? (a.classList.add("medium-editor-sticky-toolbar"), a.style.top = this.stickyTopOffset + "px") : (a.classList.remove("medium-editor-sticky-toolbar"), a.style.top = l - c + "px") : a.style.top = l - c + "px", this.align) {
            case "left":
              h = s.left;
              break;
            case "right":
              h = s.right - d;
              break;
            case "center":
              h = u - f;
              break;
          }
          h < 0 ? h = 0 : h + d > o && (h = o - Math.ceil(d) - 1), a.style.left = h + "px";
        },
        positionToolbar: function(r) {
          this.getToolbarElement().style.left = "0", this.getToolbarElement().style.right = "initial";
          var i = r.getRangeAt(0), o = i.getBoundingClientRect();
          (!o || o.height === 0 && o.width === 0 && i.startContainer === i.endContainer) && (i.startContainer.nodeType === 1 && i.startContainer.querySelector("img") ? o = i.startContainer.querySelector("img").getBoundingClientRect() : o = i.startContainer.getBoundingClientRect());
          var a = this.window.innerWidth, s = this.getToolbarElement(), l = s.offsetHeight, u = s.offsetWidth, c = u / 2, d = 50, f = this.diffLeft - c, h = this.getEditorOption("elementsContainer"), p = ["absolute", "fixed"].indexOf(window.getComputedStyle(h).getPropertyValue("position")) > -1, v = {}, g = {}, y, m;
          p ? (m = h.getBoundingClientRect(), ["top", "left"].forEach(function(E) {
            g[E] = o[E] - m[E];
          }), g.width = o.width, g.height = o.height, o = g, a = m.width, v.top = h.scrollTop) : v.top = this.window.pageYOffset, y = o.left + o.width / 2, v.top += o.top - l, o.top < d ? (s.classList.add("medium-toolbar-arrow-over"), s.classList.remove("medium-toolbar-arrow-under"), v.top += d + o.height - this.diffTop) : (s.classList.add("medium-toolbar-arrow-under"), s.classList.remove("medium-toolbar-arrow-over"), v.top += this.diffTop), y < c ? (v.left = f + c, v.right = "initial") : a - y < c ? (v.left = "auto", v.right = 0) : (v.left = f + y, v.right = "initial"), ["top", "left", "right"].forEach(function(E) {
            s.style[E] = v[E] + (isNaN(v[E]) ? "" : "px");
          });
        }
      });
      t.extensions.toolbar = n;
    }(), function() {
      var n = t.Extension.extend({
        init: function() {
          t.Extension.prototype.init.apply(this, arguments), this.subscribe("editableDrag", this.handleDrag.bind(this)), this.subscribe("editableDrop", this.handleDrop.bind(this));
        },
        handleDrag: function(r) {
          var i = "medium-editor-dragover";
          r.preventDefault(), r.dataTransfer.dropEffect = "copy", r.type === "dragover" ? r.target.classList.add(i) : r.type === "dragleave" && r.target.classList.remove(i);
        },
        handleDrop: function(r) {
          var i = "medium-editor-dragover", o;
          r.preventDefault(), r.stopPropagation(), r.dataTransfer.files && (o = Array.prototype.slice.call(r.dataTransfer.files, 0), o.some((function(a) {
            if (a.type.match("image")) {
              var s, l;
              s = new FileReader(), s.readAsDataURL(a), l = "medium-img-" + +/* @__PURE__ */ new Date(), t.util.insertHTMLCommand(this.document, '<img class="medium-editor-image-loading" id="' + l + '" />'), s.onload = (function() {
                var u = this.document.getElementById(l);
                u && (u.removeAttribute("id"), u.removeAttribute("class"), u.src = s.result);
              }).bind(this);
            }
          }).bind(this))), r.target.classList.remove(i);
        }
      });
      t.extensions.imageDragging = n;
    }(), function() {
      function n(x) {
        var P = t.selection.getSelectionStart(this.options.ownerDocument), L = P.textContent, k = t.selection.getCaretOffsets(P);
        (L[k.left - 1] === void 0 || L[k.left - 1].trim() === "" || L[k.left] !== void 0 && L[k.left].trim() === "") && x.preventDefault();
      }
      function r(x, P) {
        if (this.options.disableReturn || P.getAttribute("data-disable-return"))
          x.preventDefault();
        else if (this.options.disableDoubleReturn || P.getAttribute("data-disable-double-return")) {
          var L = t.selection.getSelectionStart(this.options.ownerDocument);
          (L && L.textContent.trim() === "" && L.nodeName.toLowerCase() !== "li" || L.previousElementSibling && L.previousElementSibling.nodeName.toLowerCase() !== "br" && L.previousElementSibling.textContent.trim() === "") && x.preventDefault();
        }
      }
      function i(x) {
        var P = t.selection.getSelectionStart(this.options.ownerDocument), L = P && P.nodeName.toLowerCase();
        L === "pre" && (x.preventDefault(), t.util.insertHTMLCommand(this.options.ownerDocument, "    ")), t.util.isListItem(P) && (x.preventDefault(), x.shiftKey ? this.options.ownerDocument.execCommand("outdent", !1, null) : this.options.ownerDocument.execCommand("indent", !1, null));
      }
      function o(x) {
        var P, L = t.selection.getSelectionStart(this.options.ownerDocument), k = L.nodeName.toLowerCase(), J = /^(\s+|<br\/?>)?$/i, de = /h\d/i;
        t.util.isKey(x, [t.util.keyCode.BACKSPACE, t.util.keyCode.ENTER]) && // has a preceeding sibling
        L.previousElementSibling && // in a header
        de.test(k) && // at the very end of the block
        t.selection.getCaretOffsets(L).left === 0 ? t.util.isKey(x, t.util.keyCode.BACKSPACE) && J.test(L.previousElementSibling.innerHTML) ? (L.previousElementSibling.parentNode.removeChild(L.previousElementSibling), x.preventDefault()) : !this.options.disableDoubleReturn && t.util.isKey(x, t.util.keyCode.ENTER) && (P = this.options.ownerDocument.createElement("p"), P.innerHTML = "<br>", L.previousElementSibling.parentNode.insertBefore(P, L), x.preventDefault()) : t.util.isKey(x, t.util.keyCode.DELETE) && // between two sibling elements
        L.nextElementSibling && L.previousElementSibling && // not in a header
        !de.test(k) && // in an empty tag
        J.test(L.innerHTML) && // when the next tag *is* a header
        de.test(L.nextElementSibling.nodeName.toLowerCase()) ? (t.selection.moveCursor(this.options.ownerDocument, L.nextElementSibling), L.previousElementSibling.parentNode.removeChild(L), x.preventDefault()) : t.util.isKey(x, t.util.keyCode.BACKSPACE) && k === "li" && // hitting backspace inside an empty li
        J.test(L.innerHTML) && // is first element (no preceeding siblings)
        !L.previousElementSibling && // parent also does not have a sibling
        !L.parentElement.previousElementSibling && // is not the only li in a list
        L.nextElementSibling && L.nextElementSibling.nodeName.toLowerCase() === "li" ? (P = this.options.ownerDocument.createElement("p"), P.innerHTML = "<br>", L.parentElement.parentElement.insertBefore(P, L.parentElement), t.selection.moveCursor(this.options.ownerDocument, P), L.parentElement.removeChild(L), x.preventDefault()) : t.util.isKey(x, t.util.keyCode.BACKSPACE) && t.util.getClosestTag(L, "blockquote") !== !1 && t.selection.getCaretOffsets(L).left === 0 ? (x.preventDefault(), t.util.execFormatBlock(this.options.ownerDocument, "p")) : t.util.isKey(x, t.util.keyCode.ENTER) && t.util.getClosestTag(L, "blockquote") !== !1 && t.selection.getCaretOffsets(L).right === 0 ? (P = this.options.ownerDocument.createElement("p"), P.innerHTML = "<br>", L.parentElement.insertBefore(P, L.nextSibling), t.selection.moveCursor(this.options.ownerDocument, P), x.preventDefault()) : t.util.isKey(x, t.util.keyCode.BACKSPACE) && t.util.isMediumEditorElement(L.parentElement) && !L.previousElementSibling && L.nextElementSibling && J.test(L.innerHTML) && (x.preventDefault(), t.selection.moveCursor(this.options.ownerDocument, L.nextSibling), L.parentElement.removeChild(L));
      }
      function a(x) {
        var P = t.selection.getSelectionStart(this.options.ownerDocument), L;
        P && (t.util.isMediumEditorElement(P) && P.children.length === 0 && !t.util.isBlockContainer(P) && this.options.ownerDocument.execCommand("formatBlock", !1, "p"), t.util.isKey(x, t.util.keyCode.ENTER) && !t.util.isListItem(P) && !t.util.isBlockContainer(P) && (L = P.nodeName.toLowerCase(), L === "a" ? this.options.ownerDocument.execCommand("unlink", !1, null) : !x.shiftKey && !x.ctrlKey && this.options.ownerDocument.execCommand("formatBlock", !1, "p")));
      }
      function s(x, P) {
        var L = P.parentNode.querySelector('textarea[medium-editor-textarea-id="' + P.getAttribute("medium-editor-textarea-id") + '"]');
        L && (L.value = P.innerHTML.trim());
      }
      function l(x) {
        x._mediumEditors || (x._mediumEditors = [null]), this.id || (this.id = x._mediumEditors.length), x._mediumEditors[this.id] = this;
      }
      function u(x) {
        !x._mediumEditors || !x._mediumEditors[this.id] || (x._mediumEditors[this.id] = null);
      }
      function c(x, P, L) {
        var k = [];
        if (x || (x = []), typeof x == "string" && (x = P.querySelectorAll(x)), t.util.isElement(x) && (x = [x]), L)
          for (var J = 0; J < x.length; J++) {
            var de = x[J];
            t.util.isElement(de) && !de.getAttribute("data-medium-editor-element") && !de.getAttribute("medium-editor-textarea-id") && k.push(de);
          }
        else
          k = Array.prototype.slice.apply(x);
        return k;
      }
      function d(x) {
        var P = x.parentNode.querySelector('textarea[medium-editor-textarea-id="' + x.getAttribute("medium-editor-textarea-id") + '"]');
        P && (P.classList.remove("medium-editor-hidden"), P.removeAttribute("medium-editor-textarea-id")), x.parentNode && x.parentNode.removeChild(x);
      }
      function f(x, P) {
        return Object.keys(P).forEach(function(L) {
          x[L] === void 0 && (x[L] = P[L]);
        }), x;
      }
      function h(x, P, L) {
        var k = {
          window: L.options.contentWindow,
          document: L.options.ownerDocument,
          base: L
        };
        return x = f(x, k), typeof x.init == "function" && x.init(), x.name || (x.name = P), x;
      }
      function p() {
        return this.elements.every(function(x) {
          return !!x.getAttribute("data-disable-toolbar");
        }) ? !1 : this.options.toolbar !== !1;
      }
      function v() {
        return p.call(this) ? this.options.anchorPreview !== !1 : !1;
      }
      function g() {
        return this.options.placeholder !== !1;
      }
      function y() {
        return this.options.autoLink !== !1;
      }
      function m() {
        return this.options.imageDragging !== !1;
      }
      function E() {
        return this.options.keyboardCommands !== !1;
      }
      function w() {
        return !this.options.extensions.imageDragging;
      }
      function S(x) {
        for (var P = this.options.ownerDocument.createElement("div"), L = Date.now(), k = "medium-editor-" + L, J = x.attributes; this.options.ownerDocument.getElementById(k); )
          L++, k = "medium-editor-" + L;
        P.className = x.className, P.id = k, P.innerHTML = x.value, x.setAttribute("medium-editor-textarea-id", k);
        for (var de = 0, Ne = J.length; de < Ne; de++)
          P.hasAttribute(J[de].nodeName) || P.setAttribute(J[de].nodeName, J[de].value);
        return x.form && this.on(x.form, "reset", (function(se) {
          se.defaultPrevented || this.resetContent(this.options.ownerDocument.getElementById(k));
        }).bind(this)), x.classList.add("medium-editor-hidden"), x.parentNode.insertBefore(
          P,
          x
        ), P;
      }
      function _(x, P) {
        if (!x.getAttribute("data-medium-editor-element")) {
          x.nodeName.toLowerCase() === "textarea" && (x = S.call(this, x), this.instanceHandleEditableInput || (this.instanceHandleEditableInput = s.bind(this), this.subscribe("editableInput", this.instanceHandleEditableInput))), !this.options.disableEditing && !x.getAttribute("data-disable-editing") && (x.setAttribute("contentEditable", !0), x.setAttribute("spellcheck", this.options.spellcheck)), this.instanceHandleEditableKeydownEnter || (x.getAttribute("data-disable-return") || x.getAttribute("data-disable-double-return")) && (this.instanceHandleEditableKeydownEnter = r.bind(this), this.subscribe("editableKeydownEnter", this.instanceHandleEditableKeydownEnter)), !this.options.disableReturn && !x.getAttribute("data-disable-return") && this.on(x, "keyup", a.bind(this));
          var L = t.util.guid();
          x.setAttribute("data-medium-editor-element", !0), x.classList.add("medium-editor-element"), x.setAttribute("role", "textbox"), x.setAttribute("aria-multiline", !0), x.setAttribute("data-medium-editor-editor-index", P), x.setAttribute("medium-editor-index", L), ae[L] = x.innerHTML, this.events.attachAllEventsToElement(x);
        }
        return x;
      }
      function b() {
        this.subscribe("editableKeydownTab", i.bind(this)), this.subscribe("editableKeydownDelete", o.bind(this)), this.subscribe("editableKeydownEnter", o.bind(this)), this.options.disableExtraSpaces && this.subscribe("editableKeydownSpace", n.bind(this)), this.instanceHandleEditableKeydownEnter || (this.options.disableReturn || this.options.disableDoubleReturn) && (this.instanceHandleEditableKeydownEnter = r.bind(this), this.subscribe("editableKeydownEnter", this.instanceHandleEditableKeydownEnter));
      }
      function T() {
        if (this.extensions = [], Object.keys(this.options.extensions).forEach(function(J) {
          J !== "toolbar" && this.options.extensions[J] && this.extensions.push(h(this.options.extensions[J], J, this));
        }, this), w.call(this)) {
          var x = this.options.fileDragging;
          x || (x = {}, m.call(this) || (x.allowedTypes = [])), this.addBuiltInExtension("fileDragging", x);
        }
        var P = {
          paste: !0,
          "anchor-preview": v.call(this),
          autoLink: y.call(this),
          keyboardCommands: E.call(this),
          placeholder: g.call(this)
        };
        Object.keys(P).forEach(function(J) {
          P[J] && this.addBuiltInExtension(J);
        }, this);
        var L = this.options.extensions.toolbar;
        if (!L && p.call(this)) {
          var k = t.util.extend({}, this.options.toolbar, {
            allowMultiParagraphSelection: this.options.allowMultiParagraphSelection
            // deprecated
          });
          L = new t.extensions.toolbar(k);
        }
        L && this.extensions.push(h(L, "toolbar", this));
      }
      function R(x, P) {
        var L = [
          ["allowMultiParagraphSelection", "toolbar.allowMultiParagraphSelection"]
        ];
        return P && L.forEach(function(k) {
          P.hasOwnProperty(k[0]) && P[k[0]] !== void 0 && t.util.deprecated(k[0], k[1], "v6.0.0");
        }), t.util.defaults({}, P, x);
      }
      function B(x, P) {
        var L = /^append-(.+)$/gi, k = /justify([A-Za-z]*)$/g, J, de;
        if (J = L.exec(x), J)
          return t.util.execFormatBlock(this.options.ownerDocument, J[1]);
        if (x === "fontSize")
          return P.size && t.util.deprecated(".size option for fontSize command", ".value", "6.0.0"), de = P.value || P.size, this.options.ownerDocument.execCommand("fontSize", !1, de);
        if (x === "fontName")
          return P.name && t.util.deprecated(".name option for fontName command", ".value", "6.0.0"), de = P.value || P.name, this.options.ownerDocument.execCommand("fontName", !1, de);
        if (x === "createLink")
          return this.createLink(P);
        if (x === "image") {
          var Ne = this.options.contentWindow.getSelection().toString().trim();
          return this.options.ownerDocument.execCommand("insertImage", !1, Ne);
        }
        if (x === "html") {
          var se = this.options.contentWindow.getSelection().toString().trim();
          return t.util.insertHTMLCommand(this.options.ownerDocument, se);
        }
        if (k.exec(x)) {
          var G = this.options.ownerDocument.execCommand(x, !1, null), be = t.selection.getSelectedParentElement(t.selection.getSelectionRange(this.options.ownerDocument));
          return be && K.call(this, t.util.getTopBlockContainer(be)), G;
        }
        return de = P && P.value, this.options.ownerDocument.execCommand(x, !1, de);
      }
      function K(x) {
        if (x) {
          var P, L = Array.prototype.slice.call(x.childNodes).filter(function(k) {
            var J = k.nodeName.toLowerCase() === "div";
            return J && !P && (P = k.style.textAlign), J;
          });
          L.length && (this.saveSelection(), L.forEach(function(k) {
            if (k.style.textAlign === P) {
              var J = k.lastChild;
              if (J) {
                t.util.unwrap(k, this.options.ownerDocument);
                var de = this.options.ownerDocument.createElement("BR");
                J.parentNode.insertBefore(de, J.nextSibling);
              }
            }
          }, this), x.style.textAlign = P, this.restoreSelection());
        }
      }
      var ae = {};
      t.prototype = {
        // NOT DOCUMENTED - exposed for backwards compatability
        init: function(x, P) {
          return this.options = R.call(this, this.defaults, P), this.origElements = x, this.options.elementsContainer || (this.options.elementsContainer = this.options.ownerDocument.body), this.setup();
        },
        setup: function() {
          this.isActive || (l.call(this, this.options.contentWindow), this.events = new t.Events(this), this.elements = [], this.addElements(this.origElements), this.elements.length !== 0 && (this.isActive = !0, T.call(this), b.call(this)));
        },
        destroy: function() {
          this.isActive && (this.isActive = !1, this.extensions.forEach(function(x) {
            typeof x.destroy == "function" && x.destroy();
          }, this), this.events.destroy(), this.elements.forEach(function(x) {
            this.options.spellcheck && (x.innerHTML = x.innerHTML), x.removeAttribute("contentEditable"), x.removeAttribute("spellcheck"), x.removeAttribute("data-medium-editor-element"), x.classList.remove("medium-editor-element"), x.removeAttribute("role"), x.removeAttribute("aria-multiline"), x.removeAttribute("medium-editor-index"), x.removeAttribute("data-medium-editor-editor-index"), x.getAttribute("medium-editor-textarea-id") && d(x);
          }, this), this.elements = [], this.instanceHandleEditableKeydownEnter = null, this.instanceHandleEditableInput = null, u.call(this, this.options.contentWindow));
        },
        on: function(x, P, L, k) {
          return this.events.attachDOMEvent(x, P, L, k), this;
        },
        off: function(x, P, L, k) {
          return this.events.detachDOMEvent(x, P, L, k), this;
        },
        subscribe: function(x, P) {
          return this.events.attachCustomEvent(x, P), this;
        },
        unsubscribe: function(x, P) {
          return this.events.detachCustomEvent(x, P), this;
        },
        trigger: function(x, P, L) {
          return this.events.triggerCustomEvent(x, P, L), this;
        },
        delay: function(x) {
          var P = this;
          return setTimeout(function() {
            P.isActive && x();
          }, this.options.delay);
        },
        serialize: function() {
          var x, P, L = {}, k = this.elements.length;
          for (x = 0; x < k; x += 1)
            P = this.elements[x].id !== "" ? this.elements[x].id : "element-" + x, L[P] = {
              value: this.elements[x].innerHTML.trim()
            };
          return L;
        },
        getExtensionByName: function(x) {
          var P;
          return this.extensions && this.extensions.length && this.extensions.some(function(L) {
            return L.name === x ? (P = L, !0) : !1;
          }), P;
        },
        /**
         * NOT DOCUMENTED - exposed as a helper for other extensions to use
         */
        addBuiltInExtension: function(x, P) {
          var L = this.getExtensionByName(x), k;
          if (L)
            return L;
          switch (x) {
            case "anchor":
              k = t.util.extend({}, this.options.anchor, P), L = new t.extensions.anchor(k);
              break;
            case "anchor-preview":
              L = new t.extensions.anchorPreview(this.options.anchorPreview);
              break;
            case "autoLink":
              L = new t.extensions.autoLink();
              break;
            case "fileDragging":
              L = new t.extensions.fileDragging(P);
              break;
            case "fontname":
              L = new t.extensions.fontName(this.options.fontName);
              break;
            case "fontsize":
              L = new t.extensions.fontSize(P);
              break;
            case "keyboardCommands":
              L = new t.extensions.keyboardCommands(this.options.keyboardCommands);
              break;
            case "paste":
              L = new t.extensions.paste(this.options.paste);
              break;
            case "placeholder":
              L = new t.extensions.placeholder(this.options.placeholder);
              break;
            default:
              t.extensions.button.isBuiltInButton(x) && (P ? (k = t.util.defaults({}, P, t.extensions.button.prototype.defaults[x]), L = new t.extensions.button(k)) : L = new t.extensions.button(x));
          }
          return L && this.extensions.push(h(L, x, this)), L;
        },
        stopSelectionUpdates: function() {
          this.preventSelectionUpdates = !0;
        },
        startSelectionUpdates: function() {
          this.preventSelectionUpdates = !1;
        },
        checkSelection: function() {
          var x = this.getExtensionByName("toolbar");
          return x && x.checkState(), this;
        },
        // Wrapper around document.queryCommandState for checking whether an action has already
        // been applied to the current selection
        queryCommandState: function(x) {
          var P = /^full-(.+)$/gi, L, k = null;
          L = P.exec(x), L && (x = L[1]);
          try {
            k = this.options.ownerDocument.queryCommandState(x);
          } catch {
            k = null;
          }
          return k;
        },
        execAction: function(x, P) {
          var L = /^full-(.+)$/gi, k, J;
          return k = L.exec(x), k ? (this.saveSelection(), this.selectAllContents(), J = B.call(this, k[1], P), this.restoreSelection()) : J = B.call(this, x, P), (x === "insertunorderedlist" || x === "insertorderedlist") && t.util.cleanListDOM(this.options.ownerDocument, this.getSelectedParentElement()), this.checkSelection(), J;
        },
        getSelectedParentElement: function(x) {
          return x === void 0 && (x = this.options.contentWindow.getSelection().getRangeAt(0)), t.selection.getSelectedParentElement(x);
        },
        selectAllContents: function() {
          var x = t.selection.getSelectionElement(this.options.contentWindow);
          if (x) {
            for (; x.children.length === 1; )
              x = x.children[0];
            this.selectElement(x);
          }
        },
        selectElement: function(x) {
          t.selection.selectNode(x, this.options.ownerDocument);
          var P = t.selection.getSelectionElement(this.options.contentWindow);
          P && this.events.focusElement(P);
        },
        getFocusedElement: function() {
          var x;
          return this.elements.some(function(P) {
            return !x && P.getAttribute("data-medium-focused") && (x = P), !!x;
          }, this), x;
        },
        // Export the state of the selection in respect to one of this
        // instance of MediumEditor's elements
        exportSelection: function() {
          var x = t.selection.getSelectionElement(this.options.contentWindow), P = this.elements.indexOf(x), L = null;
          return P >= 0 && (L = t.selection.exportSelection(x, this.options.ownerDocument)), L !== null && P !== 0 && (L.editableElementIndex = P), L;
        },
        saveSelection: function() {
          this.selectionState = this.exportSelection();
        },
        // Restore a selection based on a selectionState returned by a call
        // to MediumEditor.exportSelection
        importSelection: function(x, P) {
          if (x) {
            var L = this.elements[x.editableElementIndex || 0];
            t.selection.importSelection(x, L, this.options.ownerDocument, P);
          }
        },
        restoreSelection: function() {
          this.importSelection(this.selectionState);
        },
        createLink: function(x) {
          var P = t.selection.getSelectionElement(this.options.contentWindow), L = {}, k;
          if (this.elements.indexOf(P) !== -1) {
            try {
              if (this.events.disableCustomEvent("editableInput"), x.url && t.util.deprecated(".url option for createLink", ".value", "6.0.0"), k = x.url || x.value, k && k.trim().length > 0) {
                var J = this.options.contentWindow.getSelection();
                if (J) {
                  var de = J.getRangeAt(0), Ne = de.commonAncestorContainer, se, G, be, Oe;
                  if (de.endContainer.nodeType === 3 && de.startContainer.nodeType !== 3 && de.startOffset === 0 && de.startContainer.firstChild === de.endContainer && (Ne = de.endContainer), G = t.util.getClosestBlockContainer(de.startContainer), be = t.util.getClosestBlockContainer(de.endContainer), Ne.nodeType !== 3 && Ne.textContent.length !== 0 && G === be) {
                    var Ae = G || P, Re = this.options.ownerDocument.createDocumentFragment();
                    this.execAction("unlink"), se = this.exportSelection(), Re.appendChild(Ae.cloneNode(!0)), P === Ae ? t.selection.select(
                      this.options.ownerDocument,
                      Ae.firstChild,
                      0,
                      Ae.lastChild,
                      Ae.lastChild.nodeType === 3 ? Ae.lastChild.nodeValue.length : Ae.lastChild.childNodes.length
                    ) : t.selection.select(
                      this.options.ownerDocument,
                      Ae,
                      0,
                      Ae,
                      Ae.childNodes.length
                    );
                    var $ = this.exportSelection();
                    Oe = t.util.findOrCreateMatchingTextNodes(
                      this.options.ownerDocument,
                      Re,
                      {
                        start: se.start - $.start,
                        end: se.end - $.start,
                        editableElementIndex: se.editableElementIndex
                      }
                    ), Oe.length === 0 && (Re = this.options.ownerDocument.createDocumentFragment(), Re.appendChild(Ne.cloneNode(!0)), Oe = [Re.firstChild.firstChild, Re.firstChild.lastChild]), t.util.createLink(this.options.ownerDocument, Oe, k.trim());
                    var re = (Re.firstChild.innerHTML.match(/^\s+/) || [""])[0].length;
                    t.util.insertHTMLCommand(this.options.ownerDocument, Re.firstChild.innerHTML.replace(/^\s+/, "")), se.start -= re, se.end -= re, this.importSelection(se);
                  } else
                    this.options.ownerDocument.execCommand("createLink", !1, k);
                  this.options.targetBlank || x.target === "_blank" ? t.util.setTargetBlank(t.selection.getSelectionStart(this.options.ownerDocument), k) : t.util.removeTargetBlank(t.selection.getSelectionStart(this.options.ownerDocument), k), x.buttonClass && t.util.addClassToAnchors(t.selection.getSelectionStart(this.options.ownerDocument), x.buttonClass);
                }
              }
              if (this.options.targetBlank || x.target === "_blank" || x.buttonClass) {
                L = this.options.ownerDocument.createEvent("HTMLEvents"), L.initEvent("input", !0, !0, this.options.contentWindow);
                for (var ee = 0, _e = this.elements.length; ee < _e; ee += 1)
                  this.elements[ee].dispatchEvent(L);
              }
            } finally {
              this.events.enableCustomEvent("editableInput");
            }
            this.events.triggerCustomEvent("editableInput", L, P);
          }
        },
        cleanPaste: function(x) {
          this.getExtensionByName("paste").cleanPaste(x);
        },
        pasteHTML: function(x, P) {
          this.getExtensionByName("paste").pasteHTML(x, P);
        },
        setContent: function(x, P) {
          if (P = P || 0, this.elements[P]) {
            var L = this.elements[P];
            L.innerHTML = x, this.checkContentChanged(L);
          }
        },
        getContent: function(x) {
          return x = x || 0, this.elements[x] ? this.elements[x].innerHTML.trim() : null;
        },
        checkContentChanged: function(x) {
          x = x || t.selection.getSelectionElement(this.options.contentWindow), this.events.updateInput(x, { target: x, currentTarget: x });
        },
        resetContent: function(x) {
          if (x) {
            var P = this.elements.indexOf(x);
            P !== -1 && this.setContent(ae[x.getAttribute("medium-editor-index")], P);
            return;
          }
          this.elements.forEach(function(L, k) {
            this.setContent(ae[L.getAttribute("medium-editor-index")], k);
          }, this);
        },
        addElements: function(x) {
          var P = c(x, this.options.ownerDocument, !0);
          if (P.length === 0)
            return !1;
          P.forEach(function(L) {
            L = _.call(this, L, this.id), this.elements.push(L), this.trigger("addElement", { target: L, currentTarget: L }, L);
          }, this);
        },
        removeElements: function(x) {
          var P = c(x, this.options.ownerDocument), L = P.map(function(k) {
            return k.getAttribute("medium-editor-textarea-id") && k.parentNode ? k.parentNode.querySelector('div[medium-editor-textarea-id="' + k.getAttribute("medium-editor-textarea-id") + '"]') : k;
          });
          this.elements = this.elements.filter(function(k) {
            return L.indexOf(k) !== -1 ? (this.events.cleanupElement(k), k.getAttribute("medium-editor-textarea-id") && d(k), this.trigger("removeElement", { target: k, currentTarget: k }, k), !1) : !0;
          }, this);
        }
      }, t.getEditorFromElement = function(x) {
        var P = x.getAttribute("data-medium-editor-editor-index"), L = x && x.ownerDocument && (x.ownerDocument.defaultView || x.ownerDocument.parentWindow);
        return L && L._mediumEditors && L._mediumEditors[P] ? L._mediumEditors[P] : null;
      };
    }(), function() {
      t.prototype.defaults = {
        activeButtonClass: "medium-editor-button-active",
        buttonLabels: !1,
        delay: 0,
        disableReturn: !1,
        disableDoubleReturn: !1,
        disableExtraSpaces: !1,
        disableEditing: !1,
        autoLink: !1,
        elementsContainer: !1,
        contentWindow: window,
        ownerDocument: document,
        targetBlank: !1,
        extensions: {},
        spellcheck: !0
      };
    }(), t.parseVersionString = function(n) {
      var r = n.split("-"), i = r[0].split("."), o = r.length > 1 ? r[1] : "";
      return {
        major: parseInt(i[0], 10),
        minor: parseInt(i[1], 10),
        revision: parseInt(i[2], 10),
        preRelease: o,
        toString: function() {
          return [i[0], i[1], i[2]].join(".") + (o ? "-" + o : "");
        }
      };
    }, t.version = t.parseVersionString.call(this, "5.23.3"), t;
  }());
})(q2);
var lX = q2.exports;
const of = /* @__PURE__ */ Sf(lX);
/*!
 * vanilla-picker v2.12.3
 * https://vanilla-picker.js.org
 *
 * Copyright 2017-2024 Andreas Borgen (https://github.com/Sphinxxxx), Adam Brooks (https://github.com/dissimulate)
 * Released under the ISC license.
 */
var im = function(e, t) {
  if (!(e instanceof t))
    throw new TypeError("Cannot call a class as a function");
}, om = /* @__PURE__ */ function() {
  function e(t, n) {
    for (var r = 0; r < n.length; r++) {
      var i = n[r];
      i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i);
    }
  }
  return function(t, n, r) {
    return n && e(t.prototype, n), r && e(t, r), t;
  };
}(), Ic = /* @__PURE__ */ function() {
  function e(t, n) {
    var r = [], i = !0, o = !1, a = void 0;
    try {
      for (var s = t[Symbol.iterator](), l; !(i = (l = s.next()).done) && (r.push(l.value), !(n && r.length === n)); i = !0)
        ;
    } catch (u) {
      o = !0, a = u;
    } finally {
      try {
        !i && s.return && s.return();
      } finally {
        if (o) throw a;
      }
    }
    return r;
  }
  return function(t, n) {
    if (Array.isArray(t))
      return t;
    if (Symbol.iterator in Object(t))
      return e(t, n);
    throw new TypeError("Invalid attempt to destructure non-iterable instance");
  };
}();
String.prototype.startsWith = String.prototype.startsWith || function(e) {
  return this.indexOf(e) === 0;
};
String.prototype.padStart = String.prototype.padStart || function(e, t) {
  for (var n = this; n.length < e; )
    n = t + n;
  return n;
};
var uX = { cb: "0f8ff", tqw: "aebd7", q: "-ffff", qmrn: "7fffd4", zr: "0ffff", bg: "5f5dc", bsq: "e4c4", bck: "---", nch: "ebcd", b: "--ff", bvt: "8a2be2", brwn: "a52a2a", brw: "deb887", ctb: "5f9ea0", hrt: "7fff-", chcT: "d2691e", cr: "7f50", rnw: "6495ed", crns: "8dc", crms: "dc143c", cn: "-ffff", Db: "--8b", Dcn: "-8b8b", Dgnr: "b8860b", Dgr: "a9a9a9", Dgrn: "-64-", Dkhk: "bdb76b", Dmgn: "8b-8b", Dvgr: "556b2f", Drng: "8c-", Drch: "9932cc", Dr: "8b--", Dsmn: "e9967a", Dsgr: "8fbc8f", DsTb: "483d8b", DsTg: "2f4f4f", Dtrq: "-ced1", Dvt: "94-d3", ppnk: "1493", pskb: "-bfff", mgr: "696969", grb: "1e90ff", rbrc: "b22222", rwht: "af0", stg: "228b22", chs: "-ff", gnsb: "dcdcdc", st: "8f8ff", g: "d7-", gnr: "daa520", gr: "808080", grn: "-8-0", grnw: "adff2f", hnw: "0fff0", htpn: "69b4", nnr: "cd5c5c", ng: "4b-82", vr: "0", khk: "0e68c", vnr: "e6e6fa", nrb: "0f5", wngr: "7cfc-", mnch: "acd", Lb: "add8e6", Lcr: "08080", Lcn: "e0ffff", Lgnr: "afad2", Lgr: "d3d3d3", Lgrn: "90ee90", Lpnk: "b6c1", Lsmn: "a07a", Lsgr: "20b2aa", Lskb: "87cefa", LsTg: "778899", Lstb: "b0c4de", Lw: "e0", m: "-ff-", mgrn: "32cd32", nn: "af0e6", mgnt: "-ff", mrn: "8--0", mqm: "66cdaa", mmb: "--cd", mmrc: "ba55d3", mmpr: "9370db", msg: "3cb371", mmsT: "7b68ee", "": "-fa9a", mtr: "48d1cc", mmvt: "c71585", mnLb: "191970", ntc: "5fffa", mstr: "e4e1", mccs: "e4b5", vjw: "dead", nv: "--80", c: "df5e6", v: "808-0", vrb: "6b8e23", rng: "a5-", rngr: "45-", rch: "da70d6", pgnr: "eee8aa", pgrn: "98fb98", ptrq: "afeeee", pvtr: "db7093", ppwh: "efd5", pchp: "dab9", pr: "cd853f", pnk: "c0cb", pm: "dda0dd", pwrb: "b0e0e6", prp: "8-080", cc: "663399", r: "--", sbr: "bc8f8f", rb: "4169e1", sbrw: "8b4513", smn: "a8072", nbr: "4a460", sgrn: "2e8b57", ssh: "5ee", snn: "a0522d", svr: "c0c0c0", skb: "87ceeb", sTb: "6a5acd", sTgr: "708090", snw: "afa", n: "-ff7f", stb: "4682b4", tn: "d2b48c", t: "-8080", thst: "d8bfd8", tmT: "6347", trqs: "40e0d0", vt: "ee82ee", whT: "5deb3", wht: "", hts: "5f5f5", w: "-", wgrn: "9acd32" };
function S1(e) {
  var t = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1, n = t > 0 ? e.toFixed(t).replace(/0+$/, "").replace(/\.$/, "") : e.toString();
  return n || "0";
}
var cX = function() {
  function e(t, n, r, i) {
    im(this, e);
    var o = this;
    function a(l) {
      if (l.startsWith("hsl")) {
        var u = l.match(/([\-\d\.e]+)/g).map(Number), c = Ic(u, 4), d = c[0], f = c[1], h = c[2], p = c[3];
        p === void 0 && (p = 1), d /= 360, f /= 100, h /= 100, o.hsla = [d, f, h, p];
      } else if (l.startsWith("rgb")) {
        var v = l.match(/([\-\d\.e]+)/g).map(Number), g = Ic(v, 4), y = g[0], m = g[1], E = g[2], w = g[3];
        w === void 0 && (w = 1), o.rgba = [y, m, E, w];
      } else
        l.startsWith("#") ? o.rgba = e.hexToRgb(l) : o.rgba = e.nameToRgb(l) || e.hexToRgb(l);
    }
    if (t !== void 0) if (Array.isArray(t))
      this.rgba = t;
    else if (r === void 0) {
      var s = t && "" + t;
      s && a(s.toLowerCase());
    } else
      this.rgba = [t, n, r, i === void 0 ? 1 : i];
  }
  return om(e, [{
    key: "printRGB",
    value: function(n) {
      var r = n ? this.rgba : this.rgba.slice(0, 3), i = r.map(function(o, a) {
        return S1(o, a === 3 ? 3 : 0);
      });
      return n ? "rgba(" + i + ")" : "rgb(" + i + ")";
    }
  }, {
    key: "printHSL",
    value: function(n) {
      var r = [360, 100, 100, 1], i = ["", "%", "%", ""], o = n ? this.hsla : this.hsla.slice(0, 3), a = o.map(function(s, l) {
        return S1(s * r[l], l === 3 ? 3 : 1) + i[l];
      });
      return n ? "hsla(" + a + ")" : "hsl(" + a + ")";
    }
  }, {
    key: "printHex",
    value: function(n) {
      var r = this.hex;
      return n ? r : r.substring(0, 7);
    }
  }, {
    key: "rgba",
    get: function() {
      if (this._rgba)
        return this._rgba;
      if (!this._hsla)
        throw new Error("No color is set");
      return this._rgba = e.hslToRgb(this._hsla);
    },
    set: function(n) {
      n.length === 3 && (n[3] = 1), this._rgba = n, this._hsla = null;
    }
  }, {
    key: "rgbString",
    get: function() {
      return this.printRGB();
    }
  }, {
    key: "rgbaString",
    get: function() {
      return this.printRGB(!0);
    }
  }, {
    key: "hsla",
    get: function() {
      if (this._hsla)
        return this._hsla;
      if (!this._rgba)
        throw new Error("No color is set");
      return this._hsla = e.rgbToHsl(this._rgba);
    },
    set: function(n) {
      n.length === 3 && (n[3] = 1), this._hsla = n, this._rgba = null;
    }
  }, {
    key: "hslString",
    get: function() {
      return this.printHSL();
    }
  }, {
    key: "hslaString",
    get: function() {
      return this.printHSL(!0);
    }
  }, {
    key: "hex",
    get: function() {
      var n = this.rgba, r = n.map(function(i, o) {
        return o < 3 ? i.toString(16) : Math.round(i * 255).toString(16);
      });
      return "#" + r.map(function(i) {
        return i.padStart(2, "0");
      }).join("");
    },
    set: function(n) {
      this.rgba = e.hexToRgb(n);
    }
  }], [{
    key: "hexToRgb",
    value: function(n) {
      var r = (n.startsWith("#") ? n.slice(1) : n).replace(/^(\w{3})$/, "$1F").replace(/^(\w)(\w)(\w)(\w)$/, "$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/, "$1FF");
      if (!r.match(/^([0-9a-fA-F]{8})$/))
        throw new Error("Unknown hex color; " + n);
      var i = r.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map(function(o) {
        return parseInt(o, 16);
      });
      return i[3] = i[3] / 255, i;
    }
  }, {
    key: "nameToRgb",
    value: function(n) {
      var r = n.toLowerCase().replace("at", "T").replace(/[aeiouyldf]/g, "").replace("ght", "L").replace("rk", "D").slice(-5, 4), i = uX[r];
      return i === void 0 ? i : e.hexToRgb(i.replace(/\-/g, "00").padStart(6, "f"));
    }
  }, {
    key: "rgbToHsl",
    value: function(n) {
      var r = Ic(n, 4), i = r[0], o = r[1], a = r[2], s = r[3];
      i /= 255, o /= 255, a /= 255;
      var l = Math.max(i, o, a), u = Math.min(i, o, a), c = void 0, d = void 0, f = (l + u) / 2;
      if (l === u)
        c = d = 0;
      else {
        var h = l - u;
        switch (d = f > 0.5 ? h / (2 - l - u) : h / (l + u), l) {
          case i:
            c = (o - a) / h + (o < a ? 6 : 0);
            break;
          case o:
            c = (a - i) / h + 2;
            break;
          case a:
            c = (i - o) / h + 4;
            break;
        }
        c /= 6;
      }
      return [c, d, f, s];
    }
  }, {
    key: "hslToRgb",
    value: function(n) {
      var r = Ic(n, 4), i = r[0], o = r[1], a = r[2], s = r[3], l = void 0, u = void 0, c = void 0;
      if (o === 0)
        l = u = c = a;
      else {
        var d = function(g, y, m) {
          return m < 0 && (m += 1), m > 1 && (m -= 1), m < 0.16666666666666666 ? g + (y - g) * 6 * m : m < 0.5 ? y : m < 0.6666666666666666 ? g + (y - g) * (0.6666666666666666 - m) * 6 : g;
        }, f = a < 0.5 ? a * (1 + o) : a + o - a * o, h = 2 * a - f;
        l = d(h, f, i + 1 / 3), u = d(h, f, i), c = d(h, f, i - 1 / 3);
      }
      var p = [l * 255, u * 255, c * 255].map(Math.round);
      return p[3] = s, p;
    }
  }]), e;
}(), dX = function() {
  function e() {
    im(this, e), this._events = [];
  }
  return om(e, [{
    key: "add",
    value: function(n, r, i) {
      n.addEventListener(r, i, !1), this._events.push({
        target: n,
        type: r,
        handler: i
      });
    }
  }, {
    key: "remove",
    value: function(n, r, i) {
      this._events = this._events.filter(function(o) {
        var a = !0;
        return n && n !== o.target && (a = !1), r && r !== o.type && (a = !1), i && i !== o.handler && (a = !1), a && e._doRemove(o.target, o.type, o.handler), !a;
      });
    }
  }, {
    key: "destroy",
    value: function() {
      this._events.forEach(function(n) {
        return e._doRemove(n.target, n.type, n.handler);
      }), this._events = [];
    }
  }], [{
    key: "_doRemove",
    value: function(n, r, i) {
      n.removeEventListener(r, i, !1);
    }
  }]), e;
}();
function fX(e) {
  var t = document.createElement("div");
  return t.innerHTML = e, t.firstElementChild;
}
function $p(e, t, n) {
  var r = !1;
  function i(l, u, c) {
    return Math.max(u, Math.min(l, c));
  }
  function o(l, u, c) {
    if (c && (r = !0), !!r) {
      l.preventDefault();
      var d = t.getBoundingClientRect(), f = d.width, h = d.height, p = u.clientX, v = u.clientY, g = i(p - d.left, 0, f), y = i(v - d.top, 0, h);
      n(g / f, y / h);
    }
  }
  function a(l, u) {
    var c = l.buttons === void 0 ? l.which : l.buttons;
    c === 1 ? o(l, l, u) : r = !1;
  }
  function s(l, u) {
    l.touches.length === 1 ? o(l, l.touches[0], u) : r = !1;
  }
  e.add(t, "mousedown", function(l) {
    a(l, !0);
  }), e.add(t, "touchstart", function(l) {
    s(l, !0);
  }), e.add(window, "mousemove", a), e.add(t, "touchmove", s), e.add(window, "mouseup", function(l) {
    r = !1;
  }), e.add(t, "touchend", function(l) {
    r = !1;
  }), e.add(t, "touchcancel", function(l) {
    r = !1;
  });
}
var hX = `linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0 / 2em 2em,
                   linear-gradient(45deg, lightgrey 25%,       white 25%,       white 75%, lightgrey 75%) 1em 1em / 2em 2em`, pX = 360, Z2 = "keydown", Bc = "mousedown", kp = "focusin";
function Ri(e, t) {
  return (t || document).querySelector(e);
}
function vX(e) {
  e.preventDefault(), e.stopPropagation();
}
function Ip(e, t, n, r, i) {
  e.add(t, Z2, function(o) {
    n.indexOf(o.key) >= 0 && r(o);
  });
}
var J2 = function() {
  function e(t) {
    im(this, e), this.settings = {
      popup: "right",
      layout: "default",
      alpha: !0,
      editor: !0,
      editorFormat: "hex",
      cancelButton: !1,
      defaultColor: "#0cf"
    }, this._events = new dX(), this.onChange = null, this.onDone = null, this.onOpen = null, this.onClose = null, this.setOptions(t);
  }
  return om(e, [{
    key: "setOptions",
    value: function(n) {
      var r = this;
      if (!n)
        return;
      var i = this.settings;
      function o(u, c, d) {
        for (var f in u)
          c[f] = u[f];
      }
      if (n instanceof HTMLElement)
        i.parent = n;
      else {
        i.parent && n.parent && i.parent !== n.parent && (this._events.remove(i.parent), this._popupInited = !1), o(n, i), n.onChange && (this.onChange = n.onChange), n.onDone && (this.onDone = n.onDone), n.onOpen && (this.onOpen = n.onOpen), n.onClose && (this.onClose = n.onClose);
        var a = n.color || n.colour;
        a && this._setColor(a);
      }
      var s = i.parent;
      if (s && i.popup && !this._popupInited) {
        var l = function(c) {
          return r.openHandler(c);
        };
        this._events.add(s, "click", l), Ip(this._events, s, [" ", "Spacebar", "Enter"], l), this._popupInited = !0;
      } else n.parent && !i.popup && this.show();
    }
  }, {
    key: "openHandler",
    value: function(n) {
      if (this.show()) {
        n && n.preventDefault(), this.settings.parent.style.pointerEvents = "none";
        var r = n && n.type === Z2 ? this._domEdit : this.domElement;
        setTimeout(function() {
          return r.focus();
        }, 100), this.onOpen && this.onOpen(this.colour);
      }
    }
  }, {
    key: "closeHandler",
    value: function(n) {
      var r = n && n.type, i = !1;
      if (!n)
        i = !0;
      else if (r === Bc || r === kp) {
        var o = (this.__containedEvent || 0) + 100;
        n.timeStamp > o && (i = !0);
      } else
        vX(n), i = !0;
      i && this.hide() && (this.settings.parent.style.pointerEvents = "", r !== Bc && this.settings.parent.focus(), this.onClose && this.onClose(this.colour));
    }
  }, {
    key: "movePopup",
    value: function(n, r) {
      this.closeHandler(), this.setOptions(n), r && this.openHandler();
    }
  }, {
    key: "setColor",
    value: function(n, r) {
      this._setColor(n, { silent: r });
    }
  }, {
    key: "_setColor",
    value: function(n, r) {
      if (typeof n == "string" && (n = n.trim()), !!n) {
        r = r || {};
        var i = void 0;
        try {
          i = new cX(n);
        } catch (a) {
          if (r.failSilently)
            return;
          throw a;
        }
        if (!this.settings.alpha) {
          var o = i.hsla;
          o[3] = 1, i.hsla = o;
        }
        this.colour = this.color = i, this._setHSLA(null, null, null, null, r);
      }
    }
  }, {
    key: "setColour",
    value: function(n, r) {
      this.setColor(n, r);
    }
  }, {
    key: "show",
    value: function() {
      var n = this.settings.parent;
      if (!n)
        return !1;
      if (this.domElement) {
        var r = this._toggleDOM(!0);
        return this._setPosition(), r;
      }
      var i = this.settings.template || '<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>', o = fX(i);
      return this.domElement = o, this._domH = Ri(".picker_hue", o), this._domSL = Ri(".picker_sl", o), this._domA = Ri(".picker_alpha", o), this._domEdit = Ri(".picker_editor input", o), this._domSample = Ri(".picker_sample", o), this._domOkay = Ri(".picker_done button", o), this._domCancel = Ri(".picker_cancel button", o), o.classList.add("layout_" + this.settings.layout), this.settings.alpha || o.classList.add("no_alpha"), this.settings.editor || o.classList.add("no_editor"), this.settings.cancelButton || o.classList.add("no_cancel"), this._ifPopup(function() {
        return o.classList.add("popup");
      }), this._setPosition(), this.colour ? this._updateUI() : this._setColor(this.settings.defaultColor), this._bindEvents(), !0;
    }
  }, {
    key: "hide",
    value: function() {
      return this._toggleDOM(!1);
    }
  }, {
    key: "destroy",
    value: function() {
      this._events.destroy(), this.domElement && this.settings.parent.removeChild(this.domElement);
    }
  }, {
    key: "_bindEvents",
    value: function() {
      var n = this, r = this, i = this.domElement, o = this._events;
      function a(u, c, d) {
        o.add(u, c, d);
      }
      a(i, "click", function(u) {
        return u.preventDefault();
      }), $p(o, this._domH, function(u, c) {
        return r._setHSLA(u);
      }), $p(o, this._domSL, function(u, c) {
        return r._setHSLA(null, u, 1 - c);
      }), this.settings.alpha && $p(o, this._domA, function(u, c) {
        return r._setHSLA(null, null, null, 1 - c);
      });
      var s = this._domEdit;
      a(s, "input", function(u) {
        r._setColor(this.value, { fromEditor: !0, failSilently: !0 });
      }), a(s, "focus", function(u) {
        var c = this;
        c.selectionStart === c.selectionEnd && c.select();
      }), this._ifPopup(function() {
        var u = function(f) {
          return n.closeHandler(f);
        };
        a(window, Bc, u), a(window, kp, u), Ip(o, i, ["Esc", "Escape"], u);
        var c = function(f) {
          n.__containedEvent = f.timeStamp;
        };
        a(i, Bc, c), a(i, kp, c), a(n._domCancel, "click", u);
      });
      var l = function(c) {
        n._ifPopup(function() {
          return n.closeHandler(c);
        }), n.onDone && n.onDone(n.colour);
      };
      a(this._domOkay, "click", l), Ip(o, i, ["Enter"], l);
    }
  }, {
    key: "_setPosition",
    value: function() {
      var n = this.settings.parent, r = this.domElement;
      n !== r.parentNode && n.appendChild(r), this._ifPopup(function(i) {
        getComputedStyle(n).position === "static" && (n.style.position = "relative");
        var o = i === !0 ? "popup_right" : "popup_" + i;
        ["popup_top", "popup_bottom", "popup_left", "popup_right"].forEach(function(a) {
          a === o ? r.classList.add(a) : r.classList.remove(a);
        }), r.classList.add(o);
      });
    }
  }, {
    key: "_setHSLA",
    value: function(n, r, i, o, a) {
      a = a || {};
      var s = this.colour, l = s.hsla;
      [n, r, i, o].forEach(function(u, c) {
        (u || u === 0) && (l[c] = u);
      }), s.hsla = l, this._updateUI(a), this.onChange && !a.silent && this.onChange(s);
    }
  }, {
    key: "_updateUI",
    value: function(n) {
      if (!this.domElement)
        return;
      n = n || {};
      var r = this.colour, i = r.hsla, o = "hsl(" + i[0] * pX + ", 100%, 50%)", a = r.hslString, s = r.hslaString, l = this._domH, u = this._domSL, c = this._domA, d = Ri(".picker_selector", l), f = Ri(".picker_selector", u), h = Ri(".picker_selector", c);
      function p(_, b, T) {
        b.style.left = T * 100 + "%";
      }
      function v(_, b, T) {
        b.style.top = T * 100 + "%";
      }
      p(l, d, i[0]), this._domSL.style.backgroundColor = this._domH.style.color = o, p(u, f, i[1]), v(u, f, 1 - i[2]), u.style.color = a, v(c, h, 1 - i[3]);
      var g = a, y = g.replace("hsl", "hsla").replace(")", ", 0)"), m = "linear-gradient(" + [g, y] + ")";
      if (this._domA.style.background = m + ", " + hX, !n.fromEditor) {
        var E = this.settings.editorFormat, w = this.settings.alpha, S = void 0;
        switch (E) {
          case "rgb":
            S = r.printRGB(w);
            break;
          case "hsl":
            S = r.printHSL(w);
            break;
          default:
            S = r.printHex(w);
        }
        this._domEdit.value = S;
      }
      this._domSample.style.color = s;
    }
  }, {
    key: "_ifPopup",
    value: function(n, r) {
      this.settings.parent && this.settings.popup ? n && n(this.settings.popup) : r && r();
    }
  }, {
    key: "_toggleDOM",
    value: function(n) {
      var r = this.domElement;
      if (!r)
        return !1;
      var i = n ? "" : "none", o = r.style.display !== i;
      return o && (r.style.display = i), o;
    }
  }]), e;
}();
{
  var Bp = document.createElement("style");
  Bp.textContent = '.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:"";display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:"";display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px #1e90ff}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:#f5f5f5;background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:#fff}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid #fff;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255, 255, 255, 0) 50%),linear-gradient(0deg, black, rgba(0, 0, 0, 0) 50%),linear-gradient(90deg, #808080, rgba(128, 128, 128, 0))}.picker_alpha,.picker_sample{position:relative;background:linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0/2em 2em,linear-gradient(45deg, lightgrey 25%, white 25%, white 75%, lightgrey 75%) 1em 1em/2em 2em;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:"";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:"";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}', document.documentElement.firstElementChild.appendChild(Bp), J2.StyleElement = Bp;
}
var Q2 = { exports: {} };
(function(e, t) {
  (function(n, r) {
    e.exports = n();
  })(function() {
    var n = "object", r = "function", i = "undefined", o = [
      "startContainer",
      "startOffset",
      "endContainer",
      "endOffset",
      "collapsed",
      "commonAncestorContainer"
    ], a = [
      "setStart",
      "setStartBefore",
      "setStartAfter",
      "setEnd",
      "setEndBefore",
      "setEndAfter",
      "collapse",
      "selectNode",
      "selectNodeContents",
      "compareBoundaryPoints",
      "deleteContents",
      "extractContents",
      "cloneContents",
      "insertNode",
      "surroundContents",
      "cloneRange",
      "toString",
      "detach"
    ], s = ["boundingHeight", "boundingLeft", "boundingTop", "boundingWidth", "htmlText", "text"], l = [
      "collapse",
      "compareEndPoints",
      "duplicate",
      "moveToElementText",
      "parentElement",
      "select",
      "setEndPoint",
      "getBoundingClientRect"
    ];
    function u($, re) {
      var ee = typeof $[re];
      return ee == r || !!(ee == n && $[re]) || ee == "unknown";
    }
    function c($, re) {
      return !!(typeof $[re] == n && $[re]);
    }
    function d($, re) {
      return typeof $[re] != i;
    }
    function f($) {
      return function(re, ee) {
        for (var _e = ee.length; _e--; )
          if (!$(re, ee[_e]))
            return !1;
        return !0;
      };
    }
    var h = f(u), p = f(c), v = f(d);
    function g($) {
      return $ && h($, l) && v($, s);
    }
    function y($) {
      return c($, "body") ? $.body : $.getElementsByTagName("body")[0];
    }
    var m = [].forEach ? function($, re) {
      $.forEach(re);
    } : function($, re) {
      for (var ee = 0, _e = $.length; ee < _e; ++ee)
        re($[ee], ee);
    }, E = {}, w = typeof window != i && typeof document != i, S = {
      isHostMethod: u,
      isHostObject: c,
      isHostProperty: d,
      areHostMethods: h,
      areHostObjects: p,
      areHostProperties: v,
      isTextRange: g,
      getBody: y,
      forEach: m
    }, _ = {
      version: "1.3.2",
      initialized: !1,
      isBrowser: w,
      supported: !0,
      util: S,
      features: {},
      modules: E,
      config: {
        alertOnFail: !1,
        alertOnWarn: !1,
        preferTextRange: !1,
        autoInitialize: typeof rangyAutoInitialize == i ? !0 : rangyAutoInitialize
      }
    };
    function b($) {
      typeof console != i && u(console, "log") && console.log($);
    }
    function T($, re) {
      w && re ? alert($) : b($);
    }
    function R($) {
      _.initialized = !0, _.supported = !1, T("Rangy is not supported in this environment. Reason: " + $, _.config.alertOnFail);
    }
    _.fail = R;
    function B($) {
      T("Rangy warning: " + $, _.config.alertOnWarn);
    }
    _.warn = B;
    var K;
    ({}).hasOwnProperty ? (S.extend = K = function($, re, ee) {
      var _e, xe;
      for (var ye in re)
        ye === "__proto__" || ye === "constructor" || ye === "prototype" || re.hasOwnProperty(ye) && (_e = $[ye], xe = re[ye], ee && _e !== null && typeof _e == "object" && xe !== null && typeof xe == "object" && K(_e, xe, !0), $[ye] = xe);
      return re.hasOwnProperty("toString") && ($.toString = re.toString), $;
    }, S.createOptions = function($, re) {
      var ee = {};
      return K(ee, re), $ && K(ee, $), ee;
    }) : R("hasOwnProperty not supported"), w || R("Rangy can only run in a browser"), function() {
      var $;
      if (w) {
        var re = document.createElement("div");
        re.appendChild(document.createElement("span"));
        var ee = [].slice;
        try {
          ee.call(re.childNodes, 0)[0].nodeType == 1 && ($ = function(_e) {
            return ee.call(_e, 0);
          });
        } catch {
        }
      }
      $ || ($ = function(_e) {
        for (var xe = [], ye = 0, Ge = _e.length; ye < Ge; ++ye)
          xe[ye] = _e[ye];
        return xe;
      }), S.toArray = $;
    }();
    var ae;
    w && (u(document, "addEventListener") ? ae = function($, re, ee) {
      $.addEventListener(re, ee, !1);
    } : u(document, "attachEvent") ? ae = function($, re, ee) {
      $.attachEvent("on" + re, ee);
    } : R("Document does not have required addEventListener or attachEvent method"), S.addListener = ae);
    var x = [];
    function P($) {
      return $.message || $.description || String($);
    }
    function L() {
      if (!(!w || _.initialized)) {
        var $, re = !1, ee = !1;
        u(document, "createRange") && ($ = document.createRange(), h($, a) && v($, o) && (re = !0));
        var _e = y(document);
        if (!_e || _e.nodeName.toLowerCase() != "body") {
          R("No body element found");
          return;
        }
        if (_e && u(_e, "createTextRange") && ($ = _e.createTextRange(), g($) && (ee = !0)), !re && !ee) {
          R("Neither Range nor TextRange are available");
          return;
        }
        _.initialized = !0, _.features = {
          implementsDomRange: re,
          implementsTextRange: ee
        };
        var xe, ye;
        for (var Ge in E)
          (xe = E[Ge]) instanceof se && xe.init(xe, _);
        for (var Ee = 0, ce = x.length; Ee < ce; ++Ee)
          try {
            x[Ee](_);
          } catch (Te) {
            ye = "Rangy init listener threw an exception. Continuing. Detail: " + P(Te), b(ye);
          }
      }
    }
    function k($, re, ee) {
      ee && ($ += " in module " + ee.name), _.warn("DEPRECATED: " + $ + " is deprecated. Please use " + re + " instead.");
    }
    function J($, re, ee, _e) {
      $[re] = function() {
        return k(re, ee, _e), $[ee].apply($, S.toArray(arguments));
      };
    }
    S.deprecationNotice = k, S.createAliasForDeprecatedMethod = J, _.init = L, _.addInitListener = function($) {
      _.initialized ? $(_) : x.push($);
    };
    var de = [];
    _.addShimListener = function($) {
      de.push($);
    };
    function Ne($) {
      $ = $ || window, L();
      for (var re = 0, ee = de.length; re < ee; ++re)
        de[re]($);
    }
    w && (_.shim = _.createMissingNativeApi = Ne, J(_, "createMissingNativeApi", "shim"));
    function se($, re, ee) {
      this.name = $, this.dependencies = re, this.initialized = !1, this.supported = !1, this.initializer = ee;
    }
    se.prototype = {
      init: function() {
        for (var $ = this.dependencies || [], re = 0, ee = $.length, _e, xe; re < ee; ++re) {
          if (xe = $[re], _e = E[xe], !_e || !(_e instanceof se))
            throw new Error("required module '" + xe + "' not found");
          if (_e.init(), !_e.supported)
            throw new Error("required module '" + xe + "' not supported");
        }
        this.initializer(this);
      },
      fail: function($) {
        throw this.initialized = !0, this.supported = !1, new Error($);
      },
      warn: function($) {
        _.warn("Module " + this.name + ": " + $);
      },
      deprecationNotice: function($, re) {
        _.warn("DEPRECATED: " + $ + " in module " + this.name + " is deprecated. Please use " + re + " instead");
      },
      createError: function($) {
        return new Error("Error in Rangy " + this.name + " module: " + $);
      }
    };
    function G($, re, ee) {
      var _e = new se($, re, function(xe) {
        if (!xe.initialized) {
          xe.initialized = !0;
          try {
            ee(_, xe), xe.supported = !0;
          } catch (Ge) {
            var ye = "Module '" + $ + "' failed to load: " + P(Ge);
            b(ye), Ge.stack && b(Ge.stack);
          }
        }
      });
      return E[$] = _e, _e;
    }
    _.createModule = function($) {
      var re, ee;
      arguments.length == 2 ? (re = arguments[1], ee = []) : (re = arguments[2], ee = arguments[1]);
      var _e = G($, ee, re);
      _.initialized && _.supported && _e.init();
    }, _.createCoreModule = function($, re, ee) {
      G($, re, ee);
    };
    function be() {
    }
    _.RangePrototype = be, _.rangePrototype = new be();
    function Oe() {
    }
    _.selectionPrototype = new Oe(), _.createCoreModule("DomUtil", [], function($, re) {
      var ee = "undefined", _e = $.util, xe = _e.getBody;
      _e.areHostMethods(document, ["createDocumentFragment", "createElement", "createTextNode"]) || re.fail("document missing a Node creation method"), _e.isHostMethod(document, "getElementsByTagName") || re.fail("document missing getElementsByTagName method");
      var ye = document.createElement("div");
      _e.areHostMethods(ye, ["insertBefore", "appendChild", "cloneNode"]) || re.fail("Incomplete Element implementation"), _e.isHostProperty(ye, "innerHTML") || re.fail("Element is missing innerHTML property");
      var Ge = document.createTextNode("test");
      _e.areHostMethods(Ge, ["splitText", "deleteData", "insertData", "appendData", "cloneNode"]) || re.fail("Incomplete Text Node implementation");
      var Ee = (
        /*Array.prototype.indexOf ?
        function(arr, val) {
            return arr.indexOf(val) > -1;
        }:*/
        function(ne, De) {
          for (var dt = ne.length; dt--; )
            if (ne[dt] === De)
              return !0;
          return !1;
        }
      );
      function ce(ne) {
        var De;
        return typeof ne.namespaceURI == ee || (De = ne.namespaceURI) === null || De == "http://www.w3.org/1999/xhtml";
      }
      function Te(ne) {
        var De = ne.parentNode;
        return De.nodeType == 1 ? De : null;
      }
      function Le(ne) {
        for (var De = 0; ne = ne.previousSibling; )
          ++De;
        return De;
      }
      function Ct(ne) {
        switch (ne.nodeType) {
          case 7:
          case 10:
            return 0;
          case 3:
          case 8:
            return ne.length;
          default:
            return ne.childNodes.length;
        }
      }
      function bt(ne, De) {
        var dt = [], Ze;
        for (Ze = ne; Ze; Ze = Ze.parentNode)
          dt.push(Ze);
        for (Ze = De; Ze; Ze = Ze.parentNode)
          if (Ee(dt, Ze))
            return Ze;
        return null;
      }
      function M(ne, De, dt) {
        for (var Ze = dt ? De : De.parentNode; Ze; ) {
          if (Ze === ne)
            return !0;
          Ze = Ze.parentNode;
        }
        return !1;
      }
      function D(ne, De) {
        return M(ne, De, !0);
      }
      function I(ne, De, dt) {
        for (var Ze, nn = dt ? ne : ne.parentNode; nn; ) {
          if (Ze = nn.parentNode, Ze === De)
            return nn;
          nn = Ze;
        }
        return null;
      }
      function ue(ne) {
        var De = ne.nodeType;
        return De == 3 || De == 4 || De == 8;
      }
      function j(ne) {
        if (!ne)
          return !1;
        var De = ne.nodeType;
        return De == 3 || De == 8;
      }
      function ge(ne, De) {
        var dt = De.nextSibling, Ze = De.parentNode;
        return dt ? Ze.insertBefore(ne, dt) : Ze.appendChild(ne), ne;
      }
      function pe(ne, De, dt) {
        var Ze = ne.cloneNode(!1);
        if (Ze.deleteData(0, De), ne.deleteData(De, ne.length - De), ge(Ze, ne), dt)
          for (var nn = 0, zt; zt = dt[nn++]; )
            zt.node == ne && zt.offset > De ? (zt.node = Ze, zt.offset -= De) : zt.node == ne.parentNode && zt.offset > Le(ne) && ++zt.offset;
        return Ze;
      }
      function we(ne) {
        if (ne.nodeType == 9)
          return ne;
        if (typeof ne.ownerDocument != ee)
          return ne.ownerDocument;
        if (typeof ne.document != ee)
          return ne.document;
        if (ne.parentNode)
          return we(ne.parentNode);
        throw re.createError("getDocument: no document found for node");
      }
      function U(ne) {
        var De = we(ne);
        if (typeof De.defaultView != ee)
          return De.defaultView;
        if (typeof De.parentWindow != ee)
          return De.parentWindow;
        throw re.createError("Cannot get a window object for node");
      }
      function z(ne) {
        if (typeof ne.contentDocument != ee)
          return ne.contentDocument;
        if (typeof ne.contentWindow != ee)
          return ne.contentWindow.document;
        throw re.createError("getIframeDocument: No Document object found for iframe element");
      }
      function W(ne) {
        if (typeof ne.contentWindow != ee)
          return ne.contentWindow;
        if (typeof ne.contentDocument != ee)
          return ne.contentDocument.defaultView;
        throw re.createError("getIframeWindow: No Window object found for iframe element");
      }
      function Ce(ne) {
        return ne && _e.isHostMethod(ne, "setTimeout") && _e.isHostObject(ne, "document");
      }
      function et(ne, De, dt) {
        var Ze;
        if (ne ? _e.isHostProperty(ne, "nodeType") ? Ze = ne.nodeType == 1 && ne.tagName.toLowerCase() == "iframe" ? z(ne) : we(ne) : Ce(ne) && (Ze = ne.document) : Ze = document, !Ze)
          throw De.createError(dt + "(): Parameter must be a Window object or DOM node");
        return Ze;
      }
      function qe(ne) {
        for (var De; De = ne.parentNode; )
          ne = De;
        return ne;
      }
      function ln(ne, De, dt, Ze) {
        var nn, zt, ri, yr, Gn;
        if (ne == dt)
          return De === Ze ? 0 : De < Ze ? -1 : 1;
        if (nn = I(dt, ne, !0))
          return De <= Le(nn) ? -1 : 1;
        if (nn = I(ne, dt, !0))
          return Le(nn) < Ze ? -1 : 1;
        if (zt = bt(ne, dt), !zt)
          throw new Error("comparePoints error: nodes have no common ancestor");
        if (ri = ne === zt ? zt : I(ne, zt, !0), yr = dt === zt ? zt : I(dt, zt, !0), ri === yr)
          throw re.createError("comparePoints got to case 4 and childA and childB are the same!");
        for (Gn = zt.firstChild; Gn; ) {
          if (Gn === ri)
            return -1;
          if (Gn === yr)
            return 1;
          Gn = Gn.nextSibling;
        }
      }
      var ke = !1;
      function Ue(ne) {
        var De;
        try {
          return De = ne.parentNode, !1;
        } catch {
          return !0;
        }
      }
      (function() {
        var ne = document.createElement("b");
        ne.innerHTML = "1";
        var De = ne.firstChild;
        ne.innerHTML = "<br />", ke = Ue(De), $.features.crashyTextNodes = ke;
      })();
      function Dt(ne) {
        if (!ne)
          return "[No node]";
        if (ke && Ue(ne))
          return "[Broken node]";
        if (ue(ne))
          return '"' + ne.data + '"';
        if (ne.nodeType == 1) {
          var De = ne.id ? ' id="' + ne.id + '"' : "";
          return "<" + ne.nodeName + De + ">[index:" + Le(ne) + ",length:" + ne.childNodes.length + "][" + (ne.innerHTML || "[innerHTML not supported]").slice(0, 25) + "]";
        }
        return ne.nodeName;
      }
      function Xt(ne) {
        for (var De = we(ne).createDocumentFragment(), dt; dt = ne.firstChild; )
          De.appendChild(dt);
        return De;
      }
      var gn;
      typeof window.getComputedStyle != ee ? gn = function(ne, De) {
        return U(ne).getComputedStyle(ne, null)[De];
      } : typeof document.documentElement.currentStyle != ee ? gn = function(ne, De) {
        return ne.currentStyle ? ne.currentStyle[De] : "";
      } : re.fail("No means of obtaining computed style properties found");
      function gr(ne, De, dt) {
        var Ze = xe(ne), nn = ne.createElement("div");
        nn.contentEditable = "" + !!dt, De && (nn.innerHTML = De);
        var zt = Ze.firstChild;
        return zt ? Ze.insertBefore(nn, zt) : Ze.appendChild(nn), nn;
      }
      function Wn(ne) {
        return ne.parentNode.removeChild(ne);
      }
      function Sn(ne) {
        this.root = ne, this._next = ne;
      }
      Sn.prototype = {
        _current: null,
        hasNext: function() {
          return !!this._next;
        },
        next: function() {
          var ne = this._current = this._next, De, dt;
          if (this._current)
            if (De = ne.firstChild, De)
              this._next = De;
            else {
              for (dt = null; ne !== this.root && !(dt = ne.nextSibling); )
                ne = ne.parentNode;
              this._next = dt;
            }
          return this._current;
        },
        detach: function() {
          this._current = this._next = this.root = null;
        }
      };
      function Cn(ne) {
        return new Sn(ne);
      }
      function kn(ne, De) {
        this.node = ne, this.offset = De;
      }
      kn.prototype = {
        equals: function(ne) {
          return !!ne && this.node === ne.node && this.offset == ne.offset;
        },
        inspect: function() {
          return "[DomPosition(" + Dt(this.node) + ":" + this.offset + ")]";
        },
        toString: function() {
          return this.inspect();
        }
      };
      function or(ne) {
        this.code = this[ne], this.codeName = ne, this.message = "DOMException: " + this.codeName;
      }
      or.prototype = {
        INDEX_SIZE_ERR: 1,
        HIERARCHY_REQUEST_ERR: 3,
        WRONG_DOCUMENT_ERR: 4,
        NO_MODIFICATION_ALLOWED_ERR: 7,
        NOT_FOUND_ERR: 8,
        NOT_SUPPORTED_ERR: 9,
        INVALID_STATE_ERR: 11,
        INVALID_NODE_TYPE_ERR: 24
      }, or.prototype.toString = function() {
        return this.message;
      }, $.dom = {
        arrayContains: Ee,
        isHtmlNamespace: ce,
        parentElement: Te,
        getNodeIndex: Le,
        getNodeLength: Ct,
        getCommonAncestor: bt,
        isAncestorOf: M,
        isOrIsAncestorOf: D,
        getClosestAncestorIn: I,
        isCharacterDataNode: ue,
        isTextOrCommentNode: j,
        insertAfter: ge,
        splitDataNode: pe,
        getDocument: we,
        getWindow: U,
        getIframeWindow: W,
        getIframeDocument: z,
        getBody: xe,
        isWindow: Ce,
        getContentDocument: et,
        getRootContainer: qe,
        comparePoints: ln,
        isBrokenNode: Ue,
        inspectNode: Dt,
        getComputedStyleProperty: gn,
        createTestElement: gr,
        removeNode: Wn,
        fragmentFromNodeChildren: Xt,
        createIterator: Cn,
        DomPosition: kn
      }, $.DOMException = or;
    }), _.createCoreModule("DomRange", ["DomUtil"], function($, re) {
      var ee = $.dom, _e = $.util, xe = ee.DomPosition, ye = $.DOMException, Ge = ee.isCharacterDataNode, Ee = ee.getNodeIndex, ce = ee.isOrIsAncestorOf, Te = ee.getDocument, Le = ee.comparePoints, Ct = ee.splitDataNode, bt = ee.getClosestAncestorIn, M = ee.getNodeLength, D = ee.arrayContains, I = ee.getRootContainer, ue = $.features.crashyTextNodes, j = ee.removeNode;
      function ge(N, H) {
        return N.nodeType != 3 && (ce(N, H.startContainer) || ce(N, H.endContainer));
      }
      function pe(N) {
        return N.document || Te(N.startContainer);
      }
      function we(N) {
        return I(N.startContainer);
      }
      function U(N) {
        return new xe(N.parentNode, Ee(N));
      }
      function z(N) {
        return new xe(N.parentNode, Ee(N) + 1);
      }
      function W(N, H, ve) {
        var Pe = N.nodeType == 11 ? N.firstChild : N;
        return Ge(H) ? ve == H.length ? ee.insertAfter(N, H) : H.parentNode.insertBefore(N, ve == 0 ? H : Ct(H, ve)) : ve >= H.childNodes.length ? H.appendChild(N) : H.insertBefore(N, H.childNodes[ve]), Pe;
      }
      function Ce(N, H, ve) {
        if (Ht(N), Ht(H), pe(H) != pe(N))
          throw new ye("WRONG_DOCUMENT_ERR");
        var Pe = Le(N.startContainer, N.startOffset, H.endContainer, H.endOffset), Ye = Le(N.endContainer, N.endOffset, H.startContainer, H.startOffset);
        return ve ? Pe <= 0 && Ye >= 0 : Pe < 0 && Ye > 0;
      }
      function et(N) {
        for (var H, ve, Pe = pe(N.range).createDocumentFragment(), Ye; ve = N.next(); ) {
          if (H = N.isPartiallySelectedSubtree(), ve = ve.cloneNode(!H), H && (Ye = N.getSubtreeIterator(), ve.appendChild(et(Ye)), Ye.detach()), ve.nodeType == 10)
            throw new ye("HIERARCHY_REQUEST_ERR");
          Pe.appendChild(ve);
        }
        return Pe;
      }
      function qe(N, H, ve) {
        var Pe, Ye;
        ve = ve || { stop: !1 };
        for (var Nt, Se; Nt = N.next(); )
          if (N.isPartiallySelectedSubtree()) {
            if (H(Nt) === !1) {
              ve.stop = !0;
              return;
            } else if (Se = N.getSubtreeIterator(), qe(Se, H, ve), Se.detach(), ve.stop)
              return;
          } else
            for (Pe = ee.createIterator(Nt); Ye = Pe.next(); )
              if (H(Ye) === !1) {
                ve.stop = !0;
                return;
              }
      }
      function ln(N) {
        for (var H; N.next(); )
          N.isPartiallySelectedSubtree() ? (H = N.getSubtreeIterator(), ln(H), H.detach()) : N.remove();
      }
      function ke(N) {
        for (var H, ve = pe(N.range).createDocumentFragment(), Pe; H = N.next(); ) {
          if (N.isPartiallySelectedSubtree() ? (H = H.cloneNode(!1), Pe = N.getSubtreeIterator(), H.appendChild(ke(Pe)), Pe.detach()) : N.remove(), H.nodeType == 10)
            throw new ye("HIERARCHY_REQUEST_ERR");
          ve.appendChild(H);
        }
        return ve;
      }
      function Ue(N, H, ve) {
        var Pe = !!(H && H.length), Ye, Nt = !!ve;
        Pe && (Ye = new RegExp("^(" + H.join("|") + ")$"));
        var Se = [];
        return qe(new Xt(N, !1), function(Xe) {
          if (!(Pe && !Ye.test(Xe.nodeType)) && !(Nt && !ve(Xe))) {
            var tt = N.startContainer;
            if (!(Xe == tt && Ge(tt) && N.startOffset == tt.length)) {
              var xt = N.endContainer;
              Xe == xt && Ge(xt) && N.endOffset == 0 || Se.push(Xe);
            }
          }
        }), Se;
      }
      function Dt(N) {
        var H = typeof N.getName > "u" ? "Range" : N.getName();
        return "[" + H + "(" + ee.inspectNode(N.startContainer) + ":" + N.startOffset + ", " + ee.inspectNode(N.endContainer) + ":" + N.endOffset + ")]";
      }
      function Xt(N, H) {
        if (this.range = N, this.clonePartiallySelectedTextNodes = H, !N.collapsed) {
          this.sc = N.startContainer, this.so = N.startOffset, this.ec = N.endContainer, this.eo = N.endOffset;
          var ve = N.commonAncestorContainer;
          this.sc === this.ec && Ge(this.sc) ? (this.isSingleCharacterDataNode = !0, this._first = this._last = this._next = this.sc) : (this._first = this._next = this.sc === ve && !Ge(this.sc) ? this.sc.childNodes[this.so] : bt(this.sc, ve, !0), this._last = this.ec === ve && !Ge(this.ec) ? this.ec.childNodes[this.eo - 1] : bt(this.ec, ve, !0));
        }
      }
      Xt.prototype = {
        _current: null,
        _next: null,
        _first: null,
        _last: null,
        isSingleCharacterDataNode: !1,
        reset: function() {
          this._current = null, this._next = this._first;
        },
        hasNext: function() {
          return !!this._next;
        },
        next: function() {
          var N = this._current = this._next;
          return N && (this._next = N !== this._last ? N.nextSibling : null, Ge(N) && this.clonePartiallySelectedTextNodes && (N === this.ec && (N = N.cloneNode(!0)).deleteData(this.eo, N.length - this.eo), this._current === this.sc && (N = N.cloneNode(!0)).deleteData(0, this.so))), N;
        },
        remove: function() {
          var N = this._current, H, ve;
          Ge(N) && (N === this.sc || N === this.ec) ? (H = N === this.sc ? this.so : 0, ve = N === this.ec ? this.eo : N.length, H != ve && N.deleteData(H, ve - H)) : N.parentNode && j(N);
        },
        // Checks if the current node is partially selected
        isPartiallySelectedSubtree: function() {
          var N = this._current;
          return ge(N, this.range);
        },
        getSubtreeIterator: function() {
          var N;
          if (this.isSingleCharacterDataNode)
            N = this.range.cloneRange(), N.collapse(!1);
          else {
            N = new yn(pe(this.range));
            var H = this._current, ve = H, Pe = 0, Ye = H, Nt = M(H);
            ce(H, this.sc) && (ve = this.sc, Pe = this.so), ce(H, this.ec) && (Ye = this.ec, Nt = this.eo), Rt(N, ve, Pe, Ye, Nt);
          }
          return new Xt(N, this.clonePartiallySelectedTextNodes);
        },
        detach: function() {
          this.range = this._current = this._next = this._first = this._last = this.sc = this.so = this.ec = this.eo = null;
        }
      };
      var gn = [1, 3, 4, 5, 7, 8, 10], gr = [2, 9, 11], Wn = [5, 6, 10, 12], Sn = [1, 3, 4, 5, 7, 8, 10, 11], Cn = [1, 3, 4, 5, 7, 8];
      function kn(N) {
        return function(H, ve) {
          for (var Pe, Ye = ve ? H : H.parentNode; Ye; ) {
            if (Pe = Ye.nodeType, D(N, Pe))
              return Ye;
            Ye = Ye.parentNode;
          }
          return null;
        };
      }
      var or = kn([9, 11]), ne = kn(Wn), De = kn([6, 10, 12]), dt = kn([1]);
      function Ze(N, H) {
        if (De(N, H))
          throw new ye("INVALID_NODE_TYPE_ERR");
      }
      function nn(N, H) {
        if (!D(H, N.nodeType))
          throw new ye("INVALID_NODE_TYPE_ERR");
      }
      function zt(N, H) {
        if (H < 0 || H > (Ge(N) ? N.length : N.childNodes.length))
          throw new ye("INDEX_SIZE_ERR");
      }
      function ri(N, H) {
        if (or(N, !0) !== or(H, !0))
          throw new ye("WRONG_DOCUMENT_ERR");
      }
      function yr(N) {
        if (ne(N, !0))
          throw new ye("NO_MODIFICATION_ALLOWED_ERR");
      }
      function Gn(N, H) {
        if (!N)
          throw new ye(H);
      }
      function gl(N, H) {
        return H <= (Ge(N) ? N.length : N.childNodes.length);
      }
      function ra(N) {
        return !!N.startContainer && !!N.endContainer && !(ue && (ee.isBrokenNode(N.startContainer) || ee.isBrokenNode(N.endContainer))) && I(N.startContainer) == I(N.endContainer) && gl(N.startContainer, N.startOffset) && gl(N.endContainer, N.endOffset);
      }
      function Ht(N) {
        if (!ra(N))
          throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: (" + N.inspect() + ")");
      }
      var yl = document.createElement("style"), to = !1;
      try {
        yl.innerHTML = "<b>x</b>", to = yl.firstChild.nodeType == 3;
      } catch {
      }
      $.features.htmlParsingConforms = to;
      var ml = to ? (
        // Implementation as per HTML parsing spec, trusting in the browser's implementation of innerHTML. See
        // discussion and base code for this implementation at issue 67.
        // Spec: http://html5.org/specs/dom-parsing.html#extensions-to-the-range-interface
        // Thanks to Aleks Williams.
        function(N) {
          var H = this.startContainer, ve = Te(H);
          if (!H)
            throw new ye("INVALID_STATE_ERR");
          var Pe = null;
          return H.nodeType == 1 ? Pe = H : Ge(H) && (Pe = ee.parentElement(H)), Pe === null || Pe.nodeName == "HTML" && ee.isHtmlNamespace(Te(Pe).documentElement) && ee.isHtmlNamespace(Pe) ? Pe = ve.createElement("body") : Pe = Pe.cloneNode(!1), Pe.innerHTML = N, ee.fragmentFromNodeChildren(Pe);
        }
      ) : (
        // In this case, innerHTML cannot be trusted, so fall back to a simpler, non-conformant implementation that
        // previous versions of Rangy used (with the exception of using a body element rather than a div)
        function(N) {
          var H = pe(this), ve = H.createElement("body");
          return ve.innerHTML = N, ee.fragmentFromNodeChildren(ve);
        }
      );
      function qa(N, H) {
        Ht(N);
        var ve = N.startContainer, Pe = N.startOffset, Ye = N.endContainer, Nt = N.endOffset, Se = ve === Ye;
        Ge(Ye) && Nt > 0 && Nt < Ye.length && Ct(Ye, Nt, H), Ge(ve) && Pe > 0 && Pe < ve.length && (ve = Ct(ve, Pe, H), Se ? (Nt -= Pe, Ye = ve) : Ye == ve.parentNode && Nt >= Ee(ve) && Nt++, Pe = 0), N.setStartAndEnd(ve, Pe, Ye, Nt);
      }
      function pt(N) {
        Ht(N);
        var H = N.commonAncestorContainer.parentNode.cloneNode(!1);
        return H.appendChild(N.cloneContents()), H.innerHTML;
      }
      var Za = [
        "startContainer",
        "startOffset",
        "endContainer",
        "endOffset",
        "collapsed",
        "commonAncestorContainer"
      ], Ja = 0, ia = 1, ac = 2, wo = 3, oa = 0, _l = 1, bl = 2, Qa = 3;
      _e.extend($.rangePrototype, {
        compareBoundaryPoints: function(N, H) {
          Ht(this), ri(this.startContainer, H.startContainer);
          var ve, Pe, Ye, Nt, Se = N == wo || N == Ja ? "start" : "end", Xe = N == ia || N == Ja ? "start" : "end";
          return ve = this[Se + "Container"], Pe = this[Se + "Offset"], Ye = H[Xe + "Container"], Nt = H[Xe + "Offset"], Le(ve, Pe, Ye, Nt);
        },
        insertNode: function(N) {
          if (Ht(this), nn(N, Sn), yr(this.startContainer), ce(N, this.startContainer))
            throw new ye("HIERARCHY_REQUEST_ERR");
          var H = W(N, this.startContainer, this.startOffset);
          this.setStartBefore(H);
        },
        cloneContents: function() {
          Ht(this);
          var N, H;
          if (this.collapsed)
            return pe(this).createDocumentFragment();
          if (this.startContainer === this.endContainer && Ge(this.startContainer))
            return N = this.startContainer.cloneNode(!0), N.data = N.data.slice(this.startOffset, this.endOffset), H = pe(this).createDocumentFragment(), H.appendChild(N), H;
          var ve = new Xt(this, !0);
          return N = et(ve), ve.detach(), N;
        },
        canSurroundContents: function() {
          Ht(this), yr(this.startContainer), yr(this.endContainer);
          var N = new Xt(this, !0), H = N._first && ge(N._first, this) || N._last && ge(N._last, this);
          return N.detach(), !H;
        },
        surroundContents: function(N) {
          if (nn(N, Cn), !this.canSurroundContents())
            throw new ye("INVALID_STATE_ERR");
          var H = this.extractContents();
          if (N.hasChildNodes())
            for (; N.lastChild; )
              N.removeChild(N.lastChild);
          W(N, this.startContainer, this.startOffset), N.appendChild(H), this.selectNode(N);
        },
        cloneRange: function() {
          Ht(this);
          for (var N = new yn(pe(this)), H = Za.length, ve; H--; )
            ve = Za[H], N[ve] = this[ve];
          return N;
        },
        toString: function() {
          Ht(this);
          var N = this.startContainer;
          if (N === this.endContainer && Ge(N))
            return N.nodeType == 3 || N.nodeType == 4 ? N.data.slice(this.startOffset, this.endOffset) : "";
          var H = [], ve = new Xt(this, !0);
          return qe(ve, function(Pe) {
            (Pe.nodeType == 3 || Pe.nodeType == 4) && H.push(Pe.data);
          }), ve.detach(), H.join("");
        },
        // The methods below are all non-standard. The following batch were introduced by Mozilla but have since
        // been removed from Mozilla.
        compareNode: function(N) {
          Ht(this);
          var H = N.parentNode, ve = Ee(N);
          if (!H)
            throw new ye("NOT_FOUND_ERR");
          var Pe = this.comparePoint(H, ve), Ye = this.comparePoint(H, ve + 1);
          return Pe < 0 ? Ye > 0 ? bl : oa : Ye > 0 ? _l : Qa;
        },
        comparePoint: function(N, H) {
          return Ht(this), Gn(N, "HIERARCHY_REQUEST_ERR"), ri(N, this.startContainer), Le(N, H, this.startContainer, this.startOffset) < 0 ? -1 : Le(N, H, this.endContainer, this.endOffset) > 0 ? 1 : 0;
        },
        createContextualFragment: ml,
        toHtml: function() {
          return pt(this);
        },
        // touchingIsIntersecting determines whether this method considers a node that borders a range intersects
        // with it (as in WebKit) or not (as in Gecko pre-1.9, and the default)
        intersectsNode: function(N, H) {
          if (Ht(this), I(N) != we(this))
            return !1;
          var ve = N.parentNode, Pe = Ee(N);
          if (!ve)
            return !0;
          var Ye = Le(ve, Pe, this.endContainer, this.endOffset), Nt = Le(ve, Pe + 1, this.startContainer, this.startOffset);
          return H ? Ye <= 0 && Nt >= 0 : Ye < 0 && Nt > 0;
        },
        isPointInRange: function(N, H) {
          return Ht(this), Gn(N, "HIERARCHY_REQUEST_ERR"), ri(N, this.startContainer), Le(N, H, this.startContainer, this.startOffset) >= 0 && Le(N, H, this.endContainer, this.endOffset) <= 0;
        },
        // The methods below are non-standard and invented by me.
        // Sharing a boundary start-to-end or end-to-start does not count as intersection.
        intersectsRange: function(N) {
          return Ce(this, N, !1);
        },
        // Sharing a boundary start-to-end or end-to-start does count as intersection.
        intersectsOrTouchesRange: function(N) {
          return Ce(this, N, !0);
        },
        intersection: function(N) {
          if (this.intersectsRange(N)) {
            var H = Le(this.startContainer, this.startOffset, N.startContainer, N.startOffset), ve = Le(this.endContainer, this.endOffset, N.endContainer, N.endOffset), Pe = this.cloneRange();
            return H == -1 && Pe.setStart(N.startContainer, N.startOffset), ve == 1 && Pe.setEnd(N.endContainer, N.endOffset), Pe;
          }
          return null;
        },
        union: function(N) {
          if (this.intersectsOrTouchesRange(N)) {
            var H = this.cloneRange();
            return Le(N.startContainer, N.startOffset, this.startContainer, this.startOffset) == -1 && H.setStart(N.startContainer, N.startOffset), Le(N.endContainer, N.endOffset, this.endContainer, this.endOffset) == 1 && H.setEnd(N.endContainer, N.endOffset), H;
          } else
            throw new ye("Ranges do not intersect");
        },
        containsNode: function(N, H) {
          return H ? this.intersectsNode(N, !1) : this.compareNode(N) == Qa;
        },
        containsNodeContents: function(N) {
          return this.comparePoint(N, 0) >= 0 && this.comparePoint(N, M(N)) <= 0;
        },
        containsRange: function(N) {
          var H = this.intersection(N);
          return H !== null && N.equals(H);
        },
        containsNodeText: function(N) {
          var H = this.cloneRange();
          H.selectNode(N);
          var ve = H.getNodes([3]);
          if (ve.length > 0) {
            H.setStart(ve[0], 0);
            var Pe = ve.pop();
            return H.setEnd(Pe, Pe.length), this.containsRange(H);
          } else
            return this.containsNodeContents(N);
        },
        getNodes: function(N, H) {
          return Ht(this), Ue(this, N, H);
        },
        getDocument: function() {
          return pe(this);
        },
        collapseBefore: function(N) {
          this.setEndBefore(N), this.collapse(!1);
        },
        collapseAfter: function(N) {
          this.setStartAfter(N), this.collapse(!0);
        },
        getBookmark: function(N) {
          var H = pe(this), ve = $.createRange(H);
          N = N || ee.getBody(H), ve.selectNodeContents(N);
          var Pe = this.intersection(ve), Ye = 0, Nt = 0;
          return Pe && (ve.setEnd(Pe.startContainer, Pe.startOffset), Ye = ve.toString().length, Nt = Ye + Pe.toString().length), {
            start: Ye,
            end: Nt,
            containerNode: N
          };
        },
        moveToBookmark: function(N) {
          var H = N.containerNode, ve = 0;
          this.setStart(H, 0), this.collapse(!0);
          for (var Pe = [H], Ye, Nt = !1, Se = !1, Xe, tt, xt; !Se && (Ye = Pe.pop()); )
            if (Ye.nodeType == 3)
              Xe = ve + Ye.length, !Nt && N.start >= ve && N.start <= Xe && (this.setStart(Ye, N.start - ve), Nt = !0), Nt && N.end >= ve && N.end <= Xe && (this.setEnd(Ye, N.end - ve), Se = !0), ve = Xe;
            else
              for (xt = Ye.childNodes, tt = xt.length; tt--; )
                Pe.push(xt[tt]);
        },
        getName: function() {
          return "DomRange";
        },
        equals: function(N) {
          return yn.rangesEqual(this, N);
        },
        isValid: function() {
          return ra(this);
        },
        inspect: function() {
          return Dt(this);
        },
        detach: function() {
        }
      });
      function O(N) {
        N.START_TO_START = Ja, N.START_TO_END = ia, N.END_TO_END = ac, N.END_TO_START = wo, N.NODE_BEFORE = oa, N.NODE_AFTER = _l, N.NODE_BEFORE_AND_AFTER = bl, N.NODE_INSIDE = Qa;
      }
      function V(N) {
        O(N), O(N.prototype);
      }
      function me(N, H) {
        return function() {
          Ht(this);
          var ve = this.startContainer, Pe = this.startOffset, Ye = this.commonAncestorContainer, Nt = new Xt(this, !0), Se, Xe;
          ve !== Ye && (Se = bt(ve, Ye, !0), Xe = z(Se), ve = Xe.node, Pe = Xe.offset), qe(Nt, yr), Nt.reset();
          var tt = N(Nt);
          return Nt.detach(), H(this, ve, Pe, ve, Pe), tt;
        };
      }
      function Be(N, H) {
        function ve(Se, Xe) {
          return function(tt) {
            nn(tt, gn), nn(I(tt), gr);
            var xt = (Se ? U : z)(tt);
            (Xe ? Pe : Ye)(this, xt.node, xt.offset);
          };
        }
        function Pe(Se, Xe, tt) {
          var xt = Se.endContainer, Xn = Se.endOffset;
          (Xe !== Se.startContainer || tt !== Se.startOffset) && ((I(Xe) != I(xt) || Le(Xe, tt, xt, Xn) == 1) && (xt = Xe, Xn = tt), H(Se, Xe, tt, xt, Xn));
        }
        function Ye(Se, Xe, tt) {
          var xt = Se.startContainer, Xn = Se.startOffset;
          (Xe !== Se.endContainer || tt !== Se.endOffset) && ((I(Xe) != I(xt) || Le(Xe, tt, xt, Xn) == -1) && (xt = Xe, Xn = tt), H(Se, xt, Xn, Xe, tt));
        }
        var Nt = function() {
        };
        Nt.prototype = $.rangePrototype, N.prototype = new Nt(), _e.extend(N.prototype, {
          setStart: function(Se, Xe) {
            Ze(Se, !0), zt(Se, Xe), Pe(this, Se, Xe);
          },
          setEnd: function(Se, Xe) {
            Ze(Se, !0), zt(Se, Xe), Ye(this, Se, Xe);
          },
          /**
           * Convenience method to set a range's start and end boundaries. Overloaded as follows:
           * - Two parameters (node, offset) creates a collapsed range at that position
           * - Three parameters (node, startOffset, endOffset) creates a range contained with node starting at
           *   startOffset and ending at endOffset
           * - Four parameters (startNode, startOffset, endNode, endOffset) creates a range starting at startOffset in
           *   startNode and ending at endOffset in endNode
           */
          setStartAndEnd: function() {
            var Se = arguments, Xe = Se[0], tt = Se[1], xt = Xe, Xn = tt;
            switch (Se.length) {
              case 3:
                Xn = Se[2];
                break;
              case 4:
                xt = Se[2], Xn = Se[3];
                break;
            }
            Ze(Xe, !0), zt(Xe, tt), Ze(xt, !0), zt(xt, Xn), H(this, Xe, tt, xt, Xn);
          },
          setBoundary: function(Se, Xe, tt) {
            this["set" + (tt ? "Start" : "End")](Se, Xe);
          },
          setStartBefore: ve(!0, !0),
          setStartAfter: ve(!1, !0),
          setEndBefore: ve(!0, !1),
          setEndAfter: ve(!1, !1),
          collapse: function(Se) {
            Ht(this), Se ? H(this, this.startContainer, this.startOffset, this.startContainer, this.startOffset) : H(this, this.endContainer, this.endOffset, this.endContainer, this.endOffset);
          },
          selectNodeContents: function(Se) {
            Ze(Se, !0), H(this, Se, 0, Se, M(Se));
          },
          selectNode: function(Se) {
            Ze(Se, !1), nn(Se, gn);
            var Xe = U(Se), tt = z(Se);
            H(this, Xe.node, Xe.offset, tt.node, tt.offset);
          },
          extractContents: me(ke, H),
          deleteContents: me(ln, H),
          canSurroundContents: function() {
            Ht(this), yr(this.startContainer), yr(this.endContainer);
            var Se = new Xt(this, !0), Xe = Se._first && ge(Se._first, this) || Se._last && ge(Se._last, this);
            return Se.detach(), !Xe;
          },
          splitBoundaries: function() {
            qa(this);
          },
          splitBoundariesPreservingPositions: function(Se) {
            qa(this, Se);
          },
          normalizeBoundaries: function() {
            Ht(this);
            var Se = this.startContainer, Xe = this.startOffset, tt = this.endContainer, xt = this.endOffset, Xn = function(ar) {
              var Pi = ar.nextSibling;
              Pi && Pi.nodeType == ar.nodeType && (tt = ar, xt = ar.length, ar.appendData(Pi.data), j(Pi));
            }, wm = function(ar) {
              var Pi = ar.previousSibling;
              if (Pi && Pi.nodeType == ar.nodeType) {
                Se = ar;
                var KC = ar.length;
                if (Xe = Pi.length, ar.insertData(0, Pi.data), j(Pi), Se == tt)
                  xt += Xe, tt = Se;
                else if (tt == ar.parentNode) {
                  var xm = Ee(ar);
                  xt == xm ? (tt = ar, xt = KC) : xt > xm && xt--;
                }
              }
            }, wh = !0, Dr;
            if (Ge(tt))
              xt == tt.length ? Xn(tt) : xt == 0 && (Dr = tt.previousSibling, Dr && Dr.nodeType == tt.nodeType && (xt = Dr.length, Se == tt && (wh = !1), Dr.appendData(tt.data), j(tt), tt = Dr));
            else {
              if (xt > 0) {
                var xh = tt.childNodes[xt - 1];
                xh && Ge(xh) && Xn(xh);
              }
              wh = !this.collapsed;
            }
            if (wh) {
              if (Ge(Se))
                Xe == 0 ? wm(Se) : Xe == Se.length && (Dr = Se.nextSibling, Dr && Dr.nodeType == Se.nodeType && (tt == Dr && (tt = Se, xt += Se.length), Se.appendData(Dr.data), j(Dr)));
              else if (Xe < Se.childNodes.length) {
                var Eh = Se.childNodes[Xe];
                Eh && Ge(Eh) && wm(Eh);
              }
            } else
              Se = tt, Xe = xt;
            H(this, Se, Xe, tt, xt);
          },
          collapseToPoint: function(Se, Xe) {
            Ze(Se, !0), zt(Se, Xe), this.setStartAndEnd(Se, Xe);
          },
          parentElement: function() {
            Ht(this);
            var Se = this.commonAncestorContainer;
            return Se ? dt(this.commonAncestorContainer, !0) : null;
          }
        }), V(N);
      }
      function at(N) {
        N.collapsed = N.startContainer === N.endContainer && N.startOffset === N.endOffset, N.commonAncestorContainer = N.collapsed ? N.startContainer : ee.getCommonAncestor(N.startContainer, N.endContainer);
      }
      function Rt(N, H, ve, Pe, Ye) {
        N.startContainer = H, N.startOffset = ve, N.endContainer = Pe, N.endOffset = Ye, N.document = ee.getDocument(H), at(N);
      }
      function yn(N) {
        Rt(this, N, 0, N, 0);
      }
      Be(yn, Rt), _e.extend(yn, {
        rangeProperties: Za,
        RangeIterator: Xt,
        copyComparisonConstants: V,
        createPrototypeRange: Be,
        inspect: Dt,
        toHtml: pt,
        getRangeDocument: pe,
        rangesEqual: function(N, H) {
          return N.startContainer === H.startContainer && N.startOffset === H.startOffset && N.endContainer === H.endContainer && N.endOffset === H.endOffset;
        }
      }), $.DomRange = yn;
    }), _.createCoreModule("WrappedRange", ["DomRange"], function($, re) {
      var ee, _e, xe = $.dom, ye = $.util, Ge = xe.DomPosition, Ee = $.DomRange, ce = xe.getBody, Te = xe.getContentDocument, Le = xe.isCharacterDataNode;
      if ($.features.implementsDomRange && function() {
        var j, ge = Ee.rangeProperties;
        function pe(ke) {
          for (var Ue = ge.length, Dt; Ue--; )
            Dt = ge[Ue], ke[Dt] = ke.nativeRange[Dt];
          ke.collapsed = ke.startContainer === ke.endContainer && ke.startOffset === ke.endOffset;
        }
        function we(ke, Ue, Dt, Xt, gn) {
          var gr = ke.startContainer !== Ue || ke.startOffset != Dt, Wn = ke.endContainer !== Xt || ke.endOffset != gn, Sn = !ke.equals(ke.nativeRange);
          (gr || Wn || Sn) && (ke.setEnd(Xt, gn), ke.setStart(Ue, Dt));
        }
        var U;
        ee = function(ke) {
          if (!ke)
            throw re.createError("WrappedRange: Range must be specified");
          this.nativeRange = ke, pe(this);
        }, Ee.createPrototypeRange(ee, we), j = ee.prototype, j.selectNode = function(ke) {
          this.nativeRange.selectNode(ke), pe(this);
        }, j.cloneContents = function() {
          return this.nativeRange.cloneContents();
        }, j.surroundContents = function(ke) {
          this.nativeRange.surroundContents(ke), pe(this);
        }, j.collapse = function(ke) {
          this.nativeRange.collapse(ke), pe(this);
        }, j.cloneRange = function() {
          return new ee(this.nativeRange.cloneRange());
        }, j.refresh = function() {
          pe(this);
        }, j.toString = function() {
          return this.nativeRange.toString();
        };
        var z = document.createTextNode("test");
        ce(document).appendChild(z);
        var W = document.createRange();
        W.setStart(z, 0), W.setEnd(z, 0);
        try {
          W.setStart(z, 1), j.setStart = function(ke, Ue) {
            this.nativeRange.setStart(ke, Ue), pe(this);
          }, j.setEnd = function(ke, Ue) {
            this.nativeRange.setEnd(ke, Ue), pe(this);
          }, U = function(ke) {
            return function(Ue) {
              this.nativeRange[ke](Ue), pe(this);
            };
          };
        } catch {
          j.setStart = function(Ue, Dt) {
            try {
              this.nativeRange.setStart(Ue, Dt);
            } catch {
              this.nativeRange.setEnd(Ue, Dt), this.nativeRange.setStart(Ue, Dt);
            }
            pe(this);
          }, j.setEnd = function(Ue, Dt) {
            try {
              this.nativeRange.setEnd(Ue, Dt);
            } catch {
              this.nativeRange.setStart(Ue, Dt), this.nativeRange.setEnd(Ue, Dt);
            }
            pe(this);
          }, U = function(Ue, Dt) {
            return function(Xt) {
              try {
                this.nativeRange[Ue](Xt);
              } catch {
                this.nativeRange[Dt](Xt), this.nativeRange[Ue](Xt);
              }
              pe(this);
            };
          };
        }
        j.setStartBefore = U("setStartBefore", "setEndBefore"), j.setStartAfter = U("setStartAfter", "setEndAfter"), j.setEndBefore = U("setEndBefore", "setStartBefore"), j.setEndAfter = U("setEndAfter", "setStartAfter"), j.selectNodeContents = function(ke) {
          this.setStartAndEnd(ke, 0, xe.getNodeLength(ke));
        }, W.selectNodeContents(z), W.setEnd(z, 3);
        var Ce = document.createRange();
        Ce.selectNodeContents(z), Ce.setEnd(z, 4), Ce.setStart(z, 2), W.compareBoundaryPoints(W.START_TO_END, Ce) == -1 && W.compareBoundaryPoints(W.END_TO_START, Ce) == 1 ? j.compareBoundaryPoints = function(ke, Ue) {
          return Ue = Ue.nativeRange || Ue, ke == Ue.START_TO_END ? ke = Ue.END_TO_START : ke == Ue.END_TO_START && (ke = Ue.START_TO_END), this.nativeRange.compareBoundaryPoints(ke, Ue);
        } : j.compareBoundaryPoints = function(ke, Ue) {
          return this.nativeRange.compareBoundaryPoints(ke, Ue.nativeRange || Ue);
        };
        var et = document.createElement("div");
        et.innerHTML = "123";
        var qe = et.firstChild, ln = ce(document);
        ln.appendChild(et), W.setStart(qe, 1), W.setEnd(qe, 2), W.deleteContents(), qe.data == "13" && (j.deleteContents = function() {
          this.nativeRange.deleteContents(), pe(this);
        }, j.extractContents = function() {
          var ke = this.nativeRange.extractContents();
          return pe(this), ke;
        }), ln.removeChild(et), ln = null, ye.isHostMethod(W, "createContextualFragment") && (j.createContextualFragment = function(ke) {
          return this.nativeRange.createContextualFragment(ke);
        }), ce(document).removeChild(z), j.getName = function() {
          return "WrappedRange";
        }, $.WrappedRange = ee, $.createNativeRange = function(ke) {
          return ke = Te(ke, re, "createNativeRange"), ke.createRange();
        };
      }(), $.features.implementsTextRange) {
        var Ct = function(j) {
          var ge = j.parentElement(), pe = j.duplicate();
          pe.collapse(!0);
          var we = pe.parentElement();
          pe = j.duplicate(), pe.collapse(!1);
          var U = pe.parentElement(), z = we == U ? we : xe.getCommonAncestor(we, U);
          return z == ge ? z : xe.getCommonAncestor(ge, z);
        }, bt = function(j) {
          return j.compareEndPoints("StartToEnd", j) == 0;
        }, M = function(j, ge, pe, we, U) {
          var z = j.duplicate();
          z.collapse(pe);
          var W = z.parentElement();
          if (xe.isOrIsAncestorOf(ge, W) || (W = ge), !W.canHaveHTML) {
            var Ce = new Ge(W.parentNode, xe.getNodeIndex(W));
            return {
              boundaryPosition: Ce,
              nodeInfo: {
                nodeIndex: Ce.offset,
                containerElement: Ce.node
              }
            };
          }
          var et = xe.getDocument(W).createElement("span");
          et.parentNode && xe.removeNode(et);
          for (var qe, ln = pe ? "StartToStart" : "StartToEnd", ke, Ue, Dt, Xt, gn = U && U.containerElement == W ? U.nodeIndex : 0, gr = W.childNodes.length, Wn = gr, Sn = Wn; Sn == gr ? W.appendChild(et) : W.insertBefore(et, W.childNodes[Sn]), z.moveToElementText(et), qe = z.compareEndPoints(ln, j), !(qe == 0 || gn == Wn); ) {
            if (qe == -1) {
              if (Wn == gn + 1)
                break;
              gn = Sn;
            } else
              Wn = Wn == gn + 1 ? gn : Sn;
            Sn = Math.floor((gn + Wn) / 2), W.removeChild(et);
          }
          if (Xt = et.nextSibling, qe == -1 && Xt && Le(Xt)) {
            z.setEndPoint(pe ? "EndToStart" : "EndToEnd", j);
            var Cn;
            if (/[\r\n]/.test(Xt.data)) {
              var kn = z.duplicate(), or = kn.text.replace(/\r\n/g, "\r").length;
              for (Cn = kn.moveStart("character", or); (qe = kn.compareEndPoints("StartToEnd", kn)) == -1; )
                Cn++, kn.moveStart("character", 1);
            } else
              Cn = z.text.length;
            Dt = new Ge(Xt, Cn);
          } else
            ke = (we || !pe) && et.previousSibling, Ue = (we || pe) && et.nextSibling, Ue && Le(Ue) ? Dt = new Ge(Ue, 0) : ke && Le(ke) ? Dt = new Ge(ke, ke.data.length) : Dt = new Ge(W, xe.getNodeIndex(et));
          return xe.removeNode(et), {
            boundaryPosition: Dt,
            nodeInfo: {
              nodeIndex: Sn,
              containerElement: W
            }
          };
        }, D = function(j, ge) {
          var pe, we, U = j.offset, z = xe.getDocument(j.node), W, Ce, et = ce(z).createTextRange(), qe = Le(j.node);
          return qe ? (pe = j.node, we = pe.parentNode) : (Ce = j.node.childNodes, pe = U < Ce.length ? Ce[U] : null, we = j.node), W = z.createElement("span"), W.innerHTML = "&#feff;", pe ? we.insertBefore(W, pe) : we.appendChild(W), et.moveToElementText(W), et.collapse(!ge), we.removeChild(W), qe && et[ge ? "moveStart" : "moveEnd"]("character", U), et;
        };
        _e = function(j) {
          this.textRange = j, this.refresh();
        }, _e.prototype = new Ee(document), _e.prototype.refresh = function() {
          var j, ge, pe, we = Ct(this.textRange);
          bt(this.textRange) ? ge = j = M(
            this.textRange,
            we,
            !0,
            !0
          ).boundaryPosition : (pe = M(this.textRange, we, !0, !1), j = pe.boundaryPosition, ge = M(
            this.textRange,
            we,
            !1,
            !1,
            pe.nodeInfo
          ).boundaryPosition), this.setStart(j.node, j.offset), this.setEnd(ge.node, ge.offset);
        }, _e.prototype.getName = function() {
          return "WrappedTextRange";
        }, Ee.copyComparisonConstants(_e);
        var I = function(j) {
          if (j.collapsed)
            return D(new Ge(j.startContainer, j.startOffset), !0);
          var ge = D(new Ge(j.startContainer, j.startOffset), !0), pe = D(new Ge(j.endContainer, j.endOffset), !1), we = ce(Ee.getRangeDocument(j)).createTextRange();
          return we.setEndPoint("StartToStart", ge), we.setEndPoint("EndToEnd", pe), we;
        };
        if (_e.rangeToTextRange = I, _e.prototype.toTextRange = function() {
          return I(this);
        }, $.WrappedTextRange = _e, !$.features.implementsDomRange || $.config.preferTextRange) {
          var ue = function(j) {
            return j("return this;")();
          }(Function);
          typeof ue.Range > "u" && (ue.Range = _e), $.createNativeRange = function(j) {
            return j = Te(j, re, "createNativeRange"), ce(j).createTextRange();
          }, $.WrappedRange = _e;
        }
      }
      $.createRange = function(j) {
        return j = Te(j, re, "createRange"), new $.WrappedRange($.createNativeRange(j));
      }, $.createRangyRange = function(j) {
        return j = Te(j, re, "createRangyRange"), new Ee(j);
      }, ye.createAliasForDeprecatedMethod($, "createIframeRange", "createRange"), ye.createAliasForDeprecatedMethod($, "createIframeRangyRange", "createRangyRange"), $.addShimListener(function(j) {
        var ge = j.document;
        typeof ge.createRange > "u" && (ge.createRange = function() {
          return $.createRange(ge);
        }), ge = j = null;
      });
    }), _.createCoreModule("WrappedSelection", ["DomRange", "WrappedRange"], function($, re) {
      $.config.checkSelectionRanges = !0;
      var ee = "boolean", _e = "number", xe = $.dom, ye = $.util, Ge = ye.isHostMethod, Ee = $.DomRange, ce = $.WrappedRange, Te = $.DOMException, Le = xe.DomPosition, Ct, bt, M = $.features, D = "Control", I = xe.getDocument, ue = xe.getBody, j = Ee.rangesEqual;
      function ge(O) {
        return typeof O == "string" ? /^backward(s)?$/i.test(O) : !!O;
      }
      function pe(O, V) {
        if (O) {
          if (xe.isWindow(O))
            return O;
          if (O instanceof Ht)
            return O.win;
          var me = xe.getContentDocument(O, re, V);
          return xe.getWindow(me);
        } else return window;
      }
      function we(O) {
        return pe(O, "getWinSelection").getSelection();
      }
      function U(O) {
        return pe(O, "getDocSelection").document.selection;
      }
      function z(O) {
        var V = !1;
        return O.anchorNode && (V = xe.comparePoints(O.anchorNode, O.anchorOffset, O.focusNode, O.focusOffset) == 1), V;
      }
      var W = Ge(window, "getSelection"), Ce = ye.isHostObject(document, "selection");
      M.implementsWinGetSelection = W, M.implementsDocSelection = Ce;
      var et = Ce && (!W || $.config.preferTextRange);
      if (et)
        Ct = U, $.isSelectionValid = function(O) {
          var V = pe(O, "isSelectionValid").document, me = V.selection;
          return me.type != "None" || I(me.createRange().parentElement()) == V;
        };
      else if (W)
        Ct = we, $.isSelectionValid = function() {
          return !0;
        };
      else
        return re.fail("Neither document.selection or window.getSelection() detected."), !1;
      $.getNativeSelection = Ct;
      var qe = Ct();
      if (!qe)
        return re.fail("Native selection was null (possibly issue 138?)"), !1;
      var ln = $.createNativeRange(document), ke = ue(document), Ue = ye.areHostProperties(
        qe,
        ["anchorNode", "focusNode", "anchorOffset", "focusOffset"]
      );
      M.selectionHasAnchorAndFocus = Ue;
      var Dt = Ge(qe, "extend");
      M.selectionHasExtend = Dt;
      var Xt = Ge(qe, "setBaseAndExtent");
      M.selectionHasSetBaseAndExtent = Xt;
      var gn = typeof qe.rangeCount == _e;
      M.selectionHasRangeCount = gn;
      var gr = !1, Wn = !0, Sn = Dt ? function(O, V) {
        var me = Ee.getRangeDocument(V), Be = $.createRange(me);
        Be.collapseToPoint(V.endContainer, V.endOffset), O.addRange(Ze(Be)), O.extend(V.startContainer, V.startOffset);
      } : null;
      ye.areHostMethods(qe, ["addRange", "getRangeAt", "removeAllRanges"]) && typeof qe.rangeCount == _e && M.implementsDomRange && function() {
        var O = window.getSelection();
        if (O) {
          for (var V = O.rangeCount, me = V > 1, Be = [], at = z(O), Rt = 0; Rt < V; ++Rt)
            Be[Rt] = O.getRangeAt(Rt);
          var yn = xe.createTestElement(document, "", !1), N = yn.appendChild(document.createTextNode("   ")), H = document.createRange();
          if (H.setStart(N, 1), H.collapse(!0), O.removeAllRanges(), O.addRange(H), Wn = O.rangeCount == 1, O.removeAllRanges(), !me) {
            var ve = window.navigator.appVersion.match(/Chrome\/(.*?) /);
            if (ve && parseInt(ve[1]) >= 36)
              gr = !1;
            else {
              var Pe = H.cloneRange();
              H.setStart(N, 0), Pe.setEnd(N, 3), Pe.setStart(N, 2), O.addRange(H), O.addRange(Pe), gr = O.rangeCount == 2;
            }
          }
          for (xe.removeNode(yn), O.removeAllRanges(), Rt = 0; Rt < V; ++Rt)
            Rt == 0 && at ? Sn ? Sn(O, Be[Rt]) : ($.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"), O.addRange(Be[Rt])) : O.addRange(Be[Rt]);
        }
      }(), M.selectionSupportsMultipleRanges = gr, M.collapsedNonEditableSelectionsSupported = Wn;
      var Cn = !1, kn;
      ke && Ge(ke, "createControlRange") && (kn = ke.createControlRange(), ye.areHostProperties(kn, ["item", "add"]) && (Cn = !0)), M.implementsControlRange = Cn, Ue ? bt = function(O) {
        return O.anchorNode === O.focusNode && O.anchorOffset === O.focusOffset;
      } : bt = function(O) {
        return O.rangeCount ? O.getRangeAt(O.rangeCount - 1).collapsed : !1;
      };
      function or(O, V, me) {
        var Be = me ? "end" : "start", at = me ? "start" : "end";
        O.anchorNode = V[Be + "Container"], O.anchorOffset = V[Be + "Offset"], O.focusNode = V[at + "Container"], O.focusOffset = V[at + "Offset"];
      }
      function ne(O) {
        var V = O.nativeSelection;
        O.anchorNode = V.anchorNode, O.anchorOffset = V.anchorOffset, O.focusNode = V.focusNode, O.focusOffset = V.focusOffset;
      }
      function De(O) {
        O.anchorNode = O.focusNode = null, O.anchorOffset = O.focusOffset = 0, O.rangeCount = 0, O.isCollapsed = !0, O._ranges.length = 0, dt(O);
      }
      function dt(O) {
        O.type = O.rangeCount == 0 ? "None" : bt(O) ? "Caret" : "Range";
      }
      function Ze(O) {
        var V;
        return O instanceof Ee ? (V = $.createNativeRange(O.getDocument()), V.setEnd(O.endContainer, O.endOffset), V.setStart(O.startContainer, O.startOffset)) : O instanceof ce ? V = O.nativeRange : M.implementsDomRange && O instanceof xe.getWindow(O.startContainer).Range && (V = O), V;
      }
      function nn(O) {
        if (!O.length || O[0].nodeType != 1)
          return !1;
        for (var V = 1, me = O.length; V < me; ++V)
          if (!xe.isAncestorOf(O[0], O[V]))
            return !1;
        return !0;
      }
      function zt(O) {
        var V = O.getNodes();
        if (!nn(V))
          throw re.createError("getSingleElementFromRange: range " + O.inspect() + " did not consist of a single element");
        return V[0];
      }
      function ri(O) {
        return !!O && typeof O.text < "u";
      }
      function yr(O, V) {
        var me = new ce(V);
        O._ranges = [me], or(O, me, !1), O.rangeCount = 1, O.isCollapsed = me.collapsed, dt(O);
      }
      function Gn(O) {
        if (O._ranges.length = 0, O.docSelection.type == "None")
          De(O);
        else {
          var V = O.docSelection.createRange();
          if (ri(V))
            yr(O, V);
          else {
            O.rangeCount = V.length;
            for (var me, Be = I(V.item(0)), at = 0; at < O.rangeCount; ++at)
              me = $.createRange(Be), me.selectNode(V.item(at)), O._ranges.push(me);
            O.isCollapsed = O.rangeCount == 1 && O._ranges[0].collapsed, or(O, O._ranges[O.rangeCount - 1], !1), dt(O);
          }
        }
      }
      function gl(O, V) {
        for (var me = O.docSelection.createRange(), Be = zt(V), at = I(me.item(0)), Rt = ue(at).createControlRange(), yn = 0, N = me.length; yn < N; ++yn)
          Rt.add(me.item(yn));
        try {
          Rt.add(Be);
        } catch {
          throw re.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)");
        }
        Rt.select(), Gn(O);
      }
      var ra;
      Ge(qe, "getRangeAt") ? ra = function(O, V) {
        try {
          return O.getRangeAt(V);
        } catch {
          return null;
        }
      } : Ue && (ra = function(O) {
        var V = I(O.anchorNode), me = $.createRange(V);
        return me.setStartAndEnd(O.anchorNode, O.anchorOffset, O.focusNode, O.focusOffset), me.collapsed !== this.isCollapsed && me.setStartAndEnd(O.focusNode, O.focusOffset, O.anchorNode, O.anchorOffset), me;
      });
      function Ht(O, V, me) {
        this.nativeSelection = O, this.docSelection = V, this._ranges = [], this.win = me, this.refresh();
      }
      Ht.prototype = $.selectionPrototype;
      function yl(O) {
        O.win = O.anchorNode = O.focusNode = O._ranges = null, O.rangeCount = O.anchorOffset = O.focusOffset = 0, O.detached = !0, dt(O);
      }
      var to = [];
      function ml(O, V) {
        for (var me = to.length, Be, at; me--; )
          if (Be = to[me], at = Be.selection, V == "deleteAll")
            yl(at);
          else if (Be.win == O)
            return V == "delete" ? (to.splice(me, 1), !0) : at;
        return V == "deleteAll" && (to.length = 0), null;
      }
      var qa = function(O) {
        if (O && O instanceof Ht)
          return O.refresh(), O;
        O = pe(O, "getNativeSelection");
        var V = ml(O), me = Ct(O), Be = Ce ? U(O) : null;
        return V ? (V.nativeSelection = me, V.docSelection = Be, V.refresh()) : (V = new Ht(me, Be, O), to.push({ win: O, selection: V })), V;
      };
      $.getSelection = qa, ye.createAliasForDeprecatedMethod($, "getIframeSelection", "getSelection");
      var pt = Ht.prototype;
      function Za(O, V) {
        for (var me = I(V[0].startContainer), Be = ue(me).createControlRange(), at = 0, Rt, yn = V.length; at < yn; ++at) {
          Rt = zt(V[at]);
          try {
            Be.add(Rt);
          } catch {
            throw re.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)");
          }
        }
        Be.select(), Gn(O);
      }
      if (!et && Ue && ye.areHostMethods(qe, ["removeAllRanges", "addRange"])) {
        pt.removeAllRanges = function() {
          this.nativeSelection.removeAllRanges(), De(this);
        };
        var Ja = function(O, V) {
          Sn(O.nativeSelection, V), O.refresh();
        };
        gn ? pt.addRange = function(O, V) {
          if (Cn && Ce && this.docSelection.type == D)
            gl(this, O);
          else if (ge(V) && Dt)
            Ja(this, O);
          else {
            var me;
            gr ? me = this.rangeCount : (this.removeAllRanges(), me = 0);
            var Be = Ze(O).cloneRange();
            try {
              this.nativeSelection.addRange(Be);
            } catch {
            }
            if (this.rangeCount = this.nativeSelection.rangeCount, this.rangeCount == me + 1) {
              if ($.config.checkSelectionRanges) {
                var at = ra(this.nativeSelection, this.rangeCount - 1);
                at && !j(at, O) && (O = new ce(at));
              }
              this._ranges[this.rangeCount - 1] = O, or(this, O, wo(this.nativeSelection)), this.isCollapsed = bt(this), dt(this);
            } else
              this.refresh();
          }
        } : pt.addRange = function(O, V) {
          ge(V) && Dt ? Ja(this, O) : (this.nativeSelection.addRange(Ze(O)), this.refresh());
        }, pt.setRanges = function(O) {
          if (Cn && Ce && O.length > 1)
            Za(this, O);
          else {
            this.removeAllRanges();
            for (var V = 0, me = O.length; V < me; ++V)
              this.addRange(O[V]);
          }
        };
      } else if (Ge(qe, "empty") && Ge(ln, "select") && Cn && et)
        pt.removeAllRanges = function() {
          try {
            if (this.docSelection.empty(), this.docSelection.type != "None") {
              var O;
              if (this.anchorNode)
                O = I(this.anchorNode);
              else if (this.docSelection.type == D) {
                var V = this.docSelection.createRange();
                V.length && (O = I(V.item(0)));
              }
              if (O) {
                var me = ue(O).createTextRange();
                me.select(), this.docSelection.empty();
              }
            }
          } catch {
          }
          De(this);
        }, pt.addRange = function(O) {
          this.docSelection.type == D ? gl(this, O) : ($.WrappedTextRange.rangeToTextRange(O).select(), this._ranges[0] = O, this.rangeCount = 1, this.isCollapsed = this._ranges[0].collapsed, or(this, O, !1), dt(this));
        }, pt.setRanges = function(O) {
          this.removeAllRanges();
          var V = O.length;
          V > 1 ? Za(this, O) : V && this.addRange(O[0]);
        };
      else
        return re.fail("No means of selecting a Range or TextRange was found"), !1;
      pt.getRangeAt = function(O) {
        if (O < 0 || O >= this.rangeCount)
          throw new Te("INDEX_SIZE_ERR");
        return this._ranges[O].cloneRange();
      };
      var ia;
      if (et)
        ia = function(O) {
          var V;
          $.isSelectionValid(O.win) ? V = O.docSelection.createRange() : (V = ue(O.win.document).createTextRange(), V.collapse(!0)), O.docSelection.type == D ? Gn(O) : ri(V) ? yr(O, V) : De(O);
        };
      else if (Ge(qe, "getRangeAt") && typeof qe.rangeCount == _e)
        ia = function(O) {
          if (Cn && Ce && O.docSelection.type == D)
            Gn(O);
          else if (O._ranges.length = O.rangeCount = O.nativeSelection.rangeCount, O.rangeCount) {
            for (var V = 0, me = O.rangeCount; V < me; ++V)
              O._ranges[V] = new $.WrappedRange(O.nativeSelection.getRangeAt(V));
            or(O, O._ranges[O.rangeCount - 1], wo(O.nativeSelection)), O.isCollapsed = bt(O), dt(O);
          } else
            De(O);
        };
      else if (Ue && typeof qe.isCollapsed == ee && typeof ln.collapsed == ee && M.implementsDomRange)
        ia = function(O) {
          var V, me = O.nativeSelection;
          me.anchorNode ? (V = ra(me, 0), O._ranges = [V], O.rangeCount = 1, ne(O), O.isCollapsed = bt(O), dt(O)) : De(O);
        };
      else
        return re.fail("No means of obtaining a Range or TextRange from the user's selection was found"), !1;
      pt.refresh = function(O) {
        var V = O ? this._ranges.slice(0) : null, me = this.anchorNode, Be = this.anchorOffset;
        if (ia(this), O) {
          var at = V.length;
          if (at != this._ranges.length || this.anchorNode != me || this.anchorOffset != Be)
            return !0;
          for (; at--; )
            if (!j(V[at], this._ranges[at]))
              return !0;
          return !1;
        }
      };
      var ac = function(O, V) {
        var me = O.getAllRanges();
        O.removeAllRanges();
        for (var Be = 0, at = me.length; Be < at; ++Be)
          j(V, me[Be]) || O.addRange(me[Be]);
        O.rangeCount || De(O);
      };
      Cn && Ce ? pt.removeRange = function(O) {
        if (this.docSelection.type == D) {
          for (var V = this.docSelection.createRange(), me = zt(O), Be = I(V.item(0)), at = ue(Be).createControlRange(), Rt, yn = !1, N = 0, H = V.length; N < H; ++N)
            Rt = V.item(N), Rt !== me || yn ? at.add(V.item(N)) : yn = !0;
          at.select(), Gn(this);
        } else
          ac(this, O);
      } : pt.removeRange = function(O) {
        ac(this, O);
      };
      var wo;
      !et && Ue && M.implementsDomRange ? (wo = z, pt.isBackward = function() {
        return wo(this);
      }) : wo = pt.isBackward = function() {
        return !1;
      }, pt.isBackwards = pt.isBackward, pt.toString = function() {
        for (var O = [], V = 0, me = this.rangeCount; V < me; ++V)
          O[V] = "" + this._ranges[V];
        return O.join("");
      };
      function oa(O, V) {
        if (O.win.document != I(V))
          throw new Te("WRONG_DOCUMENT_ERR");
      }
      function _l(O, V) {
        if (V < 0 || V > (xe.isCharacterDataNode(O) ? O.length : O.childNodes.length))
          throw new Te("INDEX_SIZE_ERR");
      }
      pt.collapse = function(O, V) {
        oa(this, O);
        var me = $.createRange(O);
        me.collapseToPoint(O, V), this.setSingleRange(me), this.isCollapsed = !0;
      }, pt.collapseToStart = function() {
        if (this.rangeCount) {
          var O = this._ranges[0];
          this.collapse(O.startContainer, O.startOffset);
        } else
          throw new Te("INVALID_STATE_ERR");
      }, pt.collapseToEnd = function() {
        if (this.rangeCount) {
          var O = this._ranges[this.rangeCount - 1];
          this.collapse(O.endContainer, O.endOffset);
        } else
          throw new Te("INVALID_STATE_ERR");
      }, pt.selectAllChildren = function(O) {
        oa(this, O);
        var V = $.createRange(O);
        V.selectNodeContents(O), this.setSingleRange(V);
      }, Xt ? pt.setBaseAndExtent = function(O, V, me, Be) {
        this.nativeSelection.setBaseAndExtent(O, V, me, Be), this.refresh();
      } : Dt && (pt.setBaseAndExtent = function(O, V, me, Be) {
        _l(O, V), _l(me, Be), oa(this, O), oa(this, me);
        var at = $.createRange(node), Rt = xe.comparePoints(O, V, me, Be) == -1;
        Rt ? at.setStartAndEnd(me, Be, O, V) : at.setStartAndEnd(O, V, me, Be), this.setSingleRange(at, Rt);
      }), pt.deleteFromDocument = function() {
        if (Cn && Ce && this.docSelection.type == D) {
          for (var O = this.docSelection.createRange(), V; O.length; )
            V = O.item(0), O.remove(V), xe.removeNode(V);
          this.refresh();
        } else if (this.rangeCount) {
          var me = this.getAllRanges();
          if (me.length) {
            this.removeAllRanges();
            for (var Be = 0, at = me.length; Be < at; ++Be)
              me[Be].deleteContents();
            this.addRange(me[at - 1]);
          }
        }
      }, pt.eachRange = function(O, V) {
        for (var me = 0, Be = this._ranges.length; me < Be; ++me)
          if (O(this.getRangeAt(me)))
            return V;
      }, pt.getAllRanges = function() {
        var O = [];
        return this.eachRange(function(V) {
          O.push(V);
        }), O;
      }, pt.setSingleRange = function(O, V) {
        this.removeAllRanges(), this.addRange(O, V);
      }, pt.callMethodOnEachRange = function(O, V) {
        var me = [];
        return this.eachRange(function(Be) {
          me.push(Be[O].apply(Be, V || []));
        }), me;
      };
      function bl(O) {
        return function(V, me) {
          var Be;
          this.rangeCount ? (Be = this.getRangeAt(0), Be["set" + (O ? "Start" : "End")](V, me)) : (Be = $.createRange(this.win.document), Be.setStartAndEnd(V, me)), this.setSingleRange(Be, this.isBackward());
        };
      }
      pt.setStart = bl(!0), pt.setEnd = bl(!1), $.rangePrototype.select = function(O) {
        qa(this.getDocument()).setSingleRange(this, O);
      }, pt.changeEachRange = function(O) {
        var V = [], me = this.isBackward();
        this.eachRange(function(Be) {
          O(Be), V.push(Be);
        }), this.removeAllRanges(), me && V.length == 1 ? this.addRange(V[0], "backward") : this.setRanges(V);
      }, pt.containsNode = function(O, V) {
        return this.eachRange(function(me) {
          return me.containsNode(O, V);
        }, !0) || !1;
      }, pt.getBookmark = function(O) {
        return {
          backward: this.isBackward(),
          rangeBookmarks: this.callMethodOnEachRange("getBookmark", [O])
        };
      }, pt.moveToBookmark = function(O) {
        for (var V = [], me = 0, Be, at; Be = O.rangeBookmarks[me++]; )
          at = $.createRange(this.win), at.moveToBookmark(Be), V.push(at);
        O.backward ? this.setSingleRange(V[0], "backward") : this.setRanges(V);
      }, pt.saveRanges = function() {
        return {
          backward: this.isBackward(),
          ranges: this.callMethodOnEachRange("cloneRange")
        };
      }, pt.restoreRanges = function(O) {
        this.removeAllRanges();
        for (var V = 0, me; me = O.ranges[V]; ++V)
          this.addRange(me, O.backward && V == 0);
      }, pt.toHtml = function() {
        var O = [];
        return this.eachRange(function(V) {
          O.push(Ee.toHtml(V));
        }), O.join("");
      }, M.implementsTextRange && (pt.getNativeTextRange = function() {
        var O;
        if (O = this.docSelection) {
          var V = O.createRange();
          if (ri(V))
            return V;
          throw re.createError("getNativeTextRange: selection is a control selection");
        } else {
          if (this.rangeCount > 0)
            return $.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));
          throw re.createError("getNativeTextRange: selection contains no range");
        }
      });
      function Qa(O) {
        var V = [], me = new Le(O.anchorNode, O.anchorOffset), Be = new Le(O.focusNode, O.focusOffset), at = typeof O.getName == "function" ? O.getName() : "Selection";
        if (typeof O.rangeCount < "u")
          for (var Rt = 0, yn = O.rangeCount; Rt < yn; ++Rt)
            V[Rt] = Ee.inspect(O.getRangeAt(Rt));
        return "[" + at + "(Ranges: " + V.join(", ") + ")(anchor: " + me.inspect() + ", focus: " + Be.inspect() + "]";
      }
      pt.getName = function() {
        return "WrappedSelection";
      }, pt.inspect = function() {
        return Qa(this);
      }, pt.detach = function() {
        ml(this.win, "delete"), yl(this);
      }, Ht.detachAll = function() {
        ml(null, "deleteAll");
      }, Ht.inspect = Qa, Ht.isDirectionBackward = ge, $.Selection = Ht, $.selectionPrototype = pt, $.addShimListener(function(O) {
        typeof O.getSelection > "u" && (O.getSelection = function() {
          return qa(O);
        }), O = null;
      });
    });
    var Ae = !1, Re = function($) {
      Ae || (Ae = !0, !_.initialized && _.config.autoInitialize && L());
    };
    return w && (document.readyState == "complete" ? Re() : (u(document, "addEventListener") && document.addEventListener("DOMContentLoaded", Re, !1), ae(window, "load", Re))), _;
  });
})(Q2);
var eC = Q2.exports;
const C1 = /* @__PURE__ */ Sf(eC);
var gX = { exports: {} };
(function(e, t) {
  (function(n, r) {
    e.exports = n(eC);
  })(function(n) {
    return n.createModule("ClassApplier", ["WrappedSelection"], function(r, i) {
      var o = r.dom, a = o.DomPosition, s = o.arrayContains, l = r.util, u = l.forEach, c = "span", d = l.isHostMethod(document, "createElementNS");
      function f(M, D) {
        for (var I in M)
          if (M.hasOwnProperty(I) && D(I, M[I]) === !1)
            return !1;
        return !0;
      }
      function h(M) {
        return M.replace(/^\s\s*/, "").replace(/\s\s*$/, "");
      }
      function p(M, D) {
        return !!M && new RegExp("(?:^|\\s)" + D + "(?:\\s|$)").test(M);
      }
      function v(M, D) {
        if (typeof M.classList == "object")
          return M.classList.contains(D);
        var I = typeof M.className == "string", ue = I ? M.className : M.getAttribute("class");
        return p(ue, D);
      }
      function g(M, D) {
        if (typeof M.classList == "object")
          M.classList.add(D);
        else {
          var I = typeof M.className == "string", ue = I ? M.className : M.getAttribute("class");
          ue ? p(ue, D) || (ue += " " + D) : ue = D, I ? M.className = ue : M.setAttribute("class", ue);
        }
      }
      var y = /* @__PURE__ */ function() {
        function M(D, I, ue) {
          return I && ue ? " " : "";
        }
        return function(D, I) {
          if (typeof D.classList == "object")
            D.classList.remove(I);
          else {
            var ue = typeof D.className == "string", j = ue ? D.className : D.getAttribute("class");
            j = j.replace(new RegExp("(^|\\s)" + I + "(\\s|$)"), M), ue ? D.className = j : D.setAttribute("class", j);
          }
        };
      }();
      function m(M) {
        var D = typeof M.className == "string";
        return D ? M.className : M.getAttribute("class");
      }
      function E(M) {
        return M && M.split(/\s+/).sort().join(" ");
      }
      function w(M) {
        return E(m(M));
      }
      function S(M, D) {
        return w(M) == w(D);
      }
      function _(M, D) {
        for (var I = D.split(/\s+/), ue = 0, j = I.length; ue < j; ++ue)
          if (!v(M, h(I[ue])))
            return !1;
        return !0;
      }
      function b(M) {
        var D = M.parentNode;
        return D && D.nodeType == 1 && !/^(textarea|style|script|select|iframe)$/i.test(D.nodeName);
      }
      function T(M, D, I, ue, j) {
        var ge = M.node, pe = M.offset, we = ge, U = pe;
        ge == ue && pe > j && ++U, ge == D && (pe == I || pe == I + 1) && (we = ue, U += j - I), ge == D && pe > I + 1 && --U, M.node = we, M.offset = U;
      }
      function R(M, D, I) {
        M.node == D && M.offset > I && --M.offset;
      }
      function B(M, D, I, ue) {
        I == -1 && (I = D.childNodes.length);
        var j = M.parentNode, ge = o.getNodeIndex(M);
        u(ue, function(pe) {
          T(pe, j, ge, D, I);
        }), D.childNodes.length == I ? D.appendChild(M) : D.insertBefore(M, D.childNodes[I]);
      }
      function K(M, D) {
        var I = M.parentNode, ue = o.getNodeIndex(M);
        u(D, function(j) {
          R(j, I, ue);
        }), o.removeNode(M);
      }
      function ae(M, D, I, ue, j) {
        for (var ge, pe = []; ge = M.firstChild; )
          B(ge, D, I++, j), pe.push(ge);
        return K(M, j), pe;
      }
      function x(M, D) {
        return ae(M, M.parentNode, o.getNodeIndex(M), !0, D);
      }
      function P(M, D) {
        var I = M.cloneRange();
        I.selectNodeContents(D);
        var ue = I.intersection(M), j = ue ? ue.toString() : "";
        return j != "";
      }
      function L(M) {
        for (var D = M.getNodes([3]), I = 0, ue; (ue = D[I]) && !P(M, ue); )
          ++I;
        for (var j = D.length - 1; (ue = D[j]) && !P(M, ue); )
          --j;
        return D.slice(I, j + 1);
      }
      function k(M, D) {
        if (M.attributes.length != D.attributes.length) return !1;
        for (var I = 0, ue = M.attributes.length, j, ge, pe; I < ue; ++I)
          if (j = M.attributes[I], pe = j.name, pe != "class" && (ge = D.attributes.getNamedItem(pe), j === null != (ge === null) || j.specified != ge.specified || j.specified && j.nodeValue !== ge.nodeValue))
            return !1;
        return !0;
      }
      function J(M, D) {
        for (var I = 0, ue = M.attributes.length, j; I < ue; ++I)
          if (j = M.attributes[I].name, !(D && s(D, j)) && M.attributes[I].specified && j != "class")
            return !0;
        return !1;
      }
      var de = o.getComputedStyleProperty, Ne = function() {
        var M = document.createElement("div");
        return typeof M.isContentEditable == "boolean" ? function(D) {
          return D && D.nodeType == 1 && D.isContentEditable;
        } : function(D) {
          return !D || D.nodeType != 1 || D.contentEditable == "false" ? !1 : D.contentEditable == "true" || Ne(D.parentNode);
        };
      }();
      function se(M) {
        var D;
        return M && M.nodeType == 1 && ((D = M.parentNode) && D.nodeType == 9 && D.designMode == "on" || Ne(M) && !Ne(M.parentNode));
      }
      function G(M) {
        return (Ne(M) || M.nodeType != 1 && Ne(M.parentNode)) && !se(M);
      }
      var be = /^inline(-block|-table)?$/i;
      function Oe(M) {
        return M && M.nodeType == 1 && !be.test(de(M, "display"));
      }
      var Ae = /[^\r\n\t\f \u200B]/;
      function Re(M) {
        if (M.data.length == 0)
          return !0;
        if (Ae.test(M.data))
          return !1;
        var D = de(M.parentNode, "whiteSpace");
        switch (D) {
          case "pre":
          case "pre-wrap":
          case "-moz-pre-wrap":
            return !1;
          case "pre-line":
            if (/[\r\n]/.test(M.data))
              return !1;
        }
        return Oe(M.previousSibling) || Oe(M.nextSibling);
      }
      function $(M) {
        var D = [], I, ue;
        for (I = 0; ue = M[I++]; )
          D.push(
            new a(ue.startContainer, ue.startOffset),
            new a(ue.endContainer, ue.endOffset)
          );
        return D;
      }
      function re(M, D) {
        for (var I = 0, ue, j, ge, pe = M.length; I < pe; ++I)
          ue = M[I], j = D[I * 2], ge = D[I * 2 + 1], ue.setStartAndEnd(j.node, j.offset, ge.node, ge.offset);
      }
      function ee(M, D) {
        return o.isCharacterDataNode(M) ? D == 0 ? !!M.previousSibling : D == M.length ? !!M.nextSibling : !0 : D > 0 && D < M.childNodes.length;
      }
      function _e(M, D, I, ue) {
        var j, ge, pe = I == 0;
        if (o.isAncestorOf(D, M))
          return M;
        if (o.isCharacterDataNode(D)) {
          var we = o.getNodeIndex(D);
          if (I == 0)
            I = we;
          else if (I == D.length)
            I = we + 1;
          else
            throw i.createError("splitNodeAt() should not be called with offset in the middle of a data node (" + I + " in " + D.data);
          D = D.parentNode;
        }
        if (ee(D, I)) {
          j = D.cloneNode(!1), ge = D.parentNode, j.id && j.removeAttribute("id");
          for (var U, z = 0; U = D.childNodes[I]; )
            B(U, j, z++, ue);
          return B(j, ge, o.getNodeIndex(D) + 1, ue), D == M ? j : _e(M, ge, o.getNodeIndex(j), ue);
        } else if (M != D) {
          j = D.parentNode;
          var W = o.getNodeIndex(D);
          return pe || W++, _e(M, j, W, ue);
        }
        return M;
      }
      function xe(M, D) {
        return M.namespaceURI == D.namespaceURI && M.tagName.toLowerCase() == D.tagName.toLowerCase() && S(M, D) && k(M, D) && de(M, "display") == "inline" && de(D, "display") == "inline";
      }
      function ye(M) {
        var D = M ? "nextSibling" : "previousSibling";
        return function(I, ue) {
          var j = I.parentNode, ge = I[D];
          if (ge) {
            if (ge && ge.nodeType == 3)
              return ge;
          } else if (ue && (ge = j[D], ge && ge.nodeType == 1 && xe(j, ge))) {
            var pe = ge[M ? "firstChild" : "lastChild"];
            if (pe && pe.nodeType == 3)
              return pe;
          }
          return null;
        };
      }
      var Ge = ye(!1), Ee = ye(!0);
      function ce(M) {
        this.isElementMerge = M.nodeType == 1, this.textNodes = [];
        var D = this.isElementMerge ? M.lastChild : M;
        D && (this.textNodes[0] = D);
      }
      ce.prototype = {
        doMerge: function(M) {
          var D = this.textNodes, I = D[0];
          if (D.length > 1) {
            var ue = o.getNodeIndex(I), j = [], ge = 0, pe;
            u(D, function(we, U) {
              pe = we.parentNode, U > 0 && (pe.removeChild(we), pe.hasChildNodes() || o.removeNode(pe), M && u(M, function(z) {
                z.node == we && (z.node = I, z.offset += ge), z.node == pe && z.offset > ue && (--z.offset, z.offset == ue + 1 && U < D.length - 1 && (z.node = I, z.offset = ge));
              })), j[U] = we.data, ge += we.data.length;
            }), I.data = j.join("");
          }
          return I.data;
        },
        getLength: function() {
          for (var M = this.textNodes.length, D = 0; M--; )
            D += this.textNodes[M].length;
          return D;
        },
        toString: function() {
          var M = [];
          return u(this.textNodes, function(D, I) {
            M[I] = "'" + D.data + "'";
          }), "[Merge(" + M.join(",") + ")]";
        }
      };
      var Te = [
        "elementTagName",
        "ignoreWhiteSpace",
        "applyToEditableOnly",
        "useExistingElements",
        "removeEmptyElements",
        "onElementCreate"
      ], Le = {};
      function Ct(M, D, I) {
        var ue, j, ge, pe, we = this;
        we.cssClass = we.className = M;
        var U = null, z = {};
        if (typeof D == "object" && D !== null) {
          for (typeof D.elementTagName < "u" && (D.elementTagName = D.elementTagName.toLowerCase()), I = D.tagNames, U = D.elementProperties, z = D.elementAttributes, j = 0; pe = Te[j++]; )
            D.hasOwnProperty(pe) && (we[pe] = D[pe]);
          ue = D.normalize;
        } else
          ue = D;
        we.normalize = typeof ue > "u" ? !0 : ue, we.attrExceptions = [];
        var W = document.createElement(we.elementTagName);
        we.elementProperties = we.copyPropertiesToElement(U, W, !0), f(z, function(et, qe) {
          we.attrExceptions.push(et), z[et] = "" + qe;
        }), we.elementAttributes = z, we.elementSortedClassName = we.elementProperties.hasOwnProperty("className") ? E(we.elementProperties.className + " " + M) : M, we.applyToAnyTagName = !1;
        var Ce = typeof I;
        if (Ce == "string")
          I == "*" ? we.applyToAnyTagName = !0 : we.tagNames = h(I.toLowerCase()).split(/\s*,\s*/);
        else if (Ce == "object" && typeof I.length == "number")
          for (we.tagNames = [], j = 0, ge = I.length; j < ge; ++j)
            I[j] == "*" ? we.applyToAnyTagName = !0 : we.tagNames.push(I[j].toLowerCase());
        else
          we.tagNames = [we.elementTagName];
      }
      Ct.prototype = {
        elementTagName: c,
        elementProperties: {},
        elementAttributes: {},
        ignoreWhiteSpace: !0,
        applyToEditableOnly: !1,
        useExistingElements: !0,
        removeEmptyElements: !0,
        onElementCreate: null,
        copyPropertiesToElement: function(M, D, I) {
          var ue, j, ge = {}, pe, we, U, z;
          for (var W in M)
            if (M.hasOwnProperty(W))
              if (we = M[W], U = D[W], W == "className")
                g(D, we), g(D, this.className), D[W] = E(D[W]), I && (ge[W] = we);
              else if (W == "style") {
                j = U, I && (ge[W] = pe = {});
                for (ue in M[W])
                  M[W].hasOwnProperty(ue) && (j[ue] = we[ue], I && (pe[ue] = j[ue]));
                this.attrExceptions.push(W);
              } else
                D[W] = we, I && (ge[W] = D[W], z = Le.hasOwnProperty(W) ? Le[W] : W, this.attrExceptions.push(z));
          return I ? ge : "";
        },
        copyAttributesToElement: function(M, D) {
          for (var I in M)
            M.hasOwnProperty(I) && !/^class(?:Name)?$/i.test(I) && D.setAttribute(I, M[I]);
        },
        appliesToElement: function(M) {
          return s(this.tagNames, M.tagName.toLowerCase());
        },
        getEmptyElements: function(M) {
          var D = this;
          return M.getNodes([1], function(I) {
            return D.appliesToElement(I) && !I.hasChildNodes();
          });
        },
        hasClass: function(M) {
          return M.nodeType == 1 && (this.applyToAnyTagName || this.appliesToElement(M)) && v(M, this.className);
        },
        getSelfOrAncestorWithClass: function(M) {
          for (; M; ) {
            if (this.hasClass(M))
              return M;
            M = M.parentNode;
          }
          return null;
        },
        isModifiable: function(M) {
          return !this.applyToEditableOnly || G(M);
        },
        // White space adjacent to an unwrappable node can be ignored for wrapping
        isIgnorableWhiteSpaceNode: function(M) {
          return this.ignoreWhiteSpace && M && M.nodeType == 3 && Re(M);
        },
        // Normalizes nodes after applying a class to a Range.
        postApply: function(M, D, I, ue) {
          var j = M[0], ge = M[M.length - 1], pe = [], we, U = j, z = ge, W = 0, Ce = ge.length, et;
          u(M, function(Ue) {
            et = Ge(Ue, !ue), et ? (we || (we = new ce(et), pe.push(we)), we.textNodes.push(Ue), Ue === j && (U = we.textNodes[0], W = U.length), Ue === ge && (z = we.textNodes[0], Ce = we.getLength())) : we = null;
          });
          var qe = Ee(ge, !ue);
          if (qe && (we || (we = new ce(ge), pe.push(we)), we.textNodes.push(qe)), pe.length) {
            for (var ln = 0, ke = pe.length; ln < ke; ++ln)
              pe[ln].doMerge(I);
            D.setStartAndEnd(U, W, z, Ce);
          }
        },
        createContainer: function(M) {
          var D = o.getDocument(M), I = d && !o.isHtmlNamespace(M) && M.namespaceURI ? D.createElementNS(M.namespaceURI, this.elementTagName) : D.createElement(this.elementTagName);
          return this.copyPropertiesToElement(this.elementProperties, I, !1), this.copyAttributesToElement(this.elementAttributes, I), g(I, this.className), this.onElementCreate && this.onElementCreate(I, this), I;
        },
        elementHasProperties: function(M, D) {
          var I = this;
          return f(D, function(ue, j) {
            if (ue == "className")
              return _(M, j);
            if (typeof j == "object") {
              if (!I.elementHasProperties(M[ue], j))
                return !1;
            } else if (M[ue] !== j)
              return !1;
          });
        },
        elementHasAttributes: function(M, D) {
          return f(D, function(I, ue) {
            if (M.getAttribute(I) !== ue)
              return !1;
          });
        },
        applyToTextNode: function(M, D) {
          if (b(M)) {
            var I = M.parentNode;
            if (I.childNodes.length == 1 && this.useExistingElements && this.appliesToElement(I) && this.elementHasProperties(I, this.elementProperties) && this.elementHasAttributes(I, this.elementAttributes))
              g(I, this.className);
            else {
              var ue = M.parentNode, j = this.createContainer(ue);
              ue.insertBefore(j, M), j.appendChild(M);
            }
          }
        },
        isRemovable: function(M) {
          return M.tagName.toLowerCase() == this.elementTagName && w(M) == this.elementSortedClassName && this.elementHasProperties(M, this.elementProperties) && !J(M, this.attrExceptions) && this.elementHasAttributes(M, this.elementAttributes) && this.isModifiable(M);
        },
        isEmptyContainer: function(M) {
          var D = M.childNodes.length;
          return M.nodeType == 1 && this.isRemovable(M) && (D == 0 || D == 1 && this.isEmptyContainer(M.firstChild));
        },
        removeEmptyContainers: function(M) {
          var D = this, I = M.getNodes([1], function(ge) {
            return D.isEmptyContainer(ge);
          }), ue = [M], j = $(ue);
          u(I, function(ge) {
            K(ge, j);
          }), re(ue, j);
        },
        undoToTextNode: function(M, D, I, ue) {
          if (!D.containsNode(I)) {
            var j = D.cloneRange();
            j.selectNode(I), j.isPointInRange(D.endContainer, D.endOffset) && (_e(I, D.endContainer, D.endOffset, ue), D.setEndAfter(I)), j.isPointInRange(D.startContainer, D.startOffset) && (I = _e(I, D.startContainer, D.startOffset, ue));
          }
          this.isRemovable(I) ? x(I, ue) : y(I, this.className);
        },
        splitAncestorWithClass: function(M, D, I) {
          var ue = this.getSelfOrAncestorWithClass(M);
          ue && _e(ue, M, D, I);
        },
        undoToAncestor: function(M, D) {
          this.isRemovable(M) ? x(M, D) : y(M, this.className);
        },
        applyToRange: function(M, D) {
          var I = this;
          D = D || [];
          var ue = $(D || []);
          M.splitBoundariesPreservingPositions(ue), I.removeEmptyElements && I.removeEmptyContainers(M);
          var j = L(M);
          if (j.length) {
            u(j, function(we) {
              !I.isIgnorableWhiteSpaceNode(we) && !I.getSelfOrAncestorWithClass(we) && I.isModifiable(we) && I.applyToTextNode(we, ue);
            });
            var ge = j[j.length - 1];
            M.setStartAndEnd(j[0], 0, ge, ge.length), I.normalize && I.postApply(j, M, ue, !1), re(D, ue);
          }
          var pe = I.getEmptyElements(M);
          u(pe, function(we) {
            g(we, I.className);
          });
        },
        applyToRanges: function(M) {
          for (var D = M.length; D--; )
            this.applyToRange(M[D], M);
          return M;
        },
        applyToSelection: function(M) {
          var D = r.getSelection(M);
          D.setRanges(this.applyToRanges(D.getAllRanges()));
        },
        undoToRange: function(M, D) {
          var I = this;
          D = D || [];
          var ue = $(D);
          M.splitBoundariesPreservingPositions(ue), I.removeEmptyElements && I.removeEmptyContainers(M, ue);
          var j = L(M), ge, pe, we = j[j.length - 1];
          if (j.length) {
            I.splitAncestorWithClass(M.endContainer, M.endOffset, ue), I.splitAncestorWithClass(M.startContainer, M.startOffset, ue);
            for (var U = 0, z = j.length; U < z; ++U)
              ge = j[U], pe = I.getSelfOrAncestorWithClass(ge), pe && I.isModifiable(ge) && I.undoToAncestor(pe, ue);
            M.setStartAndEnd(j[0], 0, we, we.length), I.normalize && I.postApply(j, M, ue, !0), re(D, ue);
          }
          var W = I.getEmptyElements(M);
          u(W, function(Ce) {
            y(Ce, I.className);
          });
        },
        undoToRanges: function(M) {
          for (var D = M.length; D--; )
            this.undoToRange(M[D], M);
          return M;
        },
        undoToSelection: function(M) {
          var D = r.getSelection(M), I = r.getSelection(M).getAllRanges();
          this.undoToRanges(I), D.setRanges(I);
        },
        isAppliedToRange: function(M) {
          if (M.collapsed || M.toString() == "")
            return !!this.getSelfOrAncestorWithClass(M.commonAncestorContainer);
          var D = M.getNodes([3]);
          if (D.length) {
            for (var I = 0, ue; ue = D[I++]; )
              if (!this.isIgnorableWhiteSpaceNode(ue) && P(M, ue) && this.isModifiable(ue) && !this.getSelfOrAncestorWithClass(ue))
                return !1;
          }
          return !0;
        },
        isAppliedToRanges: function(M) {
          var D = M.length;
          if (D == 0)
            return !1;
          for (; D--; )
            if (!this.isAppliedToRange(M[D]))
              return !1;
          return !0;
        },
        isAppliedToSelection: function(M) {
          var D = r.getSelection(M);
          return this.isAppliedToRanges(D.getAllRanges());
        },
        toggleRange: function(M) {
          this.isAppliedToRange(M) ? this.undoToRange(M) : this.applyToRange(M);
        },
        toggleSelection: function(M) {
          this.isAppliedToSelection(M) ? this.undoToSelection(M) : this.applyToSelection(M);
        },
        getElementsWithClassIntersectingRange: function(M) {
          var D = [], I = this;
          return M.getNodes([3], function(ue) {
            var j = I.getSelfOrAncestorWithClass(ue);
            j && !s(D, j) && D.push(j);
          }), D;
        },
        detach: function() {
        }
      };
      function bt(M, D, I) {
        return new Ct(M, D, I);
      }
      Ct.util = {
        hasClass: v,
        addClass: g,
        removeClass: y,
        getClass: m,
        hasSameClasses: S,
        hasAllClasses: _,
        replaceWithOwnChildren: x,
        elementsHaveSameNonClassAttributes: k,
        elementHasNonClassAttributes: J,
        splitNodeAt: _e,
        isEditableElement: Ne,
        isEditingHost: se,
        isEditable: G
      }, r.CssClassApplier = r.ClassApplier = Ct, r.createClassApplier = bt, l.createAliasForDeprecatedMethod(r, "createCssClassApplier", "createClassApplier", i);
    }), n;
  });
})(gX);
var O1 = {
  toolbar: {
    allowMultiParagraphSelection: !0,
    buttons: [
      "bold",
      "colorpicker",
      "italic",
      "underline",
      "strikethrough",
      "quote",
      "justifyLeft",
      "justifyCenter",
      "justifyRight",
      "justifyFull",
      "superscript",
      "subscript",
      "orderedlist",
      "unorderedlist",
      "pre",
      "removeFormat",
      "outdent",
      "indent",
      "h2",
      "h3"
    ],
    standardizeSelectionStart: !1,
    updateOnEmptySelection: !1
  },
  placeholder: {
    text: "请输入内容",
    hideOnClick: !0
  },
  disableEditing: !0
}, A1 = of.extensions.button.extend({
  name: "colorpicker",
  tagNames: ["mark"],
  contentDefault: "<b>Color</b>",
  aria: "Color Picker",
  action: "colorPicker",
  init: function() {
    var e = this;
    C1.init(), of.extensions.button.prototype.init.call(this), this.colorPicker = new J2({
      parent: this.button,
      color: "#000",
      onDone: function(t) {
        e.coloredText && e.coloredText.isAppliedToSelection() && e.coloredText.undoToSelection(), e.coloredText = C1.createClassApplier("colored", {
          elementTagName: "span",
          elementProperties: {
            style: {
              color: t.hex
            }
          },
          normalize: !0
        }), e.coloredText.toggleSelection(), e.base.checkContentChanged(), e.setInactive();
      }
    });
  },
  getButton: function() {
    return this.button;
  },
  handleClick: function() {
    this.setActive(), this.colorPicker.show();
  },
  isAlreadyApplied: function(e) {
    return e.nodeName.toLowerCase() === "mark";
  },
  isActive: function() {
    return this.button.classList.contains("medium-editor-button-active");
  },
  setInactive: function() {
    this.button.classList.remove("medium-editor-button-active");
  },
  setActive: function() {
    this.button.classList.add("medium-editor-button-active");
  }
}), yX = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), mX = function(e, t, n, r) {
  var i = arguments.length, o = i < 3 ? t : r === null ? r = Object.getOwnPropertyDescriptor(t, n) : r, a;
  if (typeof Reflect == "object" && typeof Reflect.decorate == "function") o = Reflect.decorate(e, t, n, r);
  else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (i < 3 ? a(o) : i > 3 ? a(t, n, o) : a(t, n)) || o);
  return i > 3 && o && Object.defineProperty(t, n, o), o;
}, N1 = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, M1 = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
};
(function(e) {
  yX(t, e);
  function t(n) {
    var r = e.call(this, n) || this;
    r.labelMap = /* @__PURE__ */ new Map();
    var i = n.lf, o = n.graphModel;
    return r.lf = i, r.graphModel = o, r.state = { tick: 0 }, r;
  }
  return t.prototype.componentDidMount = function() {
    var n = this, r = this.props.graphModel;
    this.editor = new of(".lf-label-editor", ks(O1, {
      autoLink: !0,
      extensions: {
        colorPicker: new A1()
      }
    })), r.eventCenter.on("text:update,node:mousemove,node:resize,node:rotate,node:drag,label:drop,node:drop", function() {
    }), r.eventCenter.on("node:properties-change,node:properties-delete", function() {
      n.setState({ tick: n.state.tick + 1 });
    });
  }, t.prototype.componentDidUpdate = function() {
    var n;
    this.editor && this.editor.elements.length > 0 ? this.editor.addElements(".lf-label-editor") : ((n = this.editor) === null || n === void 0 || n.destroy(), this.editor = new of(".lf-label-editor", ks(O1, {
      autoLink: !0,
      extensions: {
        colorPicker: new A1()
      }
    })));
  }, t.prototype.componentWillUnmount = function() {
    var n;
    (n = this.editor) === null || n === void 0 || n.destroy();
  }, t.prototype.getLabels = function() {
    var n = this, r = this.props, i = r.lf.extension, o = r.graphModel, a = M1(M1([], N1(o.nodes), !1), N1(o.edges), !1), s = i.label;
    if (s) {
      var l = [];
      return st(a, function(u) {
        var c, d, f = u.getData(), h = (d = (c = f.properties) === null || c === void 0 ? void 0 : c._label) !== null && d !== void 0 ? d : [];
        st(h, function(p) {
          var v = n.labelMap, g = new sX(p, u, o);
          v.set(g.id, g), l.push(Q(oX, { label: g, element: u, graphModel: o }, g.id));
        });
      }), l;
    }
    return null;
  }, t.prototype.render = function() {
    return Q("foreignObject", { id: "lf-label-overlay", class: "lf-label-overlay", children: this.getLabels() });
  }, t.toolName = "label-edit-tool", t = mX([
    qn
  ], t), t;
})(Et);
var dh = function(e, t, n, r) {
  function i(o) {
    return o instanceof n ? o : new n(function(a) {
      a(o);
    });
  }
  return new (n || (n = Promise))(function(o, a) {
    function s(c) {
      try {
        u(r.next(c));
      } catch (d) {
        a(d);
      }
    }
    function l(c) {
      try {
        u(r.throw(c));
      } catch (d) {
        a(d);
      }
    }
    function u(c) {
      c.done ? o(c.value) : i(c.value).then(s, l);
    }
    u((r = r.apply(e, t || [])).next());
  });
}, fh = function(e, t) {
  var n = { label: 0, sent: function() {
    if (o[0] & 1) throw o[1];
    return o[1];
  }, trys: [], ops: [] }, r, i, o, a;
  return a = { next: s(0), throw: s(1), return: s(2) }, typeof Symbol == "function" && (a[Symbol.iterator] = function() {
    return this;
  }), a;
  function s(u) {
    return function(c) {
      return l([u, c]);
    };
  }
  function l(u) {
    if (r) throw new TypeError("Generator is already executing.");
    for (; a && (a = 0, u[0] && (n = 0)), n; ) try {
      if (r = 1, i && (o = u[0] & 2 ? i.return : u[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, u[1])).done) return o;
      switch (i = 0, o && (u = [u[0] & 2, o.value]), u[0]) {
        case 0:
        case 1:
          o = u;
          break;
        case 4:
          return n.label++, { value: u[1], done: !1 };
        case 5:
          n.label++, i = u[1], u = [0];
          continue;
        case 7:
          u = n.ops.pop(), n.trys.pop();
          continue;
        default:
          if (o = n.trys, !(o = o.length > 0 && o[o.length - 1]) && (u[0] === 6 || u[0] === 2)) {
            n = 0;
            continue;
          }
          if (u[0] === 3 && (!o || u[1] > o[0] && u[1] < o[3])) {
            n.label = u[1];
            break;
          }
          if (u[0] === 6 && n.label < o[1]) {
            n.label = o[1], o = u;
            break;
          }
          if (o && n.label < o[2]) {
            n.label = o[2], n.ops.push(u);
            break;
          }
          o[2] && n.ops.pop(), n.trys.pop();
          continue;
      }
      u = t.call(e, n);
    } catch (c) {
      u = [6, c], i = 0;
    } finally {
      r = o = 0;
    }
    if (u[0] & 5) throw u[1];
    return { value: u[0] ? u[1] : void 0, done: !0 };
  }
}, _X = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, bX = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
}, Ml = {};
function tC(e) {
  return e.startsWith("data:text/plain");
}
function nC(e) {
  return dh(this, void 0, void 0, function() {
    return fh(this, function(t) {
      return Ml[e] ? [2, Ml[e]] : [2, new Promise(function(n, r) {
        try {
          fetch(e).then(function(i) {
            return i.blob();
          }).then(function(i) {
            var o = new FileReader();
            o.onloadend = function() {
              n(Ml[e] = o.result);
            }, o.onerror = r, o.readAsDataURL(i);
          }).catch(function() {
            n(Ml[e] = e);
          });
        } catch {
          return Ml[e] = e;
        }
      })];
    });
  });
}
function T1(e, t) {
  return dh(this, void 0, void 0, function() {
    var n, r, i;
    return fh(this, function(o) {
      switch (o.label) {
        case 0:
          return o.trys.push([0, 2, , 3]), n = e.getAttribute(t) || "", n.startsWith("data:") ? [
            2
            /*return*/
          ] : [4, nC(n)];
        case 1:
          return r = o.sent(), tC(r) ? [
            2
            /*return*/
          ] : (e.setAttribute(t, r), [3, 3]);
        case 2:
          return i = o.sent(), console.error(i), [3, 3];
        case 3:
          return [
            2
            /*return*/
          ];
      }
    });
  });
}
function P1(e, t) {
  return dh(this, void 0, void 0, function() {
    var n, r;
    return fh(this, function(i) {
      switch (i.label) {
        case 0:
          return i.trys.push([0, 2, , 3]), t.startsWith("data:") ? [
            2
            /*return*/
          ] : [4, nC(t)];
        case 1:
          return n = i.sent(), tC(n) ? [
            2
            /*return*/
          ] : (e.style.backgroundImage = "url(".concat(n, ")"), [3, 3]);
        case 2:
          return r = i.sent(), console.error(r), [3, 3];
        case 3:
          return [
            2
            /*return*/
          ];
      }
    });
  });
}
function jp(e) {
  return dh(this, void 0, void 0, function() {
    var t, n, r, i, o, a, s, u, l, u;
    return fh(this, function(c) {
      switch (c.label) {
        case 0:
          for (t = [e], r = []; t.length; )
            n = t.shift(), n.children.length && t.push.apply(t, bX([], _X(n.children), !1)), n instanceof HTMLElement && (i = n.style, o = i.background, a = i.backgroundImage, s = o.match(/url\(["']?(.*?)["']?\)/), s && s[1] && (u = s[1], r.push(P1(n, u))), l = a.match(/url\(["']?(.*?)["']?\)/), l && l[1] && (u = l[1], r.push(P1(n, u)))), n instanceof HTMLImageElement ? r.push(T1(n, "src")) : n instanceof SVGImageElement && r.push(T1(n, "href"));
          return [4, Promise.all(r)];
        case 1:
          return c.sent(), [
            2
            /*return*/
          ];
      }
    });
  });
}
function Tl(e, t, n) {
  var r = document.createElement("canvas");
  r.width = t, r.height = n;
  var i = r.getContext("2d");
  return i && i.drawImage(e, 0, 0, e.width, e.height, 0, 0, t, n), r;
}
var no = function(e, t, n, r) {
  function i(o) {
    return o instanceof n ? o : new n(function(a) {
      a(o);
    });
  }
  return new (n || (n = Promise))(function(o, a) {
    function s(c) {
      try {
        u(r.next(c));
      } catch (d) {
        a(d);
      }
    }
    function l(c) {
      try {
        u(r.throw(c));
      } catch (d) {
        a(d);
      }
    }
    function u(c) {
      c.done ? o(c.value) : i(c.value).then(s, l);
    }
    u((r = r.apply(e, t || [])).next());
  });
}, ro = function(e, t) {
  var n = { label: 0, sent: function() {
    if (o[0] & 1) throw o[1];
    return o[1];
  }, trys: [], ops: [] }, r, i, o, a;
  return a = { next: s(0), throw: s(1), return: s(2) }, typeof Symbol == "function" && (a[Symbol.iterator] = function() {
    return this;
  }), a;
  function s(u) {
    return function(c) {
      return l([u, c]);
    };
  }
  function l(u) {
    if (r) throw new TypeError("Generator is already executing.");
    for (; a && (a = 0, u[0] && (n = 0)), n; ) try {
      if (r = 1, i && (o = u[0] & 2 ? i.return : u[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, u[1])).done) return o;
      switch (i = 0, o && (u = [u[0] & 2, o.value]), u[0]) {
        case 0:
        case 1:
          o = u;
          break;
        case 4:
          return n.label++, { value: u[1], done: !1 };
        case 5:
          n.label++, i = u[1], u = [0];
          continue;
        case 7:
          u = n.ops.pop(), n.trys.pop();
          continue;
        default:
          if (o = n.trys, !(o = o.length > 0 && o[o.length - 1]) && (u[0] === 6 || u[0] === 2)) {
            n = 0;
            continue;
          }
          if (u[0] === 3 && (!o || u[1] > o[0] && u[1] < o[3])) {
            n.label = u[1];
            break;
          }
          if (u[0] === 6 && n.label < o[1]) {
            n.label = o[1], o = u;
            break;
          }
          if (o && n.label < o[2]) {
            n.label = o[2], n.ops.push(u);
            break;
          }
          o[2] && n.ops.pop(), n.trys.pop();
          continue;
      }
      u = t.call(e, n);
    } catch (c) {
      u = [6, c], i = 0;
    } finally {
      r = o = 0;
    }
    if (u[0] & 5) throw u[1];
    return { value: u[0] ? u[1] : void 0, done: !0 };
  }
}, wX = (
  /** @class */
  function() {
    function e(t) {
      var n = t.lf, r = this;
      this.lf = n, this.customCssRules = "", this.useGlobalRules = !0, n.getSnapshot = function(i, o) {
        return no(r, void 0, void 0, function() {
          return ro(this, function(a) {
            switch (a.label) {
              case 0:
                return [
                  4,
                  this.getSnapshot(i, o)
                  /* 获取Blob对象 */
                ];
              case 1:
                return [
                  2,
                  a.sent()
                  /* 获取Blob对象 */
                ];
            }
          });
        });
      }, n.getSnapshotBlob = function(i, o) {
        return no(r, void 0, void 0, function() {
          return ro(this, function(a) {
            switch (a.label) {
              case 0:
                return [
                  4,
                  this.getSnapshotBlob(i, o)
                  /* 获取Base64对象 */
                ];
              case 1:
                return [
                  2,
                  a.sent()
                  /* 获取Base64对象 */
                ];
            }
          });
        });
      }, n.getSnapshotBase64 = function(i, o) {
        return no(r, void 0, void 0, function() {
          return ro(this, function(a) {
            switch (a.label) {
              case 0:
                return [4, this.getSnapshotBase64(i, o)];
              case 1:
                return [2, a.sent()];
            }
          });
        });
      };
    }
    return e.prototype.getSvgRootElement = function(t) {
      var n = t.container.querySelector(".lf-canvas-overlay");
      return n;
    }, e.prototype.triggerDownload = function(t) {
      var n = new MouseEvent("click", {
        view: document.defaultView,
        bubbles: !1,
        cancelable: !0
      }), r = document.createElement("a");
      r.setAttribute("download", this.fileName), r.setAttribute("href", t), r.setAttribute("target", "_blank"), r.dispatchEvent(n);
    }, e.prototype.removeAnchor = function(t) {
      for (var n = t.childNodes, r = t.childNodes && t.childNodes.length, i = 0; i < r; i++) {
        var o = n[i], a = o.classList && Array.from(o.classList) || [];
        a.indexOf("lf-anchor") > -1 && (t.removeChild(t.childNodes[i]), r--, i--);
      }
    }, e.prototype.removeRotateControl = function(t) {
      for (var n = t.childNodes, r = t.childNodes && t.childNodes.length, i = 0; i < r; i++) {
        var o = n[i], a = o.classList && Array.from(o.classList) || [];
        a.indexOf("lf-rotate-control") > -1 && (t.removeChild(t.childNodes[i]), r--, i--);
      }
    }, e.prototype.getSnapshot = function(t, n) {
      return no(this, void 0, void 0, function() {
        var r, i, o, a, s = this;
        return ro(this, function(l) {
          switch (l.label) {
            case 0:
              return r = this.lf.graphModel.getPartial(), i = (n ?? {}).partial, o = i === void 0 ? r : i, a = this.lf.getEditConfig(), this.lf.updateEditConfig({
                isSilentMode: !0,
                stopScrollGraph: !0,
                stopMoveGraph: !0
              }), r === o ? [3, 1] : (this.lf.graphModel.setPartial(o), this.lf.graphModel.eventCenter.once("graph:updated", function() {
                return no(s, void 0, void 0, function() {
                  return ro(this, function(u) {
                    switch (u.label) {
                      case 0:
                        return [
                          4,
                          this.snapshot(t, n)
                          // 恢复原来渲染模式
                        ];
                      case 1:
                        return u.sent(), this.lf.graphModel.setPartial(r), [
                          2
                          /*return*/
                        ];
                    }
                  });
                });
              }), [3, 3]);
            case 1:
              return [4, this.snapshot(t, n)];
            case 2:
              l.sent(), l.label = 3;
            case 3:
              return this.lf.updateEditConfig(a), [
                2
                /*return*/
              ];
          }
        });
      });
    }, e.prototype.snapshot = function(t, n) {
      return no(this, void 0, void 0, function() {
        var r, i, o, a, s, l, u, c, d, f = this;
        return ro(this, function(h) {
          switch (h.label) {
            case 0:
              return r = n ?? {}, i = r.fileType, o = i === void 0 ? "png" : i, a = r.quality, this.fileName = "".concat(t ?? "logic-flow.".concat(Date.now()), ".").concat(o), s = this.getSvgRootElement(this.lf), [4, jp(s)];
            case 1:
              return h.sent(), o === "svg" ? (l = this.cloneSvg(s), u = new XMLSerializer().serializeToString(l), c = new Blob([u], {
                type: "image/svg+xml;charset=utf-8"
              }), d = URL.createObjectURL(c), this.triggerDownload(d)) : this.getCanvasData(s, n ?? {}).then(function(p) {
                var v = p.toDataURL("image/".concat(o), a).replace("image/".concat(o), "image/octet-stream");
                f.triggerDownload(v);
              }), [
                2
                /*return*/
              ];
          }
        });
      });
    }, e.prototype.getSnapshotBase64 = function(t, n) {
      return no(this, void 0, void 0, function() {
        var r, i = this;
        return ro(this, function(o) {
          switch (o.label) {
            case 0:
              return r = this.getSvgRootElement(this.lf), [4, jp(r)];
            case 1:
              return o.sent(), [2, new Promise(function(a) {
                i.getCanvasData(r, { backgroundColor: t }).then(function(s) {
                  var l = s.toDataURL("image/".concat(n ?? "png"));
                  a({
                    data: l,
                    width: s.width,
                    height: s.height
                  });
                });
              })];
          }
        });
      });
    }, e.prototype.getSnapshotBlob = function(t, n) {
      return no(this, void 0, void 0, function() {
        var r, i = this;
        return ro(this, function(o) {
          switch (o.label) {
            case 0:
              return r = this.getSvgRootElement(this.lf), [4, jp(r)];
            case 1:
              return o.sent(), [2, new Promise(function(a) {
                i.getCanvasData(r, { backgroundColor: t }).then(function(s) {
                  s.toBlob(function(l) {
                    a({
                      data: l,
                      width: s.width,
                      height: s.height
                    });
                  }, "image/".concat(n ?? "png"));
                });
              })];
          }
        });
      });
    }, e.prototype.getClassRules = function() {
      var t = "";
      if (this.useGlobalRules)
        for (var n = document.styleSheets, r = 0; r < n.length; r++) {
          var i = n[r];
          try {
            for (var o = 0; o < i.cssRules.length; o++)
              t += i.cssRules[o].cssText;
          } catch {
            console.log("CSS scripts from different sources have been filtered out");
          }
        }
      return this.customCssRules && (t += this.customCssRules), t;
    }, e.prototype.getCanvasData = function(t, n) {
      return no(this, void 0, void 0, function() {
        var r, i, o, a, s, l, u, c, d, f, h, p, v, g, y, m, E, w, S, _, b, T, R, B, K, ae;
        return ro(this, function(x) {
          return r = n.width, i = n.height, o = n.backgroundColor, a = n.padding, s = a === void 0 ? 40 : a, l = this.cloneSvg(t, !1), u = window.devicePixelRatio || 1, u < 1 && (u = 1), c = this.lf.graphModel.rootEl.querySelector(".lf-base"), d = c.getBoundingClientRect(), f = this.lf.container.querySelector(".lf-canvas-overlay"), h = f.getBoundingClientRect(), p = d.x - h.x, v = d.y - h.y, g = this.lf.graphModel, y = g.transformModel, m = y.SCALE_X, E = y.SCALE_Y, w = y.TRANSLATE_X, S = y.TRANSLATE_Y, l.lastChild.style.transform = "matrix(1, 0, 0, 1, ".concat((-p + w) * (1 / m), ", ").concat((-v + S) * (1 / E), ")"), _ = Math.ceil(d.width / m), b = Math.ceil(d.height / E), T = document.createElement("canvas"), T.style.width = "".concat(_, "px"), T.style.height = "".concat(b, "px"), T.width = _ * u + s * 2, T.height = b * u + s * 2, R = T.getContext("2d"), R && (R.clearRect(0, 0, T.width, T.height), R.scale(u, u), o ? (R.fillStyle = o, R.fillRect(0, 0, T.width, T.height)) : R.clearRect(0, 0, T.width, T.height)), B = new Image(), K = document.createElement("style"), K.innerHTML = this.getClassRules(), ae = document.createElement("foreignObject"), ae.appendChild(K), l.appendChild(ae), [2, new Promise(function(P) {
            B.onload = function() {
              var J = navigator.userAgent.indexOf("Firefox") > -1;
              try {
                J ? createImageBitmap(B, {
                  resizeWidth: r && i ? Tl(T, r, i).width : T.width,
                  resizeHeight: r && i ? Tl(T, r, i).height : T.height
                }).then(function(de) {
                  R == null || R.drawImage(de, s / u, s / u), P(r && i ? Tl(T, r, i) : T);
                }) : (R == null || R.drawImage(B, s / u, s / u), P(r && i ? Tl(T, r, i) : T));
              } catch {
                R == null || R.drawImage(B, s / u, s / u), P(r && i ? Tl(T, r, i) : T);
              }
            };
            var L = "data:image/svg+xml;charset=utf-8,".concat(new XMLSerializer().serializeToString(l)), k = L.replace(/\n/g, "").replace(/\t/g, "").replace(/#/g, "%23");
            B.src = k;
          })];
        });
      });
    }, e.prototype.cloneSvg = function(t, n) {
      var r = this, i;
      n === void 0 && (n = !0);
      var o = t.cloneNode(!0), a = o.lastChild, s = (i = a == null ? void 0 : a.childNodes) === null || i === void 0 ? void 0 : i.length;
      if (s)
        for (var l = 0; l < s; l++) {
          var u = a == null ? void 0 : a.childNodes[l], c = u.classList && Array.from(u.classList);
          if (c && c.indexOf("lf-base") < 0)
            a == null || a.removeChild(a.childNodes[l]), s--, l--;
          else {
            var d = a == null ? void 0 : a.childNodes[l];
            d && d.childNodes.forEach(function(p) {
              var v = p;
              r.removeAnchor(v.firstChild), r.removeRotateControl(v.firstChild);
            });
          }
        }
      if (n) {
        var f = document.createElement("style");
        f.innerHTML = this.getClassRules();
        var h = document.createElement("foreignObject");
        h.appendChild(f), o.appendChild(h);
      }
      return o;
    }, e.pluginName = "snapshot", e;
  }()
);
var xX = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, EX = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
}, Pl = "lf:defaultNodeMenu", Dl = "lf:defaultEdgeMenu", Rl = "lf:defaultGraphMenu", D1 = "lf:defaultSelectionMenu", SX = (
  /** @class */
  function() {
    function e(t) {
      var n = t.lf, r = this;
      this.__currentData = null, this.lf = n;
      var i = n.options.isSilentMode;
      i || (this.__menuDOM = document.createElement("ul"), this.menuTypeMap = /* @__PURE__ */ new Map(), this.init(), this.lf.setMenuConfig = function(o) {
        r.setMenuConfig(o);
      }, this.lf.addMenuConfig = function(o) {
        r.addMenuConfig(o);
      }, this.lf.setMenuByType = function(o) {
        r.setMenuByType(o);
      });
    }
    return e.prototype.init = function() {
      var t = this, n, r, i, o, a = [
        {
          text: "删除",
          callback: function(u) {
            t.lf.deleteNode(u.id);
          }
        },
        {
          text: "编辑文本",
          callback: function(u) {
            t.lf.graphModel.editText(u.id);
          }
        },
        {
          text: "复制",
          callback: function(u) {
            t.lf.cloneNode(u.id);
          }
        }
      ];
      (n = this.menuTypeMap) === null || n === void 0 || n.set(Pl, a);
      var s = [
        {
          text: "删除",
          callback: function(u) {
            t.lf.deleteEdge(u.id);
          }
        },
        {
          text: "编辑文本",
          callback: function(u) {
            t.lf.graphModel.editText(u.id);
          }
        }
      ];
      (r = this.menuTypeMap) === null || r === void 0 || r.set(Dl, s), (i = this.menuTypeMap) === null || i === void 0 || i.set(Rl, []);
      var l = [
        {
          text: "删除",
          callback: function(u) {
            t.lf.clearSelectElements(), u.edges.forEach(function(c) {
              return t.lf.deleteEdge(c.id);
            }), u.nodes.forEach(function(c) {
              return t.lf.deleteNode(c.id);
            });
          }
        }
      ];
      (o = this.menuTypeMap) === null || o === void 0 || o.set(D1, l);
    }, e.prototype.render = function(t, n) {
      var r = this;
      t.options.isSilentMode || (this.__container = n, this.__currentData = null, this.__menuDOM && (this.__menuDOM.className = "lf-menu", n.appendChild(this.__menuDOM), this.__menuDOM.addEventListener("click", function(i) {
        i.stopPropagation();
        for (var o = i.target; Array.from(o.classList).indexOf("lf-menu-item") === -1 && Array.from(o.classList).indexOf("lf-menu") === -1; )
          o = o == null ? void 0 : o.parentElement;
        Array.from(o.classList).indexOf("lf-menu-item") > -1 ? (o.onclickCallback(r.__currentData), r.__menuDOM && (r.__menuDOM.style.display = "none"), r.__currentData = null) : console.warn("点击区域不在菜单项内，请检查代码！");
      }, !0)), this.lf.on("node:contextmenu", function(i) {
        var o, a, s = i.data, l = i.position, u = i.e, c = l.domOverlayPosition, d = c.x, f = c.y, h = s.id, p = r.lf.graphModel.getNodeModelById(h);
        if (p) {
          var v = [], g = (o = r.menuTypeMap) === null || o === void 0 ? void 0 : o.get(p.type);
          p && p.menu && Array.isArray(p.menu) ? v = p.menu : g ? v = g : v = (a = r.menuTypeMap) === null || a === void 0 ? void 0 : a.get(Pl), r.__currentData = s, r.showMenu(d, f, v, {
            width: p.width,
            height: p.height,
            clientX: u.clientX,
            clientY: u.clientY
          });
        }
      }), this.lf.on("edge:contextmenu", function(i) {
        var o, a, s, l = i.data, u = i.position, c = i.e, d = u.domOverlayPosition, f = d.x, h = d.y, p = l.id, v = r.lf.graphModel.getEdgeModelById(p);
        if (v) {
          var g = [], y = (o = r.menuTypeMap) === null || o === void 0 ? void 0 : o.get(v.type);
          v && v.menu && Array.isArray(v.menu) ? g = v.menu : y ? g = y : g = (s = (a = r.menuTypeMap) === null || a === void 0 ? void 0 : a.get(Dl)) !== null && s !== void 0 ? s : [], r.__currentData = l, r.showMenu(f, h, g, {
            width: v.width,
            height: v.height,
            clientX: c.clientX,
            clientY: c.clientY
          });
        }
      }), this.lf.on("blank:contextmenu", function(i) {
        var o, a, s = i.position, l = (a = (o = r.menuTypeMap) === null || o === void 0 ? void 0 : o.get(Rl)) !== null && a !== void 0 ? a : [], u = s.domOverlayPosition, c = u.x, d = u.y;
        r.showMenu(c, d, l);
      }), this.lf.on("selection:contextmenu", function(i) {
        var o, a = i.data, s = i.position, l = (o = r.menuTypeMap) === null || o === void 0 ? void 0 : o.get(D1), u = s.domOverlayPosition, c = u.x, d = u.y;
        r.__currentData = a, r.showMenu(c, d, l);
      }), this.lf.on("node:mousedown", function() {
        r.__menuDOM.style.display = "none";
      }), this.lf.on("edge:click", function() {
        r.__menuDOM.style.display = "none";
      }), this.lf.on("blank:click", function() {
        r.__menuDOM.style.display = "none";
      }));
    }, e.prototype.destroy = function() {
      var t;
      this.__menuDOM && ((t = this === null || this === void 0 ? void 0 : this.__container) === null || t === void 0 || t.removeChild(this.__menuDOM), this.__menuDOM = void 0);
    }, e.prototype.showMenu = function(t, n, r, i) {
      if (!(!r || !r.length)) {
        var o = this.__menuDOM;
        if (o) {
          if (o.innerHTML = "", o.append.apply(o, EX([], xX(this.__getMenuDom(r)), !1)), !o.children.length)
            return;
          if (o.style.display = "block", !i) {
            o.style.top = "".concat(n, "px"), o.style.left = "".concat(t, "px");
            return;
          }
          var a = i.width, s = i.height, l = i.clientX, u = i.clientY, c = this.lf.graphModel, d = o.offsetWidth, f = !0, h = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth, p = h - l, v = c.rootEl.getBoundingClientRect(), g = v.left + v.width;
          g < h && (p = g - l), p < d && (f = !1), f ? o.style.left = "".concat(t, "px") : o.style.left = "".concat(t - a, "px");
          var y = o.offsetHeight, m = !0, E = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight, w = E - u, S = v.top + v.height;
          S < E && (w = S - u), w < y && (m = !1), m ? o.style.top = "".concat(n, "px") : o.style.top = "".concat(n - s, "px");
        }
      }
    }, e.prototype.setMenuByType = function(t) {
      var n, r = t.type, i = t.menu;
      !r || !i || (n = this.menuTypeMap) === null || n === void 0 || n.set(r, i);
    }, e.prototype.__getMenuDom = function(t) {
      var n = [];
      return t && t.length > 0 && t.forEach(function(r) {
        var i = document.createElement("li");
        if (r.className ? i.className = "lf-menu-item ".concat(r.className) : i.className = "lf-menu-item", r.icon === !0) {
          var o = document.createElement("span");
          o.className = "lf-menu-item-icon", i.appendChild(o);
        }
        var a = document.createElement("span");
        a.className = "lf-menu-item-text", r.text && (a.innerText = r.text), i.appendChild(a), i.onclickCallback = r.callback, n.push(i);
      }), n;
    }, e.prototype.setMenuConfig = function(t) {
      var n, r, i;
      t && (t.nodeMenu !== void 0 && ((n = this.menuTypeMap) === null || n === void 0 || n.set(Pl, t.nodeMenu ? t.nodeMenu : [])), t.edgeMenu !== void 0 && ((r = this.menuTypeMap) === null || r === void 0 || r.set(Dl, t.edgeMenu ? t.edgeMenu : [])), t.graphMenu !== void 0 && ((i = this.menuTypeMap) === null || i === void 0 || i.set(Rl, t.graphMenu ? t.graphMenu : [])));
    }, e.prototype.addMenuConfig = function(t) {
      var n, r, i, o, a, s, l, u, c;
      if (t) {
        if (Array.isArray(t.nodeMenu)) {
          var d = (r = (n = this.menuTypeMap) === null || n === void 0 ? void 0 : n.get(Pl)) !== null && r !== void 0 ? r : [];
          (i = this.menuTypeMap) === null || i === void 0 || i.set(Pl, d.concat(t.nodeMenu));
        }
        if (Array.isArray(t.edgeMenu)) {
          var d = (a = (o = this.menuTypeMap) === null || o === void 0 ? void 0 : o.get(Dl)) !== null && a !== void 0 ? a : [];
          (s = this.menuTypeMap) === null || s === void 0 || s.set(Dl, d.concat(t.edgeMenu));
        }
        if (Array.isArray(t.graphMenu)) {
          var d = (u = (l = this.menuTypeMap) === null || l === void 0 ? void 0 : l.get(Rl)) !== null && u !== void 0 ? u : [];
          (c = this.menuTypeMap) === null || c === void 0 || c.set(Rl, d.concat(t.graphMenu));
        }
      }
    }, e.prototype.changeMenuItem = function(t, n) {
      if (t === "add")
        this.addMenuConfig(n);
      else if (t === "reset")
        this.setMenuConfig(n);
      else
        throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'");
    }, e.pluginName = "menu", e;
  }()
), CX = function(e) {
  var t = typeof Symbol == "function" && Symbol.iterator, n = t && e[t], r = 0;
  if (n) return n.call(e);
  if (e && typeof e.length == "number") return {
    next: function() {
      return e && r >= e.length && (e = void 0), { value: e && e[r++], done: !e };
    }
  };
  throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
}, OX = (
  /** @class */
  function() {
    function e(t) {
      var n = t.lf, r = t.LogicFlow, i = t.options, o = this;
      this.width = 200, this.height = 150, this.scale = 1, this.translateX = 0, this.translateY = 0, this.showEdge = !1, this.viewPortTop = 0, this.viewPortLeft = 0, this.viewPortWidth = 150, this.viewPortHeight = 75, this.isShow = !1, this.isShowHeader = !1, this.isShowCloseIcon = !1, this.headerTitle = "导航", this.disabledPlugins = ["miniMap", "control", "selectionSelect"], this.onGraphResize = function() {
        o.updateViewPortBounds(), o.isShow && o.updateViewPort();
      }, this.render = function(s, l) {
        o.container = l, o.lf.on("history:change", function() {
          o.isShow && o.setView();
        }), o.lf.on("graph:transform", function() {
          o.isShow && o.setView(!1);
        });
      }, this.show = function(s, l) {
        o.isShow || (o.createMiniMap(s, l), o.setView()), o.isShow = !0;
      }, this.hide = function() {
        o.isShow && (o.removeMiniMap(), o.lf.emit("miniMap:close", {})), o.isShow = !1;
      }, this.updatePosition = function(s) {
        if (typeof s == "object")
          (s.left !== void 0 || s.right !== void 0) && (o.leftPosition = s.left, o.rightPosition = s.right), (s.top !== void 0 || s.bottom !== void 0) && (o.topPosition = s.top, o.bottomPosition = s.bottom);
        else
          switch (s) {
            case "left-top":
              o.leftPosition = 0, o.rightPosition = void 0, o.topPosition = 0, o.bottomPosition = void 0;
              break;
            case "right-top":
              o.leftPosition = void 0, o.rightPosition = 0, o.topPosition = 0, o.bottomPosition = void 0;
              break;
            case "left-bottom":
              o.leftPosition = 0, o.rightPosition = void 0, o.topPosition = void 0, o.bottomPosition = 0;
              break;
            case "right-bottom":
              o.leftPosition = void 0, o.rightPosition = 0, o.topPosition = void 0, o.bottomPosition = 0;
              break;
          }
        o.updateMiniMapPosition();
      }, this.reset = function() {
        o.lf.resetTranslate(), o.lf.resetZoom();
      }, this.setShowEdge = function(s) {
        o.showEdge !== s && (o.showEdge = s, o.setView());
      }, this.startDrag = function(s) {
        document.addEventListener("mousemove", o.drag), document.addEventListener("mouseup", o.drop);
        var l = s.x, u = s.y;
        o.startPosition = { x: l, y: u };
      }, this.drag = function(s) {
        var l = s.x, u = s.y, c = (l - o.startPosition.x) / o.scale, d = (u - o.startPosition.y) / o.scale, f = o.viewPortLeft + c + o.viewPortWidth / o.scale / 2, h = o.viewPortTop + d + o.viewPortHeight / o.scale / 2;
        o.startPosition = { x: l, y: u }, o.lf.focusOn({
          coordinate: {
            x: f,
            y: h
          }
        });
      }, this.drop = function() {
        document.removeEventListener("mousemove", o.drag), document.removeEventListener("mouseup", o.drop);
      }, this.mapClick = function(s) {
        var l = s.offsetX, u = s.offsetY, c = o.translateX + l / o.scale, d = o.translateY + u / o.scale;
        o.lf.focusOn({
          coordinate: {
            x: c,
            y: d
          }
        });
      }, this.lf = n, this.LFCtor = r, i && this.setOption(i), this.viewPortWidth = n.graphModel.width, this.viewPortHeight = n.graphModel.height;
      var a = {
        left: 0,
        right: this.viewPortWidth,
        top: 0,
        bottom: this.viewPortHeight
      };
      this.bounds = a, this.elementAreaBounds = a, this.viewPortBounds = a, this.initMiniMap(), n.on("graph:resize", this.onGraphResize);
    }
    return e.prototype.setOption = function(t) {
      var n = t.width, r = n === void 0 ? 150 : n, i = t.height, o = i === void 0 ? 220 : i, a = t.showEdge, s = a === void 0 ? !1 : a, l = t.isShowHeader, u = l === void 0 ? !1 : l, c = t.isShowCloseIcon, d = c === void 0 ? !1 : c, f = t.leftPosition, h = t.topPosition, p = t.rightPosition, v = p === void 0 ? 0 : p, g = t.bottomPosition, y = g === void 0 ? 0 : g, m = t.headerTitle, E = m === void 0 ? "导航" : m;
      this.width = r, this.height = o, this.showEdge = s, this.isShowHeader = u, this.isShowCloseIcon = d, this.leftPosition = f, this.rightPosition = f !== void 0 ? void 0 : v, this.topPosition = h, this.bottomPosition = h !== void 0 ? void 0 : y, this.headerTitle = E;
    }, e.prototype.initMiniMap = function() {
      var t = document.createElement("div");
      t.className = "lf-mini-map-graph", t.style.width = "".concat(this.width, "px"), t.style.height = "".concat(this.height, "px"), this.lfMap = new this.LFCtor({
        container: t,
        grid: !1,
        isSilentMode: !0,
        stopZoomGraph: !0,
        stopScrollGraph: !0,
        // 禁用画布移动会导致 transformModel.translate 无效，所以这里不禁用
        stopMoveGraph: !1,
        history: !1,
        snapline: !1,
        disabledPlugins: this.disabledPlugins
      }), this.miniMapWrap = t, this.createViewPort(), t.addEventListener("click", this.mapClick);
    }, e.prototype.createMiniMap = function(t, n) {
      var r, i = document.createElement("div");
      this.miniMapContainer = i, i.appendChild(this.miniMapWrap), i.style.position = "absolute", (t !== void 0 || n !== void 0) && (this.leftPosition = t || 0, this.topPosition = n || 0, this.rightPosition = void 0, this.bottomPosition = void 0), this.updateMiniMapPosition(), i.className = "lf-mini-map", this.isShowCloseIcon || i.classList.add("lf-mini-map-no-close-icon"), this.isShowHeader || i.classList.add("lf-mini-map-no-header"), (r = this.container) === null || r === void 0 || r.appendChild(i), this.miniMapWrap.appendChild(this.viewport);
      var o = document.createElement("div");
      o.className = "lf-mini-map-header", o.innerText = this.headerTitle, i.appendChild(o);
      var a = document.createElement("span");
      a.className = "lf-mini-map-close", a.addEventListener("click", this.hide), i.appendChild(a);
    }, e.prototype.updateMiniMapPosition = function() {
      if (this.miniMapContainer) {
        var t = this.miniMapContainer.style;
        this.rightPosition !== void 0 ? (t.right = "".concat(this.rightPosition, "px"), t.left = "") : (t.left = "".concat(this.leftPosition, "px"), t.right = ""), this.bottomPosition !== void 0 ? (t.bottom = "".concat(this.bottomPosition, "px"), t.top = "") : (t.top = "".concat(this.topPosition, "px"), t.bottom = "");
      }
    }, e.prototype.removeMiniMap = function() {
      var t;
      this.miniMapContainer && ((t = this.container) === null || t === void 0 || t.removeChild(this.miniMapContainer));
    }, e.prototype.updateBounds = function(t) {
      t && this.updateElementAreaBounds(t), this.updateViewPortBounds(), this.bounds = {
        left: Math.min(this.elementAreaBounds.left, this.viewPortBounds.left),
        right: Math.max(this.elementAreaBounds.right, this.viewPortBounds.right),
        top: Math.min(this.elementAreaBounds.top, this.viewPortBounds.top),
        bottom: Math.max(this.elementAreaBounds.bottom, this.viewPortBounds.bottom)
      };
    }, e.prototype.updateElementAreaBounds = function(t) {
      var n = {
        left: 0,
        right: 0,
        top: 0,
        bottom: 0
      }, r = t.nodes;
      r && r.length > 0 && r.forEach(function(i) {
        var o, a, s = i.x, l = i.y, u = (o = i.width) !== null && o !== void 0 ? o : 200, c = (a = i.height) !== null && a !== void 0 ? a : 200, d = s - u / 2, f = s + u / 2, h = l - c / 2, p = l + c / 2;
        n.left = Math.min(d, n.left), n.right = Math.max(f, n.right), n.top = Math.min(h, n.top), n.bottom = Math.max(p, n.bottom);
      }), this.elementAreaBounds = n;
    }, e.prototype.updateViewPortBounds = function() {
      var t = this.lf.getTransform(), n = t.TRANSLATE_X, r = t.TRANSLATE_Y, i = t.SCALE_X, o = t.SCALE_Y, a = this.lf.graphModel, s = a.width, l = a.height;
      this.viewPortBounds = {
        left: -n / i,
        right: (-n + s) / i,
        top: -r / o,
        bottom: (-r + l) / o
      };
    }, e.prototype.resetData = function(t) {
      var n = t.nodes, r = t.edges;
      return n.forEach(function(i) {
        i.text = void 0;
      }), this.showEdge && r.forEach(function(i) {
        i.text = void 0;
      }), {
        nodes: n,
        // 是否渲染边
        edges: this.showEdge ? r : []
      };
    }, e.prototype.setView = function(t) {
      var n, r;
      if (t === void 0 && (t = !0), t) {
        var i = this.lf.getGraphRawData(), o = this.resetData(i), a = this.lf.viewMap, s = this.lf.graphModel.modelMap, l = this.lfMap.viewMap;
        try {
          for (var u = CX(a.keys()), c = u.next(); !c.done; c = u.next()) {
            var d = c.value;
            l.has(d) || this.lfMap.register({
              type: d,
              view: a.get(d),
              model: s.get(d)
            });
          }
        } catch (R) {
          n = { error: R };
        } finally {
          try {
            c && !c.done && (r = u.return) && r.call(u);
          } finally {
            if (n) throw n.error;
          }
        }
        this.lfMap.render(o), this.updateBounds(o);
      } else
        this.updateBounds();
      var f = this.bounds, h = f.left, p = f.top, v = f.right, g = f.bottom, y = v - h, m = g - p, E = this.width / y, w = this.height / m, S = Math.min(E, w);
      this.scale = S;
      var _ = h - (this.width / S - y) / 2, b = p - (this.height / S - m) / 2;
      if (this.lfMap.graphModel.transformModel.translate(-_ + this.translateX, -b + this.translateY), this.translateX = _, this.translateY = b, this.miniMapWrap.firstChild) {
        var T = this.miniMapWrap.firstChild.style;
        T.pointerEvents = "none", T.transform = "matrix(".concat(S, ", 0, 0, ").concat(S, ", 0, 0)"), T.transformOrigin = "left top", T.height = "".concat(this.height / S, "px"), T.width = "".concat(this.width / S, "px"), this.updateViewPort();
      }
    }, e.prototype.updateViewPort = function() {
      var t = this.viewport.style, n = this.lf.getTransform(), r = n.TRANSLATE_X, i = n.TRANSLATE_Y, o = n.SCALE_X, a = n.SCALE_Y, s = this.lf.graphModel, l = s.width, u = s.height;
      this.viewPortLeft = -r / o, this.viewPortTop = -i / a, this.viewPortWidth = l / o * this.scale, this.viewPortHeight = u / a * this.scale, t.width = "".concat(this.viewPortWidth, "px"), t.height = "".concat(this.viewPortHeight, "px"), t.left = "".concat((this.viewPortLeft - this.translateX) * this.scale, "px"), t.top = "".concat((this.viewPortTop - this.translateY) * this.scale, "px");
    }, e.prototype.createViewPort = function() {
      var t = document.createElement("div");
      t.className = "lf-minimap-viewport", t.addEventListener("mousedown", this.startDrag), t.addEventListener("click", function(n) {
        n.stopPropagation();
      }), this.viewport = t;
    }, e.prototype.destroy = function() {
      this.lf.off("graph:resize", this.onGraphResize);
    }, e.pluginName = "miniMap", e;
  }()
), AX = (
  /** @class */
  function() {
    function e(t) {
      var n = t.lf, r = this;
      this.disabled = !0, this.isDefaultStopMoveGraph = !1, this.isWholeNode = !0, this.isWholeEdge = !0, this.draw = function(o) {
        var a = r.lf.getPointByClient(o.clientX, o.clientY).domOverlayPosition, s = a.x, l = a.y;
        if (r.endPoint = {
          x: s,
          y: l
        }, r.startPoint) {
          var u = r.startPoint, c = u.x, d = u.y, f = c, h = d, p = s - c, v = l - d;
          s < c && (f = s, p = c - s), l < d && (h = l, v = d - l), r.wrapper && (r.wrapper.style.left = "".concat(f, "px"), r.wrapper.style.top = "".concat(h, "px"), r.wrapper.style.width = "".concat(p, "px"), r.wrapper.style.height = "".concat(v, "px"));
        }
      }, this.drawOff = function() {
        var o;
        if (document.removeEventListener("mousemove", r.draw), document.removeEventListener("mouseup", r.drawOff), r.wrapper && (r.wrapper.oncontextmenu = null, (o = r.container) === null || o === void 0 || o.removeChild(r.wrapper)), r.startPoint && r.endPoint) {
          var a = r.startPoint, s = a.x, l = a.y, u = r.endPoint, c = u.x, d = u.y, f = [Math.min(s, c), Math.min(l, d)], h = [Math.max(s, c), Math.max(l, d)];
          if (r.lf.emit("selection:selected-area", {
            topLeft: f,
            bottomRight: h
          }), Math.abs(c - s) < 10 && Math.abs(d - l) < 10)
            return;
          var p = r.lf.graphModel.getAreaElement(f, h, r.isWholeEdge, r.isWholeNode, !0), v = r.lf.graphModel, g = v.dynamicGroup, y = v.group;
          p.forEach(function(m) {
            (!y || !y.getNodeGroup(m.id)) && r.lf.selectElementById(m.id, !0), (!g || !g.getGroupByNodeId(m.id)) && r.lf.selectElementById(m.id, !0);
          }), r.lf.emit("selection:selected", {
            elements: p,
            leftTopPoint: f,
            rightBottomPoint: h
          });
        }
      }, this.lf = n;
      var i = n.getEditConfig().stopMoveGraph;
      this.isDefaultStopMoveGraph = i, n.openSelectionSelect = function() {
        r.openSelectionSelect();
      }, n.closeSelectionSelect = function() {
        r.closeSelectionSelect();
      };
    }
    return e.prototype.render = function(t, n) {
      var r = this;
      this.container = n, t.on("blank:mousedown", function(i) {
        var o = i.e, a = t.getEditConfig();
        if (!(!a.stopMoveGraph || r.disabled)) {
          var s = o.button === 2;
          if (!s) {
            var l = t.getPointByClient(o.clientX, o.clientY).domOverlayPosition, u = l.x, c = l.y;
            r.startPoint = {
              x: u,
              y: c
            }, r.endPoint = {
              x: u,
              y: c
            };
            var d = document.createElement("div");
            d.className = "lf-selection-select", d.oncontextmenu = function(h) {
              h.preventDefault();
            }, d.style.top = "".concat(r.startPoint.y, "px"), d.style.left = "".concat(r.startPoint.x, "px"), n.appendChild(d), r.wrapper = d, document.addEventListener("mousemove", r.draw), document.addEventListener("mouseup", r.drawOff);
          }
        }
      });
    }, e.prototype.setSelectionSense = function(t, n) {
      t === void 0 && (t = !0), n === void 0 && (n = !0), this.isWholeEdge = t, this.isWholeNode = n;
    }, e.prototype.openSelectionSelect = function() {
      var t = this.lf.getEditConfig().stopMoveGraph;
      t || (this.isDefaultStopMoveGraph = !1, this.lf.updateEditConfig({
        stopMoveGraph: !0
      })), this.open();
    }, e.prototype.closeSelectionSelect = function() {
      this.isDefaultStopMoveGraph || this.lf.updateEditConfig({
        stopMoveGraph: !1
      }), this.close();
    }, e.prototype.open = function() {
      this.disabled = !1;
    }, e.prototype.close = function() {
      this.disabled = !0;
    }, e.pluginName = "selectionSelect", e;
  }()
);
var rC = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), vs = function() {
  return vs = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, vs.apply(this, arguments);
}, cu = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, NX = {
  tr: "tl",
  lb: "tl",
  tl: "tr",
  rb: "tr",
  br: "bl",
  lt: "bl",
  bl: "br",
  rt: "br"
};
function MX(e) {
  for (var t = e, n = 1; n < t.length - 1; ) {
    var r = cu(t[n - 1], 2), i = r[0], o = r[1], a = cu(t[n], 2), s = a[0], l = a[1], u = cu(t[n + 1], 2), c = u[0], d = u[1];
    i === s && s === c || o === l && l === d ? t.splice(n, 1) : n++;
  }
  return t;
}
function TX(e, t, n, r) {
  var i = [e[0], e[1]], o = [e[0], e[1]];
  switch (n) {
    case "tl":
      return t === "tr" ? (i[1] += r, o[0] += r) : t === "lb" && (i[0] += r, o[1] += r), [i, o];
    case "tr":
      return t === "tl" ? (i[1] += r, o[0] -= r) : t === "rb" && (i[0] -= r, o[1] += r), [i, o];
    case "bl":
      return t === "br" ? (i[1] -= r, o[0] += r) : t === "lt" && (i[0] += r, o[1] -= r), [i, o];
    case "br":
      return t === "bl" ? (i[1] -= r, o[0] -= r) : t === "rt" && (i[0] -= r, o[1] -= r), [i, o];
    default:
      return [];
  }
}
function PX(e, t, n, r) {
  var i, o = "", a = "";
  e[0] === t[0] ? o = e[1] > t[1] ? "t" : "b" : e[1] === t[1] && (o = e[0] > t[0] ? "l" : "r"), t[0] === n[0] ? a = t[1] > n[1] ? "t" : "b" : t[1] === n[1] && (a = t[0] > n[0] ? "l" : "r");
  var s = Math.min(Math.hypot(t[0] - e[0], t[1] - e[1]) / 2, Math.hypot(n[0] - t[0], n[1] - t[1]) / 2, r) || 1 / 5 * r, l = "".concat(o).concat(a), u = NX[l] || "-", c = "L ".concat(e[0], " ").concat(e[1]);
  if (u === "-")
    c += "L ".concat(t[0], " ").concat(t[1], " L ").concat(n[0], " ").concat(n[1]);
  else {
    var d = cu(TX(t, l, u, s), 2), f = d[0], h = d[1];
    f && h && (c += "L ".concat(f[0], " ").concat(f[1], " Q ").concat(t[0], " ").concat(t[1], " ").concat(h[0], " ").concat(h[1]), i = cu(h, 2), t[0] = i[0], t[1] = i[1]);
  }
  return c;
}
function DX(e, t) {
  var n = 0, r = "";
  if (e.length === 2)
    r += "M".concat(e[n][0], " ").concat(e[n++][1], " L ").concat(e[n][0], " ").concat(e[n][1]);
  else {
    for (r += "M".concat(e[n][0], " ").concat(e[n++][1]); n + 1 < e.length; ) {
      var i = e[n - 1], o = e[n], a = e[n++ + 1];
      r += PX(i, o, a, t);
    }
    r += "L ".concat(e[n][0], " ").concat(e[n][1]);
  }
  return r;
}
(function(e) {
  rC(t, e);
  function t() {
    return e !== null && e.apply(this, arguments) || this;
  }
  return t.prototype.getEdge = function() {
    var n = this.props.model, r = n.points, i = n.isAnimation, o = n.arrowConfig, a = n.radius, s = a === void 0 ? 5 : a, l = n.getEdgeStyle(), u = n.getEdgeAnimationStyle(), c = MX(r.split(" ").map(function(h) {
      return h.split(",").map(function(p) {
        return +p;
      });
    })), d = DX(c, s), f = vs(vs(vs({ style: i ? u : {} }, l), o), { fill: "none" });
    return q("path", vs({ d }, f));
  }, t;
})(Vs);
(function(e) {
  rC(t, e);
  function t() {
    return e !== null && e.apply(this, arguments) || this;
  }
  return t;
})(Fs);
var iC = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), af = function() {
  return af = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, af.apply(this, arguments);
}, R1 = function(e, t) {
  var n = typeof Symbol == "function" && e[Symbol.iterator];
  if (!n) return e;
  var r = n.call(e), i, o = [], a;
  try {
    for (; (t === void 0 || t-- > 0) && !(i = r.next()).done; ) o.push(i.value);
  } catch (s) {
    a = { error: s };
  } finally {
    try {
      i && !i.done && (n = r.return) && n.call(r);
    } finally {
      if (a) throw a.error;
    }
  }
  return o;
}, L1 = function(e, t, n) {
  if (n || arguments.length === 2) for (var r = 0, i = t.length, o; r < i; r++)
    (o || !(r in t)) && (o || (o = Array.prototype.slice.call(t, 0, r)), o[r] = t[r]);
  return e.concat(o || Array.prototype.slice.call(t));
}, RX = (
  /** @class */
  function(e) {
    iC(t, e);
    function t() {
      return e !== null && e.apply(this, arguments) || this;
    }
    return t.prototype.getLabelShape = function() {
      var n = this.props.model, r = n.id, i = n.x, o = n.y, a = n.width, s = n.height, l = n.properties, u = this.props.model.getNodeStyle();
      return q("svg", {
        x: i - a / 2,
        y: o - s / 2,
        width: 50,
        height: 24,
        style: "z-index: 0; background: none; overflow: auto;"
      }, [
        l.labelText ? q("text", {
          x: 0,
          y: -5,
          fontSize: "16px",
          fill: u.stroke
        }, l.labelText) : "",
        l.disabledDelete ? "" : q("text", {
          x: l.labelText ? 50 : 0,
          y: -5,
          fontSize: "24px",
          cursor: "pointer",
          fill: u.stroke,
          onclick: this.handleCustomDeleteIconClick.bind(this, r)
        }, "x")
      ]);
    }, t.prototype.getShape = function() {
      var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.id, l = this.props.model.getNodeStyle();
      return q("g", {}, [
        q("rect", af(af({}, l), { x: r - o / 2, y: i - a / 2, width: o, height: a, id: s })),
        this.getLabelShape()
      ]);
    }, t.prototype.toFront = function() {
    }, t.prototype.handleCustomDeleteIconClick = function(n) {
      var r = this.props.graphModel;
      r.deleteNode(n);
    }, t;
  }(Fd)
), LX = (
  /** @class */
  function(e) {
    iC(t, e);
    function t() {
      var n = e.apply(this, L1([], R1(arguments), !1)) || this;
      return n.d = 10, n.isResize = !1, n;
    }
    return t.prototype.initNodeData = function(n) {
      n.text = {
        value: "",
        x: n.x,
        y: n.y,
        draggable: !1,
        editable: !1
      }, e.prototype.initNodeData.call(this, n), this.zIndex = 0, this.draggable = !0;
    }, t.prototype.setAttributes = function() {
      var n = this, r;
      this.points = [], ((r = this.properties) === null || r === void 0 ? void 0 : r.node_selection_ids).length > 1 && setTimeout(function() {
        var i;
        n.updatePointsByNodes(((i = n.properties) === null || i === void 0 ? void 0 : i.node_selection_ids) || []);
      });
    }, t.prototype.getNodeStyle = function() {
      var n = e.prototype.getNodeStyle.call(this);
      return n.stroke = this.properties.strokeColor || "#008000", n.strokeDasharray = "10 5", n;
    }, t.prototype.getDefaultAnchor = function() {
      return [];
    }, t.prototype.updatePoints = function(n) {
      this.points = n;
    }, t.prototype.updateCoordinate = function(n) {
      var r = n.x, i = n.y;
      this.x = r, this.y = i;
    }, t.prototype.updatePointsByNodes = function(n) {
      var r = this, i = [], o = 1 / 0, a = 1 / 0, s = -1 / 0, l = -1 / 0;
      n.forEach(function(u) {
        var c = r.graphModel.getNodeModelById(u);
        if (c) {
          var d = c.width, f = c.height, h = c.x, p = c.y;
          o = Math.min(o, h - d / 2 - r.d), a = Math.min(a, p - f / 2 - r.d), s = Math.max(s, h + d / 2 + r.d), l = Math.max(l, p + f / 2 + r.d);
        }
      }), i.push([o, a], [s, a], [s, l], [o, l]), ![o, a, s, l].some(function(u) {
        return Math.abs(u) === 1 / 0;
      }) && (this.updatePoints(i), this.updateCoordinate({
        x: (s + o) / 2,
        y: (l + a) / 2
      }));
    }, t.prototype.resize = function(n) {
      var r;
      this.isResize = !0;
      for (var i = n.width, o = n.height, a = {
        x: i / this.width,
        y: o / this.height
      }, s = (this.properties.node_selection_ids || []).slice(), l = [], u = /* @__PURE__ */ new Set(); s.length; ) {
        var c = s.shift(), d = (r = this.graphModel.nodesMap[c]) === null || r === void 0 ? void 0 : r.model;
        if (d) {
          if (!rd(d)) {
            l.push(d);
            continue;
          }
          u.has(d.id) || (u.add(d.id), s.push.apply(s, L1([], R1(d.properties.node_selection_ids || []), !1)));
        }
      }
      var f = {
        x: this.x - this.width / 2,
        y: this.y - this.height / 2
      }, h = e.prototype.resize.call(this, n), p = {
        x: this.x - this.width / 2,
        y: this.y - this.height / 2
      };
      return l.forEach(function(v) {
        v.width = v.width * a.x, v.height = v.height * a.y;
        var g = (v.x - f.x) * a.x + p.x - v.x, y = (v.y - f.y) * a.y + p.y - v.y;
        v.move(g, y, !0);
      }), this.isResize = !1, h;
    }, t;
  }(kd)
), gg = "node-selection";
(function() {
  function e(t) {
    var n = t.lf;
    this.selectNodes = [], this.d = 10, this.lf = n, n.register({
      type: gg,
      view: RX,
      model: LX
    });
  }
  return Object.defineProperty(e.prototype, "selectNodesIds", {
    /**
     * 获取所选node的id数组
     */
    get: function() {
      return this.selectNodes.map(function(t) {
        return t.id;
      });
    },
    enumerable: !1,
    configurable: !0
  }), e.prototype.addNodeSelection = function() {
    var t = this.lf.addNode({
      type: "node-selection",
      text: "",
      properties: {
        node_selection_ids: this.selectNodesIds
      },
      x: 0,
      y: 0
    });
    t.updatePointsByNodes(this.selectNodesIds);
  }, e.prototype.updateNodeSelection = function() {
    var t, n = this.getNodeSelection();
    n && (this.lf.setProperties(n.id, {
      node_selection_ids: this.selectNodesIds
    }), (t = this.lf.getNodeModelById(n.id)) === null || t === void 0 || t.updatePointsByNodes(this.selectNodesIds));
  }, e.prototype.getNodeSelection = function() {
    var t = this, n = this.selectNodesIds, r = this.lf.getGraphRawData(), i = n.filter(function(o) {
      return o !== t.currentClickNode.id;
    });
    return r.nodes.find(function(o) {
      if (o.type === "node-selection") {
        var a = al(o, "properties.node_selection_ids", []);
        return i.every(function(s) {
          return a.includes(s);
        });
      }
      return !1;
    });
  }, e.prototype.onNodeChange = function(t, n) {
    var r = t.graphModel.nodes.filter(function(i) {
      if (!rd(i))
        return !1;
      var o = i.properties.node_selection_ids || [];
      return o.includes(n.id);
    });
    Promise.resolve().then(function() {
      r.forEach(function(i) {
        i.updatePointsByNodes(i.properties.node_selection_ids || []);
      });
    });
  }, e.prototype.render = function(t) {
    var n = this;
    this.lf = t, t.on("node:click", function(r) {
      var i;
      if (!(!r.e.shiftKey || r.data.type === gg)) {
        n.currentClickNode = r.data;
        var o = !1;
        n.selectNodesIds.includes(r.data.id) && ((i = n.lf.getNodeModelById(r.data.id)) === null || i === void 0 || i.setSelected(!1), o = !0);
        var a = t.getSelectElements(!0).nodes;
        n.selectNodes = a, n.selectNodes.length === 1 ? o ? n.updateNodeSelection() : n.addNodeSelection() : n.selectNodes.length > 1 && n.updateNodeSelection();
      }
    }), t.graphModel.addNodeMoveRules(function(r, i, o) {
      if (n.onNodeChange(t, r), rd(r) && !r.isResize) {
        var a = r.properties.node_selection_ids || [];
        return t.graphModel.moveNodes(a, i, o, !0), !0;
      }
      return !0;
    }), t.graphModel.addNodeResizeRules(function(r) {
      return rd(r) || n.onNodeChange(t, r), !0;
    });
  }, e.pluginName = "node-selection", e;
})();
var rd = function(e) {
  return !!(e && e.type === gg);
}, $X = /* @__PURE__ */ function() {
  var e = function(t, n) {
    return e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(r, i) {
      r.__proto__ = i;
    } || function(r, i) {
      for (var o in i) Object.prototype.hasOwnProperty.call(i, o) && (r[o] = i[o]);
    }, e(t, n);
  };
  return function(t, n) {
    if (typeof n != "function" && n !== null)
      throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");
    e(t, n);
    function r() {
      this.constructor = t;
    }
    t.prototype = n === null ? Object.create(n) : (r.prototype = n.prototype, new r());
  };
}(), sf = function() {
  return sf = Object.assign || function(e) {
    for (var t, n = 1, r = arguments.length; n < r; n++) {
      t = arguments[n];
      for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
    }
    return e;
  }, sf.apply(this, arguments);
};
(function(e) {
  $X(t, e);
  function t() {
    return e !== null && e.apply(this, arguments) || this;
  }
  return t.prototype.getLabelShape = function() {
    var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = n.properties;
    return q("text", {
      x: r - o / 2 + 5,
      y: i - a / 2 + 16,
      fontSize: 12,
      fill: "blue"
    }, s.moreText);
  }, t.prototype.getShape = function() {
    var n = this.props.model, r = n.x, i = n.y, o = n.width, a = n.height, s = this.props.model.getNodeStyle();
    return q("g", {}, [
      q("rect", sf(sf({}, s), { fill: "#FFFFFF", x: r - o / 2, y: i - a / 2 })),
      this.getLabelShape()
    ]);
  }, t;
})(La);
const Ss = document.documentElement;
let zp = Ss.querySelector("head");
const $1 = document.createElement("style");
let k1 = !1, Ll = !1, id = "requestFullscreen", od = "exitFullscreen", du = "fullscreenElement", fu = "fullscreenchange";
function oC(e) {
  return e instanceof HTMLElement ? e : Ss;
}
function fl() {
  return k1 ? Ll : (k1 = !0, "webkitRequestFullScreen" in Ss ? (id = "webkitRequestFullScreen", od = "webkitExitFullscreen", du = "webkitFullscreenElement", fu = "webkitfullscreenchange", Ll = !0) : "msRequestFullscreen" in Ss ? (id = "msRequestFullscreen", od = "msExitFullscreen", du = "msFullscreenElement", fu = "MSFullscreenChange", Ll = !0) : "mozRequestFullScreen" in Ss ? (id = "mozRequestFullScreen", od = "mozCancelFullScreen", du = "mozFullScreenElement", fu = "mozfullscreenchange", Ll = !0) : (console.error("当前浏览器不支持 Fullscreen API !"), Ll = !1));
}
function kX(e, t) {
  if (fl())
    return oC(e)[id]();
}
function IX() {
  if (fl())
    return Ss.contains($1) && (zp == null || zp.removeChild($1)), document[od]();
}
function BX(e) {
  return fl() ? oC(e) === document[du] : !1;
}
function jX(e, t) {
  return fl() ? BX(e) ? (IX(), !1) : (kX(e), !0) : !1;
}
function zX(e) {
  if (!fl())
    return;
  const t = () => {
    e(!!document[du]);
  };
  return window.addEventListener(fu, t), () => {
    window.removeEventListener(fu, t);
  };
}
const FX = { class: "lf-designer_toolbar" }, HX = { class: "button-list_column" }, VX = { style: { "text-align": "center", display: "inline-block", width: "40px" } }, WX = { class: "preview-model" }, GX = /* @__PURE__ */ fe({
  name: "LfToolbar",
  __name: "index",
  props: {
    lf: {
      type: Object,
      default: () => {
      }
    },
    editable: {
      type: Boolean,
      default: !0
    },
    useSave: {
      type: Boolean,
      default: !1
    },
    useOpen: {
      type: Boolean,
      default: !1
    },
    disabled: {
      type: Boolean,
      default: !1
    },
    translatePrefix: {
      type: String,
      default: ""
    },
    fileName: {
      type: String,
      default: "Process"
    }
  },
  setup(e, { expose: t }) {
    const n = e, r = le(!1), i = le(!1), o = le(!1), a = le(!1), s = le(1), l = le(""), u = le(""), c = le(null), { t: d } = bf();
    async function f() {
    }
    async function h(k) {
      var de, Ne;
      const J = k2(k);
      (de = n.lf) == null || de.clearData(), (Ne = n.lf) == null || Ne.render(J);
    }
    function p() {
      var k;
      (k = c.value) == null || k.click();
    }
    function v() {
      if (c.value && c.value.files) {
        const k = c.value.files[0], J = new FileReader();
        J.readAsText(k), J.onload = function() {
          const de = this.result;
          h(de);
        }, c.value.value = "", c.value.files = null;
      }
    }
    function g() {
      var k;
      (k = n.lf) == null || k.getSnapshot(n.fileName, { fileType: "svg" });
    }
    function y() {
      var k;
      (k = n.lf) == null || k.getSnapshot(n.fileName, { fileType: "png" });
    }
    async function m() {
      var k;
      try {
        i.value = !0;
        const J = (k = n.lf) == null ? void 0 : k.getGraphRawData();
        u.value = JSON.stringify(J, null, 2), l.value = $2(J || {});
      } catch (J) {
        console.error(J);
      }
    }
    const E = le(!0);
    function w() {
      var k;
      (k = n.lf) == null || k.zoom(!0);
    }
    function S() {
      var k;
      (k = n.lf) == null || k.zoom(!1);
    }
    function _() {
      var k, J;
      (k = n.lf) == null || k.resetZoom(), (J = n.lf) == null || J.translateCenter();
    }
    function b(k) {
      var de;
      const J = (de = n.lf) == null ? void 0 : de.extension.miniMap;
      J && (wf(k) ? E.value = !E.value : E.value = k, E.value ? J.show() : J.hide(), ow("minimap", E.value));
    }
    const T = le(fl()), R = le(!1);
    function B() {
      jX(document.querySelector("#lf-designer__wrap")), _();
    }
    zX((k) => {
      R.value = k;
    });
    function K() {
      var k;
      o.value && ((k = n.lf) == null || k.undo());
    }
    function ae() {
      var k;
      a.value && ((k = n.lf) == null || k.redo());
    }
    function x() {
      var k;
      (k = n.lf) == null || k.clearData();
    }
    const P = le(!1);
    function L() {
      if (n.lf) {
        const k = n.lf, J = k.extension.selectionSelect;
        J.openSelectionSelect(), P.value = !0, k.once("selection:selected", () => {
          J.closeSelectionSelect(), P.value = !1;
        });
      }
    }
    return sd(() => {
      var k, J, de, Ne, se;
      (k = n.lf) == null || k.on(
        "history:change",
        ({ data: { undoAble: G, redoAble: be } }) => {
          a.value = be, o.value = G;
        }
      ), (J = n.lf) == null || J.on("graph:transform", ({ transform: G }) => {
        s.value = Math.round(G.SCALE_X * 100) / 100;
      }), E.value = ((se = (Ne = (de = n.lf) == null ? void 0 : de.extension) == null ? void 0 : Ne.miniMap) == null ? void 0 : se.isShow) || !1;
    }), sd(() => {
      n.editable === !1 && b(!1);
    }), t({
      importXML: h,
      downloadProcessAsSvg: g,
      downloadProcessAsPng: y,
      zoomReset: _,
      toggleMinimap: b,
      toggleFullscreen: B
    }), (k, J) => {
      const de = Ns, Ne = Bg, se = Wl, G = Xl, be = Ie("highlightjs"), Oe = nv;
      return X(), he("div", FX, [
        A(se, null, {
          default: Z(() => [
            e.editable && e.useSave ? (X(), ot(Ne, {
              key: 0,
              position: "bl",
              "popup-container": "#lf-designer__wrap"
            }, {
              content: Z(() => [
                Lt(Mt(oe(d)(`${e.translatePrefix}saveModel`)), 1)
              ]),
              default: Z(() => [
                A(de, {
                  loading: oe(r),
                  secondary: "",
                  onClick: f
                }, {
                  default: Z(() => [
                    A(oe(gD), {
                      name: "Save",
                      size: 16
                    })
                  ]),
                  _: 1
                }, 8, ["loading"])
              ]),
              _: 1
            })) : vt("", !0),
            e.editable && e.useOpen ? (X(), ot(Ne, {
              key: 1,
              position: "bl",
              "popup-container": "#lf-designer__wrap"
            }, {
              content: Z(() => [
                Lt(Mt(oe(d)(`${e.translatePrefix}openFile`)), 1)
              ]),
              default: Z(() => [
                A(de, {
                  disabled: e.disabled,
                  secondary: "",
                  onClick: p
                }, {
                  default: Z(() => [
                    A(oe(dD), {
                      name: "Folder",
                      size: 16
                    })
                  ]),
                  _: 1
                }, 8, ["disabled"])
              ]),
              _: 1
            })) : vt("", !0),
            e.editable ? (X(), ot(Ne, {
              key: 2,
              position: "bl",
              "popup-container": "#lf-designer__wrap"
            }, {
              content: Z(() => [
                Y("div", HX, [
                  A(de, { onClick: g }, {
                    default: Z(() => [
                      Lt(Mt(oe(d)(`${e.translatePrefix}exportAsSVG`)), 1)
                    ]),
                    _: 1
                  }),
                  A(de, { onClick: y }, {
                    default: Z(() => [
                      Lt(Mt(oe(d)(`${e.translatePrefix}exportAsPNG`)), 1)
                    ]),
                    _: 1
                  })
                ])
              ]),
              default: Z(() => [
                A(de, { secondary: "" }, {
                  default: Z(() => [
                    A(oe(lD), {
                      name: "Download",
                      size: 16
                    })
                  ]),
                  _: 1
                })
              ]),
              _: 1
            })) : vt("", !0),
            e.editable ? (X(), ot(Ne, {
              key: 3,
              position: "bl",
              "popup-container": "#lf-designer__wrap"
            }, {
              content: Z(() => [
                Lt(Mt(oe(d)(`${e.translatePrefix}previewAsXML`)), 1)
              ]),
              default: Z(() => [
                A(de, {
                  secondary: "",
                  onClick: m
                }, {
                  default: Z(() => [
                    A(oe(cD), {
                      name: "Eye",
                      size: 16
                    })
                  ]),
                  _: 1
                })
              ]),
              _: 1
            })) : vt("", !0)
          ]),
          _: 1
        }),
        A(se, null, {
          default: Z(() => [
            A(Ne, {
              position: "bl",
              "popup-container": "#lf-designer__wrap"
            }, {
              content: Z(() => [
                Lt(Mt(oe(d)(`${e.translatePrefix}ZoomOut`)), 1)
              ]),
              default: Z(() => [
                A(de, {
                  onClick: J[0] || (J[0] = (Ae) => S())
                }, {
                  default: Z(() => [
                    A(oe(bD), { size: 16 })
                  ]),
                  _: 1
                })
              ]),
              _: 1
            }),
            A(Ne, {
              position: "bl",
              "popup-container": "#lf-designer__wrap"
            }, {
              content: Z(() => [
                Lt(Mt(oe(d)(`${e.translatePrefix}ZoomReset`)), 1)
              ]),
              default: Z(() => [
                A(de, {
                  onClick: J[1] || (J[1] = (Ae) => _())
                }, {
                  default: Z(() => [
                    Y("span", VX, Mt(`${Math.floor(oe(s) * 10) * 10}%`), 1)
                  ]),
                  _: 1
                })
              ]),
              _: 1
            }),
            A(Ne, {
              position: "bl",
              "popup-container": "#lf-designer__wrap"
            }, {
              content: Z(() => [
                Lt(Mt(oe(d)(`${e.translatePrefix}ZoomIn`)), 1)
              ]),
              default: Z(() => [
                A(de, {
                  onClick: J[2] || (J[2] = (Ae) => w())
                }, {
                  default: Z(() => [
                    A(oe(_D), { size: 16 })
                  ]),
                  _: 1
                })
              ]),
              _: 1
            }),
            e.editable ? (X(), ot(Ne, {
              key: 0,
              position: "bl",
              "popup-container": "#lf-designer__wrap"
            }, {
              content: Z(() => [
                Lt(Mt(oe(E) ? oe(d)(`${e.translatePrefix}unableMinimap`) : oe(d)(`${e.translatePrefix}enableMinimap`)), 1)
              ]),
              default: Z(() => [
                A(de, {
                  class: ze({ "is-unable": !oe(E) }),
                  onClick: J[3] || (J[3] = (Ae) => b())
                }, {
                  default: Z(() => [
                    A(oe(pD), { size: 16 })
                  ]),
                  _: 1
                }, 8, ["class"])
              ]),
              _: 1
            })) : vt("", !0),
            !e.editable && oe(T) ? (X(), ot(Ne, {
              key: 1,
              position: "bl",
              "popup-container": "#lf-designer__wrap"
            }, {
              content: Z(() => [
                Lt(Mt(oe(R) ? oe(d)(`${e.translatePrefix}notFullscreen`) : oe(d)(`${e.translatePrefix}onFullscreen`)), 1)
              ]),
              default: Z(() => [
                A(de, {
                  class: ze({ "is-unable": oe(R) }),
                  onClick: J[4] || (J[4] = (Ae) => B())
                }, {
                  default: Z(() => [
                    A(oe(fD), {
                      name: "Fullscreen",
                      size: 16
                    })
                  ]),
                  _: 1
                }, 8, ["class"])
              ]),
              _: 1
            })) : vt("", !0)
          ]),
          _: 1
        }),
        e.editable ? (X(), ot(se, {
          key: 0,
          disabled: e.disabled
        }, {
          default: Z(() => [
            A(Ne, {
              position: "bl",
              "popup-container": "#lf-designer__wrap"
            }, {
              content: Z(() => [
                Lt(Mt(oe(d)(`${e.translatePrefix}Undo`)), 1)
              ]),
              default: Z(() => [
                A(de, {
                  disabled: !oe(o),
                  onClick: K
                }, {
                  default: Z(() => [
                    A(oe(mD), { size: 16 })
                  ]),
                  _: 1
                }, 8, ["disabled"])
              ]),
              _: 1
            }),
            A(Ne, {
              position: "bl",
              "popup-container": "#lf-designer__wrap"
            }, {
              content: Z(() => [
                Lt(Mt(oe(d)(`${e.translatePrefix}Redo`)), 1)
              ]),
              default: Z(() => [
                A(de, {
                  disabled: !oe(a),
                  onClick: ae
                }, {
                  default: Z(() => [
                    A(oe(vD), { size: 16 })
                  ]),
                  _: 1
                }, 8, ["disabled"])
              ]),
              _: 1
            }),
            A(Ne, {
              position: "bl",
              "popup-container": "#lf-designer__wrap"
            }, {
              content: Z(() => [
                Lt(Mt(oe(d)(`${e.translatePrefix}Clear`)), 1)
              ]),
              default: Z(() => [
                A(de, { onClick: x }, {
                  default: Z(() => [
                    A(oe(uD), { size: 16 })
                  ]),
                  _: 1
                })
              ]),
              _: 1
            })
          ]),
          _: 1
        }, 8, ["disabled"])) : vt("", !0),
        e.editable ? (X(), ot(G, { key: 1 }, {
          default: Z(() => [
            A(Ne, {
              position: "bl",
              "popup-container": "#lf-designer__wrap"
            }, {
              content: Z(() => [
                Lt(Mt(oe(d)(`${e.translatePrefix}Select`)), 1)
              ]),
              default: Z(() => [
                A(de, {
                  class: ze({ "on-using": oe(P) }),
                  onClick: J[5] || (J[5] = (Ae) => L())
                }, {
                  default: Z(() => [
                    A(oe(yD), { size: 16 })
                  ]),
                  _: 1
                }, 8, ["class"])
              ]),
              _: 1
            })
          ]),
          _: 1
        })) : vt("", !0),
        mt(k.$slots, "default"),
        Y("input", {
          ref_key: "importRef",
          ref: c,
          type: "file",
          style: { display: "none" },
          accept: ".xml,.bpmn",
          onChange: v
        }, null, 544),
        A(Oe, {
          visible: oe(i),
          "onUpdate:visible": J[6] || (J[6] = (Ae) => Up(i) ? i.value = Ae : null),
          footer: !1,
          title: oe(d)(`${e.translatePrefix}previewAs`),
          width: "64vw"
        }, {
          default: Z(() => [
            Y("div", WX, [
              A(be, {
                language: "json",
                code: oe(u)
              }, null, 8, ["code"])
            ])
          ]),
          _: 1
        }, 8, ["visible", "title"])
      ]);
    };
  }
}), Ot = /* @__PURE__ */ fe({
  name: "PopoverNode",
  __name: "PopoverNode",
  props: {
    title: {
      type: String,
      default: void 0
    },
    nodeCls: {
      type: String,
      default: "node-item"
    },
    text: {
      type: String,
      default: ""
    }
  },
  emits: ["mousedown"],
  setup(e) {
    return (t, n) => {
      const r = Bg;
      return X(), ot(r, { title: e.title }, {
        content: Z(() => [
          Y("span", null, Mt(e.text), 1)
        ]),
        default: Z(() => [
          Y("div", {
            class: ze(e.nodeCls),
            onMousedown: n[0] || (n[0] = (i) => t.$emit("mousedown"))
          }, [
            mt(t.$slots, "default")
          ], 34)
        ]),
        _: 3
      }, 8, ["title"]);
    };
  }
}), XX = { class: "lf-designer_palette" }, UX = { class: "node-category" }, YX = { class: "node-category" }, KX = /* @__PURE__ */ fe({
  name: "LfPalette",
  __name: "index",
  props: {
    translatePrefix: {
      type: String,
      default: ""
    }
  },
  emits: ["dragInNode"],
  setup(e, { emit: t }) {
    const n = t, { t: r } = bf();
    function i(o) {
      n("dragInNode", o);
    }
    return (o, a) => {
      const s = Ie("icon-circle"), l = Ie("icon-rect"), u = Ie("icon-rect-radius"), c = Ie("icon-rect-round"), d = Ie("icon-triangle"), f = Ie("icon-ellipse"), h = Ie("icon-diamond"), p = Ie("icon-cylinder"), v = Ie("icon-actor"), g = Ie("icon-parallelogram"), y = Ie("icon-text"), m = Ie("icon-pentagon"), E = Ie("icon-hexagon"), w = Ie("icon-heptagon"), S = Ie("icon-octagon"), _ = Ie("icon-trapezoid"), b = Ie("icon-right-angled-pentagon"), T = Ie("icon-addition"), R = Ie("icon-subtraction"), B = Ie("icon-multiplication"), K = Ie("icon-division"), ae = Ie("icon-document"), x = Ie("icon-callout"), P = Ie("icon-archimate-event"), L = Ie("icon-note"), k = Ie("icon-group"), J = Ie("icon-divide-dashed-line"), de = Ie("icon-divide-line"), Ne = Ie("icon-vertical-split-rect"), se = Ie("icon-vertical-multi-split-rect"), G = Ie("icon-horizontal-multi-split-rect"), be = Ul, Oe = Ie("icon-left-arrow"), Ae = Ie("icon-right-arrow"), Re = Ie("icon-up-arrow"), $ = Ie("icon-down-arrow"), re = Ie("icon-horizontal-arrow"), ee = Ie("icon-vertical-arrow"), _e = Ie("icon-right-hollow-arrow"), xe = Bw;
      return X(), he("div", XX, [
        A(xe, {
          "default-active-key": ["General", "Arrow"],
          "expand-icon-position": "right"
        }, {
          default: Z(() => [
            A(be, {
              key: "General",
              header: oe(r)(`${e.translatePrefix}General`)
            }, {
              default: Z(() => [
                Y("div", UX, [
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}circle`),
                    onMousedown: a[0] || (a[0] = (ye) => i("pro-circle"))
                  }, {
                    default: Z(() => [
                      A(s, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}rect`),
                    onMousedown: a[1] || (a[1] = (ye) => i("pro-rect"))
                  }, {
                    default: Z(() => [
                      A(l, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}rect-radius`),
                    onMousedown: a[2] || (a[2] = (ye) => i("rect-radius"))
                  }, {
                    default: Z(() => [
                      A(u, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}rect-round`),
                    onMousedown: a[3] || (a[3] = (ye) => i("rect-round"))
                  }, {
                    default: Z(() => [
                      A(c, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}triangle`),
                    onMousedown: a[4] || (a[4] = (ye) => i("triangle"))
                  }, {
                    default: Z(() => [
                      A(d, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}ellipse`),
                    onMousedown: a[5] || (a[5] = (ye) => i("pro-ellipse"))
                  }, {
                    default: Z(() => [
                      A(f, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}diamond`),
                    onMousedown: a[6] || (a[6] = (ye) => i("pro-diamond"))
                  }, {
                    default: Z(() => [
                      A(h, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}cylinder`),
                    onMousedown: a[7] || (a[7] = (ye) => i("cylinder"))
                  }, {
                    default: Z(() => [
                      A(p, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}actor`),
                    onMousedown: a[8] || (a[8] = (ye) => i("actor"))
                  }, {
                    default: Z(() => [
                      A(v, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}parallelogram`),
                    onMousedown: a[9] || (a[9] = (ye) => i("parallelogram"))
                  }, {
                    default: Z(() => [
                      A(g, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}text-node`),
                    onMousedown: a[10] || (a[10] = (ye) => i("pro-text"))
                  }, {
                    default: Z(() => [
                      A(y, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}pentagon`),
                    onMousedown: a[11] || (a[11] = (ye) => i("pentagon"))
                  }, {
                    default: Z(() => [
                      A(m, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}hexagon`),
                    onMousedown: a[12] || (a[12] = (ye) => i("hexagon"))
                  }, {
                    default: Z(() => [
                      A(E, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}heptagon`),
                    onMousedown: a[13] || (a[13] = (ye) => i("heptagon"))
                  }, {
                    default: Z(() => [
                      A(w, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}octagon`),
                    onMousedown: a[14] || (a[14] = (ye) => i("octagon"))
                  }, {
                    default: Z(() => [
                      A(S, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}trapezoid`),
                    onMousedown: a[15] || (a[15] = (ye) => i("trapezoid"))
                  }, {
                    default: Z(() => [
                      A(_, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}right-angled-pentagon`),
                    onMousedown: a[16] || (a[16] = (ye) => i("right-angled-pentagon"))
                  }, {
                    default: Z(() => [
                      A(b, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}addition`),
                    onMousedown: a[17] || (a[17] = (ye) => i("addition"))
                  }, {
                    default: Z(() => [
                      A(T, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}subtraction`),
                    onMousedown: a[18] || (a[18] = (ye) => i("subtraction"))
                  }, {
                    default: Z(() => [
                      A(R, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}multiplication`),
                    onMousedown: a[19] || (a[19] = (ye) => i("multiplication"))
                  }, {
                    default: Z(() => [
                      A(B, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}division`),
                    onMousedown: a[20] || (a[20] = (ye) => i("division"))
                  }, {
                    default: Z(() => [
                      A(K, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}document`),
                    onMousedown: a[21] || (a[21] = (ye) => i("document"))
                  }, {
                    default: Z(() => [
                      A(ae, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}callout`),
                    onMousedown: a[22] || (a[22] = (ye) => i("callout"))
                  }, {
                    default: Z(() => [
                      A(x, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}archimate-event`),
                    onMousedown: a[23] || (a[23] = (ye) => i("archimate-event"))
                  }, {
                    default: Z(() => [
                      A(P, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}note`),
                    onMousedown: a[24] || (a[24] = (ye) => i("note"))
                  }, {
                    default: Z(() => [
                      A(L, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}group`),
                    onMousedown: a[25] || (a[25] = (ye) => i("pro-group"))
                  }, {
                    default: Z(() => [
                      A(k, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}divide-dashed-line`),
                    onMousedown: a[26] || (a[26] = (ye) => i("divide-dashed-line"))
                  }, {
                    default: Z(() => [
                      A(J, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}divide-line`),
                    onMousedown: a[27] || (a[27] = (ye) => i("divide-line"))
                  }, {
                    default: Z(() => [
                      A(de, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}vertical-split-rect`),
                    onMousedown: a[28] || (a[28] = (ye) => i("vertical-split-rect"))
                  }, {
                    default: Z(() => [
                      A(Ne, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}vertical-multi-split-rect`),
                    onMousedown: a[29] || (a[29] = (ye) => i("vertical-multi-split-rect"))
                  }, {
                    default: Z(() => [
                      A(se, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}horizontal-multi-split-rect`),
                    onMousedown: a[30] || (a[30] = (ye) => i("horizontal-multi-split-rect"))
                  }, {
                    default: Z(() => [
                      A(G, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"])
                ])
              ]),
              _: 1
            }, 8, ["header"]),
            A(be, {
              key: "Arrow",
              header: oe(r)(`${e.translatePrefix}Arrow`)
            }, {
              default: Z(() => [
                Y("div", YX, [
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}left-arrow`),
                    onMousedown: a[31] || (a[31] = (ye) => i("left-arrow"))
                  }, {
                    default: Z(() => [
                      A(Oe, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}right-arrow`),
                    onMousedown: a[32] || (a[32] = (ye) => i("right-arrow"))
                  }, {
                    default: Z(() => [
                      A(Ae, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}up-arrow`),
                    onMousedown: a[33] || (a[33] = (ye) => i("up-arrow"))
                  }, {
                    default: Z(() => [
                      A(Re, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}down-arrow`),
                    onMousedown: a[34] || (a[34] = (ye) => i("down-arrow"))
                  }, {
                    default: Z(() => [
                      A($, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}horizontal-arrow`),
                    onMousedown: a[35] || (a[35] = (ye) => i("horizontal-arrow"))
                  }, {
                    default: Z(() => [
                      A(re, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}vertical-arrow`),
                    onMousedown: a[36] || (a[36] = (ye) => i("vertical-arrow"))
                  }, {
                    default: Z(() => [
                      A(ee, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"]),
                  A(Ot, {
                    text: oe(r)(`${e.translatePrefix}hollow-arrow`),
                    onMousedown: a[37] || (a[37] = (ye) => i("hollow-arrow"))
                  }, {
                    default: Z(() => [
                      A(_e, { class: "svg-node" })
                    ]),
                    _: 1
                  }, 8, ["text"])
                ])
              ]),
              _: 1
            }, 8, ["header"])
          ]),
          _: 1
        })
      ]);
    };
  }
});
function en(e, t) {
  return t.backgroundColor && (e.fill = t.backgroundColor), t.gradientColor && e.fill !== t.gradientColor && (e.fillGradient = t.gradientColor), t.borderColor && (e.stroke = t.borderColor), t.borderWidth && (e.strokeWidth = t.borderWidth), t.borderStyle && (t.borderStyle === "solid" && (e.strokeDashArray = "0", e.strokeDasharray = "0"), t.borderStyle === "dashed" && (e.strokeDashArray = "3 3", e.strokeDasharray = "3 3"), t.borderStyle === "dotted" && (e.strokeDashArray = "1 1", e.strokeDasharray = "1 1"), t.borderStyle === "hidden" && (e.stroke = e.fill)), e;
}
function sn(e = {}, t) {
  return t.fontColor && (e.color = t.fontColor), t.fontSize && (e.fontSize = t.fontSize), t.fontFamily && (e.fontFamily = t.fontFamily), t.lineHeight && (e.lineHeight = t.lineHeight), t.textAlign && (e.textAlign = t.textAlign), t.fontWeight && (e.fontWeight = t.fontWeight), t.textDecoration && (e.textDecoration = t.textDecoration), t.fontStyle && (e.fontStyle = t.fontStyle), e;
}
class qX extends ng {
}
class ZX extends Wv {
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return n.backgroundColor && (t.backgroundStyle = {
      fill: n.backgroundColor
    }), sn(t, n);
  }
  setAttributes() {
    super.setAttributes(), this.text.value || (this.text.value = "text");
  }
}
const JX = {
  type: "pro-text",
  view: qX,
  model: ZX
};
let QX = class extends Fs {
  constructor(t, n) {
    super(t, n), this.strokeWidth = 1;
  }
  getTextStyle() {
    const t = super.getTextStyle();
    return sn(t, this.properties);
  }
  getEdgeStyle() {
    const t = super.getEdgeStyle(), n = this.properties;
    return { ...en(t, n), fill: "none" };
  }
};
const eU = {
  type: "pro-polyline",
  view: Vs,
  model: QX
};
let tU = class extends Fv {
  constructor(t, n) {
    super(t, n), this.strokeWidth = 1;
  }
  getTextStyle() {
    const t = super.getTextStyle();
    return sn(t, this.properties);
  }
  getEdgeStyle() {
    const t = super.getEdgeStyle(), n = this.properties;
    return { ...en(t, n), fill: "none" };
  }
};
const nU = {
  type: "pro-line",
  view: ug,
  model: tU
};
class rU extends zv {
  constructor(t, n) {
    super(t, n), this.strokeWidth = 1;
  }
  getTextStyle() {
    const t = super.getTextStyle();
    return sn(t, this.properties);
  }
  getEdgeStyle() {
    const t = super.getEdgeStyle(), n = this.properties;
    return { ...en(t, n), fill: "none" };
  }
}
const iU = {
  type: "pro-bezier",
  view: sg,
  model: rU
};
class oU extends eo.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 60, this.height = 80;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
}
class aU extends eo.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), a = {
      ...o,
      cx: t,
      cy: n - 1 / 3 * i,
      rx: 1 / 2 * r,
      ry: 1 / 6 * i,
      width: r,
      height: i
    }, s = {
      ...o,
      d: `M ${t - 1 / 2 * r} ${n - 1 / 3 * i} L ${t - 1 / 2 * r} ${n + 1 / 3 * i}`
    }, l = {
      ...o,
      d: `M ${t + 1 / 2 * r} ${n - 1 / 3 * i} L ${t + 1 / 2 * r} ${n + 1 / 3 * i}`
    }, u = {
      ...o,
      cx: t,
      cy: n + 1 / 3 * i,
      rx: 1 / 2 * r,
      ry: 1 / 6 * i,
      width: r,
      height: i
    }, c = {
      ...o,
      x: t - 1 / 2 * r,
      y: n - 1 / 3 * i,
      width: r,
      height: 2 / 3 * i,
      stroke: "transparent"
    };
    return q("g", {}, [
      q("ellipse", {
        ...u
      }),
      q("rect", {
        ...c
      }),
      q("path", {
        ...s
      }),
      q("path", {
        ...l
      }),
      q("ellipse", {
        ...a
      })
    ]);
  }
}
const sU = {
  type: "cylinder",
  model: oU,
  view: aU
};
class lU extends eo.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 40, this.height = 80;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
}
class uU extends eo.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), a = {
      ...o,
      cx: t,
      cy: n - 3 / 8 * i,
      rx: 1 / 4 * r,
      ry: 1 / 8 * i,
      width: r,
      height: i
    }, s = {
      ...o,
      d: `M ${t - 1 / 2 * r} ${n - 1 / 8 * i} L ${t + 1 / 2 * r} ${n - 1 / 8 * i}`
    }, l = {
      ...o,
      d: `M ${t} ${n - 1 / 4 * i} L ${t} ${n + 1 / 5 * i}`
    }, u = {
      ...o,
      d: `M ${t} ${n + 1 / 5 * i} L ${t - 1 / 2 * r} ${n + 1 / 2 * i}`
    }, c = {
      ...o,
      d: `M ${t} ${n + 1 / 5 * i} L ${t + 1 / 2 * r} ${n + 1 / 2 * i}`
    }, d = {
      x: t - 1 / 5 * r,
      y: n - 1 / 2 * i,
      width: 2 / 5 * r,
      height: i,
      style: "fill: transparent"
    };
    return q("g", {}, [
      q("ellipse", {
        ...a
      }),
      q("path", {
        ...s
      }),
      q("path", {
        ...l
      }),
      q("path", {
        ...u
      }),
      q("path", {
        ...c
      }),
      q("rect", {
        ...d
      })
    ]);
  }
}
const cU = {
  type: "actor",
  view: uU,
  model: lU
};
class dU extends eo.model {
  setToBottom() {
    this.zIndex = 0;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
}
const Ve = {
  type: "pro-rect",
  view: eo.view,
  model: dU
};
class fU extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 80, this.height = 80;
  }
}
class hU extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), a = {
      x: t - 1 / 2 * r,
      y: n - 1 / 2 * i,
      width: r,
      height: i
    }, s = {
      ...o,
      d: "m0.36922,13.46587l12.98695,0l4.01307,-13.36885l4.01307,13.36885l12.98694,0l-10.50664,8.26231l4.01327,13.36885l-10.50665,-8.26253l-10.50664,8.26253l4.01327,-13.36885l-10.50665,-8.26231l0,0z"
    };
    return q("svg", { ...a, viewBox: "0 0 37 37" }, [
      q("path", {
        ...s
      })
    ]);
  }
}
const pU = {
  type: "star",
  view: hU,
  model: fU
};
class vU extends j2.model {
  constructor(t, n) {
    super(t, n), this.rx = 40, this.ry = 40;
  }
  initNodeData(t) {
    super.initNodeData(t);
  }
  setToBottom() {
    this.zIndex = 0;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
}
const am = {
  type: "pro-circle",
  view: j2.view,
  model: vU
};
class gU extends Ve.model {
  setAttributes() {
    super.setAttributes(), this.radius = this.height / 2;
  }
}
const yU = {
  type: "rect-round",
  view: Ve.view,
  model: gU
};
class mU extends Ve.model {
  setAttributes() {
    super.setAttributes(), this.radius = 20;
  }
}
const _U = {
  type: "rect-radius",
  view: Ve.view,
  model: mU
};
class bU extends am.model {
  constructor(t, n) {
    super(t, n), this.rx = 60, this.ry = 30;
  }
  initNodeData(t) {
    super.initNodeData(t);
  }
  getNodeStyle() {
    return { ...super.getNodeStyle() };
  }
}
const wU = {
  type: "pro-ellipse",
  view: am.view,
  model: bU
};
class xU extends F2.model {
  initNodeData(t) {
    super.initNodeData(t), this.rx = 30, this.ry = 30;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
  setToBottom() {
    this.zIndex = 0;
  }
}
const EU = {
  type: "pro-diamond",
  view: F2.view,
  model: xU
};
class SU extends eo.model {
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
}
class CU extends eo.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, a = {
      ...this.props.model.getNodeStyle(),
      x: t,
      y: n,
      width: r,
      height: i,
      points: [
        [t - r / 2, n + i / 2],
        [t - r / 2, n - i / 2],
        [t + r / 2, n]
      ]
    };
    return q("g", {}, [
      q("polygon", { ...a })
    ]);
  }
}
const OU = {
  type: "triangle",
  view: CU,
  model: SU
};
class AU extends eo.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 100, this.height = 60;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
}
class NU extends eo.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), s = [
      [t - r / 2, n + i / 2],
      [t - r / 5, n - i / 2],
      [t + r / 2, n - i / 2],
      [t + r / 5, n + i / 2]
    ].map((u) => `${u[0]},${u[1]}`), l = {
      ...o,
      x: t,
      y: n,
      width: r,
      height: i,
      points: s.join(" ")
    };
    return q("g", {}, [
      q("polygon", { ...l })
    ]);
  }
}
const MU = {
  type: "parallelogram",
  view: NU,
  model: AU
};
class TU extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 80, this.height = 80;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
}
class PU extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), s = [
      [t - 1 / 2 * r, n - 1 / 6 * i],
      [t - 1 / 6 * r, n - 1 / 6 * i],
      [t - 1 / 6 * r, n - 1 / 2 * i],
      [t + 1 / 6 * r, n - 1 / 2 * i],
      [t + 1 / 6 * r, n - 1 / 6 * i],
      [t + 1 / 2 * r, n - 1 / 6 * i],
      [t + 1 / 2 * r, n + 1 / 6 * i],
      [t + 1 / 6 * r, n + 1 / 6 * i],
      [t + 1 / 6 * r, n + 1 / 2 * i],
      [t - 1 / 6 * r, n + 1 / 2 * i],
      [t - 1 / 6 * r, n + 1 / 6 * i],
      [t - 1 / 2 * r, n + 1 / 6 * i]
    ].map((u) => `${u[0]},${u[1]}`), l = {
      ...o,
      x: t,
      y: n,
      width: r,
      height: i,
      points: s.join(" ")
    };
    return q("g", {}, [
      q("polygon", { ...l })
    ]);
  }
}
const DU = {
  type: "addition",
  view: PU,
  model: TU
};
class RU extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 80, this.height = 20;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
}
class LU extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), s = [
      [t - 1 / 2 * r, n - 1 / 2 * i],
      [t + 1 / 2 * r, n - 1 / 2 * i],
      [t + 1 / 2 * r, n + 1 / 2 * i],
      [t - 1 / 2 * r, n + 1 / 2 * i]
    ].map((u) => `${u[0]},${u[1]}`), l = {
      ...o,
      x: t,
      y: n,
      width: r,
      height: i,
      points: s.join(" ")
    };
    return q("g", {}, [
      q("polygon", { ...l })
    ]);
  }
}
const $U = {
  type: "subtraction",
  view: LU,
  model: RU
};
class kU extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 80, this.height = 80;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
}
class IU extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), s = [
      [t - 1 / 2 * r, n - 1 / 3 * i],
      [t - 1 / 3 * r, n - 1 / 2 * i],
      [t, n - 1 / 6 * i],
      [t + 1 / 3 * r, n - 1 / 2 * i],
      [t + 1 / 2 * r, n - 1 / 3 * i],
      [t + 1 / 6 * r, n],
      [t + 1 / 2 * r, n + 1 / 3 * i],
      [t + 1 / 3 * r, n + 1 / 2 * i],
      [t, n + 1 / 6 * i],
      [t - 1 / 3 * r, n + 1 / 2 * i],
      [t - 1 / 2 * r, n + 1 / 3 * i],
      [t - 1 / 6 * r, n]
    ].map((u) => `${u[0]},${u[1]}`), l = {
      ...o,
      x: t,
      y: n,
      width: r,
      height: i,
      points: s.join(" ")
    };
    return q("g", {}, [
      q("polygon", { ...l })
    ]);
  }
}
const BU = {
  type: "multiplication",
  view: IU,
  model: kU
};
class jU extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 80, this.height = 80;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
}
class zU extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), s = [
      [t - 1 / 2 * r, n - 1 / 8 * i],
      [t + 1 / 2 * r, n - 1 / 8 * i],
      [t + 1 / 2 * r, n + 1 / 8 * i],
      [t - 1 / 2 * r, n + 1 / 8 * i]
    ].map((f) => `${f[0]},${f[1]}`), l = {
      ...o,
      x: t,
      y: n,
      width: r,
      height: i
    }, u = {
      ...l,
      points: s.join(" ")
    }, c = {
      ...l,
      cy: n - 3 / 8 * i,
      cx: t,
      rx: 1 / 8 * r,
      ry: 1 / 8 * i
    }, d = {
      ...l,
      cy: n + 3 / 8 * i,
      cx: t,
      rx: 1 / 8 * r,
      ry: 1 / 8 * i
    };
    return q("g", {}, [
      q("polygon", { ...u }),
      q("ellipse", { ...c }),
      q("ellipse", { ...d })
    ]);
  }
}
const FU = {
  type: "division",
  view: zU,
  model: jU
};
class HU extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 80, this.height = 50;
  }
}
class VU extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), a = 1 / 3 * i, s = t - 1 / 2 * r, l = t - 1 / 5 * r, u = t + 1 / 2 * r, c = {
      ...o,
      x: t,
      y: n,
      width: r,
      height: i,
      points: [
        [l, n - 1 / 2 * a],
        [l, n - 1 / 2 * i],
        [s, n],
        [l, n + 1 / 2 * i],
        [l, n + 1 / 2 * a],
        [u, n + 1 / 2 * a],
        [u, n - 1 / 2 * a]
      ]
    };
    return q("g", {}, [
      q("polygon", { ...c })
    ]);
  }
}
const WU = {
  type: "left-arrow",
  view: VU,
  model: HU
};
class GU extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 80, this.height = 50;
  }
}
class XU extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), a = 1 / 3 * i, s = t - 1 / 2 * r, l = t + 1 / 2 * r, u = t + 1 / 5 * r, c = {
      ...o,
      x: t,
      y: n,
      width: r,
      height: i,
      points: [
        [u, n - 1 / 2 * a],
        [u, n - 1 / 2 * i],
        [l, n],
        [u, n + 1 / 2 * i],
        [u, n + 1 / 2 * a],
        [s, n + 1 / 2 * a],
        [s, n - 1 / 2 * a]
      ]
    };
    return q("g", {}, [
      q("polygon", { ...c })
    ]);
  }
}
const UU = {
  type: "right-arrow",
  view: XU,
  model: GU
};
class YU extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 80, this.height = 40;
  }
}
class KU extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), a = 1 / 3 * i, s = t - 1 / 2 * r, l = t - 1 / 5 * r, u = t + 1 / 2 * r, c = t + 1 / 5 * r, d = {
      ...o,
      x: t,
      y: n,
      width: r,
      height: i,
      points: [
        // 右箭头
        [c, n - 1 / 2 * a],
        [c, n - 1 / 2 * i],
        [u, n],
        [c, n + 1 / 2 * i],
        [c, n + 1 / 2 * a],
        // 左箭头
        [l, n + 1 / 2 * a],
        [l, n + 1 / 2 * i],
        [s, n],
        [l, n - 1 / 2 * i],
        [l, n - 1 / 2 * a]
      ]
    };
    return q("g", {}, [
      q("polygon", { ...d })
    ]);
  }
}
const qU = {
  type: "horizontal-arrow",
  view: KU,
  model: YU
};
class ZU extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 50, this.height = 80;
  }
}
class JU extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), a = 1 / 3 * r, s = n - 1 / 2 * i, l = n - 1 / 5 * i, u = n + 1 / 2 * i, c = {
      ...o,
      x: t,
      y: n,
      width: r,
      height: i,
      points: [
        [t - 1 / 2 * a, l],
        [t - 1 / 2 * r, l],
        [t, s],
        [t + 1 / 2 * r, l],
        [t + 1 / 2 * a, l],
        [t + 1 / 2 * a, u],
        [t - 1 / 2 * a, u]
      ]
    };
    return q("g", {}, [
      q("polygon", { ...c })
    ]);
  }
}
const QU = {
  type: "up-arrow",
  view: JU,
  model: ZU
};
class eY extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 50, this.height = 80;
  }
}
class tY extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), a = 1 / 3 * r, s = n - 1 / 2 * i, l = n + 1 / 2 * i, u = n + 1 / 5 * i, c = {
      ...o,
      x: t,
      y: n,
      width: r,
      height: i,
      points: [
        [t - 1 / 2 * a, u],
        [t - 1 / 2 * r, u],
        [t, l],
        [t + 1 / 2 * r, u],
        [t + 1 / 2 * a, u],
        [t + 1 / 2 * a, s],
        [t - 1 / 2 * a, s]
      ]
    };
    return q("g", {}, [
      q("polygon", { ...c })
    ]);
  }
}
const nY = {
  type: "down-arrow",
  view: tY,
  model: eY
};
class rY extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 40, this.height = 80;
  }
}
class iY extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), a = 1 / 3 * r, s = n - 1 / 2 * i, l = n - 1 / 5 * i, u = n + 1 / 2 * i, c = n + 1 / 5 * i, d = {
      ...o,
      x: t,
      y: n,
      width: r,
      height: i,
      points: [
        // 上箭头
        [t - 1 / 2 * a, l],
        [t - 1 / 2 * r, l],
        [t, s],
        [t + 1 / 2 * r, l],
        [t + 1 / 2 * a, l],
        // 下箭头
        [t + 1 / 2 * a, c],
        [t + 1 / 2 * r, c],
        [t, u],
        [t - 1 / 2 * r, c],
        [t - 1 / 2 * a, c]
      ]
    };
    return q("g", {}, [
      q("polygon", { ...d })
    ]);
  }
}
const oY = {
  type: "vertical-arrow",
  view: iY,
  model: rY
};
class aY extends Ve.model {
  constructor(t, n) {
    super(t, n), this.setProperty("attributes", ["arrowLen"]);
  }
  initNodeData(t) {
    super.initNodeData(t), this.width = 100, this.height = 80;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
}
class sY extends Ve.view {
  getResizeShape() {
    const {
      x: t,
      y: n,
      width: r,
      height: i,
      strokeWidth: o = 1,
      arrowLen: a = 20
    } = this.props.model, s = o / 2, l = t - r / 2, u = n - i / 2, c = this.props.model.getNodeStyle(), f = [
      [l - s, u - s],
      [l + r - a, u - s],
      [l + r, u + 0.5 * i],
      [l + r - a, u + i - s],
      [l - s, u + i - s],
      [l + a, u + 0.5 * i]
    ].map((p) => `${p[0]},${p[1]}`), h = {
      ...c,
      x: t,
      y: n,
      width: r,
      height: i,
      points: f.join(" ")
    };
    return q("g", {}, [q("polygon", { ...h })]);
  }
}
const lY = {
  type: "hollow-arrow",
  view: sY,
  model: aY
};
class uY extends Ve.view {
  // 继承该类型节点的需要实现该方法
  getImageHref() {
    return "";
  }
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), a = this.getImageHref(), s = {
      x: t - 1 / 2 * r + 5,
      y: n - 1 / 2 * i + 5,
      // icon在左上角
      width: 25,
      height: 18,
      href: a,
      // 根据宽高缩放
      preserveAspectRatio: "none meet"
    }, l = {
      ...o,
      strokeWidth: 1,
      rx: 5,
      ry: 5,
      x: t - 1 / 2 * r,
      y: n - 1 / 2 * i,
      width: r,
      height: i
    };
    return q("g", {}, [
      q("rect", { ...l }),
      q("image", { ...s })
    ]);
  }
}
const aC = {
  type: "image-node",
  view: uY,
  model: Ve.model
};
class cY extends aC.view {
  getImageHref() {
    return "https://dpubstatic.udache.com/static/dpubimg/1TZgBoaq8G/message.png";
  }
}
const dY = {
  type: "icon-message",
  view: cY,
  model: aC.model
};
class fY extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 60, this.height = 80;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
}
class hY extends Ve.view {
  getResizeShape() {
    const {
      x: t,
      y: n,
      width: r,
      height: i,
      strokeWidth: o = 1,
      markerSize: a = 20
    } = this.props.model, s = o / 2, l = t - r / 2, u = n - i / 2, c = this.props.model.getNodeStyle(), f = [
      [l + s, u - s],
      [l + s + r - a, u - s],
      [l + r - s, u + a],
      [l + r - s, u + i - s],
      [l + s, u + i - s]
    ].map((y) => `${y[0]},${y[1]}`), h = {
      ...c,
      x: t,
      y: n,
      width: r,
      height: i,
      points: f.join(" ")
    }, v = [
      [l + s + r - a, u - s],
      [l + r - s, u + a],
      [l + r - a, u + a]
    ].map((y) => `${y[0]},${y[1]}`), g = {
      ...c,
      x: t,
      y: n,
      width: r,
      height: i,
      points: v.join(" ")
    };
    return q("g", {}, [
      q("polygon", { ...h }),
      q("polygon", { ...g })
    ]);
  }
}
const pY = {
  type: "note",
  view: hY,
  model: fY
};
class vY extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 100, this.height = 80, this.minWidth = 40;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
}
class gY extends Ve.view {
  getResizeShape() {
    const {
      x: t,
      y: n,
      width: r,
      height: i
    } = this.props.model, o = t - r / 2, a = n - i / 2, s = this.props.model.getNodeStyle(), l = r / 6, u = a + i - 0.15 * r, c = o + r / 2, d = [
      `M ${o} ${a}`,
      `L ${o + r} ${a}`,
      `L ${o + r} ${u}`,
      `C ${o + r - l} ${u - l}`,
      // C1控制点1
      `${c + l} ${u - l}`,
      // C1控制点2
      `${c} ${u}`,
      // C1结束点
      `C ${c - l} ${u + l}`,
      // C2控制点1
      `${o + l} ${u + l}`,
      // C2控制点2
      `${o} ${u}`
      // C2结束点
    ], f = {
      ...s,
      x: t,
      y: n,
      width: r,
      height: i,
      d: `${d.join(" ")} Z`
    };
    return q("g", {}, [q("path", { ...f })]);
  }
}
const yY = {
  type: "document",
  view: gY,
  model: vY
};
class mY extends Ve.model {
  constructor(t, n) {
    super(t, n), this.setProperty("attributes", ["arrowLen"]);
  }
  initNodeData(t) {
    super.initNodeData(t), this.width = 100, this.height = 60, this.minWidth = 40;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
}
class _Y extends Ve.view {
  getResizeShape() {
    const {
      x: t,
      y: n,
      width: r,
      height: i,
      arrowLen: o = 20
    } = this.props.model, a = t - r / 2, s = n - i / 2, l = this.props.model.getNodeStyle(), u = [
      `M ${a} ${s}`,
      `L ${a + r - i / 2} ${s}`,
      `C ${a + r + 0.15 * i} ${s}`,
      // 控制点1
      `${a + r + 0.15 * i} ${s + i}`,
      // 控制点2
      `${a + r - i / 2} ${s + i}`,
      // 曲线结束点
      `L ${a} ${s + i}`,
      `L ${a + o} ${s + i / 2}`
    ], c = {
      ...l,
      x: t,
      y: n,
      width: r,
      height: i,
      d: `${u.join(" ")} Z`
    };
    return q("g", {}, [q("path", { ...c })]);
  }
}
const bY = {
  type: "archimate-event",
  view: _Y,
  model: mY
};
class wY extends Ve.model {
  constructor(t, n) {
    super(t, n), this.setProperty("attributes", ["arrowLen"]);
  }
  initNodeData(t) {
    super.initNodeData(t), this.width = 100, this.height = 100, this.minWidth = 40;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
}
class xY extends Ve.view {
  getResizeShape() {
    const {
      x: t,
      y: n,
      width: r,
      height: i,
      arrowLen: o = 20,
      arrowWidth: a = 20
    } = this.props.model, s = t - r / 2, l = n - i / 2, u = this.props.model.getNodeStyle(), c = l + i - o, d = [
      `M ${s} ${l}`,
      `L ${s + r} ${l}`,
      `${s + r} ${c}`,
      `${s + r / 2 + a} ${c}`,
      `${s + r / 2} ${l + i}`,
      `${s + r / 2} ${c}`,
      `${s} ${c}`
    ], f = {
      ...u,
      x: t,
      y: n,
      width: r,
      height: i,
      d: `${d.join(" ")} Z`
    };
    return q("g", {}, [q("path", { ...f })]);
  }
}
const EY = {
  type: "callout",
  view: xY,
  model: wY
};
class SY extends Ua.model {
  initNodeData(t) {
    super.initNodeData(t), this.isRestrict = !1, this.resizable = !0, this.foldable = !0, this.width = 240, this.height = 120, this.foldedWidth = 40, this.foldedHeight = 30;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
}
const CY = {
  type: "pro-group",
  model: SY,
  view: Ua.view
};
class OY extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 100, this.height = 2, this.minHeight = 1;
  }
  getDefaultAnchor() {
    return [];
  }
}
class AY extends Ve.view {
  getResizeShape() {
    const {
      x: t,
      y: n,
      width: r,
      height: i
    } = this.props.model, o = t - r / 2, a = this.props.model.getNodeStyle(), s = [
      `M ${o} ${n}`,
      `L ${o + r} ${n}`
    ], l = {
      ...a,
      x: t,
      y: n,
      width: r,
      strokeWidth: i,
      d: `${s.join(" ")} Z`
    };
    return q("g", {}, [q("path", { ...l })]);
  }
}
const NY = {
  type: "divide-line",
  model: OY,
  view: AY
};
class MY extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 100, this.height = 2, this.minHeight = 1;
  }
  getDefaultAnchor() {
    return [];
  }
}
class TY extends Ve.view {
  getResizeShape() {
    const {
      x: t,
      y: n,
      width: r,
      height: i,
      dasharray: o = 4
    } = this.props.model, a = t - r / 2, l = {
      ...this.props.model.getNodeStyle(),
      x1: a,
      y1: n,
      x2: a + r,
      y2: n,
      width: r,
      strokeDasharray: o,
      strokeWidth: i
    };
    return q("g", {}, [q("line", { ...l })]);
  }
}
const PY = {
  type: "divide-dashed-line",
  model: MY,
  view: TY
};
class DY extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 100, this.height = 80;
  }
}
class RY extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), a = t - r / 2, s = n - i / 2, u = [
      [t, s],
      [a + r, n],
      [a + r, s + i],
      [a, s + i],
      [a, n]
    ].map((d) => `${d[0]},${d[1]}`), c = {
      ...o,
      centerX: t,
      centerY: n,
      width: r,
      height: i,
      points: u.join(" ")
    };
    return q("g", {}, [q("polygon", { ...c })]);
  }
}
const LY = {
  type: "right-angled-pentagon",
  view: RY,
  model: DY
};
class $Y extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 80, this.height = 80;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
}
class kY extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), s = [
      [t - 0.31 * r, n - 0.5 * i],
      [t + 0.31 * r, n - 0.5 * i],
      [t + 0.5 * r, n + 0.5 * i],
      [t - 0.5 * r, n + 0.5 * i]
    ].map((u) => `${u[0]},${u[1]}`), l = {
      ...o,
      x: t,
      y: n,
      width: r,
      height: i,
      points: s.join(" ")
    };
    return q("g", {}, [
      q("polygon", { ...l })
    ]);
  }
}
const IY = {
  type: "trapezoid",
  view: kY,
  model: $Y
};
class BY extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 80, this.height = 80;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
}
class jY extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), s = [
      [t - 0.205 * r, n - 0.5 * i],
      [t + 0.205 * r, n - 0.5 * i],
      [t + 0.5 * r, n - 0.205 * i],
      [t + 0.5 * r, n + 0.205 * i],
      [t + 0.205 * r, n + 0.5 * i],
      [t - 0.205 * r, n + 0.5 * i],
      [t - 0.5 * r, n + 0.205 * i],
      [t - 0.5 * r, n - 0.205 * i]
    ].map((u) => `${u[0]},${u[1]}`), l = {
      ...o,
      x: t,
      y: n,
      width: r,
      height: i,
      points: s.join(" ")
    };
    return q("g", {}, [
      q("polygon", { ...l })
    ]);
  }
}
const zY = {
  type: "octagon",
  view: jY,
  model: BY
};
class FY extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 80, this.height = 80;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
}
class HY extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), s = [
      [t, n - 0.5 * i],
      [t + 0.395 * r, n - 0.3 * i],
      [t + 0.5 * r, n + 0.145 * i],
      [t + 0.225 * r, n + 0.5 * i],
      [t - 0.225 * r, n + 0.5 * i],
      [t - 0.5 * r, n + 0.145 * i],
      [t - 0.395 * r, n - 0.3 * i]
    ].map((u) => `${u[0]},${u[1]}`), l = {
      ...o,
      x: t,
      y: n,
      width: r,
      height: i,
      points: s.join(" ")
    };
    return q("g", {}, [
      q("polygon", { ...l })
    ]);
  }
}
const VY = {
  type: "heptagon",
  view: HY,
  model: FY
};
class WY extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 80, this.height = 80;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
}
class GY extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), s = [
      [t - 0.28 * r, n - 0.5 * i],
      [t + 0.28 * r, n - 0.5 * i],
      [t + 0.5 * r, n],
      [t + 0.28 * r, n + 0.5 * i],
      [t - 0.28 * r, n + 0.5 * i],
      [t - 0.5 * r, n]
    ].map((u) => `${u[0]},${u[1]}`), l = {
      ...o,
      x: t,
      y: n,
      width: r,
      height: i,
      points: s.join(" ")
    };
    return q("g", {}, [
      q("polygon", { ...l })
    ]);
  }
}
const XY = {
  type: "hexagon",
  view: GY,
  model: WY
};
class UY extends Ve.model {
  initNodeData(t) {
    super.initNodeData(t), this.width = 80, this.height = 80;
  }
  getNodeStyle() {
    const t = super.getNodeStyle(), n = this.getProperties();
    return en(t, n);
  }
  getTextStyle() {
    const t = super.getTextStyle(), n = this.getProperties();
    return sn(t, n);
  }
}
class YY extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i } = this.props.model, o = this.props.model.getNodeStyle(), s = [
      [t - 0.5 * r, n],
      [t, n - 0.5 * i],
      [t + 0.5 * r, n],
      [t + 0.3 * r, n + 0.5 * i],
      [t - 0.3 * r, n + 0.5 * i]
    ].map((u) => `${u[0]},${u[1]}`), l = {
      ...o,
      x: t,
      y: n,
      width: r,
      height: i,
      points: s.join(" ")
    };
    return q("g", {}, [
      q("polygon", { ...l })
    ]);
  }
}
const KY = {
  type: "pentagon",
  view: YY,
  model: UY
};
class qY extends Ve.model {
  constructor(t, n) {
    super(t, n), this.setProperty("attributes", ["splitGap"]), this.setProperty("splitGap", 30);
  }
  initNodeData(t) {
    super.initNodeData(t);
  }
}
class ZY extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i, properties: o } = this.props.model, a = this.props.model.getNodeStyle(), s = o.splitGap, l = t - r / 2, u = n - i / 2, c = {
      ...a,
      x: l,
      y: u,
      width: r,
      height: i
    }, d = {
      ...a,
      d: `M ${l} ${u + s} L ${l + r} ${u + s}`
    };
    return q("g", {}, [
      q("rect", c),
      q("path", d)
    ]);
  }
}
const JY = {
  type: "vertical-split-rect",
  model: qY,
  view: ZY
};
class QY extends Ve.model {
  constructor(t, n) {
    super(t, n), this.setProperty("attributes", ["splitGap"]), this.setProperty("splitGap", 30);
  }
  initNodeData(t) {
    super.initNodeData(t);
  }
}
class eK extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i, properties: o } = this.props.model, a = this.props.model.getNodeStyle(), s = o.splitGap, l = t - r / 2, u = n - i / 2, c = {
      ...a,
      x: l,
      y: u,
      width: r,
      height: i
    }, d = {
      ...a,
      d: `M ${l + s} ${u} L ${l + s} ${u + i}`
    };
    return q("g", {}, [
      q("rect", c),
      q("path", d)
    ]);
  }
}
const tK = {
  type: "horizontal-split-rect",
  model: QY,
  view: eK
};
class nK extends Ve.model {
  constructor(t, n) {
    super(t, n), this.setProperty("attributes", ["splitGaps"]), this.setProperty("splitGaps", [30, 30]);
  }
  initNodeData(t) {
    super.initNodeData(t), this.minHeight = 60;
  }
}
class rK extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i, properties: o } = this.props.model, a = this.props.model.getNodeStyle(), s = o.splitGaps || [], [l = 30, u = 30] = s, c = t - r / 2, d = n - i / 2, f = n + i / 2, h = {
      ...a,
      x: c,
      y: d,
      width: r,
      height: i
    }, p = {
      ...a,
      d: `M ${c} ${d + l} L ${c + r} ${d + l}`
    }, v = {
      ...a,
      d: `M ${c} ${f - u} L ${c + r} ${f - u}`
    };
    return q("g", {}, [
      q("rect", h),
      q("path", p),
      q("path", v)
    ]);
  }
}
const iK = {
  type: "vertical-multi-split-rect",
  model: nK,
  view: rK
};
class oK extends Ve.model {
  constructor(t, n) {
    super(t, n), this.setProperty("attributes", ["splitGap"]), this.setProperty("splitGap", 30);
  }
  initNodeData(t) {
    super.initNodeData(t);
  }
}
class aK extends Ve.view {
  getResizeShape() {
    const { x: t, y: n, width: r, height: i, properties: o } = this.props.model, a = this.props.model.getNodeStyle(), s = o.splitGaps || [], [l = 30, u = 30] = s, c = t - r / 2, d = t + r / 2, f = n - i / 2, h = {
      ...a,
      x: c,
      y: f,
      width: r,
      height: i
    }, p = {
      ...a,
      d: `M ${c + l} ${f} L ${c + l} ${f + i}`
    }, v = {
      ...a,
      d: `M ${d - u} ${f} L ${d - u} ${f + i}`
    };
    return q("g", {}, [
      q("rect", h),
      q("path", p),
      q("path", v)
    ]);
  }
}
const sK = {
  type: "horizontal-multi-split-rect",
  model: oK,
  view: aK
}, jc = {
  width: 312,
  height: 72
};
function zc(e) {
  return {
    height: e ? 10 : 7,
    width: 20,
    strokeWidth: 1,
    fill: "#fff",
    stroke: "#000"
  };
}
class lK extends Ua.model {
  initNodeData(t) {
    super.initNodeData(t), t.width && (this.width = t.width), t.height && (this.height = t.height), this.collapsible = !1, this.draggable = !1, this.resizable = !0, this.zIndex = 1;
  }
  changeAttribute({ width: t, height: n, x: r, y: i, parentModel: o }) {
    t && (this.width = t), n && (this.height = n), r && (this.x = r), i && (this.y = i), o && (this.parentModel = o);
  }
}
class uK extends Ua.view {
  getOperateIcon() {
    const { model: t } = this.props;
    return t.isSelected ? q("g", {}, [this.addAboveIcon(), this.addBelowIcon(), this.deleteIcon()]) : null;
  }
  addAboveIcon() {
    const { x: t, y: n, width: r, height: i, parentModel: o } = this.props.model;
    return q(
      "g",
      {
        cursor: "pointer",
        onClick: () => {
          o && o.addChildAbove({ x: t, y: n, width: r, height: i, parentModel: o });
        }
      },
      [
        q("rect", {
          ...zc(!1),
          strokeDasharray: "3 3",
          x: t + r / 2 + 15,
          y: n - i / 2 + 3
        }),
        q("rect", {
          ...zc(!0),
          x: t + r / 2 + 15,
          y: n - i / 2 + 10
        })
      ]
    );
  }
  addBelowIcon() {
    const { x: t, y: n, width: r, height: i, parentModel: o } = this.props.model;
    return q(
      "g",
      {
        cursor: "pointer",
        onClick: () => {
          o && o.addChildBelow({ x: t, y: n, width: r, height: i });
        }
      },
      [
        q("rect", {
          ...zc(!1),
          strokeDasharray: "3 3",
          x: t + r / 2 + 15,
          y: n - i / 2 + 32 + 5
        }),
        q("rect", {
          ...zc(!0),
          x: t + r / 2 + 15,
          y: n - i / 2 + 2.5 + 20 + 5
        })
      ]
    );
  }
  deleteIcon() {
    const { x: t, y: n, width: r, height: i, id: o, parentModel: a } = this.props.model;
    return q(
      "g",
      {
        cursor: "pointer",
        onClick: () => {
          a && a.deleteChild(o);
        }
      },
      [
        q("rect", {
          height: 20,
          width: 20,
          rx: 2,
          ry: 2,
          strokeWidth: 1,
          fill: "transparent",
          stroke: "transparent",
          x: t + r / 2 + 14,
          y: n - i / 2 + 50
        }),
        q(
          "svg",
          {
            transform: "translate(1, 1)",
            x: t + r / 2 + 14,
            y: n - i / 2 + 50,
            width: 20,
            height: 20
          },
          [
            q("path", {
              "pointer-events": "none",
              d: "M15.3,1.4 L12.6,1.4 L12.6,0 L5.4,0 L5.4,1.4 L0,1.4 L0,2.8 L2,2.8 L2,17.3 C2,17.6865993 2.31340068,18 2.7,18 L15.3,18 C15.6865993,18 16,17.6865993 16,17.3 L16,2.8 L18,2.8 L18,1.4 L15.3,1.4 Z M14.6,16.6 L3.4,16.6 L3.4,2.8 L14.6,2.8 L14.6,16.6 Z"
            }),
            q("path", {
              "pointer-events": "none",
              d: "M6,5.4 L7.4,5.4 L7.4,14.4 L6,14.4 L6,5.4 Z M10.6,5.4 L12,5.4 L12,14.4 L10.6,14.4 L10.6,5.4 Z"
            })
          ]
        )
      ]
    );
  }
  getResizeShape() {
    return q("g", {}, [super.getShape(), this.getOperateIcon()]);
  }
}
const cK = {
  type: "lane",
  view: uK,
  model: lK
};
class dK extends Ua.model {
  constructor(n, r) {
    super(n, r);
    Sh(this, "nodeGroupMap");
    Sh(this, "childrenModelMap");
    this.childrenModelMap = /* @__PURE__ */ new Map(), this.nodeGroupMap = /* @__PURE__ */ new Map();
  }
  initNodeData(n) {
    super.initNodeData(n), this.height = 260, this.collapsible = !1, this.resizable = !0, this.zIndex = 1, this.text.editable = !0;
  }
  setAttributes() {
    this.text = {
      ...this.text,
      value: this.text.value || "泳池示例",
      x: this.x - this.width / 2 + 10,
      y: this.y
    };
  }
  getTextStyle() {
    const n = super.getTextStyle();
    return n.textWidth = 16, n;
  }
  foldGroup(n) {
    this.setProperty("isFolded", n), this.isFolded = n, n ? (this.x = this.x - this.width / 2 + this.foldedWidth / 2, this.unfoldedWidth = this.width, this.unfoldedHight = this.height, this.width = this.foldedWidth) : (this.width = this.unfoldedWidth, this.x = this.x + this.width / 2 - this.foldedWidth / 2);
    let r = this.incoming.edges.concat(this.outgoing.edges);
    this.children.forEach((i) => {
      const o = this.graphModel.getElement(i);
      o.visible = !n, r = [...r, ...o.incoming.edges, ...o.outgoing.edges];
    }), this.foldEdge(n, r);
  }
  addChild(n) {
    super.addChild(n);
    const r = this.graphModel.getNodeModelById(n);
    r.changeAttribute({ parentModel: this }), this.nodeGroupMap.set(n, this.id), this.childrenModelMap.set(n, r);
  }
  addChildAbove({ x: n, y: r, width: i, height: o }) {
    this.children.forEach((s) => {
      const l = this.graphModel.getElement(s), { type: u, y: c } = l;
      u === "lane" && c < r && l.changeAttribute({ y: c - 120 });
    });
    const { id: a } = this.graphModel.addNode({
      type: "lane",
      properties: {
        nodeSize: {
          width: i,
          height: 120
        }
      },
      x: n,
      y: r - o / 2 - 60
    });
    this.addChild(a), this.height = this.height + 120, this.y = this.y - 60;
  }
  addChildBelow({ x: n, y: r, width: i, height: o }) {
    this.children.forEach((s) => {
      const l = this.graphModel.getElement(s), { type: u, y: c } = l;
      u === "lane" && c > r && l.changeAttribute({ y: c + 120 });
    });
    const { id: a } = this.graphModel.addNode({
      type: "lane",
      properties: {
        nodeSize: {
          width: i,
          height: 120
        }
      },
      x: n,
      y: r + o / 2 + 60
    });
    this.addChild(a), this.height = this.height + 120, this.y = this.y + 60;
  }
  deleteChild(n) {
    const r = [];
    this.children.forEach((i) => {
      const o = this.graphModel.getElement(i), { type: a } = o;
      a === "lane" && r.push(o);
    }), !(r.length <= 1) && (this.nodeGroupMap.delete(n), this.childrenModelMap.delete(n), this.removeChild(n), this.graphModel.deleteNode(n), this.resizePool());
  }
  // 感应泳道变化，调整宽高
  resizePool(n, r) {
    if (console.log("---pool resize pool"), !this.children.size)
      return;
    let i = null, o = null, a = null, s = null, l = !1;
    this.children.forEach((u) => {
      const c = this.graphModel.getElement(u), { x: d, y: f, width: h, height: p, type: v, id: g } = c;
      v === "lane" && (g === n && r && (i = r.x - r.width / 2, o = r.x + r.width / 2, l = !0), !l && (!i || d - h / 2 < i) && (i = d - h / 2), !l && (!o || d + h / 2 > o) && (o = d + h / 2), (!a || f - p / 2 < a) && (a = f - p / 2), (!s || f + p / 2 > s) && (s = f + p / 2));
    }), i && o && a && s && (this.width = o - i + 30, this.height = s - a, this.x = i + (o - i) / 2 - 15, this.y = a + (s - a) / 2, this.setAttributes(), this.resizeChildren({}));
  }
  // 调整子元素
  resizeChildren({ resizeDir: n = "", deltaHeight: r = 0 }) {
    console.log("---pool resize children");
    const { x: i, y: o, width: a } = this, s = [];
    if (this.childrenModelMap.forEach((p) => {
      p.type === "lane" && s.push(p);
    }), !s.length)
      return;
    s.sort((p, v) => p.y - v.y);
    const l = s[0], u = s[s.length - 1], c = l.height + r, d = u.height + r;
    switch (n) {
      case "above":
        l.height = c < jc.height ? jc.height : c;
        break;
      case "below":
        u.height = d < jc.height ? jc.height : d;
        break;
    }
    const f = s.reduce((p, v) => p + v.height, 0);
    let h = 0;
    s.forEach((p) => {
      const { height: v } = p;
      p.changeAttribute({
        width: a - 30,
        height: v,
        x: i + 15,
        y: o - f / 2 + h + v / 2
      }), h += v;
    }), this.height = f;
  }
}
class fK extends Ua.view {
  getResizeShape() {
    const { model: t } = this.props, { x: n, y: r, width: i, height: o } = t, a = t.getNodeStyle(), s = {
      ...a,
      x: n - i / 2,
      y: r - o / 2,
      width: 30,
      height: o
    }, l = {
      ...a,
      x: n - i / 2 + 30,
      y: r - o / 2,
      width: i - 30,
      height: o,
      fill: "transparent"
    };
    return q("g", {}, [
      // this.getAddAbleShape(),
      q("rect", { ...s }),
      q("rect", { ...l })
    ]);
  }
}
const hK = {
  type: "pool",
  view: fK,
  model: dK
};
function pK(e) {
  const t = e.value;
  t && (t.register(am), t.register(Ve), t.register(yU), t.register(_U), t.register(wU), t.register(EU), t.register(JX), t.register(CY), t.register(NY), t.register(PY), t.register(eU), t.register(nU), t.register(iU), t.register(KY), t.register(XY), t.register(zY), t.register(VY), t.register(IY), t.register(LY), t.register(WU), t.register(UU), t.register(QU), t.register(nY), t.register(qU), t.register(oY), t.register(lY), t.register(sU), t.register(OU), t.register(MU), t.register(cU), t.register(pU), t.register(DU), t.register($U), t.register(BU), t.register(FU), t.register(pY), t.register(yY), t.register(EY), t.register(bY), t.register(JY), t.register(tK), t.register(iK), t.register(sK), t.register(dY), t.register(cK), t.register(hK));
}
const vK = {
  strokeWidth: 1,
  stroke: "#000000"
}, gK = {
  strokeWidth: 1,
  stroke: "#000000",
  fill: "#ffffff"
}, yK = {
  color: "#000000",
  fontSize: 12,
  lineHeight: 1.5,
  overflowMode: "autoWrap"
}, mK = {
  color: "#000000",
  fontSize: 12,
  lineHeight: 1.5,
  textWidth: 100,
  overflowMode: "autoWrap",
  background: {
    fill: "#FFFFFF"
  }
}, _K = {
  baseEdge: vK,
  baseNode: gK,
  nodeText: yK,
  edgeText: mK
}, I1 = {
  backgroundColor: "#FFFFFF",
  // 填充色
  borderType: 0,
  // 线条类型
  borderColor: "#000000",
  // 填充颜色
  borderWidth: 1,
  // 线条宽度
  borderStyle: "solid",
  // 线条类型
  fontSize: 12,
  // 文本大小
  fontColor: "#000000",
  // 文本颜色
  fontWeight: "normal",
  // 文本加粗
  fontFamily: void 0,
  // 文本样式
  lineHeight: 1.5,
  // 行高
  textAlign: void 0
  // 对齐
};
function Fc(e, t = !1) {
  return e.shiftKey ? t ? -10 : 10 : e.ctrlKey ? t ? -1 : 1 : t ? -5 : 5;
}
function bK(e) {
  return [
    {
      keys: ["delete"],
      callback: () => {
        if (!e.value)
          return;
        const s = e.value.getSelectElements(!0);
        e.value.clearSelectElements(), s.edges.forEach((l) => e.value.deleteEdge(l.id)), s.nodes.forEach((l) => e.value.deleteNode(l.id));
      }
    },
    {
      keys: ["command+a", "cmd + a", "ctrl+a"],
      callback: (s) => {
        if (s.preventDefault(), !e.value)
          return;
        const { nodes: l, edges: u } = e.value.getGraphRawData();
        l.forEach((c) => e.value.selectElementById(c.id, !0, !1)), u.forEach((c) => e.value.selectElementById(c.id, !0, !1));
      }
    },
    {
      keys: ["left", "command+left", "ctrl+left", "shift+left", "shift+left"],
      callback: (s) => {
        if (!e.value)
          return;
        const l = e.value.graphModel, { nodes: u } = e.value.getSelectElements(!0);
        l.moveNodes(u.map((c) => c.id), Fc(s, !0), 0);
      }
    },
    {
      keys: ["right", "command+right", "ctrl+right", "shift+right", "shift+right"],
      callback: (s) => {
        if (!e.value)
          return;
        const l = e.value.graphModel, { nodes: u } = e.value.getSelectElements(!0);
        l.moveNodes(u.map((c) => c.id), Fc(s, !1), 0);
      }
    },
    {
      keys: ["up", "command+up", "ctrl+up", "shift+up", "shift+up"],
      callback: (s) => {
        if (!e.value)
          return;
        const l = e.value.graphModel, { nodes: u } = e.value.getSelectElements(!0);
        l.moveNodes(u.map((c) => c.id), 0, Fc(s, !0));
      }
    },
    {
      keys: ["down", "command+down", "ctrl+down", "shift+down", "shift+down"],
      callback: (s) => {
        if (!e.value)
          return;
        const l = e.value.graphModel, { nodes: u } = e.value.getSelectElements(!0);
        l.moveNodes(u.map((c) => c.id), 0, Fc(s, !1));
      }
    }
  ];
}
function wK(e) {
  if (!e.value)
    return;
  const t = e.value;
  e.value.on("node:dnd-add, edge:add", ({ data: n }) => {
    const { type: r, id: i } = n;
    if (r === "pool") {
      const o = t.getNodeModelById(i), { x: a, y: s, width: l, height: u } = o, { id: c } = t.addNode({
        type: "lane",
        properties: { nodeSize: { width: l - 30, height: u } },
        x: a + 15,
        y: s
      });
      o.addChild(c);
    }
  }), e.value.on("node:resize", (n) => {
    var S, _, b, T;
    const { deltaY: r, model: i, preData: o, data: a } = n;
    if (console.log(n), !((S = a == null ? void 0 : a.properties) != null && S.width) || !((_ = o == null ? void 0 : o.properties) != null && _.width) || !((b = a == null ? void 0 : a.properties) != null && b.height) || !((T = o == null ? void 0 : o.properties) != null && T.height))
      return;
    console.log("resize");
    const { id: s, type: l } = i, { x: u, y: c, properties: { width: d, height: f } } = a, { x: h, y: p, properties: { width: v, height: g } } = o, y = { oX: u, oY: c, oWidth: d, oHeight: f }, m = { nX: h, nY: p, nWidth: v, nHeight: g }, E = m.nHeight - y.oHeight;
    if (E === 0 || r === 0)
      return;
    console.log("delta");
    let w = "below";
    if ((E > 0 && m.nY - y.oY < 0 || E < 0 && m.nY - y.oY > 0) && (w = "above"), l === "pool") {
      i.resizeChildren({ resizeDir: w, deltaHeight: E });
      return;
    }
    if (l === "lane" && i.parentModel) {
      const { nX: R, nY: B, nHeight: K, nWidth: ae } = m;
      i.parentModel.resizePool(s, { x: R, y: B, width: ae, height: K });
    }
  });
}
function xK(e) {
  return [];
}
function EK(e) {
  const t = e.value;
  if (!t)
    return;
  const n = xK();
  t.extension.menu.addMenuConfig(
    { nodeMenu: n }
  );
}
var SK = {
  0: "Invalid value for configuration 'enforceActions', expected 'never', 'always' or 'observed'",
  1: function(t, n) {
    return "Cannot apply '" + t + "' to '" + n.toString() + "': Field not found.";
  },
  /*
  2(prop) {
      return `invalid decorator for '${prop.toString()}'`
  },
  3(prop) {
      return `Cannot decorate '${prop.toString()}': action can only be used on properties with a function value.`
  },
  4(prop) {
      return `Cannot decorate '${prop.toString()}': computed can only be used on getter properties.`
  },
  */
  5: "'keys()' can only be used on observable objects, arrays, sets and maps",
  6: "'values()' can only be used on observable objects, arrays, sets and maps",
  7: "'entries()' can only be used on observable objects, arrays and maps",
  8: "'set()' can only be used on observable objects, arrays and maps",
  9: "'remove()' can only be used on observable objects, arrays and maps",
  10: "'has()' can only be used on observable objects, arrays and maps",
  11: "'get()' can only be used on observable objects, arrays and maps",
  12: "Invalid annotation",
  13: "Dynamic observable objects cannot be frozen. If you're passing observables to 3rd party component/function that calls Object.freeze, pass copy instead: toJS(observable)",
  14: "Intercept handlers should return nothing or a change object",
  15: "Observable arrays cannot be frozen. If you're passing observables to 3rd party component/function that calls Object.freeze, pass copy instead: toJS(observable)",
  16: "Modification exception: the internal structure of an observable array was changed.",
  17: function(t, n) {
    return "[mobx.array] Index out of bounds, " + t + " is larger than " + n;
  },
  18: "mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js",
  19: function(t) {
    return "Cannot initialize from classes that inherit from Map: " + t.constructor.name;
  },
  20: function(t) {
    return "Cannot initialize map from " + t;
  },
  21: function(t) {
    return "Cannot convert to map from '" + t + "'";
  },
  22: "mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js",
  23: "It is not possible to get index atoms from arrays",
  24: function(t) {
    return "Cannot obtain administration from " + t;
  },
  25: function(t, n) {
    return "the entry '" + t + "' does not exist in the observable map '" + n + "'";
  },
  26: "please specify a property",
  27: function(t, n) {
    return "no observable property '" + t.toString() + "' found on the observable object '" + n + "'";
  },
  28: function(t) {
    return "Cannot obtain atom from " + t;
  },
  29: "Expecting some object",
  30: "invalid action stack. did you forget to finish an action?",
  31: "missing option for computed: get",
  32: function(t, n) {
    return "Cycle detected in computation " + t + ": " + n;
  },
  33: function(t) {
    return "The setter of computed value '" + t + "' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?";
  },
  34: function(t) {
    return "[ComputedValue '" + t + "'] It is not possible to assign a new value to a computed value.";
  },
  35: "There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`",
  36: "isolateGlobalState should be called before MobX is running any reactions",
  37: function(t) {
    return "[mobx] `observableArray." + t + "()` mutates the array in-place, which is not allowed inside a derivation. Use `array.slice()." + t + "()` instead";
  },
  38: "'ownKeys()' can only be used on observable objects",
  39: "'defineProperty()' can only be used on observable objects"
}, CK = process.env.NODE_ENV !== "production" ? SK : {};
function je(e) {
  for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), r = 1; r < t; r++)
    n[r - 1] = arguments[r];
  if (process.env.NODE_ENV !== "production") {
    var i = typeof e == "string" ? e : CK[e];
    throw typeof i == "function" && (i = i.apply(null, n)), new Error("[MobX] " + i);
  }
  throw new Error(typeof e == "number" ? "[MobX] minified error nr: " + e + (n.length ? " " + n.map(String).join(",") : "") + ". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts" : "[MobX] " + e);
}
var OK = {};
function sm() {
  return typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : OK;
}
var sC = Object.assign, lf = Object.getOwnPropertyDescriptor, Hi = Object.defineProperty, hh = Object.prototype, uf = [];
Object.freeze(uf);
var lC = {};
Object.freeze(lC);
var AK = typeof Proxy < "u", NK = /* @__PURE__ */ Object.toString();
function uC() {
  AK || je(process.env.NODE_ENV !== "production" ? "`Proxy` objects are not available in the current environment. Please configure MobX to enable a fallback implementation.`" : "Proxy not available");
}
function $l(e) {
  process.env.NODE_ENV !== "production" && Me.verifyProxies && je("MobX is currently configured to be able to run in ES5 mode, but in ES5 MobX won't be able to " + e);
}
function Mi() {
  return ++Me.mobxGuid;
}
function lm(e) {
  var t = !1;
  return function() {
    if (!t)
      return t = !0, e.apply(this, arguments);
  };
}
var gs = function() {
};
function bn(e) {
  return typeof e == "function";
}
function $a(e) {
  var t = typeof e;
  switch (t) {
    case "string":
    case "symbol":
    case "number":
      return !0;
  }
  return !1;
}
function ph(e) {
  return e !== null && typeof e == "object";
}
function Ui(e) {
  if (!ph(e))
    return !1;
  var t = Object.getPrototypeOf(e);
  if (t == null)
    return !0;
  var n = Object.hasOwnProperty.call(t, "constructor") && t.constructor;
  return typeof n == "function" && n.toString() === NK;
}
function cC(e) {
  var t = e == null ? void 0 : e.constructor;
  return t ? t.name === "GeneratorFunction" || t.displayName === "GeneratorFunction" : !1;
}
function um(e, t, n) {
  Hi(e, t, {
    enumerable: !1,
    writable: !0,
    configurable: !0,
    value: n
  });
}
function dC(e, t, n) {
  Hi(e, t, {
    enumerable: !1,
    writable: !1,
    configurable: !0,
    value: n
  });
}
function Ya(e, t) {
  var n = "isMobX" + e;
  return t.prototype[n] = !0, function(r) {
    return ph(r) && r[n] === !0;
  };
}
function hl(e) {
  return e != null && Object.prototype.toString.call(e) === "[object Map]";
}
function MK(e) {
  var t = Object.getPrototypeOf(e), n = Object.getPrototypeOf(t), r = Object.getPrototypeOf(n);
  return r === null;
}
function ao(e) {
  return e != null && Object.prototype.toString.call(e) === "[object Set]";
}
var fC = typeof Object.getOwnPropertySymbols < "u";
function TK(e) {
  var t = Object.keys(e);
  if (!fC)
    return t;
  var n = Object.getOwnPropertySymbols(e);
  return n.length ? [].concat(t, n.filter(function(r) {
    return hh.propertyIsEnumerable.call(e, r);
  })) : t;
}
var cm = typeof Reflect < "u" && Reflect.ownKeys ? Reflect.ownKeys : fC ? function(e) {
  return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e));
} : (
  /* istanbul ignore next */
  Object.getOwnPropertyNames
);
function yg(e) {
  return typeof e == "string" ? e : typeof e == "symbol" ? e.toString() : new String(e).toString();
}
function hC(e) {
  return e === null ? null : typeof e == "object" ? "" + e : e;
}
function wi(e, t) {
  return hh.hasOwnProperty.call(e, t);
}
var PK = Object.getOwnPropertyDescriptors || function(t) {
  var n = {};
  return cm(t).forEach(function(r) {
    n[r] = lf(t, r);
  }), n;
};
function _r(e, t) {
  return !!(e & t);
}
function br(e, t, n) {
  return n ? e |= t : e &= ~t, e;
}
function B1(e, t) {
  (t == null || t > e.length) && (t = e.length);
  for (var n = 0, r = Array(t); n < t; n++) r[n] = e[n];
  return r;
}
function DK(e, t) {
  for (var n = 0; n < t.length; n++) {
    var r = t[n];
    r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, LK(r.key), r);
  }
}
function pl(e, t, n) {
  return t && DK(e.prototype, t), Object.defineProperty(e, "prototype", {
    writable: !1
  }), e;
}
function ys(e, t) {
  var n = typeof Symbol < "u" && e[Symbol.iterator] || e["@@iterator"];
  if (n) return (n = n.call(e)).next.bind(n);
  if (Array.isArray(e) || (n = $K(e)) || t) {
    n && (e = n);
    var r = 0;
    return function() {
      return r >= e.length ? {
        done: !0
      } : {
        done: !1,
        value: e[r++]
      };
    };
  }
  throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function Vo() {
  return Vo = Object.assign ? Object.assign.bind() : function(e) {
    for (var t = 1; t < arguments.length; t++) {
      var n = arguments[t];
      for (var r in n) ({}).hasOwnProperty.call(n, r) && (e[r] = n[r]);
    }
    return e;
  }, Vo.apply(null, arguments);
}
function pC(e, t) {
  e.prototype = Object.create(t.prototype), e.prototype.constructor = e, mg(e, t);
}
function mg(e, t) {
  return mg = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(n, r) {
    return n.__proto__ = r, n;
  }, mg(e, t);
}
function RK(e, t) {
  if (typeof e != "object" || !e) return e;
  var n = e[Symbol.toPrimitive];
  if (n !== void 0) {
    var r = n.call(e, t);
    if (typeof r != "object") return r;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return String(e);
}
function LK(e) {
  var t = RK(e, "string");
  return typeof t == "symbol" ? t : t + "";
}
function $K(e, t) {
  if (e) {
    if (typeof e == "string") return B1(e, t);
    var n = {}.toString.call(e).slice(8, -1);
    return n === "Object" && e.constructor && (n = e.constructor.name), n === "Map" || n === "Set" ? Array.from(e) : n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? B1(e, t) : void 0;
  }
}
var so = /* @__PURE__ */ Symbol("mobx-stored-annotations");
function Vi(e) {
  function t(n, r) {
    if (ec(r))
      return e.decorate_20223_(n, r);
    Qu(n, r, e);
  }
  return Object.assign(t, e);
}
function Qu(e, t, n) {
  if (wi(e, so) || um(e, so, Vo({}, e[so])), process.env.NODE_ENV !== "production" && df(n) && !wi(e[so], t)) {
    var r = e.constructor.name + ".prototype." + t.toString();
    je("'" + r + "' is decorated with 'override', but no such decorated member was found on prototype.");
  }
  kK(e, n, t), df(n) || (e[so][t] = n);
}
function kK(e, t, n) {
  if (process.env.NODE_ENV !== "production" && !df(t) && wi(e[so], n)) {
    var r = e.constructor.name + ".prototype." + n.toString(), i = e[so][n].annotationType_, o = t.annotationType_;
    je("Cannot apply '@" + o + "' to '" + r + "':" + (`
The field is already decorated with '@` + i + "'.") + `
Re-decorating fields is not allowed.
Use '@override' decorator for methods overridden by subclass.`);
  }
}
function ec(e) {
  return typeof e == "object" && typeof e.kind == "string";
}
function vh(e, t) {
  process.env.NODE_ENV !== "production" && !t.includes(e.kind) && je("The decorator applied to '" + String(e.name) + "' cannot be used on a " + e.kind + " element");
}
var ft = /* @__PURE__ */ Symbol("mobx administration"), ta = /* @__PURE__ */ function() {
  function e(n) {
    n === void 0 && (n = process.env.NODE_ENV !== "production" ? "Atom@" + Mi() : "Atom"), this.name_ = void 0, this.flags_ = 0, this.observers_ = /* @__PURE__ */ new Set(), this.lastAccessedBy_ = 0, this.lowestObserverState_ = jt.NOT_TRACKING_, this.onBOL = void 0, this.onBUOL = void 0, this.name_ = n;
  }
  var t = e.prototype;
  return t.onBO = function() {
    this.onBOL && this.onBOL.forEach(function(r) {
      return r();
    });
  }, t.onBUO = function() {
    this.onBUOL && this.onBUOL.forEach(function(r) {
      return r();
    });
  }, t.reportObserved = function() {
    return MC(this);
  }, t.reportChanged = function() {
    Wr(), TC(this), Gr();
  }, t.toString = function() {
    return this.name_;
  }, pl(e, [{
    key: "isBeingObserved",
    get: function() {
      return _r(this.flags_, e.isBeingObservedMask_);
    },
    set: function(r) {
      this.flags_ = br(this.flags_, e.isBeingObservedMask_, r);
    }
  }, {
    key: "isPendingUnobservation",
    get: function() {
      return _r(this.flags_, e.isPendingUnobservationMask_);
    },
    set: function(r) {
      this.flags_ = br(this.flags_, e.isPendingUnobservationMask_, r);
    }
  }, {
    key: "diffValue",
    get: function() {
      return _r(this.flags_, e.diffValueMask_) ? 1 : 0;
    },
    set: function(r) {
      this.flags_ = br(this.flags_, e.diffValueMask_, r === 1);
    }
  }]);
}();
ta.isBeingObservedMask_ = 1;
ta.isPendingUnobservationMask_ = 2;
ta.diffValueMask_ = 4;
var dm = /* @__PURE__ */ Ya("Atom", ta);
function vC(e, t, n) {
  t === void 0 && (t = gs), n === void 0 && (n = gs);
  var r = new ta(e);
  return t !== gs && Kq(r, t), n !== gs && kC(r, n), r;
}
function IK(e, t) {
  return e === t;
}
function BK(e, t) {
  return _m(e, t);
}
function jK(e, t) {
  return _m(e, t, 1);
}
function zK(e, t) {
  return Object.is ? Object.is(e, t) : e === t ? e !== 0 || 1 / e === 1 / t : e !== e && t !== t;
}
var cf = {
  identity: IK,
  structural: BK,
  default: zK,
  shallow: jK
};
function ka(e, t, n) {
  return ku(e) ? e : Array.isArray(e) ? Mn.array(e, {
    name: n
  }) : Ui(e) ? Mn.object(e, void 0, {
    name: n
  }) : hl(e) ? Mn.map(e, {
    name: n
  }) : ao(e) ? Mn.set(e, {
    name: n
  }) : typeof e == "function" && !Gs(e) && !$u(e) ? cC(e) ? Xs(e) : Lu(n, e) : e;
}
function FK(e, t, n) {
  if (e == null || oc(e) || bh(e) || na(e) || Ii(e))
    return e;
  if (Array.isArray(e))
    return Mn.array(e, {
      name: n,
      deep: !1
    });
  if (Ui(e))
    return Mn.object(e, void 0, {
      name: n,
      deep: !1
    });
  if (hl(e))
    return Mn.map(e, {
      name: n,
      deep: !1
    });
  if (ao(e))
    return Mn.set(e, {
      name: n,
      deep: !1
    });
  process.env.NODE_ENV !== "production" && je("The shallow modifier / decorator can only used in combination with arrays, objects, maps and sets");
}
function gh(e) {
  return e;
}
function HK(e, t) {
  return process.env.NODE_ENV !== "production" && ku(e) && je("observable.struct should not be used with observable values"), _m(e, t) ? t : e;
}
var VK = "override";
function df(e) {
  return e.annotationType_ === VK;
}
function tc(e, t) {
  return {
    annotationType_: e,
    options_: t,
    make_: WK,
    extend_: GK,
    decorate_20223_: XK
  };
}
function WK(e, t, n, r) {
  var i;
  if ((i = this.options_) != null && i.bound)
    return this.extend_(e, t, n, !1) === null ? 0 : 1;
  if (r === e.target_)
    return this.extend_(e, t, n, !1) === null ? 0 : 2;
  if (Gs(n.value))
    return 1;
  var o = gC(e, this, t, n, !1);
  return Hi(r, t, o), 2;
}
function GK(e, t, n, r) {
  var i = gC(e, this, t, n);
  return e.defineProperty_(t, i, r);
}
function XK(e, t) {
  process.env.NODE_ENV !== "production" && vh(t, ["method", "field"]);
  var n = t.kind, r = t.name, i = t.addInitializer, o = this, a = function(u) {
    var c, d, f, h;
    return Ia((c = (d = o.options_) == null ? void 0 : d.name) != null ? c : r.toString(), u, (f = (h = o.options_) == null ? void 0 : h.autoAction) != null ? f : !1);
  };
  if (n == "field")
    return function(l) {
      var u, c = l;
      return Gs(c) || (c = a(c)), (u = o.options_) != null && u.bound && (c = c.bind(this), c.isMobxAction = !0), c;
    };
  if (n == "method") {
    var s;
    return Gs(e) || (e = a(e)), (s = this.options_) != null && s.bound && i(function() {
      var l = this, u = l[r].bind(l);
      u.isMobxAction = !0, l[r] = u;
    }), e;
  }
  je("Cannot apply '" + o.annotationType_ + "' to '" + String(r) + "' (kind: " + n + "):" + (`
'` + o.annotationType_ + "' can only be used on properties with a function value."));
}
function UK(e, t, n, r) {
  var i = t.annotationType_, o = r.value;
  process.env.NODE_ENV !== "production" && !bn(o) && je("Cannot apply '" + i + "' to '" + e.name_ + "." + n.toString() + "':" + (`
'` + i + "' can only be used on properties with a function value."));
}
function gC(e, t, n, r, i) {
  var o, a, s, l, u, c, d;
  i === void 0 && (i = Me.safeDescriptors), UK(e, t, n, r);
  var f = r.value;
  if ((o = t.options_) != null && o.bound) {
    var h;
    f = f.bind((h = e.proxy_) != null ? h : e.target_);
  }
  return {
    value: Ia(
      (a = (s = t.options_) == null ? void 0 : s.name) != null ? a : n.toString(),
      f,
      (l = (u = t.options_) == null ? void 0 : u.autoAction) != null ? l : !1,
      // https://github.com/mobxjs/mobx/discussions/3140
      (c = t.options_) != null && c.bound ? (d = e.proxy_) != null ? d : e.target_ : void 0
    ),
    // Non-configurable for classes
    // prevents accidental field redefinition in subclass
    configurable: i ? e.isPlainObject_ : !0,
    // https://github.com/mobxjs/mobx/pull/2641#issuecomment-737292058
    enumerable: !1,
    // Non-obsevable, therefore non-writable
    // Also prevents rewriting in subclass constructor
    writable: !i
  };
}
function yC(e, t) {
  return {
    annotationType_: e,
    options_: t,
    make_: YK,
    extend_: KK,
    decorate_20223_: qK
  };
}
function YK(e, t, n, r) {
  var i;
  if (r === e.target_)
    return this.extend_(e, t, n, !1) === null ? 0 : 2;
  if ((i = this.options_) != null && i.bound && (!wi(e.target_, t) || !$u(e.target_[t])) && this.extend_(e, t, n, !1) === null)
    return 0;
  if ($u(n.value))
    return 1;
  var o = mC(e, this, t, n, !1, !1);
  return Hi(r, t, o), 2;
}
function KK(e, t, n, r) {
  var i, o = mC(e, this, t, n, (i = this.options_) == null ? void 0 : i.bound);
  return e.defineProperty_(t, o, r);
}
function qK(e, t) {
  var n;
  process.env.NODE_ENV !== "production" && vh(t, ["method"]);
  var r = t.name, i = t.addInitializer;
  return $u(e) || (e = Xs(e)), (n = this.options_) != null && n.bound && i(function() {
    var o = this, a = o[r].bind(o);
    a.isMobXFlow = !0, o[r] = a;
  }), e;
}
function ZK(e, t, n, r) {
  var i = t.annotationType_, o = r.value;
  process.env.NODE_ENV !== "production" && !bn(o) && je("Cannot apply '" + i + "' to '" + e.name_ + "." + n.toString() + "':" + (`
'` + i + "' can only be used on properties with a generator function value."));
}
function mC(e, t, n, r, i, o) {
  o === void 0 && (o = Me.safeDescriptors), ZK(e, t, n, r);
  var a = r.value;
  if ($u(a) || (a = Xs(a)), i) {
    var s;
    a = a.bind((s = e.proxy_) != null ? s : e.target_), a.isMobXFlow = !0;
  }
  return {
    value: a,
    // Non-configurable for classes
    // prevents accidental field redefinition in subclass
    configurable: o ? e.isPlainObject_ : !0,
    // https://github.com/mobxjs/mobx/pull/2641#issuecomment-737292058
    enumerable: !1,
    // Non-obsevable, therefore non-writable
    // Also prevents rewriting in subclass constructor
    writable: !o
  };
}
function fm(e, t) {
  return {
    annotationType_: e,
    options_: t,
    make_: JK,
    extend_: QK,
    decorate_20223_: eq
  };
}
function JK(e, t, n) {
  return this.extend_(e, t, n, !1) === null ? 0 : 1;
}
function QK(e, t, n, r) {
  return tq(e, this, t, n), e.defineComputedProperty_(t, Vo({}, this.options_, {
    get: n.get,
    set: n.set
  }), r);
}
function eq(e, t) {
  process.env.NODE_ENV !== "production" && vh(t, ["getter"]);
  var n = this, r = t.name, i = t.addInitializer;
  return i(function() {
    var o = ic(this)[ft], a = Vo({}, n.options_, {
      get: e,
      context: this
    });
    a.name || (a.name = process.env.NODE_ENV !== "production" ? o.name_ + "." + r.toString() : "ObservableObject." + r.toString()), o.values_.set(r, new ei(a));
  }), function() {
    return this[ft].getObservablePropValue_(r);
  };
}
function tq(e, t, n, r) {
  var i = t.annotationType_, o = r.get;
  process.env.NODE_ENV !== "production" && !o && je("Cannot apply '" + i + "' to '" + e.name_ + "." + n.toString() + "':" + (`
'` + i + "' can only be used on getter(+setter) properties."));
}
function yh(e, t) {
  return {
    annotationType_: e,
    options_: t,
    make_: nq,
    extend_: rq,
    decorate_20223_: iq
  };
}
function nq(e, t, n) {
  return this.extend_(e, t, n, !1) === null ? 0 : 1;
}
function rq(e, t, n, r) {
  var i, o;
  return oq(e, this, t, n), e.defineObservableProperty_(t, n.value, (i = (o = this.options_) == null ? void 0 : o.enhancer) != null ? i : ka, r);
}
function iq(e, t) {
  if (process.env.NODE_ENV !== "production") {
    if (t.kind === "field")
      throw je("Please use `@observable accessor " + String(t.name) + "` instead of `@observable " + String(t.name) + "`");
    vh(t, ["accessor"]);
  }
  var n = this, r = t.kind, i = t.name, o = /* @__PURE__ */ new WeakSet();
  function a(s, l) {
    var u, c, d = ic(s)[ft], f = new Sa(l, (u = (c = n.options_) == null ? void 0 : c.enhancer) != null ? u : ka, process.env.NODE_ENV !== "production" ? d.name_ + "." + i.toString() : "ObservableObject." + i.toString(), !1);
    d.values_.set(i, f), o.add(s);
  }
  if (r == "accessor")
    return {
      get: function() {
        return o.has(this) || a(this, e.get.call(this)), this[ft].getObservablePropValue_(i);
      },
      set: function(l) {
        return o.has(this) || a(this, l), this[ft].setObservablePropValue_(i, l);
      },
      init: function(l) {
        return o.has(this) || a(this, l), l;
      }
    };
}
function oq(e, t, n, r) {
  var i = t.annotationType_;
  process.env.NODE_ENV !== "production" && !("value" in r) && je("Cannot apply '" + i + "' to '" + e.name_ + "." + n.toString() + "':" + (`
'` + i + "' cannot be used on getter/setter properties"));
}
var aq = "true", sq = /* @__PURE__ */ _C();
function _C(e) {
  return {
    annotationType_: aq,
    options_: e,
    make_: lq,
    extend_: uq,
    decorate_20223_: cq
  };
}
function lq(e, t, n, r) {
  var i, o;
  if (n.get)
    return mh.make_(e, t, n, r);
  if (n.set) {
    var a = Ia(t.toString(), n.set);
    return r === e.target_ ? e.defineProperty_(t, {
      configurable: Me.safeDescriptors ? e.isPlainObject_ : !0,
      set: a
    }) === null ? 0 : 2 : (Hi(r, t, {
      configurable: !0,
      set: a
    }), 2);
  }
  if (r !== e.target_ && typeof n.value == "function") {
    var s;
    if (cC(n.value)) {
      var l, u = (l = this.options_) != null && l.autoBind ? Xs.bound : Xs;
      return u.make_(e, t, n, r);
    }
    var c = (s = this.options_) != null && s.autoBind ? Lu.bound : Lu;
    return c.make_(e, t, n, r);
  }
  var d = ((i = this.options_) == null ? void 0 : i.deep) === !1 ? Mn.ref : Mn;
  if (typeof n.value == "function" && (o = this.options_) != null && o.autoBind) {
    var f;
    n.value = n.value.bind((f = e.proxy_) != null ? f : e.target_);
  }
  return d.make_(e, t, n, r);
}
function uq(e, t, n, r) {
  var i, o;
  if (n.get)
    return mh.extend_(e, t, n, r);
  if (n.set)
    return e.defineProperty_(t, {
      configurable: Me.safeDescriptors ? e.isPlainObject_ : !0,
      set: Ia(t.toString(), n.set)
    }, r);
  if (typeof n.value == "function" && (i = this.options_) != null && i.autoBind) {
    var a;
    n.value = n.value.bind((a = e.proxy_) != null ? a : e.target_);
  }
  var s = ((o = this.options_) == null ? void 0 : o.deep) === !1 ? Mn.ref : Mn;
  return s.extend_(e, t, n, r);
}
function cq(e, t) {
  je("'" + this.annotationType_ + "' cannot be used as a decorator");
}
var dq = "observable", fq = "observable.ref", hq = "observable.shallow", pq = "observable.struct", bC = {
  deep: !0,
  name: void 0,
  defaultDecorator: void 0,
  proxy: !0
};
Object.freeze(bC);
function Hc(e) {
  return e || bC;
}
var _g = /* @__PURE__ */ yh(dq), vq = /* @__PURE__ */ yh(fq, {
  enhancer: gh
}), gq = /* @__PURE__ */ yh(hq, {
  enhancer: FK
}), yq = /* @__PURE__ */ yh(pq, {
  enhancer: HK
}), wC = /* @__PURE__ */ Vi(_g);
function Vc(e) {
  return e.deep === !0 ? ka : e.deep === !1 ? gh : _q(e.defaultDecorator);
}
function mq(e) {
  var t;
  return e ? (t = e.defaultDecorator) != null ? t : _C(e) : void 0;
}
function _q(e) {
  var t, n;
  return e && (t = (n = e.options_) == null ? void 0 : n.enhancer) != null ? t : ka;
}
function xC(e, t, n) {
  if (ec(t))
    return _g.decorate_20223_(e, t);
  if ($a(t)) {
    Qu(e, t, _g);
    return;
  }
  return ku(e) ? e : Ui(e) ? Mn.object(e, t, n) : Array.isArray(e) ? Mn.array(e, t) : hl(e) ? Mn.map(e, t) : ao(e) ? Mn.set(e, t) : typeof e == "object" && e !== null ? e : Mn.box(e, t);
}
sC(xC, wC);
var bq = {
  box: function(t, n) {
    var r = Hc(n);
    return new Sa(t, Vc(r), r.name, !0, r.equals);
  },
  array: function(t, n) {
    var r = Hc(n);
    return (Me.useProxies === !1 || r.proxy === !1 ? mZ : lZ)(t, Vc(r), r.name);
  },
  map: function(t, n) {
    var r = Hc(n);
    return new FC(t, Vc(r), r.name);
  },
  set: function(t, n) {
    var r = Hc(n);
    return new HC(t, Vc(r), r.name);
  },
  object: function(t, n, r) {
    return vl(function() {
      return qq(Me.useProxies === !1 || (r == null ? void 0 : r.proxy) === !1 ? ic({}, r) : oZ({}, r), t, n);
    });
  },
  ref: /* @__PURE__ */ Vi(vq),
  shallow: /* @__PURE__ */ Vi(gq),
  deep: wC,
  struct: /* @__PURE__ */ Vi(yq)
}, Mn = /* @__PURE__ */ sC(xC, bq), EC = "computed", wq = "computed.struct", bg = /* @__PURE__ */ fm(EC), xq = /* @__PURE__ */ fm(wq, {
  equals: cf.structural
}), mh = function(t, n) {
  if (ec(n))
    return bg.decorate_20223_(t, n);
  if ($a(n))
    return Qu(t, n, bg);
  if (Ui(t))
    return Vi(fm(EC, t));
  process.env.NODE_ENV !== "production" && (bn(t) || je("First argument to `computed` should be an expression."), bn(n) && je("A setter as second argument is no longer supported, use `{ set: fn }` option instead"));
  var r = Ui(n) ? n : {};
  return r.get = t, r.name || (r.name = t.name || ""), new ei(r);
};
Object.assign(mh, bg);
mh.struct = /* @__PURE__ */ Vi(xq);
var j1, z1, ff = 0, Eq = 1, Sq = (j1 = (z1 = /* @__PURE__ */ lf(function() {
}, "name")) == null ? void 0 : z1.configurable) != null ? j1 : !1, F1 = {
  value: "action",
  configurable: !0,
  writable: !1,
  enumerable: !1
};
function Ia(e, t, n, r) {
  n === void 0 && (n = !1), process.env.NODE_ENV !== "production" && (bn(t) || je("`action` can only be invoked on functions"), (typeof e != "string" || !e) && je("actions should have valid names, got: '" + e + "'"));
  function i() {
    return Cq(e, n, t, r || this, arguments);
  }
  return i.isMobxAction = !0, i.toString = function() {
    return t.toString();
  }, Sq && (F1.value = e, Hi(i, "name", F1)), i;
}
function Cq(e, t, n, r, i) {
  var o = Oq(e, t, r, i);
  try {
    return n.apply(r, i);
  } catch (a) {
    throw o.error_ = a, a;
  } finally {
    Aq(o);
  }
}
function Oq(e, t, n, r) {
  var i = process.env.NODE_ENV !== "production" && Dn() && !!e, o = 0;
  if (process.env.NODE_ENV !== "production" && i) {
    o = Date.now();
    var a = r ? Array.from(r) : uf;
    Sr({
      type: gm,
      name: e,
      object: n,
      arguments: a
    });
  }
  var s = Me.trackingDerivation, l = !t || !s;
  Wr();
  var u = Me.allowStateChanges;
  l && (Ka(), u = hm(!0));
  var c = vm(!0), d = {
    runAsAction_: l,
    prevDerivation_: s,
    prevAllowStateChanges_: u,
    prevAllowStateReads_: c,
    notifySpy_: i,
    startTime_: o,
    actionId_: Eq++,
    parentActionId_: ff
  };
  return ff = d.actionId_, d;
}
function Aq(e) {
  ff !== e.actionId_ && je(30), ff = e.parentActionId_, e.error_ !== void 0 && (Me.suppressReactionErrors = !0), pm(e.prevAllowStateChanges_), hu(e.prevAllowStateReads_), Gr(), e.runAsAction_ && co(e.prevDerivation_), process.env.NODE_ENV !== "production" && e.notifySpy_ && Cr({
    time: Date.now() - e.startTime_
  }), Me.suppressReactionErrors = !1;
}
function hm(e) {
  var t = Me.allowStateChanges;
  return Me.allowStateChanges = e, t;
}
function pm(e) {
  Me.allowStateChanges = e;
}
var Nq = "create", Sa = /* @__PURE__ */ function(e) {
  function t(r, i, o, a, s) {
    var l;
    return o === void 0 && (o = process.env.NODE_ENV !== "production" ? "ObservableValue@" + Mi() : "ObservableValue"), a === void 0 && (a = !0), s === void 0 && (s = cf.default), l = e.call(this, o) || this, l.enhancer = void 0, l.name_ = void 0, l.equals = void 0, l.hasUnreportedChange_ = !1, l.interceptors_ = void 0, l.changeListeners_ = void 0, l.value_ = void 0, l.dehancer = void 0, l.enhancer = i, l.name_ = o, l.equals = s, l.value_ = i(r, void 0, o), process.env.NODE_ENV !== "production" && a && Dn() && Ba({
      type: Nq,
      object: l,
      observableKind: "value",
      debugObjectName: l.name_,
      newValue: "" + l.value_
    }), l;
  }
  pC(t, e);
  var n = t.prototype;
  return n.dehanceValue = function(i) {
    return this.dehancer !== void 0 ? this.dehancer(i) : i;
  }, n.set = function(i) {
    var o = this.value_;
    if (i = this.prepareNewValue_(i), i !== Me.UNCHANGED) {
      var a = Dn();
      process.env.NODE_ENV !== "production" && a && Sr({
        type: pi,
        object: this,
        observableKind: "value",
        debugObjectName: this.name_,
        newValue: i,
        oldValue: o
      }), this.setNewValue_(i), process.env.NODE_ENV !== "production" && a && Cr();
    }
  }, n.prepareNewValue_ = function(i) {
    if (Bi(this), Br(this)) {
      var o = jr(this, {
        object: this,
        type: pi,
        newValue: i
      });
      if (!o)
        return Me.UNCHANGED;
      i = o.newValue;
    }
    return i = this.enhancer(i, this.value_, this.name_), this.equals(this.value_, i) ? Me.UNCHANGED : i;
  }, n.setNewValue_ = function(i) {
    var o = this.value_;
    this.value_ = i, this.reportChanged(), xi(this) && Ei(this, {
      type: pi,
      object: this,
      newValue: i,
      oldValue: o
    });
  }, n.get = function() {
    return this.reportObserved(), this.dehanceValue(this.value_);
  }, n.intercept_ = function(i) {
    return nc(this, i);
  }, n.observe_ = function(i, o) {
    return o && i({
      observableKind: "value",
      debugObjectName: this.name_,
      object: this,
      type: pi,
      newValue: this.value_,
      oldValue: void 0
    }), rc(this, i);
  }, n.raw = function() {
    return this.value_;
  }, n.toJSON = function() {
    return this.get();
  }, n.toString = function() {
    return this.name_ + "[" + this.value_ + "]";
  }, n.valueOf = function() {
    return hC(this.get());
  }, n[Symbol.toPrimitive] = function() {
    return this.valueOf();
  }, t;
}(ta), ei = /* @__PURE__ */ function() {
  function e(n) {
    this.dependenciesState_ = jt.NOT_TRACKING_, this.observing_ = [], this.newObserving_ = null, this.observers_ = /* @__PURE__ */ new Set(), this.runId_ = 0, this.lastAccessedBy_ = 0, this.lowestObserverState_ = jt.UP_TO_DATE_, this.unboundDepsCount_ = 0, this.value_ = new hf(null), this.name_ = void 0, this.triggeredBy_ = void 0, this.flags_ = 0, this.derivation = void 0, this.setter_ = void 0, this.isTracing_ = Kr.NONE, this.scope_ = void 0, this.equals_ = void 0, this.requiresReaction_ = void 0, this.keepAlive_ = void 0, this.onBOL = void 0, this.onBUOL = void 0, n.get || je(31), this.derivation = n.get, this.name_ = n.name || (process.env.NODE_ENV !== "production" ? "ComputedValue@" + Mi() : "ComputedValue"), n.set && (this.setter_ = Ia(process.env.NODE_ENV !== "production" ? this.name_ + "-setter" : "ComputedValue-setter", n.set)), this.equals_ = n.equals || (n.compareStructural || n.struct ? cf.structural : cf.default), this.scope_ = n.context, this.requiresReaction_ = n.requiresReaction, this.keepAlive_ = !!n.keepAlive;
  }
  var t = e.prototype;
  return t.onBecomeStale_ = function() {
    Lq(this);
  }, t.onBO = function() {
    this.onBOL && this.onBOL.forEach(function(r) {
      return r();
    });
  }, t.onBUO = function() {
    this.onBUOL && this.onBUOL.forEach(function(r) {
      return r();
    });
  }, t.get = function() {
    if (this.isComputing && je(32, this.name_, this.derivation), Me.inBatch === 0 && // !globalState.trackingDerivatpion &&
    this.observers_.size === 0 && !this.keepAlive_)
      wg(this) && (this.warnAboutUntrackedRead_(), Wr(), this.value_ = this.computeValue_(!1), Gr());
    else if (MC(this), wg(this)) {
      var r = Me.trackingContext;
      this.keepAlive_ && !r && (Me.trackingContext = this), this.trackAndCompute() && Rq(this), Me.trackingContext = r;
    }
    var i = this.value_;
    if (ad(i))
      throw i.cause;
    return i;
  }, t.set = function(r) {
    if (this.setter_) {
      this.isRunningSetter && je(33, this.name_), this.isRunningSetter = !0;
      try {
        this.setter_.call(this.scope_, r);
      } finally {
        this.isRunningSetter = !1;
      }
    } else
      je(34, this.name_);
  }, t.trackAndCompute = function() {
    var r = this.value_, i = (
      /* see #1208 */
      this.dependenciesState_ === jt.NOT_TRACKING_
    ), o = this.computeValue_(!0), a = i || ad(r) || ad(o) || !this.equals_(r, o);
    return a && (this.value_ = o, process.env.NODE_ENV !== "production" && Dn() && Ba({
      observableKind: "computed",
      debugObjectName: this.name_,
      object: this.scope_,
      type: "update",
      oldValue: r,
      newValue: o
    })), a;
  }, t.computeValue_ = function(r) {
    this.isComputing = !0;
    var i = hm(!1), o;
    if (r)
      o = SC(this, this.derivation, this.scope_);
    else if (Me.disableErrorBoundaries === !0)
      o = this.derivation.call(this.scope_);
    else
      try {
        o = this.derivation.call(this.scope_);
      } catch (a) {
        o = new hf(a);
      }
    return pm(i), this.isComputing = !1, o;
  }, t.suspend_ = function() {
    this.keepAlive_ || (xg(this), this.value_ = void 0, process.env.NODE_ENV !== "production" && this.isTracing_ !== Kr.NONE && console.log("[mobx.trace] Computed value '" + this.name_ + "' was suspended and it will recompute on the next access."));
  }, t.observe_ = function(r, i) {
    var o = this, a = !0, s = void 0;
    return Wq(function() {
      var l = o.get();
      if (!a || i) {
        var u = Ka();
        r({
          observableKind: "computed",
          debugObjectName: o.name_,
          type: pi,
          object: o,
          newValue: l,
          oldValue: s
        }), co(u);
      }
      a = !1, s = l;
    });
  }, t.warnAboutUntrackedRead_ = function() {
    process.env.NODE_ENV !== "production" && (this.isTracing_ !== Kr.NONE && console.log("[mobx.trace] Computed value '" + this.name_ + "' is being read outside a reactive context. Doing a full recompute."), (typeof this.requiresReaction_ == "boolean" ? this.requiresReaction_ : Me.computedRequiresReaction) && console.warn("[mobx] Computed value '" + this.name_ + "' is being read outside a reactive context. Doing a full recompute."));
  }, t.toString = function() {
    return this.name_ + "[" + this.derivation.toString() + "]";
  }, t.valueOf = function() {
    return hC(this.get());
  }, t[Symbol.toPrimitive] = function() {
    return this.valueOf();
  }, pl(e, [{
    key: "isComputing",
    get: function() {
      return _r(this.flags_, e.isComputingMask_);
    },
    set: function(r) {
      this.flags_ = br(this.flags_, e.isComputingMask_, r);
    }
  }, {
    key: "isRunningSetter",
    get: function() {
      return _r(this.flags_, e.isRunningSetterMask_);
    },
    set: function(r) {
      this.flags_ = br(this.flags_, e.isRunningSetterMask_, r);
    }
  }, {
    key: "isBeingObserved",
    get: function() {
      return _r(this.flags_, e.isBeingObservedMask_);
    },
    set: function(r) {
      this.flags_ = br(this.flags_, e.isBeingObservedMask_, r);
    }
  }, {
    key: "isPendingUnobservation",
    get: function() {
      return _r(this.flags_, e.isPendingUnobservationMask_);
    },
    set: function(r) {
      this.flags_ = br(this.flags_, e.isPendingUnobservationMask_, r);
    }
  }, {
    key: "diffValue",
    get: function() {
      return _r(this.flags_, e.diffValueMask_) ? 1 : 0;
    },
    set: function(r) {
      this.flags_ = br(this.flags_, e.diffValueMask_, r === 1);
    }
  }]);
}();
ei.isComputingMask_ = 1;
ei.isRunningSetterMask_ = 2;
ei.isBeingObservedMask_ = 4;
ei.isPendingUnobservationMask_ = 8;
ei.diffValueMask_ = 16;
var _h = /* @__PURE__ */ Ya("ComputedValue", ei), jt;
(function(e) {
  e[e.NOT_TRACKING_ = -1] = "NOT_TRACKING_", e[e.UP_TO_DATE_ = 0] = "UP_TO_DATE_", e[e.POSSIBLY_STALE_ = 1] = "POSSIBLY_STALE_", e[e.STALE_ = 2] = "STALE_";
})(jt || (jt = {}));
var Kr;
(function(e) {
  e[e.NONE = 0] = "NONE", e[e.LOG = 1] = "LOG", e[e.BREAK = 2] = "BREAK";
})(Kr || (Kr = {}));
var hf = function(t) {
  this.cause = void 0, this.cause = t;
};
function ad(e) {
  return e instanceof hf;
}
function wg(e) {
  switch (e.dependenciesState_) {
    case jt.UP_TO_DATE_:
      return !1;
    case jt.NOT_TRACKING_:
    case jt.STALE_:
      return !0;
    case jt.POSSIBLY_STALE_: {
      for (var t = vm(!0), n = Ka(), r = e.observing_, i = r.length, o = 0; o < i; o++) {
        var a = r[o];
        if (_h(a)) {
          if (Me.disableErrorBoundaries)
            a.get();
          else
            try {
              a.get();
            } catch {
              return co(n), hu(t), !0;
            }
          if (e.dependenciesState_ === jt.STALE_)
            return co(n), hu(t), !0;
        }
      }
      return OC(e), co(n), hu(t), !1;
    }
  }
}
function Bi(e) {
  if (process.env.NODE_ENV !== "production") {
    var t = e.observers_.size > 0;
    !Me.allowStateChanges && (t || Me.enforceActions === "always") && console.warn("[MobX] " + (Me.enforceActions ? "Since strict-mode is enabled, changing (observed) observable values without using an action is not allowed. Tried to modify: " : "Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, a computed value or the render function of a React component? You can wrap side effects in 'runInAction' (or decorate functions with 'action') if needed. Tried to modify: ") + e.name_);
  }
}
function Mq(e) {
  process.env.NODE_ENV !== "production" && !Me.allowStateReads && Me.observableRequiresReaction && console.warn("[mobx] Observable '" + e.name_ + "' being read outside a reactive context.");
}
function SC(e, t, n) {
  var r = vm(!0);
  OC(e), e.newObserving_ = new Array(
    // Reserve constant space for initial dependencies, dynamic space otherwise.
    // See https://github.com/mobxjs/mobx/pull/3833
    e.runId_ === 0 ? 100 : e.observing_.length
  ), e.unboundDepsCount_ = 0, e.runId_ = ++Me.runId;
  var i = Me.trackingDerivation;
  Me.trackingDerivation = e, Me.inBatch++;
  var o;
  if (Me.disableErrorBoundaries === !0)
    o = t.call(n);
  else
    try {
      o = t.call(n);
    } catch (a) {
      o = new hf(a);
    }
  return Me.inBatch--, Me.trackingDerivation = i, Pq(e), Tq(e), hu(r), o;
}
function Tq(e) {
  process.env.NODE_ENV !== "production" && e.observing_.length === 0 && (typeof e.requiresObservable_ == "boolean" ? e.requiresObservable_ : Me.reactionRequiresObservable) && console.warn("[mobx] Derivation '" + e.name_ + "' is created/updated without reading any observable value.");
}
function Pq(e) {
  for (var t = e.observing_, n = e.observing_ = e.newObserving_, r = jt.UP_TO_DATE_, i = 0, o = e.unboundDepsCount_, a = 0; a < o; a++) {
    var s = n[a];
    s.diffValue === 0 && (s.diffValue = 1, i !== a && (n[i] = s), i++), s.dependenciesState_ > r && (r = s.dependenciesState_);
  }
  for (n.length = i, e.newObserving_ = null, o = t.length; o--; ) {
    var l = t[o];
    l.diffValue === 0 && AC(l, e), l.diffValue = 0;
  }
  for (; i--; ) {
    var u = n[i];
    u.diffValue === 1 && (u.diffValue = 0, Dq(u, e));
  }
  r !== jt.UP_TO_DATE_ && (e.dependenciesState_ = r, e.onBecomeStale_());
}
function xg(e) {
  var t = e.observing_;
  e.observing_ = [];
  for (var n = t.length; n--; )
    AC(t[n], e);
  e.dependenciesState_ = jt.NOT_TRACKING_;
}
function CC(e) {
  var t = Ka();
  try {
    return e();
  } finally {
    co(t);
  }
}
function Ka() {
  var e = Me.trackingDerivation;
  return Me.trackingDerivation = null, e;
}
function co(e) {
  Me.trackingDerivation = e;
}
function vm(e) {
  var t = Me.allowStateReads;
  return Me.allowStateReads = e, t;
}
function hu(e) {
  Me.allowStateReads = e;
}
function OC(e) {
  if (e.dependenciesState_ !== jt.UP_TO_DATE_) {
    e.dependenciesState_ = jt.UP_TO_DATE_;
    for (var t = e.observing_, n = t.length; n--; )
      t[n].lowestObserverState_ = jt.UP_TO_DATE_;
  }
}
var Fp = function() {
  this.version = 6, this.UNCHANGED = {}, this.trackingDerivation = null, this.trackingContext = null, this.runId = 0, this.mobxGuid = 0, this.inBatch = 0, this.pendingUnobservations = [], this.pendingReactions = [], this.isRunningReactions = !1, this.allowStateChanges = !1, this.allowStateReads = !0, this.enforceActions = !0, this.spyListeners = [], this.globalReactionErrorHandlers = [], this.computedRequiresReaction = !1, this.reactionRequiresObservable = !1, this.observableRequiresReaction = !1, this.disableErrorBoundaries = !1, this.suppressReactionErrors = !1, this.useProxies = !0, this.verifyProxies = !1, this.safeDescriptors = !0;
}, Hp = !0, Me = /* @__PURE__ */ function() {
  var e = /* @__PURE__ */ sm();
  return e.__mobxInstanceCount > 0 && !e.__mobxGlobals && (Hp = !1), e.__mobxGlobals && e.__mobxGlobals.version !== new Fp().version && (Hp = !1), Hp ? e.__mobxGlobals ? (e.__mobxInstanceCount += 1, e.__mobxGlobals.UNCHANGED || (e.__mobxGlobals.UNCHANGED = {}), e.__mobxGlobals) : (e.__mobxInstanceCount = 1, e.__mobxGlobals = /* @__PURE__ */ new Fp()) : (setTimeout(function() {
    je(35);
  }, 1), new Fp());
}();
function Dq(e, t) {
  e.observers_.add(t), e.lowestObserverState_ > t.dependenciesState_ && (e.lowestObserverState_ = t.dependenciesState_);
}
function AC(e, t) {
  e.observers_.delete(t), e.observers_.size === 0 && NC(e);
}
function NC(e) {
  e.isPendingUnobservation === !1 && (e.isPendingUnobservation = !0, Me.pendingUnobservations.push(e));
}
function Wr() {
  Me.inBatch++;
}
function Gr() {
  if (--Me.inBatch === 0) {
    RC();
    for (var e = Me.pendingUnobservations, t = 0; t < e.length; t++) {
      var n = e[t];
      n.isPendingUnobservation = !1, n.observers_.size === 0 && (n.isBeingObserved && (n.isBeingObserved = !1, n.onBUO()), n instanceof ei && n.suspend_());
    }
    Me.pendingUnobservations = [];
  }
}
function MC(e) {
  Mq(e);
  var t = Me.trackingDerivation;
  return t !== null ? (t.runId_ !== e.lastAccessedBy_ && (e.lastAccessedBy_ = t.runId_, t.newObserving_[t.unboundDepsCount_++] = e, !e.isBeingObserved && Me.trackingContext && (e.isBeingObserved = !0, e.onBO())), e.isBeingObserved) : (e.observers_.size === 0 && Me.inBatch > 0 && NC(e), !1);
}
function TC(e) {
  e.lowestObserverState_ !== jt.STALE_ && (e.lowestObserverState_ = jt.STALE_, e.observers_.forEach(function(t) {
    t.dependenciesState_ === jt.UP_TO_DATE_ && (process.env.NODE_ENV !== "production" && t.isTracing_ !== Kr.NONE && PC(t, e), t.onBecomeStale_()), t.dependenciesState_ = jt.STALE_;
  }));
}
function Rq(e) {
  e.lowestObserverState_ !== jt.STALE_ && (e.lowestObserverState_ = jt.STALE_, e.observers_.forEach(function(t) {
    t.dependenciesState_ === jt.POSSIBLY_STALE_ ? (t.dependenciesState_ = jt.STALE_, process.env.NODE_ENV !== "production" && t.isTracing_ !== Kr.NONE && PC(t, e)) : t.dependenciesState_ === jt.UP_TO_DATE_ && (e.lowestObserverState_ = jt.UP_TO_DATE_);
  }));
}
function Lq(e) {
  e.lowestObserverState_ === jt.UP_TO_DATE_ && (e.lowestObserverState_ = jt.POSSIBLY_STALE_, e.observers_.forEach(function(t) {
    t.dependenciesState_ === jt.UP_TO_DATE_ && (t.dependenciesState_ = jt.POSSIBLY_STALE_, t.onBecomeStale_());
  }));
}
function PC(e, t) {
  if (console.log("[mobx.trace] '" + e.name_ + "' is invalidated due to a change in: '" + t.name_ + "'"), e.isTracing_ === Kr.BREAK) {
    var n = [];
    DC(Zq(e), n, 1), new Function(`debugger;
/*
Tracing '` + e.name_ + `'

You are entering this break point because derivation '` + e.name_ + "' is being traced and '" + t.name_ + `' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

` + (e instanceof ei ? e.derivation.toString().replace(/[*]\//g, "/") : "") + `

The dependencies for this derivation are:

` + n.join(`
`) + `
*/
    `)();
  }
}
function DC(e, t, n) {
  if (t.length >= 1e3) {
    t.push("(and many more)");
    return;
  }
  t.push("" + "	".repeat(n - 1) + e.name), e.dependencies && e.dependencies.forEach(function(r) {
    return DC(r, t, n + 1);
  });
}
var Wo = /* @__PURE__ */ function() {
  function e(n, r, i, o) {
    n === void 0 && (n = process.env.NODE_ENV !== "production" ? "Reaction@" + Mi() : "Reaction"), this.name_ = void 0, this.onInvalidate_ = void 0, this.errorHandler_ = void 0, this.requiresObservable_ = void 0, this.observing_ = [], this.newObserving_ = [], this.dependenciesState_ = jt.NOT_TRACKING_, this.runId_ = 0, this.unboundDepsCount_ = 0, this.flags_ = 0, this.isTracing_ = Kr.NONE, this.name_ = n, this.onInvalidate_ = r, this.errorHandler_ = i, this.requiresObservable_ = o;
  }
  var t = e.prototype;
  return t.onBecomeStale_ = function() {
    this.schedule_();
  }, t.schedule_ = function() {
    this.isScheduled || (this.isScheduled = !0, Me.pendingReactions.push(this), RC());
  }, t.runReaction_ = function() {
    if (!this.isDisposed) {
      Wr(), this.isScheduled = !1;
      var r = Me.trackingContext;
      if (Me.trackingContext = this, wg(this)) {
        this.isTrackPending = !0;
        try {
          this.onInvalidate_(), process.env.NODE_ENV !== "production" && this.isTrackPending && Dn() && Ba({
            name: this.name_,
            type: "scheduled-reaction"
          });
        } catch (i) {
          this.reportExceptionInDerivation_(i);
        }
      }
      Me.trackingContext = r, Gr();
    }
  }, t.track = function(r) {
    if (!this.isDisposed) {
      Wr();
      var i = Dn(), o;
      process.env.NODE_ENV !== "production" && i && (o = Date.now(), Sr({
        name: this.name_,
        type: "reaction"
      })), this.isRunning = !0;
      var a = Me.trackingContext;
      Me.trackingContext = this;
      var s = SC(this, r, void 0);
      Me.trackingContext = a, this.isRunning = !1, this.isTrackPending = !1, this.isDisposed && xg(this), ad(s) && this.reportExceptionInDerivation_(s.cause), process.env.NODE_ENV !== "production" && i && Cr({
        time: Date.now() - o
      }), Gr();
    }
  }, t.reportExceptionInDerivation_ = function(r) {
    var i = this;
    if (this.errorHandler_) {
      this.errorHandler_(r, this);
      return;
    }
    if (Me.disableErrorBoundaries)
      throw r;
    var o = process.env.NODE_ENV !== "production" ? "[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '" + this + "'" : "[mobx] uncaught error in '" + this + "'";
    Me.suppressReactionErrors ? process.env.NODE_ENV !== "production" && console.warn("[mobx] (error in reaction '" + this.name_ + "' suppressed, fix error of causing action below)") : console.error(o, r), process.env.NODE_ENV !== "production" && Dn() && Ba({
      type: "error",
      name: this.name_,
      message: o,
      error: "" + r
    }), Me.globalReactionErrorHandlers.forEach(function(a) {
      return a(r, i);
    });
  }, t.dispose = function() {
    this.isDisposed || (this.isDisposed = !0, this.isRunning || (Wr(), xg(this), Gr()));
  }, t.getDisposer_ = function(r) {
    var i = this, o = function a() {
      i.dispose(), r == null || r.removeEventListener == null || r.removeEventListener("abort", a);
    };
    return r == null || r.addEventListener == null || r.addEventListener("abort", o), o[ft] = this, o;
  }, t.toString = function() {
    return "Reaction[" + this.name_ + "]";
  }, t.trace = function(r) {
    r === void 0 && (r = !1), nZ(this, r);
  }, pl(e, [{
    key: "isDisposed",
    get: function() {
      return _r(this.flags_, e.isDisposedMask_);
    },
    set: function(r) {
      this.flags_ = br(this.flags_, e.isDisposedMask_, r);
    }
  }, {
    key: "isScheduled",
    get: function() {
      return _r(this.flags_, e.isScheduledMask_);
    },
    set: function(r) {
      this.flags_ = br(this.flags_, e.isScheduledMask_, r);
    }
  }, {
    key: "isTrackPending",
    get: function() {
      return _r(this.flags_, e.isTrackPendingMask_);
    },
    set: function(r) {
      this.flags_ = br(this.flags_, e.isTrackPendingMask_, r);
    }
  }, {
    key: "isRunning",
    get: function() {
      return _r(this.flags_, e.isRunningMask_);
    },
    set: function(r) {
      this.flags_ = br(this.flags_, e.isRunningMask_, r);
    }
  }, {
    key: "diffValue",
    get: function() {
      return _r(this.flags_, e.diffValueMask_) ? 1 : 0;
    },
    set: function(r) {
      this.flags_ = br(this.flags_, e.diffValueMask_, r === 1);
    }
  }]);
}();
Wo.isDisposedMask_ = 1;
Wo.isScheduledMask_ = 2;
Wo.isTrackPendingMask_ = 4;
Wo.isRunningMask_ = 8;
Wo.diffValueMask_ = 16;
var H1 = 100, $q = function(t) {
  return t();
};
function RC() {
  Me.inBatch > 0 || Me.isRunningReactions || $q(kq);
}
function kq() {
  Me.isRunningReactions = !0;
  for (var e = Me.pendingReactions, t = 0; e.length > 0; ) {
    ++t === H1 && (console.error(process.env.NODE_ENV !== "production" ? "Reaction doesn't converge to a stable state after " + H1 + " iterations." + (" Probably there is a cycle in the reactive function: " + e[0]) : "[mobx] cycle in reaction: " + e[0]), e.splice(0));
    for (var n = e.splice(0), r = 0, i = n.length; r < i; r++)
      n[r].runReaction_();
  }
  Me.isRunningReactions = !1;
}
var pf = /* @__PURE__ */ Ya("Reaction", Wo);
function Dn() {
  return process.env.NODE_ENV !== "production" && !!Me.spyListeners.length;
}
function Ba(e) {
  if (process.env.NODE_ENV !== "production" && Me.spyListeners.length)
    for (var t = Me.spyListeners, n = 0, r = t.length; n < r; n++)
      t[n](e);
}
function Sr(e) {
  if (process.env.NODE_ENV !== "production") {
    var t = Vo({}, e, {
      spyReportStart: !0
    });
    Ba(t);
  }
}
var Iq = {
  type: "report-end",
  spyReportEnd: !0
};
function Cr(e) {
  process.env.NODE_ENV !== "production" && Ba(e ? Vo({}, e, {
    type: "report-end",
    spyReportEnd: !0
  }) : Iq);
}
function Bq(e) {
  return process.env.NODE_ENV === "production" ? (console.warn("[mobx.spy] Is a no-op in production builds"), function() {
  }) : (Me.spyListeners.push(e), lm(function() {
    Me.spyListeners = Me.spyListeners.filter(function(t) {
      return t !== e;
    });
  }));
}
var gm = "action", jq = "action.bound", LC = "autoAction", zq = "autoAction.bound", Fq = "<unnamed action>", Eg = /* @__PURE__ */ tc(gm), Hq = /* @__PURE__ */ tc(jq, {
  bound: !0
}), Sg = /* @__PURE__ */ tc(LC, {
  autoAction: !0
}), Vq = /* @__PURE__ */ tc(zq, {
  autoAction: !0,
  bound: !0
});
function $C(e) {
  var t = function(r, i) {
    if (bn(r))
      return Ia(r.name || Fq, r, e);
    if (bn(i))
      return Ia(r, i, e);
    if (ec(i))
      return (e ? Sg : Eg).decorate_20223_(r, i);
    if ($a(i))
      return Qu(r, i, e ? Sg : Eg);
    if ($a(r))
      return Vi(tc(e ? LC : gm, {
        name: r,
        autoAction: e
      }));
    process.env.NODE_ENV !== "production" && je("Invalid arguments for `action`");
  };
  return t;
}
var _a = /* @__PURE__ */ $C(!1);
Object.assign(_a, Eg);
var Lu = /* @__PURE__ */ $C(!0);
Object.assign(Lu, Sg);
_a.bound = /* @__PURE__ */ Vi(Hq);
Lu.bound = /* @__PURE__ */ Vi(Vq);
function Gs(e) {
  return bn(e) && e.isMobxAction === !0;
}
function Wq(e, t) {
  var n, r, i, o;
  t === void 0 && (t = lC), process.env.NODE_ENV !== "production" && (bn(e) || je("Autorun expects a function as first argument"), Gs(e) && je("Autorun does not accept actions since actions are untrackable"));
  var a = (n = (r = t) == null ? void 0 : r.name) != null ? n : process.env.NODE_ENV !== "production" ? e.name || "Autorun@" + Mi() : "Autorun", s = !t.scheduler && !t.delay, l;
  if (s)
    l = new Wo(a, function() {
      this.track(d);
    }, t.onError, t.requiresObservable);
  else {
    var u = Xq(t), c = !1;
    l = new Wo(a, function() {
      c || (c = !0, u(function() {
        c = !1, l.isDisposed || l.track(d);
      }));
    }, t.onError, t.requiresObservable);
  }
  function d() {
    e(l);
  }
  return (i = t) != null && (i = i.signal) != null && i.aborted || l.schedule_(), l.getDisposer_((o = t) == null ? void 0 : o.signal);
}
var Gq = function(t) {
  return t();
};
function Xq(e) {
  return e.scheduler ? e.scheduler : e.delay ? function(t) {
    return setTimeout(t, e.delay);
  } : Gq;
}
var Uq = "onBO", Yq = "onBUO";
function Kq(e, t, n) {
  return IC(Uq, e, t, n);
}
function kC(e, t, n) {
  return IC(Yq, e, t, n);
}
function IC(e, t, n, r) {
  var i = Us(t), o = bn(r) ? r : n, a = e + "L";
  return i[a] ? i[a].add(o) : i[a] = /* @__PURE__ */ new Set([o]), function() {
    var s = i[a];
    s && (s.delete(o), s.size === 0 && delete i[a]);
  };
}
function qq(e, t, n, r) {
  process.env.NODE_ENV !== "production" && (arguments.length > 4 && je("'extendObservable' expected 2-4 arguments"), typeof e != "object" && je("'extendObservable' expects an object as first argument"), na(e) && je("'extendObservable' should not be used on maps, use map.merge instead"), Ui(t) || je("'extendObservable' only accepts plain objects as second argument"), (ku(t) || ku(n)) && je("Extending an object with another observable (object) is not supported"));
  var i = PK(t);
  return vl(function() {
    var o = ic(e, r)[ft];
    cm(i).forEach(function(a) {
      o.extend_(
        a,
        i[a],
        // must pass "undefined" for { key: undefined }
        n && a in n ? n[a] : !0
      );
    });
  }), e;
}
function Zq(e, t) {
  return BC(Us(e, t));
}
function BC(e) {
  var t = {
    name: e.name_
  };
  return e.observing_ && e.observing_.length > 0 && (t.dependencies = Jq(e.observing_).map(BC)), t;
}
function Jq(e) {
  return Array.from(new Set(e));
}
var Qq = 0;
function jC() {
  this.message = "FLOW_CANCELLED";
}
jC.prototype = /* @__PURE__ */ Object.create(Error.prototype);
var Vp = /* @__PURE__ */ yC("flow"), eZ = /* @__PURE__ */ yC("flow.bound", {
  bound: !0
}), Xs = /* @__PURE__ */ Object.assign(function(t, n) {
  if (ec(n))
    return Vp.decorate_20223_(t, n);
  if ($a(n))
    return Qu(t, n, Vp);
  process.env.NODE_ENV !== "production" && arguments.length !== 1 && je("Flow expects single argument with generator function");
  var r = t, i = r.name || "<unnamed flow>", o = function() {
    var s = this, l = arguments, u = ++Qq, c = _a(i + " - runid: " + u + " - init", r).apply(s, l), d, f = void 0, h = new Promise(function(p, v) {
      var g = 0;
      d = v;
      function y(w) {
        f = void 0;
        var S;
        try {
          S = _a(i + " - runid: " + u + " - yield " + g++, c.next).call(c, w);
        } catch (_) {
          return v(_);
        }
        E(S);
      }
      function m(w) {
        f = void 0;
        var S;
        try {
          S = _a(i + " - runid: " + u + " - yield " + g++, c.throw).call(c, w);
        } catch (_) {
          return v(_);
        }
        E(S);
      }
      function E(w) {
        if (bn(w == null ? void 0 : w.then)) {
          w.then(E, v);
          return;
        }
        return w.done ? p(w.value) : (f = Promise.resolve(w.value), f.then(y, m));
      }
      y(void 0);
    });
    return h.cancel = _a(i + " - runid: " + u + " - cancel", function() {
      try {
        f && V1(f);
        var p = c.return(void 0), v = Promise.resolve(p.value);
        v.then(gs, gs), V1(v), d(new jC());
      } catch (g) {
        d(g);
      }
    }), h;
  };
  return o.isMobXFlow = !0, o;
}, Vp);
Xs.bound = /* @__PURE__ */ Vi(eZ);
function V1(e) {
  bn(e.cancel) && e.cancel();
}
function $u(e) {
  return (e == null ? void 0 : e.isMobXFlow) === !0;
}
function tZ(e, t) {
  return e ? oc(e) || !!e[ft] || dm(e) || pf(e) || _h(e) : !1;
}
function ku(e) {
  return process.env.NODE_ENV !== "production" && arguments.length !== 1 && je("isObservable expects only 1 argument. Use isObservableProp to inspect the observability of a property"), tZ(e);
}
function nZ() {
  if (process.env.NODE_ENV !== "production") {
    for (var e = !1, t = arguments.length, n = new Array(t), r = 0; r < t; r++)
      n[r] = arguments[r];
    typeof n[n.length - 1] == "boolean" && (e = n.pop());
    var i = rZ(n);
    if (!i)
      return je("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");
    i.isTracing_ === Kr.NONE && console.log("[mobx.trace] '" + i.name_ + "' tracing enabled"), i.isTracing_ = e ? Kr.BREAK : Kr.LOG;
  }
}
function rZ(e) {
  switch (e.length) {
    case 0:
      return Me.trackingDerivation;
    case 1:
      return Us(e[0]);
    case 2:
      return Us(e[0], e[1]);
  }
}
function lo(e, t) {
  t === void 0 && (t = void 0), Wr();
  try {
    return e.apply(t);
  } finally {
    Gr();
  }
}
function ua(e) {
  return e[ft];
}
var iZ = {
  has: function(t, n) {
    return process.env.NODE_ENV !== "production" && Me.trackingDerivation && $l("detect new properties using the 'in' operator. Use 'has' from 'mobx' instead."), ua(t).has_(n);
  },
  get: function(t, n) {
    return ua(t).get_(n);
  },
  set: function(t, n, r) {
    var i;
    return $a(n) ? (process.env.NODE_ENV !== "production" && !ua(t).values_.has(n) && $l("add a new observable property through direct assignment. Use 'set' from 'mobx' instead."), (i = ua(t).set_(n, r, !0)) != null ? i : !0) : !1;
  },
  deleteProperty: function(t, n) {
    var r;
    return process.env.NODE_ENV !== "production" && $l("delete properties from an observable object. Use 'remove' from 'mobx' instead."), $a(n) ? (r = ua(t).delete_(n, !0)) != null ? r : !0 : !1;
  },
  defineProperty: function(t, n, r) {
    var i;
    return process.env.NODE_ENV !== "production" && $l("define property on an observable object. Use 'defineProperty' from 'mobx' instead."), (i = ua(t).defineProperty_(n, r)) != null ? i : !0;
  },
  ownKeys: function(t) {
    return process.env.NODE_ENV !== "production" && Me.trackingDerivation && $l("iterate keys to detect added / removed properties. Use 'keys' from 'mobx' instead."), ua(t).ownKeys_();
  },
  preventExtensions: function(t) {
    je(13);
  }
};
function oZ(e, t) {
  var n, r;
  return uC(), e = ic(e, t), (r = (n = e[ft]).proxy_) != null ? r : n.proxy_ = new Proxy(e, iZ);
}
function Br(e) {
  return e.interceptors_ !== void 0 && e.interceptors_.length > 0;
}
function nc(e, t) {
  var n = e.interceptors_ || (e.interceptors_ = []);
  return n.push(t), lm(function() {
    var r = n.indexOf(t);
    r !== -1 && n.splice(r, 1);
  });
}
function jr(e, t) {
  var n = Ka();
  try {
    for (var r = [].concat(e.interceptors_ || []), i = 0, o = r.length; i < o && (t = r[i](t), t && !t.type && je(14), !!t); i++)
      ;
    return t;
  } finally {
    co(n);
  }
}
function xi(e) {
  return e.changeListeners_ !== void 0 && e.changeListeners_.length > 0;
}
function rc(e, t) {
  var n = e.changeListeners_ || (e.changeListeners_ = []);
  return n.push(t), lm(function() {
    var r = n.indexOf(t);
    r !== -1 && n.splice(r, 1);
  });
}
function Ei(e, t) {
  var n = Ka(), r = e.changeListeners_;
  if (r) {
    r = r.slice();
    for (var i = 0, o = r.length; i < o; i++)
      r[i](t);
    co(n);
  }
}
var W1 = "splice", pi = "update", aZ = 1e4, sZ = {
  get: function(t, n) {
    var r = t[ft];
    return n === ft ? r : n === "length" ? r.getArrayLength_() : typeof n == "string" && !isNaN(n) ? r.get_(parseInt(n)) : wi(vf, n) ? vf[n] : t[n];
  },
  set: function(t, n, r) {
    var i = t[ft];
    return n === "length" && i.setArrayLength_(r), typeof n == "symbol" || isNaN(n) ? t[n] = r : i.set_(parseInt(n), r), !0;
  },
  preventExtensions: function() {
    je(15);
  }
}, ym = /* @__PURE__ */ function() {
  function e(n, r, i, o) {
    n === void 0 && (n = process.env.NODE_ENV !== "production" ? "ObservableArray@" + Mi() : "ObservableArray"), this.owned_ = void 0, this.legacyMode_ = void 0, this.atom_ = void 0, this.values_ = [], this.interceptors_ = void 0, this.changeListeners_ = void 0, this.enhancer_ = void 0, this.dehancer = void 0, this.proxy_ = void 0, this.lastKnownLength_ = 0, this.owned_ = i, this.legacyMode_ = o, this.atom_ = new ta(n), this.enhancer_ = function(a, s) {
      return r(a, s, process.env.NODE_ENV !== "production" ? n + "[..]" : "ObservableArray[..]");
    };
  }
  var t = e.prototype;
  return t.dehanceValue_ = function(r) {
    return this.dehancer !== void 0 ? this.dehancer(r) : r;
  }, t.dehanceValues_ = function(r) {
    return this.dehancer !== void 0 && r.length > 0 ? r.map(this.dehancer) : r;
  }, t.intercept_ = function(r) {
    return nc(this, r);
  }, t.observe_ = function(r, i) {
    return i === void 0 && (i = !1), i && r({
      observableKind: "array",
      object: this.proxy_,
      debugObjectName: this.atom_.name_,
      type: "splice",
      index: 0,
      added: this.values_.slice(),
      addedCount: this.values_.length,
      removed: [],
      removedCount: 0
    }), rc(this, r);
  }, t.getArrayLength_ = function() {
    return this.atom_.reportObserved(), this.values_.length;
  }, t.setArrayLength_ = function(r) {
    (typeof r != "number" || isNaN(r) || r < 0) && je("Out of range: " + r);
    var i = this.values_.length;
    if (r !== i)
      if (r > i) {
        for (var o = new Array(r - i), a = 0; a < r - i; a++)
          o[a] = void 0;
        this.spliceWithArray_(i, 0, o);
      } else
        this.spliceWithArray_(r, i - r);
  }, t.updateArrayLength_ = function(r, i) {
    r !== this.lastKnownLength_ && je(16), this.lastKnownLength_ += i, this.legacyMode_ && i > 0 && GC(r + i + 1);
  }, t.spliceWithArray_ = function(r, i, o) {
    var a = this;
    Bi(this.atom_);
    var s = this.values_.length;
    if (r === void 0 ? r = 0 : r > s ? r = s : r < 0 && (r = Math.max(0, s + r)), arguments.length === 1 ? i = s - r : i == null ? i = 0 : i = Math.max(0, Math.min(i, s - r)), o === void 0 && (o = uf), Br(this)) {
      var l = jr(this, {
        object: this.proxy_,
        type: W1,
        index: r,
        removedCount: i,
        added: o
      });
      if (!l)
        return uf;
      i = l.removedCount, o = l.added;
    }
    if (o = o.length === 0 ? o : o.map(function(d) {
      return a.enhancer_(d, void 0);
    }), this.legacyMode_ || process.env.NODE_ENV !== "production") {
      var u = o.length - i;
      this.updateArrayLength_(s, u);
    }
    var c = this.spliceItemsIntoValues_(r, i, o);
    return (i !== 0 || o.length !== 0) && this.notifyArraySplice_(r, o, c), this.dehanceValues_(c);
  }, t.spliceItemsIntoValues_ = function(r, i, o) {
    if (o.length < aZ) {
      var a;
      return (a = this.values_).splice.apply(a, [r, i].concat(o));
    } else {
      var s = this.values_.slice(r, r + i), l = this.values_.slice(r + i);
      this.values_.length += o.length - i;
      for (var u = 0; u < o.length; u++)
        this.values_[r + u] = o[u];
      for (var c = 0; c < l.length; c++)
        this.values_[r + o.length + c] = l[c];
      return s;
    }
  }, t.notifyArrayChildUpdate_ = function(r, i, o) {
    var a = !this.owned_ && Dn(), s = xi(this), l = s || a ? {
      observableKind: "array",
      object: this.proxy_,
      type: pi,
      debugObjectName: this.atom_.name_,
      index: r,
      newValue: i,
      oldValue: o
    } : null;
    process.env.NODE_ENV !== "production" && a && Sr(l), this.atom_.reportChanged(), s && Ei(this, l), process.env.NODE_ENV !== "production" && a && Cr();
  }, t.notifyArraySplice_ = function(r, i, o) {
    var a = !this.owned_ && Dn(), s = xi(this), l = s || a ? {
      observableKind: "array",
      object: this.proxy_,
      debugObjectName: this.atom_.name_,
      type: W1,
      index: r,
      removed: o,
      added: i,
      removedCount: o.length,
      addedCount: i.length
    } : null;
    process.env.NODE_ENV !== "production" && a && Sr(l), this.atom_.reportChanged(), s && Ei(this, l), process.env.NODE_ENV !== "production" && a && Cr();
  }, t.get_ = function(r) {
    if (this.legacyMode_ && r >= this.values_.length) {
      console.warn(process.env.NODE_ENV !== "production" ? "[mobx.array] Attempt to read an array index (" + r + ") that is out of bounds (" + this.values_.length + "). Please check length first. Out of bound indices will not be tracked by MobX" : "[mobx] Out of bounds read: " + r);
      return;
    }
    return this.atom_.reportObserved(), this.dehanceValue_(this.values_[r]);
  }, t.set_ = function(r, i) {
    var o = this.values_;
    if (this.legacyMode_ && r > o.length && je(17, r, o.length), r < o.length) {
      Bi(this.atom_);
      var a = o[r];
      if (Br(this)) {
        var s = jr(this, {
          type: pi,
          object: this.proxy_,
          // since "this" is the real array we need to pass its proxy
          index: r,
          newValue: i
        });
        if (!s)
          return;
        i = s.newValue;
      }
      i = this.enhancer_(i, a);
      var l = i !== a;
      l && (o[r] = i, this.notifyArrayChildUpdate_(r, i, a));
    } else {
      for (var u = new Array(r + 1 - o.length), c = 0; c < u.length - 1; c++)
        u[c] = void 0;
      u[u.length - 1] = i, this.spliceWithArray_(o.length, 0, u);
    }
  }, e;
}();
function lZ(e, t, n, r) {
  return n === void 0 && (n = process.env.NODE_ENV !== "production" ? "ObservableArray@" + Mi() : "ObservableArray"), r === void 0 && (r = !1), uC(), vl(function() {
    var i = new ym(n, t, r, !1);
    dC(i.values_, ft, i);
    var o = new Proxy(i.values_, sZ);
    return i.proxy_ = o, e && e.length && i.spliceWithArray_(0, 0, e), o;
  });
}
var vf = {
  clear: function() {
    return this.splice(0);
  },
  replace: function(t) {
    var n = this[ft];
    return n.spliceWithArray_(0, n.values_.length, t);
  },
  // Used by JSON.stringify
  toJSON: function() {
    return this.slice();
  },
  /*
   * functions that do alter the internal structure of the array, (based on lib.es6.d.ts)
   * since these functions alter the inner structure of the array, the have side effects.
   * Because the have side effects, they should not be used in computed function,
   * and for that reason the do not call dependencyState.notifyObserved
   */
  splice: function(t, n) {
    for (var r = arguments.length, i = new Array(r > 2 ? r - 2 : 0), o = 2; o < r; o++)
      i[o - 2] = arguments[o];
    var a = this[ft];
    switch (arguments.length) {
      case 0:
        return [];
      case 1:
        return a.spliceWithArray_(t);
      case 2:
        return a.spliceWithArray_(t, n);
    }
    return a.spliceWithArray_(t, n, i);
  },
  spliceWithArray: function(t, n, r) {
    return this[ft].spliceWithArray_(t, n, r);
  },
  push: function() {
    for (var t = this[ft], n = arguments.length, r = new Array(n), i = 0; i < n; i++)
      r[i] = arguments[i];
    return t.spliceWithArray_(t.values_.length, 0, r), t.values_.length;
  },
  pop: function() {
    return this.splice(Math.max(this[ft].values_.length - 1, 0), 1)[0];
  },
  shift: function() {
    return this.splice(0, 1)[0];
  },
  unshift: function() {
    for (var t = this[ft], n = arguments.length, r = new Array(n), i = 0; i < n; i++)
      r[i] = arguments[i];
    return t.spliceWithArray_(0, 0, r), t.values_.length;
  },
  reverse: function() {
    return Me.trackingDerivation && je(37, "reverse"), this.replace(this.slice().reverse()), this;
  },
  sort: function() {
    Me.trackingDerivation && je(37, "sort");
    var t = this.slice();
    return t.sort.apply(t, arguments), this.replace(t), this;
  },
  remove: function(t) {
    var n = this[ft], r = n.dehanceValues_(n.values_).indexOf(t);
    return r > -1 ? (this.splice(r, 1), !0) : !1;
  }
};
tn("at", Pr);
tn("concat", Pr);
tn("flat", Pr);
tn("includes", Pr);
tn("indexOf", Pr);
tn("join", Pr);
tn("lastIndexOf", Pr);
tn("slice", Pr);
tn("toString", Pr);
tn("toLocaleString", Pr);
tn("toSorted", Pr);
tn("toSpliced", Pr);
tn("with", Pr);
tn("every", Ti);
tn("filter", Ti);
tn("find", Ti);
tn("findIndex", Ti);
tn("findLast", Ti);
tn("findLastIndex", Ti);
tn("flatMap", Ti);
tn("forEach", Ti);
tn("map", Ti);
tn("some", Ti);
tn("toReversed", Ti);
tn("reduce", zC);
tn("reduceRight", zC);
function tn(e, t) {
  typeof Array.prototype[e] == "function" && (vf[e] = t(e));
}
function Pr(e) {
  return function() {
    var t = this[ft];
    t.atom_.reportObserved();
    var n = t.dehanceValues_(t.values_);
    return n[e].apply(n, arguments);
  };
}
function Ti(e) {
  return function(t, n) {
    var r = this, i = this[ft];
    i.atom_.reportObserved();
    var o = i.dehanceValues_(i.values_);
    return o[e](function(a, s) {
      return t.call(n, a, s, r);
    });
  };
}
function zC(e) {
  return function() {
    var t = this, n = this[ft];
    n.atom_.reportObserved();
    var r = n.dehanceValues_(n.values_), i = arguments[0];
    return arguments[0] = function(o, a, s) {
      return i(o, a, s, t);
    }, r[e].apply(r, arguments);
  };
}
var uZ = /* @__PURE__ */ Ya("ObservableArrayAdministration", ym);
function bh(e) {
  return ph(e) && uZ(e[ft]);
}
var cZ = {}, Ro = "add", gf = "delete", FC = /* @__PURE__ */ function() {
  function e(n, r, i) {
    var o = this;
    r === void 0 && (r = ka), i === void 0 && (i = process.env.NODE_ENV !== "production" ? "ObservableMap@" + Mi() : "ObservableMap"), this.enhancer_ = void 0, this.name_ = void 0, this[ft] = cZ, this.data_ = void 0, this.hasMap_ = void 0, this.keysAtom_ = void 0, this.interceptors_ = void 0, this.changeListeners_ = void 0, this.dehancer = void 0, this.enhancer_ = r, this.name_ = i, bn(Map) || je(18), vl(function() {
      o.keysAtom_ = vC(process.env.NODE_ENV !== "production" ? o.name_ + ".keys()" : "ObservableMap.keys()"), o.data_ = /* @__PURE__ */ new Map(), o.hasMap_ = /* @__PURE__ */ new Map(), n && o.merge(n);
    });
  }
  var t = e.prototype;
  return t.has_ = function(r) {
    return this.data_.has(r);
  }, t.has = function(r) {
    var i = this;
    if (!Me.trackingDerivation)
      return this.has_(r);
    var o = this.hasMap_.get(r);
    if (!o) {
      var a = o = new Sa(this.has_(r), gh, process.env.NODE_ENV !== "production" ? this.name_ + "." + yg(r) + "?" : "ObservableMap.key?", !1);
      this.hasMap_.set(r, a), kC(a, function() {
        return i.hasMap_.delete(r);
      });
    }
    return o.get();
  }, t.set = function(r, i) {
    var o = this.has_(r);
    if (Br(this)) {
      var a = jr(this, {
        type: o ? pi : Ro,
        object: this,
        newValue: i,
        name: r
      });
      if (!a)
        return this;
      i = a.newValue;
    }
    return o ? this.updateValue_(r, i) : this.addValue_(r, i), this;
  }, t.delete = function(r) {
    var i = this;
    if (Bi(this.keysAtom_), Br(this)) {
      var o = jr(this, {
        type: gf,
        object: this,
        name: r
      });
      if (!o)
        return !1;
    }
    if (this.has_(r)) {
      var a = Dn(), s = xi(this), l = s || a ? {
        observableKind: "map",
        debugObjectName: this.name_,
        type: gf,
        object: this,
        oldValue: this.data_.get(r).value_,
        name: r
      } : null;
      return process.env.NODE_ENV !== "production" && a && Sr(l), lo(function() {
        var u;
        i.keysAtom_.reportChanged(), (u = i.hasMap_.get(r)) == null || u.setNewValue_(!1);
        var c = i.data_.get(r);
        c.setNewValue_(void 0), i.data_.delete(r);
      }), s && Ei(this, l), process.env.NODE_ENV !== "production" && a && Cr(), !0;
    }
    return !1;
  }, t.updateValue_ = function(r, i) {
    var o = this.data_.get(r);
    if (i = o.prepareNewValue_(i), i !== Me.UNCHANGED) {
      var a = Dn(), s = xi(this), l = s || a ? {
        observableKind: "map",
        debugObjectName: this.name_,
        type: pi,
        object: this,
        oldValue: o.value_,
        name: r,
        newValue: i
      } : null;
      process.env.NODE_ENV !== "production" && a && Sr(l), o.setNewValue_(i), s && Ei(this, l), process.env.NODE_ENV !== "production" && a && Cr();
    }
  }, t.addValue_ = function(r, i) {
    var o = this;
    Bi(this.keysAtom_), lo(function() {
      var u, c = new Sa(i, o.enhancer_, process.env.NODE_ENV !== "production" ? o.name_ + "." + yg(r) : "ObservableMap.key", !1);
      o.data_.set(r, c), i = c.value_, (u = o.hasMap_.get(r)) == null || u.setNewValue_(!0), o.keysAtom_.reportChanged();
    });
    var a = Dn(), s = xi(this), l = s || a ? {
      observableKind: "map",
      debugObjectName: this.name_,
      type: Ro,
      object: this,
      name: r,
      newValue: i
    } : null;
    process.env.NODE_ENV !== "production" && a && Sr(l), s && Ei(this, l), process.env.NODE_ENV !== "production" && a && Cr();
  }, t.get = function(r) {
    return this.has(r) ? this.dehanceValue_(this.data_.get(r).get()) : this.dehanceValue_(void 0);
  }, t.dehanceValue_ = function(r) {
    return this.dehancer !== void 0 ? this.dehancer(r) : r;
  }, t.keys = function() {
    return this.keysAtom_.reportObserved(), this.data_.keys();
  }, t.values = function() {
    var r = this, i = this.keys();
    return G1({
      next: function() {
        var a = i.next(), s = a.done, l = a.value;
        return {
          done: s,
          value: s ? void 0 : r.get(l)
        };
      }
    });
  }, t.entries = function() {
    var r = this, i = this.keys();
    return G1({
      next: function() {
        var a = i.next(), s = a.done, l = a.value;
        return {
          done: s,
          value: s ? void 0 : [l, r.get(l)]
        };
      }
    });
  }, t[Symbol.iterator] = function() {
    return this.entries();
  }, t.forEach = function(r, i) {
    for (var o = ys(this), a; !(a = o()).done; ) {
      var s = a.value, l = s[0], u = s[1];
      r.call(i, u, l, this);
    }
  }, t.merge = function(r) {
    var i = this;
    return na(r) && (r = new Map(r)), lo(function() {
      Ui(r) ? TK(r).forEach(function(o) {
        return i.set(o, r[o]);
      }) : Array.isArray(r) ? r.forEach(function(o) {
        var a = o[0], s = o[1];
        return i.set(a, s);
      }) : hl(r) ? (MK(r) || je(19, r), r.forEach(function(o, a) {
        return i.set(a, o);
      })) : r != null && je(20, r);
    }), this;
  }, t.clear = function() {
    var r = this;
    lo(function() {
      CC(function() {
        for (var i = ys(r.keys()), o; !(o = i()).done; ) {
          var a = o.value;
          r.delete(a);
        }
      });
    });
  }, t.replace = function(r) {
    var i = this;
    return lo(function() {
      for (var o = dZ(r), a = /* @__PURE__ */ new Map(), s = !1, l = ys(i.data_.keys()), u; !(u = l()).done; ) {
        var c = u.value;
        if (!o.has(c)) {
          var d = i.delete(c);
          if (d)
            s = !0;
          else {
            var f = i.data_.get(c);
            a.set(c, f);
          }
        }
      }
      for (var h = ys(o.entries()), p; !(p = h()).done; ) {
        var v = p.value, g = v[0], y = v[1], m = i.data_.has(g);
        if (i.set(g, y), i.data_.has(g)) {
          var E = i.data_.get(g);
          a.set(g, E), m || (s = !0);
        }
      }
      if (!s)
        if (i.data_.size !== a.size)
          i.keysAtom_.reportChanged();
        else
          for (var w = i.data_.keys(), S = a.keys(), _ = w.next(), b = S.next(); !_.done; ) {
            if (_.value !== b.value) {
              i.keysAtom_.reportChanged();
              break;
            }
            _ = w.next(), b = S.next();
          }
      i.data_ = a;
    }), this;
  }, t.toString = function() {
    return "[object ObservableMap]";
  }, t.toJSON = function() {
    return Array.from(this);
  }, t.observe_ = function(r, i) {
    return process.env.NODE_ENV !== "production" && i === !0 && je("`observe` doesn't support fireImmediately=true in combination with maps."), rc(this, r);
  }, t.intercept_ = function(r) {
    return nc(this, r);
  }, pl(e, [{
    key: "size",
    get: function() {
      return this.keysAtom_.reportObserved(), this.data_.size;
    }
  }, {
    key: Symbol.toStringTag,
    get: function() {
      return "Map";
    }
  }]);
}(), na = /* @__PURE__ */ Ya("ObservableMap", FC);
function G1(e) {
  return e[Symbol.toStringTag] = "MapIterator", bm(e);
}
function dZ(e) {
  if (hl(e) || na(e))
    return e;
  if (Array.isArray(e))
    return new Map(e);
  if (Ui(e)) {
    var t = /* @__PURE__ */ new Map();
    for (var n in e)
      t.set(n, e[n]);
    return t;
  } else
    return je(21, e);
}
var fZ = {}, HC = /* @__PURE__ */ function() {
  function e(n, r, i) {
    var o = this;
    r === void 0 && (r = ka), i === void 0 && (i = process.env.NODE_ENV !== "production" ? "ObservableSet@" + Mi() : "ObservableSet"), this.name_ = void 0, this[ft] = fZ, this.data_ = /* @__PURE__ */ new Set(), this.atom_ = void 0, this.changeListeners_ = void 0, this.interceptors_ = void 0, this.dehancer = void 0, this.enhancer_ = void 0, this.name_ = i, bn(Set) || je(22), this.enhancer_ = function(a, s) {
      return r(a, s, i);
    }, vl(function() {
      o.atom_ = vC(o.name_), n && o.replace(n);
    });
  }
  var t = e.prototype;
  return t.dehanceValue_ = function(r) {
    return this.dehancer !== void 0 ? this.dehancer(r) : r;
  }, t.clear = function() {
    var r = this;
    lo(function() {
      CC(function() {
        for (var i = ys(r.data_.values()), o; !(o = i()).done; ) {
          var a = o.value;
          r.delete(a);
        }
      });
    });
  }, t.forEach = function(r, i) {
    for (var o = ys(this), a; !(a = o()).done; ) {
      var s = a.value;
      r.call(i, s, s, this);
    }
  }, t.add = function(r) {
    var i = this;
    if (Bi(this.atom_), Br(this)) {
      var o = jr(this, {
        type: Ro,
        object: this,
        newValue: r
      });
      if (!o)
        return this;
    }
    if (!this.has(r)) {
      lo(function() {
        i.data_.add(i.enhancer_(r, void 0)), i.atom_.reportChanged();
      });
      var a = process.env.NODE_ENV !== "production" && Dn(), s = xi(this), l = s || a ? {
        observableKind: "set",
        debugObjectName: this.name_,
        type: Ro,
        object: this,
        newValue: r
      } : null;
      a && process.env.NODE_ENV !== "production" && Sr(l), s && Ei(this, l), a && process.env.NODE_ENV !== "production" && Cr();
    }
    return this;
  }, t.delete = function(r) {
    var i = this;
    if (Br(this)) {
      var o = jr(this, {
        type: gf,
        object: this,
        oldValue: r
      });
      if (!o)
        return !1;
    }
    if (this.has(r)) {
      var a = process.env.NODE_ENV !== "production" && Dn(), s = xi(this), l = s || a ? {
        observableKind: "set",
        debugObjectName: this.name_,
        type: gf,
        object: this,
        oldValue: r
      } : null;
      return a && process.env.NODE_ENV !== "production" && Sr(l), lo(function() {
        i.atom_.reportChanged(), i.data_.delete(r);
      }), s && Ei(this, l), a && process.env.NODE_ENV !== "production" && Cr(), !0;
    }
    return !1;
  }, t.has = function(r) {
    return this.atom_.reportObserved(), this.data_.has(this.dehanceValue_(r));
  }, t.entries = function() {
    var r = 0, i = Array.from(this.keys()), o = Array.from(this.values());
    return X1({
      next: function() {
        var s = r;
        return r += 1, s < o.length ? {
          value: [i[s], o[s]],
          done: !1
        } : {
          value: void 0,
          done: !0
        };
      }
    });
  }, t.keys = function() {
    return this.values();
  }, t.values = function() {
    this.atom_.reportObserved();
    var r = this, i = 0, o = Array.from(this.data_.values());
    return X1({
      next: function() {
        return i < o.length ? {
          value: r.dehanceValue_(o[i++]),
          done: !1
        } : {
          value: void 0,
          done: !0
        };
      }
    });
  }, t.intersection = function(r) {
    if (ao(r) && !Ii(r))
      return r.intersection(this);
    var i = new Set(this);
    return i.intersection(r);
  }, t.union = function(r) {
    if (ao(r) && !Ii(r))
      return r.union(this);
    var i = new Set(this);
    return i.union(r);
  }, t.difference = function(r) {
    return new Set(this).difference(r);
  }, t.symmetricDifference = function(r) {
    if (ao(r) && !Ii(r))
      return r.symmetricDifference(this);
    var i = new Set(this);
    return i.symmetricDifference(r);
  }, t.isSubsetOf = function(r) {
    return new Set(this).isSubsetOf(r);
  }, t.isSupersetOf = function(r) {
    return new Set(this).isSupersetOf(r);
  }, t.isDisjointFrom = function(r) {
    if (ao(r) && !Ii(r))
      return r.isDisjointFrom(this);
    var i = new Set(this);
    return i.isDisjointFrom(r);
  }, t.replace = function(r) {
    var i = this;
    return Ii(r) && (r = new Set(r)), lo(function() {
      Array.isArray(r) ? (i.clear(), r.forEach(function(o) {
        return i.add(o);
      })) : ao(r) ? (i.clear(), r.forEach(function(o) {
        return i.add(o);
      })) : r != null && je("Cannot initialize set from " + r);
    }), this;
  }, t.observe_ = function(r, i) {
    return process.env.NODE_ENV !== "production" && i === !0 && je("`observe` doesn't support fireImmediately=true in combination with sets."), rc(this, r);
  }, t.intercept_ = function(r) {
    return nc(this, r);
  }, t.toJSON = function() {
    return Array.from(this);
  }, t.toString = function() {
    return "[object ObservableSet]";
  }, t[Symbol.iterator] = function() {
    return this.values();
  }, pl(e, [{
    key: "size",
    get: function() {
      return this.atom_.reportObserved(), this.data_.size;
    }
  }, {
    key: Symbol.toStringTag,
    get: function() {
      return "Set";
    }
  }]);
}(), Ii = /* @__PURE__ */ Ya("ObservableSet", HC);
function X1(e) {
  return e[Symbol.toStringTag] = "SetIterator", bm(e);
}
var U1 = /* @__PURE__ */ Object.create(null), Y1 = "remove", Cg = /* @__PURE__ */ function() {
  function e(n, r, i, o) {
    r === void 0 && (r = /* @__PURE__ */ new Map()), o === void 0 && (o = sq), this.target_ = void 0, this.values_ = void 0, this.name_ = void 0, this.defaultAnnotation_ = void 0, this.keysAtom_ = void 0, this.changeListeners_ = void 0, this.interceptors_ = void 0, this.proxy_ = void 0, this.isPlainObject_ = void 0, this.appliedAnnotations_ = void 0, this.pendingKeys_ = void 0, this.target_ = n, this.values_ = r, this.name_ = i, this.defaultAnnotation_ = o, this.keysAtom_ = new ta(process.env.NODE_ENV !== "production" ? this.name_ + ".keys" : "ObservableObject.keys"), this.isPlainObject_ = Ui(this.target_), process.env.NODE_ENV !== "production" && !UC(this.defaultAnnotation_) && je("defaultAnnotation must be valid annotation"), process.env.NODE_ENV !== "production" && (this.appliedAnnotations_ = {});
  }
  var t = e.prototype;
  return t.getObservablePropValue_ = function(r) {
    return this.values_.get(r).get();
  }, t.setObservablePropValue_ = function(r, i) {
    var o = this.values_.get(r);
    if (o instanceof ei)
      return o.set(i), !0;
    if (Br(this)) {
      var a = jr(this, {
        type: pi,
        object: this.proxy_ || this.target_,
        name: r,
        newValue: i
      });
      if (!a)
        return null;
      i = a.newValue;
    }
    if (i = o.prepareNewValue_(i), i !== Me.UNCHANGED) {
      var s = xi(this), l = process.env.NODE_ENV !== "production" && Dn(), u = s || l ? {
        type: pi,
        observableKind: "object",
        debugObjectName: this.name_,
        object: this.proxy_ || this.target_,
        oldValue: o.value_,
        name: r,
        newValue: i
      } : null;
      process.env.NODE_ENV !== "production" && l && Sr(u), o.setNewValue_(i), s && Ei(this, u), process.env.NODE_ENV !== "production" && l && Cr();
    }
    return !0;
  }, t.get_ = function(r) {
    return Me.trackingDerivation && !wi(this.target_, r) && this.has_(r), this.target_[r];
  }, t.set_ = function(r, i, o) {
    return o === void 0 && (o = !1), wi(this.target_, r) ? this.values_.has(r) ? this.setObservablePropValue_(r, i) : o ? Reflect.set(this.target_, r, i) : (this.target_[r] = i, !0) : this.extend_(r, {
      value: i,
      enumerable: !0,
      writable: !0,
      configurable: !0
    }, this.defaultAnnotation_, o);
  }, t.has_ = function(r) {
    if (!Me.trackingDerivation)
      return r in this.target_;
    this.pendingKeys_ || (this.pendingKeys_ = /* @__PURE__ */ new Map());
    var i = this.pendingKeys_.get(r);
    return i || (i = new Sa(r in this.target_, gh, process.env.NODE_ENV !== "production" ? this.name_ + "." + yg(r) + "?" : "ObservableObject.key?", !1), this.pendingKeys_.set(r, i)), i.get();
  }, t.make_ = function(r, i) {
    if (i === !0 && (i = this.defaultAnnotation_), i !== !1) {
      if (Z1(this, i, r), !(r in this.target_)) {
        var o;
        if ((o = this.target_[so]) != null && o[r])
          return;
        je(1, i.annotationType_, this.name_ + "." + r.toString());
      }
      for (var a = this.target_; a && a !== hh; ) {
        var s = lf(a, r);
        if (s) {
          var l = i.make_(this, r, s, a);
          if (l === 0)
            return;
          if (l === 1)
            break;
        }
        a = Object.getPrototypeOf(a);
      }
      q1(this, i, r);
    }
  }, t.extend_ = function(r, i, o, a) {
    if (a === void 0 && (a = !1), o === !0 && (o = this.defaultAnnotation_), o === !1)
      return this.defineProperty_(r, i, a);
    Z1(this, o, r);
    var s = o.extend_(this, r, i, a);
    return s && q1(this, o, r), s;
  }, t.defineProperty_ = function(r, i, o) {
    o === void 0 && (o = !1), Bi(this.keysAtom_);
    try {
      Wr();
      var a = this.delete_(r);
      if (!a)
        return a;
      if (Br(this)) {
        var s = jr(this, {
          object: this.proxy_ || this.target_,
          name: r,
          type: Ro,
          newValue: i.value
        });
        if (!s)
          return null;
        var l = s.newValue;
        i.value !== l && (i = Vo({}, i, {
          value: l
        }));
      }
      if (o) {
        if (!Reflect.defineProperty(this.target_, r, i))
          return !1;
      } else
        Hi(this.target_, r, i);
      this.notifyPropertyAddition_(r, i.value);
    } finally {
      Gr();
    }
    return !0;
  }, t.defineObservableProperty_ = function(r, i, o, a) {
    a === void 0 && (a = !1), Bi(this.keysAtom_);
    try {
      Wr();
      var s = this.delete_(r);
      if (!s)
        return s;
      if (Br(this)) {
        var l = jr(this, {
          object: this.proxy_ || this.target_,
          name: r,
          type: Ro,
          newValue: i
        });
        if (!l)
          return null;
        i = l.newValue;
      }
      var u = K1(r), c = {
        configurable: Me.safeDescriptors ? this.isPlainObject_ : !0,
        enumerable: !0,
        get: u.get,
        set: u.set
      };
      if (a) {
        if (!Reflect.defineProperty(this.target_, r, c))
          return !1;
      } else
        Hi(this.target_, r, c);
      var d = new Sa(i, o, process.env.NODE_ENV !== "production" ? this.name_ + "." + r.toString() : "ObservableObject.key", !1);
      this.values_.set(r, d), this.notifyPropertyAddition_(r, d.value_);
    } finally {
      Gr();
    }
    return !0;
  }, t.defineComputedProperty_ = function(r, i, o) {
    o === void 0 && (o = !1), Bi(this.keysAtom_);
    try {
      Wr();
      var a = this.delete_(r);
      if (!a)
        return a;
      if (Br(this)) {
        var s = jr(this, {
          object: this.proxy_ || this.target_,
          name: r,
          type: Ro,
          newValue: void 0
        });
        if (!s)
          return null;
      }
      i.name || (i.name = process.env.NODE_ENV !== "production" ? this.name_ + "." + r.toString() : "ObservableObject.key"), i.context = this.proxy_ || this.target_;
      var l = K1(r), u = {
        configurable: Me.safeDescriptors ? this.isPlainObject_ : !0,
        enumerable: !1,
        get: l.get,
        set: l.set
      };
      if (o) {
        if (!Reflect.defineProperty(this.target_, r, u))
          return !1;
      } else
        Hi(this.target_, r, u);
      this.values_.set(r, new ei(i)), this.notifyPropertyAddition_(r, void 0);
    } finally {
      Gr();
    }
    return !0;
  }, t.delete_ = function(r, i) {
    if (i === void 0 && (i = !1), Bi(this.keysAtom_), !wi(this.target_, r))
      return !0;
    if (Br(this)) {
      var o = jr(this, {
        object: this.proxy_ || this.target_,
        name: r,
        type: Y1
      });
      if (!o)
        return null;
    }
    try {
      var a;
      Wr();
      var s = xi(this), l = process.env.NODE_ENV !== "production" && Dn(), u = this.values_.get(r), c = void 0;
      if (!u && (s || l)) {
        var d;
        c = (d = lf(this.target_, r)) == null ? void 0 : d.value;
      }
      if (i) {
        if (!Reflect.deleteProperty(this.target_, r))
          return !1;
      } else
        delete this.target_[r];
      if (process.env.NODE_ENV !== "production" && delete this.appliedAnnotations_[r], u && (this.values_.delete(r), u instanceof Sa && (c = u.value_), TC(u)), this.keysAtom_.reportChanged(), (a = this.pendingKeys_) == null || (a = a.get(r)) == null || a.set(r in this.target_), s || l) {
        var f = {
          type: Y1,
          observableKind: "object",
          object: this.proxy_ || this.target_,
          debugObjectName: this.name_,
          oldValue: c,
          name: r
        };
        process.env.NODE_ENV !== "production" && l && Sr(f), s && Ei(this, f), process.env.NODE_ENV !== "production" && l && Cr();
      }
    } finally {
      Gr();
    }
    return !0;
  }, t.observe_ = function(r, i) {
    return process.env.NODE_ENV !== "production" && i === !0 && je("`observe` doesn't support the fire immediately property for observable objects."), rc(this, r);
  }, t.intercept_ = function(r) {
    return nc(this, r);
  }, t.notifyPropertyAddition_ = function(r, i) {
    var o, a = xi(this), s = process.env.NODE_ENV !== "production" && Dn();
    if (a || s) {
      var l = a || s ? {
        type: Ro,
        observableKind: "object",
        debugObjectName: this.name_,
        object: this.proxy_ || this.target_,
        name: r,
        newValue: i
      } : null;
      process.env.NODE_ENV !== "production" && s && Sr(l), a && Ei(this, l), process.env.NODE_ENV !== "production" && s && Cr();
    }
    (o = this.pendingKeys_) == null || (o = o.get(r)) == null || o.set(!0), this.keysAtom_.reportChanged();
  }, t.ownKeys_ = function() {
    return this.keysAtom_.reportObserved(), cm(this.target_);
  }, t.keys_ = function() {
    return this.keysAtom_.reportObserved(), Object.keys(this.target_);
  }, e;
}();
function ic(e, t) {
  var n;
  if (process.env.NODE_ENV !== "production" && t && oc(e) && je("Options can't be provided for already observable objects."), wi(e, ft))
    return process.env.NODE_ENV !== "production" && !(XC(e) instanceof Cg) && je("Cannot convert '" + yf(e) + `' into observable object:
The target is already observable of different type.
Extending builtins is not supported.`), e;
  process.env.NODE_ENV !== "production" && !Object.isExtensible(e) && je("Cannot make the designated object observable; it is not extensible");
  var r = (n = t == null ? void 0 : t.name) != null ? n : process.env.NODE_ENV !== "production" ? (Ui(e) ? "ObservableObject" : e.constructor.name) + "@" + Mi() : "ObservableObject", i = new Cg(e, /* @__PURE__ */ new Map(), String(r), mq(t));
  return um(e, ft, i), e;
}
var hZ = /* @__PURE__ */ Ya("ObservableObjectAdministration", Cg);
function K1(e) {
  return U1[e] || (U1[e] = {
    get: function() {
      return this[ft].getObservablePropValue_(e);
    },
    set: function(n) {
      return this[ft].setObservablePropValue_(e, n);
    }
  });
}
function oc(e) {
  return ph(e) ? hZ(e[ft]) : !1;
}
function q1(e, t, n) {
  var r;
  process.env.NODE_ENV !== "production" && (e.appliedAnnotations_[n] = t), (r = e.target_[so]) == null || delete r[n];
}
function Z1(e, t, n) {
  if (process.env.NODE_ENV !== "production" && !UC(t) && je("Cannot annotate '" + e.name_ + "." + n.toString() + "': Invalid annotation."), process.env.NODE_ENV !== "production" && !df(t) && wi(e.appliedAnnotations_, n)) {
    var r = e.name_ + "." + n.toString(), i = e.appliedAnnotations_[n].annotationType_, o = t.annotationType_;
    je("Cannot apply '" + o + "' to '" + r + "':" + (`
The field is already annotated with '` + i + "'.") + `
Re-annotating fields is not allowed.
Use 'override' annotation for methods overridden by subclass.`);
  }
}
var pZ = /* @__PURE__ */ WC(0), vZ = /* @__PURE__ */ function() {
  var e = !1, t = {};
  return Object.defineProperty(t, "0", {
    set: function() {
      e = !0;
    }
  }), Object.create(t)[0] = 1, e === !1;
}(), Wp = 0, VC = function() {
};
function gZ(e, t) {
  Object.setPrototypeOf ? Object.setPrototypeOf(e.prototype, t) : e.prototype.__proto__ !== void 0 ? e.prototype.__proto__ = t : e.prototype = t;
}
gZ(VC, Array.prototype);
var mm = /* @__PURE__ */ function(e) {
  function t(r, i, o, a) {
    var s;
    return o === void 0 && (o = process.env.NODE_ENV !== "production" ? "ObservableArray@" + Mi() : "ObservableArray"), a === void 0 && (a = !1), s = e.call(this) || this, vl(function() {
      var l = new ym(o, i, a, !0);
      l.proxy_ = s, dC(s, ft, l), r && r.length && s.spliceWithArray(0, 0, r), vZ && Object.defineProperty(s, "0", pZ);
    }), s;
  }
  pC(t, e);
  var n = t.prototype;
  return n.concat = function() {
    this[ft].atom_.reportObserved();
    for (var i = arguments.length, o = new Array(i), a = 0; a < i; a++)
      o[a] = arguments[a];
    return Array.prototype.concat.apply(
      this.slice(),
      //@ts-ignore
      o.map(function(s) {
        return bh(s) ? s.slice() : s;
      })
    );
  }, n[Symbol.iterator] = function() {
    var r = this, i = 0;
    return bm({
      next: function() {
        return i < r.length ? {
          value: r[i++],
          done: !1
        } : {
          done: !0,
          value: void 0
        };
      }
    });
  }, pl(t, [{
    key: "length",
    get: function() {
      return this[ft].getArrayLength_();
    },
    set: function(i) {
      this[ft].setArrayLength_(i);
    }
  }, {
    key: Symbol.toStringTag,
    get: function() {
      return "Array";
    }
  }]);
}(VC);
Object.entries(vf).forEach(function(e) {
  var t = e[0], n = e[1];
  t !== "concat" && um(mm.prototype, t, n);
});
function WC(e) {
  return {
    enumerable: !1,
    configurable: !0,
    get: function() {
      return this[ft].get_(e);
    },
    set: function(n) {
      this[ft].set_(e, n);
    }
  };
}
function yZ(e) {
  Hi(mm.prototype, "" + e, WC(e));
}
function GC(e) {
  if (e > Wp) {
    for (var t = Wp; t < e + 100; t++)
      yZ(t);
    Wp = e;
  }
}
GC(1e3);
function mZ(e, t, n) {
  return new mm(e, t, n);
}
function Us(e, t) {
  if (typeof e == "object" && e !== null) {
    if (bh(e))
      return t !== void 0 && je(23), e[ft].atom_;
    if (Ii(e))
      return e.atom_;
    if (na(e)) {
      if (t === void 0)
        return e.keysAtom_;
      var n = e.data_.get(t) || e.hasMap_.get(t);
      return n || je(25, t, yf(e)), n;
    }
    if (oc(e)) {
      if (!t)
        return je(26);
      var r = e[ft].values_.get(t);
      return r || je(27, t, yf(e)), r;
    }
    if (dm(e) || _h(e) || pf(e))
      return e;
  } else if (bn(e) && pf(e[ft]))
    return e[ft];
  je(28);
}
function XC(e, t) {
  if (e || je(29), dm(e) || _h(e) || pf(e) || na(e) || Ii(e))
    return e;
  if (e[ft])
    return e[ft];
  je(24, e);
}
function yf(e, t) {
  var n;
  if (t !== void 0)
    n = Us(e, t);
  else {
    if (Gs(e))
      return e.name;
    oc(e) || na(e) || Ii(e) ? n = XC(e) : n = Us(e);
  }
  return n.name_;
}
function vl(e) {
  var t = Ka(), n = hm(!0);
  Wr();
  try {
    return e();
  } finally {
    Gr(), pm(n), co(t);
  }
}
var J1 = hh.toString;
function _m(e, t, n) {
  return n === void 0 && (n = -1), Og(e, t, n);
}
function Og(e, t, n, r, i) {
  if (e === t)
    return e !== 0 || 1 / e === 1 / t;
  if (e == null || t == null)
    return !1;
  if (e !== e)
    return t !== t;
  var o = typeof e;
  if (o !== "function" && o !== "object" && typeof t != "object")
    return !1;
  var a = J1.call(e);
  if (a !== J1.call(t))
    return !1;
  switch (a) {
    case "[object RegExp]":
    case "[object String]":
      return "" + e == "" + t;
    case "[object Number]":
      return +e != +e ? +t != +t : +e == 0 ? 1 / +e === 1 / t : +e == +t;
    case "[object Date]":
    case "[object Boolean]":
      return +e == +t;
    case "[object Symbol]":
      return typeof Symbol < "u" && Symbol.valueOf.call(e) === Symbol.valueOf.call(t);
    case "[object Map]":
    case "[object Set]":
      n >= 0 && n++;
      break;
  }
  e = Q1(e), t = Q1(t);
  var s = a === "[object Array]";
  if (!s) {
    if (typeof e != "object" || typeof t != "object")
      return !1;
    var l = e.constructor, u = t.constructor;
    if (l !== u && !(bn(l) && l instanceof l && bn(u) && u instanceof u) && "constructor" in e && "constructor" in t)
      return !1;
  }
  if (n === 0)
    return !1;
  n < 0 && (n = -1), r = r || [], i = i || [];
  for (var c = r.length; c--; )
    if (r[c] === e)
      return i[c] === t;
  if (r.push(e), i.push(t), s) {
    if (c = e.length, c !== t.length)
      return !1;
    for (; c--; )
      if (!Og(e[c], t[c], n - 1, r, i))
        return !1;
  } else {
    var d = Object.keys(e), f;
    if (c = d.length, Object.keys(t).length !== c)
      return !1;
    for (; c--; )
      if (f = d[c], !(wi(t, f) && Og(e[f], t[f], n - 1, r, i)))
        return !1;
  }
  return r.pop(), i.pop(), !0;
}
function Q1(e) {
  return bh(e) ? e.slice() : hl(e) || na(e) || ao(e) || Ii(e) ? Array.from(e.entries()) : e;
}
var ew, _Z = ((ew = sm().Iterator) == null ? void 0 : ew.prototype) || {};
function bm(e) {
  return e[Symbol.iterator] = bZ, Object.assign(Object.create(_Z), e);
}
function bZ() {
  return this;
}
function UC(e) {
  return (
    // Can be function
    e instanceof Object && typeof e.annotationType_ == "string" && bn(e.make_) && bn(e.extend_)
  );
}
["Symbol", "Map", "Set"].forEach(function(e) {
  var t = sm();
  typeof t[e] > "u" && je("MobX requires global '" + e + "' to be available or polyfilled");
});
typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__ == "object" && __MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({
  spy: Bq,
  extras: {
    getDebugName: yf
  },
  $mobx: ft
});
Xa.use(AX);
Xa.use(SX);
Xa.use(OX);
Xa.use(tX);
Xa.use(wX);
Xa.use(UG);
class wZ extends Xa {
  constructor(t) {
    super(t), Object.defineProperty(this.graphModel, "toFront", {
      writable: !0
    }), this.graphModel.toFront = _a(() => {
    });
  }
}
const xZ = /* @__PURE__ */ fe({
  name: "LfDesigner",
  __name: "index",
  props: {
    data: {
      type: Object,
      default: () => null
    },
    props: {
      type: Object,
      default: () => null
    },
    editable: {
      type: Boolean,
      default: !0
    },
    minimap: {
      type: Boolean,
      default: void 0
    }
  },
  emits: ["init"],
  setup(e, { expose: t, emit: n }) {
    const r = e, i = n, o = ds(), a = ds();
    async function s(u) {
      await Hn(), o.value = new wZ({
        isSilentMode: !r.editable,
        // 静默模式（只读模式）
        allowRotate: r.editable,
        // 启用旋转
        allowResize: r.editable,
        // 启用缩放
        multipleSelectKey: "shift",
        // disabledTools: ['multipleSelect'], // 与 NodeSelection 插件互斥
        keyboard: {
          enabled: !0,
          shortcuts: bK(o)
        },
        grid: {
          type: "mesh",
          size: 10,
          config: { color: "rgba(204,204,204,0.2)" }
        },
        ...r.props || {},
        container: a.value
      }), o.value.setTheme(_K), pK(o), EK(o), wK(o), o.value.setDefaultEdgeType("pro-polyline"), i("init", o.value), o.value.render(u), r.minimap && o.value.extension.miniMap.show(0, 0);
    }
    function l(u) {
      o.value ? o.value.render(u) : s(u);
    }
    return fr(() => s(r.data)), t({
      renderData: l
    }), (u, c) => (X(), he("div", {
      ref_key: "container",
      ref: a,
      style: { width: "100%", height: "100%" }
    }, null, 512));
  }
}), EZ = { class: "edit-item_label" }, SZ = {
  key: 0,
  style: { "max-width": "40vw", "word-break": "break-word", "white-space": "normal", display: "inline-block", overflow: "hidden" }
}, CZ = ["title"], OZ = { class: "edit-item_content" }, AZ = { class: "edit-item_form-item" }, NZ = {
  key: 0,
  class: "edit-item_description"
}, MZ = { key: 0 }, TZ = /* @__PURE__ */ fe({
  name: "EditItem",
  __name: "EditItem",
  props: {
    label: {
      type: String,
      default: ""
    },
    description: {
      type: String,
      default: ""
    },
    tooltip: {
      type: String,
      default: ""
    },
    align: {
      type: String,
      default: "horizontal"
    },
    prefix: {
      type: [String, Boolean],
      default: "："
    },
    textAlign: {
      type: String,
      default: "right",
      validator: (e) => ["left", "center", "right"].includes(e)
    },
    labelWidth: {
      type: [Number, String],
      default: 100
    }
  },
  setup(e) {
    const t = e, n = F(() => ({
      "--label-width": typeof t.labelWidth == "string" ? t.labelWidth : `${t.labelWidth}px`,
      "--text-align": t.textAlign,
      "--el-align": t.align === "vertical" ? "column" : "row"
    })), r = F(() => t.prefix ? typeof t.prefix == "string" ? `${t.label}${t.prefix}` : `${t.label}：` : t.label);
    return (i, o) => {
      const a = Bg;
      return X(), he("div", {
        class: "edit-item",
        style: Jt(n.value)
      }, [
        Y("div", EZ, [
          e.tooltip || i.$slots.tooltip ? (X(), ot(a, {
            key: 0,
            position: "tr"
          }, {
            content: Z(() => [
              i.$slots.tooltip ? vt("", !0) : (X(), he("div", SZ, Mt(e.tooltip), 1)),
              mt(i.$slots, "tooltip", {}, void 0, !0)
            ]),
            default: Z(() => [
              A(oe(sD), {
                size: 14,
                style: { "margin-right": "6px" }
              })
            ]),
            _: 3
          })) : vt("", !0),
          Y("span", { title: e.label }, Mt(r.value), 9, CZ)
        ]),
        Y("div", OZ, [
          Y("div", AZ, [
            mt(i.$slots, "default", {}, void 0, !0)
          ]),
          e.description || i.$slots.description ? (X(), he("div", NZ, [
            e.description ? (X(), he("span", MZ, Mt(e.description), 1)) : vt("", !0),
            mt(i.$slots, "description", {}, void 0, !0)
          ])) : vt("", !0)
        ])
      ], 4);
    };
  }
}), PZ = (e, t) => {
  const n = e.__vccOpts || e;
  for (const [r, i] of t)
    n[r] = i;
  return n;
}, mr = /* @__PURE__ */ PZ(TZ, [["__scopeId", "data-v-441b1447"]]), DZ = [
  {
    backgroundColor: "#ffffff",
    borderWidth: 1,
    borderColor: "#2a2a2a"
  },
  {
    backgroundColor: "#f5f5f5",
    borderWidth: 1,
    borderColor: "#666666"
  },
  {
    backgroundColor: "#dae8fc",
    borderWidth: 1,
    borderColor: "#6c8ebf"
  },
  {
    backgroundColor: "#d5e8d4",
    borderWidth: 1,
    borderColor: "#82b366"
  },
  {
    backgroundColor: "#ffe6cc",
    borderWidth: 1,
    borderColor: "#d79b00"
  },
  {
    backgroundColor: "#fff2cc",
    borderWidth: 1,
    borderColor: "#d6b656"
  },
  {
    backgroundColor: "#f8cecc",
    borderWidth: 1,
    borderColor: "#b85450"
  },
  {
    backgroundColor: "#dcd2e6",
    borderWidth: 1,
    borderColor: "#9673a6"
  }
], RZ = [
  { value: "solid", label: "solid" },
  { value: "dashed", label: "dashed" },
  { value: "dotted", label: "dotted" }
], LZ = [
  { value: "Arial", label: "Arial" },
  { value: "Verdana", label: "Verdana" },
  { value: "Georgia", label: "Georgia" },
  { value: "Times New Roman", label: "Times New Roman" }
], $Z = ["width", "height"], YC = /* @__PURE__ */ fe({
  name: "IconProcess",
  __name: "Process",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("path", {
        "fill-rule": "evenodd",
        fill: "currentColor",
        d: "M16.17724,0.0001639959 L16.31392,0.0023359416 C16.76624,0.011039724 17.21392,0.0385110372 17.65632,0.0839979001 C18.0024,0.11959701 18.27616,0.386950326 18.33536,0.729789755 L18.33536,0.729789755 L18.77264,3.26599835 C18.82752,3.58453439 19.06944,3.83640009 19.38128,3.92130997 C20.36656,4.18952726 21.30368,4.57442964 22.17696,5.06024149 C22.45616,5.21558161 22.80064,5.20641384 23.06176,5.02214645 L23.06176,5.02214645 L25.14544,3.55133522 C25.42944,3.35079623 25.812,3.35521212 26.08192,3.57448664 C26.94128,4.27262918 27.72672,5.05812955 28.4248,5.91746806 C28.64416,6.18736532 28.64848,6.56977176 28.448,6.85387665 L28.448,6.85387665 L27.00928,8.8920337 C26.82224,9.15689108 26.81584,9.50723432 26.97776,9.7880913 C27.49024,10.6768691 27.89728,11.6341571 28.18176,12.6428359 C28.2688,12.9513082 28.51936,13.1897023 28.83504,13.2441009 L28.83504,13.2441009 L31.2696,13.6637704 C31.61248,13.7229689 31.87984,13.9965621 31.91536,14.3426334 C31.95488,14.7245439 31.98032,15.1072543 31.99216,15.4904447 C31.99744,15.6592405 32,15.8288363 32,15.998912 C32,16.1353886 31.9984,16.2715452 31.99488,16.4073818 L31.99488,16.4073818 L31.99168,16.521139 C31.97952,16.9027294 31.95392,17.2808 31.91536,17.6551906 C31.87984,18.001262 31.61248,18.2748551 31.2696,18.3340536 L31.2696,18.3340536 L28.87376,18.7470033 C28.552,18.8047619 28.30208,19.0463558 28.21808,19.3572281 C27.93952,20.3880823 27.53328,21.3664578 27.01744,22.2744351 C26.85824,22.5545881 26.86576,22.9025794 27.05168,23.1657729 L27.05168,23.1657729 L28.448,25.1439634 C28.64848,25.4281163 28.64416,25.8105067 28.4248,26.08042 C27.72672,26.9397585 26.94112,27.7251789 26.08192,28.4234014 C25.812,28.6425959 25.42944,28.6470758 25.14544,28.4464408 L25.14544,28.4464408 L23.15472,27.041516 C22.89296,26.8640804 22.55152,26.8591205 22.27584,27.0159166 C21.36784,27.5317437 20.38944,27.9379736 19.35856,28.2165266 C19.04608,28.3010045 18.80336,28.5531582 18.74832,28.8721902 L18.74832,28.8721902 L18.33536,31.2679703 C18.27616,31.6108417 18.0024,31.878195 17.65632,31.9138742 C16.55504,32.0277913 15.44528,32.0277913 14.34384,31.9138742 C13.99776,31.878195 13.72416,31.6108417 13.66496,31.2681303 L13.66496,31.2681303 L13.24208,28.8163516 C13.18208,28.5086793 12.94688,28.2656454 12.643968,28.1802075 C12.141232,28.038451 11.651248,27.8662953 11.17616,27.6656604 C10.6932,27.4701452 10.21992,27.2434309 9.759424,26.9855174 C9.482816,26.8306412 9.141536,26.8373611 8.880752,27.0165566 L8.880752,27.0165566 L6.854784,28.4466008 C6.570672,28.6470758 6.188256,28.6425959 5.918352,28.4234014 C5.580592,28.1490083 5.25424,27.8611755 4.940112,27.560543 C4.854784,27.478945 4.77016,27.3962271 4.686288,27.3123892 C4.596352,27.2224714 4.507712,27.1315937 4.4204,27.040076 C4.12632,26.7317637 3.844448,26.4116117 3.57552,26.08074 C3.355968,25.8108267 3.350976,25.4289163 3.551616,25.1446034 L3.551616,25.1446034 L4.9536,23.158573 C5.140336,22.8939397 5.147072,22.5441884 4.98576,22.2633954 C4.453824,21.3374986 4.049248,20.358483 3.772048,19.3516282 C3.686496,19.040916 3.435056,18.800282 3.117456,18.7455634 L3.117456,18.7455634 L0.73128,18.3342136 C0.388592,18.2751751 0.121296,18.001582 0.085488,17.6556706 C-0.028496,16.5544181 -0.028496,15.4435659 0.085488,14.3421534 C0.12128,13.9964021 0.388576,13.7228089 0.73128,13.6637704 L0.73128,13.6637704 L3.117456,13.2522607 C3.435056,13.1975421 3.686496,12.9569081 3.772048,12.6462278 C4.049248,11.639437 4.453824,10.6603895 4.98576,9.73454064 C5.147072,9.45376366 5.140336,9.1039164 4.9536,8.83936302 L4.9536,8.83936302 L3.551568,6.85322067 C3.350944,6.56900377 3.35592,6.18707732 3.575472,5.91719607 C3.844416,5.58618035 4.12632,5.26610835 4.420416,4.95778006 C4.507728,4.86619835 4.596352,4.77543261 4.686288,4.68548286 C4.77016,4.60162896 4.854768,4.51889503 4.94008,4.43729707 C5.254224,4.13672858 5.580576,3.84881578 5.918352,3.57442264 C6.188256,3.35514812 6.570672,3.35074823 6.854784,3.55128722 L6.854784,3.55128722 L8.884992,4.98433939 C9.145216,5.16057499 9.484304,5.16644684 9.759424,5.01237069 C10.673808,4.50025549 11.638544,4.11117722 12.629424,3.84510387 C12.94256,3.76102597 13.1856,3.50868028 13.2408,3.18918427 L13.2408,3.18918427 L13.66496,0.729773756 C13.72416,0.386934327 13.99776,0.11958101 14.34384,0.0839819005 C14.84496,0.0321111972 15.34752,0.004559886 15.85072,1.53403765e-15 L15.85072,1.53403765e-15 L16.17724,0.0001639959 L16.17724,0.0001639959 Z M16,6.39915202 C10.698064,6.39915202 6.4,10.6971086 6.4,15.998912 C6.4,21.3006995 10.698064,25.598672 16,25.598672 C21.30192,25.598672 25.6,21.3006995 25.6,15.998912 C25.6,10.6971086 21.30192,6.39915202 16,6.39915202 Z M13,10.6834616 C13,9.25829358 14.6366646,8.47976633 15.7145891,9.39213001 L15.7145891,9.39213001 L21.4044355,14.2079889 C22.1985215,14.8800286 22.1985215,16.118545 21.4044355,16.7905847 L21.4044355,16.7905847 L15.7145891,21.6064772 C14.6366646,22.5188913 13,21.74028 13,20.3151793 L13,20.3151793 Z"
      }, null, -1)
    ]), 8, $Z));
  }
}), kZ = { class: "lf-penal_header" }, IZ = { class: "lf-panel_content" }, BZ = { class: "lf-panel_content" }, jZ = { class: "short-styles" }, zZ = ["onClick"], FZ = /* @__PURE__ */ fe({
  name: "LfPanel",
  __name: "index",
  props: {
    elements: {
      type: Array,
      default: () => []
    },
    elementsStyle: {
      type: Object,
      default: () => ({})
    },
    onlyEdge: {
      type: Boolean,
      default: !1
    },
    translatePrefix: {
      type: String,
      default: ""
    }
  },
  emits: ["setStyle", "setEdgeType", "setZIndex"],
  setup(e, { expose: t, emit: n }) {
    const r = e, i = n, { t: o } = bf(), a = le(!0), l = le([...["Common"]]);
    function u(S) {
      wf(S) ? a.value = !a.value : a.value = S;
    }
    const c = le("pro-polyline"), d = [
      { value: "pro-polyline", label: "折线" },
      { value: "pro-line", label: "直线" },
      { value: "pro-bezier", label: "曲线" }
    ];
    function f(S) {
      i("setEdgeType", S);
    }
    const h = le({ ...I1 }), p = le(Sm(11, (S) => S + 1)), v = le(Sm(5, (S) => 1 + S * 0.5));
    function g(S) {
      i("setStyle", { ...S });
    }
    function y(S, _) {
      i("setStyle", { [_]: S });
    }
    const m = {
      fontWeight: "normal",
      textDecoration: "none",
      fontStyle: "normal"
    };
    function E(S, _) {
      S === h.value[_] ? i("setStyle", { [_]: m[_] }) : i("setStyle", { [_]: S });
    }
    function w(S) {
      if (h.value[S])
        return h.value[S] === m[S] ? void 0 : "primary";
    }
    return wt(
      () => r.elementsStyle,
      (S) => h.value = { ...I1, ...S || {} },
      { immediate: !0 }
    ), wt(
      () => r.elements,
      (S) => {
        var _;
        c.value = ((_ = S[0]) == null ? void 0 : _.type) || "pro-polyline";
      },
      { deep: !0, immediate: !0 }
    ), t({
      togglePanel: u
    }), (S, _) => {
      const b = Ie("icon-double-left"), T = Nw, R = Gl, B = $w, K = MT, ae = Xl, x = Ns, P = Wl, L = Ul, k = zP, J = zg, de = bs, Ne = Bw;
      return X(), he("div", {
        class: ze(["lf-designer_panel", { open: oe(a) }])
      }, [
        Y("div", {
          class: "toggle-btn",
          onClick: _[0] || (_[0] = (se) => u())
        }, [
          A(b, { size: 12 })
        ]),
        Y("div", kZ, [
          A(YC, { size: 32 }),
          Y("div", null, Mt(oe(o)(`${e.translatePrefix}PropertiesPanel`)), 1)
        ]),
        $r(Y("div", IZ, [
          A(T, {
            description: oe(o)(`${e.translatePrefix}Please select a shape`)
          }, null, 8, ["description"])
        ], 512), [
          [kr, !e.elements.length]
        ]),
        $r(Y("div", BZ, [
          A(Ne, {
            "active-key": oe(l),
            "onUpdate:activeKey": _[25] || (_[25] = (se) => Up(l) ? l.value = se : null),
            bordered: !1,
            size: "small",
            "expand-icon-position": "right"
          }, {
            default: Z(() => [
              A(L, { key: "Common" }, {
                header: Z(() => [
                  A(oe(aD), {
                    size: 16,
                    "strock-width": 2
                  }),
                  Lt(Mt(oe(o)(`${e.translatePrefix}Common`)), 1)
                ]),
                default: Z(() => [
                  $r(A(mr, {
                    label: oe(o)(`${e.translatePrefix}quickStyle`)
                  }, {
                    default: Z(() => [
                      Y("div", jZ, [
                        (X(!0), he(Un, null, ca(oe(DZ), (se, G) => (X(), he("div", {
                          key: G,
                          style: Jt({
                            backgroundColor: se.backgroundColor,
                            borderColor: se.borderColor,
                            borderWidth: se.borderWidth
                          }),
                          onClick: (be) => g(se)
                        }, null, 12, zZ))), 128))
                      ])
                    ]),
                    _: 1
                  }, 8, ["label"]), [
                    [kr, !e.onlyEdge]
                  ]),
                  A(mr, {
                    label: oe(o)(`${e.translatePrefix}borderStyle`)
                  }, {
                    default: Z(() => [
                      A(B, {
                        modelValue: oe(h).borderStyle,
                        "onUpdate:modelValue": _[1] || (_[1] = (se) => oe(h).borderStyle = se),
                        class: "border-style-select",
                        onChange: _[2] || (_[2] = (se) => y(se, "borderStyle"))
                      }, {
                        default: Z(() => [
                          A(R, {
                            value: "hidden",
                            label: oe(o)(`${e.translatePrefix}Hidden`)
                          }, null, 8, ["label"]),
                          (X(!0), he(Un, null, ca(oe(RZ), (se) => (X(), ot(R, {
                            key: se.value,
                            value: se.value
                          }, {
                            default: Z(() => [
                              Y("span", null, Mt(oe(o)(e.translatePrefix + se.label)), 1),
                              Y("div", {
                                class: "border-style",
                                style: Jt({
                                  borderBottomStyle: se.value
                                })
                              }, null, 4)
                            ]),
                            _: 2
                          }, 1032, ["value"]))), 128))
                        ]),
                        _: 1
                      }, 8, ["modelValue"])
                    ]),
                    _: 1
                  }, 8, ["label"]),
                  $r(A(mr, {
                    label: oe(o)(`${e.translatePrefix}lineType`)
                  }, {
                    default: Z(() => [
                      A(B, {
                        modelValue: oe(c),
                        "onUpdate:modelValue": _[3] || (_[3] = (se) => Up(c) ? c.value = se : null),
                        onChange: f
                      }, {
                        default: Z(() => [
                          (X(), he(Un, null, ca(d, (se) => A(R, {
                            key: se.value,
                            value: se.value,
                            label: se.label
                          }, null, 8, ["value", "label"])), 64))
                        ]),
                        _: 1
                      }, 8, ["modelValue"])
                    ]),
                    _: 1
                  }, 8, ["label"]), [
                    [kr, e.onlyEdge]
                  ]),
                  A(mr, {
                    label: oe(o)(`${e.translatePrefix}textAlign`)
                  }, {
                    default: Z(() => [
                      A(ae, {
                        modelValue: oe(h).textAlign,
                        "onUpdate:modelValue": _[4] || (_[4] = (se) => oe(h).textAlign = se),
                        type: "button",
                        size: "mini",
                        onChange: _[5] || (_[5] = (se) => y(se, "textAlign"))
                      }, {
                        default: Z(() => [
                          A(K, { value: "left" }, {
                            default: Z(() => [
                              Lt(Mt(oe(o)(`${e.translatePrefix}leftAligned`)), 1)
                            ]),
                            _: 1
                          }),
                          A(K, { value: "center" }, {
                            default: Z(() => [
                              Lt(Mt(oe(o)(`${e.translatePrefix}centerAligned`)), 1)
                            ]),
                            _: 1
                          }),
                          A(K, { value: "right" }, {
                            default: Z(() => [
                              Lt(Mt(oe(o)(`${e.translatePrefix}rightAligned`)), 1)
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      }, 8, ["modelValue"])
                    ]),
                    _: 1
                  }, 8, ["label"]),
                  A(mr, {
                    label: oe(o)(`${e.translatePrefix}hierarchicalControl`)
                  }, {
                    default: Z(() => [
                      A(P, null, {
                        default: Z(() => [
                          A(x, {
                            onClick: _[6] || (_[6] = (se) => i("setZIndex", "top"))
                          }, {
                            default: Z(() => [
                              Lt(Mt(oe(o)(`${e.translatePrefix}setToTop`)), 1)
                            ]),
                            _: 1
                          }),
                          A(x, {
                            onClick: _[7] || (_[7] = (se) => i("setZIndex", "bottom"))
                          }, {
                            default: Z(() => [
                              Lt(Mt(oe(o)(`${e.translatePrefix}setToBottom`)), 1)
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }, 8, ["label"])
                ]),
                _: 1
              }),
              A(L, { key: "Other" }, {
                header: Z(() => [
                  A(oe(hD), {
                    size: 16,
                    "strock-width": 2
                  }),
                  Lt(Mt(oe(o)(`${e.translatePrefix}Other`)), 1)
                ]),
                default: Z(() => [
                  $r(A(mr, {
                    label: oe(o)(`${e.translatePrefix}backgroundColor`)
                  }, {
                    default: Z(() => [
                      A(k, {
                        modelValue: oe(h).backgroundColor,
                        "onUpdate:modelValue": _[8] || (_[8] = (se) => oe(h).backgroundColor = se),
                        size: "mini",
                        "show-text": "",
                        onChange: _[9] || (_[9] = (se) => y(se, "backgroundColor"))
                      }, null, 8, ["modelValue"])
                    ]),
                    _: 1
                  }, 8, ["label"]), [
                    [kr, !e.onlyEdge]
                  ]),
                  A(mr, {
                    label: oe(o)(`${e.translatePrefix}borderColor`)
                  }, {
                    default: Z(() => [
                      A(k, {
                        modelValue: oe(h).borderColor,
                        "onUpdate:modelValue": _[10] || (_[10] = (se) => oe(h).borderColor = se),
                        size: "mini",
                        "show-text": "",
                        onChange: _[11] || (_[11] = (se) => y(se, "borderColor"))
                      }, null, 8, ["modelValue"])
                    ]),
                    _: 1
                  }, 8, ["label"]),
                  A(mr, {
                    label: oe(o)(`${e.translatePrefix}borderWidth`)
                  }, {
                    default: Z(() => [
                      A(B, {
                        modelValue: oe(h).borderWidth,
                        "onUpdate:modelValue": _[12] || (_[12] = (se) => oe(h).borderWidth = se),
                        onChange: _[13] || (_[13] = (se) => y(se, "borderWidth"))
                      }, {
                        default: Z(() => [
                          (X(!0), he(Un, null, ca(oe(p), (se) => (X(), ot(R, {
                            key: se,
                            label: `${se}px`,
                            value: se
                          }, null, 8, ["label", "value"]))), 128))
                        ]),
                        _: 1
                      }, 8, ["modelValue"])
                    ]),
                    _: 1
                  }, 8, ["label"]),
                  A(mr, {
                    label: oe(o)(`${e.translatePrefix}fontColor`)
                  }, {
                    default: Z(() => [
                      A(k, {
                        modelValue: oe(h).fontColor,
                        "onUpdate:modelValue": _[14] || (_[14] = (se) => oe(h).fontColor = se),
                        size: "mini",
                        "show-text": "",
                        onChange: _[15] || (_[15] = (se) => y(se, "fontColor"))
                      }, null, 8, ["modelValue"])
                    ]),
                    _: 1
                  }, 8, ["label"]),
                  A(mr, {
                    label: oe(o)(`${e.translatePrefix}fontSize`)
                  }, {
                    default: Z(() => [
                      A(de, null, {
                        default: Z(() => [
                          A(J, {
                            modelValue: oe(h).fontSize,
                            "onUpdate:modelValue": _[16] || (_[16] = (se) => oe(h).fontSize = se),
                            min: 10,
                            max: 30,
                            onChange: _[17] || (_[17] = (se) => y(se, "fontSize"))
                          }, null, 8, ["modelValue"]),
                          A(x, null, {
                            default: Z(() => _[26] || (_[26] = [
                              Lt("px")
                            ])),
                            _: 1
                          })
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }, 8, ["label"]),
                  A(mr, {
                    label: oe(o)(`${e.translatePrefix}fontFamily`)
                  }, {
                    default: Z(() => [
                      A(B, {
                        modelValue: oe(h).fontFamily,
                        "onUpdate:modelValue": _[18] || (_[18] = (se) => oe(h).fontFamily = se),
                        onChange: _[19] || (_[19] = (se) => y(se, "fontFamily"))
                      }, {
                        default: Z(() => [
                          (X(!0), he(Un, null, ca(oe(LZ), (se, G) => (X(), ot(R, {
                            key: G,
                            value: se.value,
                            label: se.label
                          }, null, 8, ["value", "label"]))), 128))
                        ]),
                        _: 1
                      }, 8, ["modelValue"])
                    ]),
                    _: 1
                  }, 8, ["label"]),
                  A(mr, {
                    label: oe(o)(`${e.translatePrefix}lineHeight`)
                  }, {
                    default: Z(() => [
                      A(B, {
                        modelValue: oe(h).lineHeight,
                        "onUpdate:modelValue": _[20] || (_[20] = (se) => oe(h).lineHeight = se),
                        onChange: _[21] || (_[21] = (se) => y(se, "lineHeight"))
                      }, {
                        default: Z(() => [
                          (X(!0), he(Un, null, ca(oe(v), (se, G) => (X(), ot(R, {
                            key: G,
                            label: `${se}`,
                            value: se
                          }, null, 8, ["label", "value"]))), 128))
                        ]),
                        _: 1
                      }, 8, ["modelValue"])
                    ]),
                    _: 1
                  }, 8, ["label"]),
                  A(mr, {
                    label: oe(o)(`${e.translatePrefix}textStyle`)
                  }, {
                    default: Z(() => [
                      A(P, null, {
                        default: Z(() => [
                          A(x, {
                            type: w("fontWeight"),
                            onClick: _[22] || (_[22] = (se) => E("bold", "fontWeight"))
                          }, {
                            default: Z(() => _[27] || (_[27] = [
                              Lt(" B ")
                            ])),
                            _: 1
                          }, 8, ["type"]),
                          A(x, {
                            type: w("textDecoration"),
                            onClick: _[23] || (_[23] = (se) => E("underline", "textDecoration"))
                          }, {
                            default: Z(() => _[28] || (_[28] = [
                              Lt(" U ")
                            ])),
                            _: 1
                          }, 8, ["type"]),
                          A(x, {
                            type: w("fontStyle"),
                            onClick: _[24] || (_[24] = (se) => E("italic", "fontStyle"))
                          }, {
                            default: Z(() => _[29] || (_[29] = [
                              Lt(" I ")
                            ])),
                            _: 1
                          }, 8, ["type"])
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  }, 8, ["label"])
                ]),
                _: 1
              })
            ]),
            _: 1
          }, 8, ["active-key"])
        ], 512), [
          [kr, e.elements.length]
        ])
      ], 2);
    };
  }
}), HZ = { class: "lf-designer_container" }, VQ = /* @__PURE__ */ fe({
  name: "IntegralDesigner",
  __name: "index",
  props: {
    data: {
      type: Object,
      default: () => null
    },
    useSave: {
      type: Boolean,
      default: !1
    },
    useOpen: {
      type: Boolean,
      default: !1
    },
    editable: {
      type: Boolean,
      default: !0
    },
    props: {
      type: Object,
      default: () => null
    },
    minimap: {
      type: Boolean,
      default: void 0
    },
    panel: {
      type: Boolean,
      default: !0
    },
    language: {
      type: String,
      default: "zh_CN"
    },
    theme: {
      type: String,
      default: "light"
    },
    fileName: {
      type: String,
      default: "Process"
    },
    translatePrefix: {
      type: String,
      default: ""
    },
    timeout: {
      type: Number,
      default: 5e3
    }
  },
  emits: ["dataChanged"],
  setup(e, { expose: t, emit: n }) {
    const r = e, i = n, o = ds(), a = ds(), s = ds(), l = le({}), u = le([]), c = le([]);
    function d() {
      let x = {};
      const { nodes: P, edges: L } = o.value.getSelectElements();
      return P.forEach((k) => {
        x = { ...x, ...k.properties };
      }), L.forEach((k) => {
        x = { ...x, ...k.properties };
      }), l.value = x, x;
    }
    function f(x) {
      for (const P of c.value)
        o.value.graphModel.changeEdgeType(P.id, x);
    }
    function h(x) {
      for (const P of u.value)
        o.value.setProperties(P.id, { ...x });
      for (const P of c.value)
        o.value.setProperties(P.id, { ...x });
      d();
    }
    function p(x) {
      u.value.forEach(({ id: P }) => {
        o.value.setElementZIndex(P, x);
      }), c.value.forEach(({ id: P }) => {
        o.value.setElementZIndex(P, x);
      });
    }
    async function v() {
      await Hn();
      const { nodes: x, edges: P } = o.value.getSelectElements();
      c.value = P, u.value = x, d();
    }
    const g = pO(() => {
      var P;
      const x = o.value.getGraphRawData();
      i("dataChanged", x), (P = window.lfDesigner) != null && P.dataChangeCallback && window.lfDesigner.dataChangeCallback(x);
    }, r.timeout);
    function y(x) {
      o.value = x, x.on(
        "selection:selected,node:click,blank:click,edge:click",
        v
      ), x.on("history:change", g);
    }
    function m(x) {
      o.value.dnd.startDrag({ type: x });
    }
    const E = le("light");
    function w() {
      return r.theme ? E.value = r.theme : E.value = document.body.getAttribute("arco-theme") === "dark" ? "dark" : "light", E.value;
    }
    w();
    function S(x) {
      if (x) {
        document.body.setAttribute("arco-theme", x);
        return;
      }
      const P = w() === "dark";
      E.value = P ? "light" : "dark", document.body.setAttribute("arco-theme", E.value);
    }
    const { locale: _ } = bf();
    function b(x) {
      x ? _.value = x : _.value = _.value === "zh_CN" ? "en_US" : "zh_CN", ow("local-lang", _.value);
    }
    function T(x) {
      if (!o.value)
        return console.error("请先初始化 LogicFlow 实例");
      o.value.render(x), o.value.resetZoom(), o.value.translateCenter();
    }
    function R() {
      var x;
      return (x = o.value) == null ? void 0 : x.getGraphRawData();
    }
    function B() {
    }
    const K = ds();
    function ae(x) {
      var P;
      (P = K.value) == null || P.togglePanel(x);
    }
    return sd(() => void 0), wt(() => r.language, b, { immediate: !0 }), wt(() => r.theme, S, { immediate: !0 }), wt(() => r.panel, ae), t({
      provideInstance: o,
      designer: a,
      toolbar: s,
      toggleTheme: S,
      toggleLang: b,
      togglePanel: ae,
      importNewData: T,
      exportNewData: R
    }), (x, P) => {
      const L = VP;
      return X(), ot(L, { size: "mini" }, {
        default: Z(() => [
          Y("div", {
            id: "lf-designer__wrap",
            class: ze(["lf-designer_wrap", { "is-readonly": !e.editable }])
          }, [
            e.editable ? (X(), ot(KX, {
              key: 0,
              "translate-prefix": e.translatePrefix,
              onDragInNode: m
            }, null, 8, ["translate-prefix"])) : vt("", !0),
            Y("div", HZ, [
              A(GX, {
                ref_key: "toolbar",
                ref: s,
                lf: oe(o),
                "use-save": e.useSave,
                "use-open": e.useOpen,
                editable: e.editable,
                "file-name": e.fileName,
                "translate-prefix": e.translatePrefix
              }, {
                default: Z(() => [
                  vt("", !0)
                ]),
                _: 1
              }, 8, ["lf", "use-save", "use-open", "editable", "file-name", "translate-prefix"]),
              A(xZ, {
                ref_key: "designer",
                ref: a,
                data: e.data,
                minimap: e.minimap,
                props: e.props,
                editable: e.editable,
                onInit: y
              }, null, 8, ["data", "minimap", "props", "editable"])
            ]),
            e.editable ? (X(), ot(FZ, {
              key: 1,
              ref_key: "panelRef",
              ref: K,
              "only-edge": oe(u).length === 0,
              elements: [...oe(c), ...oe(u)],
              "elements-style": oe(l),
              "translate-prefix": e.translatePrefix,
              onSetEdgeType: f,
              onSetStyle: h,
              onSetZIndex: p
            }, null, 8, ["only-edge", "elements", "elements-style", "translate-prefix"])) : vt("", !0)
          ], 2)
        ]),
        _: 1
      });
    };
  }
}), VZ = ["width", "height"], WZ = /* @__PURE__ */ fe({
  name: "IconActor",
  __name: "Actor",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("ellipse", {
          cx: "15.75",
          cy: "4.73",
          rx: "3.375",
          ry: "3.375",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        }),
        Y("path", {
          d: "M 15.75 8.1 L 15.75 19.35 M 15.75 10.35 L 9 10.35 M 15.75 10.35 L 22.5 10.35 M 15.75 19.35 L 9 28.35 M 15.75 19.35 L 22.5 28.35",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "10",
          "stroke-miterlimit": "10",
          "pointer-events": "stroke",
          visibility: "hidden"
        }),
        Y("path", {
          d: "M 15.75 8.1 L 15.75 19.35 M 15.75 10.35 L 9 10.35 M 15.75 10.35 L 22.5 10.35 M 15.75 19.35 L 9 28.35 M 15.75 19.35 L 22.5 28.35",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "stroke-miterlimit": "10",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, VZ));
  }
}), GZ = ["width", "height"], XZ = /* @__PURE__ */ fe({
  name: "IconAreaSelect",
  __name: "AreaSelect",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 1024 1024",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("path", {
        d: "M933.647059 0h-210.82353v90.352941h180.705883a30.117647 30.117647 0 0 1 30.117647 30.117647v180.705883h90.352941V90.352941a90.352941 90.352941 0 0 0-90.352941-90.352941zM361.411765 0h301.17647v90.352941H361.411765zM933.647059 361.411765h90.352941v301.17647h-90.352941zM361.411765 933.647059h301.17647v90.352941H361.411765zM0 361.411765h90.352941v301.17647H0zM90.352941 903.529412v-180.705883H0v210.82353a90.352941 90.352941 0 0 0 90.352941 90.352941h210.82353v-90.352941H120.470588a30.117647 30.117647 0 0 1-30.117647-30.117647zM933.647059 903.529412a30.117647 30.117647 0 0 1-30.117647 30.117647h-180.705883v90.352941h210.82353a90.352941 90.352941 0 0 0 90.352941-90.352941v-210.82353h-90.352941zM0 90.352941v210.82353h90.352941V120.470588a30.117647 30.117647 0 0 1 30.117647-30.117647h180.705883V0H90.352941a90.352941 90.352941 0 0 0-90.352941 90.352941z",
        "p-id": "1890"
      }, null, -1)
    ]), 8, GZ));
  }
}), UZ = ["width", "height"], YZ = /* @__PURE__ */ fe({
  name: "IconCircle",
  __name: "Circle",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("ellipse", {
          cx: "15",
          cy: "15",
          rx: "14",
          ry: "14",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, UZ));
  }
}), KZ = ["width", "height"], qZ = /* @__PURE__ */ fe({
  name: "IconColorFill",
  __name: "ColorFill",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 1024 1024",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("path", {
        fill: "currentColor",
        d: "M810.666667 618.666667s-85.333333 93.866667-85.333334 149.333333c0 46.933333 38.4 85.333333 85.333334 85.333333s85.333333-38.4 85.333333-85.333333c0-55.466667-85.333333-149.333333-85.333333-149.333333M221.866667 554.666667L426.666667 349.866667l204.8 204.8m76.8-46.933334L324.266667 128 264.533333 187.733333l102.4 102.4-221.866666 217.6c-25.6 25.6-25.6 64 0 89.6l234.666666 234.666667c25.6 25.6 64 25.6 89.6 0l234.666667-234.666667c25.6-21.333333 29.866667-64 4.266667-89.6z",
        "p-id": "4284"
      }, null, -1)
    ]), 8, KZ));
  }
}), ZZ = ["width", "height"], JZ = /* @__PURE__ */ fe({
  name: "IconColorText",
  __name: "ColorText",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 1024 1024",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("path", {
        d: "M512 725.333333a128 128 0 1 1 0 256 128 128 0 0 1 0-256zM469.333333 85.333333L234.666667 682.666667h96l47.786666-128h266.666667l47.786667 128h96L554.666667 85.333333h-85.333334z m-58.88 384L512 199.253333 613.546667 469.333333H410.453333z",
        "p-id": "4479"
      }, null, -1)
    ]), 8, ZZ));
  }
}), QZ = ["width", "height"], eJ = /* @__PURE__ */ fe({
  name: "IconCylinder",
  __name: "Cylinder",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("path", {
          d: "M 5.78 6.46 C 5.78 3.64 10.35 1.36 15.98 1.36 C 18.69 1.36 21.28 1.9 23.19 2.85 C 25.11 3.81 26.18 5.11 26.18 6.46 L 26.18 23.46 C 26.18 26.28 21.61 28.56 15.98 28.56 C 10.35 28.56 5.78 26.28 5.78 23.46 Z",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "stroke-miterlimit": "10",
          "pointer-events": "all"
        }),
        Y("path", {
          d: "M 26.18 6.46 C 26.18 9.28 21.61 11.56 15.98 11.56 C 10.35 11.56 5.78 9.28 5.78 6.46",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "stroke-miterlimit": "10",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, QZ));
  }
}), tJ = ["width", "height"], nJ = /* @__PURE__ */ fe({
  name: "IconDiamond",
  __name: "Diamond",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("path", {
          d: "M 15.98 1.36 L 29.58 14.96 L 15.98 28.56 L 2.38 14.96 Z",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "stroke-miterlimit": "10",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, tJ));
  }
}), rJ = ["width", "height"], iJ = /* @__PURE__ */ fe({
  name: "IconEllipse",
  __name: "Ellipse",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("ellipse", {
          cx: "15.84",
          cy: "14.88",
          rx: "14.399999999999999",
          ry: "9.6",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, rJ));
  }
}), oJ = ["width", "height"], aJ = /* @__PURE__ */ fe({
  name: "IconFont",
  __name: "Font",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 1024 1024",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("path", {
        d: "M450.857143 319.428571l-97.142857 257.142858q18.857143 0 78 1.142857t91.714285 1.142857q10.857143 0 32.571429-1.142857-49.714286-144.571429-105.142857-258.285715zM36.571429 950.857143l1.142857-45.142857q13.142857-4 32-7.142857t32.571428-6 28.285715-8.285715 25.428571-16.571428 17.714286-28.857143l135.428571-352 160-413.714286h73.142857q4.571429 8 6.285715 12l117.142857 274.285714q18.857143 44.571429 60.571428 147.142858t65.142857 156.857142q8.571429 19.428571 33.142858 82.571429t41.142857 96.285714q11.428571 25.714286 20 32.571429 10.857143 8.571429 50.285714 16.857143t48 11.714285q3.428571 21.714286 3.428571 32.571429 0 2.285714-0.285714 7.428571t-0.285714 7.428572q-36 0-108.571429-4.571429t-109.142857-4.571428q-43.428571 0-122.857143 4t-101.714285 4.571428q0-24.571429 2.285714-44.571428l74.857143-16q0.571429 0 7.142857-1.428572t8.857143-2 8.285714-2.571428 8.571429-3.714286 6.285714-4.571429 5.142857-6.285714 1.428571-8q0-9.142857-17.714285-55.142857t-41.142857-101.428571-24-57.142858l-257.142858-1.142857q-14.857143 33.142857-43.714285 111.714286T254.857143 850.857143q0 12.571429 8 21.428571t24.857143 14 27.714285 7.714286 32.571429 4.857143 23.428571 2.285714q0.571429 10.857143 0.571429 33.142857 0 5.142857-1.142857 15.428572-33.142857 0-99.714286-5.714286T171.428571 938.285714q-4.571429 0-15.142857 2.285715t-12.285714 2.285714q-45.714286 8-107.428571 8z",
        "p-id": "8338"
      }, null, -1)
    ]), 8, oJ));
  }
}), sJ = ["width", "height"], lJ = /* @__PURE__ */ fe({
  name: "IconOctagon",
  __name: "Octagon",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("polygon", {
          points: "19.74,0 28,8.26 28,19.74 19.74,28 8.26,28 0,19.74 0,8.26 8.26,0",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, sJ));
  }
}), uJ = ["width", "height"], cJ = /* @__PURE__ */ fe({
  name: "IconHexagon",
  __name: "Hexagon",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("polygon", {
          points: "6.16,0 21.84,0 28,14 21.84,28 6.16,28 0,14",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, uJ));
  }
}), dJ = ["width", "height"], fJ = /* @__PURE__ */ fe({
  name: "IconLine",
  __name: "Line",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 1024 1024",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("path", {
        d: "M127.389 851.634l724.21-724.21 45.198 45.196-724.211 724.212z",
        "p-id": "11226"
      }, null, -1)
    ]), 8, dJ));
  }
}), hJ = ["width", "height"], pJ = /* @__PURE__ */ fe({
  name: "IconParallelogram",
  __name: "Parallelogram",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("path", {
          d: "M 1.44 22.08 L 6.24 7.68 L 30.24 7.68 L 25.44 22.08 Z",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "stroke-miterlimit": "10",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, hJ));
  }
}), vJ = ["width", "height"], gJ = /* @__PURE__ */ fe({
  name: "IconPentagon",
  __name: "Pentagon",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("polygon", {
          points: "0,10.6 14,0 28,10.6 22.4,28 5.6,28",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, vJ));
  }
}), yJ = ["width", "height"], mJ = /* @__PURE__ */ fe({
  name: "IconRect",
  __name: "Rect",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("rect", {
          x: "2.38",
          y: "1.36",
          width: "27.2",
          height: "27.2",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, yJ));
  }
}), _J = ["width", "height"], bJ = /* @__PURE__ */ fe({
  name: "IconRectRadius",
  __name: "RectRadius",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("rect", {
          x: "2.38",
          y: "1.36",
          width: "27.2",
          height: "27.2",
          rx: "3.16",
          ry: "3.16",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, _J));
  }
}), wJ = ["width", "height"], xJ = /* @__PURE__ */ fe({
  name: "IconHeptagon",
  __name: "Heptagon",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("polygon", {
          points: "14,0 25.06,5.6 28,18.06 20.02,28 7.7,28 0,18.06 2.94,5.6",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, wJ));
  }
}), EJ = ["width", "height"], SJ = /* @__PURE__ */ fe({
  name: "IconStepBack",
  __name: "StepBack",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 1024 1024",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("path", {
        d: "M967.111111 967.111111h-113.777778v-113.777778c0-221.866667-176.355556-398.222222-398.222222-398.222222H113.777778V341.333333h341.333333c284.444444 0 512 227.555556 512 512v113.777778z",
        fill: "#0D1733",
        "p-id": "1011"
      }, null, -1),
      Y("path", {
        d: "M409.6 762.311111L51.2 398.222222 409.6 39.822222l85.333333 79.644445-284.444444 278.755555 284.444444 284.444445z",
        fill: "#0D1733",
        "p-id": "1012"
      }, null, -1)
    ]), 8, EJ));
  }
}), CJ = ["width", "height"], OJ = /* @__PURE__ */ fe({
  name: "IconStepForward",
  __name: "StepForward",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 1024 1024",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("path", {
        d: "M170.666667 967.111111H56.888889v-113.777778c0-284.444444 227.555556-512 512-512h341.333333v113.777778h-341.333333c-221.866667 0-398.222222 176.355556-398.222222 398.222222v113.777778z",
        fill: "#0D1733",
        "p-id": "1167"
      }, null, -1),
      Y("path", {
        d: "M614.4 762.311111L529.066667 682.666667l284.444444-284.444445-284.444444-278.755555L614.4 39.822222 972.8 398.222222z",
        fill: "#0D1733",
        "p-id": "1168"
      }, null, -1)
    ]), 8, CJ));
  }
}), AJ = ["width", "height"], NJ = /* @__PURE__ */ fe({
  name: "IconTable",
  __name: "Table",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      iO('<g><g><path d="M 1.26 9.24 L 1.26 3.78 L 30.66 3.78 L 30.66 9.24" fill="none" stroke="currentColor" stroke-width="1" stroke-miterlimit="10" pointer-events="all"></path><path d="M 1.26 9.24 L 1.26 25.62 L 30.66 25.62 L 30.66 9.24" fill="none" stroke="currentColor" stroke-width="10" stroke-miterlimit="10" pointer-events="stroke" visibility="hidden"></path><path d="M 1.26 9.24 L 1.26 25.62 L 30.66 25.62 L 30.66 9.24" fill="none" stroke="currentColor" stroke-width="1" stroke-miterlimit="10" pointer-events="none"></path><path d="M 1.26 9.24 L 30.66 9.24" fill="none" stroke="currentColor" stroke-width="10" stroke-miterlimit="10" pointer-events="stroke" visibility="hidden"></path><path d="M 1.26 9.24 L 30.66 9.24" fill="none" stroke="currentColor" stroke-width="1" stroke-miterlimit="10" pointer-events="none"></path></g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="2.52px"><text x="15.96" y="7.56">List</text></g><g><rect x="1.26" y="9.24" width="29.4" height="5.46" fill="none" stroke="currentColor" pointer-events="stroke" visibility="hidden" stroke-width="9"></rect><rect x="1.26" y="9.24" width="29.4" height="5.46" fill="none" stroke="none" pointer-events="all"></rect></g><g style=""><clipPath id="mx-clip-1-9-31-9-0"><rect x="1" y="9" width="31" height="9"></rect></clipPath><g fill="#000000" font-family="Helvetica" clip-path="url(https://app.diagrams.net/#mx-clip-1-9-31-9-0)" font-size="2.52px"><text x="2.52" y="13.02">Item 1</text></g></g><g><rect x="1.26" y="14.7" width="29.4" height="5.46" fill="none" stroke="currentColor" pointer-events="stroke" visibility="hidden" stroke-width="9"></rect><rect x="1.26" y="14.7" width="29.4" height="5.46" fill="none" stroke="none" pointer-events="all"></rect></g><g style=""><clipPath id="mx-clip-1-14-31-9-0"><rect x="1" y="14" width="31" height="9"></rect></clipPath><g fill="#000000" font-family="Helvetica" font-size="2.52px"><text x="2.52" y="18.48">Item 2</text></g></g><g><rect x="1.26" y="20.16" width="29.4" height="5.46" fill="none" stroke="currentColor" pointer-events="stroke" visibility="hidden" stroke-width="9"></rect><rect x="1.26" y="20.16" width="29.4" height="5.46" fill="none" stroke="none" pointer-events="all"></rect></g><g style=""><clipPath id="mx-clip-1-20-31-9-0"><rect x="1" y="20" width="31" height="9"></rect></clipPath><g fill="#000000" font-family="Helvetica" font-size="2.52px"><text x="2.52" y="23.94">Item 3</text></g></g></g>', 1)
    ]), 8, AJ));
  }
}), MJ = ["width", "height"], TJ = /* @__PURE__ */ fe({
  name: "IconText",
  __name: "Text",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", {
        fill: "currentColor",
        "font-size": "8px"
      }, [
        Y("text", {
          x: "6",
          y: "12"
        }, "Text"),
        Y("text", {
          x: "4",
          y: "28"
        }, "Node")
      ], -1)
    ]), 8, MJ));
  }
}), PJ = ["width", "height"], DJ = /* @__PURE__ */ fe({
  name: "IconAddition",
  __name: "Addition",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("polygon", {
          points: "0,9 9,9 9,0 18,0 18,9 27,9 27,18 18,18 18,27 9,27 9,18 0,18",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, PJ));
  }
}), RJ = ["width", "height"], LJ = /* @__PURE__ */ fe({
  name: "IconSubtraction",
  __name: "Subtraction",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("polygon", {
          points: "0,9 27,9 27,18 0,18",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, RJ));
  }
}), $J = ["width", "height"], kJ = /* @__PURE__ */ fe({
  name: "IconMultiplication",
  __name: "Multiplication",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("polygon", {
          points: "0,4.5 4.5,0 13.5,9 22.5,0 27,4.5 18,13.5 27,22.5 22.5,27 13.5,18 4.5,27 0,22.5 9,13.5",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, $J));
  }
}), IJ = ["width", "height"], BJ = /* @__PURE__ */ fe({
  name: "IconDivision",
  __name: "Division",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("circle", {
          cx: "13.5",
          cy: "4.5",
          r: "3.375",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        }),
        Y("polygon", {
          points: "0,10 27,10 27,17 0,17",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        }),
        Y("circle", {
          cx: "13.5",
          cy: "22.5",
          r: "3.375",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, IJ));
  }
}), jJ = ["width", "height"], zJ = /* @__PURE__ */ fe({
  name: "IconTrapezoid",
  __name: "Trapezoid",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("polygon", {
          points: "5.32,0 22.68,0 28,28 0,28",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, jJ));
  }
}), FJ = ["width", "height"], HJ = /* @__PURE__ */ fe({
  name: "IconTriangle",
  __name: "Triangle",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("path", {
          d: "M 5.78 1.36 L 26.18 14.96 L 5.78 28.56 Z",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "stroke-miterlimit": "10",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, FJ));
  }
}), VJ = ["width", "height"], WJ = /* @__PURE__ */ fe({
  name: "IconDownArrow",
  __name: "DownArrow",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("polygon", {
          points: "10,0 20,0 20,18 30,18 15,28 0,18 10,18",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, VJ));
  }
}), GJ = ["width", "height"], XJ = /* @__PURE__ */ fe({
  name: "IconLeftArrow",
  __name: "LeftArrow",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("polygon", {
          points: "0,15 10,0 10,10 30,10 30,20 10,20 10,30",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, GJ));
  }
}), UJ = ["width", "height"], YJ = /* @__PURE__ */ fe({
  name: "IconRightArrow",
  __name: "RightArrow",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("polygon", {
          points: "0,10 20,10 20,0 30,15 20,30 20,20 0,20",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, UJ));
  }
}), KJ = ["width", "height"], qJ = /* @__PURE__ */ fe({
  name: "IconUpArrow",
  __name: "UpArrow",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("polygon", {
          points: "0,10 15,0 30,10 20,10 20,28 10,28 10,10",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "stroke-miterlimit": "10",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, KJ));
  }
}), ZJ = ["width", "height"], JJ = /* @__PURE__ */ fe({
  name: "IconHorizontalArrow",
  __name: "HorizontalArrow",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("polygon", {
          points: "0,13.6 9,2.2 9,11.2 18,11.2 18,2.2 27,13.6 18,27.2 18,18.2 9,18.2 9,27.2",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, ZJ));
  }
}), QJ = ["width", "height"], eQ = /* @__PURE__ */ fe({
  name: "IconVerticalArrow",
  __name: "VerticalArrow",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("polygon", {
          points: "0,9 13.6,0 27.2,9 18.2,9 18.2,18 27.2,18 13.6,27 0,18 9,18 9,9",
          fill: "none",
          stroke: "currentColor",
          "stroke-width": "1",
          "pointer-events": "all"
        })
      ], -1)
    ]), 8, QJ));
  }
}), tQ = ["width", "height"], nQ = /* @__PURE__ */ fe({
  name: "IconRightHollowArrow",
  __name: "RightHollowArrow",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("path", {
          stroke: "currentColor",
          "stroke-width": "1",
          fill: "none",
          d: "M 2 6 L 24 6 L 28 15 L 24 24 L 2 24 L 6 15 Z"
        })
      ], -1)
    ]), 8, tQ));
  }
}), rQ = ["width", "height"], iQ = /* @__PURE__ */ fe({
  name: "IconLeftHollowArrow",
  __name: "LeftHollowArrow",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("path", {
          d: "M 6 6 L 28 6 L 24 15 L 28 24 L 6 24 L 2 15 Z",
          stroke: "currentColor",
          "stroke-width": "1",
          fill: "none"
        })
      ], -1)
    ]), 8, rQ));
  }
}), oQ = ["width", "height"], aQ = /* @__PURE__ */ fe({
  name: "IconDoubleLeft",
  __name: "DoubleLeft",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      width: e.size,
      height: e.size,
      viewBox: "0 0 48 48",
      fill: "none",
      xmlns: "http://www.w3.org/2000/svg",
      stroke: "currentColor",
      "stroke-width": "4"
    }, n[0] || (n[0] = [
      Y("path", {
        d: "M36.8574 9.8999L22.7153 24.042L36.8574 38.1842M25.5437 9.8999L11.4016 24.042L25.5437 38.1842",
        "stroke-linecap": "butt"
      }, null, -1)
    ]), 8, oQ));
  }
}), sQ = ["width", "height"], lQ = /* @__PURE__ */ fe({
  name: "IconDocument",
  __name: "Document",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewbox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("path", {
          d: "M 2 4 L 30.4 4 L 30.4 26 Q 24 16 16 26 Q 8 32 2 26 L 2 8 Z",
          fill: "none",
          "stroke-width": "1",
          stroke: "currentColor"
        })
      ], -1)
    ]), 8, sQ));
  }
}), uQ = ["width", "height"], cQ = /* @__PURE__ */ fe({
  name: "IconCallout",
  __name: "Callout",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewbox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", {
        fill: "none",
        "stroke-width": "1",
        stroke: "currentColor"
      }, [
        Y("path", { d: "M 1.6 5.4 L 30.4 5.4 L 30.4 17.4 L 20.8 17.4 L 16 24.6 L 16 17.4 L 1.6 17.4 Z" })
      ], -1)
    ]), 8, uQ));
  }
}), dQ = ["width", "height"], fQ = /* @__PURE__ */ fe({
  name: "IconArchimateEvent",
  __name: "ArchimateEvent",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewbox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", {
        fill: "none",
        "stroke-width": "1",
        stroke: "currentColor"
      }, [
        Y("path", { d: "M 22.13 6.42 C 26.86 6.42 30.7 10.26 30.7 15 C 30.7 19.74 26.86 23.57 22.13 23.57 L 1.3 23.57 L 9.88 15 L 1.3 6.42 Z" })
      ], -1)
    ]), 8, dQ));
  }
}), hQ = ["width", "height"], pQ = /* @__PURE__ */ fe({
  name: "IconNote",
  __name: "Note",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewbox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("path", {
          d: "M 5.2 1.5 L 18.7 1.5 L 26.8 9.6 L 26.8 28.5 L 5.2 28.5 L 5.2 1.5 Z",
          fill: "none",
          "stroke-width": "1",
          stroke: "currentColor"
        }),
        Y("path", {
          d: "M 18.7 1.5 L 18.7 9.6 L 26.8 9.6 Z",
          fill: "currentColor",
          "stroke-width": "1",
          stroke: "currentColor",
          "fill-opacity": "0.2"
        })
      ], -1)
    ]), 8, hQ));
  }
}), vQ = ["width", "height"], gQ = /* @__PURE__ */ fe({
  name: "IconRectRound",
  __name: "RectRound",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewbox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", null, [
        Y("rect", {
          x: "2",
          y: "6",
          width: "30",
          height: "20",
          rx: "10",
          ry: "10",
          fill: "none",
          "stroke-width": "1",
          stroke: "currentColor"
        })
      ], -1)
    ]), 8, vQ));
  }
}), yQ = ["width", "height"], mQ = /* @__PURE__ */ fe({
  name: "IconRightAngledPentagon",
  __name: "RightAngledPentagon",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewbox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", {
        fill: "none",
        "stroke-width": "1",
        stroke: "currentColor"
      }, [
        Y("path", { d: "M 16,2 L 30,16 30,30 2,30 2,16 Z" })
      ], -1)
    ]), 8, yQ));
  }
}), _Q = ["width", "height"], bQ = /* @__PURE__ */ fe({
  name: "IconGroup",
  __name: "Group",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewbox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", {
        fill: "none",
        "stroke-width": "1",
        stroke: "currentColor"
      }, [
        Y("rect", {
          x: "2",
          y: "6",
          width: "28",
          height: "20"
        }),
        Y("rect", {
          x: "4",
          y: "8",
          width: "4",
          height: "2"
        })
      ], -1)
    ]), 8, _Q));
  }
}), wQ = ["width", "height"], xQ = /* @__PURE__ */ fe({
  name: "IconDivideLine",
  __name: "DivideLine",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewbox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", {
        fill: "none",
        "stroke-width": "2",
        stroke: "currentColor"
      }, [
        Y("path", { d: "M 2 16 L 30 16" })
      ], -1)
    ]), 8, wQ));
  }
}), EQ = ["width", "height"], SQ = /* @__PURE__ */ fe({
  name: "IconDivideDashedLine",
  __name: "DivideDashedLine",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewBox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", {
        fill: "none",
        "stroke-width": "2",
        stroke: "currentColor"
      }, [
        Y("path", {
          d: "M 2 16 L 30 16",
          "stroke-dasharray": "4"
        })
      ], -1)
    ]), 8, EQ));
  }
}), CQ = ["width", "height"], OQ = /* @__PURE__ */ fe({
  name: "IconHorizontalSplitRect",
  __name: "HorizontalSplitRect",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewbox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", {
        fill: "none",
        "stroke-width": "1",
        stroke: "currentColor"
      }, [
        Y("rect", {
          x: "2",
          y: "6",
          width: "28",
          height: "20"
        }),
        Y("path", { d: "M 10 6 L 10 26" })
      ], -1)
    ]), 8, CQ));
  }
}), AQ = ["width", "height"], NQ = /* @__PURE__ */ fe({
  name: "IconVerticalSplitRect",
  __name: "VerticalSplitRect",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewbox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", {
        fill: "none",
        "stroke-width": "1",
        stroke: "currentColor"
      }, [
        Y("rect", {
          x: "2",
          y: "6",
          width: "28",
          height: "20"
        }),
        Y("path", { d: "M 2 14 L 30 14" })
      ], -1)
    ]), 8, AQ));
  }
}), MQ = ["width", "height"], TQ = /* @__PURE__ */ fe({
  name: "IconHorizontalMultiSplitRect",
  __name: "HorizontalMultiSplitRect",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewbox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", {
        fill: "none",
        "stroke-width": "1",
        stroke: "currentColor"
      }, [
        Y("rect", {
          x: "2",
          y: "6",
          width: "28",
          height: "20"
        }),
        Y("path", { d: "M 10 6 L 10 26" }),
        Y("path", { d: "M 20 6 L 20 26" })
      ], -1)
    ]), 8, MQ));
  }
}), PQ = ["width", "height"], DQ = /* @__PURE__ */ fe({
  name: "IconVerticalMultiSplitRect",
  __name: "VerticalMultiSplitRect",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewbox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", {
        fill: "none",
        "stroke-width": "1",
        stroke: "currentColor"
      }, [
        Y("rect", {
          x: "2",
          y: "6",
          width: "28",
          height: "20"
        }),
        Y("path", { d: "M 2 14 L 30 14" }),
        Y("path", { d: "M 2 20 L 30 20" })
      ], -1)
    ]), 8, PQ));
  }
}), RQ = ["width", "height"], LQ = /* @__PURE__ */ fe({
  name: "IconPool",
  __name: "Pool",
  props: {
    size: {
      type: Number,
      default: 32
    }
  },
  setup(e) {
    return (t, n) => (X(), he("svg", {
      class: "icon",
      viewbox: "0 0 32 32",
      width: e.size,
      height: e.size
    }, n[0] || (n[0] = [
      Y("g", {
        fill: "none",
        "stroke-width": "1",
        stroke: "currentColor"
      }, [
        Y("rect", {
          x: "2",
          y: "6",
          width: "28",
          height: "20"
        }),
        Y("path", { d: "M 10 6 L 10 26" })
      ], -1)
    ]), 8, RQ));
  }
}), $Q = [
  YC,
  YZ,
  mJ,
  gQ,
  bJ,
  nJ,
  iJ,
  TJ,
  bQ,
  xQ,
  SQ,
  aJ,
  LJ,
  WZ,
  XZ,
  qZ,
  JZ,
  DJ,
  eJ,
  BJ,
  fJ,
  pJ,
  SJ,
  OJ,
  NJ,
  kJ,
  // 多边形
  xJ,
  cJ,
  gJ,
  lJ,
  zJ,
  HJ,
  mQ,
  // 箭头
  aQ,
  qJ,
  WJ,
  XJ,
  YJ,
  JJ,
  eQ,
  nQ,
  iQ,
  // 复杂形状
  lQ,
  cQ,
  fQ,
  pQ,
  // 组合形状
  OQ,
  NQ,
  TQ,
  DQ,
  LQ
], WQ = {
  install(e) {
    for (const t of $Q)
      e.component(t.name, t);
  }
};
export {
  WQ as Icons,
  VQ as IntegralDesigner,
  zQ as getLfLocalStorage,
  ow as setLfLocalStorage
};

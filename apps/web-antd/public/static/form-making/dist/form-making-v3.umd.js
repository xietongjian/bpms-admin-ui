!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue"),require("element-plus")):"function"==typeof define&&define.amd?define(["exports","vue","element-plus"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).FormMakingV3={},e.Vue,e.ElementPlus)}(this,(function(exports,vue,elementPlus){"use strict";var normalize="";
/*!
    * shared v9.13.1
    * (c) 2024 kazuya kawaguchi
    * Released under the MIT License.
    */const inBrowser$2="undefined"!=typeof window,makeSymbol=(e,t=!1)=>t?Symbol.for(e):Symbol(e),generateFormatCacheKey=(e,t,o)=>friendlyJSONstringify({l:e,k:t,s:o}),friendlyJSONstringify=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),isNumber$2=e=>"number"==typeof e&&isFinite(e),isDate$1=e=>"[object Date]"===toTypeString(e),isRegExp=e=>"[object RegExp]"===toTypeString(e),isEmptyObject=e=>isPlainObject$2(e)&&0===Object.keys(e).length,assign$2=Object.assign;let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});function escapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const hasOwnProperty$2=Object.prototype.hasOwnProperty;function hasOwn(e,t){return hasOwnProperty$2.call(e,t)}const isArray$1=Array.isArray,isFunction$3=e=>"function"==typeof e,isString$3=e=>"string"==typeof e,isBoolean=e=>"boolean"==typeof e,isObject$4=e=>null!==e&&"object"==typeof e,isPromise$1=e=>isObject$4(e)&&isFunction$3(e.then)&&isFunction$3(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),isPlainObject$2=e=>{if(!isObject$4(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t.constructor===Object},toDisplayString=e=>null==e?"":isArray$1(e)||isPlainObject$2(e)&&e.toString===objectToString?JSON.stringify(e,null,2):String(e);function join$1(e,t=""){return e.reduce(((e,o,n)=>0===n?e+o:e+t+o),"")}function incrementer(e){let t=e;return()=>++t}function warn(e,t){}const isNotObjectOrIsArray=e=>!isObject$4(e)||isArray$1(e);function deepCopy(e,t){if(isNotObjectOrIsArray(e)||isNotObjectOrIsArray(t))throw new Error("Invalid value");const o=[{src:e,des:t}];for(;o.length;){const{src:e,des:t}=o.pop();Object.keys(e).forEach((n=>{isNotObjectOrIsArray(e[n])||isNotObjectOrIsArray(t[n])?t[n]=e[n]:o.push({src:e[n],des:t[n]})}))}}
/*!
    * message-compiler v9.13.1
    * (c) 2024 kazuya kawaguchi
    * Released under the MIT License.
    */function createPosition(e,t,o){return{line:e,column:t,offset:o}}function createLocation(e,t,o){const n={start:e,end:t};return null!=o&&(n.source=o),n}const RE_ARGS=/\{([0-9a-zA-Z]+)\}/g;function format$1(e,...t){return 1===t.length&&isObject$3(t[0])&&(t=t[0]),t&&t.hasOwnProperty||(t={}),e.replace(RE_ARGS,((e,o)=>t.hasOwnProperty(o)?t[o]:""))}const assign$1=Object.assign,isString$2=e=>"string"==typeof e,isObject$3=e=>null!==e&&"object"==typeof e;function join(e,t=""){return e.reduce(((e,o,n)=>0===n?e+o:e+t+o),"")}const CompileWarnCodes={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},warnMessages={[CompileWarnCodes.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function createCompileWarn(e,t,...o){const n=format$1(warnMessages[e]||"",...o||[]),i={message:String(n),code:e};return t&&(i.location=t),i}const CompileErrorCodes={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},errorMessages={[CompileErrorCodes.EXPECTED_TOKEN]:"Expected token: '{0}'",[CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[CompileErrorCodes.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[CompileErrorCodes.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[CompileErrorCodes.EMPTY_PLACEHOLDER]:"Empty placeholder",[CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[CompileErrorCodes.INVALID_LINKED_FORMAT]:"Invalid linked format",[CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[CompileErrorCodes.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[CompileErrorCodes.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function createCompileError(e,t,o={}){const{domain:n,messages:i,args:l}=o,a=format$1((i||errorMessages)[e]||"",...l||[]),r=new SyntaxError(String(a));return r.code=e,t&&(r.location=t),r.domain=n,r}function defaultOnError(e){throw e}const CHAR_SP=" ",CHAR_CR="\r",CHAR_LF="\n",CHAR_LS=String.fromCharCode(8232),CHAR_PS=String.fromCharCode(8233);function createScanner(e){const t=e;let o=0,n=1,i=1,l=0;const a=e=>t[e]===CHAR_CR&&t[e+1]===CHAR_LF,r=e=>t[e]===CHAR_PS,s=e=>t[e]===CHAR_LS,d=e=>a(e)||(e=>t[e]===CHAR_LF)(e)||r(e)||s(e),u=e=>a(e)||r(e)||s(e)?CHAR_LF:t[e];function c(){return l=0,d(o)&&(n++,i=0),a(o)&&o++,o++,i++,t[o]}return{index:()=>o,line:()=>n,column:()=>i,peekOffset:()=>l,charAt:u,currentChar:()=>u(o),currentPeek:()=>u(o+l),next:c,peek:function(){return a(o+l)&&l++,l++,t[o+l]},reset:function(){o=0,n=1,i=1,l=0},resetPeek:function(e=0){l=e},skipToPeek:function(){const e=o+l;for(;e!==o;)c();l=0}}}const EOF=void 0,DOT=".",LITERAL_DELIMITER="'",ERROR_DOMAIN$3="tokenizer";function createTokenizer(e,t={}){const o=!1!==t.location,n=createScanner(e),i=()=>n.index(),l=()=>createPosition(n.line(),n.column(),n.index()),a=l(),r=i(),s={currentType:14,offset:r,startLoc:a,endLoc:a,lastType:14,lastOffset:r,lastStartLoc:a,lastEndLoc:a,braceNest:0,inLinked:!1,text:""},d=()=>s,{onError:u}=t;function c(e,t,n,...i){const l=d();if(t.column+=n,t.offset+=n,u){const n=createCompileError(e,o?createLocation(l.startLoc,t):null,{domain:ERROR_DOMAIN$3,args:i});u(n)}}function p(e,t,n){e.endLoc=l(),e.currentType=t;const i={type:t};return o&&(i.loc=createLocation(e.startLoc,e.endLoc)),null!=n&&(i.value=n),i}const m=e=>p(e,14);function h(e,t){return e.currentChar()===t?(e.next(),t):(c(CompileErrorCodes.EXPECTED_TOKEN,l(),0,t),"")}function f(e){let t="";for(;e.currentPeek()===CHAR_SP||e.currentPeek()===CHAR_LF;)t+=e.currentPeek(),e.peek();return t}function v(e){const t=f(e);return e.skipToPeek(),t}function g(e){if(e===EOF)return!1;const t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||95===t}function y(e,t){const{currentType:o}=t;if(2!==o)return!1;f(e);const n=function(e){if(e===EOF)return!1;const t=e.charCodeAt(0);return t>=48&&t<=57}("-"===e.currentPeek()?e.peek():e.currentPeek());return e.resetPeek(),n}function b(e){f(e);const t="|"===e.currentPeek();return e.resetPeek(),t}function w(e,t=!0){const o=(t=!1,n="",i=!1)=>{const l=e.currentPeek();return"{"===l?"%"!==n&&t:"@"!==l&&l?"%"===l?(e.peek(),o(t,"%",!0)):"|"===l?!("%"!==n&&!i)||!(n===CHAR_SP||n===CHAR_LF):l===CHAR_SP?(e.peek(),o(!0,CHAR_SP,i)):l!==CHAR_LF||(e.peek(),o(!0,CHAR_LF,i)):"%"===n||t},n=o();return t&&e.resetPeek(),n}function k(e,t){const o=e.currentChar();return o===EOF?EOF:t(o)?(e.next(),o):null}function _(e){const t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57||95===t||36===t}function C(e){return k(e,_)}function x(e){const t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57||95===t||36===t||45===t}function S(e){return k(e,x)}function V(e){const t=e.charCodeAt(0);return t>=48&&t<=57}function N(e){return k(e,V)}function E(e){const t=e.charCodeAt(0);return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function $(e){return k(e,E)}function D(e){let t="",o="";for(;t=N(e);)o+=t;return o}function B(e){let t="";for(;;){const o=e.currentChar();if("{"===o||"}"===o||"@"===o||"|"===o||!o)break;if("%"===o){if(!w(e))break;t+=o,e.next()}else if(o===CHAR_SP||o===CHAR_LF)if(w(e))t+=o,e.next();else{if(b(e))break;t+=o,e.next()}else t+=o,e.next()}return t}function T(e){return e!==LITERAL_DELIMITER&&e!==CHAR_LF}function O(e){const t=e.currentChar();switch(t){case"\\":case"'":return e.next(),`\\${t}`;case"u":return I(e,t,4);case"U":return I(e,t,6);default:return c(CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE,l(),0,t),""}}function I(e,t,o){h(e,t);let n="";for(let i=0;i<o;i++){const o=$(e);if(!o){c(CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE,l(),0,`\\${t}${n}${e.currentChar()}`);break}n+=o}return`\\${t}${n}`}function F(e){return"{"!==e&&"}"!==e&&e!==CHAR_SP&&e!==CHAR_LF}function L(e){v(e);const t=h(e,"|");return v(e),t}function P(e,t){let o=null;switch(e.currentChar()){case"{":return t.braceNest>=1&&c(CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER,l(),0),e.next(),o=p(t,2,"{"),v(e),t.braceNest++,o;case"}":return t.braceNest>0&&2===t.currentType&&c(CompileErrorCodes.EMPTY_PLACEHOLDER,l(),0),e.next(),o=p(t,3,"}"),t.braceNest--,t.braceNest>0&&v(e),t.inLinked&&0===t.braceNest&&(t.inLinked=!1),o;case"@":return t.braceNest>0&&c(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),o=M(e,t)||m(t),t.braceNest=0,o;default:{let n=!0,i=!0,a=!0;if(b(e))return t.braceNest>0&&c(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),o=p(t,1,L(e)),t.braceNest=0,t.inLinked=!1,o;if(t.braceNest>0&&(5===t.currentType||6===t.currentType||7===t.currentType))return c(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),t.braceNest=0,A(e,t);if(n=function(e,t){const{currentType:o}=t;if(2!==o)return!1;f(e);const n=g(e.currentPeek());return e.resetPeek(),n}(e,t))return o=p(t,5,function(e){v(e);let t="",o="";for(;t=S(e);)o+=t;return e.currentChar()===EOF&&c(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),o}(e)),v(e),o;if(i=y(e,t))return o=p(t,6,function(e){v(e);let t="";return"-"===e.currentChar()?(e.next(),t+=`-${D(e)}`):t+=D(e),e.currentChar()===EOF&&c(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),t}(e)),v(e),o;if(a=function(e,t){const{currentType:o}=t;if(2!==o)return!1;f(e);const n=e.currentPeek()===LITERAL_DELIMITER;return e.resetPeek(),n}(e,t))return o=p(t,7,function(e){v(e),h(e,"'");let t="",o="";for(;t=k(e,T);)o+="\\"===t?O(e):t;const n=e.currentChar();return n===CHAR_LF||n===EOF?(c(CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,l(),0),n===CHAR_LF&&(e.next(),h(e,"'")),o):(h(e,"'"),o)}(e)),v(e),o;if(!n&&!i&&!a)return o=p(t,13,function(e){v(e);let t="",o="";for(;t=k(e,F);)o+=t;return o}(e)),c(CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER,l(),0,o.value),v(e),o;break}}return o}function M(e,t){const{currentType:o}=t;let n=null;const i=e.currentChar();switch(8!==o&&9!==o&&12!==o&&10!==o||i!==CHAR_LF&&i!==CHAR_SP||c(CompileErrorCodes.INVALID_LINKED_FORMAT,l(),0),i){case"@":return e.next(),n=p(t,8,"@"),t.inLinked=!0,n;case".":return v(e),e.next(),p(t,9,".");case":":return v(e),e.next(),p(t,10,":");default:return b(e)?(n=p(t,1,L(e)),t.braceNest=0,t.inLinked=!1,n):function(e,t){const{currentType:o}=t;if(8!==o)return!1;f(e);const n="."===e.currentPeek();return e.resetPeek(),n}(e,t)||function(e,t){const{currentType:o}=t;if(8!==o&&12!==o)return!1;f(e);const n=":"===e.currentPeek();return e.resetPeek(),n}(e,t)?(v(e),M(e,t)):function(e,t){const{currentType:o}=t;if(9!==o)return!1;f(e);const n=g(e.currentPeek());return e.resetPeek(),n}(e,t)?(v(e),p(t,12,function(e){let t="",o="";for(;t=C(e);)o+=t;return o}(e))):function(e,t){const{currentType:o}=t;if(10!==o)return!1;const n=()=>{const t=e.currentPeek();return"{"===t?g(e.peek()):!("@"===t||"%"===t||"|"===t||":"===t||"."===t||t===CHAR_SP||!t)&&(t===CHAR_LF?(e.peek(),n()):w(e,!1))},i=n();return e.resetPeek(),i}(e,t)?(v(e),"{"===i?P(e,t)||n:p(t,11,function(e){const t=o=>{const n=e.currentChar();return"{"!==n&&"%"!==n&&"@"!==n&&"|"!==n&&"("!==n&&")"!==n&&n?n===CHAR_SP?o:(o+=n,e.next(),t(o)):o};return t("")}(e))):(8===o&&c(CompileErrorCodes.INVALID_LINKED_FORMAT,l(),0),t.braceNest=0,t.inLinked=!1,A(e,t))}}function A(e,t){let o={type:14};if(t.braceNest>0)return P(e,t)||m(t);if(t.inLinked)return M(e,t)||m(t);switch(e.currentChar()){case"{":return P(e,t)||m(t);case"}":return c(CompileErrorCodes.UNBALANCED_CLOSING_BRACE,l(),0),e.next(),p(t,3,"}");case"@":return M(e,t)||m(t);default:{if(b(e))return o=p(t,1,L(e)),t.braceNest=0,t.inLinked=!1,o;const{isModulo:n,hasSpace:i}=function(e){const t=f(e),o="%"===e.currentPeek()&&"{"===e.peek();return e.resetPeek(),{isModulo:o,hasSpace:t.length>0}}(e);if(n)return i?p(t,0,B(e)):p(t,4,function(e){v(e);const t=e.currentChar();return"%"!==t&&c(CompileErrorCodes.EXPECTED_TOKEN,l(),0,t),e.next(),"%"}(e));if(w(e))return p(t,0,B(e));break}}return o}return{nextToken:function(){const{currentType:e,offset:t,startLoc:o,endLoc:a}=s;return s.lastType=e,s.lastOffset=t,s.lastStartLoc=o,s.lastEndLoc=a,s.offset=i(),s.startLoc=l(),n.currentChar()===EOF?p(s,14):A(n,s)},currentOffset:i,currentPosition:l,context:d}}const ERROR_DOMAIN$2="parser",KNOWN_ESCAPES=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fromEscapeSequence(e,t,o){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const e=parseInt(t||o,16);return e<=55295||e>=57344?String.fromCodePoint(e):"�"}}}function createParser(e={}){const t=!1!==e.location,{onError:o,onWarn:n}=e;function i(e,n,i,l,...a){const r=e.currentPosition();if(r.offset+=l,r.column+=l,o){const e=createCompileError(n,t?createLocation(i,r):null,{domain:ERROR_DOMAIN$2,args:a});o(e)}}function l(e,o,i,l,...a){const r=e.currentPosition();if(r.offset+=l,r.column+=l,n){const e=t?createLocation(i,r):null;n(createCompileWarn(o,e,a))}}function a(e,o,n){const i={type:e};return t&&(i.start=o,i.end=o,i.loc={start:n,end:n}),i}function r(e,o,n,i){i&&(e.type=i),t&&(e.end=o,e.loc&&(e.loc.end=n))}function s(e,t){const o=e.context(),n=a(3,o.offset,o.startLoc);return n.value=t,r(n,e.currentOffset(),e.currentPosition()),n}function d(e,t){const o=e.context(),{lastOffset:n,lastStartLoc:i}=o,l=a(5,n,i);return l.index=parseInt(t,10),e.nextToken(),r(l,e.currentOffset(),e.currentPosition()),l}function u(e,t,o){const n=e.context(),{lastOffset:i,lastStartLoc:l}=n,s=a(4,i,l);return s.key=t,!0===o&&(s.modulo=!0),e.nextToken(),r(s,e.currentOffset(),e.currentPosition()),s}function c(e,t){const o=e.context(),{lastOffset:n,lastStartLoc:i}=o,l=a(9,n,i);return l.value=t.replace(KNOWN_ESCAPES,fromEscapeSequence),e.nextToken(),r(l,e.currentOffset(),e.currentPosition()),l}function p(e){const t=e.context(),o=a(6,t.offset,t.startLoc);let n=e.nextToken();if(9===n.type){const t=function(e){const t=e.nextToken(),o=e.context(),{lastOffset:n,lastStartLoc:l}=o,s=a(8,n,l);return 12!==t.type?(i(e,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER,o.lastStartLoc,0),s.value="",r(s,n,l),{nextConsumeToken:t,node:s}):(null==t.value&&i(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,o.lastStartLoc,0,getTokenCaption(t)),s.value=t.value||"",r(s,e.currentOffset(),e.currentPosition()),{node:s})}(e);o.modifier=t.node,n=t.nextConsumeToken||e.nextToken()}switch(10!==n.type&&i(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(n)),n=e.nextToken(),2===n.type&&(n=e.nextToken()),n.type){case 11:null==n.value&&i(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(n)),o.key=function(e,t){const o=e.context(),n=a(7,o.offset,o.startLoc);return n.value=t,r(n,e.currentOffset(),e.currentPosition()),n}(e,n.value||"");break;case 5:null==n.value&&i(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(n)),o.key=u(e,n.value||"");break;case 6:null==n.value&&i(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(n)),o.key=d(e,n.value||"");break;case 7:null==n.value&&i(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(n)),o.key=c(e,n.value||"");break;default:{i(e,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY,t.lastStartLoc,0);const l=e.context(),s=a(7,l.offset,l.startLoc);return s.value="",r(s,l.offset,l.startLoc),o.key=s,r(o,l.offset,l.startLoc),{nextConsumeToken:n,node:o}}}return r(o,e.currentOffset(),e.currentPosition()),{node:o}}function m(e){const t=e.context(),o=a(2,1===t.currentType?e.currentOffset():t.offset,1===t.currentType?t.endLoc:t.startLoc);o.items=[];let n=null,m=null;do{const a=n||e.nextToken();switch(n=null,a.type){case 0:null==a.value&&i(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(a)),o.items.push(s(e,a.value||""));break;case 6:null==a.value&&i(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(a)),o.items.push(d(e,a.value||""));break;case 4:m=!0;break;case 5:null==a.value&&i(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(a)),o.items.push(u(e,a.value||"",!!m)),m&&(l(e,CompileWarnCodes.USE_MODULO_SYNTAX,t.lastStartLoc,0,getTokenCaption(a)),m=null);break;case 7:null==a.value&&i(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(a)),o.items.push(c(e,a.value||""));break;case 8:{const t=p(e);o.items.push(t.node),n=t.nextConsumeToken||null;break}}}while(14!==t.currentType&&1!==t.currentType);return r(o,1===t.currentType?t.lastOffset:e.currentOffset(),1===t.currentType?t.lastEndLoc:e.currentPosition()),o}function h(e){const t=e.context(),{offset:o,startLoc:n}=t,l=m(e);return 14===t.currentType?l:function(e,t,o,n){const l=e.context();let s=0===n.items.length;const d=a(1,t,o);d.cases=[],d.cases.push(n);do{const t=m(e);s||(s=0===t.items.length),d.cases.push(t)}while(14!==l.currentType);return s&&i(e,CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL,o,0),r(d,e.currentOffset(),e.currentPosition()),d}(e,o,n,l)}return{parse:function(o){const n=createTokenizer(o,assign$1({},e)),l=n.context(),s=a(0,l.offset,l.startLoc);return t&&s.loc&&(s.loc.source=o),s.body=h(n),e.onCacheKey&&(s.cacheKey=e.onCacheKey(o)),14!==l.currentType&&i(n,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,l.lastStartLoc,0,o[l.offset]||""),r(s,n.currentOffset(),n.currentPosition()),s}}}function getTokenCaption(e){if(14===e.type)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"…":t}function createTransformer(e,t={}){const o={ast:e,helpers:new Set};return{context:()=>o,helper:e=>(o.helpers.add(e),e)}}function traverseNodes(e,t){for(let o=0;o<e.length;o++)traverseNode(e[o],t)}function traverseNode(e,t){switch(e.type){case 1:traverseNodes(e.cases,t),t.helper("plural");break;case 2:traverseNodes(e.items,t);break;case 6:traverseNode(e.key,t),t.helper("linked"),t.helper("type");break;case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named")}}function transform(e,t={}){const o=createTransformer(e);o.helper("normalize"),e.body&&traverseNode(e.body,o);const n=o.context();e.helpers=Array.from(n.helpers)}function optimize(e){const t=e.body;return 2===t.type?optimizeMessageNode(t):t.cases.forEach((e=>optimizeMessageNode(e))),e}function optimizeMessageNode(e){if(1===e.items.length){const t=e.items[0];3!==t.type&&9!==t.type||(e.static=t.value,delete t.value)}else{const t=[];for(let o=0;o<e.items.length;o++){const n=e.items[o];if(3!==n.type&&9!==n.type)break;if(null==n.value)break;t.push(n.value)}if(t.length===e.items.length){e.static=join(t);for(let t=0;t<e.items.length;t++){const o=e.items[t];3!==o.type&&9!==o.type||delete o.value}}}}const ERROR_DOMAIN$1="minifier";function minify(e){switch(e.t=e.type,e.type){case 0:{const t=e;minify(t.body),t.b=t.body,delete t.body;break}case 1:{const t=e,o=t.cases;for(let e=0;e<o.length;e++)minify(o[e]);t.c=o,delete t.cases;break}case 2:{const t=e,o=t.items;for(let e=0;e<o.length;e++)minify(o[e]);t.i=o,delete t.items,t.static&&(t.s=t.static,delete t.static);break}case 3:case 9:case 8:case 7:{const t=e;t.value&&(t.v=t.value,delete t.value);break}case 6:{const t=e;minify(t.key),t.k=t.key,delete t.key,t.modifier&&(minify(t.modifier),t.m=t.modifier,delete t.modifier);break}case 5:{const t=e;t.i=t.index,delete t.index;break}case 4:{const t=e;t.k=t.key,delete t.key;break}default:throw createCompileError(CompileErrorCodes.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:ERROR_DOMAIN$1,args:[e.type]})}delete e.type}const ERROR_DOMAIN="parser";function createCodeGenerator(e,t){const{sourceMap:o,filename:n,breakLineCode:i,needIndent:l}=t,a=!1!==t.location,r={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:i,needIndent:l,indentLevel:0};a&&e.loc&&(r.source=e.loc.source);function s(e,t){r.code+=e}function d(e,t=!0){const o=t?i:"";s(l?o+"  ".repeat(e):o)}return{context:()=>r,push:s,indent:function(e=!0){const t=++r.indentLevel;e&&d(t)},deindent:function(e=!0){const t=--r.indentLevel;e&&d(t)},newline:function(){d(r.indentLevel)},helper:e=>`_${e}`,needIndent:()=>r.needIndent}}function generateLinkedNode(e,t){const{helper:o}=e;e.push(`${o("linked")}(`),generateNode(e,t.key),t.modifier?(e.push(", "),generateNode(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function generateMessageNode(e,t){const{helper:o,needIndent:n}=e;e.push(`${o("normalize")}([`),e.indent(n());const i=t.items.length;for(let l=0;l<i&&(generateNode(e,t.items[l]),l!==i-1);l++)e.push(", ");e.deindent(n()),e.push("])")}function generatePluralNode(e,t){const{helper:o,needIndent:n}=e;if(t.cases.length>1){e.push(`${o("plural")}([`),e.indent(n());const i=t.cases.length;for(let o=0;o<i&&(generateNode(e,t.cases[o]),o!==i-1);o++)e.push(", ");e.deindent(n()),e.push("])")}}function generateResource(e,t){t.body?generateNode(e,t.body):e.push("null")}function generateNode(e,t){const{helper:o}=e;switch(t.type){case 0:generateResource(e,t);break;case 1:generatePluralNode(e,t);break;case 2:generateMessageNode(e,t);break;case 6:generateLinkedNode(e,t);break;case 8:case 7:case 9:case 3:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${o("interpolate")}(${o("list")}(${t.index}))`,t);break;case 4:e.push(`${o("interpolate")}(${o("named")}(${JSON.stringify(t.key)}))`,t);break;default:throw createCompileError(CompileErrorCodes.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:ERROR_DOMAIN,args:[t.type]})}}const generate=(e,t={})=>{const o=isString$2(t.mode)?t.mode:"normal",n=isString$2(t.filename)?t.filename:"message.intl",i=!!t.sourceMap,l=null!=t.breakLineCode?t.breakLineCode:"arrow"===o?";":"\n",a=t.needIndent?t.needIndent:"arrow"!==o,r=e.helpers||[],s=createCodeGenerator(e,{mode:o,filename:n,sourceMap:i,breakLineCode:l,needIndent:a});s.push("normal"===o?"function __msg__ (ctx) {":"(ctx) => {"),s.indent(a),r.length>0&&(s.push(`const { ${join(r.map((e=>`${e}: _${e}`)),", ")} } = ctx`),s.newline()),s.push("return "),generateNode(s,e),s.deindent(a),s.push("}"),delete e.helpers;const{code:d,map:u}=s.context();return{ast:e,code:d,map:u?u.toJSON():void 0}};function baseCompile$1(e,t={}){const o=assign$1({},t),n=!!o.jit,i=!!o.minify,l=null==o.optimize||o.optimize,a=createParser(o).parse(e);return n?(l&&optimize(a),i&&minify(a),{ast:a,code:""}):(transform(a,o),generate(a,o))}
/*!
    * core-base v9.13.1
    * (c) 2024 kazuya kawaguchi
    * Released under the MIT License.
    */function initFeatureFlags$1(){"boolean"!=typeof __INTLIFY_PROD_DEVTOOLS__&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1),"boolean"!=typeof __INTLIFY_JIT_COMPILATION__&&(getGlobalThis().__INTLIFY_JIT_COMPILATION__=!1),"boolean"!=typeof __INTLIFY_DROP_MESSAGE_COMPILER__&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const pathStateMachine=[];pathStateMachine[0]={w:[0],i:[3,0],"[":[4],o:[7]},pathStateMachine[1]={w:[1],".":[2],"[":[4],o:[7]},pathStateMachine[2]={w:[2],i:[3,0],0:[3,0]},pathStateMachine[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]},pathStateMachine[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]},pathStateMachine[5]={"'":[4,0],o:8,l:[5,0]},pathStateMachine[6]={'"':[4,0],o:8,l:[6,0]};const literalValueRE=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function isLiteral(e){return literalValueRE.test(e)}function stripQuotes(e){const t=e.charCodeAt(0);return t!==e.charCodeAt(e.length-1)||34!==t&&39!==t?e:e.slice(1,-1)}function getPathCharType(e){if(null==e)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function formatSubPath(e){const t=e.trim();return("0"!==e.charAt(0)||!isNaN(parseInt(e)))&&(isLiteral(t)?stripQuotes(t):"*"+t)}function parse(e){const t=[];let o,n,i,l,a,r,s,d=-1,u=0,c=0;const p=[];function m(){const t=e[d+1];if(5===u&&"'"===t||6===u&&'"'===t)return d++,i="\\"+t,p[0](),!0}for(p[0]=()=>{void 0===n?n=i:n+=i},p[1]=()=>{void 0!==n&&(t.push(n),n=void 0)},p[2]=()=>{p[0](),c++},p[3]=()=>{if(c>0)c--,u=4,p[0]();else{if(c=0,void 0===n)return!1;if(n=formatSubPath(n),!1===n)return!1;p[1]()}};null!==u;)if(d++,o=e[d],"\\"!==o||!m()){if(l=getPathCharType(o),s=pathStateMachine[u],a=s[l]||s.l||8,8===a)return;if(u=a[0],void 0!==a[1]&&(r=p[a[1]],r&&(i=o,!1===r())))return;if(7===u)return t}}const cache=new Map;function resolveWithKeyValue(e,t){return isObject$4(e)?e[t]:null}function resolveValue(e,t){if(!isObject$4(e))return null;let o=cache.get(t);if(o||(o=parse(t),o&&cache.set(t,o)),!o)return null;const n=o.length;let i=e,l=0;for(;l<n;){const e=i[o[l]];if(void 0===e)return null;if(isFunction$3(i))return null;i=e,l++}return i}const DEFAULT_MODIFIER=e=>e,DEFAULT_MESSAGE=e=>"",DEFAULT_MESSAGE_DATA_TYPE="text",DEFAULT_NORMALIZE=e=>0===e.length?"":join$1(e),DEFAULT_INTERPOLATE=toDisplayString;function pluralDefault(e,t){return e=Math.abs(e),2===t?e?e>1?1:0:1:e?Math.min(e,2):0}function getPluralIndex(e){const t=isNumber$2(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(isNumber$2(e.named.count)||isNumber$2(e.named.n))?isNumber$2(e.named.count)?e.named.count:isNumber$2(e.named.n)?e.named.n:t:t}function normalizeNamed(e,t){t.count||(t.count=e),t.n||(t.n=e)}function createMessageContext(e={}){const t=e.locale,o=getPluralIndex(e),n=isObject$4(e.pluralRules)&&isString$3(t)&&isFunction$3(e.pluralRules[t])?e.pluralRules[t]:pluralDefault,i=isObject$4(e.pluralRules)&&isString$3(t)&&isFunction$3(e.pluralRules[t])?pluralDefault:void 0,l=e.list||[],a=e.named||{};isNumber$2(e.pluralIndex)&&normalizeNamed(o,a);function r(t){const o=isFunction$3(e.messages)?e.messages(t):!!isObject$4(e.messages)&&e.messages[t];return o||(e.parent?e.parent.message(t):DEFAULT_MESSAGE)}const s=isPlainObject$2(e.processor)&&isFunction$3(e.processor.normalize)?e.processor.normalize:DEFAULT_NORMALIZE,d=isPlainObject$2(e.processor)&&isFunction$3(e.processor.interpolate)?e.processor.interpolate:DEFAULT_INTERPOLATE,u={list:e=>l[e],named:e=>a[e],plural:e=>e[n(o,e.length,i)],linked:(t,...o)=>{const[n,i]=o;let l="text",a="";1===o.length?isObject$4(n)?(a=n.modifier||a,l=n.type||l):isString$3(n)&&(a=n||a):2===o.length&&(isString$3(n)&&(a=n||a),isString$3(i)&&(l=i||l));const s=r(t)(u),d="vnode"===l&&isArray$1(s)&&a?s[0]:s;return a?(c=a,e.modifiers?e.modifiers[c]:DEFAULT_MODIFIER)(d,l):d;var c},message:r,type:isPlainObject$2(e.processor)&&isString$3(e.processor.type)?e.processor.type:DEFAULT_MESSAGE_DATA_TYPE,interpolate:d,normalize:s,values:assign$2({},l,a)};return u}let devtools=null;function setDevToolsHook(e){devtools=e}function initI18nDevTools(e,t,o){devtools&&devtools.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:t,meta:o})}const translateDevTools=createDevToolsHook("function:translate");function createDevToolsHook(e){return t=>devtools&&devtools.emit(e,t)}const code$1$1=CompileWarnCodes.__EXTEND_POINT__,inc$1$1=incrementer(code$1$1),CoreWarnCodes={NOT_FOUND_KEY:code$1$1,FALLBACK_TO_TRANSLATE:inc$1$1(),CANNOT_FORMAT_NUMBER:inc$1$1(),FALLBACK_TO_NUMBER_FORMAT:inc$1$1(),CANNOT_FORMAT_DATE:inc$1$1(),FALLBACK_TO_DATE_FORMAT:inc$1$1(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:inc$1$1(),__EXTEND_POINT__:inc$1$1()},code$2=CompileErrorCodes.__EXTEND_POINT__,inc$2=incrementer(code$2),CoreErrorCodes={INVALID_ARGUMENT:code$2,INVALID_DATE_ARGUMENT:inc$2(),INVALID_ISO_DATE_ARGUMENT:inc$2(),NOT_SUPPORT_NON_STRING_MESSAGE:inc$2(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:inc$2(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:inc$2(),NOT_SUPPORT_LOCALE_TYPE:inc$2(),__EXTEND_POINT__:inc$2()};function createCoreError(e){return createCompileError(e,null,void 0)}function getLocale(e,t){return null!=t.locale?resolveLocale(t.locale):resolveLocale(e.locale)}let _resolveLocale;function resolveLocale(e){if(isString$3(e))return e;if(isFunction$3(e)){if(e.resolvedOnce&&null!=_resolveLocale)return _resolveLocale;if("Function"===e.constructor.name){const t=e();if(isPromise$1(t))throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return _resolveLocale=t}throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_TYPE)}function fallbackWithSimple(e,t,o){return[...new Set([o,...isArray$1(t)?t:isObject$4(t)?Object.keys(t):isString$3(t)?[t]:[o]])]}function fallbackWithLocaleChain(e,t,o){const n=isString$3(o)?o:DEFAULT_LOCALE,i=e;i.__localeChainCache||(i.__localeChainCache=new Map);let l=i.__localeChainCache.get(n);if(!l){l=[];let e=[o];for(;isArray$1(e);)e=appendBlockToChain(l,e,t);const a=isArray$1(t)||!isPlainObject$2(t)?t:t.default?t.default:null;e=isString$3(a)?[a]:a,isArray$1(e)&&appendBlockToChain(l,e,!1),i.__localeChainCache.set(n,l)}return l}function appendBlockToChain(e,t,o){let n=!0;for(let i=0;i<t.length&&isBoolean(n);i++){const l=t[i];isString$3(l)&&(n=appendLocaleToChain(e,t[i],o))}return n}function appendLocaleToChain(e,t,o){let n;const i=t.split("-");do{n=appendItemToChain(e,i.join("-"),o),i.splice(-1,1)}while(i.length&&!0===n);return n}function appendItemToChain(e,t,o){let n=!1;if(!e.includes(t)&&(n=!0,t)){n="!"!==t[t.length-1];const i=t.replace(/!/g,"");e.push(i),(isArray$1(o)||isPlainObject$2(o))&&o[i]&&(n=o[i])}return n}const VERSION$2="9.13.1",NOT_REOSLVED=-1,DEFAULT_LOCALE="en-US",MISSING_RESOLVE_VALUE="",capitalize=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function getDefaultLinkedModifiers(){return{upper:(e,t)=>"text"===t&&isString$3(e)?e.toUpperCase():"vnode"===t&&isObject$4(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>"text"===t&&isString$3(e)?e.toLowerCase():"vnode"===t&&isObject$4(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>"text"===t&&isString$3(e)?capitalize(e):"vnode"===t&&isObject$4(e)&&"__v_isVNode"in e?capitalize(e.children):e}}let _compiler,_resolver,_fallbacker;function registerMessageCompiler(e){_compiler=e}function registerMessageResolver(e){_resolver=e}function registerLocaleFallbacker(e){_fallbacker=e}let _additionalMeta=null;const setAdditionalMeta=e=>{_additionalMeta=e},getAdditionalMeta=()=>_additionalMeta;let _fallbackContext=null;const setFallbackContext=e=>{_fallbackContext=e},getFallbackContext=()=>_fallbackContext;let _cid=0;function createCoreContext(e={}){const t=isFunction$3(e.onWarn)?e.onWarn:warn,o=isString$3(e.version)?e.version:VERSION$2,n=isString$3(e.locale)||isFunction$3(e.locale)?e.locale:DEFAULT_LOCALE,i=isFunction$3(n)?DEFAULT_LOCALE:n,l=isArray$1(e.fallbackLocale)||isPlainObject$2(e.fallbackLocale)||isString$3(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:i,a=isPlainObject$2(e.messages)?e.messages:{[i]:{}},r=isPlainObject$2(e.datetimeFormats)?e.datetimeFormats:{[i]:{}},s=isPlainObject$2(e.numberFormats)?e.numberFormats:{[i]:{}},d=assign$2({},e.modifiers||{},getDefaultLinkedModifiers()),u=e.pluralRules||{},c=isFunction$3(e.missing)?e.missing:null,p=!isBoolean(e.missingWarn)&&!isRegExp(e.missingWarn)||e.missingWarn,m=!isBoolean(e.fallbackWarn)&&!isRegExp(e.fallbackWarn)||e.fallbackWarn,h=!!e.fallbackFormat,f=!!e.unresolving,v=isFunction$3(e.postTranslation)?e.postTranslation:null,g=isPlainObject$2(e.processor)?e.processor:null,y=!isBoolean(e.warnHtmlMessage)||e.warnHtmlMessage,b=!!e.escapeParameter,w=isFunction$3(e.messageCompiler)?e.messageCompiler:_compiler,k=isFunction$3(e.messageResolver)?e.messageResolver:_resolver||resolveWithKeyValue,_=isFunction$3(e.localeFallbacker)?e.localeFallbacker:_fallbacker||fallbackWithSimple,C=isObject$4(e.fallbackContext)?e.fallbackContext:void 0,x=e,S=isObject$4(x.__datetimeFormatters)?x.__datetimeFormatters:new Map,V=isObject$4(x.__numberFormatters)?x.__numberFormatters:new Map,N=isObject$4(x.__meta)?x.__meta:{};_cid++;const E={version:o,cid:_cid,locale:n,fallbackLocale:l,messages:a,modifiers:d,pluralRules:u,missing:c,missingWarn:p,fallbackWarn:m,fallbackFormat:h,unresolving:f,postTranslation:v,processor:g,warnHtmlMessage:y,escapeParameter:b,messageCompiler:w,messageResolver:k,localeFallbacker:_,fallbackContext:C,onWarn:t,__meta:N};return E.datetimeFormats=r,E.numberFormats=s,E.__datetimeFormatters=S,E.__numberFormatters=V,__INTLIFY_PROD_DEVTOOLS__&&initI18nDevTools(E,o,N),E}function handleMissing(e,t,o,n,i){const{missing:l,onWarn:a}=e;if(null!==l){const n=l(e,o,t,i);return isString$3(n)?n:t}return t}function updateFallbackLocale(e,t,o){e.__localeChainCache=new Map,e.localeFallbacker(e,o,t)}function isAlmostSameLocale(e,t){return e!==t&&e.split("-")[0]===t.split("-")[0]}function isImplicitFallback(e,t){const o=t.indexOf(e);if(-1===o)return!1;for(let n=o+1;n<t.length;n++)if(isAlmostSameLocale(e,t[n]))return!0;return!1}function format(e){return t=>formatParts(t,e)}function formatParts(e,t){const o=t.b||t.body;if(1===(o.t||o.type)){const t=o,n=t.c||t.cases;return e.plural(n.reduce(((t,o)=>[...t,formatMessageParts(e,o)]),[]))}return formatMessageParts(e,o)}function formatMessageParts(e,t){const o=t.s||t.static;if(o)return"text"===e.type?o:e.normalize([o]);{const o=(t.i||t.items).reduce(((t,o)=>[...t,formatMessagePart(e,o)]),[]);return e.normalize(o)}}function formatMessagePart(e,t){const o=t.t||t.type;switch(o){case 3:{const e=t;return e.v||e.value}case 9:{const e=t;return e.v||e.value}case 4:{const o=t;return e.interpolate(e.named(o.k||o.key))}case 5:{const o=t;return e.interpolate(e.list(null!=o.i?o.i:o.index))}case 6:{const o=t,n=o.m||o.modifier;return e.linked(formatMessagePart(e,o.k||o.key),n?formatMessagePart(e,n):void 0,e.type)}case 7:{const e=t;return e.v||e.value}case 8:{const e=t;return e.v||e.value}default:throw new Error(`unhandled node type on format message part: ${o}`)}}const defaultOnCacheKey=e=>e;let compileCache=Object.create(null);const isMessageAST=e=>isObject$4(e)&&(0===e.t||0===e.type)&&("b"in e||"body"in e);function baseCompile(e,t={}){let o=!1;const n=t.onError||defaultOnError;return t.onError=e=>{o=!0,n(e)},{...baseCompile$1(e,t),detectError:o}}const compileToFunction=(e,t)=>{if(!isString$3(e))throw createCoreError(CoreErrorCodes.NOT_SUPPORT_NON_STRING_MESSAGE);{!isBoolean(t.warnHtmlMessage)||t.warnHtmlMessage;const o=(t.onCacheKey||defaultOnCacheKey)(e),n=compileCache[o];if(n)return n;const{code:i,detectError:l}=baseCompile(e,t),a=new Function(`return ${i}`)();return l?a:compileCache[o]=a}};function compile(e,t){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&isString$3(e)){!isBoolean(t.warnHtmlMessage)||t.warnHtmlMessage;const o=(t.onCacheKey||defaultOnCacheKey)(e),n=compileCache[o];if(n)return n;const{ast:i,detectError:l}=baseCompile(e,{...t,location:!1,jit:!0}),a=format(i);return l?a:compileCache[o]=a}{const t=e.cacheKey;if(t){const o=compileCache[t];return o||(compileCache[t]=format(e))}return format(e)}}const NOOP_MESSAGE_FUNCTION=()=>"",isMessageFunction=e=>isFunction$3(e);function translate(e,...t){const{fallbackFormat:o,postTranslation:n,unresolving:i,messageCompiler:l,fallbackLocale:a,messages:r}=e,[s,d]=parseTranslateArgs(...t),u=isBoolean(d.missingWarn)?d.missingWarn:e.missingWarn,c=isBoolean(d.fallbackWarn)?d.fallbackWarn:e.fallbackWarn,p=isBoolean(d.escapeParameter)?d.escapeParameter:e.escapeParameter,m=!!d.resolvedMessage,h=isString$3(d.default)||isBoolean(d.default)?isBoolean(d.default)?l?s:()=>s:d.default:o?l?s:()=>s:"",f=o||""!==h,v=getLocale(e,d);p&&escapeParams(d);let[g,y,b]=m?[s,v,r[v]||{}]:resolveMessageFormat(e,s,v,a,c,u),w=g,k=s;if(m||isString$3(w)||isMessageAST(w)||isMessageFunction(w)||f&&(w=h,k=w),!(m||(isString$3(w)||isMessageAST(w)||isMessageFunction(w))&&isString$3(y)))return i?NOT_REOSLVED:s;let _=!1;const C=isMessageFunction(w)?w:compileMessageFormat(e,s,y,w,k,(()=>{_=!0}));if(_)return w;const x=evaluateMessage(e,C,createMessageContext(getMessageContextOptions(e,y,b,d))),S=n?n(x,s):x;if(__INTLIFY_PROD_DEVTOOLS__){const t={timestamp:Date.now(),key:isString$3(s)?s:isMessageFunction(w)?w.key:"",locale:y||(isMessageFunction(w)?w.locale:""),format:isString$3(w)?w:isMessageFunction(w)?w.source:"",message:S};t.meta=assign$2({},e.__meta,getAdditionalMeta()||{}),translateDevTools(t)}return S}function escapeParams(e){isArray$1(e.list)?e.list=e.list.map((e=>isString$3(e)?escapeHtml(e):e)):isObject$4(e.named)&&Object.keys(e.named).forEach((t=>{isString$3(e.named[t])&&(e.named[t]=escapeHtml(e.named[t]))}))}function resolveMessageFormat(e,t,o,n,i,l){const{messages:a,onWarn:r,messageResolver:s,localeFallbacker:d}=e,u=d(e,n,o);let c,p={},m=null;for(let h=0;h<u.length&&(c=u[h],p=a[c]||{},null===(m=s(p,t))&&(m=p[t]),!(isString$3(m)||isMessageAST(m)||isMessageFunction(m)));h++)if(!isImplicitFallback(c,u)){const o=handleMissing(e,t,c,l,"translate");o!==t&&(m=o)}return[m,c,p]}function compileMessageFormat(e,t,o,n,i,l){const{messageCompiler:a,warnHtmlMessage:r}=e;if(isMessageFunction(n)){const e=n;return e.locale=e.locale||o,e.key=e.key||t,e}if(null==a){const e=()=>n;return e.locale=o,e.key=t,e}const s=a(n,getCompileContext(e,o,i,n,r,l));return s.locale=o,s.key=t,s.source=n,s}function evaluateMessage(e,t,o){return t(o)}function parseTranslateArgs(...e){const[t,o,n]=e,i={};if(!(isString$3(t)||isNumber$2(t)||isMessageFunction(t)||isMessageAST(t)))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const l=isNumber$2(t)?String(t):(isMessageFunction(t),t);return isNumber$2(o)?i.plural=o:isString$3(o)?i.default=o:isPlainObject$2(o)&&!isEmptyObject(o)?i.named=o:isArray$1(o)&&(i.list=o),isNumber$2(n)?i.plural=n:isString$3(n)?i.default=n:isPlainObject$2(n)&&assign$2(i,n),[l,i]}function getCompileContext(e,t,o,n,i,l){return{locale:t,key:o,warnHtmlMessage:i,onError:e=>{throw l&&l(e),e},onCacheKey:e=>generateFormatCacheKey(t,o,e)}}function getMessageContextOptions(e,t,o,n){const{modifiers:i,pluralRules:l,messageResolver:a,fallbackLocale:r,fallbackWarn:s,missingWarn:d,fallbackContext:u}=e,c={locale:t,modifiers:i,pluralRules:l,messages:n=>{let i=a(o,n);if(null==i&&u){const[,,e]=resolveMessageFormat(u,n,t,r,s,d);i=a(e,n)}if(isString$3(i)||isMessageAST(i)){let o=!1;const l=compileMessageFormat(e,n,t,i,n,(()=>{o=!0}));return o?NOOP_MESSAGE_FUNCTION:l}return isMessageFunction(i)?i:NOOP_MESSAGE_FUNCTION}};return e.processor&&(c.processor=e.processor),n.list&&(c.list=n.list),n.named&&(c.named=n.named),isNumber$2(n.plural)&&(c.pluralIndex=n.plural),c}function datetime(e,...t){const{datetimeFormats:o,unresolving:n,fallbackLocale:i,onWarn:l,localeFallbacker:a}=e,{__datetimeFormatters:r}=e,[s,d,u,c]=parseDateTimeArgs(...t),p=isBoolean(u.missingWarn)?u.missingWarn:e.missingWarn;isBoolean(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn;const m=!!u.part,h=getLocale(e,u),f=a(e,i,h);if(!isString$3(s)||""===s)return new Intl.DateTimeFormat(h,c).format(d);let v,g={},y=null;for(let k=0;k<f.length&&(v=f[k],g=o[v]||{},y=g[s],!isPlainObject$2(y));k++)handleMissing(e,s,v,p,"datetime format");if(!isPlainObject$2(y)||!isString$3(v))return n?NOT_REOSLVED:s;let b=`${v}__${s}`;isEmptyObject(c)||(b=`${b}__${JSON.stringify(c)}`);let w=r.get(b);return w||(w=new Intl.DateTimeFormat(v,assign$2({},y,c)),r.set(b,w)),m?w.formatToParts(d):w.format(d)}const DATETIME_FORMAT_OPTIONS_KEYS=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function parseDateTimeArgs(...e){const[t,o,n,i]=e,l={};let a,r={};if(isString$3(t)){const e=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!e)throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT);const o=e[3]?e[3].trim().startsWith("T")?`${e[1].trim()}${e[3].trim()}`:`${e[1].trim()}T${e[3].trim()}`:e[1].trim();a=new Date(o);try{a.toISOString()}catch(s){throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT)}}else if(isDate$1(t)){if(isNaN(t.getTime()))throw createCoreError(CoreErrorCodes.INVALID_DATE_ARGUMENT);a=t}else{if(!isNumber$2(t))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);a=t}return isString$3(o)?l.key=o:isPlainObject$2(o)&&Object.keys(o).forEach((e=>{DATETIME_FORMAT_OPTIONS_KEYS.includes(e)?r[e]=o[e]:l[e]=o[e]})),isString$3(n)?l.locale=n:isPlainObject$2(n)&&(r=n),isPlainObject$2(i)&&(r=i),[l.key||"",a,l,r]}function clearDateTimeFormat(e,t,o){const n=e;for(const i in o){const e=`${t}__${i}`;n.__datetimeFormatters.has(e)&&n.__datetimeFormatters.delete(e)}}function number(e,...t){const{numberFormats:o,unresolving:n,fallbackLocale:i,onWarn:l,localeFallbacker:a}=e,{__numberFormatters:r}=e,[s,d,u,c]=parseNumberArgs(...t),p=isBoolean(u.missingWarn)?u.missingWarn:e.missingWarn;isBoolean(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn;const m=!!u.part,h=getLocale(e,u),f=a(e,i,h);if(!isString$3(s)||""===s)return new Intl.NumberFormat(h,c).format(d);let v,g={},y=null;for(let k=0;k<f.length&&(v=f[k],g=o[v]||{},y=g[s],!isPlainObject$2(y));k++)handleMissing(e,s,v,p,"number format");if(!isPlainObject$2(y)||!isString$3(v))return n?NOT_REOSLVED:s;let b=`${v}__${s}`;isEmptyObject(c)||(b=`${b}__${JSON.stringify(c)}`);let w=r.get(b);return w||(w=new Intl.NumberFormat(v,assign$2({},y,c)),r.set(b,w)),m?w.formatToParts(d):w.format(d)}const NUMBER_FORMAT_OPTIONS_KEYS=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function parseNumberArgs(...e){const[t,o,n,i]=e,l={};let a={};if(!isNumber$2(t))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const r=t;return isString$3(o)?l.key=o:isPlainObject$2(o)&&Object.keys(o).forEach((e=>{NUMBER_FORMAT_OPTIONS_KEYS.includes(e)?a[e]=o[e]:l[e]=o[e]})),isString$3(n)?l.locale=n:isPlainObject$2(n)&&(a=n),isPlainObject$2(i)&&(a=i),[l.key||"",r,l,a]}function clearNumberFormat(e,t,o){const n=e;for(const i in o){const e=`${t}__${i}`;n.__numberFormatters.has(e)&&n.__numberFormatters.delete(e)}}initFeatureFlags$1();
/*!
    * vue-i18n v9.13.1
    * (c) 2024 kazuya kawaguchi
    * Released under the MIT License.
    */
const VERSION$1="9.13.1";function initFeatureFlags(){"boolean"!=typeof __VUE_I18N_FULL_INSTALL__&&(getGlobalThis().__VUE_I18N_FULL_INSTALL__=!0),"boolean"!=typeof __VUE_I18N_LEGACY_API__&&(getGlobalThis().__VUE_I18N_LEGACY_API__=!0),"boolean"!=typeof __INTLIFY_JIT_COMPILATION__&&(getGlobalThis().__INTLIFY_JIT_COMPILATION__=!1),"boolean"!=typeof __INTLIFY_DROP_MESSAGE_COMPILER__&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),"boolean"!=typeof __INTLIFY_PROD_DEVTOOLS__&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1)}const code$1=CoreWarnCodes.__EXTEND_POINT__,inc$1=incrementer(code$1);inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1();const code=CoreErrorCodes.__EXTEND_POINT__,inc=incrementer(code),I18nErrorCodes={UNEXPECTED_RETURN_TYPE:code,INVALID_ARGUMENT:inc(),MUST_BE_CALL_SETUP_TOP:inc(),NOT_INSTALLED:inc(),NOT_AVAILABLE_IN_LEGACY_MODE:inc(),REQUIRED_VALUE:inc(),INVALID_VALUE:inc(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:inc(),NOT_INSTALLED_WITH_PROVIDE:inc(),UNEXPECTED_ERROR:inc(),NOT_COMPATIBLE_LEGACY_VUE_I18N:inc(),BRIDGE_SUPPORT_VUE_2_ONLY:inc(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:inc(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:inc(),__EXTEND_POINT__:inc()};function createI18nError(e,...t){return createCompileError(e,null,void 0)}const TranslateVNodeSymbol=makeSymbol("__translateVNode"),DatetimePartsSymbol=makeSymbol("__datetimeParts"),NumberPartsSymbol=makeSymbol("__numberParts"),SetPluralRulesSymbol=makeSymbol("__setPluralRules");makeSymbol("__intlifyMeta");const InejctWithOptionSymbol=makeSymbol("__injectWithOption"),DisposeSymbol=makeSymbol("__dispose");function handleFlatJson(e){if(!isObject$4(e))return e;for(const t in e)if(hasOwn(e,t))if(t.includes(".")){const o=t.split("."),n=o.length-1;let i=e,l=!1;for(let e=0;e<n;e++){if(o[e]in i||(i[o[e]]={}),!isObject$4(i[o[e]])){l=!0;break}i=i[o[e]]}l||(i[o[n]]=e[t],delete e[t]),isObject$4(i[o[n]])&&handleFlatJson(i[o[n]])}else isObject$4(e[t])&&handleFlatJson(e[t]);return e}function getLocaleMessages(e,t){const{messages:o,__i18n:n,messageResolver:i,flatJson:l}=t,a=isPlainObject$2(o)?o:isArray$1(n)?{}:{[e]:{}};if(isArray$1(n)&&n.forEach((e=>{if("locale"in e&&"resource"in e){const{locale:t,resource:o}=e;t?(a[t]=a[t]||{},deepCopy(o,a[t])):deepCopy(o,a)}else isString$3(e)&&deepCopy(JSON.parse(e),a)})),null==i&&l)for(const r in a)hasOwn(a,r)&&handleFlatJson(a[r]);return a}function getComponentOptions(e){return e.type}function adjustI18nResources(e,t,o){let n=isObject$4(t.messages)?t.messages:{};"__i18nGlobal"in o&&(n=getLocaleMessages(e.locale.value,{messages:n,__i18n:o.__i18nGlobal}));const i=Object.keys(n);if(i.length&&i.forEach((t=>{e.mergeLocaleMessage(t,n[t])})),isObject$4(t.datetimeFormats)){const o=Object.keys(t.datetimeFormats);o.length&&o.forEach((o=>{e.mergeDateTimeFormat(o,t.datetimeFormats[o])}))}if(isObject$4(t.numberFormats)){const o=Object.keys(t.numberFormats);o.length&&o.forEach((o=>{e.mergeNumberFormat(o,t.numberFormats[o])}))}}function createTextNode(e){return vue.createVNode(vue.Text,null,e,0)}const DEVTOOLS_META="__INTLIFY_META__",NOOP_RETURN_ARRAY=()=>[],NOOP_RETURN_FALSE=()=>!1;let composerID=0;function defineCoreMissingHandler(e){return(t,o,n,i)=>e(o,n,vue.getCurrentInstance()||void 0,i)}const getMetaInfo=()=>{const e=vue.getCurrentInstance();let t=null;return e&&(t=getComponentOptions(e)[DEVTOOLS_META])?{[DEVTOOLS_META]:t}:null};function createComposer(e={},t){const{__root:o,__injectWithOption:n}=e,i=void 0===o,l=e.flatJson,a=inBrowser$2?vue.ref:vue.shallowRef,r=!!e.translateExistCompatible;let s=!isBoolean(e.inheritLocale)||e.inheritLocale;const d=a(o&&s?o.locale.value:isString$3(e.locale)?e.locale:DEFAULT_LOCALE),u=a(o&&s?o.fallbackLocale.value:isString$3(e.fallbackLocale)||isArray$1(e.fallbackLocale)||isPlainObject$2(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:d.value),c=a(getLocaleMessages(d.value,e)),p=a(isPlainObject$2(e.datetimeFormats)?e.datetimeFormats:{[d.value]:{}}),m=a(isPlainObject$2(e.numberFormats)?e.numberFormats:{[d.value]:{}});let h=o?o.missingWarn:!isBoolean(e.missingWarn)&&!isRegExp(e.missingWarn)||e.missingWarn,f=o?o.fallbackWarn:!isBoolean(e.fallbackWarn)&&!isRegExp(e.fallbackWarn)||e.fallbackWarn,v=o?o.fallbackRoot:!isBoolean(e.fallbackRoot)||e.fallbackRoot,g=!!e.fallbackFormat,y=isFunction$3(e.missing)?e.missing:null,b=isFunction$3(e.missing)?defineCoreMissingHandler(e.missing):null,w=isFunction$3(e.postTranslation)?e.postTranslation:null,k=o?o.warnHtmlMessage:!isBoolean(e.warnHtmlMessage)||e.warnHtmlMessage,_=!!e.escapeParameter;const C=o?o.modifiers:isPlainObject$2(e.modifiers)?e.modifiers:{};let x,S=e.pluralRules||o&&o.pluralRules;x=(()=>{i&&setFallbackContext(null);const t={version:VERSION$1,locale:d.value,fallbackLocale:u.value,messages:c.value,modifiers:C,pluralRules:S,missing:null===b?void 0:b,missingWarn:h,fallbackWarn:f,fallbackFormat:g,unresolving:!0,postTranslation:null===w?void 0:w,warnHtmlMessage:k,escapeParameter:_,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};t.datetimeFormats=p.value,t.numberFormats=m.value,t.__datetimeFormatters=isPlainObject$2(x)?x.__datetimeFormatters:void 0,t.__numberFormatters=isPlainObject$2(x)?x.__numberFormatters:void 0;const o=createCoreContext(t);return i&&setFallbackContext(o),o})(),updateFallbackLocale(x,d.value,u.value);const V=vue.computed({get:()=>d.value,set:e=>{d.value=e,x.locale=d.value}}),N=vue.computed({get:()=>u.value,set:e=>{u.value=e,x.fallbackLocale=u.value,updateFallbackLocale(x,d.value,e)}}),E=vue.computed((()=>c.value)),$=vue.computed((()=>p.value)),D=vue.computed((()=>m.value));const B=(e,t,n,l,a,r)=>{let s;d.value,u.value,c.value,p.value,m.value;try{__INTLIFY_PROD_DEVTOOLS__&&setAdditionalMeta(getMetaInfo()),i||(x.fallbackContext=o?getFallbackContext():void 0),s=e(x)}finally{__INTLIFY_PROD_DEVTOOLS__&&setAdditionalMeta(null),i||(x.fallbackContext=void 0)}if("translate exists"!==n&&isNumber$2(s)&&s===NOT_REOSLVED||"translate exists"===n&&!s){const[e,n]=t();return o&&v?l(o):a(e)}if(r(s))return s;throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)};function T(...e){return B((t=>Reflect.apply(translate,null,[t,...e])),(()=>parseTranslateArgs(...e)),"translate",(t=>Reflect.apply(t.t,t,[...e])),(e=>e),(e=>isString$3(e)))}const O={normalize:function(e){return e.map((e=>isString$3(e)||isNumber$2(e)||isBoolean(e)?createTextNode(String(e)):e))},interpolate:e=>e,type:"vnode"};function I(e){return c.value[e]||{}}composerID++,o&&inBrowser$2&&(vue.watch(o.locale,(e=>{s&&(d.value=e,x.locale=e,updateFallbackLocale(x,d.value,u.value))})),vue.watch(o.fallbackLocale,(e=>{s&&(u.value=e,x.fallbackLocale=e,updateFallbackLocale(x,d.value,u.value))})));const F={id:composerID,locale:V,fallbackLocale:N,get inheritLocale(){return s},set inheritLocale(e){s=e,e&&o&&(d.value=o.locale.value,u.value=o.fallbackLocale.value,updateFallbackLocale(x,d.value,u.value))},get availableLocales(){return Object.keys(c.value).sort()},messages:E,get modifiers(){return C},get pluralRules(){return S||{}},get isGlobal(){return i},get missingWarn(){return h},set missingWarn(e){h=e,x.missingWarn=h},get fallbackWarn(){return f},set fallbackWarn(e){f=e,x.fallbackWarn=f},get fallbackRoot(){return v},set fallbackRoot(e){v=e},get fallbackFormat(){return g},set fallbackFormat(e){g=e,x.fallbackFormat=g},get warnHtmlMessage(){return k},set warnHtmlMessage(e){k=e,x.warnHtmlMessage=e},get escapeParameter(){return _},set escapeParameter(e){_=e,x.escapeParameter=e},t:T,getLocaleMessage:I,setLocaleMessage:function(e,t){if(l){const o={[e]:t};for(const e in o)hasOwn(o,e)&&handleFlatJson(o[e]);t=o[e]}c.value[e]=t,x.messages=c.value},mergeLocaleMessage:function(e,t){c.value[e]=c.value[e]||{};const o={[e]:t};if(l)for(const n in o)hasOwn(o,n)&&handleFlatJson(o[n]);deepCopy(t=o[e],c.value[e]),x.messages=c.value},getPostTranslationHandler:function(){return isFunction$3(w)?w:null},setPostTranslationHandler:function(e){w=e,x.postTranslation=e},getMissingHandler:function(){return y},setMissingHandler:function(e){null!==e&&(b=defineCoreMissingHandler(e)),y=e,x.missing=b},[SetPluralRulesSymbol]:function(e){S=e,x.pluralRules=S}};return F.datetimeFormats=$,F.numberFormats=D,F.rt=function(...e){const[t,o,n]=e;if(n&&!isObject$4(n))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return T(t,o,assign$2({resolvedMessage:!0},n||{}))},F.te=function(e,t){return B((()=>{if(!e)return!1;const o=I(isString$3(t)?t:d.value),n=x.messageResolver(o,e);return r?null!=n:isMessageAST(n)||isMessageFunction(n)||isString$3(n)}),(()=>[e]),"translate exists",(o=>Reflect.apply(o.te,o,[e,t])),NOOP_RETURN_FALSE,(e=>isBoolean(e)))},F.tm=function(e){const t=function(e){let t=null;const o=fallbackWithLocaleChain(x,u.value,d.value);for(let n=0;n<o.length;n++){const i=c.value[o[n]]||{},l=x.messageResolver(i,e);if(null!=l){t=l;break}}return t}(e);return null!=t?t:o&&o.tm(e)||{}},F.d=function(...e){return B((t=>Reflect.apply(datetime,null,[t,...e])),(()=>parseDateTimeArgs(...e)),"datetime format",(t=>Reflect.apply(t.d,t,[...e])),(()=>MISSING_RESOLVE_VALUE),(e=>isString$3(e)))},F.n=function(...e){return B((t=>Reflect.apply(number,null,[t,...e])),(()=>parseNumberArgs(...e)),"number format",(t=>Reflect.apply(t.n,t,[...e])),(()=>MISSING_RESOLVE_VALUE),(e=>isString$3(e)))},F.getDateTimeFormat=function(e){return p.value[e]||{}},F.setDateTimeFormat=function(e,t){p.value[e]=t,x.datetimeFormats=p.value,clearDateTimeFormat(x,e,t)},F.mergeDateTimeFormat=function(e,t){p.value[e]=assign$2(p.value[e]||{},t),x.datetimeFormats=p.value,clearDateTimeFormat(x,e,t)},F.getNumberFormat=function(e){return m.value[e]||{}},F.setNumberFormat=function(e,t){m.value[e]=t,x.numberFormats=m.value,clearNumberFormat(x,e,t)},F.mergeNumberFormat=function(e,t){m.value[e]=assign$2(m.value[e]||{},t),x.numberFormats=m.value,clearNumberFormat(x,e,t)},F[InejctWithOptionSymbol]=n,F[TranslateVNodeSymbol]=function(...e){return B((t=>{let o;const n=t;try{n.processor=O,o=Reflect.apply(translate,null,[n,...e])}finally{n.processor=null}return o}),(()=>parseTranslateArgs(...e)),"translate",(t=>t[TranslateVNodeSymbol](...e)),(e=>[createTextNode(e)]),(e=>isArray$1(e)))},F[DatetimePartsSymbol]=function(...e){return B((t=>Reflect.apply(datetime,null,[t,...e])),(()=>parseDateTimeArgs(...e)),"datetime format",(t=>t[DatetimePartsSymbol](...e)),NOOP_RETURN_ARRAY,(e=>isString$3(e)||isArray$1(e)))},F[NumberPartsSymbol]=function(...e){return B((t=>Reflect.apply(number,null,[t,...e])),(()=>parseNumberArgs(...e)),"number format",(t=>t[NumberPartsSymbol](...e)),NOOP_RETURN_ARRAY,(e=>isString$3(e)||isArray$1(e)))},F}function convertComposerOptions(e){const t=isString$3(e.locale)?e.locale:DEFAULT_LOCALE,o=isString$3(e.fallbackLocale)||isArray$1(e.fallbackLocale)||isPlainObject$2(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:t,n=isFunction$3(e.missing)?e.missing:void 0,i=!isBoolean(e.silentTranslationWarn)&&!isRegExp(e.silentTranslationWarn)||!e.silentTranslationWarn,l=!isBoolean(e.silentFallbackWarn)&&!isRegExp(e.silentFallbackWarn)||!e.silentFallbackWarn,a=!isBoolean(e.fallbackRoot)||e.fallbackRoot,r=!!e.formatFallbackMessages,s=isPlainObject$2(e.modifiers)?e.modifiers:{},d=e.pluralizationRules,u=isFunction$3(e.postTranslation)?e.postTranslation:void 0,c=!isString$3(e.warnHtmlInMessage)||"off"!==e.warnHtmlInMessage,p=!!e.escapeParameterHtml,m=!isBoolean(e.sync)||e.sync;let h=e.messages;if(isPlainObject$2(e.sharedMessages)){const t=e.sharedMessages;h=Object.keys(t).reduce(((e,o)=>{const n=e[o]||(e[o]={});return assign$2(n,t[o]),e}),h||{})}const{__i18n:f,__root:v,__injectWithOption:g}=e,y=e.datetimeFormats,b=e.numberFormats,w=e.flatJson,k=e.translateExistCompatible;return{locale:t,fallbackLocale:o,messages:h,flatJson:w,datetimeFormats:y,numberFormats:b,missing:n,missingWarn:i,fallbackWarn:l,fallbackRoot:a,fallbackFormat:r,modifiers:s,pluralRules:d,postTranslation:u,warnHtmlMessage:c,escapeParameter:p,messageResolver:e.messageResolver,inheritLocale:m,translateExistCompatible:k,__i18n:f,__root:v,__injectWithOption:g}}function createVueI18n(e={},t){{const t=createComposer(convertComposerOptions(e)),{__extender:o}=e,n={id:t.id,get locale(){return t.locale.value},set locale(e){t.locale.value=e},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(e){t.fallbackLocale.value=e},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get formatter(){return{interpolate:()=>[]}},set formatter(e){},get missing(){return t.getMissingHandler()},set missing(e){t.setMissingHandler(e)},get silentTranslationWarn(){return isBoolean(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(e){t.missingWarn=isBoolean(e)?!e:e},get silentFallbackWarn(){return isBoolean(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(e){t.fallbackWarn=isBoolean(e)?!e:e},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(e){t.fallbackFormat=e},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(e){t.setPostTranslationHandler(e)},get sync(){return t.inheritLocale},set sync(e){t.inheritLocale=e},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(e){t.warnHtmlMessage="off"!==e},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(e){t.escapeParameter=e},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(e){},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t(...e){const[o,n,i]=e,l={};let a=null,r=null;if(!isString$3(o))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const s=o;return isString$3(n)?l.locale=n:isArray$1(n)?a=n:isPlainObject$2(n)&&(r=n),isArray$1(i)?a=i:isPlainObject$2(i)&&(r=i),Reflect.apply(t.t,t,[s,a||r||{},l])},rt:(...e)=>Reflect.apply(t.rt,t,[...e]),tc(...e){const[o,n,i]=e,l={plural:1};let a=null,r=null;if(!isString$3(o))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const s=o;return isString$3(n)?l.locale=n:isNumber$2(n)?l.plural=n:isArray$1(n)?a=n:isPlainObject$2(n)&&(r=n),isString$3(i)?l.locale=i:isArray$1(i)?a=i:isPlainObject$2(i)&&(r=i),Reflect.apply(t.t,t,[s,a||r||{},l])},te:(e,o)=>t.te(e,o),tm:e=>t.tm(e),getLocaleMessage:e=>t.getLocaleMessage(e),setLocaleMessage(e,o){t.setLocaleMessage(e,o)},mergeLocaleMessage(e,o){t.mergeLocaleMessage(e,o)},d:(...e)=>Reflect.apply(t.d,t,[...e]),getDateTimeFormat:e=>t.getDateTimeFormat(e),setDateTimeFormat(e,o){t.setDateTimeFormat(e,o)},mergeDateTimeFormat(e,o){t.mergeDateTimeFormat(e,o)},n:(...e)=>Reflect.apply(t.n,t,[...e]),getNumberFormat:e=>t.getNumberFormat(e),setNumberFormat(e,o){t.setNumberFormat(e,o)},mergeNumberFormat(e,o){t.mergeNumberFormat(e,o)},getChoiceIndex:(e,t)=>-1};return n.__extender=o,n}}const baseFormatProps={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>"parent"===e||"global"===e,default:"parent"},i18n:{type:Object}};function getInterpolateArg({slots:e},t){if(1===t.length&&"default"===t[0]){return(e.default?e.default():[]).reduce(((e,t)=>[...e,...t.type===vue.Fragment?t.children:[t]]),[])}return t.reduce(((t,o)=>{const n=e[o];return n&&(t[o]=n()),t}),{})}function getFragmentableTag(e){return vue.Fragment}const TranslationImpl=vue.defineComponent({name:"i18n-t",props:assign$2({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>isNumber$2(e)||!isNaN(e)}},baseFormatProps),setup(e,t){const{slots:o,attrs:n}=t,i=e.i18n||useI18n({useScope:e.scope,__useComponent:!0});return()=>{const l=Object.keys(o).filter((e=>"_"!==e)),a={};e.locale&&(a.locale=e.locale),void 0!==e.plural&&(a.plural=isString$3(e.plural)?+e.plural:e.plural);const r=getInterpolateArg(t,l),s=i[TranslateVNodeSymbol](e.keypath,r,a),d=assign$2({},n),u=isString$3(e.tag)||isObject$4(e.tag)?e.tag:getFragmentableTag();return vue.h(u,d,s)}}}),Translation=TranslationImpl;function isVNode(e){return isArray$1(e)&&!isString$3(e[0])}function renderFormatter(e,t,o,n){const{slots:i,attrs:l}=t;return()=>{const t={part:!0};let a={};e.locale&&(t.locale=e.locale),isString$3(e.format)?t.key=e.format:isObject$4(e.format)&&(isString$3(e.format.key)&&(t.key=e.format.key),a=Object.keys(e.format).reduce(((t,n)=>o.includes(n)?assign$2({},t,{[n]:e.format[n]}):t),{}));const r=n(e.value,t,a);let s=[t.key];isArray$1(r)?s=r.map(((e,t)=>{const o=i[e.type],n=o?o({[e.type]:e.value,index:t,parts:r}):[e.value];return isVNode(n)&&(n[0].key=`${e.type}-${t}`),n})):isString$3(r)&&(s=[r]);const d=assign$2({},l),u=isString$3(e.tag)||isObject$4(e.tag)?e.tag:getFragmentableTag();return vue.h(u,d,s)}}const NumberFormatImpl=vue.defineComponent({name:"i18n-n",props:assign$2({value:{type:Number,required:!0},format:{type:[String,Object]}},baseFormatProps),setup(e,t){const o=e.i18n||useI18n({useScope:e.scope,__useComponent:!0});return renderFormatter(e,t,NUMBER_FORMAT_OPTIONS_KEYS,((...e)=>o[NumberPartsSymbol](...e)))}}),NumberFormat=NumberFormatImpl,DatetimeFormatImpl=vue.defineComponent({name:"i18n-d",props:assign$2({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},baseFormatProps),setup(e,t){const o=e.i18n||useI18n({useScope:e.scope,__useComponent:!0});return renderFormatter(e,t,DATETIME_FORMAT_OPTIONS_KEYS,((...e)=>o[DatetimePartsSymbol](...e)))}}),DatetimeFormat=DatetimeFormatImpl;function getComposer$2(e,t){const o=e;if("composition"===e.mode)return o.__getInstance(t)||e.global;{const n=o.__getInstance(t);return null!=n?n.__composer:e.global.__composer}}function vTDirective(e){const t=t=>{const{instance:o,modifiers:n,value:i}=t;if(!o||!o.$)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const l=getComposer$2(e,o.$),a=parseValue(i);return[Reflect.apply(l.t,l,[...makeParams(a)]),l]};return{created:(o,n)=>{const[i,l]=t(n);inBrowser$2&&e.global===l&&(o.__i18nWatcher=vue.watch(l.locale,(()=>{n.instance&&n.instance.$forceUpdate()}))),o.__composer=l,o.textContent=i},unmounted:e=>{inBrowser$2&&e.__i18nWatcher&&(e.__i18nWatcher(),e.__i18nWatcher=void 0,delete e.__i18nWatcher),e.__composer&&(e.__composer=void 0,delete e.__composer)},beforeUpdate:(e,{value:t})=>{if(e.__composer){const o=e.__composer,n=parseValue(t);e.textContent=Reflect.apply(o.t,o,[...makeParams(n)])}},getSSRProps:e=>{const[o]=t(e);return{textContent:o}}}}function parseValue(e){if(isString$3(e))return{path:e};if(isPlainObject$2(e)){if(!("path"in e))throw createI18nError(I18nErrorCodes.REQUIRED_VALUE,"path");return e}throw createI18nError(I18nErrorCodes.INVALID_VALUE)}function makeParams(e){const{path:t,locale:o,args:n,choice:i,plural:l}=e,a={},r=n||{};return isString$3(o)&&(a.locale=o),isNumber$2(i)&&(a.plural=i),isNumber$2(l)&&(a.plural=l),[t,r,a]}function apply(e,t,...o){const n=isPlainObject$2(o[0])?o[0]:{},i=!!n.useI18nComponentName;(!isBoolean(n.globalInstall)||n.globalInstall)&&([i?"i18n":Translation.name,"I18nT"].forEach((t=>e.component(t,Translation))),[NumberFormat.name,"I18nN"].forEach((t=>e.component(t,NumberFormat))),[DatetimeFormat.name,"I18nD"].forEach((t=>e.component(t,DatetimeFormat)))),e.directive("t",vTDirective(t))}function defineMixin(e,t,o){return{beforeCreate(){const n=vue.getCurrentInstance();if(!n)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const i=this.$options;if(i.i18n){const n=i.i18n;if(i.__i18n&&(n.__i18n=i.__i18n),n.__root=t,this===this.$root)this.$i18n=mergeToGlobal(e,n);else{n.__injectWithOption=!0,n.__extender=o.__vueI18nExtend,this.$i18n=createVueI18n(n);const e=this.$i18n;e.__extender&&(e.__disposer=e.__extender(this.$i18n))}}else if(i.__i18n)if(this===this.$root)this.$i18n=mergeToGlobal(e,i);else{this.$i18n=createVueI18n({__i18n:i.__i18n,__injectWithOption:!0,__extender:o.__vueI18nExtend,__root:t});const e=this.$i18n;e.__extender&&(e.__disposer=e.__extender(this.$i18n))}else this.$i18n=e;i.__i18nGlobal&&adjustI18nResources(t,i,i),this.$t=(...e)=>this.$i18n.t(...e),this.$rt=(...e)=>this.$i18n.rt(...e),this.$tc=(...e)=>this.$i18n.tc(...e),this.$te=(e,t)=>this.$i18n.te(e,t),this.$d=(...e)=>this.$i18n.d(...e),this.$n=(...e)=>this.$i18n.n(...e),this.$tm=e=>this.$i18n.tm(e),o.__setInstance(n,this.$i18n)},mounted(){},unmounted(){const e=vue.getCurrentInstance();if(!e)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const t=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,t.__disposer&&(t.__disposer(),delete t.__disposer,delete t.__extender),o.__deleteInstance(e),delete this.$i18n}}}function mergeToGlobal(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[SetPluralRulesSymbol](t.pluralizationRules||e.pluralizationRules);const o=getLocaleMessages(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(o).forEach((t=>e.mergeLocaleMessage(t,o[t]))),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach((o=>e.mergeDateTimeFormat(o,t.datetimeFormats[o]))),t.numberFormats&&Object.keys(t.numberFormats).forEach((o=>e.mergeNumberFormat(o,t.numberFormats[o]))),e}const I18nInjectionKey=makeSymbol("global-vue-i18n");function createI18n(e={},t){const o=__VUE_I18N_LEGACY_API__&&isBoolean(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,n=!isBoolean(e.globalInjection)||e.globalInjection,i=!__VUE_I18N_LEGACY_API__||!o||!!e.allowComposition,l=new Map,[a,r]=createGlobal(e,o),s=makeSymbol("");{const e={get mode(){return __VUE_I18N_LEGACY_API__&&o?"legacy":"composition"},get allowComposition(){return i},async install(t,...i){if(t.__VUE_I18N_SYMBOL__=s,t.provide(t.__VUE_I18N_SYMBOL__,e),isPlainObject$2(i[0])){const t=i[0];e.__composerExtend=t.__composerExtend,e.__vueI18nExtend=t.__vueI18nExtend}let l=null;!o&&n&&(l=injectGlobalFields(t,e.global)),__VUE_I18N_FULL_INSTALL__&&apply(t,e,...i),__VUE_I18N_LEGACY_API__&&o&&t.mixin(defineMixin(r,r.__composer,e));const a=t.unmount;t.unmount=()=>{l&&l(),e.dispose(),a()}},get global(){return r},dispose(){a.stop()},__instances:l,__getInstance:function(e){return l.get(e)||null},__setInstance:function(e,t){l.set(e,t)},__deleteInstance:function(e){l.delete(e)}};return e}}function useI18n(e={}){const t=vue.getCurrentInstance();if(null==t)throw createI18nError(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&null!=t.appContext.app&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(I18nErrorCodes.NOT_INSTALLED);const o=getI18nInstance(t),n=getGlobalComposer(o),i=getComponentOptions(t),l=getScope(e,i);if(__VUE_I18N_LEGACY_API__&&"legacy"===o.mode&&!e.__useComponent){if(!o.allowComposition)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_IN_LEGACY_MODE);return useI18nForLegacy(t,l,n,e)}if("global"===l)return adjustI18nResources(n,e,i),n;if("parent"===l){let i=getComposer(o,t,e.__useComponent);return null==i&&(i=n),i}const a=o;let r=a.__getInstance(t);if(null==r){const o=assign$2({},e);"__i18n"in i&&(o.__i18n=i.__i18n),n&&(o.__root=n),r=createComposer(o),a.__composerExtend&&(r[DisposeSymbol]=a.__composerExtend(r)),setupLifeCycle(a,t,r),a.__setInstance(t,r)}return r}function createGlobal(e,t,o){const n=vue.effectScope();{const o=__VUE_I18N_LEGACY_API__&&t?n.run((()=>createVueI18n(e))):n.run((()=>createComposer(e)));if(null==o)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);return[n,o]}}function getI18nInstance(e){{const t=vue.inject(e.isCE?I18nInjectionKey:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw createI18nError(e.isCE?I18nErrorCodes.NOT_INSTALLED_WITH_PROVIDE:I18nErrorCodes.UNEXPECTED_ERROR);return t}}function getScope(e,t){return isEmptyObject(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}function getGlobalComposer(e){return"composition"===e.mode?e.global:e.global.__composer}function getComposer(e,t,o=!1){let n=null;const i=t.root;let l=getParentComponentInstance(t,o);for(;null!=l;){const t=e;if("composition"===e.mode)n=t.__getInstance(l);else if(__VUE_I18N_LEGACY_API__){const e=t.__getInstance(l);null!=e&&(n=e.__composer,o&&n&&!n[InejctWithOptionSymbol]&&(n=null))}if(null!=n)break;if(i===l)break;l=l.parent}return n}function getParentComponentInstance(e,t=!1){return null==e?null:t&&e.vnode.ctx||e.parent}function setupLifeCycle(e,t,o){vue.onMounted((()=>{}),t),vue.onUnmounted((()=>{const n=o;e.__deleteInstance(t);const i=n[DisposeSymbol];i&&(i(),delete n[DisposeSymbol])}),t)}function useI18nForLegacy(e,t,o,n={}){const i="local"===t,l=vue.shallowRef(null);if(i&&e.proxy&&!e.proxy.$options.i18n&&!e.proxy.$options.__i18n)throw createI18nError(I18nErrorCodes.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const a=isBoolean(n.inheritLocale)?n.inheritLocale:!isString$3(n.locale),r=vue.ref(!i||a?o.locale.value:isString$3(n.locale)?n.locale:DEFAULT_LOCALE),s=vue.ref(!i||a?o.fallbackLocale.value:isString$3(n.fallbackLocale)||isArray$1(n.fallbackLocale)||isPlainObject$2(n.fallbackLocale)||!1===n.fallbackLocale?n.fallbackLocale:r.value),d=vue.ref(getLocaleMessages(r.value,n)),u=vue.ref(isPlainObject$2(n.datetimeFormats)?n.datetimeFormats:{[r.value]:{}}),c=vue.ref(isPlainObject$2(n.numberFormats)?n.numberFormats:{[r.value]:{}}),p=i?o.missingWarn:!isBoolean(n.missingWarn)&&!isRegExp(n.missingWarn)||n.missingWarn,m=i?o.fallbackWarn:!isBoolean(n.fallbackWarn)&&!isRegExp(n.fallbackWarn)||n.fallbackWarn,h=i?o.fallbackRoot:!isBoolean(n.fallbackRoot)||n.fallbackRoot,f=!!n.fallbackFormat,v=isFunction$3(n.missing)?n.missing:null,g=isFunction$3(n.postTranslation)?n.postTranslation:null,y=i?o.warnHtmlMessage:!isBoolean(n.warnHtmlMessage)||n.warnHtmlMessage,b=!!n.escapeParameter,w=i?o.modifiers:isPlainObject$2(n.modifiers)?n.modifiers:{},k=n.pluralRules||i&&o.pluralRules;function _(e){return r.value,s.value,d.value,u.value,c.value,e()}const C={get id(){return l.value?l.value.id:-1},locale:vue.computed({get:()=>l.value?l.value.locale.value:r.value,set:e=>{l.value&&(l.value.locale.value=e),r.value=e}}),fallbackLocale:vue.computed({get:()=>l.value?l.value.fallbackLocale.value:s.value,set:e=>{l.value&&(l.value.fallbackLocale.value=e),s.value=e}}),messages:vue.computed((()=>l.value?l.value.messages.value:d.value)),datetimeFormats:vue.computed((()=>u.value)),numberFormats:vue.computed((()=>c.value)),get inheritLocale(){return l.value?l.value.inheritLocale:a},set inheritLocale(e){l.value&&(l.value.inheritLocale=e)},get availableLocales(){return l.value?l.value.availableLocales:Object.keys(d.value)},get modifiers(){return l.value?l.value.modifiers:w},get pluralRules(){return l.value?l.value.pluralRules:k},get isGlobal(){return!!l.value&&l.value.isGlobal},get missingWarn(){return l.value?l.value.missingWarn:p},set missingWarn(e){l.value&&(l.value.missingWarn=e)},get fallbackWarn(){return l.value?l.value.fallbackWarn:m},set fallbackWarn(e){l.value&&(l.value.missingWarn=e)},get fallbackRoot(){return l.value?l.value.fallbackRoot:h},set fallbackRoot(e){l.value&&(l.value.fallbackRoot=e)},get fallbackFormat(){return l.value?l.value.fallbackFormat:f},set fallbackFormat(e){l.value&&(l.value.fallbackFormat=e)},get warnHtmlMessage(){return l.value?l.value.warnHtmlMessage:y},set warnHtmlMessage(e){l.value&&(l.value.warnHtmlMessage=e)},get escapeParameter(){return l.value?l.value.escapeParameter:b},set escapeParameter(e){l.value&&(l.value.escapeParameter=e)},t:function(...e){return l.value?_((()=>Reflect.apply(l.value.t,null,[...e]))):_((()=>""))},getPostTranslationHandler:function(){return l.value?l.value.getPostTranslationHandler():g},setPostTranslationHandler:function(e){l.value&&l.value.setPostTranslationHandler(e)},getMissingHandler:function(){return l.value?l.value.getMissingHandler():v},setMissingHandler:function(e){l.value&&l.value.setMissingHandler(e)},rt:function(...e){return l.value?Reflect.apply(l.value.rt,null,[...e]):""},d:function(...e){return l.value?_((()=>Reflect.apply(l.value.d,null,[...e]))):_((()=>""))},n:function(...e){return l.value?_((()=>Reflect.apply(l.value.n,null,[...e]))):_((()=>""))},tm:function(e){return l.value?l.value.tm(e):{}},te:function(e,t){return!!l.value&&l.value.te(e,t)},getLocaleMessage:function(e){return l.value?l.value.getLocaleMessage(e):{}},setLocaleMessage:function(e,t){l.value&&(l.value.setLocaleMessage(e,t),d.value[e]=t)},mergeLocaleMessage:function(e,t){l.value&&l.value.mergeLocaleMessage(e,t)},getDateTimeFormat:function(e){return l.value?l.value.getDateTimeFormat(e):{}},setDateTimeFormat:function(e,t){l.value&&(l.value.setDateTimeFormat(e,t),u.value[e]=t)},mergeDateTimeFormat:function(e,t){l.value&&l.value.mergeDateTimeFormat(e,t)},getNumberFormat:function(e){return l.value?l.value.getNumberFormat(e):{}},setNumberFormat:function(e,t){l.value&&(l.value.setNumberFormat(e,t),c.value[e]=t)},mergeNumberFormat:function(e,t){l.value&&l.value.mergeNumberFormat(e,t)}};return vue.onBeforeMount((()=>{if(null==e.proxy||null==e.proxy.$i18n)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const o=l.value=e.proxy.$i18n.__composer;"global"===t?(r.value=o.locale.value,s.value=o.fallbackLocale.value,d.value=o.messages.value,u.value=o.datetimeFormats.value,c.value=o.numberFormats.value):i&&function(e){e.locale.value=r.value,e.fallbackLocale.value=s.value,Object.keys(d.value).forEach((t=>{e.mergeLocaleMessage(t,d.value[t])})),Object.keys(u.value).forEach((t=>{e.mergeDateTimeFormat(t,u.value[t])})),Object.keys(c.value).forEach((t=>{e.mergeNumberFormat(t,c.value[t])})),e.escapeParameter=b,e.fallbackFormat=f,e.fallbackRoot=h,e.fallbackWarn=m,e.missingWarn=p,e.warnHtmlMessage=y}(o)})),C}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t","rt","d","n","tm","te"];function injectGlobalFields(e,t){const o=Object.create(null);globalExportProps.forEach((e=>{const n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const i=vue.isRef(n.value)?{get:()=>n.value.value,set(e){n.value.value=e}}:{get:()=>n.get&&n.get()};Object.defineProperty(o,e,i)})),e.config.globalProperties.$i18n=o,globalExportMethods.forEach((o=>{const n=Object.getOwnPropertyDescriptor(t,o);if(!n||!n.value)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${o}`,n)}));return()=>{delete e.config.globalProperties.$i18n,globalExportMethods.forEach((t=>{delete e.config.globalProperties[`$${t}`]}))}}if(initFeatureFlags(),__INTLIFY_JIT_COMPILATION__?registerMessageCompiler(compile):registerMessageCompiler(compileToFunction),registerMessageResolver(resolveValue),registerLocaleFallbacker(fallbackWithLocaleChain),__INTLIFY_PROD_DEVTOOLS__){const e=getGlobalThis();e.__INTLIFY__=!0,setDevToolsHook(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}
/**!
   * Sortable 1.14.0
   * @author	RubaXa   <trash@rubaxa.org>
   * @author	owenm    <owen23355@gmail.com>
   * @license MIT
   */function ownKeys$1(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function _objectSpread2$1(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$1(Object(o),!0).forEach((function(t){_defineProperty$1(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys$1(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function _typeof$1(e){return(_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty$1(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var o,n,i={},l=Object.keys(e);for(n=0;n<l.length;n++)o=l[n],t.indexOf(o)>=0||(i[o]=e[o]);return i}function _objectWithoutProperties(e,t){if(null==e)return{};var o,n,i=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)o=l[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var version$1="1.14.0";function userAgent(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(e,t,o){e.addEventListener(t,o,!IE11OrLess&&captureMode)}function off(e,t,o){e.removeEventListener(t,o,!IE11OrLess&&captureMode)}function matches(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(o){return!1}return!1}}function getParentOrHost(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function closest(e,t,o,n){if(e){o=o||document;do{if(null!=t&&(">"===t[0]?e.parentNode===o&&matches(e,t):matches(e,t))||n&&e===o)return e;if(e===o)break}while(e=getParentOrHost(e))}return null}var R_SPACE=/\s+/g,_throttleTimeout;function toggleClass$1(e,t,o){if(e&&t)if(e.classList)e.classList[o?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(R_SPACE," ").replace(" "+t+" "," ");e.className=(n+(o?" "+t:"")).replace(R_SPACE," ")}}function css(e,t,o){var n=e&&e.style;if(n){if(void 0===o)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(o=e.currentStyle),void 0===t?o:o[t];t in n||-1!==t.indexOf("webkit")||(t="-webkit-"+t),n[t]=o+("string"==typeof o?"":"px")}}function matrix(e,t){var o="";if("string"==typeof e)o=e;else do{var n=css(e,"transform");n&&"none"!==n&&(o=n+" "+o)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(o)}function find(e,t,o){if(e){var n=e.getElementsByTagName(t),i=0,l=n.length;if(o)for(;i<l;i++)o(n[i],i);return n}return[]}function getWindowScrollingElement(){var e=document.scrollingElement;return e||document.documentElement}function getRect(e,t,o,n,i){if(e.getBoundingClientRect||e===window){var l,a,r,s,d,u,c;if(e!==window&&e.parentNode&&e!==getWindowScrollingElement()?(a=(l=e.getBoundingClientRect()).top,r=l.left,s=l.bottom,d=l.right,u=l.height,c=l.width):(a=0,r=0,s=window.innerHeight,d=window.innerWidth,u=window.innerHeight,c=window.innerWidth),(t||o)&&e!==window&&(i=i||e.parentNode,!IE11OrLess))do{if(i&&i.getBoundingClientRect&&("none"!==css(i,"transform")||o&&"static"!==css(i,"position"))){var p=i.getBoundingClientRect();a-=p.top+parseInt(css(i,"border-top-width")),r-=p.left+parseInt(css(i,"border-left-width")),s=a+l.height,d=r+l.width;break}}while(i=i.parentNode);if(n&&e!==window){var m=matrix(i||e),h=m&&m.a,f=m&&m.d;m&&(s=(a/=f)+(u/=f),d=(r/=h)+(c/=h))}return{top:a,left:r,bottom:s,right:d,width:c,height:u}}}function isScrolledPast(e,t,o){for(var n=getParentAutoScrollElement(e,!0),i=getRect(e)[t];n;){var l=getRect(n)[o];if(!("top"===o||"left"===o?i>=l:i<=l))return n;if(n===getWindowScrollingElement())break;n=getParentAutoScrollElement(n,!1)}return!1}function getChild(e,t,o,n){for(var i=0,l=0,a=e.children;l<a.length;){if("none"!==a[l].style.display&&a[l]!==Sortable.ghost&&(n||a[l]!==Sortable.dragged)&&closest(a[l],o.draggable,e,!1)){if(i===t)return a[l];i++}l++}return null}function lastChild(e,t){for(var o=e.lastElementChild;o&&(o===Sortable.ghost||"none"===css(o,"display")||t&&!matches(o,t));)o=o.previousElementSibling;return o||null}function index$3(e,t){var o=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Sortable.clone||t&&!matches(e,t)||o++;return o}function getRelativeScrollOffset(e){var t=0,o=0,n=getWindowScrollingElement();if(e)do{var i=matrix(e),l=i.a,a=i.d;t+=e.scrollLeft*l,o+=e.scrollTop*a}while(e!==n&&(e=e.parentNode));return[t,o]}function indexOfObject(e,t){for(var o in e)if(e.hasOwnProperty(o))for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e[o][n])return Number(o);return-1}function getParentAutoScrollElement(e,t){if(!e||!e.getBoundingClientRect)return getWindowScrollingElement();var o=e,n=!1;do{if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var i=css(o);if(o.clientWidth<o.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||o.clientHeight<o.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!o.getBoundingClientRect||o===document.body)return getWindowScrollingElement();if(n||t)return o;n=!0}}}while(o=o.parentNode);return getWindowScrollingElement()}function extend$2(e,t){if(e&&t)for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function isRectEqual(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function throttle(e,t){return function(){if(!_throttleTimeout){var o=arguments,n=this;1===o.length?e.call(n,o[0]):e.apply(n,o),_throttleTimeout=setTimeout((function(){_throttleTimeout=void 0}),t)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(e,t,o){e.scrollLeft+=t,e.scrollTop+=o}function clone(e){var t=window.Polymer,o=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):o?o(e).clone(!0)[0]:e.cloneNode(!0)}var expando="Sortable"+(new Date).getTime();function AnimationStateManager(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==css(e,"display")&&e!==Sortable.ghost){t.push({target:e,rect:getRect(e)});var o=_objectSpread2$1({},t[t.length-1].rect);if(e.thisAnimationDuration){var n=matrix(e,!0);n&&(o.top-=n.f,o.left-=n.e)}e.fromRect=o}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(indexOfObject(t,{target:e}),1)},animateAll:function(o){var n=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof o&&o());var i=!1,l=0;t.forEach((function(e){var t=0,o=e.target,a=o.fromRect,r=getRect(o),s=o.prevFromRect,d=o.prevToRect,u=e.rect,c=matrix(o,!0);c&&(r.top-=c.f,r.left-=c.e),o.toRect=r,o.thisAnimationDuration&&isRectEqual(s,r)&&!isRectEqual(a,r)&&(u.top-r.top)/(u.left-r.left)==(a.top-r.top)/(a.left-r.left)&&(t=calculateRealTime(u,s,d,n.options)),isRectEqual(r,a)||(o.prevFromRect=a,o.prevToRect=r,t||(t=n.options.animation),n.animate(o,u,r,t)),t&&(i=!0,l=Math.max(l,t),clearTimeout(o.animationResetTimer),o.animationResetTimer=setTimeout((function(){o.animationTime=0,o.prevFromRect=null,o.fromRect=null,o.prevToRect=null,o.thisAnimationDuration=null}),t),o.thisAnimationDuration=t)})),clearTimeout(e),i?e=setTimeout((function(){"function"==typeof o&&o()}),l):"function"==typeof o&&o(),t=[]},animate:function(e,t,o,n){if(n){css(e,"transition",""),css(e,"transform","");var i=matrix(this.el),l=i&&i.a,a=i&&i.d,r=(t.left-o.left)/(l||1),s=(t.top-o.top)/(a||1);e.animatingX=!!r,e.animatingY=!!s,css(e,"transform","translate3d("+r+"px,"+s+"px,0)"),this.forRepaintDummy=repaint(e),css(e,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),css(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){css(e,"transition",""),css(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),n)}}}}function repaint(e){return e.offsetWidth}function calculateRealTime(e,t,o,n){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-o.top,2)+Math.pow(t.left-o.left,2))*n.animation}var plugins=[],defaults$4={initializeByDefault:!0},PluginManager={mount:function(e){for(var t in defaults$4)defaults$4.hasOwnProperty(t)&&!(t in e)&&(e[t]=defaults$4[t]);plugins.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),plugins.push(e)},pluginEvent:function(e,t,o){var n=this;this.eventCanceled=!1,o.cancel=function(){n.eventCanceled=!0};var i=e+"Global";plugins.forEach((function(n){t[n.pluginName]&&(t[n.pluginName][i]&&t[n.pluginName][i](_objectSpread2$1({sortable:t},o)),t.options[n.pluginName]&&t[n.pluginName][e]&&t[n.pluginName][e](_objectSpread2$1({sortable:t},o)))}))},initializePlugins:function(e,t,o,n){for(var i in plugins.forEach((function(n){var i=n.pluginName;if(e.options[i]||n.initializeByDefault){var l=new n(e,t,e.options);l.sortable=e,l.options=e.options,e[i]=l,_extends(o,l.defaults)}})),e.options)if(e.options.hasOwnProperty(i)){var l=this.modifyOption(e,i,e.options[i]);void 0!==l&&(e.options[i]=l)}},getEventProperties:function(e,t){var o={};return plugins.forEach((function(n){"function"==typeof n.eventProperties&&_extends(o,n.eventProperties.call(t[n.pluginName],e))})),o},modifyOption:function(e,t,o){var n;return plugins.forEach((function(i){e[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[t]&&(n=i.optionListeners[t].call(e[i.pluginName],o))})),n}};function dispatchEvent$1(e){var t=e.sortable,o=e.rootEl,n=e.name,i=e.targetEl,l=e.cloneEl,a=e.toEl,r=e.fromEl,s=e.oldIndex,d=e.newIndex,u=e.oldDraggableIndex,c=e.newDraggableIndex,p=e.originalEvent,m=e.putSortable,h=e.extraEventProperties;if(t=t||o&&o[expando]){var f,v=t.options,g="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||IE11OrLess||Edge?(f=document.createEvent("Event")).initEvent(n,!0,!0):f=new CustomEvent(n,{bubbles:!0,cancelable:!0}),f.to=a||o,f.from=r||o,f.item=i||o,f.clone=l,f.oldIndex=s,f.newIndex=d,f.oldDraggableIndex=u,f.newDraggableIndex=c,f.originalEvent=p,f.pullMode=m?m.lastPutMode:void 0;var y=_objectSpread2$1(_objectSpread2$1({},h),PluginManager.getEventProperties(n,t));for(var b in y)f[b]=y[b];o&&o.dispatchEvent(f),v[g]&&v[g].call(t,f)}}var _excluded=["evt"],pluginEvent=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=o.evt,i=_objectWithoutProperties(o,_excluded);PluginManager.pluginEvent.bind(Sortable)(e,t,_objectSpread2$1({dragEl:dragEl,parentEl:parentEl,ghostEl:ghostEl,rootEl:rootEl,nextEl:nextEl,lastDownEl:lastDownEl,cloneEl:cloneEl,cloneHidden:cloneHidden,dragStarted:moved,putSortable:putSortable,activeSortable:Sortable.active,originalEvent:n,oldIndex:oldIndex,oldDraggableIndex:oldDraggableIndex,newIndex:newIndex,newDraggableIndex:newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(e){_dispatchEvent({sortable:t,name:e,originalEvent:n})}},i))};function _dispatchEvent(e){dispatchEvent$1(_objectSpread2$1({putSortable:putSortable,cloneEl:cloneEl,targetEl:dragEl,rootEl:rootEl,oldIndex:oldIndex,oldDraggableIndex:oldDraggableIndex,newIndex:newIndex,newDraggableIndex:newDraggableIndex},e))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists="undefined"!=typeof document,PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),_detectDirection=function(e,t){var o=css(e),n=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),i=getChild(e,0,t),l=getChild(e,1,t),a=i&&css(i),r=l&&css(l),s=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+getRect(i).width,d=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+getRect(l).width;if("flex"===o.display)return"column"===o.flexDirection||"column-reverse"===o.flexDirection?"vertical":"horizontal";if("grid"===o.display)return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&a.float&&"none"!==a.float){var u="left"===a.float?"left":"right";return!l||"both"!==r.clear&&r.clear!==u?"horizontal":"vertical"}return i&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||s>=n&&"none"===o[CSSFloatProperty]||l&&"none"===o[CSSFloatProperty]&&s+d>n)?"vertical":"horizontal"},_dragElInRowColumn=function(e,t,o){var n=o?e.left:e.top,i=o?e.right:e.bottom,l=o?e.width:e.height,a=o?t.left:t.top,r=o?t.right:t.bottom,s=o?t.width:t.height;return n===a||i===r||n+l/2===a+s/2},_detectNearestEmptySortable=function(e,t){var o;return sortables.some((function(n){var i=n[expando].options.emptyInsertThreshold;if(i&&!lastChild(n)){var l=getRect(n),a=e>=l.left-i&&e<=l.right+i,r=t>=l.top-i&&t<=l.bottom+i;return a&&r?o=n:void 0}})),o},_prepareGroup=function(e){function t(e,o){return function(n,i,l,a){var r=n.options.group.name&&i.options.group.name&&n.options.group.name===i.options.group.name;if(null==e&&(o||r))return!0;if(null==e||!1===e)return!1;if(o&&"clone"===e)return e;if("function"==typeof e)return t(e(n,i,l,a),o)(n,i,l,a);var s=(o?n:i).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var o={},n=e.group;n&&"object"==_typeof$1(n)||(n={name:n}),o.name=n.name,o.checkPull=t(n.pull,!0),o.checkPut=t(n.put),o.revertClone=n.revertClone,e.group=o},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&document.addEventListener("click",(function(e){if(ignoreNextClick)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ignoreNextClick=!1,!1}),!0);var nearestEmptyInsertDetectEvent=function(e){if(dragEl){e=e.touches?e.touches[0]:e;var t=_detectNearestEmptySortable(e.clientX,e.clientY);if(t){var o={};for(var n in e)e.hasOwnProperty(n)&&(o[n]=e[n]);o.target=o.rootEl=t,o.preventDefault=void 0,o.stopPropagation=void 0,t[expando]._onDragOver(o)}}},_checkOutsideTargetEl=function(e){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(e.target)};function Sortable(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=_extends({},t),e[expando]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Sortable.supportPointer&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};for(var n in PluginManager.initializePlugins(this,e,o),o)!(n in t)&&(t[n]=o[n]);for(var i in _prepareGroup(t),this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?on(e,"pointerdown",this._onTapStart):(on(e,"mousedown",this._onTapStart),on(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(e,"dragover",this),on(e,"dragenter",this)),sortables.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),_extends(this,AnimationStateManager())}function _globalDragOver(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function _onMove(e,t,o,n,i,l,a,r){var s,d,u=e[expando],c=u.options.onMove;return!window.CustomEvent||IE11OrLess||Edge?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=o,s.draggedRect=n,s.related=i||t,s.relatedRect=l||getRect(t),s.willInsertAfter=r,s.originalEvent=a,e.dispatchEvent(s),c&&(d=c.call(u,s,a)),d}function _disableDraggable(e){e.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(e,t,o){var n=getRect(getChild(o.el,0,o.options,!0));return t?e.clientX<n.left-10||e.clientY<n.top&&e.clientX<n.right:e.clientY<n.top-10||e.clientY<n.bottom&&e.clientX<n.left}function _ghostIsLast(e,t,o){var n=getRect(lastChild(o.el,o.options.draggable));return t?e.clientX>n.right+10||e.clientX<=n.right&&e.clientY>n.bottom&&e.clientX>=n.left:e.clientX>n.right&&e.clientY>n.top||e.clientX<=n.right&&e.clientY>n.bottom+10}function _getSwapDirection(e,t,o,n,i,l,a,r){var s=n?e.clientY:e.clientX,d=n?o.height:o.width,u=n?o.top:o.left,c=n?o.bottom:o.right,p=!1;if(!a)if(r&&targetMoveDistance<d*i){if(!pastFirstInvertThresh&&(1===lastDirection?s>u+d*l/2:s<c-d*l/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)p=!0;else if(1===lastDirection?s<u+targetMoveDistance:s>c-targetMoveDistance)return-lastDirection}else if(s>u+d*(1-i)/2&&s<c-d*(1-i)/2)return _getInsertDirection(t);return(p=p||a)&&(s<u+d*l/2||s>c-d*l/2)?s>u+d/2?1:-1:0}function _getInsertDirection(e){return index$3(dragEl)<index$3(e)?1:-1}function _generateId(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,o=t.length,n=0;o--;)n+=t.charCodeAt(o);return n.toString(36)}function _saveInputCheckedState(e){savedInputChecked.length=0;for(var t=e.getElementsByTagName("input"),o=t.length;o--;){var n=t[o];n.checked&&savedInputChecked.push(n)}}function _nextTick(e){return setTimeout(e,0)}function _cancelNextTick(e){return clearTimeout(e)}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(lastTarget=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,dragEl):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,o=this.el,n=this.options,i=n.preventOnFilter,l=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,r=(a||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||r,d=n.filter;if(_saveInputCheckedState(o),!dragEl&&!(/mousedown|pointerdown/.test(l)&&0!==e.button||n.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!Safari||!r||"SELECT"!==r.tagName.toUpperCase())&&!((r=closest(r,n.draggable,o,!1))&&r.animated||lastDownEl===r)){if(oldIndex=index$3(r),oldDraggableIndex=index$3(r,n.draggable),"function"==typeof d){if(d.call(this,e,r,this))return _dispatchEvent({sortable:t,rootEl:s,name:"filter",targetEl:r,toEl:o,fromEl:o}),pluginEvent("filter",t,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(d&&(d=d.split(",").some((function(n){if(n=closest(s,n.trim(),o,!1))return _dispatchEvent({sortable:t,rootEl:n,name:"filter",targetEl:r,fromEl:o,toEl:o}),pluginEvent("filter",t,{evt:e}),!0}))))return void(i&&e.cancelable&&e.preventDefault());n.handle&&!closest(s,n.handle,o,!1)||this._prepareDragStart(e,a,r)}}},_prepareDragStart:function(e,t,o){var n,i=this,l=i.el,a=i.options,r=l.ownerDocument;if(o&&!dragEl&&o.parentNode===l){var s=getRect(o);if(rootEl=l,parentEl=(dragEl=o).parentNode,nextEl=dragEl.nextSibling,lastDownEl=o,activeGroup=a.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(t||e).clientX,clientY:(t||e).clientY},tapDistanceLeft=tapEvt.clientX-s.left,tapDistanceTop=tapEvt.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,dragEl.style["will-change"]="all",n=function(){pluginEvent("delayEnded",i,{evt:e}),Sortable.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!FireFox&&i.nativeDraggable&&(dragEl.draggable=!0),i._triggerDragStart(e,t),_dispatchEvent({sortable:i,name:"choose",originalEvent:e}),toggleClass$1(dragEl,a.chosenClass,!0))},a.ignore.split(",").forEach((function(e){find(dragEl,e.trim(),_disableDraggable)})),on(r,"dragover",nearestEmptyInsertDetectEvent),on(r,"mousemove",nearestEmptyInsertDetectEvent),on(r,"touchmove",nearestEmptyInsertDetectEvent),on(r,"mouseup",i._onDrop),on(r,"touchend",i._onDrop),on(r,"touchcancel",i._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(Edge||IE11OrLess))n();else{if(Sortable.eventCanceled)return void this._onDrop();on(r,"mouseup",i._disableDelayedDrag),on(r,"touchend",i._disableDelayedDrag),on(r,"touchcancel",i._disableDelayedDrag),on(r,"mousemove",i._delayedDragTouchMoveHandler),on(r,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&on(r,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(n,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._disableDelayedDrag),off(e,"touchend",this._disableDelayedDrag),off(e,"touchcancel",this._disableDelayedDrag),off(e,"mousemove",this._delayedDragTouchMoveHandler),off(e,"touchmove",this._delayedDragTouchMoveHandler),off(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):on(document,t?"touchmove":"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(o){}},_dragStarted:function(e,t){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:t}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var o=this.options;!e&&toggleClass$1(dragEl,o.dragClass,!1),toggleClass$1(dragEl,o.ghostClass,!0),Sortable.active=this,e&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var e=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY))!==t;)t=e;if(dragEl.parentNode[expando]._isOutsideThisEl(e),t)do{if(t[expando]){if(t[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);_unhideGhostForTarget()}},_onTouchMove:function(e){if(tapEvt){var t=this.options,o=t.fallbackTolerance,n=t.fallbackOffset,i=e.touches?e.touches[0]:e,l=ghostEl&&matrix(ghostEl,!0),a=ghostEl&&l&&l.a,r=ghostEl&&l&&l.d,s=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),d=(i.clientX-tapEvt.clientX+n.x)/(a||1)+(s?s[0]-ghostRelativeParentInitialScroll[0]:0)/(a||1),u=(i.clientY-tapEvt.clientY+n.y)/(r||1)+(s?s[1]-ghostRelativeParentInitialScroll[1]:0)/(r||1);if(!Sortable.active&&!awaitingDragStarted){if(o&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if(ghostEl){l?(l.e+=d-(lastDx||0),l.f+=u-(lastDy||0)):l={a:1,b:0,c:0,d:1,e:d,f:u};var c="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");css(ghostEl,"webkitTransform",c),css(ghostEl,"mozTransform",c),css(ghostEl,"msTransform",c),css(ghostEl,"transform",c),lastDx=d,lastDy=u,touchEvt=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ghostEl){var e=this.options.fallbackOnBody?document.body:rootEl,t=getRect(dragEl,!0,PositionGhostAbsolutely,!0,e),o=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=e;"static"===css(ghostRelativeParent,"position")&&"none"===css(ghostRelativeParent,"transform")&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),t.top+=ghostRelativeParent.scrollTop,t.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}toggleClass$1(ghostEl=dragEl.cloneNode(!0),o.ghostClass,!1),toggleClass$1(ghostEl,o.fallbackClass,!0),toggleClass$1(ghostEl,o.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",t.top),css(ghostEl,"left",t.left),css(ghostEl,"width",t.width),css(ghostEl,"height",t.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,e.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(e,t){var o=this,n=e.dataTransfer,i=o.options;pluginEvent("dragStart",this,{evt:e}),Sortable.eventCanceled?this._onDrop():(pluginEvent("setupClone",this),Sortable.eventCanceled||((cloneEl=clone(dragEl)).draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass$1(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),o.cloneId=_nextTick((function(){pluginEvent("clone",o),Sortable.eventCanceled||(o.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),o._hideClone(),_dispatchEvent({sortable:o,name:"clone"}))})),!t&&toggleClass$1(dragEl,i.dragClass,!0),t?(ignoreNextClick=!0,o._loopId=setInterval(o._emulateDragOver,50)):(off(document,"mouseup",o._onDrop),off(document,"touchend",o._onDrop),off(document,"touchcancel",o._onDrop),n&&(n.effectAllowed="move",i.setData&&i.setData.call(o,n,dragEl)),on(document,"drop",o),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,o._dragStartId=_nextTick(o._dragStarted.bind(o,t,e)),on(document,"selectstart",o),moved=!0,Safari&&css(document.body,"user-select","none"))},_onDragOver:function(e){var t,o,n,i,l=this.el,a=e.target,r=this.options,s=r.group,d=Sortable.active,u=activeGroup===s,c=r.sort,p=putSortable||d,m=this,h=!1;if(!_silent){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),a=closest(a,r.draggable,l,!0),$("dragOver"),Sortable.eventCanceled)return h;if(dragEl.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||m._ignoreWhileAnimating===a)return B(!1);if(ignoreNextClick=!1,d&&!r.disabled&&(u?c||(n=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,d,dragEl,e))&&s.checkPut(this,d,dragEl,e))){if(i="vertical"===this._getDirection(e,a),t=getRect(dragEl),$("dragOverValid"),Sortable.eventCanceled)return h;if(n)return parentEl=rootEl,D(),this._hideClone(),$("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),B(!0);var f=lastChild(l,r.draggable);if(!f||_ghostIsLast(e,i,this)&&!f.animated){if(f===dragEl)return B(!1);if(f&&l===e.target&&(a=f),a&&(o=getRect(a)),!1!==_onMove(rootEl,l,dragEl,t,a,o,e,!!a))return D(),l.appendChild(dragEl),parentEl=l,T(),B(!0)}else if(f&&_ghostIsFirst(e,i,this)){var v=getChild(l,0,r,!0);if(v===dragEl)return B(!1);if(o=getRect(a=v),!1!==_onMove(rootEl,l,dragEl,t,a,o,e,!1))return D(),l.insertBefore(dragEl,v),parentEl=l,T(),B(!0)}else if(a.parentNode===l){o=getRect(a);var g,y,b,w=dragEl.parentNode!==l,k=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||t,a.animated&&a.toRect||o,i),_=i?"top":"left",C=isScrolledPast(a,"top","top")||isScrolledPast(dragEl,"top","top"),x=C?C.scrollTop:void 0;if(lastTarget!==a&&(y=o[_],pastFirstInvertThresh=!1,isCircumstantialInvert=!k&&r.invertSwap||w),0!==(g=_getSwapDirection(e,a,o,i,k?1:r.swapThreshold,null==r.invertedSwapThreshold?r.swapThreshold:r.invertedSwapThreshold,isCircumstantialInvert,lastTarget===a))){var S=index$3(dragEl);do{S-=g,b=parentEl.children[S]}while(b&&("none"===css(b,"display")||b===ghostEl))}if(0===g||b===a)return B(!1);lastTarget=a,lastDirection=g;var V=a.nextElementSibling,N=!1,E=_onMove(rootEl,l,dragEl,t,a,o,e,N=1===g);if(!1!==E)return 1!==E&&-1!==E||(N=1===E),_silent=!0,setTimeout(_unsilent,30),D(),N&&!V?l.appendChild(dragEl):a.parentNode.insertBefore(dragEl,N?V:a),C&&scrollBy(C,0,x-C.scrollTop),parentEl=dragEl.parentNode,void 0===y||isCircumstantialInvert||(targetMoveDistance=Math.abs(y-getRect(a)[_])),T(),B(!0)}if(l.contains(dragEl))return B(!1)}return!1}function $(r,s){pluginEvent(r,m,_objectSpread2$1({evt:e,isOwner:u,axis:i?"vertical":"horizontal",revert:n,dragRect:t,targetRect:o,canSort:c,fromSortable:p,target:a,completed:B,onMove:function(o,n){return _onMove(rootEl,l,dragEl,t,o,getRect(o),e,n)},changed:T},s))}function D(){$("dragOverAnimationCapture"),m.captureAnimationState(),m!==p&&p.captureAnimationState()}function B(t){return $("dragOverCompleted",{insertion:t}),t&&(u?d._hideClone():d._showClone(m),m!==p&&(toggleClass$1(dragEl,putSortable?putSortable.options.ghostClass:d.options.ghostClass,!1),toggleClass$1(dragEl,r.ghostClass,!0)),putSortable!==m&&m!==Sortable.active?putSortable=m:m===Sortable.active&&putSortable&&(putSortable=null),p===m&&(m._ignoreWhileAnimating=a),m.animateAll((function(){$("dragOverAnimationComplete"),m._ignoreWhileAnimating=null})),m!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(a===dragEl&&!dragEl.animated||a===l&&!a.animated)&&(lastTarget=null),r.dragoverBubble||e.rootEl||a===document||(dragEl.parentNode[expando]._isOutsideThisEl(e.target),!t&&nearestEmptyInsertDetectEvent(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function T(){newIndex=index$3(dragEl),newDraggableIndex=index$3(dragEl,r.draggable),_dispatchEvent({sortable:m,name:"change",toEl:l,newIndex:newIndex,newDraggableIndex:newDraggableIndex,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._onDrop),off(e,"touchend",this._onDrop),off(e,"pointerup",this._onDrop),off(e,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(e){var t=this.el,o=this.options;newIndex=index$3(dragEl),newDraggableIndex=index$3(dragEl,o.draggable),pluginEvent("drop",this,{evt:e}),parentEl=dragEl&&dragEl.parentNode,newIndex=index$3(dragEl),newDraggableIndex=index$3(dragEl,o.draggable),Sortable.eventCanceled||(awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),e&&(moved&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&"clone"!==putSortable.lastPutMode)&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass$1(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass$1(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:e}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:e}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),Sortable.active&&(null!=newIndex&&-1!==newIndex||(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach((function(e){e.checked=!0})),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(e),_globalDragOver(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],o=this.el.children,n=0,i=o.length,l=this.options;n<i;n++)closest(e=o[n],l.draggable,this.el,!1)&&t.push(e.getAttribute(l.dataIdAttr)||_generateId(e));return t},sort:function(e,t){var o={},n=this.el;this.toArray().forEach((function(e,t){var i=n.children[t];closest(i,this.options.draggable,n,!1)&&(o[e]=i)}),this),t&&this.captureAnimationState(),e.forEach((function(e){o[e]&&(n.removeChild(o[e]),n.appendChild(o[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return closest(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var o=this.options;if(void 0===t)return o[e];var n=PluginManager.modifyOption(this,e,t);o[e]=void 0!==n?n:t,"group"===e&&_prepareGroup(o)},destroy:function(){pluginEvent("destroy",this);var e=this.el;e[expando]=null,off(e,"mousedown",this._onTapStart),off(e,"touchstart",this._onTapStart),off(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(e,"dragover",this),off(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode!=rootEl||this.options.group.revertClone?nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl):rootEl.insertBefore(cloneEl,dragEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}else this._hideClone()}},documentExists&&on(document,"touchmove",(function(e){(Sortable.active||awaitingDragStarted)&&e.cancelable&&e.preventDefault()})),Sortable.utils={on:on,off:off,css:css,find:find,is:function(e,t){return!!closest(e,t,e,!1)},extend:extend$2,throttle:throttle,closest:closest,toggleClass:toggleClass$1,clone:clone,index:index$3,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild:getChild},Sortable.get=function(e){return e[expando]},Sortable.mount=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Sortable.utils=_objectSpread2$1(_objectSpread2$1({},Sortable.utils),e.utils)),PluginManager.mount(e)}))},Sortable.create=function(e,t){return new Sortable(e,t)},Sortable.version=version$1;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):t.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var o=this,n=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,l=document.elementFromPoint(n,i);if(touchEvt$1=e,t||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(e,this.options,l,t);var a=getParentAutoScrollElement(l,!0);!scrolling||pointerElemChangedInterval&&n===lastAutoScrollX&&i===lastAutoScrollY||(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval((function(){var l=getParentAutoScrollElement(document.elementFromPoint(n,i),!0);l!==a&&(a=l,clearAutoScrolls()),autoScroll(e,o.options,l,t)}),10),lastAutoScrollX=n,lastAutoScrollY=i)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(l,!0)===getWindowScrollingElement())return void clearAutoScrolls();autoScroll(e,this.options,getParentAutoScrollElement(l,!1),!1)}}},_extends(e,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach((function(e){clearInterval(e.pid)})),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle((function(e,t,o,n){if(t.scroll){var i,l=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,r=t.scrollSensitivity,s=t.scrollSpeed,d=getWindowScrollingElement(),u=!1;scrollRootEl!==o&&(scrollRootEl=o,clearAutoScrolls(),scrollEl=t.scroll,i=t.scrollFn,!0===scrollEl&&(scrollEl=getParentAutoScrollElement(o,!0)));var c=0,p=scrollEl;do{var m=p,h=getRect(m),f=h.top,v=h.bottom,g=h.left,y=h.right,b=h.width,w=h.height,k=void 0,_=void 0,C=m.scrollWidth,x=m.scrollHeight,S=css(m),V=m.scrollLeft,N=m.scrollTop;m===d?(k=b<C&&("auto"===S.overflowX||"scroll"===S.overflowX||"visible"===S.overflowX),_=w<x&&("auto"===S.overflowY||"scroll"===S.overflowY||"visible"===S.overflowY)):(k=b<C&&("auto"===S.overflowX||"scroll"===S.overflowX),_=w<x&&("auto"===S.overflowY||"scroll"===S.overflowY));var E=k&&(Math.abs(y-l)<=r&&V+b<C)-(Math.abs(g-l)<=r&&!!V),$=_&&(Math.abs(v-a)<=r&&N+w<x)-(Math.abs(f-a)<=r&&!!N);if(!autoScrolls[c])for(var D=0;D<=c;D++)autoScrolls[D]||(autoScrolls[D]={});autoScrolls[c].vx==E&&autoScrolls[c].vy==$&&autoScrolls[c].el===m||(autoScrolls[c].el=m,autoScrolls[c].vx=E,autoScrolls[c].vy=$,clearInterval(autoScrolls[c].pid),0==E&&0==$||(u=!0,autoScrolls[c].pid=setInterval(function(){n&&0===this.layer&&Sortable.active._onTouchMove(touchEvt$1);var t=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*s:0,o=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*s:0;"function"==typeof i&&"continue"!==i.call(Sortable.dragged.parentNode[expando],o,t,e,touchEvt$1,autoScrolls[this.layer].el)||scrollBy(autoScrolls[this.layer].el,o,t)}.bind({layer:c}),24))),c++}while(t.bubbleScroll&&p!==d&&(p=getParentAutoScrollElement(p,!1)));scrolling=u}}),30),drop=function(e){var t=e.originalEvent,o=e.putSortable,n=e.dragEl,i=e.activeSortable,l=e.dispatchSortableEvent,a=e.hideGhostForTarget,r=e.unhideGhostForTarget;if(t){var s=o||i;a();var d=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(d.clientX,d.clientY);r(),s&&!s.el.contains(u)&&(l("spill"),this.onSpill({dragEl:n,putSortable:o}))}};function Revert(){}function Remove(){}function removeNode(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function insertNodeAt(e,t,o){const n=0===o?e.children[0]:e.children[o-1].nextSibling;e.insertBefore(t,n)}function getConsole(){return"undefined"!=typeof window?window.console:global.console}Revert.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var n=getChild(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),o&&o.animateAll()},drop:drop},_extends(Revert,{pluginName:"revertOnSpill"}),Remove.prototype={onSpill:function(e){var t=e.dragEl,o=e.putSortable||this.sortable;o.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),o.animateAll()},drop:drop},_extends(Remove,{pluginName:"removeOnSpill"}),Sortable.mount(new AutoScrollPlugin),Sortable.mount(Remove,Revert);const console$1=getConsole();function cached(e){const t=Object.create(null);return function(o){return t[o]||(t[o]=e(o))}}const regex=/-(\w)/g,camelize$1=cached((e=>e.replace(regex,((e,t)=>t.toUpperCase())))),manageAndEmit$1=["Start","Add","Remove","Update","End"],emit$1=["Choose","Unchoose","Sort","Filter","Clone"],manage$1=["Move"],eventHandlerNames=[manage$1,manageAndEmit$1,emit$1].flatMap((e=>e)).map((e=>`on${e}`)),events$1={manage:manage$1,manageAndEmit:manageAndEmit$1,emit:emit$1};function isReadOnly(e){return-1!==eventHandlerNames.indexOf(e)}const tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function isHtmlTag(e){return tags.includes(e)}function isTransition(e){return["transition-group","TransitionGroup"].includes(e)}function isHtmlAttribute(e){return["id","class","role","style"].includes(e)||e.startsWith("data-")||e.startsWith("aria-")||e.startsWith("on")}function project(e){return e.reduce(((e,[t,o])=>(e[t]=o,e)),{})}function getComponentAttributes({$attrs:e,componentData:t={}}){return{...project(Object.entries(e).filter((([e,t])=>isHtmlAttribute(e)))),...t}}function createSortableOption({$attrs:e,callBackBuilder:t}){const o=project(getValidSortableEntries(e));Object.entries(t).forEach((([e,t])=>{events$1[e].forEach((e=>{o[`on${e}`]=t(e)}))}));const n=`[data-draggable]${o.draggable||""}`;return{...o,draggable:n}}function getValidSortableEntries(e){return Object.entries(e).filter((([e,t])=>!isHtmlAttribute(e))).map((([e,t])=>[camelize$1(e),t])).filter((([e,t])=>!isReadOnly(e)))}const getHtmlElementFromNode=({el:e})=>e,addContext=(e,t)=>e.__draggable_context=t,getContext=e=>e.__draggable_context;class ComponentStructure{constructor({nodes:{header:e,default:t,footer:o},root:n,realList:i}){this.defaultNodes=t,this.children=[...e,...t,...o],this.externalComponent=n.externalComponent,this.rootTransition=n.transition,this.tag=n.tag,this.realList=i}get _isRootComponent(){return this.externalComponent||this.rootTransition}render(e,t){const{tag:o,children:n,_isRootComponent:i}=this;return e(o,t,i?{default:()=>n}:n)}updated(){const{defaultNodes:e,realList:t}=this;e.forEach(((e,o)=>{addContext(getHtmlElementFromNode(e),{element:t[o],index:o})}))}getUnderlyingVm(e){return getContext(e)}getVmIndexFromDomIndex(e,t){const{defaultNodes:o}=this,{length:n}=o,i=t.children,l=i.item(e);if(null===l)return n;const a=getContext(l);if(a)return a.index;if(0===n)return 0;const r=getHtmlElementFromNode(o[0]);return e<[...i].findIndex((e=>e===r))?0:n}}function getSlot(e,t){const o=e[t];return o?o():[]}function computeNodes({$slots:e,realList:t,getKey:o}){const n=t||[],[i,l]=["header","footer"].map((t=>getSlot(e,t))),{item:a}=e;if(!a)throw new Error("draggable element must have an item slot");const r=n.flatMap(((e,t)=>a({element:e,index:t}).map((t=>(t.key=o(e),t.props={...t.props||{},"data-draggable":!0},t)))));if(r.length!==n.length)throw new Error("Item slot must have only one child");return{header:i,footer:l,default:r}}function getRootInformation(e){const t=isTransition(e),o=!isHtmlTag(e)&&!t;return{transition:t,externalComponent:o,tag:o?vue.resolveComponent(e):t?vue.TransitionGroup:e}}function computeComponentStructure({$slots:e,tag:t,realList:o,getKey:n}){const i=computeNodes({$slots:e,realList:o,getKey:n}),l=getRootInformation(t);return new ComponentStructure({nodes:i,root:l,realList:o})}function emit(e,t){vue.nextTick((()=>this.$emit(e.toLowerCase(),t)))}function manage(e){return(t,o)=>{if(null!==this.realList)return this[`onDrag${e}`](t,o)}}function manageAndEmit(e){const t=manage.call(this,e);return(o,n)=>{t.call(this,o,n),emit.call(this,e,o)}}let draggingElement=null;const props={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:e=>e},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},emits=["update:modelValue","change",...[...events$1.manageAndEmit,...events$1.emit].map((e=>e.toLowerCase()))],draggableComponent=vue.defineComponent({name:"draggable",inheritAttrs:!1,props:props,emits:emits,data:()=>({error:!1}),render(){try{this.error=!1;const{$slots:e,$attrs:t,tag:o,componentData:n,realList:i,getKey:l}=this,a=computeComponentStructure({$slots:e,tag:o,realList:i,getKey:l});this.componentStructure=a;const r=getComponentAttributes({$attrs:t,componentData:n});return a.render(vue.h,r)}catch(e){return this.error=!0,vue.h("pre",{style:{color:"red"}},e.stack)}},created(){null!==this.list&&null!==this.modelValue&&console$1.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted(){if(this.error)return;const{$attrs:e,$el:t,componentStructure:o}=this;o.updated();const n=createSortableOption({$attrs:e,callBackBuilder:{manageAndEmit:e=>manageAndEmit.call(this,e),emit:e=>emit.bind(this,e),manage:e=>manage.call(this,e)}}),i=1===t.nodeType?t:t.parentElement;this._sortable=new Sortable(i,n),this.targetDomElement=i,i.__draggable_component__=this},updated(){this.componentStructure.updated()},beforeUnmount(){void 0!==this._sortable&&this._sortable.destroy()},computed:{realList(){const{list:e}=this;return e||this.modelValue},getKey(){const{itemKey:e}=this;return"function"==typeof e?e:t=>t[e]}},watch:{$attrs:{handler(e){const{_sortable:t}=this;t&&getValidSortableEntries(e).forEach((([e,o])=>{t.option(e,o)}))},deep:!0}},methods:{getUnderlyingVm(e){return this.componentStructure.getUnderlyingVm(e)||null},getUnderlyingPotencialDraggableComponent:e=>e.__draggable_component__,emitChanges(e){vue.nextTick((()=>this.$emit("change",e)))},alterList(e){if(this.list)return void e(this.list);const t=[...this.modelValue];e(t),this.$emit("update:modelValue",t)},spliceList(){this.alterList((e=>e.splice(...arguments)))},updatePosition(e,t){this.alterList((o=>o.splice(t,0,o.splice(e,1)[0])))},getRelatedContextFromMoveEvent({to:e,related:t}){const o=this.getUnderlyingPotencialDraggableComponent(e);if(!o)return{component:o};const n=o.realList,i={list:n,component:o};if(e!==t&&n){return{...o.getUnderlyingVm(t)||{},...i}}return i},getVmIndexFromDomIndex(e){return this.componentStructure.getVmIndexFromDomIndex(e,this.targetDomElement)},onDragStart(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),draggingElement=e.item},onDragAdd(e){const t=e.item._underlying_vm_;if(void 0===t)return;removeNode(e.item);const o=this.getVmIndexFromDomIndex(e.newIndex);this.spliceList(o,0,t);const n={element:t,newIndex:o};this.emitChanges({added:n})},onDragRemove(e){if(insertNodeAt(this.$el,e.item,e.oldIndex),"clone"===e.pullMode)return void removeNode(e.clone);const{index:t,element:o}=this.context;this.spliceList(t,1);const n={element:o,oldIndex:t};this.emitChanges({removed:n})},onDragUpdate(e){removeNode(e.item),insertNodeAt(e.from,e.item,e.oldIndex);const t=this.context.index,o=this.getVmIndexFromDomIndex(e.newIndex);this.updatePosition(t,o);const n={element:this.context.element,oldIndex:t,newIndex:o};this.emitChanges({moved:n})},computeFutureIndex(e,t){if(!e.element)return 0;const o=[...t.to.children].filter((e=>"none"!==e.style.display)),n=o.indexOf(t.related),i=e.component.getVmIndexFromDomIndex(n);return-1!==o.indexOf(draggingElement)||!t.willInsertAfter?i:i+1},onDragMove(e,t){const{move:o,realList:n}=this;if(!o||!n)return!0;const i=this.getRelatedContextFromMoveEvent(e),l=this.computeFutureIndex(i,e),a={...this.context,futureIndex:l};return o({...e,relatedContext:i,draggedContext:a},t)},onDragEnd(){draggingElement=null}}}),loadJs=e=>new Promise(((t,o)=>{const n=document.createElement("script");n.src=e,n.type="text/javascript",document.body.appendChild(n),n.onload=()=>{t()}})),loadCss=e=>new Promise(((t,o)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,document.head.appendChild(n),n.onload=()=>{t()}})),generateKeyToTD=e=>{for(let t=0;t<e.length;t++)for(let o=0;o<e[t].columns.length;o++)e[t].columns[o].key=Math.random().toString(36).slice(-8);return e},generateKeyToTH=e=>{for(let t=0;t<e.length;t++)e[t].key=Math.random().toString(36).slice(-8);return e},generateKeyToCol=e=>{for(let t=0;t<e.length;t++)e[t].key=Math.random().toString(36).slice(-8);return e},splitStyleSheets=e=>{if(!e)return[];return e.split(/}\s+./).filter((e=>e)).map((e=>("."!==(e=e.trim())[0]&&(e="."+e),"}"!==e[e.length-1]&&(e+="}"),e)))},splitSheetName=e=>Array.from(new Set(e.map((e=>{let t=e.indexOf(" "),o=e.indexOf("{"),n=o;return t>0&&t<o&&(n=t),e=e.substring(1,n)})))),updateStyleSheets=(e,t)=>{let o=document.styleSheets[0];if(o.href){let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),o=t.sheet||t.styleSheet}let n=0;for(;o.cssRules.length>n;)o.cssRules[n].selectorText&&0===o.cssRules[n].selectorText.indexOf(t)?o.deleteRule(n):n++;for(let i=0;i<e.length;i++)o.insertRule(t+e[i],0)},clearStyleSheets=e=>{let t=document.styleSheets[0];if(t.href)return!1;let o=0;for(;t.cssRules.length>o;)t.cssRules[o].selectorText&&0===t.cssRules[o].selectorText.indexOf(e)?t.deleteRule(o):o++},fixDraggbleList=(e,t)=>{const o=e.findIndex((e=>!e.key));o>=0&&e.splice(t,0,e.splice(o,1)[0])},getBindModels=(e,t)=>{let o={};return Object.keys(t).forEach((n=>{"object"==typeof t[n]&&e[n]?Array.isArray(e[n])?o[n]=e[n].map((e=>getBindModels(e,t[n]))):o[n]=getBindModels(e[n],t[n]):o[n]=e[n]})),o},addClass$1=(e,t)=>{e.classList.add(t)},removeClass$1=(e,t)=>{e.classList.remove(t)},consoleError=e=>{Function(`\n    window.console && console.error('[FormMaking error]: ${e}');\n  `)()};var index_vue_vue_type_style_index_0_lang$b="",_export_sfc=(e,t)=>{const o=e.__vccOpts||e;for(const[n,i]of t)o[n]=i;return o};const _sfc_main$1B={name:"code-editor",props:{width:{type:String,default:"100%"},height:{type:String,default:"100%"},mode:{type:String,default:"xml"},modelValue:{type:[String,Object,Array]},fontSize:{type:Number,default:13},wrap:{type:Boolean,default:!1}},emits:["update:modelValue"],data(){return{id:"code_"+Math.random().toString(36).slice(-8),codeValue:this.modelValue,loading:!0,observer:null,editor:null}},computed:{aceMode(){switch(this.mode){case"xml":default:return"ace/mode/xml";case"html":return"ace/mode/html";case"json":return"ace/mode/json";case"css":return"ace/mode/css";case"javascript":return"ace/mode/javascript";case"tsx":return"ace/mode/tsx"}}},mounted(){setTimeout((()=>{window.ace?this.loadEditor():window.FormMaking_OPTIONS.aceurl&&loadJs(`${window.FormMaking_OPTIONS.aceurl}/ace.js`).then((()=>{loadJs(`${window.FormMaking_OPTIONS.aceurl}/ext-language_tools.js`).then((()=>{this.loadEditor()}))})),this.observer=new MutationObserver(((e,t)=>{this.loadEditor()})),this.observer.observe(document.getElementsByTagName("html")[0],{attributes:!0})}),0)},methods:{loadEditor(){this.loading=!1,ace.require("ace/ext/language_tools"),this.editor=ace.edit(this.$refs[this.id+"Ref"]),this.editor.session.setMode(this.aceMode),this.editor.setFontSize(this.fontSize),this.editor.getSession().setTabSize(2),this.editor.setShowPrintMargin(!1),this.wrap&&this.editor.getSession().setUseWrapMode(!0),document.querySelector("html").className.indexOf("dark")>-1?this.editor.setTheme("ace/theme/nord_dark"):this.editor.setTheme("ace/theme/textmate"),this.editor.setOptions({enableSnippets:!0,enableLiveAutocompletion:!0}),this.editor.commands.addCommand({name:"myCommand",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:function(e){e.selection.getCursor(),e.selection.moveCursorLineEnd(),e.selection.moveTo(e.selection.getCursor().row,e.selection.getCursor().column),e.session.insert(e.getCursorPosition(),"\n")}}),this.editor.setValue("string"==typeof this.codeValue?this.codeValue:JSON.stringify(this.codeValue,null,"\t"),-1),this.editor.on("change",(e=>{this.codeValue=this.editor.getValue()})),this.editor.on("paste",(e=>{"json"===this.mode&&setTimeout((()=>{this.editor.setValue(JSON.stringify(JSON.parse(e.text),null,2),-1)}))}))},setValue(e){this.editor.setValue(JSON.stringify(JSON.parse(e),null,2),-1)}},beforeUnmount(){var e,t,o;null==(e=this.observer)||e.disconnect(),null==(t=this.editor)||t.destroy(),null==(o=this.editor)||o.container.remove()},watch:{modelValue(e){this.codeValue=e},codeValue(e){this.$emit("update:modelValue",e)}}},_hoisted_1$17=["id"];function _sfc_render$1y(e,t,o,n,i,l){const a=vue.resolveDirective("loading");return vue.withDirectives((vue.openBlock(),vue.createElementBlock("div",{id:i.id,class:"fm-code-editor",style:vue.normalizeStyle({width:o.width,height:o.height}),ref:i.id+"Ref"},null,12,_hoisted_1$17)),[[a,i.loading]])}var CodeEditor=_export_sfc(_sfc_main$1B,[["render",_sfc_render$1y]]),CusDialog_vue_vue_type_style_index_0_lang="";const _sfc_main$1A={props:{visible:Boolean,loadingText:{type:String,default:""},title:{type:String,default:""},width:{type:String,default:"600px"},form:{type:Boolean,default:!1},action:{type:Boolean,default:!0},fullscreen:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0},customClass:{type:String,default:""},beforeClose:Function},emits:["on-submit","on-close"],computed:{show(){return!this.form||this.showForm}},data(){return{loading:!1,dialogVisible:this.visible,showForm:!1}},methods:{close(){this.dialogVisible=!1},submit(){this.loading=!0,this.$emit("on-submit")},end(){this.loading=!1}},mounted(){},watch:{dialogVisible(e){e?this.showForm=!0:(this.loading=!1,this.$emit("on-close"),setTimeout((()=>{this.showForm=!1}),300))},visible(e){this.dialogVisible=e}}},_hoisted_1$16={key:0},_hoisted_2$W=["element-loading-text"];function _sfc_render$1x(e,t,o,n,i,l){const a=vue.resolveComponent("el-button"),r=vue.resolveComponent("el-dialog"),s=vue.resolveDirective("loading");return vue.openBlock(),vue.createBlock(r,{class:vue.normalizeClass(o.customClass+" cus-dialog-container fm-dialog"),title:o.title,modelValue:i.dialogVisible,"onUpdate:modelValue":t[0]||(t[0]=e=>i.dialogVisible=e),"close-on-click-modal":o.closeOnClickModal,"close-on-press-escape":o.closeOnPressEscape,"append-to-body":!0,center:"",width:o.width,ref:"elDialog",fullscreen:o.fullscreen,top:"10vh",draggable:"","destroy-on-close":"","before-close":o.beforeClose},vue.createSlots({default:vue.withCtx((()=>[l.show?(vue.openBlock(),vue.createElementBlock("span",_hoisted_1$16,[vue.renderSlot(e.$slots,"default")])):vue.createCommentVNode("",!0)])),_:2},[o.action?{name:"footer",fn:vue.withCtx((()=>[vue.withDirectives((vue.openBlock(),vue.createElementBlock("span",{class:"dialog-footer","element-loading-text":o.loadingText},[vue.renderSlot(e.$slots,"action",{},(()=>[vue.createVNode(a,{onClick:l.close},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.cancel")),1)])),_:1},8,["onClick"]),vue.createVNode(a,{type:"primary",onClick:l.submit},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.confirm")),1)])),_:1},8,["onClick"])]))],8,_hoisted_2$W)),[[s,i.loading]])])),key:"0"}:void 0]),1032,["class","title","modelValue","close-on-click-modal","close-on-press-escape","width","fullscreen","before-close"])}var CusDialog=_export_sfc(_sfc_main$1A,[["render",_sfc_render$1x]]),CodeDialog_vue_vue_type_style_index_0_lang="";const _sfc_main$1z={components:{CusDialog:CusDialog,CodeEditor:CodeEditor},props:{mode:{type:String,default:"xml"},title:{type:String,default:""},help:{type:String,default:""},width:{type:String,default:"900px"},codeHeight:{type:String,default:"460px"}},emits:["on-confirm"],data:()=>({templateVisible:!1,templ:""}),methods:{handleSubmit(){this.$emit("on-confirm",this.templ)},open(e){this.templ=e,this.templateVisible=!0},close(){this.templateVisible=!1},end(){this.$refs.codeDialog.end()},handleHelp(){window.open(this.help)}}},_hoisted_1$15={key:0,class:"code-dialog-help"},_hoisted_2$V=vue.createElementVNode("i",{class:"fm-iconfont icon-question-circle"},null,-1);function _sfc_render$1w(e,t,o,n,i,l){const a=vue.resolveComponent("code-editor"),r=vue.resolveComponent("el-button"),s=vue.resolveComponent("cus-dialog");return vue.openBlock(),vue.createBlock(s,{visible:i.templateVisible,onOnClose:t[1]||(t[1]=e=>i.templateVisible=!1),ref:"codeDialog",width:o.width,title:o.title,onOnSubmit:l.handleSubmit,"custom-class":"code-dialog-container"},{default:vue.withCtx((()=>[vue.createVNode(a,{height:o.codeHeight,mode:this.mode,modelValue:i.templ,"onUpdate:modelValue":t[0]||(t[0]=e=>i.templ=e)},null,8,["height","mode","modelValue"]),o.help?(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$15,[vue.createVNode(r,{link:"",type:"danger",onClick:l.handleHelp},{default:vue.withCtx((()=>[vue.createTextVNode("帮助"),_hoisted_2$V])),_:1},8,["onClick"])])):vue.createCommentVNode("",!0)])),_:1},8,["visible","width","title","onOnSubmit"])}var CodeDialog=_export_sfc(_sfc_main$1z,[["render",_sfc_render$1w]]),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lodash={exports:{}},module2,exports2;
/**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   */module2=lodash,exports2=lodash.exports,function(){var e,t="Expected a function",o="__lodash_hash_undefined__",n="__lodash_placeholder__",i=16,l=32,a=64,r=128,s=256,d=1/0,u=9007199254740991,c=NaN,p=4294967295,m=[["ary",r],["bind",1],["bindKey",2],["curry",8],["curryRight",i],["flip",512],["partial",l],["partialRight",a],["rearg",s]],h="[object Arguments]",f="[object Array]",v="[object Boolean]",g="[object Date]",y="[object Error]",b="[object Function]",w="[object GeneratorFunction]",k="[object Map]",_="[object Number]",C="[object Object]",x="[object Promise]",S="[object RegExp]",V="[object Set]",N="[object String]",E="[object Symbol]",$="[object WeakMap]",D="[object ArrayBuffer]",B="[object DataView]",T="[object Float32Array]",O="[object Float64Array]",I="[object Int8Array]",F="[object Int16Array]",L="[object Int32Array]",P="[object Uint8Array]",M="[object Uint8ClampedArray]",A="[object Uint16Array]",R="[object Uint32Array]",z=/\b__p \+= '';/g,U=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,j=/&(?:amp|lt|gt|quot|#39);/g,H=/[&<>"']/g,G=RegExp(j.source),K=RegExp(H.source),q=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,X=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,Z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ee=/[\\^$.*+?()[\]{}|]/g,te=RegExp(ee.source),oe=/^\s+/,ne=/\s/,ie=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,ae=/,? & /,re=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,se=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,ue=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ce=/\w*$/,pe=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,he=/^\[object .+?Constructor\]$/,fe=/^0o[0-7]+$/i,ve=/^(?:0|[1-9]\d*)$/,ge=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ye=/($^)/,be=/['\n\r\u2028\u2029\\]/g,we="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ke="\\u2700-\\u27bf",_e="a-z\\xdf-\\xf6\\xf8-\\xff",Ce="A-Z\\xc0-\\xd6\\xd8-\\xde",xe="\\ufe0e\\ufe0f",Se="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ve="['’]",Ne="[\\ud800-\\udfff]",Ee="["+Se+"]",$e="["+we+"]",De="\\d+",Be="[\\u2700-\\u27bf]",Te="["+_e+"]",Oe="[^\\ud800-\\udfff"+Se+De+ke+_e+Ce+"]",Ie="\\ud83c[\\udffb-\\udfff]",Fe="[^\\ud800-\\udfff]",Le="(?:\\ud83c[\\udde6-\\uddff]){2}",Pe="[\\ud800-\\udbff][\\udc00-\\udfff]",Me="["+Ce+"]",Ae="(?:"+Te+"|"+Oe+")",Re="(?:"+Me+"|"+Oe+")",ze="(?:['’](?:d|ll|m|re|s|t|ve))?",Ue="(?:['’](?:D|LL|M|RE|S|T|VE))?",We="(?:"+$e+"|"+Ie+")?",je="[\\ufe0e\\ufe0f]?",He=je+We+"(?:\\u200d(?:"+[Fe,Le,Pe].join("|")+")"+je+We+")*",Ge="(?:"+[Be,Le,Pe].join("|")+")"+He,Ke="(?:"+[Fe+$e+"?",$e,Le,Pe,Ne].join("|")+")",qe=RegExp(Ve,"g"),Ye=RegExp($e,"g"),Xe=RegExp(Ie+"(?="+Ie+")|"+Ke+He,"g"),Je=RegExp([Me+"?"+Te+"+"+ze+"(?="+[Ee,Me,"$"].join("|")+")",Re+"+"+Ue+"(?="+[Ee,Me+Ae,"$"].join("|")+")",Me+"?"+Ae+"+"+ze,Me+"+"+Ue,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",De,Ge].join("|"),"g"),Qe=RegExp("[\\u200d\\ud800-\\udfff"+we+xe+"]"),Ze=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,et=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tt=-1,ot={};ot[T]=ot[O]=ot[I]=ot[F]=ot[L]=ot[P]=ot[M]=ot[A]=ot[R]=!0,ot[h]=ot[f]=ot[D]=ot[v]=ot[B]=ot[g]=ot[y]=ot[b]=ot[k]=ot[_]=ot[C]=ot[S]=ot[V]=ot[N]=ot[$]=!1;var nt={};nt[h]=nt[f]=nt[D]=nt[B]=nt[v]=nt[g]=nt[T]=nt[O]=nt[I]=nt[F]=nt[L]=nt[k]=nt[_]=nt[C]=nt[S]=nt[V]=nt[N]=nt[E]=nt[P]=nt[M]=nt[A]=nt[R]=!0,nt[y]=nt[b]=nt[$]=!1;var it={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lt=parseFloat,at=parseInt,rt="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,st="object"==typeof self&&self&&self.Object===Object&&self,dt=rt||st||Function("return this")(),ut=exports2&&!exports2.nodeType&&exports2,ct=ut&&module2&&!module2.nodeType&&module2,pt=ct&&ct.exports===ut,mt=pt&&rt.process,ht=function(){try{var e=ct&&ct.require&&ct.require("util").types;return e||mt&&mt.binding&&mt.binding("util")}catch(t){}}(),ft=ht&&ht.isArrayBuffer,vt=ht&&ht.isDate,gt=ht&&ht.isMap,yt=ht&&ht.isRegExp,bt=ht&&ht.isSet,wt=ht&&ht.isTypedArray;function kt(e,t,o){switch(o.length){case 0:return e.call(t);case 1:return e.call(t,o[0]);case 2:return e.call(t,o[0],o[1]);case 3:return e.call(t,o[0],o[1],o[2])}return e.apply(t,o)}function _t(e,t,o,n){for(var i=-1,l=null==e?0:e.length;++i<l;){var a=e[i];t(n,a,o(a),e)}return n}function Ct(e,t){for(var o=-1,n=null==e?0:e.length;++o<n&&!1!==t(e[o],o,e););return e}function xt(e,t){for(var o=null==e?0:e.length;o--&&!1!==t(e[o],o,e););return e}function St(e,t){for(var o=-1,n=null==e?0:e.length;++o<n;)if(!t(e[o],o,e))return!1;return!0}function Vt(e,t){for(var o=-1,n=null==e?0:e.length,i=0,l=[];++o<n;){var a=e[o];t(a,o,e)&&(l[i++]=a)}return l}function Nt(e,t){return!(null==e||!e.length)&&Pt(e,t,0)>-1}function Et(e,t,o){for(var n=-1,i=null==e?0:e.length;++n<i;)if(o(t,e[n]))return!0;return!1}function $t(e,t){for(var o=-1,n=null==e?0:e.length,i=Array(n);++o<n;)i[o]=t(e[o],o,e);return i}function Dt(e,t){for(var o=-1,n=t.length,i=e.length;++o<n;)e[i+o]=t[o];return e}function Bt(e,t,o,n){var i=-1,l=null==e?0:e.length;for(n&&l&&(o=e[++i]);++i<l;)o=t(o,e[i],i,e);return o}function Tt(e,t,o,n){var i=null==e?0:e.length;for(n&&i&&(o=e[--i]);i--;)o=t(o,e[i],i,e);return o}function Ot(e,t){for(var o=-1,n=null==e?0:e.length;++o<n;)if(t(e[o],o,e))return!0;return!1}var It=zt("length");function Ft(e,t,o){var n;return o(e,(function(e,o,i){if(t(e,o,i))return n=o,!1})),n}function Lt(e,t,o,n){for(var i=e.length,l=o+(n?1:-1);n?l--:++l<i;)if(t(e[l],l,e))return l;return-1}function Pt(e,t,o){return t==t?function(e,t,o){for(var n=o-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,o):Lt(e,At,o)}function Mt(e,t,o,n){for(var i=o-1,l=e.length;++i<l;)if(n(e[i],t))return i;return-1}function At(e){return e!=e}function Rt(e,t){var o=null==e?0:e.length;return o?jt(e,t)/o:c}function zt(t){return function(o){return null==o?e:o[t]}}function Ut(t){return function(o){return null==t?e:t[o]}}function Wt(e,t,o,n,i){return i(e,(function(e,i,l){o=n?(n=!1,e):t(o,e,i,l)})),o}function jt(t,o){for(var n,i=-1,l=t.length;++i<l;){var a=o(t[i]);a!==e&&(n=n===e?a:n+a)}return n}function Ht(e,t){for(var o=-1,n=Array(e);++o<e;)n[o]=t(o);return n}function Gt(e){return e?e.slice(0,uo(e)+1).replace(oe,""):e}function Kt(e){return function(t){return e(t)}}function qt(e,t){return $t(t,(function(t){return e[t]}))}function Yt(e,t){return e.has(t)}function Xt(e,t){for(var o=-1,n=e.length;++o<n&&Pt(t,e[o],0)>-1;);return o}function Jt(e,t){for(var o=e.length;o--&&Pt(t,e[o],0)>-1;);return o}function Qt(e,t){for(var o=e.length,n=0;o--;)e[o]===t&&++n;return n}var Zt=Ut({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),eo=Ut({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function to(e){return"\\"+it[e]}function oo(e){return Qe.test(e)}function no(e){var t=-1,o=Array(e.size);return e.forEach((function(e,n){o[++t]=[n,e]})),o}function io(e,t){return function(o){return e(t(o))}}function lo(e,t){for(var o=-1,i=e.length,l=0,a=[];++o<i;){var r=e[o];r!==t&&r!==n||(e[o]=n,a[l++]=o)}return a}function ao(e){var t=-1,o=Array(e.size);return e.forEach((function(e){o[++t]=e})),o}function ro(e){return oo(e)?function(e){for(var t=Xe.lastIndex=0;Xe.test(e);)++t;return t}(e):It(e)}function so(e){return oo(e)?function(e){return e.match(Xe)||[]}(e):function(e){return e.split("")}(e)}function uo(e){for(var t=e.length;t--&&ne.test(e.charAt(t)););return t}var co=Ut({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),po=function ne(we){var ke,_e=(we=null==we?dt:po.defaults(dt.Object(),we,po.pick(dt,et))).Array,Ce=we.Date,xe=we.Error,Se=we.Function,Ve=we.Math,Ne=we.Object,Ee=we.RegExp,$e=we.String,De=we.TypeError,Be=_e.prototype,Te=Se.prototype,Oe=Ne.prototype,Ie=we["__core-js_shared__"],Fe=Te.toString,Le=Oe.hasOwnProperty,Pe=0,Me=(ke=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||""))?"Symbol(src)_1."+ke:"",Ae=Oe.toString,Re=Fe.call(Ne),ze=dt._,Ue=Ee("^"+Fe.call(Le).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=pt?we.Buffer:e,je=we.Symbol,He=we.Uint8Array,Ge=We?We.allocUnsafe:e,Ke=io(Ne.getPrototypeOf,Ne),Xe=Ne.create,Qe=Oe.propertyIsEnumerable,it=Be.splice,rt=je?je.isConcatSpreadable:e,st=je?je.iterator:e,ut=je?je.toStringTag:e,ct=function(){try{var e=ml(Ne,"defineProperty");return e({},"",{}),e}catch(t){}}(),mt=we.clearTimeout!==dt.clearTimeout&&we.clearTimeout,ht=Ce&&Ce.now!==dt.Date.now&&Ce.now,It=we.setTimeout!==dt.setTimeout&&we.setTimeout,Ut=Ve.ceil,mo=Ve.floor,ho=Ne.getOwnPropertySymbols,fo=We?We.isBuffer:e,vo=we.isFinite,go=Be.join,yo=io(Ne.keys,Ne),bo=Ve.max,wo=Ve.min,ko=Ce.now,_o=we.parseInt,Co=Ve.random,xo=Be.reverse,So=ml(we,"DataView"),Vo=ml(we,"Map"),No=ml(we,"Promise"),Eo=ml(we,"Set"),$o=ml(we,"WeakMap"),Do=ml(Ne,"create"),Bo=$o&&new $o,To={},Oo=Wl(So),Io=Wl(Vo),Fo=Wl(No),Lo=Wl(Eo),Po=Wl($o),Mo=je?je.prototype:e,Ao=Mo?Mo.valueOf:e,Ro=Mo?Mo.toString:e;function zo(e){if(ar(e)&&!Ya(e)&&!(e instanceof Ho)){if(e instanceof jo)return e;if(Le.call(e,"__wrapped__"))return jl(e)}return new jo(e)}var Uo=function(){function t(){}return function(o){if(!lr(o))return{};if(Xe)return Xe(o);t.prototype=o;var n=new t;return t.prototype=e,n}}();function Wo(){}function jo(t,o){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=e}function Ho(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Go(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var n=e[t];this.set(n[0],n[1])}}function Ko(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var n=e[t];this.set(n[0],n[1])}}function qo(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var n=e[t];this.set(n[0],n[1])}}function Yo(e){var t=-1,o=null==e?0:e.length;for(this.__data__=new qo;++t<o;)this.add(e[t])}function Xo(e){var t=this.__data__=new Ko(e);this.size=t.size}function Jo(e,t){var o=Ya(e),n=!o&&qa(e),i=!o&&!n&&Za(e),l=!o&&!n&&!i&&hr(e),a=o||n||i||l,r=a?Ht(e.length,$e):[],s=r.length;for(var d in e)!t&&!Le.call(e,d)||a&&("length"==d||i&&("offset"==d||"parent"==d)||l&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||wl(d,s))||r.push(d);return r}function Qo(t){var o=t.length;return o?t[Xn(0,o-1)]:e}function Zo(e,t){return Pl(Bi(e),dn(t,0,e.length))}function en(e){return Pl(Bi(e))}function tn(t,o,n){(n!==e&&!Ha(t[o],n)||n===e&&!(o in t))&&rn(t,o,n)}function on(t,o,n){var i=t[o];Le.call(t,o)&&Ha(i,n)&&(n!==e||o in t)||rn(t,o,n)}function nn(e,t){for(var o=e.length;o--;)if(Ha(e[o][0],t))return o;return-1}function ln(e,t,o,n){return hn(e,(function(e,i,l){t(n,e,o(e),l)})),n}function an(e,t){return e&&Ti(t,Lr(t),e)}function rn(e,t,o){"__proto__"==t&&ct?ct(e,t,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[t]=o}function sn(t,o){for(var n=-1,i=o.length,l=_e(i),a=null==t;++n<i;)l[n]=a?e:Br(t,o[n]);return l}function dn(t,o,n){return t==t&&(n!==e&&(t=t<=n?t:n),o!==e&&(t=t>=o?t:o)),t}function un(t,o,n,i,l,a){var r,s=1&o,d=2&o,u=4&o;if(n&&(r=l?n(t,i,l,a):n(t)),r!==e)return r;if(!lr(t))return t;var c=Ya(t);if(c){if(r=function(e){var t=e.length,o=new e.constructor(t);return t&&"string"==typeof e[0]&&Le.call(e,"index")&&(o.index=e.index,o.input=e.input),o}(t),!s)return Bi(t,r)}else{var p=vl(t),m=p==b||p==w;if(Za(t))return Si(t,s);if(p==C||p==h||m&&!l){if(r=d||m?{}:yl(t),!s)return d?function(e,t){return Ti(e,fl(e),t)}(t,function(e,t){return e&&Ti(t,Pr(t),e)}(r,t)):function(e,t){return Ti(e,hl(e),t)}(t,an(r,t))}else{if(!nt[p])return l?t:{};r=function(e,t,o){var n,i=e.constructor;switch(t){case D:return Vi(e);case v:case g:return new i(+e);case B:return function(e,t){var o=t?Vi(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.byteLength)}(e,o);case T:case O:case I:case F:case L:case P:case M:case A:case R:return Ni(e,o);case k:return new i;case _:case N:return new i(e);case S:return function(e){var t=new e.constructor(e.source,ce.exec(e));return t.lastIndex=e.lastIndex,t}(e);case V:return new i;case E:return n=e,Ao?Ne(Ao.call(n)):{}}}(t,p,s)}}a||(a=new Xo);var f=a.get(t);if(f)return f;a.set(t,r),cr(t)?t.forEach((function(e){r.add(un(e,o,n,e,t,a))})):rr(t)&&t.forEach((function(e,i){r.set(i,un(e,o,n,i,t,a))}));var y=c?e:(u?d?al:ll:d?Pr:Lr)(t);return Ct(y||t,(function(e,i){y&&(e=t[i=e]),on(r,i,un(e,o,n,i,t,a))})),r}function cn(t,o,n){var i=n.length;if(null==t)return!i;for(t=Ne(t);i--;){var l=n[i],a=o[l],r=t[l];if(r===e&&!(l in t)||!a(r))return!1}return!0}function pn(o,n,i){if("function"!=typeof o)throw new De(t);return Ol((function(){o.apply(e,i)}),n)}function mn(e,t,o,n){var i=-1,l=Nt,a=!0,r=e.length,s=[],d=t.length;if(!r)return s;o&&(t=$t(t,Kt(o))),n?(l=Et,a=!1):t.length>=200&&(l=Yt,a=!1,t=new Yo(t));e:for(;++i<r;){var u=e[i],c=null==o?u:o(u);if(u=n||0!==u?u:0,a&&c==c){for(var p=d;p--;)if(t[p]===c)continue e;s.push(u)}else l(t,c,n)||s.push(u)}return s}zo.templateSettings={escape:q,evaluate:Y,interpolate:X,variable:"",imports:{_:zo}},zo.prototype=Wo.prototype,zo.prototype.constructor=zo,jo.prototype=Uo(Wo.prototype),jo.prototype.constructor=jo,Ho.prototype=Uo(Wo.prototype),Ho.prototype.constructor=Ho,Go.prototype.clear=function(){this.__data__=Do?Do(null):{},this.size=0},Go.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Go.prototype.get=function(t){var n=this.__data__;if(Do){var i=n[t];return i===o?e:i}return Le.call(n,t)?n[t]:e},Go.prototype.has=function(t){var o=this.__data__;return Do?o[t]!==e:Le.call(o,t)},Go.prototype.set=function(t,n){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Do&&n===e?o:n,this},Ko.prototype.clear=function(){this.__data__=[],this.size=0},Ko.prototype.delete=function(e){var t=this.__data__,o=nn(t,e);return!(o<0||(o==t.length-1?t.pop():it.call(t,o,1),--this.size,0))},Ko.prototype.get=function(t){var o=this.__data__,n=nn(o,t);return n<0?e:o[n][1]},Ko.prototype.has=function(e){return nn(this.__data__,e)>-1},Ko.prototype.set=function(e,t){var o=this.__data__,n=nn(o,e);return n<0?(++this.size,o.push([e,t])):o[n][1]=t,this},qo.prototype.clear=function(){this.size=0,this.__data__={hash:new Go,map:new(Vo||Ko),string:new Go}},qo.prototype.delete=function(e){var t=cl(this,e).delete(e);return this.size-=t?1:0,t},qo.prototype.get=function(e){return cl(this,e).get(e)},qo.prototype.has=function(e){return cl(this,e).has(e)},qo.prototype.set=function(e,t){var o=cl(this,e),n=o.size;return o.set(e,t),this.size+=o.size==n?0:1,this},Yo.prototype.add=Yo.prototype.push=function(e){return this.__data__.set(e,o),this},Yo.prototype.has=function(e){return this.__data__.has(e)},Xo.prototype.clear=function(){this.__data__=new Ko,this.size=0},Xo.prototype.delete=function(e){var t=this.__data__,o=t.delete(e);return this.size=t.size,o},Xo.prototype.get=function(e){return this.__data__.get(e)},Xo.prototype.has=function(e){return this.__data__.has(e)},Xo.prototype.set=function(e,t){var o=this.__data__;if(o instanceof Ko){var n=o.__data__;if(!Vo||n.length<199)return n.push([e,t]),this.size=++o.size,this;o=this.__data__=new qo(n)}return o.set(e,t),this.size=o.size,this};var hn=Fi(_n),fn=Fi(Cn,!0);function vn(e,t){var o=!0;return hn(e,(function(e,n,i){return o=!!t(e,n,i)})),o}function gn(t,o,n){for(var i=-1,l=t.length;++i<l;){var a=t[i],r=o(a);if(null!=r&&(s===e?r==r&&!mr(r):n(r,s)))var s=r,d=a}return d}function yn(e,t){var o=[];return hn(e,(function(e,n,i){t(e,n,i)&&o.push(e)})),o}function bn(e,t,o,n,i){var l=-1,a=e.length;for(o||(o=bl),i||(i=[]);++l<a;){var r=e[l];t>0&&o(r)?t>1?bn(r,t-1,o,n,i):Dt(i,r):n||(i[i.length]=r)}return i}var wn=Li(),kn=Li(!0);function _n(e,t){return e&&wn(e,t,Lr)}function Cn(e,t){return e&&kn(e,t,Lr)}function xn(e,t){return Vt(t,(function(t){return or(e[t])}))}function Sn(t,o){for(var n=0,i=(o=ki(o,t)).length;null!=t&&n<i;)t=t[Ul(o[n++])];return n&&n==i?t:e}function Vn(e,t,o){var n=t(e);return Ya(e)?n:Dt(n,o(e))}function Nn(t){return null==t?t===e?"[object Undefined]":"[object Null]":ut&&ut in Ne(t)?function(t){var o=Le.call(t,ut),n=t[ut];try{t[ut]=e;var i=!0}catch(a){}var l=Ae.call(t);return i&&(o?t[ut]=n:delete t[ut]),l}(t):function(e){return Ae.call(e)}(t)}function En(e,t){return e>t}function $n(e,t){return null!=e&&Le.call(e,t)}function Dn(e,t){return null!=e&&t in Ne(e)}function Bn(t,o,n){for(var i=n?Et:Nt,l=t[0].length,a=t.length,r=a,s=_e(a),d=1/0,u=[];r--;){var c=t[r];r&&o&&(c=$t(c,Kt(o))),d=wo(c.length,d),s[r]=!n&&(o||l>=120&&c.length>=120)?new Yo(r&&c):e}c=t[0];var p=-1,m=s[0];e:for(;++p<l&&u.length<d;){var h=c[p],f=o?o(h):h;if(h=n||0!==h?h:0,!(m?Yt(m,f):i(u,f,n))){for(r=a;--r;){var v=s[r];if(!(v?Yt(v,f):i(t[r],f,n)))continue e}m&&m.push(f),u.push(h)}}return u}function Tn(t,o,n){var i=null==(t=$l(t,o=ki(o,t)))?t:t[Ul(ta(o))];return null==i?e:kt(i,t,n)}function On(e){return ar(e)&&Nn(e)==h}function In(t,o,n,i,l){return t===o||(null==t||null==o||!ar(t)&&!ar(o)?t!=t&&o!=o:function(t,o,n,i,l,a){var r=Ya(t),s=Ya(o),d=r?f:vl(t),u=s?f:vl(o),c=(d=d==h?C:d)==C,p=(u=u==h?C:u)==C,m=d==u;if(m&&Za(t)){if(!Za(o))return!1;r=!0,c=!1}if(m&&!c)return a||(a=new Xo),r||hr(t)?nl(t,o,n,i,l,a):function(e,t,o,n,i,l,a){switch(o){case B:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case D:return!(e.byteLength!=t.byteLength||!l(new He(e),new He(t)));case v:case g:case _:return Ha(+e,+t);case y:return e.name==t.name&&e.message==t.message;case S:case N:return e==t+"";case k:var r=no;case V:var s=1&n;if(r||(r=ao),e.size!=t.size&&!s)return!1;var d=a.get(e);if(d)return d==t;n|=2,a.set(e,t);var u=nl(r(e),r(t),n,i,l,a);return a.delete(e),u;case E:if(Ao)return Ao.call(e)==Ao.call(t)}return!1}(t,o,d,n,i,l,a);if(!(1&n)){var b=c&&Le.call(t,"__wrapped__"),w=p&&Le.call(o,"__wrapped__");if(b||w){var x=b?t.value():t,$=w?o.value():o;return a||(a=new Xo),l(x,$,n,i,a)}}return!!m&&(a||(a=new Xo),function(t,o,n,i,l,a){var r=1&n,s=ll(t),d=s.length,u=ll(o).length;if(d!=u&&!r)return!1;for(var c=d;c--;){var p=s[c];if(!(r?p in o:Le.call(o,p)))return!1}var m=a.get(t),h=a.get(o);if(m&&h)return m==o&&h==t;var f=!0;a.set(t,o),a.set(o,t);for(var v=r;++c<d;){var g=t[p=s[c]],y=o[p];if(i)var b=r?i(y,g,p,o,t,a):i(g,y,p,t,o,a);if(!(b===e?g===y||l(g,y,n,i,a):b)){f=!1;break}v||(v="constructor"==p)}if(f&&!v){var w=t.constructor,k=o.constructor;w==k||!("constructor"in t)||!("constructor"in o)||"function"==typeof w&&w instanceof w&&"function"==typeof k&&k instanceof k||(f=!1)}return a.delete(t),a.delete(o),f}(t,o,n,i,l,a))}(t,o,n,i,In,l))}function Fn(t,o,n,i){var l=n.length,a=l,r=!i;if(null==t)return!a;for(t=Ne(t);l--;){var s=n[l];if(r&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++l<a;){var d=(s=n[l])[0],u=t[d],c=s[1];if(r&&s[2]){if(u===e&&!(d in t))return!1}else{var p=new Xo;if(i)var m=i(u,c,d,t,o,p);if(!(m===e?In(c,u,3,i,p):m))return!1}}return!0}function Ln(e){return!(!lr(e)||(t=e,Me&&Me in t))&&(or(e)?Ue:he).test(Wl(e));var t}function Pn(e){return"function"==typeof e?e:null==e?ss:"object"==typeof e?Ya(e)?Wn(e[0],e[1]):Un(e):gs(e)}function Mn(e){if(!Sl(e))return yo(e);var t=[];for(var o in Ne(e))Le.call(e,o)&&"constructor"!=o&&t.push(o);return t}function An(e){if(!lr(e))return function(e){var t=[];if(null!=e)for(var o in Ne(e))t.push(o);return t}(e);var t=Sl(e),o=[];for(var n in e)("constructor"!=n||!t&&Le.call(e,n))&&o.push(n);return o}function Rn(e,t){return e<t}function zn(e,t){var o=-1,n=Ja(e)?_e(e.length):[];return hn(e,(function(e,i,l){n[++o]=t(e,i,l)})),n}function Un(e){var t=pl(e);return 1==t.length&&t[0][2]?Nl(t[0][0],t[0][1]):function(o){return o===e||Fn(o,e,t)}}function Wn(t,o){return _l(t)&&Vl(o)?Nl(Ul(t),o):function(n){var i=Br(n,t);return i===e&&i===o?Tr(n,t):In(o,i,3)}}function jn(t,o,n,i,l){t!==o&&wn(o,(function(a,r){if(l||(l=new Xo),lr(a))!function(t,o,n,i,l,a,r){var s=Bl(t,n),d=Bl(o,n),u=r.get(d);if(u)tn(t,n,u);else{var c=a?a(s,d,n+"",t,o,r):e,p=c===e;if(p){var m=Ya(d),h=!m&&Za(d),f=!m&&!h&&hr(d);c=d,m||h||f?Ya(s)?c=s:Qa(s)?c=Bi(s):h?(p=!1,c=Si(d,!0)):f?(p=!1,c=Ni(d,!0)):c=[]:dr(d)||qa(d)?(c=s,qa(s)?c=_r(s):lr(s)&&!or(s)||(c=yl(d))):p=!1}p&&(r.set(d,c),l(c,d,i,a,r),r.delete(d)),tn(t,n,c)}}(t,o,r,n,jn,i,l);else{var s=i?i(Bl(t,r),a,r+"",t,o,l):e;s===e&&(s=a),tn(t,r,s)}}),Pr)}function Hn(t,o){var n=t.length;if(n)return wl(o+=o<0?n:0,n)?t[o]:e}function Gn(e,t,o){t=t.length?$t(t,(function(e){return Ya(e)?function(t){return Sn(t,1===e.length?e[0]:e)}:e})):[ss];var n=-1;return t=$t(t,Kt(ul())),function(e,t){var o=e.length;for(e.sort(t);o--;)e[o]=e[o].value;return e}(zn(e,(function(e,o,i){return{criteria:$t(t,(function(t){return t(e)})),index:++n,value:e}})),(function(e,t){return function(e,t,o){for(var n=-1,i=e.criteria,l=t.criteria,a=i.length,r=o.length;++n<a;){var s=Ei(i[n],l[n]);if(s)return n>=r?s:s*("desc"==o[n]?-1:1)}return e.index-t.index}(e,t,o)}))}function Kn(e,t,o){for(var n=-1,i=t.length,l={};++n<i;){var a=t[n],r=Sn(e,a);o(r,a)&&ti(l,ki(a,e),r)}return l}function qn(e,t,o,n){var i=n?Mt:Pt,l=-1,a=t.length,r=e;for(e===t&&(t=Bi(t)),o&&(r=$t(e,Kt(o)));++l<a;)for(var s=0,d=t[l],u=o?o(d):d;(s=i(r,u,s,n))>-1;)r!==e&&it.call(r,s,1),it.call(e,s,1);return e}function Yn(e,t){for(var o=e?t.length:0,n=o-1;o--;){var i=t[o];if(o==n||i!==l){var l=i;wl(i)?it.call(e,i,1):mi(e,i)}}return e}function Xn(e,t){return e+mo(Co()*(t-e+1))}function Jn(e,t){var o="";if(!e||t<1||t>u)return o;do{t%2&&(o+=e),(t=mo(t/2))&&(e+=e)}while(t);return o}function Qn(e,t){return Il(El(e,t,ss),e+"")}function Zn(e){return Qo(Hr(e))}function ei(e,t){var o=Hr(e);return Pl(o,dn(t,0,o.length))}function ti(t,o,n,i){if(!lr(t))return t;for(var l=-1,a=(o=ki(o,t)).length,r=a-1,s=t;null!=s&&++l<a;){var d=Ul(o[l]),u=n;if("__proto__"===d||"constructor"===d||"prototype"===d)return t;if(l!=r){var c=s[d];(u=i?i(c,d,s):e)===e&&(u=lr(c)?c:wl(o[l+1])?[]:{})}on(s,d,u),s=s[d]}return t}var oi=Bo?function(e,t){return Bo.set(e,t),e}:ss,ni=ct?function(e,t){return ct(e,"toString",{configurable:!0,enumerable:!1,value:ls(t),writable:!0})}:ss;function ii(e){return Pl(Hr(e))}function li(e,t,o){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(o=o>i?i:o)<0&&(o+=i),i=t>o?0:o-t>>>0,t>>>=0;for(var l=_e(i);++n<i;)l[n]=e[n+t];return l}function ai(e,t){var o;return hn(e,(function(e,n,i){return!(o=t(e,n,i))})),!!o}function ri(e,t,o){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;n<i;){var l=n+i>>>1,a=e[l];null!==a&&!mr(a)&&(o?a<=t:a<t)?n=l+1:i=l}return i}return si(e,t,ss,o)}function si(t,o,n,i){var l=0,a=null==t?0:t.length;if(0===a)return 0;for(var r=(o=n(o))!=o,s=null===o,d=mr(o),u=o===e;l<a;){var c=mo((l+a)/2),p=n(t[c]),m=p!==e,h=null===p,f=p==p,v=mr(p);if(r)var g=i||f;else g=u?f&&(i||m):s?f&&m&&(i||!h):d?f&&m&&!h&&(i||!v):!h&&!v&&(i?p<=o:p<o);g?l=c+1:a=c}return wo(a,4294967294)}function di(e,t){for(var o=-1,n=e.length,i=0,l=[];++o<n;){var a=e[o],r=t?t(a):a;if(!o||!Ha(r,s)){var s=r;l[i++]=0===a?0:a}}return l}function ui(e){return"number"==typeof e?e:mr(e)?c:+e}function ci(e){if("string"==typeof e)return e;if(Ya(e))return $t(e,ci)+"";if(mr(e))return Ro?Ro.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function pi(e,t,o){var n=-1,i=Nt,l=e.length,a=!0,r=[],s=r;if(o)a=!1,i=Et;else if(l>=200){var d=t?null:Ji(e);if(d)return ao(d);a=!1,i=Yt,s=new Yo}else s=t?[]:r;e:for(;++n<l;){var u=e[n],c=t?t(u):u;if(u=o||0!==u?u:0,a&&c==c){for(var p=s.length;p--;)if(s[p]===c)continue e;t&&s.push(c),r.push(u)}else i(s,c,o)||(s!==r&&s.push(c),r.push(u))}return r}function mi(e,t){return null==(e=$l(e,t=ki(t,e)))||delete e[Ul(ta(t))]}function hi(e,t,o,n){return ti(e,t,o(Sn(e,t)),n)}function fi(e,t,o,n){for(var i=e.length,l=n?i:-1;(n?l--:++l<i)&&t(e[l],l,e););return o?li(e,n?0:l,n?l+1:i):li(e,n?l+1:0,n?i:l)}function vi(e,t){var o=e;return o instanceof Ho&&(o=o.value()),Bt(t,(function(e,t){return t.func.apply(t.thisArg,Dt([e],t.args))}),o)}function gi(e,t,o){var n=e.length;if(n<2)return n?pi(e[0]):[];for(var i=-1,l=_e(n);++i<n;)for(var a=e[i],r=-1;++r<n;)r!=i&&(l[i]=mn(l[i]||a,e[r],t,o));return pi(bn(l,1),t,o)}function yi(t,o,n){for(var i=-1,l=t.length,a=o.length,r={};++i<l;){var s=i<a?o[i]:e;n(r,t[i],s)}return r}function bi(e){return Qa(e)?e:[]}function wi(e){return"function"==typeof e?e:ss}function ki(e,t){return Ya(e)?e:_l(e,t)?[e]:zl(Cr(e))}var _i=Qn;function Ci(t,o,n){var i=t.length;return n=n===e?i:n,!o&&n>=i?t:li(t,o,n)}var xi=mt||function(e){return dt.clearTimeout(e)};function Si(e,t){if(t)return e.slice();var o=e.length,n=Ge?Ge(o):new e.constructor(o);return e.copy(n),n}function Vi(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function Ni(e,t){var o=t?Vi(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.length)}function Ei(t,o){if(t!==o){var n=t!==e,i=null===t,l=t==t,a=mr(t),r=o!==e,s=null===o,d=o==o,u=mr(o);if(!s&&!u&&!a&&t>o||a&&r&&d&&!s&&!u||i&&r&&d||!n&&d||!l)return 1;if(!i&&!a&&!u&&t<o||u&&n&&l&&!i&&!a||s&&n&&l||!r&&l||!d)return-1}return 0}function $i(e,t,o,n){for(var i=-1,l=e.length,a=o.length,r=-1,s=t.length,d=bo(l-a,0),u=_e(s+d),c=!n;++r<s;)u[r]=t[r];for(;++i<a;)(c||i<l)&&(u[o[i]]=e[i]);for(;d--;)u[r++]=e[i++];return u}function Di(e,t,o,n){for(var i=-1,l=e.length,a=-1,r=o.length,s=-1,d=t.length,u=bo(l-r,0),c=_e(u+d),p=!n;++i<u;)c[i]=e[i];for(var m=i;++s<d;)c[m+s]=t[s];for(;++a<r;)(p||i<l)&&(c[m+o[a]]=e[i++]);return c}function Bi(e,t){var o=-1,n=e.length;for(t||(t=_e(n));++o<n;)t[o]=e[o];return t}function Ti(t,o,n,i){var l=!n;n||(n={});for(var a=-1,r=o.length;++a<r;){var s=o[a],d=i?i(n[s],t[s],s,n,t):e;d===e&&(d=t[s]),l?rn(n,s,d):on(n,s,d)}return n}function Oi(e,t){return function(o,n){var i=Ya(o)?_t:ln,l=t?t():{};return i(o,e,ul(n,2),l)}}function Ii(t){return Qn((function(o,n){var i=-1,l=n.length,a=l>1?n[l-1]:e,r=l>2?n[2]:e;for(a=t.length>3&&"function"==typeof a?(l--,a):e,r&&kl(n[0],n[1],r)&&(a=l<3?e:a,l=1),o=Ne(o);++i<l;){var s=n[i];s&&t(o,s,i,a)}return o}))}function Fi(e,t){return function(o,n){if(null==o)return o;if(!Ja(o))return e(o,n);for(var i=o.length,l=t?i:-1,a=Ne(o);(t?l--:++l<i)&&!1!==n(a[l],l,a););return o}}function Li(e){return function(t,o,n){for(var i=-1,l=Ne(t),a=n(t),r=a.length;r--;){var s=a[e?r:++i];if(!1===o(l[s],s,l))break}return t}}function Pi(t){return function(o){var n=oo(o=Cr(o))?so(o):e,i=n?n[0]:o.charAt(0),l=n?Ci(n,1).join(""):o.slice(1);return i[t]()+l}}function Mi(e){return function(t){return Bt(os(qr(t).replace(qe,"")),e,"")}}function Ai(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var o=Uo(e.prototype),n=e.apply(o,t);return lr(n)?n:o}}function Ri(t){return function(o,n,i){var l=Ne(o);if(!Ja(o)){var a=ul(n,3);o=Lr(o),n=function(e){return a(l[e],e,l)}}var r=t(o,n,i);return r>-1?l[a?o[r]:r]:e}}function zi(o){return il((function(n){var i=n.length,l=i,a=jo.prototype.thru;for(o&&n.reverse();l--;){var r=n[l];if("function"!=typeof r)throw new De(t);if(a&&!s&&"wrapper"==sl(r))var s=new jo([],!0)}for(l=s?l:i;++l<i;){var d=sl(r=n[l]),u="wrapper"==d?rl(r):e;s=u&&Cl(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?s[sl(u[0])].apply(s,u[3]):1==r.length&&Cl(r)?s[d]():s.thru(r)}return function(){var e=arguments,t=e[0];if(s&&1==e.length&&Ya(t))return s.plant(t).value();for(var o=0,l=i?n[o].apply(this,e):t;++o<i;)l=n[o].call(this,l);return l}}))}function Ui(t,o,n,i,l,a,s,d,u,c){var p=o&r,m=1&o,h=2&o,f=24&o,v=512&o,g=h?e:Ai(t);return function e(){for(var r=arguments.length,y=_e(r),b=r;b--;)y[b]=arguments[b];if(f)var w=dl(e),k=Qt(y,w);if(i&&(y=$i(y,i,l,f)),a&&(y=Di(y,a,s,f)),r-=k,f&&r<c){var _=lo(y,w);return Yi(t,o,Ui,e.placeholder,n,y,_,d,u,c-r)}var C=m?n:this,x=h?C[t]:t;return r=y.length,d?y=Dl(y,d):v&&r>1&&y.reverse(),p&&u<r&&(y.length=u),this&&this!==dt&&this instanceof e&&(x=g||Ai(x)),x.apply(C,y)}}function Wi(e,t){return function(o,n){return function(e,t,o,n){return _n(e,(function(e,i,l){t(n,o(e),i,l)})),n}(o,e,t(n),{})}}function ji(t,o){return function(n,i){var l;if(n===e&&i===e)return o;if(n!==e&&(l=n),i!==e){if(l===e)return i;"string"==typeof n||"string"==typeof i?(n=ci(n),i=ci(i)):(n=ui(n),i=ui(i)),l=t(n,i)}return l}}function Hi(e){return il((function(t){return t=$t(t,Kt(ul())),Qn((function(o){var n=this;return e(t,(function(e){return kt(e,n,o)}))}))}))}function Gi(t,o){var n=(o=o===e?" ":ci(o)).length;if(n<2)return n?Jn(o,t):o;var i=Jn(o,Ut(t/ro(o)));return oo(o)?Ci(so(i),0,t).join(""):i.slice(0,t)}function Ki(t){return function(o,n,i){return i&&"number"!=typeof i&&kl(o,n,i)&&(n=i=e),o=yr(o),n===e?(n=o,o=0):n=yr(n),function(e,t,o,n){for(var i=-1,l=bo(Ut((t-e)/(o||1)),0),a=_e(l);l--;)a[n?l:++i]=e,e+=o;return a}(o,n,i=i===e?o<n?1:-1:yr(i),t)}}function qi(e){return function(t,o){return"string"==typeof t&&"string"==typeof o||(t=kr(t),o=kr(o)),e(t,o)}}function Yi(t,o,n,i,r,s,d,u,c,p){var m=8&o;o|=m?l:a,4&(o&=~(m?a:l))||(o&=-4);var h=[t,o,r,m?s:e,m?d:e,m?e:s,m?e:d,u,c,p],f=n.apply(e,h);return Cl(t)&&Tl(f,h),f.placeholder=i,Fl(f,t,o)}function Xi(e){var t=Ve[e];return function(e,o){if(e=kr(e),(o=null==o?0:wo(br(o),292))&&vo(e)){var n=(Cr(e)+"e").split("e");return+((n=(Cr(t(n[0]+"e"+(+n[1]+o)))+"e").split("e"))[0]+"e"+(+n[1]-o))}return t(e)}}var Ji=Eo&&1/ao(new Eo([,-0]))[1]==d?function(e){return new Eo(e)}:ms;function Qi(e){return function(t){var o=vl(t);return o==k?no(t):o==V?function(e){var t=-1,o=Array(e.size);return e.forEach((function(e){o[++t]=[e,e]})),o}(t):function(e,t){return $t(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Zi(o,d,u,c,p,m,h,f){var v=2&d;if(!v&&"function"!=typeof o)throw new De(t);var g=c?c.length:0;if(g||(d&=-97,c=p=e),h=h===e?h:bo(br(h),0),f=f===e?f:br(f),g-=p?p.length:0,d&a){var y=c,b=p;c=p=e}var w=v?e:rl(o),k=[o,d,u,c,p,y,b,m,h,f];if(w&&function(e,t){var o=e[1],i=t[1],l=o|i,a=l<131,d=i==r&&8==o||i==r&&o==s&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==o;if(!a&&!d)return e;1&i&&(e[2]=t[2],l|=1&o?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?$i(c,u,t[4]):u,e[4]=c?lo(e[3],n):t[4]}(u=t[5])&&(c=e[5],e[5]=c?Di(c,u,t[6]):u,e[6]=c?lo(e[5],n):t[6]),(u=t[7])&&(e[7]=u),i&r&&(e[8]=null==e[8]?t[8]:wo(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=l}(k,w),o=k[0],d=k[1],u=k[2],c=k[3],p=k[4],!(f=k[9]=k[9]===e?v?0:o.length:bo(k[9]-g,0))&&24&d&&(d&=-25),d&&1!=d)_=8==d||d==i?function(t,o,n){var i=Ai(t);return function l(){for(var a=arguments.length,r=_e(a),s=a,d=dl(l);s--;)r[s]=arguments[s];var u=a<3&&r[0]!==d&&r[a-1]!==d?[]:lo(r,d);return(a-=u.length)<n?Yi(t,o,Ui,l.placeholder,e,r,u,e,e,n-a):kt(this&&this!==dt&&this instanceof l?i:t,this,r)}}(o,d,f):d!=l&&33!=d||p.length?Ui.apply(e,k):function(e,t,o,n){var i=1&t,l=Ai(e);return function t(){for(var a=-1,r=arguments.length,s=-1,d=n.length,u=_e(d+r),c=this&&this!==dt&&this instanceof t?l:e;++s<d;)u[s]=n[s];for(;r--;)u[s++]=arguments[++a];return kt(c,i?o:this,u)}}(o,d,u,c);else var _=function(e,t,o){var n=1&t,i=Ai(e);return function t(){return(this&&this!==dt&&this instanceof t?i:e).apply(n?o:this,arguments)}}(o,d,u);return Fl((w?oi:Tl)(_,k),o,d)}function el(t,o,n,i){return t===e||Ha(t,Oe[n])&&!Le.call(i,n)?o:t}function tl(t,o,n,i,l,a){return lr(t)&&lr(o)&&(a.set(o,t),jn(t,o,e,tl,a),a.delete(o)),t}function ol(t){return dr(t)?e:t}function nl(t,o,n,i,l,a){var r=1&n,s=t.length,d=o.length;if(s!=d&&!(r&&d>s))return!1;var u=a.get(t),c=a.get(o);if(u&&c)return u==o&&c==t;var p=-1,m=!0,h=2&n?new Yo:e;for(a.set(t,o),a.set(o,t);++p<s;){var f=t[p],v=o[p];if(i)var g=r?i(v,f,p,o,t,a):i(f,v,p,t,o,a);if(g!==e){if(g)continue;m=!1;break}if(h){if(!Ot(o,(function(e,t){if(!Yt(h,t)&&(f===e||l(f,e,n,i,a)))return h.push(t)}))){m=!1;break}}else if(f!==v&&!l(f,v,n,i,a)){m=!1;break}}return a.delete(t),a.delete(o),m}function il(t){return Il(El(t,e,Xl),t+"")}function ll(e){return Vn(e,Lr,hl)}function al(e){return Vn(e,Pr,fl)}var rl=Bo?function(e){return Bo.get(e)}:ms;function sl(e){for(var t=e.name+"",o=To[t],n=Le.call(To,t)?o.length:0;n--;){var i=o[n],l=i.func;if(null==l||l==e)return i.name}return t}function dl(e){return(Le.call(zo,"placeholder")?zo:e).placeholder}function ul(){var e=zo.iteratee||ds;return e=e===ds?Pn:e,arguments.length?e(arguments[0],arguments[1]):e}function cl(e,t){var o,n,i=e.__data__;return("string"==(n=typeof(o=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==o:null===o)?i["string"==typeof t?"string":"hash"]:i.map}function pl(e){for(var t=Lr(e),o=t.length;o--;){var n=t[o],i=e[n];t[o]=[n,i,Vl(i)]}return t}function ml(t,o){var n=function(t,o){return null==t?e:t[o]}(t,o);return Ln(n)?n:e}var hl=ho?function(e){return null==e?[]:(e=Ne(e),Vt(ho(e),(function(t){return Qe.call(e,t)})))}:ws,fl=ho?function(e){for(var t=[];e;)Dt(t,hl(e)),e=Ke(e);return t}:ws,vl=Nn;function gl(e,t,o){for(var n=-1,i=(t=ki(t,e)).length,l=!1;++n<i;){var a=Ul(t[n]);if(!(l=null!=e&&o(e,a)))break;e=e[a]}return l||++n!=i?l:!!(i=null==e?0:e.length)&&ir(i)&&wl(a,i)&&(Ya(e)||qa(e))}function yl(e){return"function"!=typeof e.constructor||Sl(e)?{}:Uo(Ke(e))}function bl(e){return Ya(e)||qa(e)||!!(rt&&e&&e[rt])}function wl(e,t){var o=typeof e;return!!(t=null==t?u:t)&&("number"==o||"symbol"!=o&&ve.test(e))&&e>-1&&e%1==0&&e<t}function kl(e,t,o){if(!lr(o))return!1;var n=typeof t;return!!("number"==n?Ja(o)&&wl(t,o.length):"string"==n&&t in o)&&Ha(o[t],e)}function _l(e,t){if(Ya(e))return!1;var o=typeof e;return!("number"!=o&&"symbol"!=o&&"boolean"!=o&&null!=e&&!mr(e))||Q.test(e)||!J.test(e)||null!=t&&e in Ne(t)}function Cl(e){var t=sl(e),o=zo[t];if("function"!=typeof o||!(t in Ho.prototype))return!1;if(e===o)return!0;var n=rl(o);return!!n&&e===n[0]}(So&&vl(new So(new ArrayBuffer(1)))!=B||Vo&&vl(new Vo)!=k||No&&vl(No.resolve())!=x||Eo&&vl(new Eo)!=V||$o&&vl(new $o)!=$)&&(vl=function(t){var o=Nn(t),n=o==C?t.constructor:e,i=n?Wl(n):"";if(i)switch(i){case Oo:return B;case Io:return k;case Fo:return x;case Lo:return V;case Po:return $}return o});var xl=Ie?or:ks;function Sl(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Oe)}function Vl(e){return e==e&&!lr(e)}function Nl(t,o){return function(n){return null!=n&&n[t]===o&&(o!==e||t in Ne(n))}}function El(t,o,n){return o=bo(o===e?t.length-1:o,0),function(){for(var e=arguments,i=-1,l=bo(e.length-o,0),a=_e(l);++i<l;)a[i]=e[o+i];i=-1;for(var r=_e(o+1);++i<o;)r[i]=e[i];return r[o]=n(a),kt(t,this,r)}}function $l(e,t){return t.length<2?e:Sn(e,li(t,0,-1))}function Dl(t,o){for(var n=t.length,i=wo(o.length,n),l=Bi(t);i--;){var a=o[i];t[i]=wl(a,n)?l[a]:e}return t}function Bl(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Tl=Ll(oi),Ol=It||function(e,t){return dt.setTimeout(e,t)},Il=Ll(ni);function Fl(e,t,o){var n=t+"";return Il(e,function(e,t){var o=t.length;if(!o)return e;var n=o-1;return t[n]=(o>1?"& ":"")+t[n],t=t.join(o>2?", ":" "),e.replace(ie,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return Ct(m,(function(o){var n="_."+o[0];t&o[1]&&!Nt(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(le);return t?t[1].split(ae):[]}(n),o)))}function Ll(t){var o=0,n=0;return function(){var i=ko(),l=16-(i-n);if(n=i,l>0){if(++o>=800)return arguments[0]}else o=0;return t.apply(e,arguments)}}function Pl(t,o){var n=-1,i=t.length,l=i-1;for(o=o===e?i:o;++n<o;){var a=Xn(n,l),r=t[a];t[a]=t[n],t[n]=r}return t.length=o,t}var Ml,Al,Rl,zl=(Ml=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Z,(function(e,o,n,i){t.push(n?i.replace(de,"$1"):o||e)})),t},Al=Aa(Ml,(function(e){return 500===Rl.size&&Rl.clear(),e})),Rl=Al.cache,Al);function Ul(e){if("string"==typeof e||mr(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Wl(e){if(null!=e){try{return Fe.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function jl(e){if(e instanceof Ho)return e.clone();var t=new jo(e.__wrapped__,e.__chain__);return t.__actions__=Bi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Hl=Qn((function(e,t){return Qa(e)?mn(e,bn(t,1,Qa,!0)):[]})),Gl=Qn((function(t,o){var n=ta(o);return Qa(n)&&(n=e),Qa(t)?mn(t,bn(o,1,Qa,!0),ul(n,2)):[]})),Kl=Qn((function(t,o){var n=ta(o);return Qa(n)&&(n=e),Qa(t)?mn(t,bn(o,1,Qa,!0),e,n):[]}));function ql(e,t,o){var n=null==e?0:e.length;if(!n)return-1;var i=null==o?0:br(o);return i<0&&(i=bo(n+i,0)),Lt(e,ul(t,3),i)}function Yl(t,o,n){var i=null==t?0:t.length;if(!i)return-1;var l=i-1;return n!==e&&(l=br(n),l=n<0?bo(i+l,0):wo(l,i-1)),Lt(t,ul(o,3),l,!0)}function Xl(e){return null!=e&&e.length?bn(e,1):[]}function Jl(t){return t&&t.length?t[0]:e}var Ql=Qn((function(e){var t=$t(e,bi);return t.length&&t[0]===e[0]?Bn(t):[]})),Zl=Qn((function(t){var o=ta(t),n=$t(t,bi);return o===ta(n)?o=e:n.pop(),n.length&&n[0]===t[0]?Bn(n,ul(o,2)):[]})),ea=Qn((function(t){var o=ta(t),n=$t(t,bi);return(o="function"==typeof o?o:e)&&n.pop(),n.length&&n[0]===t[0]?Bn(n,e,o):[]}));function ta(t){var o=null==t?0:t.length;return o?t[o-1]:e}var oa=Qn(na);function na(e,t){return e&&e.length&&t&&t.length?qn(e,t):e}var ia=il((function(e,t){var o=null==e?0:e.length,n=sn(e,t);return Yn(e,$t(t,(function(e){return wl(e,o)?+e:e})).sort(Ei)),n}));function la(e){return null==e?e:xo.call(e)}var aa=Qn((function(e){return pi(bn(e,1,Qa,!0))})),ra=Qn((function(t){var o=ta(t);return Qa(o)&&(o=e),pi(bn(t,1,Qa,!0),ul(o,2))})),sa=Qn((function(t){var o=ta(t);return o="function"==typeof o?o:e,pi(bn(t,1,Qa,!0),e,o)}));function da(e){if(!e||!e.length)return[];var t=0;return e=Vt(e,(function(e){if(Qa(e))return t=bo(e.length,t),!0})),Ht(t,(function(t){return $t(e,zt(t))}))}function ua(t,o){if(!t||!t.length)return[];var n=da(t);return null==o?n:$t(n,(function(t){return kt(o,e,t)}))}var ca=Qn((function(e,t){return Qa(e)?mn(e,t):[]})),pa=Qn((function(e){return gi(Vt(e,Qa))})),ma=Qn((function(t){var o=ta(t);return Qa(o)&&(o=e),gi(Vt(t,Qa),ul(o,2))})),ha=Qn((function(t){var o=ta(t);return o="function"==typeof o?o:e,gi(Vt(t,Qa),e,o)})),fa=Qn(da),va=Qn((function(t){var o=t.length,n=o>1?t[o-1]:e;return n="function"==typeof n?(t.pop(),n):e,ua(t,n)}));function ga(e){var t=zo(e);return t.__chain__=!0,t}function ya(e,t){return t(e)}var ba=il((function(t){var o=t.length,n=o?t[0]:0,i=this.__wrapped__,l=function(e){return sn(e,t)};return!(o>1||this.__actions__.length)&&i instanceof Ho&&wl(n)?((i=i.slice(n,+n+(o?1:0))).__actions__.push({func:ya,args:[l],thisArg:e}),new jo(i,this.__chain__).thru((function(t){return o&&!t.length&&t.push(e),t}))):this.thru(l)})),wa=Oi((function(e,t,o){Le.call(e,o)?++e[o]:rn(e,o,1)})),ka=Ri(ql),_a=Ri(Yl);function Ca(e,t){return(Ya(e)?Ct:hn)(e,ul(t,3))}function xa(e,t){return(Ya(e)?xt:fn)(e,ul(t,3))}var Sa=Oi((function(e,t,o){Le.call(e,o)?e[o].push(t):rn(e,o,[t])})),Va=Qn((function(e,t,o){var n=-1,i="function"==typeof t,l=Ja(e)?_e(e.length):[];return hn(e,(function(e){l[++n]=i?kt(t,e,o):Tn(e,t,o)})),l})),Na=Oi((function(e,t,o){rn(e,o,t)}));function Ea(e,t){return(Ya(e)?$t:zn)(e,ul(t,3))}var $a=Oi((function(e,t,o){e[o?0:1].push(t)}),(function(){return[[],[]]})),Da=Qn((function(e,t){if(null==e)return[];var o=t.length;return o>1&&kl(e,t[0],t[1])?t=[]:o>2&&kl(t[0],t[1],t[2])&&(t=[t[0]]),Gn(e,bn(t,1),[])})),Ba=ht||function(){return dt.Date.now()};function Ta(t,o,n){return o=n?e:o,o=t&&null==o?t.length:o,Zi(t,r,e,e,e,e,o)}function Oa(o,n){var i;if("function"!=typeof n)throw new De(t);return o=br(o),function(){return--o>0&&(i=n.apply(this,arguments)),o<=1&&(n=e),i}}var Ia=Qn((function(e,t,o){var n=1;if(o.length){var i=lo(o,dl(Ia));n|=l}return Zi(e,n,t,o,i)})),Fa=Qn((function(e,t,o){var n=3;if(o.length){var i=lo(o,dl(Fa));n|=l}return Zi(t,n,e,o,i)}));function La(o,n,i){var l,a,r,s,d,u,c=0,p=!1,m=!1,h=!0;if("function"!=typeof o)throw new De(t);function f(t){var n=l,i=a;return l=a=e,c=t,s=o.apply(i,n)}function v(e){return c=e,d=Ol(y,n),p?f(e):s}function g(t){var o=t-u;return u===e||o>=n||o<0||m&&t-c>=r}function y(){var e=Ba();if(g(e))return b(e);d=Ol(y,function(e){var t=n-(e-u);return m?wo(t,r-(e-c)):t}(e))}function b(t){return d=e,h&&l?f(t):(l=a=e,s)}function w(){var t=Ba(),o=g(t);if(l=arguments,a=this,u=t,o){if(d===e)return v(u);if(m)return xi(d),d=Ol(y,n),f(u)}return d===e&&(d=Ol(y,n)),s}return n=kr(n)||0,lr(i)&&(p=!!i.leading,r=(m="maxWait"in i)?bo(kr(i.maxWait)||0,n):r,h="trailing"in i?!!i.trailing:h),w.cancel=function(){d!==e&&xi(d),c=0,l=u=a=d=e},w.flush=function(){return d===e?s:b(Ba())},w}var Pa=Qn((function(e,t){return pn(e,1,t)})),Ma=Qn((function(e,t,o){return pn(e,kr(t)||0,o)}));function Aa(e,o){if("function"!=typeof e||null!=o&&"function"!=typeof o)throw new De(t);var n=function(){var t=arguments,i=o?o.apply(this,t):t[0],l=n.cache;if(l.has(i))return l.get(i);var a=e.apply(this,t);return n.cache=l.set(i,a)||l,a};return n.cache=new(Aa.Cache||qo),n}function Ra(e){if("function"!=typeof e)throw new De(t);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Aa.Cache=qo;var za=_i((function(e,t){var o=(t=1==t.length&&Ya(t[0])?$t(t[0],Kt(ul())):$t(bn(t,1),Kt(ul()))).length;return Qn((function(n){for(var i=-1,l=wo(n.length,o);++i<l;)n[i]=t[i].call(this,n[i]);return kt(e,this,n)}))})),Ua=Qn((function(t,o){var n=lo(o,dl(Ua));return Zi(t,l,e,o,n)})),Wa=Qn((function(t,o){var n=lo(o,dl(Wa));return Zi(t,a,e,o,n)})),ja=il((function(t,o){return Zi(t,s,e,e,e,o)}));function Ha(e,t){return e===t||e!=e&&t!=t}var Ga=qi(En),Ka=qi((function(e,t){return e>=t})),qa=On(function(){return arguments}())?On:function(e){return ar(e)&&Le.call(e,"callee")&&!Qe.call(e,"callee")},Ya=_e.isArray,Xa=ft?Kt(ft):function(e){return ar(e)&&Nn(e)==D};function Ja(e){return null!=e&&ir(e.length)&&!or(e)}function Qa(e){return ar(e)&&Ja(e)}var Za=fo||ks,er=vt?Kt(vt):function(e){return ar(e)&&Nn(e)==g};function tr(e){if(!ar(e))return!1;var t=Nn(e);return t==y||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!dr(e)}function or(e){if(!lr(e))return!1;var t=Nn(e);return t==b||t==w||"[object AsyncFunction]"==t||"[object Proxy]"==t}function nr(e){return"number"==typeof e&&e==br(e)}function ir(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=u}function lr(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ar(e){return null!=e&&"object"==typeof e}var rr=gt?Kt(gt):function(e){return ar(e)&&vl(e)==k};function sr(e){return"number"==typeof e||ar(e)&&Nn(e)==_}function dr(e){if(!ar(e)||Nn(e)!=C)return!1;var t=Ke(e);if(null===t)return!0;var o=Le.call(t,"constructor")&&t.constructor;return"function"==typeof o&&o instanceof o&&Fe.call(o)==Re}var ur=yt?Kt(yt):function(e){return ar(e)&&Nn(e)==S},cr=bt?Kt(bt):function(e){return ar(e)&&vl(e)==V};function pr(e){return"string"==typeof e||!Ya(e)&&ar(e)&&Nn(e)==N}function mr(e){return"symbol"==typeof e||ar(e)&&Nn(e)==E}var hr=wt?Kt(wt):function(e){return ar(e)&&ir(e.length)&&!!ot[Nn(e)]},fr=qi(Rn),vr=qi((function(e,t){return e<=t}));function gr(e){if(!e)return[];if(Ja(e))return pr(e)?so(e):Bi(e);if(st&&e[st])return function(e){for(var t,o=[];!(t=e.next()).done;)o.push(t.value);return o}(e[st]());var t=vl(e);return(t==k?no:t==V?ao:Hr)(e)}function yr(e){return e?(e=kr(e))===d||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function br(e){var t=yr(e),o=t%1;return t==t?o?t-o:t:0}function wr(e){return e?dn(br(e),0,p):0}function kr(e){if("number"==typeof e)return e;if(mr(e))return c;if(lr(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=lr(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Gt(e);var o=me.test(e);return o||fe.test(e)?at(e.slice(2),o?2:8):pe.test(e)?c:+e}function _r(e){return Ti(e,Pr(e))}function Cr(e){return null==e?"":ci(e)}var xr=Ii((function(e,t){if(Sl(t)||Ja(t))Ti(t,Lr(t),e);else for(var o in t)Le.call(t,o)&&on(e,o,t[o])})),Sr=Ii((function(e,t){Ti(t,Pr(t),e)})),Vr=Ii((function(e,t,o,n){Ti(t,Pr(t),e,n)})),Nr=Ii((function(e,t,o,n){Ti(t,Lr(t),e,n)})),Er=il(sn),$r=Qn((function(t,o){t=Ne(t);var n=-1,i=o.length,l=i>2?o[2]:e;for(l&&kl(o[0],o[1],l)&&(i=1);++n<i;)for(var a=o[n],r=Pr(a),s=-1,d=r.length;++s<d;){var u=r[s],c=t[u];(c===e||Ha(c,Oe[u])&&!Le.call(t,u))&&(t[u]=a[u])}return t})),Dr=Qn((function(t){return t.push(e,tl),kt(Ar,e,t)}));function Br(t,o,n){var i=null==t?e:Sn(t,o);return i===e?n:i}function Tr(e,t){return null!=e&&gl(e,t,Dn)}var Or=Wi((function(e,t,o){null!=t&&"function"!=typeof t.toString&&(t=Ae.call(t)),e[t]=o}),ls(ss)),Ir=Wi((function(e,t,o){null!=t&&"function"!=typeof t.toString&&(t=Ae.call(t)),Le.call(e,t)?e[t].push(o):e[t]=[o]}),ul),Fr=Qn(Tn);function Lr(e){return Ja(e)?Jo(e):Mn(e)}function Pr(e){return Ja(e)?Jo(e,!0):An(e)}var Mr=Ii((function(e,t,o){jn(e,t,o)})),Ar=Ii((function(e,t,o,n){jn(e,t,o,n)})),Rr=il((function(e,t){var o={};if(null==e)return o;var n=!1;t=$t(t,(function(t){return t=ki(t,e),n||(n=t.length>1),t})),Ti(e,al(e),o),n&&(o=un(o,7,ol));for(var i=t.length;i--;)mi(o,t[i]);return o})),zr=il((function(e,t){return null==e?{}:function(e,t){return Kn(e,t,(function(t,o){return Tr(e,o)}))}(e,t)}));function Ur(e,t){if(null==e)return{};var o=$t(al(e),(function(e){return[e]}));return t=ul(t),Kn(e,o,(function(e,o){return t(e,o[0])}))}var Wr=Qi(Lr),jr=Qi(Pr);function Hr(e){return null==e?[]:qt(e,Lr(e))}var Gr=Mi((function(e,t,o){return t=t.toLowerCase(),e+(o?Kr(t):t)}));function Kr(e){return ts(Cr(e).toLowerCase())}function qr(e){return(e=Cr(e))&&e.replace(ge,Zt).replace(Ye,"")}var Yr=Mi((function(e,t,o){return e+(o?"-":"")+t.toLowerCase()})),Xr=Mi((function(e,t,o){return e+(o?" ":"")+t.toLowerCase()})),Jr=Pi("toLowerCase"),Qr=Mi((function(e,t,o){return e+(o?"_":"")+t.toLowerCase()})),Zr=Mi((function(e,t,o){return e+(o?" ":"")+ts(t)})),es=Mi((function(e,t,o){return e+(o?" ":"")+t.toUpperCase()})),ts=Pi("toUpperCase");function os(t,o,n){return t=Cr(t),(o=n?e:o)===e?function(e){return Ze.test(e)}(t)?function(e){return e.match(Je)||[]}(t):function(e){return e.match(re)||[]}(t):t.match(o)||[]}var ns=Qn((function(t,o){try{return kt(t,e,o)}catch(n){return tr(n)?n:new xe(n)}})),is=il((function(e,t){return Ct(t,(function(t){t=Ul(t),rn(e,t,Ia(e[t],e))})),e}));function ls(e){return function(){return e}}var as=zi(),rs=zi(!0);function ss(e){return e}function ds(e){return Pn("function"==typeof e?e:un(e,1))}var us=Qn((function(e,t){return function(o){return Tn(o,e,t)}})),cs=Qn((function(e,t){return function(o){return Tn(e,o,t)}}));function ps(e,t,o){var n=Lr(t),i=xn(t,n);null!=o||lr(t)&&(i.length||!n.length)||(o=t,t=e,e=this,i=xn(t,Lr(t)));var l=!(lr(o)&&"chain"in o&&!o.chain),a=or(e);return Ct(i,(function(o){var n=t[o];e[o]=n,a&&(e.prototype[o]=function(){var t=this.__chain__;if(l||t){var o=e(this.__wrapped__),i=o.__actions__=Bi(this.__actions__);return i.push({func:n,args:arguments,thisArg:e}),o.__chain__=t,o}return n.apply(e,Dt([this.value()],arguments))})})),e}function ms(){}var hs=Hi($t),fs=Hi(St),vs=Hi(Ot);function gs(e){return _l(e)?zt(Ul(e)):function(e){return function(t){return Sn(t,e)}}(e)}var ys=Ki(),bs=Ki(!0);function ws(){return[]}function ks(){return!1}var _s,Cs=ji((function(e,t){return e+t}),0),xs=Xi("ceil"),Ss=ji((function(e,t){return e/t}),1),Vs=Xi("floor"),Ns=ji((function(e,t){return e*t}),1),Es=Xi("round"),$s=ji((function(e,t){return e-t}),0);return zo.after=function(e,o){if("function"!=typeof o)throw new De(t);return e=br(e),function(){if(--e<1)return o.apply(this,arguments)}},zo.ary=Ta,zo.assign=xr,zo.assignIn=Sr,zo.assignInWith=Vr,zo.assignWith=Nr,zo.at=Er,zo.before=Oa,zo.bind=Ia,zo.bindAll=is,zo.bindKey=Fa,zo.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ya(e)?e:[e]},zo.chain=ga,zo.chunk=function(t,o,n){o=(n?kl(t,o,n):o===e)?1:bo(br(o),0);var i=null==t?0:t.length;if(!i||o<1)return[];for(var l=0,a=0,r=_e(Ut(i/o));l<i;)r[a++]=li(t,l,l+=o);return r},zo.compact=function(e){for(var t=-1,o=null==e?0:e.length,n=0,i=[];++t<o;){var l=e[t];l&&(i[n++]=l)}return i},zo.concat=function(){var e=arguments.length;if(!e)return[];for(var t=_e(e-1),o=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Dt(Ya(o)?Bi(o):[o],bn(t,1))},zo.cond=function(e){var o=null==e?0:e.length,n=ul();return e=o?$t(e,(function(e){if("function"!=typeof e[1])throw new De(t);return[n(e[0]),e[1]]})):[],Qn((function(t){for(var n=-1;++n<o;){var i=e[n];if(kt(i[0],this,t))return kt(i[1],this,t)}}))},zo.conforms=function(e){return function(e){var t=Lr(e);return function(o){return cn(o,e,t)}}(un(e,1))},zo.constant=ls,zo.countBy=wa,zo.create=function(e,t){var o=Uo(e);return null==t?o:an(o,t)},zo.curry=function t(o,n,i){var l=Zi(o,8,e,e,e,e,e,n=i?e:n);return l.placeholder=t.placeholder,l},zo.curryRight=function t(o,n,l){var a=Zi(o,i,e,e,e,e,e,n=l?e:n);return a.placeholder=t.placeholder,a},zo.debounce=La,zo.defaults=$r,zo.defaultsDeep=Dr,zo.defer=Pa,zo.delay=Ma,zo.difference=Hl,zo.differenceBy=Gl,zo.differenceWith=Kl,zo.drop=function(t,o,n){var i=null==t?0:t.length;return i?li(t,(o=n||o===e?1:br(o))<0?0:o,i):[]},zo.dropRight=function(t,o,n){var i=null==t?0:t.length;return i?li(t,0,(o=i-(o=n||o===e?1:br(o)))<0?0:o):[]},zo.dropRightWhile=function(e,t){return e&&e.length?fi(e,ul(t,3),!0,!0):[]},zo.dropWhile=function(e,t){return e&&e.length?fi(e,ul(t,3),!0):[]},zo.fill=function(t,o,n,i){var l=null==t?0:t.length;return l?(n&&"number"!=typeof n&&kl(t,o,n)&&(n=0,i=l),function(t,o,n,i){var l=t.length;for((n=br(n))<0&&(n=-n>l?0:l+n),(i=i===e||i>l?l:br(i))<0&&(i+=l),i=n>i?0:wr(i);n<i;)t[n++]=o;return t}(t,o,n,i)):[]},zo.filter=function(e,t){return(Ya(e)?Vt:yn)(e,ul(t,3))},zo.flatMap=function(e,t){return bn(Ea(e,t),1)},zo.flatMapDeep=function(e,t){return bn(Ea(e,t),d)},zo.flatMapDepth=function(t,o,n){return n=n===e?1:br(n),bn(Ea(t,o),n)},zo.flatten=Xl,zo.flattenDeep=function(e){return null!=e&&e.length?bn(e,d):[]},zo.flattenDepth=function(t,o){return null!=t&&t.length?bn(t,o=o===e?1:br(o)):[]},zo.flip=function(e){return Zi(e,512)},zo.flow=as,zo.flowRight=rs,zo.fromPairs=function(e){for(var t=-1,o=null==e?0:e.length,n={};++t<o;){var i=e[t];n[i[0]]=i[1]}return n},zo.functions=function(e){return null==e?[]:xn(e,Lr(e))},zo.functionsIn=function(e){return null==e?[]:xn(e,Pr(e))},zo.groupBy=Sa,zo.initial=function(e){return null!=e&&e.length?li(e,0,-1):[]},zo.intersection=Ql,zo.intersectionBy=Zl,zo.intersectionWith=ea,zo.invert=Or,zo.invertBy=Ir,zo.invokeMap=Va,zo.iteratee=ds,zo.keyBy=Na,zo.keys=Lr,zo.keysIn=Pr,zo.map=Ea,zo.mapKeys=function(e,t){var o={};return t=ul(t,3),_n(e,(function(e,n,i){rn(o,t(e,n,i),e)})),o},zo.mapValues=function(e,t){var o={};return t=ul(t,3),_n(e,(function(e,n,i){rn(o,n,t(e,n,i))})),o},zo.matches=function(e){return Un(un(e,1))},zo.matchesProperty=function(e,t){return Wn(e,un(t,1))},zo.memoize=Aa,zo.merge=Mr,zo.mergeWith=Ar,zo.method=us,zo.methodOf=cs,zo.mixin=ps,zo.negate=Ra,zo.nthArg=function(e){return e=br(e),Qn((function(t){return Hn(t,e)}))},zo.omit=Rr,zo.omitBy=function(e,t){return Ur(e,Ra(ul(t)))},zo.once=function(e){return Oa(2,e)},zo.orderBy=function(t,o,n,i){return null==t?[]:(Ya(o)||(o=null==o?[]:[o]),Ya(n=i?e:n)||(n=null==n?[]:[n]),Gn(t,o,n))},zo.over=hs,zo.overArgs=za,zo.overEvery=fs,zo.overSome=vs,zo.partial=Ua,zo.partialRight=Wa,zo.partition=$a,zo.pick=zr,zo.pickBy=Ur,zo.property=gs,zo.propertyOf=function(t){return function(o){return null==t?e:Sn(t,o)}},zo.pull=oa,zo.pullAll=na,zo.pullAllBy=function(e,t,o){return e&&e.length&&t&&t.length?qn(e,t,ul(o,2)):e},zo.pullAllWith=function(t,o,n){return t&&t.length&&o&&o.length?qn(t,o,e,n):t},zo.pullAt=ia,zo.range=ys,zo.rangeRight=bs,zo.rearg=ja,zo.reject=function(e,t){return(Ya(e)?Vt:yn)(e,Ra(ul(t,3)))},zo.remove=function(e,t){var o=[];if(!e||!e.length)return o;var n=-1,i=[],l=e.length;for(t=ul(t,3);++n<l;){var a=e[n];t(a,n,e)&&(o.push(a),i.push(n))}return Yn(e,i),o},zo.rest=function(o,n){if("function"!=typeof o)throw new De(t);return Qn(o,n=n===e?n:br(n))},zo.reverse=la,zo.sampleSize=function(t,o,n){return o=(n?kl(t,o,n):o===e)?1:br(o),(Ya(t)?Zo:ei)(t,o)},zo.set=function(e,t,o){return null==e?e:ti(e,t,o)},zo.setWith=function(t,o,n,i){return i="function"==typeof i?i:e,null==t?t:ti(t,o,n,i)},zo.shuffle=function(e){return(Ya(e)?en:ii)(e)},zo.slice=function(t,o,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&kl(t,o,n)?(o=0,n=i):(o=null==o?0:br(o),n=n===e?i:br(n)),li(t,o,n)):[]},zo.sortBy=Da,zo.sortedUniq=function(e){return e&&e.length?di(e):[]},zo.sortedUniqBy=function(e,t){return e&&e.length?di(e,ul(t,2)):[]},zo.split=function(t,o,n){return n&&"number"!=typeof n&&kl(t,o,n)&&(o=n=e),(n=n===e?p:n>>>0)?(t=Cr(t))&&("string"==typeof o||null!=o&&!ur(o))&&!(o=ci(o))&&oo(t)?Ci(so(t),0,n):t.split(o,n):[]},zo.spread=function(e,o){if("function"!=typeof e)throw new De(t);return o=null==o?0:bo(br(o),0),Qn((function(t){var n=t[o],i=Ci(t,0,o);return n&&Dt(i,n),kt(e,this,i)}))},zo.tail=function(e){var t=null==e?0:e.length;return t?li(e,1,t):[]},zo.take=function(t,o,n){return t&&t.length?li(t,0,(o=n||o===e?1:br(o))<0?0:o):[]},zo.takeRight=function(t,o,n){var i=null==t?0:t.length;return i?li(t,(o=i-(o=n||o===e?1:br(o)))<0?0:o,i):[]},zo.takeRightWhile=function(e,t){return e&&e.length?fi(e,ul(t,3),!1,!0):[]},zo.takeWhile=function(e,t){return e&&e.length?fi(e,ul(t,3)):[]},zo.tap=function(e,t){return t(e),e},zo.throttle=function(e,o,n){var i=!0,l=!0;if("function"!=typeof e)throw new De(t);return lr(n)&&(i="leading"in n?!!n.leading:i,l="trailing"in n?!!n.trailing:l),La(e,o,{leading:i,maxWait:o,trailing:l})},zo.thru=ya,zo.toArray=gr,zo.toPairs=Wr,zo.toPairsIn=jr,zo.toPath=function(e){return Ya(e)?$t(e,Ul):mr(e)?[e]:Bi(zl(Cr(e)))},zo.toPlainObject=_r,zo.transform=function(e,t,o){var n=Ya(e),i=n||Za(e)||hr(e);if(t=ul(t,4),null==o){var l=e&&e.constructor;o=i?n?new l:[]:lr(e)&&or(l)?Uo(Ke(e)):{}}return(i?Ct:_n)(e,(function(e,n,i){return t(o,e,n,i)})),o},zo.unary=function(e){return Ta(e,1)},zo.union=aa,zo.unionBy=ra,zo.unionWith=sa,zo.uniq=function(e){return e&&e.length?pi(e):[]},zo.uniqBy=function(e,t){return e&&e.length?pi(e,ul(t,2)):[]},zo.uniqWith=function(t,o){return o="function"==typeof o?o:e,t&&t.length?pi(t,e,o):[]},zo.unset=function(e,t){return null==e||mi(e,t)},zo.unzip=da,zo.unzipWith=ua,zo.update=function(e,t,o){return null==e?e:hi(e,t,wi(o))},zo.updateWith=function(t,o,n,i){return i="function"==typeof i?i:e,null==t?t:hi(t,o,wi(n),i)},zo.values=Hr,zo.valuesIn=function(e){return null==e?[]:qt(e,Pr(e))},zo.without=ca,zo.words=os,zo.wrap=function(e,t){return Ua(wi(t),e)},zo.xor=pa,zo.xorBy=ma,zo.xorWith=ha,zo.zip=fa,zo.zipObject=function(e,t){return yi(e||[],t||[],on)},zo.zipObjectDeep=function(e,t){return yi(e||[],t||[],ti)},zo.zipWith=va,zo.entries=Wr,zo.entriesIn=jr,zo.extend=Sr,zo.extendWith=Vr,ps(zo,zo),zo.add=Cs,zo.attempt=ns,zo.camelCase=Gr,zo.capitalize=Kr,zo.ceil=xs,zo.clamp=function(t,o,n){return n===e&&(n=o,o=e),n!==e&&(n=(n=kr(n))==n?n:0),o!==e&&(o=(o=kr(o))==o?o:0),dn(kr(t),o,n)},zo.clone=function(e){return un(e,4)},zo.cloneDeep=function(e){return un(e,5)},zo.cloneDeepWith=function(t,o){return un(t,5,o="function"==typeof o?o:e)},zo.cloneWith=function(t,o){return un(t,4,o="function"==typeof o?o:e)},zo.conformsTo=function(e,t){return null==t||cn(e,t,Lr(t))},zo.deburr=qr,zo.defaultTo=function(e,t){return null==e||e!=e?t:e},zo.divide=Ss,zo.endsWith=function(t,o,n){t=Cr(t),o=ci(o);var i=t.length,l=n=n===e?i:dn(br(n),0,i);return(n-=o.length)>=0&&t.slice(n,l)==o},zo.eq=Ha,zo.escape=function(e){return(e=Cr(e))&&K.test(e)?e.replace(H,eo):e},zo.escapeRegExp=function(e){return(e=Cr(e))&&te.test(e)?e.replace(ee,"\\$&"):e},zo.every=function(t,o,n){var i=Ya(t)?St:vn;return n&&kl(t,o,n)&&(o=e),i(t,ul(o,3))},zo.find=ka,zo.findIndex=ql,zo.findKey=function(e,t){return Ft(e,ul(t,3),_n)},zo.findLast=_a,zo.findLastIndex=Yl,zo.findLastKey=function(e,t){return Ft(e,ul(t,3),Cn)},zo.floor=Vs,zo.forEach=Ca,zo.forEachRight=xa,zo.forIn=function(e,t){return null==e?e:wn(e,ul(t,3),Pr)},zo.forInRight=function(e,t){return null==e?e:kn(e,ul(t,3),Pr)},zo.forOwn=function(e,t){return e&&_n(e,ul(t,3))},zo.forOwnRight=function(e,t){return e&&Cn(e,ul(t,3))},zo.get=Br,zo.gt=Ga,zo.gte=Ka,zo.has=function(e,t){return null!=e&&gl(e,t,$n)},zo.hasIn=Tr,zo.head=Jl,zo.identity=ss,zo.includes=function(e,t,o,n){e=Ja(e)?e:Hr(e),o=o&&!n?br(o):0;var i=e.length;return o<0&&(o=bo(i+o,0)),pr(e)?o<=i&&e.indexOf(t,o)>-1:!!i&&Pt(e,t,o)>-1},zo.indexOf=function(e,t,o){var n=null==e?0:e.length;if(!n)return-1;var i=null==o?0:br(o);return i<0&&(i=bo(n+i,0)),Pt(e,t,i)},zo.inRange=function(t,o,n){return o=yr(o),n===e?(n=o,o=0):n=yr(n),function(e,t,o){return e>=wo(t,o)&&e<bo(t,o)}(t=kr(t),o,n)},zo.invoke=Fr,zo.isArguments=qa,zo.isArray=Ya,zo.isArrayBuffer=Xa,zo.isArrayLike=Ja,zo.isArrayLikeObject=Qa,zo.isBoolean=function(e){return!0===e||!1===e||ar(e)&&Nn(e)==v},zo.isBuffer=Za,zo.isDate=er,zo.isElement=function(e){return ar(e)&&1===e.nodeType&&!dr(e)},zo.isEmpty=function(e){if(null==e)return!0;if(Ja(e)&&(Ya(e)||"string"==typeof e||"function"==typeof e.splice||Za(e)||hr(e)||qa(e)))return!e.length;var t=vl(e);if(t==k||t==V)return!e.size;if(Sl(e))return!Mn(e).length;for(var o in e)if(Le.call(e,o))return!1;return!0},zo.isEqual=function(e,t){return In(e,t)},zo.isEqualWith=function(t,o,n){var i=(n="function"==typeof n?n:e)?n(t,o):e;return i===e?In(t,o,e,n):!!i},zo.isError=tr,zo.isFinite=function(e){return"number"==typeof e&&vo(e)},zo.isFunction=or,zo.isInteger=nr,zo.isLength=ir,zo.isMap=rr,zo.isMatch=function(e,t){return e===t||Fn(e,t,pl(t))},zo.isMatchWith=function(t,o,n){return n="function"==typeof n?n:e,Fn(t,o,pl(o),n)},zo.isNaN=function(e){return sr(e)&&e!=+e},zo.isNative=function(e){if(xl(e))throw new xe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ln(e)},zo.isNil=function(e){return null==e},zo.isNull=function(e){return null===e},zo.isNumber=sr,zo.isObject=lr,zo.isObjectLike=ar,zo.isPlainObject=dr,zo.isRegExp=ur,zo.isSafeInteger=function(e){return nr(e)&&e>=-9007199254740991&&e<=u},zo.isSet=cr,zo.isString=pr,zo.isSymbol=mr,zo.isTypedArray=hr,zo.isUndefined=function(t){return t===e},zo.isWeakMap=function(e){return ar(e)&&vl(e)==$},zo.isWeakSet=function(e){return ar(e)&&"[object WeakSet]"==Nn(e)},zo.join=function(e,t){return null==e?"":go.call(e,t)},zo.kebabCase=Yr,zo.last=ta,zo.lastIndexOf=function(t,o,n){var i=null==t?0:t.length;if(!i)return-1;var l=i;return n!==e&&(l=(l=br(n))<0?bo(i+l,0):wo(l,i-1)),o==o?function(e,t,o){for(var n=o+1;n--;)if(e[n]===t)return n;return n}(t,o,l):Lt(t,At,l,!0)},zo.lowerCase=Xr,zo.lowerFirst=Jr,zo.lt=fr,zo.lte=vr,zo.max=function(t){return t&&t.length?gn(t,ss,En):e},zo.maxBy=function(t,o){return t&&t.length?gn(t,ul(o,2),En):e},zo.mean=function(e){return Rt(e,ss)},zo.meanBy=function(e,t){return Rt(e,ul(t,2))},zo.min=function(t){return t&&t.length?gn(t,ss,Rn):e},zo.minBy=function(t,o){return t&&t.length?gn(t,ul(o,2),Rn):e},zo.stubArray=ws,zo.stubFalse=ks,zo.stubObject=function(){return{}},zo.stubString=function(){return""},zo.stubTrue=function(){return!0},zo.multiply=Ns,zo.nth=function(t,o){return t&&t.length?Hn(t,br(o)):e},zo.noConflict=function(){return dt._===this&&(dt._=ze),this},zo.noop=ms,zo.now=Ba,zo.pad=function(e,t,o){e=Cr(e);var n=(t=br(t))?ro(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return Gi(mo(i),o)+e+Gi(Ut(i),o)},zo.padEnd=function(e,t,o){e=Cr(e);var n=(t=br(t))?ro(e):0;return t&&n<t?e+Gi(t-n,o):e},zo.padStart=function(e,t,o){e=Cr(e);var n=(t=br(t))?ro(e):0;return t&&n<t?Gi(t-n,o)+e:e},zo.parseInt=function(e,t,o){return o||null==t?t=0:t&&(t=+t),_o(Cr(e).replace(oe,""),t||0)},zo.random=function(t,o,n){if(n&&"boolean"!=typeof n&&kl(t,o,n)&&(o=n=e),n===e&&("boolean"==typeof o?(n=o,o=e):"boolean"==typeof t&&(n=t,t=e)),t===e&&o===e?(t=0,o=1):(t=yr(t),o===e?(o=t,t=0):o=yr(o)),t>o){var i=t;t=o,o=i}if(n||t%1||o%1){var l=Co();return wo(t+l*(o-t+lt("1e-"+((l+"").length-1))),o)}return Xn(t,o)},zo.reduce=function(e,t,o){var n=Ya(e)?Bt:Wt,i=arguments.length<3;return n(e,ul(t,4),o,i,hn)},zo.reduceRight=function(e,t,o){var n=Ya(e)?Tt:Wt,i=arguments.length<3;return n(e,ul(t,4),o,i,fn)},zo.repeat=function(t,o,n){return o=(n?kl(t,o,n):o===e)?1:br(o),Jn(Cr(t),o)},zo.replace=function(){var e=arguments,t=Cr(e[0]);return e.length<3?t:t.replace(e[1],e[2])},zo.result=function(t,o,n){var i=-1,l=(o=ki(o,t)).length;for(l||(l=1,t=e);++i<l;){var a=null==t?e:t[Ul(o[i])];a===e&&(i=l,a=n),t=or(a)?a.call(t):a}return t},zo.round=Es,zo.runInContext=ne,zo.sample=function(e){return(Ya(e)?Qo:Zn)(e)},zo.size=function(e){if(null==e)return 0;if(Ja(e))return pr(e)?ro(e):e.length;var t=vl(e);return t==k||t==V?e.size:Mn(e).length},zo.snakeCase=Qr,zo.some=function(t,o,n){var i=Ya(t)?Ot:ai;return n&&kl(t,o,n)&&(o=e),i(t,ul(o,3))},zo.sortedIndex=function(e,t){return ri(e,t)},zo.sortedIndexBy=function(e,t,o){return si(e,t,ul(o,2))},zo.sortedIndexOf=function(e,t){var o=null==e?0:e.length;if(o){var n=ri(e,t);if(n<o&&Ha(e[n],t))return n}return-1},zo.sortedLastIndex=function(e,t){return ri(e,t,!0)},zo.sortedLastIndexBy=function(e,t,o){return si(e,t,ul(o,2),!0)},zo.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var o=ri(e,t,!0)-1;if(Ha(e[o],t))return o}return-1},zo.startCase=Zr,zo.startsWith=function(e,t,o){return e=Cr(e),o=null==o?0:dn(br(o),0,e.length),t=ci(t),e.slice(o,o+t.length)==t},zo.subtract=$s,zo.sum=function(e){return e&&e.length?jt(e,ss):0},zo.sumBy=function(e,t){return e&&e.length?jt(e,ul(t,2)):0},zo.template=function(t,o,n){var i=zo.templateSettings;n&&kl(t,o,n)&&(o=e),t=Cr(t),o=Vr({},o,i,el);var l,a,r=Vr({},o.imports,i.imports,el),s=Lr(r),d=qt(r,s),u=0,c=o.interpolate||ye,p="__p += '",m=Ee((o.escape||ye).source+"|"+c.source+"|"+(c===X?ue:ye).source+"|"+(o.evaluate||ye).source+"|$","g"),h="//# sourceURL="+(Le.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tt+"]")+"\n";t.replace(m,(function(e,o,n,i,r,s){return n||(n=i),p+=t.slice(u,s).replace(be,to),o&&(l=!0,p+="' +\n__e("+o+") +\n'"),r&&(a=!0,p+="';\n"+r+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=s+e.length,e})),p+="';\n";var f=Le.call(o,"variable")&&o.variable;if(f){if(se.test(f))throw new xe("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(a?p.replace(z,""):p).replace(U,"$1").replace(W,"$1;"),p="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(l?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=ns((function(){return Se(s,h+"return "+p).apply(e,d)}));if(v.source=p,tr(v))throw v;return v},zo.times=function(e,t){if((e=br(e))<1||e>u)return[];var o=p,n=wo(e,p);t=ul(t),e-=p;for(var i=Ht(n,t);++o<e;)t(o);return i},zo.toFinite=yr,zo.toInteger=br,zo.toLength=wr,zo.toLower=function(e){return Cr(e).toLowerCase()},zo.toNumber=kr,zo.toSafeInteger=function(e){return e?dn(br(e),-9007199254740991,u):0===e?e:0},zo.toString=Cr,zo.toUpper=function(e){return Cr(e).toUpperCase()},zo.trim=function(t,o,n){if((t=Cr(t))&&(n||o===e))return Gt(t);if(!t||!(o=ci(o)))return t;var i=so(t),l=so(o);return Ci(i,Xt(i,l),Jt(i,l)+1).join("")},zo.trimEnd=function(t,o,n){if((t=Cr(t))&&(n||o===e))return t.slice(0,uo(t)+1);if(!t||!(o=ci(o)))return t;var i=so(t);return Ci(i,0,Jt(i,so(o))+1).join("")},zo.trimStart=function(t,o,n){if((t=Cr(t))&&(n||o===e))return t.replace(oe,"");if(!t||!(o=ci(o)))return t;var i=so(t);return Ci(i,Xt(i,so(o))).join("")},zo.truncate=function(t,o){var n=30,i="...";if(lr(o)){var l="separator"in o?o.separator:l;n="length"in o?br(o.length):n,i="omission"in o?ci(o.omission):i}var a=(t=Cr(t)).length;if(oo(t)){var r=so(t);a=r.length}if(n>=a)return t;var s=n-ro(i);if(s<1)return i;var d=r?Ci(r,0,s).join(""):t.slice(0,s);if(l===e)return d+i;if(r&&(s+=d.length-s),ur(l)){if(t.slice(s).search(l)){var u,c=d;for(l.global||(l=Ee(l.source,Cr(ce.exec(l))+"g")),l.lastIndex=0;u=l.exec(c);)var p=u.index;d=d.slice(0,p===e?s:p)}}else if(t.indexOf(ci(l),s)!=s){var m=d.lastIndexOf(l);m>-1&&(d=d.slice(0,m))}return d+i},zo.unescape=function(e){return(e=Cr(e))&&G.test(e)?e.replace(j,co):e},zo.uniqueId=function(e){var t=++Pe;return Cr(e)+t},zo.upperCase=es,zo.upperFirst=ts,zo.each=Ca,zo.eachRight=xa,zo.first=Jl,ps(zo,(_s={},_n(zo,(function(e,t){Le.call(zo.prototype,t)||(_s[t]=e)})),_s),{chain:!1}),zo.VERSION="4.17.21",Ct(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){zo[e].placeholder=zo})),Ct(["drop","take"],(function(t,o){Ho.prototype[t]=function(n){n=n===e?1:bo(br(n),0);var i=this.__filtered__&&!o?new Ho(this):this.clone();return i.__filtered__?i.__takeCount__=wo(n,i.__takeCount__):i.__views__.push({size:wo(n,p),type:t+(i.__dir__<0?"Right":"")}),i},Ho.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ct(["filter","map","takeWhile"],(function(e,t){var o=t+1,n=1==o||3==o;Ho.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ul(e,3),type:o}),t.__filtered__=t.__filtered__||n,t}})),Ct(["head","last"],(function(e,t){var o="take"+(t?"Right":"");Ho.prototype[e]=function(){return this[o](1).value()[0]}})),Ct(["initial","tail"],(function(e,t){var o="drop"+(t?"":"Right");Ho.prototype[e]=function(){return this.__filtered__?new Ho(this):this[o](1)}})),Ho.prototype.compact=function(){return this.filter(ss)},Ho.prototype.find=function(e){return this.filter(e).head()},Ho.prototype.findLast=function(e){return this.reverse().find(e)},Ho.prototype.invokeMap=Qn((function(e,t){return"function"==typeof e?new Ho(this):this.map((function(o){return Tn(o,e,t)}))})),Ho.prototype.reject=function(e){return this.filter(Ra(ul(e)))},Ho.prototype.slice=function(t,o){t=br(t);var n=this;return n.__filtered__&&(t>0||o<0)?new Ho(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),o!==e&&(n=(o=br(o))<0?n.dropRight(-o):n.take(o-t)),n)},Ho.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ho.prototype.toArray=function(){return this.take(p)},_n(Ho.prototype,(function(t,o){var n=/^(?:filter|find|map|reject)|While$/.test(o),i=/^(?:head|last)$/.test(o),l=zo[i?"take"+("last"==o?"Right":""):o],a=i||/^find/.test(o);l&&(zo.prototype[o]=function(){var o=this.__wrapped__,r=i?[1]:arguments,s=o instanceof Ho,d=r[0],u=s||Ya(o),c=function(e){var t=l.apply(zo,Dt([e],r));return i&&p?t[0]:t};u&&n&&"function"==typeof d&&1!=d.length&&(s=u=!1);var p=this.__chain__,m=!!this.__actions__.length,h=a&&!p,f=s&&!m;if(!a&&u){o=f?o:new Ho(this);var v=t.apply(o,r);return v.__actions__.push({func:ya,args:[c],thisArg:e}),new jo(v,p)}return h&&f?t.apply(this,r):(v=this.thru(c),h?i?v.value()[0]:v.value():v)})})),Ct(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Be[e],o=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);zo.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(Ya(i)?i:[],e)}return this[o]((function(o){return t.apply(Ya(o)?o:[],e)}))}})),_n(Ho.prototype,(function(e,t){var o=zo[t];if(o){var n=o.name+"";Le.call(To,n)||(To[n]=[]),To[n].push({name:t,func:o})}})),To[Ui(e,2).name]=[{name:"wrapper",func:e}],Ho.prototype.clone=function(){var e=new Ho(this.__wrapped__);return e.__actions__=Bi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Bi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Bi(this.__views__),e},Ho.prototype.reverse=function(){if(this.__filtered__){var e=new Ho(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Ho.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,o=Ya(e),n=t<0,i=o?e.length:0,l=function(e,t,o){for(var n=-1,i=o.length;++n<i;){var l=o[n],a=l.size;switch(l.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=wo(t,e+a);break;case"takeRight":e=bo(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=l.start,r=l.end,s=r-a,d=n?r:a-1,u=this.__iteratees__,c=u.length,p=0,m=wo(s,this.__takeCount__);if(!o||!n&&i==s&&m==s)return vi(e,this.__actions__);var h=[];e:for(;s--&&p<m;){for(var f=-1,v=e[d+=t];++f<c;){var g=u[f],y=g.iteratee,b=g.type,w=y(v);if(2==b)v=w;else if(!w){if(1==b)continue e;break e}}h[p++]=v}return h},zo.prototype.at=ba,zo.prototype.chain=function(){return ga(this)},zo.prototype.commit=function(){return new jo(this.value(),this.__chain__)},zo.prototype.next=function(){this.__values__===e&&(this.__values__=gr(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?e:this.__values__[this.__index__++]}},zo.prototype.plant=function(t){for(var o,n=this;n instanceof Wo;){var i=jl(n);i.__index__=0,i.__values__=e,o?l.__wrapped__=i:o=i;var l=i;n=n.__wrapped__}return l.__wrapped__=t,o},zo.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Ho){var o=t;return this.__actions__.length&&(o=new Ho(this)),(o=o.reverse()).__actions__.push({func:ya,args:[la],thisArg:e}),new jo(o,this.__chain__)}return this.thru(la)},zo.prototype.toJSON=zo.prototype.valueOf=zo.prototype.value=function(){return vi(this.__wrapped__,this.__actions__)},zo.prototype.first=zo.prototype.head,st&&(zo.prototype[st]=function(){return this}),zo}();ct?((ct.exports=po)._=po,ut._=po):dt._=po}.call(commonjsGlobal);var _=lodash.exports;const isExpression=e=>/^\s*{{[\s\S]*?}}\s*$/.test(e),extractExpression=e=>{const t=/^\s*{{([\s\S]*?)}}\s*$/.exec(e);return t?t[1]:""},executeExpression=(e,t,o)=>{try{return o?Function("args",`return ${e}`).bind(o)(t):Function("args",`return ${e}`)(t)}catch(n){return null}};var index_vue_vue_type_style_index_0_lang$a="";const _sfc_main$1y={components:{GenerateElementItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateElementItem$3}))))},props:["columns","showControl","paging","pageSize","currentPage","displayFields","group","widget"],data(){return{scrollLeft:0,tableData:_.cloneDeep(this.data)}},emits:["remove-row","table-change","table-item-change"],inject:["dynamicHideFields","formContext"],mounted(){this.$refs.bodyWrapper.addEventListener("scroll",this.handleScroll)},beforeUnmount(){this.$refs.bodyWrapper.removeEventListener("scroll",this.handleScroll)},computed:{rowWidthCalc(){let e=this.showControl?"50px":"0";return this.widget.options.selection&&(e+=" + 50px"),this.columns.forEach((t=>{this.displayFields[t.model]&&(e+=" + "+(t.options.width||"200px"))})),e},rowLeftWidthCalc(){let e=this.widget.options.selection?"50px":"0px";return this.columns.forEach((t=>{this.displayFields[t.model]&&t.options.fixedColumn&&"right"!=t.options.fixedColumnPosition&&(e+=" + "+(t.options.width||"200px"))})),e},rowRightWidthCalc(){let e="0px";return this.columns.forEach((t=>{this.displayFields[t.model]&&t.options.fixedColumn&&"right"==t.options.fixedColumnPosition&&(e+=" + "+(t.options.width||"200px"))})),e}},methods:{handleScroll({scrollLeft:e,scrollTop:t}){this.scrollLeft=this.$refs.bodyWrapper.scrollLeft},columnDisplay(e,t){let o=this.group?`${this.group}.${this.widget.model}.${e}`:`${this.widget.model}.${e}`;return null!=this.dynamicHideFields[o]?!this.dynamicHideFields[o]:"boolean"==typeof t.options.hidden?!t.options.hidden:!isExpression(t.options.hidden)||!executeExpression(extractExpression(t.options.hidden),{},this.formContext)}}},_hoisted_1$14={class:"fm-virtual-table"},_hoisted_2$U={role:"table",class:"fm-virtual-table-main"},_hoisted_3$L={class:"fm-virtual-table__body"},_hoisted_4$I={class:"fm-virtual-table__body-wrapper",ref:"bodyWrapper"},_hoisted_5$G={class:"fm-virtual-table__header"},_hoisted_6$A={class:"fm-virtual-table__header-content"},_hoisted_7$w={key:0,class:"fm-virtual-table__header-cell",style:{width:"50px"}},_hoisted_8$p=["title"],_hoisted_9$m={role:"table",class:"fm-virtual-table-main fm-virtual-table-main__left"},_hoisted_10$i={class:"fm-virtual-table__body"},_hoisted_11$h={class:"fm-virtual-table__header"},_hoisted_12$f={class:"fm-virtual-table__header-content"},_hoisted_13$b={class:"fm-virtual-table__header-row"},_hoisted_14$8={key:0,class:"fm-virtual-table__header-cell",style:{width:"50px"}},_hoisted_15$7={class:"fm-virtual-table__header-cell-text",title:"Column"},_hoisted_16$6={key:1,class:"fm-virtual-table__header-cell",style:{width:"50px"}},_hoisted_17$5=vue.createElementVNode("div",{class:"fm-virtual-table__header-cell-text",title:"Column"}," # ",-1),_hoisted_18$3=[_hoisted_17$5],_hoisted_19$2=["title"],_hoisted_20$2={role:"table",class:"fm-virtual-table-main fm-virtual-table-main__right"},_hoisted_21$2={class:"fm-virtual-table__body"},_hoisted_22$2={class:"fm-virtual-table__header"},_hoisted_23$2={class:"fm-virtual-table__header-content"},_hoisted_24$2={class:"fm-virtual-table__header-row"},_hoisted_25$2=["title"];function _sfc_render$1v(e,t,o,n,i,l){return vue.openBlock(),vue.createElementBlock("div",_hoisted_1$14,[vue.createElementVNode("div",_hoisted_2$U,[vue.createElementVNode("div",_hoisted_3$L,[vue.createElementVNode("div",_hoisted_4$I,[vue.renderSlot(e.$slots,"default",{rowWidthCalc:l.rowWidthCalc,rowLeftWidthCalc:l.rowLeftWidthCalc,rowRightWidthCalc:l.rowRightWidthCalc})],512)]),vue.createElementVNode("div",_hoisted_5$G,[vue.createElementVNode("div",_hoisted_6$A,[vue.createElementVNode("div",{class:"fm-virtual-table__header-row",style:vue.normalizeStyle({left:-i.scrollLeft+"px","min-width":`calc(${l.rowWidthCalc})`,width:`calc(${l.rowWidthCalc})`})},[o.showControl?(vue.openBlock(),vue.createElementBlock("div",_hoisted_7$w)):vue.createCommentVNode("",!0),"0px"!=l.rowLeftWidthCalc?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"fm-virtual-table__header-cell",style:vue.normalizeStyle({width:`calc(${l.rowLeftWidthCalc})`})},null,4)):vue.createCommentVNode("",!0),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.columns,(e=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[l.columnDisplay(e.model,e)&&!e.options.fixedColumn?(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["fm-virtual-table__header-cell",{"is-require":e.options.required,[e.options&&e.options.customClass]:!!e.options.customClass}]),key:e.key,style:vue.normalizeStyle({width:e.options.width})},[vue.createElementVNode("div",{class:"fm-virtual-table__header-cell-text",title:e.options.hideLabel?"":e.name},vue.toDisplayString(e.options.hideLabel?"":e.name),9,_hoisted_8$p)],6)):vue.createCommentVNode("",!0)],64)))),256)),"0px"!=l.rowRightWidthCalc?(vue.openBlock(),vue.createElementBlock("div",{key:2,class:"fm-virtual-table__header-cell",style:vue.normalizeStyle({width:`calc(${l.rowRightWidthCalc})`})},null,4)):vue.createCommentVNode("",!0)],4)])])]),vue.createElementVNode("div",_hoisted_9$m,[vue.createElementVNode("div",_hoisted_10$i,[vue.createElementVNode("div",null,[vue.renderSlot(e.$slots,"left")])]),vue.createElementVNode("div",_hoisted_11$h,[vue.createElementVNode("div",_hoisted_12$f,[vue.createElementVNode("div",_hoisted_13$b,[o.widget.options.selection?(vue.openBlock(),vue.createElementBlock("div",_hoisted_14$8,[vue.createElementVNode("div",_hoisted_15$7,[vue.renderSlot(e.$slots,"selection")])])):vue.createCommentVNode("",!0),o.showControl?(vue.openBlock(),vue.createElementBlock("div",_hoisted_16$6,_hoisted_18$3)):vue.createCommentVNode("",!0),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.columns,(e=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[o.displayFields[e.model]&&e.options.fixedColumn&&"right"!=e.options.fixedColumnPosition?(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["fm-virtual-table__header-cell",{"is-require":e.options.required,[e.options&&e.options.customClass]:!!e.options.customClass}]),key:e.key,style:vue.normalizeStyle({width:e.options.width})},[vue.createElementVNode("div",{class:"fm-virtual-table__header-cell-text",title:e.options.hideLabel?"":e.name},vue.toDisplayString(e.options.hideLabel?"":e.name),9,_hoisted_19$2)],6)):vue.createCommentVNode("",!0)],64)))),256))])])])]),vue.createElementVNode("div",_hoisted_20$2,[vue.createElementVNode("div",_hoisted_21$2,[vue.createElementVNode("div",null,[vue.renderSlot(e.$slots,"right")])]),vue.createElementVNode("div",_hoisted_22$2,[vue.createElementVNode("div",_hoisted_23$2,[vue.createElementVNode("div",_hoisted_24$2,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.columns,(e=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[o.displayFields[e.model]&&e.options.fixedColumn&&"right"==e.options.fixedColumnPosition?(vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["fm-virtual-table__header-cell",{"is-require":e.options.required,[e.options&&e.options.customClass]:!!e.options.customClass}]),key:e.key,style:vue.normalizeStyle({width:e.options.width})},[vue.createElementVNode("div",{class:"fm-virtual-table__header-cell-text",title:e.options.hideLabel?"":e.name},vue.toDisplayString(e.options.hideLabel?"":e.name),9,_hoisted_25$2)],6)):vue.createCommentVNode("",!0)],64)))),256))])])])])])}var VirtualTable=_export_sfc(_sfc_main$1y,[["render",_sfc_render$1v]]);const _sfc_main$1x={props:["rowWidthCalc","rowIndex","tableKey"],data:()=>({resizeObserver:null,eles:[],rowHeight:0}),mounted(){this.eles=document.querySelectorAll(`.fm-virtual-table__row.row_${this.rowIndex}>div`),this.resizeObserver=new ResizeObserver((e=>{this.rowHeight=this.clacRowHeight()})),this.eles.forEach((e=>{this.resizeObserver.observe(e)}))},unmounted(){this.eles.forEach((e=>{this.resizeObserver.unobserve(e)}))},methods:{handleMouseover(){addClass$1(document.querySelectorAll(".fm-virtual-table__row.main.row_"+this.tableKey)[this.rowIndex],"is-hover"),addClass$1(document.querySelectorAll(".fm-virtual-table__row.left.row_"+this.tableKey)[this.rowIndex],"is-hover"),addClass$1(document.querySelectorAll(".fm-virtual-table__row.right.row_"+this.tableKey)[this.rowIndex],"is-hover")},handleMouseout(){removeClass$1(document.querySelectorAll(".fm-virtual-table__row.main.row_"+this.tableKey)[this.rowIndex],"is-hover"),removeClass$1(document.querySelectorAll(".fm-virtual-table__row.left.row_"+this.tableKey)[this.rowIndex],"is-hover"),removeClass$1(document.querySelectorAll(".fm-virtual-table__row.right.row_"+this.tableKey)[this.rowIndex],"is-hover")},clacRowHeight(){let e=0;return this.eles.forEach((t=>{e<t.offsetHeight+.5&&(e=t.offsetHeight+.5)})),e}}};function _sfc_render$1u(e,t,o,n,i,l){return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["fm-virtual-table__row",`row_${o.rowIndex} row_${o.tableKey}`]),onMouseover:t[0]||(t[0]=(...e)=>l.handleMouseover&&l.handleMouseover(...e)),onMouseout:t[1]||(t[1]=(...e)=>l.handleMouseout&&l.handleMouseout(...e)),ref:"tableRow",style:vue.normalizeStyle({"min-width":`calc(${o.rowWidthCalc})`,"min-height":i.rowHeight+"px"})},[vue.renderSlot(e.$slots,"default",{rowHeight:i.rowHeight})],38)}var VirtualRow=_export_sfc(_sfc_main$1x,[["render",_sfc_render$1u]]);const _sfc_main$1w={props:["width","rowHeight"]};function _sfc_render$1t(e,t,o,n,i,l){return vue.openBlock(),vue.createElementBlock("div",{class:"fm-virtual-table__row-cell",style:vue.normalizeStyle({width:o.width,"min-height":o.rowHeight-.5+"px"})},[vue.renderSlot(e.$slots,"default")],4)}var VirtualCell=_export_sfc(_sfc_main$1w,[["render",_sfc_render$1t]]);const updateClassName=(e,t,o,n)=>{for(let i=0;i<e.length;i++)if("grid"===e[i].type)e[i].columns.forEach((e=>{updateClassName(e.list,t,o,n)}));else if("tabs"===e[i].type)e[i].tabs.forEach((e=>{updateClassName(e.list,t,o,n)}));else if("collapse"===e[i].type)e[i].tabs.forEach((e=>{updateClassName(e.list,t,o,n)}));else if("report"===e[i].type)e[i].rows.forEach((e=>{e.columns.forEach((e=>{updateClassName(e.list,t,o,n)}))}));else if("inline"===e[i].type)updateClassName(e[i].list,t,o,n);else if("card"===e[i].type)updateClassName(e[i].list,t,o,n);else if(1===t.length){if(e[i].model===t[0]&&("add"!=n||e[i].options.customClass.split(" ").includes(o)||(e[i].options.customClass=[...e[i].options.customClass.split(" "),o].join(" ")),"remove"==n&&e[i].options.customClass.split(" ").includes(o))){let t=e[i].options.customClass.split(" ");t.splice(t.findIndex((e=>e==o)),1),e[i].options.customClass=t.join(" ")}}else if(e[i].model===t[0]){let l=[...t];l.splice(0,1),"table"===e[i].type&&updateClassName(e[i].tableColumns,l,o,n),"subform"===e[i].type&&updateClassName(e[i].list,l,o,n),"group"===e[i].type&&updateClassName(e[i].list,l,o,n),"dialog"===e[i].type&&updateClassName(e[i].list,l,o,n)}};var index_vue_vue_type_style_index_0_lang$9="";const _sfc_main$1v={components:{VirtualTable:VirtualTable,VirtualRow:VirtualRow,VirtualCell:VirtualCell,GenerateFormItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateFormItem$3})))),GenerateElementItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateElementItem$3}))))},props:["columns","value","models","remote","blanks","disableddata","rules","name","remoteOption","preview","platform","dataSourceValue","eventFunction","widget","printRead","paging","pageSize","isDelete","isAdd","containerKey","showControl","isDialog","dialogName","group","fieldNode"],emits:["update:value"],data:()=>({tableData:[],displayFields:{},disabledFields:{},changeItem:{},pagingData:[],pagingLength:0,currentPage:1,tableHideFields:[],tableDisabledFields:[],mobileScreen:window.innerWidth<768,tableKey:Math.random().toString(36).slice(-8),checkSelectKeys:[],checkAll:!1,checkIndeterminate:!1}),computed:{checkSelectLength(){return this.checkSelectKeys.map((e=>this.tableData.find((t=>t.fm_key==e)))).filter((e=>e)).length}},created(){for(let e=0;e<this.columns.length;e++)this.displayFields[this.columns[e].model]=!this.columns[e].options.hidden,this.disabledFields[this.columns[e].model]=this.columns[e].options.disabled;this.tableData=this.value?this.value.map((e=>({...e,fm_key:e.fm_key||Math.random().toString(36).slice(-8)}))):[],this.tableHideFields=this.value?this.value.map((e=>Object.fromEntries(Object.keys(this.displayFields).map((e=>[e,!this.displayFields[e]]))))):[],this.tableDisabledFields=this.value?this.value.map((e=>Object.fromEntries(Object.keys(this.disabledFields).map((e=>[e,this.disabledFields[e]]))))):[],window.addEventListener("resize",this.getMobileScreen),this.loadPagingData()},provide(){return{setTableData:this.setTableData}},inject:["onFormDisabled","dynamicHideFields","onFormHide","onFormDisplay","formContext"],methods:{columnDisplay(e,t){let o=this.group?`${this.group}.${this.widget.model}.${e}`:`${this.widget.model}.${e}`;return null!=this.dynamicHideFields[o]?!this.dynamicHideFields[o]:"boolean"==typeof t.options.hidden?!t.options.hidden:!isExpression(t.options.hidden)||!executeExpression(extractExpression(t.options.hidden),{},this.formContext)},getMobileScreen(){this.mobileScreen=window.innerWidth<768},setData(e,t){return new Promise("number"!=typeof e?o=>{t=e,this.tableData.forEach(((e,o)=>{Object.keys(t).forEach((e=>{this.setTableData(t[e],o,e)}))})),o()}:o=>{this.$nextTick((()=>{Object.keys(t).forEach((o=>{this.setTableData(t[o],e,o)})),o()}))})},setTableData(e,t,o){const n=_.cloneDeep(this.tableData);n[t][o]=e,this.tableData=n},handleAddRow(){let e={},t={},o={};for(let n=0;n<this.columns.length;n++)"blank"===this.columns[n].type?e[this.columns[n].model]="String"==this.columns[n].options.defaultType?"":"Object"==this.columns[n].options.defaultType?{}:[]:"component"===this.columns[n].type||"link"===this.columns[n].type||"button"===this.columns[n].type?e[this.columns[n].model]=void 0:e[this.columns[n].model]=_.cloneDeep(this.columns[n].options.defaultValue),t[this.columns[n].model]=!this.displayFields[this.columns[n].model],o[this.columns[n].model]=this.disabledFields[this.columns[n].model];e.fm_key=Math.random().toString(36).slice(-8),this.tableData=[...this.tableData,{...e}],this.tableHideFields.push(t),this.tableDisabledFields.push(o),this.changeItem={},this.$nextTick((()=>{if(this.widget&&this.widget.events&&this.widget.events.onRowAdd){let e=this.widget.events.onRowAdd;this.eventFunction[e]({rowIndex:this.tableData.length-1,field:this.widget.model,currentRef:this,group:this.group,fieldNode:this.fieldNode})}this.paging&&(this.tableData.length>this.currentPage*this.pageSize&&(this.currentPage=parseInt((this.tableData.length-1)/this.pageSize)+1),this.loadPagingData()),this.calcCheckStatus()}))},handleRemove(e){const t={...this.tableData[e]};(this.preview&&"mobile"!=this.platform||!this.preview&&!this.mobileScreen)&&!this.widget.options.virtualTable?this.$refs.formTable.toggleRowSelection(this.tableData[e],!1):this.handleCheckSelectChange(e,!1);const o=[...this.tableData];if(o.splice(e,1),this.tableData=o,this.widget&&this.widget.events&&this.widget.events.onRowRemove){let o=this.widget.events.onRowRemove;this.eventFunction[o]({removeIndex:e,removeData:t,field:this.widget.model,currentRef:this,group:this.group,fieldNode:this.fieldNode})}this.changeItem={},this.pagingData=[],this.pagingLength=0,this.$nextTick((()=>{this.paging&&(this.tableData.length%this.pageSize==0&&this.currentPage>parseInt(this.tableData.length/this.pageSize)&&(this.currentPage=parseInt(this.tableData.length/this.pageSize)),this.loadPagingData()),this.calcCheckStatus()}))},hideChild(e,t){"string"==typeof t&&(t=[t]),t.forEach((t=>{this.onFormHide(`${this.fieldNode}.${e}.${t}`)}))},displayChild(e,t){"string"==typeof t&&(t=[t]),t.forEach((t=>{this.onFormDisplay(`${this.fieldNode}.${e}.${t}`)}))},hide(e){"string"==typeof e&&(e=[e]),e.forEach((e=>{this.onFormHide(`${this.fieldNode}.${e}`)}))},display(e){"string"==typeof e&&(e=[e]),e.forEach((e=>{this.onFormDisplay(`${this.fieldNode}.${e}`)}))},disabledChild(e,t,o){"string"==typeof t&&(t=[t]),t.forEach((t=>{this.tableDisabledFields[e][t]=o,this.onFormDisabled(`${this.fieldNode}.${e}.${t}`,o)}))},disabled(e,t){"string"==typeof e&&(e=[e]);for(let o=0;o<this.columns.length;o++)e.indexOf(this.columns[o].model)>=0&&(this.columns[o].options.disabled=t,this.disabledFields[this.columns[o].model]=t);this.tableData.forEach(((o,n)=>{e.forEach((e=>{this.tableDisabledFields[n][e]=t}))}))},setOptions(e,t){"string"==typeof e&&(e=[e]);for(let o=0;o<this.columns.length;o++)e.indexOf(this.columns[o].model)>=0&&Object.keys(t).forEach((e=>{this.columns[o].options[e]=t[e]}))},addClassName(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{updateClassName(this.columns,e.split("."),t,"add")}))},removeClassName(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{updateClassName(this.columns,e.split("."),t,"remove")}))},handleTableChange(e){this.changeItem=e},handlePageChange(e){if(this.currentPage=e,this.pagingData=[],this.pagingLength=0,this.$nextTick((()=>{this.loadPagingData()})),this.widget&&this.widget.events&&this.widget.events.onPageChange){let t=this.widget.events.onPageChange;this.eventFunction[t]({currentPage:e,field:this.widget.model,currentRef:this,group:this.group,fieldNode:this.fieldNode})}},loadPagingData(){let e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;this.pagingData=this.tableData.slice(e,t),this.pagingLength=this.pagingData.length},handleCheckSelectChange(e,t){t?this.checkSelectKeys.includes(this.tableData[e].fm_key)||this.checkSelectKeys.push(this.tableData[e].fm_key):this.checkSelectKeys.includes(this.tableData[e].fm_key)&&this.checkSelectKeys.splice(this.checkSelectKeys.indexOf(this.tableData[e].fm_key),1),this.$nextTick((()=>{this.calcCheckStatus()}))},handleCheckAllChange(e){this.checkIndeterminate=!1,this.checkSelectKeys=e?this.tableData.map((e=>e.fm_key)):[]},calcCheckStatus(){0==this.checkSelectLength?(this.checkAll=!1,this.checkIndeterminate=!1):this.checkSelectLength==this.tableData.length?(this.checkAll=!0,this.checkIndeterminate=!1):(this.checkAll=!1,this.checkIndeterminate=!0)},getSelection(){return(this.preview&&"mobile"!=this.platform||!this.preview&&!this.mobileScreen)&&!this.widget.options.virtualTable?this.$refs.formTable.getSelectionRows():this.checkSelectKeys.map((e=>this.tableData.find((t=>t.fm_key==e)))).filter((e=>e))},clearSelection(){(this.preview&&"mobile"!=this.platform||!this.preview&&!this.mobileScreen)&&!this.widget.options.virtualTable?this.$refs.formTable.clearSelection():(this.checkSelectKeys=[],this.$nextTick((()=>{this.calcCheckStatus()})))}},beforeUnmount(){window.removeEventListener("resize",this.getMobileScreen)},watch:{value(e){var t,o,n,i,l,a;e.forEach((e=>{e.fm_key||(e.fm_key=Math.random().toString(36).slice(-8))})),this.tableData=e;let r=[],s=[];for(let d=0;d<this.value.length;d++){let e=this.value[d],u=Object.keys(e),c={},p={};for(let r=0;r<u.length;r++)c[u[r]]=null!=(n=null==(o=null==(t=this.tableHideFields)?void 0:t[d])?void 0:o[u[r]])&&n,p[u[r]]=null!=(a=null==(l=null==(i=this.tableDisabledFields)?void 0:i[d])?void 0:l[u[r]])&&a;r.push(c),s.push(p)}this.tableHideFields=r,this.tableDisabledFields=s,this.$nextTick((()=>{this.calcCheckStatus()}))},tableData:{deep:!0,handler(e){this.loadPagingData(),this.$emit("update:value",e)}}}},_hoisted_1$13={class:"scope-index"},_hoisted_2$T={class:"scope-action"},_hoisted_3$K=vue.createElementVNode("i",{class:"fm-iconfont icon-trash",style:{"font-size":"12px",margin:"5px"}},null,-1),_hoisted_4$H={key:1},_hoisted_5$F={class:"scope-index"},_hoisted_6$z={class:"scope-action"},_hoisted_7$v=vue.createElementVNode("i",{class:"fm-iconfont icon-trash",style:{"font-size":"12px",margin:"5px"}},null,-1),_hoisted_8$o={key:1},_hoisted_9$l={class:"form-table-mobile-item__top"},_hoisted_10$h=vue.createElementVNode("i",{class:"fm-iconfont icon-trash",style:{"font-size":"12px",margin:"5px"}},null,-1),_hoisted_11$g={class:"form-table-mobile-item__content"},_hoisted_12$e=vue.createElementVNode("i",{class:"fm-iconfont icon-plus",style:{"font-size":"12px",margin:"5px"}},null,-1);function _sfc_render$1s(e,t,o,n,i,l){const a=vue.resolveComponent("el-table-column"),r=vue.resolveComponent("el-button"),s=vue.resolveComponent("el-popconfirm"),d=vue.resolveComponent("generate-form-item"),u=vue.resolveComponent("el-table"),c=vue.resolveComponent("VirtualCell"),p=vue.resolveComponent("VirtualRow"),m=vue.resolveComponent("el-checkbox"),h=vue.resolveComponent("VirtualTable"),f=vue.resolveComponent("el-col"),v=vue.resolveComponent("el-pagination"),g=vue.resolveComponent("el-row");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["form-table",{"is-disabled":o.disableddata}])},[o.preview&&"mobile"!=o.platform||!o.preview&&!i.mobileScreen?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[o.widget.options.virtualTable?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(u,{key:0,data:o.paging?i.pagingData:i.tableData,border:"",class:vue.normalizeClass({"form-table-pc":!o.preview}),ref:"formTable","row-key":"fm_key"},{default:vue.withCtx((()=>[o.widget.options.selection?(vue.openBlock(),vue.createBlock(a,{key:0,type:"selection",fixed:"left",width:"50","reserve-selection":""})):vue.createCommentVNode("",!0),o.showControl?(vue.openBlock(),vue.createBlock(a,{key:1,label:"#",fixed:"",width:"50"},{default:vue.withCtx((t=>[vue.createElementVNode("div",_hoisted_1$13,[vue.createElementVNode("span",null,vue.toDisplayString((o.paging?o.pageSize*(i.currentPage-1):0)+t.$index+1),1)]),vue.createElementVNode("div",_hoisted_2$T,[!o.printRead&&o.isDelete?(vue.openBlock(),vue.createBlock(s,{key:0,teleported:!0,title:e.$t("fm.description.deleteConfirm"),onConfirm:e=>l.handleRemove((o.paging?o.pageSize*(i.currentPage-1):0)+t.$index)},{reference:vue.withCtx((()=>[vue.createVNode(r,{disabled:o.disableddata,type:"danger",size:"small",circle:""},{default:vue.withCtx((()=>[_hoisted_3$K])),_:1},8,["disabled"])])),_:2},1032,["title","onConfirm"])):vue.createCommentVNode("",!0),o.printRead||!o.isDelete?(vue.openBlock(),vue.createElementBlock("span",_hoisted_4$H,vue.toDisplayString((o.paging?o.pageSize*(i.currentPage-1):0)+t.$index+1),1)):vue.createCommentVNode("",!0)])])),_:1})):vue.createCommentVNode("",!0),0==o.columns.length?(vue.openBlock(),vue.createBlock(a,{key:2})):(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:3},vue.renderList(o.columns,(t=>{var n;return vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:t.model},[l.columnDisplay(t.model,t)?(vue.openBlock(),vue.createBlock(a,{key:0,label:t.options.hideLabel?"":t.name,width:t.options.width,"label-class-name":t.options.required?"required":"","class-name":null==(n=t.options)?void 0:n.customClass,fixed:!!t.options.fixedColumn&&(t.options.fixedColumnPosition||"left"),"column-key":t.key},{default:vue.withCtx((n=>[(vue.openBlock(),vue.createBlock(d,{models:i.tableData[(o.paging?o.pageSize*(i.currentPage-1):0)+n.$index],rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.tableHideFields,"sub-disabled-fields":i.tableDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-table":!0,"is-mobile":!1,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n.$index,"table-name":o.name,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n.$index}`,key:`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n.$index}.${t.key}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","table-name","is-dialog","dialog-name","group","field-node"]))])),_:2},1032,["label","width","label-class-name","class-name","fixed","column-key"])):vue.createCommentVNode("",!0)],64)})),128))])),_:3},8,["data","class"])),o.widget.options.virtualTable?(vue.openBlock(),vue.createBlock(h,{key:1,columns:o.columns,showControl:o.showControl,paging:o.paging,pageSize:o.pageSize,currentPage:i.currentPage,displayFields:i.displayFields,group:o.group,widget:o.widget,ref:"virtualTable"},{default:vue.withCtx((({rowWidthCalc:t,rowLeftWidthCalc:n,rowRightWidthCalc:a})=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.paging?i.pagingLength:i.tableData,((r,s)=>(vue.openBlock(),vue.createBlock(p,{rowWidthCalc:t,key:(o.paging?o.pageSize*(i.currentPage-1):0)+s,"row-index":s,class:"main","table-key":i.tableKey},{default:vue.withCtx((()=>[o.showControl?(vue.openBlock(),vue.createBlock(c,{key:0,width:"50px"})):vue.createCommentVNode("",!0),"0px"!=n?(vue.openBlock(),vue.createBlock(c,{key:1,width:`calc(${n})`},null,8,["width"])):vue.createCommentVNode("",!0),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.columns,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[l.columnDisplay(t.model,t)&&!t.options.fixedColumn?(vue.openBlock(),vue.createBlock(c,{key:t.key,width:t.options.width},{default:vue.withCtx((()=>[vue.createVNode(d,{models:i.tableData[(o.paging?o.pageSize*(i.currentPage-1):0)+s],rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.tableHideFields,"sub-disabled-fields":i.tableDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-table":!0,"is-mobile":!1,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+s,"table-name":o.name,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+s}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","table-name","is-dialog","dialog-name","group","field-node"])])),_:2},1032,["width"])):vue.createCommentVNode("",!0)],64)))),256)),"0px"!=a?(vue.openBlock(),vue.createBlock(c,{key:2,width:`calc(${a})`},null,8,["width"])):vue.createCommentVNode("",!0)])),_:2},1032,["rowWidthCalc","row-index","table-key"])))),128))])),left:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.paging?i.pagingLength:i.tableData,((t,n)=>(vue.openBlock(),vue.createBlock(p,{key:(o.paging?o.pageSize*(i.currentPage-1):0)+n,rowIndex:n,class:"left","table-key":i.tableKey},{default:vue.withCtx((()=>[o.widget.options.selection?(vue.openBlock(),vue.createBlock(c,{key:0,width:"50px",class:"fm-table-check"},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:i.checkSelectKeys.includes(i.tableData[(o.paging?o.pageSize*(i.currentPage-1):0)+n].fm_key),onChange:e=>l.handleCheckSelectChange((o.paging?o.pageSize*(i.currentPage-1):0)+n,e)},null,8,["modelValue","onChange"])])),_:2},1024)):vue.createCommentVNode("",!0),o.showControl?(vue.openBlock(),vue.createBlock(c,{key:1,width:"50px"},{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_5$F,[vue.createElementVNode("span",null,vue.toDisplayString((o.paging?o.pageSize*(i.currentPage-1):0)+n+1),1)]),vue.createElementVNode("div",_hoisted_6$z,[!o.printRead&&o.isDelete?(vue.openBlock(),vue.createBlock(s,{key:0,teleported:!0,title:e.$t("fm.description.deleteConfirm"),onConfirm:e=>l.handleRemove((o.paging?o.pageSize*(i.currentPage-1):0)+n)},{reference:vue.withCtx((()=>[vue.createVNode(r,{disabled:o.disableddata,type:"danger",size:"small",circle:""},{default:vue.withCtx((()=>[_hoisted_7$v])),_:1},8,["disabled"])])),_:2},1032,["title","onConfirm"])):vue.createCommentVNode("",!0),o.printRead||!o.isDelete?(vue.openBlock(),vue.createElementBlock("span",_hoisted_8$o,vue.toDisplayString((o.paging?o.pageSize*(i.currentPage-1):0)+n+1),1)):vue.createCommentVNode("",!0)])])),_:2},1024)):vue.createCommentVNode("",!0),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.columns,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[l.columnDisplay(t.model,t)&&t.options.fixedColumn&&"right"!=t.options.fixedColumnPosition?(vue.openBlock(),vue.createBlock(c,{key:t.key,width:t.options.width},{default:vue.withCtx((()=>[vue.createVNode(d,{models:i.tableData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.tableHideFields,"sub-disabled-fields":i.tableDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-table":!0,"is-mobile":!1,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"table-name":o.name,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","table-name","is-dialog","dialog-name","group","field-node"])])),_:2},1032,["width"])):vue.createCommentVNode("",!0)],64)))),256))])),_:2},1032,["rowIndex","table-key"])))),128))])),right:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.paging?i.pagingLength:i.tableData,((t,n)=>(vue.openBlock(),vue.createBlock(p,{key:(o.paging?o.pageSize*(i.currentPage-1):0)+n,rowIndex:n,class:"right","table-key":i.tableKey},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.columns,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[l.columnDisplay(t.model,t)&&t.options.fixedColumn&&"right"==t.options.fixedColumnPosition?(vue.openBlock(),vue.createBlock(c,{key:t.key,width:t.options.width},{default:vue.withCtx((()=>[vue.createVNode(d,{models:i.tableData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.tableHideFields,"sub-disabled-fields":i.tableDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-table":!0,"is-mobile":!1,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"table-name":o.name,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","table-name","is-dialog","dialog-name","group","field-node"])])),_:2},1032,["width"])):vue.createCommentVNode("",!0)],64)))),256))])),_:2},1032,["rowIndex","table-key"])))),128))])),selection:vue.withCtx((()=>[vue.createVNode(m,{modelValue:i.checkAll,"onUpdate:modelValue":t[0]||(t[0]=e=>i.checkAll=e),indeterminate:i.checkIndeterminate,onChange:l.handleCheckAllChange},null,8,["modelValue","indeterminate","onChange"])])),_:3},8,["columns","showControl","paging","pageSize","currentPage","displayFields","group","widget"])):vue.createCommentVNode("",!0)],64)):vue.createCommentVNode("",!0),o.preview&&"mobile"===o.platform||!o.preview&&i.mobileScreen?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"form-table-mobile",style:vue.normalizeStyle({display:o.preview&&"mobile"===o.platform?"block":""})},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.paging?i.pagingLength:i.tableData,((t,n)=>(vue.openBlock(),vue.createElementBlock("div",{class:"form-table-mobile-item",key:(o.paging?o.pageSize*(i.currentPage-1):0)+n},[vue.createElementVNode("div",_hoisted_9$l,[o.widget.options.selection?(vue.openBlock(),vue.createBlock(m,{key:0,modelValue:i.checkSelectKeys.includes(i.tableData[(o.paging?o.pageSize*(i.currentPage-1):0)+n].fm_key),onChange:e=>l.handleCheckSelectChange((o.paging?o.pageSize*(i.currentPage-1):0)+n,e),style:{"margin-right":"10px"}},null,8,["modelValue","onChange"])):vue.createCommentVNode("",!0),vue.createElementVNode("span",null,"# "+vue.toDisplayString((o.paging?o.pageSize*(i.currentPage-1):0)+n+1),1),o.showControl&&!o.printRead&&o.isDelete?(vue.openBlock(),vue.createBlock(s,{key:1,teleported:!1,title:e.$t("fm.description.deleteConfirm"),onConfirm:e=>l.handleRemove((o.paging?o.pageSize*(i.currentPage-1):0)+n)},{reference:vue.withCtx((()=>[vue.createVNode(r,{disabled:o.disableddata,type:"danger",size:"small",circle:""},{default:vue.withCtx((()=>[_hoisted_10$h])),_:1},8,["disabled"])])),_:2},1032,["title","onConfirm"])):vue.createCommentVNode("",!0)]),vue.createElementVNode("div",_hoisted_11$g,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.columns,(t=>(vue.openBlock(),vue.createBlock(d,{key:t.key,models:i.tableData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.tableHideFields,"sub-disabled-fields":i.tableDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-table":!0,"is-mobile":!0,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"table-name":o.name,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","table-name","is-dialog","dialog-name","group","field-node"])))),128))])])))),128))],4)):vue.createCommentVNode("",!0),vue.createVNode(g,null,{default:vue.withCtx((()=>[vue.createVNode(f,{span:o.preview&&"mobile"!=o.platform||!o.preview?12:24,xs:24},{default:vue.withCtx((()=>[!o.disableddata&&o.isAdd?(vue.openBlock(),vue.createBlock(r,{key:0,link:"",type:"primary",onClick:l.handleAddRow},{default:vue.withCtx((()=>[_hoisted_12$e,vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.add")),1)])),_:1},8,["onClick"])):vue.createCommentVNode("",!0)])),_:1},8,["span"]),vue.createVNode(f,{span:(!o.preview||"mobile"==o.platform)&&o.preview||o.disableddata?24:12,xs:24},{default:vue.withCtx((()=>[o.paging&&i.tableData.length?(vue.openBlock(),vue.createBlock(v,{key:0,style:{float:"right"},layout:"total, prev, pager, next","page-size":o.pageSize,"current-page":i.currentPage,total:i.tableData.length,"pager-count":5,onCurrentChange:l.handlePageChange},null,8,["page-size","current-page","total","onCurrentChange"])):vue.createCommentVNode("",!0)])),_:1},8,["span"])])),_:1})],2)}var FmFormTable$1=_export_sfc(_sfc_main$1v,[["render",_sfc_render$1s]]),config_vue_vue_type_style_index_0_lang="";const _sfc_main$1u={name:"event-config",props:["events","eventscripts"],emits:["on-add","on-remove","on-edit","update:events"],data(){return{eventsModel:this.events,eventArray:Object.keys(this.events).map((e=>({eventName:e,functionKey:this.events[e]}))).filter((e=>e.functionKey)),eventEnum:{onChange:"onChange 值发生变化",onClick:"onClick 单击",onFocus:"onFocus 获取焦点",onBlur:"onBlur 失去焦点",onRowAdd:"onRowAdd 子表单添加行",onRowRemove:"onRowRemove 子表单删除行",onUploadSuccess:"onUploadSuccess 上传成功",onUploadError:"onUploadError 上传失败",onRemove:"onRemove 移除",onUploadProgress:"onUploadProgress 上传中",onSelect:"onSelect 文件选择",onPageChange:"onPageChange 当前页改变",onCancel:"onCancel 点击取消按钮",onConfirm:"onConfirm 点击确定按钮",onCurrentRow:"onCurrentRow 选择当前行",onSelectionChange:"onSelectionChange 选择项变化",onMounted:"onMounted 渲染完成",onOpen:"onOpen 打开",onClose:"onClose 关闭"},readonlyFunctions:["mounted","refresh","onFormChange"]}},methods:{handleCommand(e){this.$emit("on-add",e)},handleRemove(e,t){this.$emit("on-remove",e.eventName)},handleCode(e){this.$emit("on-edit",e)}},watch:{events:{deep:!0,handler(e){this.eventsModel=e,this.eventArray=Object.keys(this.events).map((e=>({eventName:e,functionKey:this.events[e]}))).filter((e=>e.functionKey))}},eventsModel:{deep:!0,handler(e){this.$emit("update:events",e)}},eventArray:{deep:!0,handler(e){for(let t=0;t<e.length;t++)this.eventsModel[e[t].eventName]=e[t].functionKey}}}},_hoisted_1$12={class:"event-panel-config"},_hoisted_2$S={class:"event-panel-item"},_hoisted_3$J=["onClick","title"],_hoisted_4$G=["onClick","title"],_hoisted_5$E=vue.createElementVNode("i",{class:"fm-iconfont icon-plus",style:{"font-size":"12px",margin:"5px"}},null,-1);function _sfc_render$1r(e,t,o,n,i,l){const a=vue.resolveComponent("el-option"),r=vue.resolveComponent("el-select"),s=vue.resolveComponent("el-collapse-item"),d=vue.resolveComponent("el-collapse"),u=vue.resolveComponent("el-button"),c=vue.resolveComponent("el-dropdown-item"),p=vue.resolveComponent("el-dropdown-menu"),m=vue.resolveComponent("el-dropdown");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1$12,[i.eventArray.length?(vue.openBlock(),vue.createBlock(d,{key:0,modelValue:i.eventArray.map((e=>e.eventName))},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.eventArray,((t,n)=>{var d;return vue.openBlock(),vue.createBlock(s,{key:t.eventName,name:t.eventName,title:"zh-cn"==e.$i18n.locale&&null!=(d=i.eventEnum[t.eventName])?d:t.eventName},{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_2$S,[vue.createVNode(r,{size:"default",style:{width:"100%","margin-bottom":"5px"},modelValue:t.functionKey,"onUpdate:modelValue":e=>t.functionKey=e},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.eventscripts,(e=>(vue.openBlock(),vue.createBlock(a,{disabled:i.readonlyFunctions.includes(e.value),key:e.value,label:e.label,value:e.value},null,8,["disabled","label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"]),vue.createElementVNode("i",{class:"fm-iconfont icon-code",onClick:e=>l.handleCode(t),title:e.$t("fm.eventscript.config.code")},null,8,_hoisted_3$J),vue.createElementVNode("i",{class:"fm-iconfont icon-trash",onClick:e=>l.handleRemove(t,n),title:e.$t("fm.tooltip.trash")},null,8,_hoisted_4$G)])])),_:2},1032,["name","title"])})),128))])),_:1},8,["modelValue"])):vue.createCommentVNode("",!0),vue.createVNode(m,{style:{width:"100%","margin-top":"5px",display:"block"},trigger:"click",onCommand:l.handleCommand,szie:"small"},{dropdown:vue.withCtx((()=>[vue.createVNode(p,{style:{width:"280px"}},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(Object.keys(o.events),(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:t},["zh-cn"==e.$i18n.locale?(vue.openBlock(),vue.createBlock(c,{key:0,disabled:0!=i.eventArray.filter((e=>e.eventName==t)).length,command:t},{default:vue.withCtx((()=>{var e;return[vue.createTextVNode(vue.toDisplayString(null!=(e=i.eventEnum[t])?e:t),1)]})),_:2},1032,["disabled","command"])):(vue.openBlock(),vue.createBlock(c,{key:1,disabled:0!=i.eventArray.filter((e=>e.eventName==t)).length,command:t},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(t),1)])),_:2},1032,["disabled","command"]))],64)))),128))])),_:1})])),default:vue.withCtx((()=>[vue.createVNode(u,{type:"primary",plain:"",style:{width:"100%"},size:"default"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.eventscript.config.create")),1),_hoisted_5$E])),_:1})])),_:1},8,["onCommand"])])}var EventConfig=_export_sfc(_sfc_main$1u,[["render",_sfc_render$1r]]);const _sfc_main$1t={__name:"index",props:{modelValue:{type:String,default:""},toolbar:{type:Array},disabled:{type:Boolean},customStyle:{type:Object}},emits:["update:modelValue"],setup(e,{emit:t}){const o=e,n=vue.ref(o.modelValue);let i=o.modelValue;const l=t,a=vue.ref(null);return vue.watch((()=>o.modelValue),(e=>{i!==e&&(a.value.setHTML(e),vue.nextTick((()=>{let t=a.value.getQuill();t.setSelection(e.length,0,"api"),t.focus()})))})),vue.watch(n,(e=>{l("update:modelValue",e),i=e})),(t,o)=>{const i=vue.resolveComponent("QuillEditor");return vue.openBlock(),vue.createElementBlock("div",{style:vue.normalizeStyle(e.customStyle)},[vue.createVNode(i,{content:n.value,"onUpdate:content":o[0]||(o[0]=e=>n.value=e),toolbar:e.toolbar,enable:!e.disabled,"read-only":e.disabled,"content-type":"html",ref_key:"quillEditor",ref:a},null,8,["content","toolbar","enable","read-only"])],4)}}};var tinyEmitter={exports:{}};function E$1(){}E$1.prototype={on:function(e,t,o){var n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:t,ctx:o}),this},once:function(e,t,o){var n=this;function i(){n.off(e,i),t.apply(o,arguments)}return i._=t,this.on(e,i,o)},emit:function(e){for(var t=[].slice.call(arguments,1),o=((this.e||(this.e={}))[e]||[]).slice(),n=0,i=o.length;n<i;n++)o[n].fn.apply(o[n].ctx,t);return this},off:function(e,t){var o=this.e||(this.e={}),n=o[e],i=[];if(n&&t)for(var l=0,a=n.length;l<a;l++)n[l].fn!==t&&n[l].fn._!==t&&i.push(n[l]);return i.length?o[e]=i:delete o[e],this}},tinyEmitter.exports=E$1,tinyEmitter.exports.TinyEmitter=E$1;var E=tinyEmitter.exports,instance=new E;const EventBus={$on:(...e)=>instance.on(...e),$once:(...e)=>instance.once(...e),$off:(...e)=>instance.off(...e),$emit:(...e)=>instance.emit(...e)};var codemirror$1={exports:{}};!function(e,t){e.exports=function(){var e=navigator.userAgent,t=navigator.platform,o=/gecko\/\d/i.test(e),n=/MSIE \d/.test(e),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),l=/Edge\/(\d+)/.exec(e),a=n||i||l,r=a&&(n?document.documentMode||6:+(l||i)[1]),s=!l&&/WebKit\//.test(e),d=s&&/Qt\/\d+\.\d+/.test(e),u=!l&&/Chrome\/(\d+)/.exec(e),c=u&&+u[1],p=/Opera\//.test(e),m=/Apple Computer/.test(navigator.vendor),h=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),f=/PhantomJS/.test(e),v=m&&(/Mobile\/\w+/.test(e)||navigator.maxTouchPoints>2),g=/Android/.test(e),y=v||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),b=v||/Mac/.test(t),w=/\bCrOS\b/.test(e),k=/win/i.test(t),_=p&&e.match(/Version\/(\d*\.\d*)/);_&&(_=Number(_[1])),_&&_>=15&&(p=!1,s=!0);var C=b&&(d||p&&(null==_||_<12.11)),x=o||a&&r>=9;function S(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var V,N=function(e,t){var o=e.className,n=S(t).exec(o);if(n){var i=o.slice(n.index+n[0].length);e.className=o.slice(0,n.index)+(i?n[1]+i:"")}};function E(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function $(e,t){return E(e).appendChild(t)}function D(e,t,o,n){var i=document.createElement(e);if(o&&(i.className=o),n&&(i.style.cssText=n),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var l=0;l<t.length;++l)i.appendChild(t[l]);return i}function B(e,t,o,n){var i=D(e,t,o,n);return i.setAttribute("role","presentation"),i}function T(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function O(e){var t,o=e.ownerDocument||e;try{t=e.activeElement}catch(Me){t=o.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function I(e,t){var o=e.className;S(t).test(o)||(e.className+=(o?" ":"")+t)}function F(e,t){for(var o=e.split(" "),n=0;n<o.length;n++)o[n]&&!S(o[n]).test(t)&&(t+=" "+o[n]);return t}V=document.createRange?function(e,t,o,n){var i=document.createRange();return i.setEnd(n||e,o),i.setStart(e,t),i}:function(e,t,o){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(Me){return n}return n.collapse(!0),n.moveEnd("character",o),n.moveStart("character",t),n};var L=function(e){e.select()};function P(e){return e.display.wrapper.ownerDocument}function M(e){return A(e.display.wrapper)}function A(e){return e.getRootNode?e.getRootNode():e.ownerDocument}function R(e){return P(e).defaultView}function z(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function U(e,t,o){for(var n in t||(t={}),e)!e.hasOwnProperty(n)||!1===o&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function W(e,t,o,n,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var l=n||0,a=i||0;;){var r=e.indexOf("\t",l);if(r<0||r>=t)return a+(t-l);a+=r-l,a+=o-a%o,l=r+1}}v?L=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:a&&(L=function(e){try{e.select()}catch(t){}});var j=function(){this.id=null,this.f=null,this.time=0,this.handler=z(this.onTimeout,this)};function H(e,t){for(var o=0;o<e.length;++o)if(e[o]==t)return o;return-1}j.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},j.prototype.set=function(e,t){this.f=t;var o=+new Date+e;(!this.id||o<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=o)};var G=50,K={toString:function(){return"CodeMirror.Pass"}},q={scroll:!1},Y={origin:"*mouse"},X={origin:"+move"};function J(e,t,o){for(var n=0,i=0;;){var l=e.indexOf("\t",n);-1==l&&(l=e.length);var a=l-n;if(l==e.length||i+a>=t)return n+Math.min(a,t-i);if(i+=l-n,n=l+1,(i+=o-i%o)>=t)return n}}var Q=[""];function Z(e){for(;Q.length<=e;)Q.push(ee(Q)+" ");return Q[e]}function ee(e){return e[e.length-1]}function te(e,t){for(var o=[],n=0;n<e.length;n++)o[n]=t(e[n],n);return o}function oe(e,t,o){for(var n=0,i=o(t);n<e.length&&o(e[n])<=i;)n++;e.splice(n,0,t)}function ne(){}function ie(e,t){var o;return Object.create?o=Object.create(e):(ne.prototype=e,o=new ne),t&&U(t,o),o}var le=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ae(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||le.test(e))}function re(e,t){return t?!!(t.source.indexOf("\\w")>-1&&ae(e))||t.test(e):ae(e)}function se(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var de=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ue(e){return e.charCodeAt(0)>=768&&de.test(e)}function ce(e,t,o){for(;(o<0?t>0:t<e.length)&&ue(e.charAt(t));)t+=o;return t}function pe(e,t,o){for(var n=t>o?-1:1;;){if(t==o)return t;var i=(t+o)/2,l=n<0?Math.ceil(i):Math.floor(i);if(l==t)return e(l)?t:o;e(l)?o=l:t=l+n}}function me(e,t,o,n){if(!e)return n(t,o,"ltr",0);for(var i=!1,l=0;l<e.length;++l){var a=e[l];(a.from<o&&a.to>t||t==o&&a.to==t)&&(n(Math.max(a.from,t),Math.min(a.to,o),1==a.level?"rtl":"ltr",l),i=!0)}i||n(t,o,"ltr")}var he=null;function fe(e,t,o){var n;he=null;for(var i=0;i<e.length;++i){var l=e[i];if(l.from<t&&l.to>t)return i;l.to==t&&(l.from!=l.to&&"before"==o?n=i:he=i),l.from==t&&(l.from!=l.to&&"before"!=o?n=i:he=i)}return null!=n?n:he}var ve=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function o(o){return o<=247?e.charAt(o):1424<=o&&o<=1524?"R":1536<=o&&o<=1785?t.charAt(o-1536):1774<=o&&o<=2220?"r":8192<=o&&o<=8203?"w":8204==o?"b":"L"}var n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,l=/[LRr]/,a=/[Lb1n]/,r=/[1n]/;function s(e,t,o){this.level=e,this.from=t,this.to=o}return function(e,t){var d="ltr"==t?"L":"R";if(0==e.length||"ltr"==t&&!n.test(e))return!1;for(var u=e.length,c=[],p=0;p<u;++p)c.push(o(e.charCodeAt(p)));for(var m=0,h=d;m<u;++m){var f=c[m];"m"==f?c[m]=h:h=f}for(var v=0,g=d;v<u;++v){var y=c[v];"1"==y&&"r"==g?c[v]="n":l.test(y)&&(g=y,"r"==y&&(c[v]="R"))}for(var b=1,w=c[0];b<u-1;++b){var k=c[b];"+"==k&&"1"==w&&"1"==c[b+1]?c[b]="1":","!=k||w!=c[b+1]||"1"!=w&&"n"!=w||(c[b]=w),w=k}for(var _=0;_<u;++_){var C=c[_];if(","==C)c[_]="N";else if("%"==C){var x=void 0;for(x=_+1;x<u&&"%"==c[x];++x);for(var S=_&&"!"==c[_-1]||x<u&&"1"==c[x]?"1":"N",V=_;V<x;++V)c[V]=S;_=x-1}}for(var N=0,E=d;N<u;++N){var $=c[N];"L"==E&&"1"==$?c[N]="L":l.test($)&&(E=$)}for(var D=0;D<u;++D)if(i.test(c[D])){var B=void 0;for(B=D+1;B<u&&i.test(c[B]);++B);for(var T="L"==(D?c[D-1]:d),O=T==("L"==(B<u?c[B]:d))?T?"L":"R":d,I=D;I<B;++I)c[I]=O;D=B-1}for(var F,L=[],P=0;P<u;)if(a.test(c[P])){var M=P;for(++P;P<u&&a.test(c[P]);++P);L.push(new s(0,M,P))}else{var A=P,R=L.length,z="rtl"==t?1:0;for(++P;P<u&&"L"!=c[P];++P);for(var U=A;U<P;)if(r.test(c[U])){A<U&&(L.splice(R,0,new s(1,A,U)),R+=z);var W=U;for(++U;U<P&&r.test(c[U]);++U);L.splice(R,0,new s(2,W,U)),R+=z,A=U}else++U;A<P&&L.splice(R,0,new s(1,A,P))}return"ltr"==t&&(1==L[0].level&&(F=e.match(/^\s+/))&&(L[0].from=F[0].length,L.unshift(new s(0,0,F[0].length))),1==ee(L).level&&(F=e.match(/\s+$/))&&(ee(L).to-=F[0].length,L.push(new s(0,u-F[0].length,u)))),"rtl"==t?L.reverse():L}}();function ge(e,t){var o=e.order;return null==o&&(o=e.order=ve(e.text,t)),o}var ye=[],be=function(e,t,o){if(e.addEventListener)e.addEventListener(t,o,!1);else if(e.attachEvent)e.attachEvent("on"+t,o);else{var n=e._handlers||(e._handlers={});n[t]=(n[t]||ye).concat(o)}};function we(e,t){return e._handlers&&e._handlers[t]||ye}function ke(e,t,o){if(e.removeEventListener)e.removeEventListener(t,o,!1);else if(e.detachEvent)e.detachEvent("on"+t,o);else{var n=e._handlers,i=n&&n[t];if(i){var l=H(i,o);l>-1&&(n[t]=i.slice(0,l).concat(i.slice(l+1)))}}}function _e(e,t){var o=we(e,t);if(o.length)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<o.length;++i)o[i].apply(null,n)}function Ce(e,t,o){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),_e(e,o||t.type,e,t),$e(t)||t.codemirrorIgnore}function xe(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var o=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==H(o,t[n])&&o.push(t[n])}function Se(e,t){return we(e,t).length>0}function Ve(e){e.prototype.on=function(e,t){be(this,e,t)},e.prototype.off=function(e,t){ke(this,e,t)}}function Ne(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Ee(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function $e(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function De(e){Ne(e),Ee(e)}function Be(e){return e.target||e.srcElement}function Te(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),b&&e.ctrlKey&&1==t&&(t=3),t}var Oe,Ie,Fe=function(){if(a&&r<9)return!1;var e=D("div");return"draggable"in e||"dragDrop"in e}();function Le(e){if(null==Oe){var t=D("span","​");$(e,D("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Oe=t.offsetWidth<=1&&t.offsetHeight>2&&!(a&&r<8))}var o=Oe?D("span","​"):D("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return o.setAttribute("cm-text",""),o}function Pe(e){if(null!=Ie)return Ie;var t=$(e,document.createTextNode("AخA")),o=V(t,0,1).getBoundingClientRect(),n=V(t,1,2).getBoundingClientRect();return E(e),!(!o||o.left==o.right)&&(Ie=n.right-o.right<3)}var Me,Ae=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,o=[],n=e.length;t<=n;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var l=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),a=l.indexOf("\r");-1!=a?(o.push(l.slice(0,a)),t+=a+1):(o.push(l),t=i+1)}return o}:function(e){return e.split(/\r\n?|\n/)},Re=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(Me){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(Me){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},ze="oncopy"in(Me=D("div"))||(Me.setAttribute("oncopy","return;"),"function"==typeof Me.oncopy),Ue=null;function We(e){if(null!=Ue)return Ue;var t=$(e,D("span","x")),o=t.getBoundingClientRect(),n=V(t,0,1).getBoundingClientRect();return Ue=Math.abs(o.left-n.left)>1}var je={},He={};function Ge(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),je[e]=t}function Ke(e,t){He[e]=t}function qe(e){if("string"==typeof e&&He.hasOwnProperty(e))e=He[e];else if(e&&"string"==typeof e.name&&He.hasOwnProperty(e.name)){var t=He[e.name];"string"==typeof t&&(t={name:t}),(e=ie(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return qe("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return qe("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Ye(e,t){t=qe(t);var o=je[t.name];if(!o)return Ye(e,"text/plain");var n=o(e,t);if(Xe.hasOwnProperty(t.name)){var i=Xe[t.name];for(var l in i)i.hasOwnProperty(l)&&(n.hasOwnProperty(l)&&(n["_"+l]=n[l]),n[l]=i[l])}if(n.name=t.name,t.helperType&&(n.helperType=t.helperType),t.modeProps)for(var a in t.modeProps)n[a]=t.modeProps[a];return n}var Xe={};function Je(e,t){U(t,Xe.hasOwnProperty(e)?Xe[e]:Xe[e]={})}function Qe(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var o={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),o[n]=i}return o}function Ze(e,t){for(var o;e.innerMode&&(o=e.innerMode(t))&&o.mode!=e;)t=o.state,e=o.mode;return o||{mode:e,state:t}}function et(e,t,o){return!e.startState||e.startState(t,o)}var tt=function(e,t,o){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=o};function ot(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var o=e;!o.lines;)for(var n=0;;++n){var i=o.children[n],l=i.chunkSize();if(t<l){o=i;break}t-=l}return o.lines[t]}function nt(e,t,o){var n=[],i=t.line;return e.iter(t.line,o.line+1,(function(e){var l=e.text;i==o.line&&(l=l.slice(0,o.ch)),i==t.line&&(l=l.slice(t.ch)),n.push(l),++i})),n}function it(e,t,o){var n=[];return e.iter(t,o,(function(e){n.push(e.text)})),n}function lt(e,t){var o=t-e.height;if(o)for(var n=e;n;n=n.parent)n.height+=o}function at(e){if(null==e.parent)return null;for(var t=e.parent,o=H(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var i=0;n.children[i]!=t;++i)o+=n.children[i].chunkSize();return o+t.first}function rt(e,t){var o=e.first;e:do{for(var n=0;n<e.children.length;++n){var i=e.children[n],l=i.height;if(t<l){e=i;continue e}t-=l,o+=i.chunkSize()}return o}while(!e.lines);for(var a=0;a<e.lines.length;++a){var r=e.lines[a].height;if(t<r)break;t-=r}return o+a}function st(e,t){return t>=e.first&&t<e.first+e.size}function dt(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function ut(e,t,o){if(void 0===o&&(o=null),!(this instanceof ut))return new ut(e,t,o);this.line=e,this.ch=t,this.sticky=o}function ct(e,t){return e.line-t.line||e.ch-t.ch}function pt(e,t){return e.sticky==t.sticky&&0==ct(e,t)}function mt(e){return ut(e.line,e.ch)}function ht(e,t){return ct(e,t)<0?t:e}function ft(e,t){return ct(e,t)<0?e:t}function vt(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function gt(e,t){if(t.line<e.first)return ut(e.first,0);var o=e.first+e.size-1;return t.line>o?ut(o,ot(e,o).text.length):yt(t,ot(e,t.line).text.length)}function yt(e,t){var o=e.ch;return null==o||o>t?ut(e.line,t):o<0?ut(e.line,0):e}function bt(e,t){for(var o=[],n=0;n<t.length;n++)o[n]=gt(e,t[n]);return o}tt.prototype.eol=function(){return this.pos>=this.string.length},tt.prototype.sol=function(){return this.pos==this.lineStart},tt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},tt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},tt.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},tt.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},tt.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},tt.prototype.skipToEnd=function(){this.pos=this.string.length},tt.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},tt.prototype.backUp=function(e){this.pos-=e},tt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=W(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?W(this.string,this.lineStart,this.tabSize):0)},tt.prototype.indentation=function(){return W(this.string,null,this.tabSize)-(this.lineStart?W(this.string,this.lineStart,this.tabSize):0)},tt.prototype.match=function(e,t,o){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}var i=function(e){return o?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},tt.prototype.current=function(){return this.string.slice(this.start,this.pos)},tt.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},tt.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},tt.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var wt=function(e,t){this.state=e,this.lookAhead=t},kt=function(e,t,o,n){this.state=t,this.doc=e,this.line=o,this.maxLookAhead=n||0,this.baseTokens=null,this.baseTokenPos=1};function _t(e,t,o,n){var i=[e.state.modeGen],l={};Bt(e,t.text,e.doc.mode,o,(function(e,t){return i.push(e,t)}),l,n);for(var a=o.state,r=function(n){o.baseTokens=i;var r=e.state.overlays[n],s=1,d=0;o.state=!0,Bt(e,t.text,r.mode,o,(function(e,t){for(var o=s;d<e;){var n=i[s];n>e&&i.splice(s,1,e,i[s+1],n),s+=2,d=Math.min(e,n)}if(t)if(r.opaque)i.splice(o,s-o,e,"overlay "+t),s=o+2;else for(;o<s;o+=2){var l=i[o+1];i[o+1]=(l?l+" ":"")+"overlay "+t}}),l),o.state=a,o.baseTokens=null,o.baseTokenPos=1},s=0;s<e.state.overlays.length;++s)r(s);return{styles:i,classes:l.bgClass||l.textClass?l:null}}function Ct(e,t,o){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=xt(e,at(t)),i=t.text.length>e.options.maxHighlightLength&&Qe(e.doc.mode,n.state),l=_t(e,t,n);i&&(n.state=i),t.stateAfter=n.save(!i),t.styles=l.styles,l.classes?t.styleClasses=l.classes:t.styleClasses&&(t.styleClasses=null),o===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function xt(e,t,o){var n=e.doc,i=e.display;if(!n.mode.startState)return new kt(n,!0,t);var l=Tt(e,t,o),a=l>n.first&&ot(n,l-1).stateAfter,r=a?kt.fromSaved(n,a,l):new kt(n,et(n.mode),l);return n.iter(l,t,(function(o){St(e,o.text,r);var n=r.line;o.stateAfter=n==t-1||n%5==0||n>=i.viewFrom&&n<i.viewTo?r.save():null,r.nextLine()})),o&&(n.modeFrontier=r.line),r}function St(e,t,o,n){var i=e.doc.mode,l=new tt(t,e.options.tabSize,o);for(l.start=l.pos=n||0,""==t&&Vt(i,o.state);!l.eol();)Nt(i,l,o.state),l.start=l.pos}function Vt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var o=Ze(e,t);return o.mode.blankLine?o.mode.blankLine(o.state):void 0}}function Nt(e,t,o,n){for(var i=0;i<10;i++){n&&(n[0]=Ze(e,o).mode);var l=e.token(t,o);if(t.pos>t.start)return l}throw new Error("Mode "+e.name+" failed to advance stream.")}kt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},kt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},kt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},kt.fromSaved=function(e,t,o){return t instanceof wt?new kt(e,Qe(e.mode,t.state),o,t.lookAhead):new kt(e,Qe(e.mode,t),o)},kt.prototype.save=function(e){var t=!1!==e?Qe(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new wt(t,this.maxLookAhead):t};var Et=function(e,t,o){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=o};function $t(e,t,o,n){var i,l,a=e.doc,r=a.mode,s=ot(a,(t=gt(a,t)).line),d=xt(e,t.line,o),u=new tt(s.text,e.options.tabSize,d);for(n&&(l=[]);(n||u.pos<t.ch)&&!u.eol();)u.start=u.pos,i=Nt(r,u,d.state),n&&l.push(new Et(u,i,Qe(a.mode,d.state)));return n?l:new Et(u,i,d.state)}function Dt(e,t){if(e)for(;;){var o=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!o)break;e=e.slice(0,o.index)+e.slice(o.index+o[0].length);var n=o[1]?"bgClass":"textClass";null==t[n]?t[n]=o[2]:new RegExp("(?:^|\\s)"+o[2]+"(?:$|\\s)").test(t[n])||(t[n]+=" "+o[2])}return e}function Bt(e,t,o,n,i,l,a){var r=o.flattenSpans;null==r&&(r=e.options.flattenSpans);var s,d=0,u=null,c=new tt(t,e.options.tabSize,n),p=e.options.addModeClass&&[null];for(""==t&&Dt(Vt(o,n.state),l);!c.eol();){if(c.pos>e.options.maxHighlightLength?(r=!1,a&&St(e,t,n,c.pos),c.pos=t.length,s=null):s=Dt(Nt(o,c,n.state,p),l),p){var m=p[0].name;m&&(s="m-"+(s?m+" "+s:m))}if(!r||u!=s){for(;d<c.start;)i(d=Math.min(c.start,d+5e3),u);u=s}c.start=c.pos}for(;d<c.pos;){var h=Math.min(c.pos,d+5e3);i(h,u),d=h}}function Tt(e,t,o){for(var n,i,l=e.doc,a=o?-1:t-(e.doc.mode.innerMode?1e3:100),r=t;r>a;--r){if(r<=l.first)return l.first;var s=ot(l,r-1),d=s.stateAfter;if(d&&(!o||r+(d instanceof wt?d.lookAhead:0)<=l.modeFrontier))return r;var u=W(s.text,null,e.options.tabSize);(null==i||n>u)&&(i=r-1,n=u)}return i}function Ot(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var o=e.first,n=t-1;n>o;n--){var i=ot(e,n).stateAfter;if(i&&(!(i instanceof wt)||n+i.lookAhead<t)){o=n+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,o)}}var It=!1,Ft=!1;function Lt(){It=!0}function Pt(){Ft=!0}function Mt(e,t,o){this.marker=e,this.from=t,this.to=o}function At(e,t){if(e)for(var o=0;o<e.length;++o){var n=e[o];if(n.marker==t)return n}}function Rt(e,t){for(var o,n=0;n<e.length;++n)e[n]!=t&&(o||(o=[])).push(e[n]);return o}function zt(e,t,o){var n=o&&window.WeakSet&&(o.markedSpans||(o.markedSpans=new WeakSet));n&&e.markedSpans&&n.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],n&&n.add(e.markedSpans)),t.marker.attachLine(e)}function Ut(e,t,o){var n;if(e)for(var i=0;i<e.length;++i){var l=e[i],a=l.marker;if(null==l.from||(a.inclusiveLeft?l.from<=t:l.from<t)||l.from==t&&"bookmark"==a.type&&(!o||!l.marker.insertLeft)){var r=null==l.to||(a.inclusiveRight?l.to>=t:l.to>t);(n||(n=[])).push(new Mt(a,l.from,r?null:l.to))}}return n}function Wt(e,t,o){var n;if(e)for(var i=0;i<e.length;++i){var l=e[i],a=l.marker;if(null==l.to||(a.inclusiveRight?l.to>=t:l.to>t)||l.from==t&&"bookmark"==a.type&&(!o||l.marker.insertLeft)){var r=null==l.from||(a.inclusiveLeft?l.from<=t:l.from<t);(n||(n=[])).push(new Mt(a,r?null:l.from-t,null==l.to?null:l.to-t))}}return n}function jt(e,t){if(t.full)return null;var o=st(e,t.from.line)&&ot(e,t.from.line).markedSpans,n=st(e,t.to.line)&&ot(e,t.to.line).markedSpans;if(!o&&!n)return null;var i=t.from.ch,l=t.to.ch,a=0==ct(t.from,t.to),r=Ut(o,i,a),s=Wt(n,l,a),d=1==t.text.length,u=ee(t.text).length+(d?i:0);if(r)for(var c=0;c<r.length;++c){var p=r[c];if(null==p.to){var m=At(s,p.marker);m?d&&(p.to=null==m.to?null:m.to+u):p.to=i}}if(s)for(var h=0;h<s.length;++h){var f=s[h];null!=f.to&&(f.to+=u),null==f.from?At(r,f.marker)||(f.from=u,d&&(r||(r=[])).push(f)):(f.from+=u,d&&(r||(r=[])).push(f))}r&&(r=Ht(r)),s&&s!=r&&(s=Ht(s));var v=[r];if(!d){var g,y=t.text.length-2;if(y>0&&r)for(var b=0;b<r.length;++b)null==r[b].to&&(g||(g=[])).push(new Mt(r[b].marker,null,null));for(var w=0;w<y;++w)v.push(g);v.push(s)}return v}function Ht(e){for(var t=0;t<e.length;++t){var o=e[t];null!=o.from&&o.from==o.to&&!1!==o.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Gt(e,t,o){var n=null;if(e.iter(t.line,o.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var o=e.markedSpans[t].marker;!o.readOnly||n&&-1!=H(n,o)||(n||(n=[])).push(o)}})),!n)return null;for(var i=[{from:t,to:o}],l=0;l<n.length;++l)for(var a=n[l],r=a.find(0),s=0;s<i.length;++s){var d=i[s];if(!(ct(d.to,r.from)<0||ct(d.from,r.to)>0)){var u=[s,1],c=ct(d.from,r.from),p=ct(d.to,r.to);(c<0||!a.inclusiveLeft&&!c)&&u.push({from:d.from,to:r.from}),(p>0||!a.inclusiveRight&&!p)&&u.push({from:r.to,to:d.to}),i.splice.apply(i,u),s+=u.length-3}}return i}function Kt(e){var t=e.markedSpans;if(t){for(var o=0;o<t.length;++o)t[o].marker.detachLine(e);e.markedSpans=null}}function qt(e,t){if(t){for(var o=0;o<t.length;++o)t[o].marker.attachLine(e);e.markedSpans=t}}function Yt(e){return e.inclusiveLeft?-1:0}function Xt(e){return e.inclusiveRight?1:0}function Jt(e,t){var o=e.lines.length-t.lines.length;if(0!=o)return o;var n=e.find(),i=t.find(),l=ct(n.from,i.from)||Yt(e)-Yt(t);if(l)return-l;var a=ct(n.to,i.to)||Xt(e)-Xt(t);return a||t.id-e.id}function Qt(e,t){var o,n=Ft&&e.markedSpans;if(n)for(var i=void 0,l=0;l<n.length;++l)(i=n[l]).marker.collapsed&&null==(t?i.from:i.to)&&(!o||Jt(o,i.marker)<0)&&(o=i.marker);return o}function Zt(e){return Qt(e,!0)}function eo(e){return Qt(e,!1)}function to(e,t){var o,n=Ft&&e.markedSpans;if(n)for(var i=0;i<n.length;++i){var l=n[i];l.marker.collapsed&&(null==l.from||l.from<t)&&(null==l.to||l.to>t)&&(!o||Jt(o,l.marker)<0)&&(o=l.marker)}return o}function oo(e,t,o,n,i){var l=ot(e,t),a=Ft&&l.markedSpans;if(a)for(var r=0;r<a.length;++r){var s=a[r];if(s.marker.collapsed){var d=s.marker.find(0),u=ct(d.from,o)||Yt(s.marker)-Yt(i),c=ct(d.to,n)||Xt(s.marker)-Xt(i);if(!(u>=0&&c<=0||u<=0&&c>=0)&&(u<=0&&(s.marker.inclusiveRight&&i.inclusiveLeft?ct(d.to,o)>=0:ct(d.to,o)>0)||u>=0&&(s.marker.inclusiveRight&&i.inclusiveLeft?ct(d.from,n)<=0:ct(d.from,n)<0)))return!0}}}function no(e){for(var t;t=Zt(e);)e=t.find(-1,!0).line;return e}function io(e){for(var t;t=eo(e);)e=t.find(1,!0).line;return e}function lo(e){for(var t,o;t=eo(e);)e=t.find(1,!0).line,(o||(o=[])).push(e);return o}function ao(e,t){var o=ot(e,t),n=no(o);return o==n?t:at(n)}function ro(e,t){if(t>e.lastLine())return t;var o,n=ot(e,t);if(!so(e,n))return t;for(;o=eo(n);)n=o.find(1,!0).line;return at(n)+1}function so(e,t){var o=Ft&&t.markedSpans;if(o)for(var n=void 0,i=0;i<o.length;++i)if((n=o[i]).marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&uo(e,t,n))return!0}}function uo(e,t,o){if(null==o.to){var n=o.marker.find(1,!0);return uo(e,n.line,At(n.line.markedSpans,o.marker))}if(o.marker.inclusiveRight&&o.to==t.text.length)return!0;for(var i=void 0,l=0;l<t.markedSpans.length;++l)if((i=t.markedSpans[l]).marker.collapsed&&!i.marker.widgetNode&&i.from==o.to&&(null==i.to||i.to!=o.from)&&(i.marker.inclusiveLeft||o.marker.inclusiveRight)&&uo(e,t,i))return!0}function co(e){for(var t=0,o=(e=no(e)).parent,n=0;n<o.lines.length;++n){var i=o.lines[n];if(i==e)break;t+=i.height}for(var l=o.parent;l;l=(o=l).parent)for(var a=0;a<l.children.length;++a){var r=l.children[a];if(r==o)break;t+=r.height}return t}function po(e){if(0==e.height)return 0;for(var t,o=e.text.length,n=e;t=Zt(n);){var i=t.find(0,!0);n=i.from.line,o+=i.from.ch-i.to.ch}for(n=e;t=eo(n);){var l=t.find(0,!0);o-=n.text.length-l.from.ch,o+=(n=l.to.line).text.length-l.to.ch}return o}function mo(e){var t=e.display,o=e.doc;t.maxLine=ot(o,o.first),t.maxLineLength=po(t.maxLine),t.maxLineChanged=!0,o.iter((function(e){var o=po(e);o>t.maxLineLength&&(t.maxLineLength=o,t.maxLine=e)}))}var ho=function(e,t,o){this.text=e,qt(this,t),this.height=o?o(this):1};function fo(e,t,o,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Kt(e),qt(e,o);var i=n?n(e):1;i!=e.height&&lt(e,i)}function vo(e){e.parent=null,Kt(e)}ho.prototype.lineNo=function(){return at(this)},Ve(ho);var go={},yo={};function bo(e,t){if(!e||/^\s*$/.test(e))return null;var o=t.addModeClass?yo:go;return o[e]||(o[e]=e.replace(/\S+/g,"cm-$&"))}function wo(e,t){var o=B("span",null,null,s?"padding-right: .1px":null),n={pre:B("pre",[o],"CodeMirror-line"),content:o,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var l=i?t.rest[i-1]:t.line,a=void 0;n.pos=0,n.addToken=_o,Pe(e.display.measure)&&(a=ge(l,e.doc.direction))&&(n.addToken=xo(n.addToken,a)),n.map=[],Vo(l,n,Ct(e,l,t!=e.display.externalMeasured&&at(l))),l.styleClasses&&(l.styleClasses.bgClass&&(n.bgClass=F(l.styleClasses.bgClass,n.bgClass||"")),l.styleClasses.textClass&&(n.textClass=F(l.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(Le(e.display.measure))),0==i?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(s){var r=n.content.lastChild;(/\bcm-tab\b/.test(r.className)||r.querySelector&&r.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack")}return _e(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=F(n.pre.className,n.textClass||"")),n}function ko(e){var t=D("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function _o(e,t,o,n,i,l,s){if(t){var d,u=e.splitSpaces?Co(t,e.trailingSpace):t,c=e.cm.state.specialChars,p=!1;if(c.test(t)){d=document.createDocumentFragment();for(var m=0;;){c.lastIndex=m;var h=c.exec(t),f=h?h.index-m:t.length-m;if(f){var v=document.createTextNode(u.slice(m,m+f));a&&r<9?d.appendChild(D("span",[v])):d.appendChild(v),e.map.push(e.pos,e.pos+f,v),e.col+=f,e.pos+=f}if(!h)break;m+=f+1;var g=void 0;if("\t"==h[0]){var y=e.cm.options.tabSize,b=y-e.col%y;(g=d.appendChild(D("span",Z(b),"cm-tab"))).setAttribute("role","presentation"),g.setAttribute("cm-text","\t"),e.col+=b}else"\r"==h[0]||"\n"==h[0]?((g=d.appendChild(D("span","\r"==h[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",h[0]),e.col+=1):((g=e.cm.options.specialCharPlaceholder(h[0])).setAttribute("cm-text",h[0]),a&&r<9?d.appendChild(D("span",[g])):d.appendChild(g),e.col+=1);e.map.push(e.pos,e.pos+1,g),e.pos++}}else e.col+=t.length,d=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,d),a&&r<9&&(p=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),o||n||i||p||l||s){var w=o||"";n&&(w+=n),i&&(w+=i);var k=D("span",[d],w,l);if(s)for(var _ in s)s.hasOwnProperty(_)&&"style"!=_&&"class"!=_&&k.setAttribute(_,s[_]);return e.content.appendChild(k)}e.content.appendChild(d)}}function Co(e,t){if(e.length>1&&!/  /.test(e))return e;for(var o=t,n="",i=0;i<e.length;i++){var l=e.charAt(i);" "!=l||!o||i!=e.length-1&&32!=e.charCodeAt(i+1)||(l=" "),n+=l,o=" "==l}return n}function xo(e,t){return function(o,n,i,l,a,r,s){i=i?i+" cm-force-border":"cm-force-border";for(var d=o.pos,u=d+n.length;;){for(var c=void 0,p=0;p<t.length&&!((c=t[p]).to>d&&c.from<=d);p++);if(c.to>=u)return e(o,n,i,l,a,r,s);e(o,n.slice(0,c.to-d),i,l,null,r,s),l=null,n=n.slice(c.to-d),d=c.to}}}function So(e,t,o,n){var i=!n&&o.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!n&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",o.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function Vo(e,t,o){var n=e.markedSpans,i=e.text,l=0;if(n)for(var a,r,s,d,u,c,p,m=i.length,h=0,f=1,v="",g=0;;){if(g==h){s=d=u=r="",p=null,c=null,g=1/0;for(var y=[],b=void 0,w=0;w<n.length;++w){var k=n[w],_=k.marker;if("bookmark"==_.type&&k.from==h&&_.widgetNode)y.push(_);else if(k.from<=h&&(null==k.to||k.to>h||_.collapsed&&k.to==h&&k.from==h)){if(null!=k.to&&k.to!=h&&g>k.to&&(g=k.to,d=""),_.className&&(s+=" "+_.className),_.css&&(r=(r?r+";":"")+_.css),_.startStyle&&k.from==h&&(u+=" "+_.startStyle),_.endStyle&&k.to==g&&(b||(b=[])).push(_.endStyle,k.to),_.title&&((p||(p={})).title=_.title),_.attributes)for(var C in _.attributes)(p||(p={}))[C]=_.attributes[C];_.collapsed&&(!c||Jt(c.marker,_)<0)&&(c=k)}else k.from>h&&g>k.from&&(g=k.from)}if(b)for(var x=0;x<b.length;x+=2)b[x+1]==g&&(d+=" "+b[x]);if(!c||c.from==h)for(var S=0;S<y.length;++S)So(t,0,y[S]);if(c&&(c.from||0)==h){if(So(t,(null==c.to?m+1:c.to)-h,c.marker,null==c.from),null==c.to)return;c.to==h&&(c=!1)}}if(h>=m)break;for(var V=Math.min(m,g);;){if(v){var N=h+v.length;if(!c){var E=N>V?v.slice(0,V-h):v;t.addToken(t,E,a?a+s:s,u,h+E.length==g?d:"",r,p)}if(N>=V){v=v.slice(V-h),h=V;break}h=N,u=""}v=i.slice(l,l=o[f++]),a=bo(o[f++],t.cm.options)}}else for(var $=1;$<o.length;$+=2)t.addToken(t,i.slice(l,l=o[$]),bo(o[$+1],t.cm.options))}function No(e,t,o){this.line=t,this.rest=lo(t),this.size=this.rest?at(ee(this.rest))-o+1:1,this.node=this.text=null,this.hidden=so(e,t)}function Eo(e,t,o){for(var n,i=[],l=t;l<o;l=n){var a=new No(e.doc,ot(e.doc,l),l);n=l+a.size,i.push(a)}return i}var $o=null;function Do(e){$o?$o.ops.push(e):e.ownsGroup=$o={ops:[e],delayedCallbacks:[]}}function Bo(e){var t=e.delayedCallbacks,o=0;do{for(;o<t.length;o++)t[o].call(null);for(var n=0;n<e.ops.length;n++){var i=e.ops[n];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(o<t.length)}function To(e,t){var o=e.ownsGroup;if(o)try{Bo(o)}finally{$o=null,t(o)}}var Oo=null;function Io(e,t){var o=we(e,t);if(o.length){var n,i=Array.prototype.slice.call(arguments,2);$o?n=$o.delayedCallbacks:Oo?n=Oo:(n=Oo=[],setTimeout(Fo,0));for(var l=function(e){n.push((function(){return o[e].apply(null,i)}))},a=0;a<o.length;++a)l(a)}}function Fo(){var e=Oo;Oo=null;for(var t=0;t<e.length;++t)e[t]()}function Lo(e,t,o,n){for(var i=0;i<t.changes.length;i++){var l=t.changes[i];"text"==l?Ro(e,t):"gutter"==l?Uo(e,t,o,n):"class"==l?zo(e,t):"widget"==l&&Wo(e,t,n)}t.changes=null}function Po(e){return e.node==e.text&&(e.node=D("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),a&&r<8&&(e.node.style.zIndex=2)),e.node}function Mo(e,t){var o=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(o&&(o+=" CodeMirror-linebackground"),t.background)o?t.background.className=o:(t.background.parentNode.removeChild(t.background),t.background=null);else if(o){var n=Po(t);t.background=n.insertBefore(D("div",null,o),n.firstChild),e.display.input.setUneditable(t.background)}}function Ao(e,t){var o=e.display.externalMeasured;return o&&o.line==t.line?(e.display.externalMeasured=null,t.measure=o.measure,o.built):wo(e,t)}function Ro(e,t){var o=t.text.className,n=Ao(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,zo(e,t)):o&&(t.text.className=o)}function zo(e,t){Mo(e,t),t.line.wrapClass?Po(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var o=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=o||""}function Uo(e,t,o,n){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=Po(t);t.gutterBackground=D("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var l=t.line.gutterMarkers;if(e.options.lineNumbers||l){var a=Po(t),r=t.gutter=D("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");if(r.setAttribute("aria-hidden","true"),e.display.input.setUneditable(r),a.insertBefore(r,t.text),t.line.gutterClass&&(r.className+=" "+t.line.gutterClass),!e.options.lineNumbers||l&&l["CodeMirror-linenumbers"]||(t.lineNumber=r.appendChild(D("div",dt(e.options,o),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),l)for(var s=0;s<e.display.gutterSpecs.length;++s){var d=e.display.gutterSpecs[s].className,u=l.hasOwnProperty(d)&&l[d];u&&r.appendChild(D("div",[u],"CodeMirror-gutter-elt","left: "+n.gutterLeft[d]+"px; width: "+n.gutterWidth[d]+"px"))}}}function Wo(e,t,o){t.alignable&&(t.alignable=null);for(var n=S("CodeMirror-linewidget"),i=t.node.firstChild,l=void 0;i;i=l)l=i.nextSibling,n.test(i.className)&&t.node.removeChild(i);Ho(e,t,o)}function jo(e,t,o,n){var i=Ao(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),zo(e,t),Uo(e,t,o,n),Ho(e,t,n),t.node}function Ho(e,t,o){if(Go(e,t.line,t,o,!0),t.rest)for(var n=0;n<t.rest.length;n++)Go(e,t.rest[n],t,o,!1)}function Go(e,t,o,n,i){if(t.widgets)for(var l=Po(o),a=0,r=t.widgets;a<r.length;++a){var s=r[a],d=D("div",[s.node],"CodeMirror-linewidget"+(s.className?" "+s.className:""));s.handleMouseEvents||d.setAttribute("cm-ignore-events","true"),Ko(s,d,o,n),e.display.input.setUneditable(d),i&&s.above?l.insertBefore(d,o.gutter||o.text):l.appendChild(d),Io(s,"redraw")}}function Ko(e,t,o,n){if(e.noHScroll){(o.alignable||(o.alignable=[])).push(t);var i=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(i-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function qo(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!T(document.body,e.node)){var o="position: relative;";e.coverGutter&&(o+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(o+="width: "+t.display.wrapper.clientWidth+"px;"),$(t.display.measure,D("div",[e.node],null,o))}return e.height=e.node.parentNode.offsetHeight}function Yo(e,t){for(var o=Be(t);o!=e.wrapper;o=o.parentNode)if(!o||1==o.nodeType&&"true"==o.getAttribute("cm-ignore-events")||o.parentNode==e.sizer&&o!=e.mover)return!0}function Xo(e){return e.lineSpace.offsetTop}function Jo(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Qo(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=$(e.measure,D("pre","x","CodeMirror-line-like")),o=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(o.paddingLeft),right:parseInt(o.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(e.cachedPaddingH=n),n}function Zo(e){return G-e.display.nativeBarWidth}function en(e){return e.display.scroller.clientWidth-Zo(e)-e.display.barWidth}function tn(e){return e.display.scroller.clientHeight-Zo(e)-e.display.barHeight}function on(e,t,o){var n=e.options.lineWrapping,i=n&&en(e);if(!t.measure.heights||n&&t.measure.width!=i){var l=t.measure.heights=[];if(n){t.measure.width=i;for(var a=t.text.firstChild.getClientRects(),r=0;r<a.length-1;r++){var s=a[r],d=a[r+1];Math.abs(s.bottom-d.bottom)>2&&l.push((s.bottom+d.top)/2-o.top)}}l.push(o.bottom-o.top)}}function nn(e,t,o){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var i=0;i<e.rest.length;i++)if(at(e.rest[i])>o)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}}function ln(e,t){var o=at(t=no(t)),n=e.display.externalMeasured=new No(e.doc,t,o);n.lineN=o;var i=n.built=wo(e,n);return n.text=i.pre,$(e.display.lineMeasure,i.pre),n}function an(e,t,o,n){return dn(e,sn(e,t),o,n)}function rn(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Un(e,t)];var o=e.display.externalMeasured;return o&&t>=o.lineN&&t<o.lineN+o.size?o:void 0}function sn(e,t){var o=at(t),n=rn(e,o);n&&!n.text?n=null:n&&n.changes&&(Lo(e,n,o,Pn(e)),e.curOp.forceUpdate=!0),n||(n=ln(e,t));var i=nn(n,t,o);return{line:t,view:n,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function dn(e,t,o,n,i){t.before&&(o=-1);var l,a=o+(n||"");return t.cache.hasOwnProperty(a)?l=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(on(e,t.view,t.rect),t.hasHeights=!0),(l=hn(e,t,o,n)).bogus||(t.cache[a]=l)),{left:l.left,right:l.right,top:i?l.rtop:l.top,bottom:i?l.rbottom:l.bottom}}var un,cn={left:0,right:0,top:0,bottom:0};function pn(e,t,o){for(var n,i,l,a,r,s,d=0;d<e.length;d+=3)if(r=e[d],s=e[d+1],t<r?(i=0,l=1,a="left"):t<s?l=1+(i=t-r):(d==e.length-3||t==s&&e[d+3]>t)&&(i=(l=s-r)-1,t>=s&&(a="right")),null!=i){if(n=e[d+2],r==s&&o==(n.insertLeft?"left":"right")&&(a=o),"left"==o&&0==i)for(;d&&e[d-2]==e[d-3]&&e[d-1].insertLeft;)n=e[2+(d-=3)],a="left";if("right"==o&&i==s-r)for(;d<e.length-3&&e[d+3]==e[d+4]&&!e[d+5].insertLeft;)n=e[(d+=3)+2],a="right";break}return{node:n,start:i,end:l,collapse:a,coverStart:r,coverEnd:s}}function mn(e,t){var o=cn;if("left"==t)for(var n=0;n<e.length&&(o=e[n]).left==o.right;n++);else for(var i=e.length-1;i>=0&&(o=e[i]).left==o.right;i--);return o}function hn(e,t,o,n){var i,l=pn(t.map,o,n),s=l.node,d=l.start,u=l.end,c=l.collapse;if(3==s.nodeType){for(var p=0;p<4;p++){for(;d&&ue(t.line.text.charAt(l.coverStart+d));)--d;for(;l.coverStart+u<l.coverEnd&&ue(t.line.text.charAt(l.coverStart+u));)++u;if((i=a&&r<9&&0==d&&u==l.coverEnd-l.coverStart?s.parentNode.getBoundingClientRect():mn(V(s,d,u).getClientRects(),n)).left||i.right||0==d)break;u=d,d-=1,c="right"}a&&r<11&&(i=fn(e.display.measure,i))}else{var m;d>0&&(c=n="right"),i=e.options.lineWrapping&&(m=s.getClientRects()).length>1?m["right"==n?m.length-1:0]:s.getBoundingClientRect()}if(a&&r<9&&!d&&(!i||!i.left&&!i.right)){var h=s.parentNode.getClientRects()[0];i=h?{left:h.left,right:h.left+Ln(e.display),top:h.top,bottom:h.bottom}:cn}for(var f=i.top-t.rect.top,v=i.bottom-t.rect.top,g=(f+v)/2,y=t.view.measure.heights,b=0;b<y.length-1&&!(g<y[b]);b++);var w=b?y[b-1]:0,k=y[b],_={left:("right"==c?i.right:i.left)-t.rect.left,right:("left"==c?i.left:i.right)-t.rect.left,top:w,bottom:k};return i.left||i.right||(_.bogus=!0),e.options.singleCursorHeightPerLine||(_.rtop=f,_.rbottom=v),_}function fn(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!We(e))return t;var o=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*o,right:t.right*o,top:t.top*n,bottom:t.bottom*n}}function vn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function gn(e){e.display.externalMeasure=null,E(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)vn(e.display.view[t])}function yn(e){gn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function bn(e){return u&&g?-(e.body.getBoundingClientRect().left-parseInt(getComputedStyle(e.body).marginLeft)):e.defaultView.pageXOffset||(e.documentElement||e.body).scrollLeft}function wn(e){return u&&g?-(e.body.getBoundingClientRect().top-parseInt(getComputedStyle(e.body).marginTop)):e.defaultView.pageYOffset||(e.documentElement||e.body).scrollTop}function kn(e){var t=no(e).widgets,o=0;if(t)for(var n=0;n<t.length;++n)t[n].above&&(o+=qo(t[n]));return o}function _n(e,t,o,n,i){if(!i){var l=kn(t);o.top+=l,o.bottom+=l}if("line"==n)return o;n||(n="local");var a=co(t);if("local"==n?a+=Xo(e.display):a-=e.display.viewOffset,"page"==n||"window"==n){var r=e.display.lineSpace.getBoundingClientRect();a+=r.top+("window"==n?0:wn(P(e)));var s=r.left+("window"==n?0:bn(P(e)));o.left+=s,o.right+=s}return o.top+=a,o.bottom+=a,o}function Cn(e,t,o){if("div"==o)return t;var n=t.left,i=t.top;if("page"==o)n-=bn(P(e)),i-=wn(P(e));else if("local"==o||!o){var l=e.display.sizer.getBoundingClientRect();n+=l.left,i+=l.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:n-a.left,top:i-a.top}}function xn(e,t,o,n,i){return n||(n=ot(e.doc,t.line)),_n(e,n,an(e,n,t.ch,i),o)}function Sn(e,t,o,n,i,l){function a(t,a){var r=dn(e,i,t,a?"right":"left",l);return a?r.left=r.right:r.right=r.left,_n(e,n,r,o)}n=n||ot(e.doc,t.line),i||(i=sn(e,n));var r=ge(n,e.doc.direction),s=t.ch,d=t.sticky;if(s>=n.text.length?(s=n.text.length,d="before"):s<=0&&(s=0,d="after"),!r)return a("before"==d?s-1:s,"before"==d);function u(e,t,o){return a(o?e-1:e,1==r[t].level!=o)}var c=fe(r,s,d),p=he,m=u(s,c,"before"==d);return null!=p&&(m.other=u(s,p,"before"!=d)),m}function Vn(e,t){var o=0;t=gt(e.doc,t),e.options.lineWrapping||(o=Ln(e.display)*t.ch);var n=ot(e.doc,t.line),i=co(n)+Xo(e.display);return{left:o,right:o,top:i,bottom:i+n.height}}function Nn(e,t,o,n,i){var l=ut(e,t,o);return l.xRel=i,n&&(l.outside=n),l}function En(e,t,o){var n=e.doc;if((o+=e.display.viewOffset)<0)return Nn(n.first,0,null,-1,-1);var i=rt(n,o),l=n.first+n.size-1;if(i>l)return Nn(n.first+n.size-1,ot(n,l).text.length,null,1,1);t<0&&(t=0);for(var a=ot(n,i);;){var r=Tn(e,a,i,t,o),s=to(a,r.ch+(r.xRel>0||r.outside>0?1:0));if(!s)return r;var d=s.find(1);if(d.line==i)return d;a=ot(n,i=d.line)}}function $n(e,t,o,n){n-=kn(t);var i=t.text.length,l=pe((function(t){return dn(e,o,t-1).bottom<=n}),i,0);return{begin:l,end:i=pe((function(t){return dn(e,o,t).top>n}),l,i)}}function Dn(e,t,o,n){return o||(o=sn(e,t)),$n(e,t,o,_n(e,t,dn(e,o,n),"line").top)}function Bn(e,t,o,n){return!(e.bottom<=o)&&(e.top>o||(n?e.left:e.right)>t)}function Tn(e,t,o,n,i){i-=co(t);var l=sn(e,t),a=kn(t),r=0,s=t.text.length,d=!0,u=ge(t,e.doc.direction);if(u){var c=(e.options.lineWrapping?In:On)(e,t,o,l,u,n,i);r=(d=1!=c.level)?c.from:c.to-1,s=d?c.to:c.from-1}var p,m,h=null,f=null,v=pe((function(t){var o=dn(e,l,t);return o.top+=a,o.bottom+=a,!!Bn(o,n,i,!1)&&(o.top<=i&&o.left<=n&&(h=t,f=o),!0)}),r,s),g=!1;if(f){var y=n-f.left<f.right-n,b=y==d;v=h+(b?0:1),m=b?"after":"before",p=y?f.left:f.right}else{d||v!=s&&v!=r||v++,m=0==v?"after":v==t.text.length?"before":dn(e,l,v-(d?1:0)).bottom+a<=i==d?"after":"before";var w=Sn(e,ut(o,v,m),"line",t,l);p=w.left,g=i<w.top?-1:i>=w.bottom?1:0}return Nn(o,v=ce(t.text,v,1),m,g,n-p)}function On(e,t,o,n,i,l,a){var r=pe((function(r){var s=i[r],d=1!=s.level;return Bn(Sn(e,ut(o,d?s.to:s.from,d?"before":"after"),"line",t,n),l,a,!0)}),0,i.length-1),s=i[r];if(r>0){var d=1!=s.level,u=Sn(e,ut(o,d?s.from:s.to,d?"after":"before"),"line",t,n);Bn(u,l,a,!0)&&u.top>a&&(s=i[r-1])}return s}function In(e,t,o,n,i,l,a){var r=$n(e,t,n,a),s=r.begin,d=r.end;/\s/.test(t.text.charAt(d-1))&&d--;for(var u=null,c=null,p=0;p<i.length;p++){var m=i[p];if(!(m.from>=d||m.to<=s)){var h=dn(e,n,1!=m.level?Math.min(d,m.to)-1:Math.max(s,m.from)).right,f=h<l?l-h+1e9:h-l;(!u||c>f)&&(u=m,c=f)}}return u||(u=i[i.length-1]),u.from<s&&(u={from:s,to:u.to,level:u.level}),u.to>d&&(u={from:u.from,to:d,level:u.level}),u}function Fn(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==un){un=D("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)un.appendChild(document.createTextNode("x")),un.appendChild(D("br"));un.appendChild(document.createTextNode("x"))}$(e.measure,un);var o=un.offsetHeight/50;return o>3&&(e.cachedTextHeight=o),E(e.measure),o||1}function Ln(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=D("span","xxxxxxxxxx"),o=D("pre",[t],"CodeMirror-line-like");$(e.measure,o);var n=t.getBoundingClientRect(),i=(n.right-n.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function Pn(e){for(var t=e.display,o={},n={},i=t.gutters.clientLeft,l=t.gutters.firstChild,a=0;l;l=l.nextSibling,++a){var r=e.display.gutterSpecs[a].className;o[r]=l.offsetLeft+l.clientLeft+i,n[r]=l.clientWidth}return{fixedPos:Mn(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:o,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function Mn(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function An(e){var t=Fn(e.display),o=e.options.lineWrapping,n=o&&Math.max(5,e.display.scroller.clientWidth/Ln(e.display)-3);return function(i){if(so(e.doc,i))return 0;var l=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(l+=i.widgets[a].height);return o?l+(Math.ceil(i.text.length/n)||1)*t:l+t}}function Rn(e){var t=e.doc,o=An(e);t.iter((function(e){var t=o(e);t!=e.height&&lt(e,t)}))}function zn(e,t,o,n){var i=e.display;if(!o&&"true"==Be(t).getAttribute("cm-not-content"))return null;var l,a,r=i.lineSpace.getBoundingClientRect();try{l=t.clientX-r.left,a=t.clientY-r.top}catch(c){return null}var s,d=En(e,l,a);if(n&&d.xRel>0&&(s=ot(e.doc,d.line).text).length==d.ch){var u=W(s,s.length,e.options.tabSize)-s.length;d=ut(d.line,Math.max(0,Math.round((l-Qo(e.display).left)/Ln(e.display))-u))}return d}function Un(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var o=e.display.view,n=0;n<o.length;n++)if((t-=o[n].size)<0)return n}function Wn(e,t,o,n){null==t&&(t=e.doc.first),null==o&&(o=e.doc.first+e.doc.size),n||(n=0);var i=e.display;if(n&&o<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Ft&&ao(e.doc,t)<i.viewTo&&Hn(e);else if(o<=i.viewFrom)Ft&&ro(e.doc,o+n)>i.viewFrom?Hn(e):(i.viewFrom+=n,i.viewTo+=n);else if(t<=i.viewFrom&&o>=i.viewTo)Hn(e);else if(t<=i.viewFrom){var l=Gn(e,o,o+n,1);l?(i.view=i.view.slice(l.index),i.viewFrom=l.lineN,i.viewTo+=n):Hn(e)}else if(o>=i.viewTo){var a=Gn(e,t,t,-1);a?(i.view=i.view.slice(0,a.index),i.viewTo=a.lineN):Hn(e)}else{var r=Gn(e,t,t,-1),s=Gn(e,o,o+n,1);r&&s?(i.view=i.view.slice(0,r.index).concat(Eo(e,r.lineN,s.lineN)).concat(i.view.slice(s.index)),i.viewTo+=n):Hn(e)}var d=i.externalMeasured;d&&(o<d.lineN?d.lineN+=n:t<d.lineN+d.size&&(i.externalMeasured=null))}function jn(e,t,o){e.curOp.viewChanged=!0;var n=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var l=n.view[Un(e,t)];if(null!=l.node){var a=l.changes||(l.changes=[]);-1==H(a,o)&&a.push(o)}}}function Hn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Gn(e,t,o,n){var i,l=Un(e,t),a=e.display.view;if(!Ft||o==e.doc.first+e.doc.size)return{index:l,lineN:o};for(var r=e.display.viewFrom,s=0;s<l;s++)r+=a[s].size;if(r!=t){if(n>0){if(l==a.length-1)return null;i=r+a[l].size-t,l++}else i=r-t;t+=i,o+=i}for(;ao(e.doc,o)!=o;){if(l==(n<0?0:a.length-1))return null;o+=n*a[l-(n<0?1:0)].size,l+=n}return{index:l,lineN:o}}function Kn(e,t,o){var n=e.display;0==n.view.length||t>=n.viewTo||o<=n.viewFrom?(n.view=Eo(e,t,o),n.viewFrom=t):(n.viewFrom>t?n.view=Eo(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(Un(e,t))),n.viewFrom=t,n.viewTo<o?n.view=n.view.concat(Eo(e,n.viewTo,o)):n.viewTo>o&&(n.view=n.view.slice(0,Un(e,o)))),n.viewTo=o}function qn(e){for(var t=e.display.view,o=0,n=0;n<t.length;n++){var i=t[n];i.hidden||i.node&&!i.changes||++o}return o}function Yn(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Xn(e,t){void 0===t&&(t=!0);var o=e.doc,n={},i=n.cursors=document.createDocumentFragment(),l=n.selection=document.createDocumentFragment(),a=e.options.$customCursor;a&&(t=!0);for(var r=0;r<o.sel.ranges.length;r++)if(t||r!=o.sel.primIndex){var s=o.sel.ranges[r];if(!(s.from().line>=e.display.viewTo||s.to().line<e.display.viewFrom)){var d=s.empty();if(a){var u=a(e,s);u&&Jn(e,u,i)}else(d||e.options.showCursorWhenSelecting)&&Jn(e,s.head,i);d||Zn(e,s,l)}}return n}function Jn(e,t,o){var n=Sn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=o.appendChild(D("div"," ","CodeMirror-cursor"));if(i.style.left=n.left+"px",i.style.top=n.top+"px",i.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var l=xn(e,t,"div",null,null),a=l.right-l.left;i.style.width=(a>0?a:e.defaultCharWidth())+"px"}if(n.other){var r=o.appendChild(D("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));r.style.display="",r.style.left=n.other.left+"px",r.style.top=n.other.top+"px",r.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function Qn(e,t){return e.top-t.top||e.left-t.left}function Zn(e,t,o){var n=e.display,i=e.doc,l=document.createDocumentFragment(),a=Qo(e.display),r=a.left,s=Math.max(n.sizerWidth,en(e)-n.sizer.offsetLeft)-a.right,d="ltr"==i.direction;function u(e,t,o,n){t<0&&(t=0),t=Math.round(t),n=Math.round(n),l.appendChild(D("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==o?s-e:o)+"px;\n                             height: "+(n-t)+"px"))}function c(t,o,n){var l,a,c=ot(i,t),p=c.text.length;function m(o,n){return xn(e,ut(t,o),"div",c,n)}function h(t,o,n){var i=Dn(e,c,null,t),l="ltr"==o==("after"==n)?"left":"right";return m("after"==n?i.begin:i.end-(/\s/.test(c.text.charAt(i.end-1))?2:1),l)[l]}var f=ge(c,i.direction);return me(f,o||0,null==n?p:n,(function(e,t,i,c){var v="ltr"==i,g=m(e,v?"left":"right"),y=m(t-1,v?"right":"left"),b=null==o&&0==e,w=null==n&&t==p,k=0==c,_=!f||c==f.length-1;if(y.top-g.top<=3){var C=(d?w:b)&&_,x=(d?b:w)&&k?r:(v?g:y).left,S=C?s:(v?y:g).right;u(x,g.top,S-x,g.bottom)}else{var V,N,E,$;v?(V=d&&b&&k?r:g.left,N=d?s:h(e,i,"before"),E=d?r:h(t,i,"after"),$=d&&w&&_?s:y.right):(V=d?h(e,i,"before"):r,N=!d&&b&&k?s:g.right,E=!d&&w&&_?r:y.left,$=d?h(t,i,"after"):s),u(V,g.top,N-V,g.bottom),g.bottom<y.top&&u(r,g.bottom,null,y.top),u(E,y.top,$-E,y.bottom)}(!l||Qn(g,l)<0)&&(l=g),Qn(y,l)<0&&(l=y),(!a||Qn(g,a)<0)&&(a=g),Qn(y,a)<0&&(a=y)})),{start:l,end:a}}var p=t.from(),m=t.to();if(p.line==m.line)c(p.line,p.ch,m.ch);else{var h=ot(i,p.line),f=ot(i,m.line),v=no(h)==no(f),g=c(p.line,p.ch,v?h.text.length+1:null).end,y=c(m.line,v?0:null,m.ch).start;v&&(g.top<y.top-2?(u(g.right,g.top,null,g.bottom),u(r,y.top,y.left,y.bottom)):u(g.right,g.top,y.left-g.right,g.bottom)),g.bottom<y.top&&u(r,g.bottom,null,y.top)}o.appendChild(l)}function ei(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var o=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){e.hasFocus()||ii(e),t.cursorDiv.style.visibility=(o=!o)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function ti(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||ni(e))}function oi(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&ii(e))}),100)}function ni(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(_e(e,"focus",e,t),e.state.focused=!0,I(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),s&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),ei(e))}function ii(e,t){e.state.delayingBlurEvent||(e.state.focused&&(_e(e,"blur",e,t),e.state.focused=!1,N(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function li(e){for(var t=e.display,o=t.lineDiv.offsetTop,n=Math.max(0,t.scroller.getBoundingClientRect().top),i=t.lineDiv.getBoundingClientRect().top,l=0,s=0;s<t.view.length;s++){var d=t.view[s],u=e.options.lineWrapping,c=void 0,p=0;if(!d.hidden){if(i+=d.line.height,a&&r<8){var m=d.node.offsetTop+d.node.offsetHeight;c=m-o,o=m}else{var h=d.node.getBoundingClientRect();c=h.bottom-h.top,!u&&d.text.firstChild&&(p=d.text.firstChild.getBoundingClientRect().right-h.left-1)}var f=d.line.height-c;if((f>.005||f<-.005)&&(i<n&&(l-=f),lt(d.line,c),ai(d.line),d.rest))for(var v=0;v<d.rest.length;v++)ai(d.rest[v]);if(p>e.display.sizerWidth){var g=Math.ceil(p/Ln(e.display));g>e.display.maxLineLength&&(e.display.maxLineLength=g,e.display.maxLine=d.line,e.display.maxLineChanged=!0)}}}Math.abs(l)>2&&(t.scroller.scrollTop+=l)}function ai(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var o=e.widgets[t],n=o.node.parentNode;n&&(o.height=n.offsetHeight)}}function ri(e,t,o){var n=o&&null!=o.top?Math.max(0,o.top):e.scroller.scrollTop;n=Math.floor(n-Xo(e));var i=o&&null!=o.bottom?o.bottom:n+e.wrapper.clientHeight,l=rt(t,n),a=rt(t,i);if(o&&o.ensure){var r=o.ensure.from.line,s=o.ensure.to.line;r<l?(l=r,a=rt(t,co(ot(t,r))+e.wrapper.clientHeight)):Math.min(s,t.lastLine())>=a&&(l=rt(t,co(ot(t,s))-e.wrapper.clientHeight),a=s)}return{from:l,to:Math.max(a,l+1)}}function si(e,t){if(!Ce(e,"scrollCursorIntoView")){var o=e.display,n=o.sizer.getBoundingClientRect(),i=null,l=o.wrapper.ownerDocument;if(t.top+n.top<0?i=!0:t.bottom+n.top>(l.defaultView.innerHeight||l.documentElement.clientHeight)&&(i=!1),null!=i&&!f){var a=D("div","​",null,"position: absolute;\n                         top: "+(t.top-o.viewOffset-Xo(e.display))+"px;\n                         height: "+(t.bottom-t.top+Zo(e)+o.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(a),a.scrollIntoView(i),e.display.lineSpace.removeChild(a)}}}function di(e,t,o,n){var i;null==n&&(n=0),e.options.lineWrapping||t!=o||(o="before"==t.sticky?ut(t.line,t.ch+1,"before"):t,t=t.ch?ut(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t);for(var l=0;l<5;l++){var a=!1,r=Sn(e,t),s=o&&o!=t?Sn(e,o):r,d=ci(e,i={left:Math.min(r.left,s.left),top:Math.min(r.top,s.top)-n,right:Math.max(r.left,s.left),bottom:Math.max(r.bottom,s.bottom)+n}),u=e.doc.scrollTop,c=e.doc.scrollLeft;if(null!=d.scrollTop&&(yi(e,d.scrollTop),Math.abs(e.doc.scrollTop-u)>1&&(a=!0)),null!=d.scrollLeft&&(wi(e,d.scrollLeft),Math.abs(e.doc.scrollLeft-c)>1&&(a=!0)),!a)break}return i}function ui(e,t){var o=ci(e,t);null!=o.scrollTop&&yi(e,o.scrollTop),null!=o.scrollLeft&&wi(e,o.scrollLeft)}function ci(e,t){var o=e.display,n=Fn(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:o.scroller.scrollTop,l=tn(e),a={};t.bottom-t.top>l&&(t.bottom=t.top+l);var r=e.doc.height+Jo(o),s=t.top<n,d=t.bottom>r-n;if(t.top<i)a.scrollTop=s?0:t.top;else if(t.bottom>i+l){var u=Math.min(t.top,(d?r:t.bottom)-l);u!=i&&(a.scrollTop=u)}var c=e.options.fixedGutter?0:o.gutters.offsetWidth,p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:o.scroller.scrollLeft-c,m=en(e)-o.gutters.offsetWidth,h=t.right-t.left>m;return h&&(t.right=t.left+m),t.left<10?a.scrollLeft=0:t.left<p?a.scrollLeft=Math.max(0,t.left+c-(h?0:10)):t.right>m+p-3&&(a.scrollLeft=t.right+(h?0:10)-m),a}function pi(e,t){null!=t&&(vi(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function mi(e){vi(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function hi(e,t,o){null==t&&null==o||vi(e),null!=t&&(e.curOp.scrollLeft=t),null!=o&&(e.curOp.scrollTop=o)}function fi(e,t){vi(e),e.curOp.scrollToPos=t}function vi(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,gi(e,Vn(e,t.from),Vn(e,t.to),t.margin))}function gi(e,t,o,n){var i=ci(e,{left:Math.min(t.left,o.left),top:Math.min(t.top,o.top)-n,right:Math.max(t.right,o.right),bottom:Math.max(t.bottom,o.bottom)+n});hi(e,i.scrollLeft,i.scrollTop)}function yi(e,t){Math.abs(e.doc.scrollTop-t)<2||(o||Yi(e,{top:t}),bi(e,t,!0),o&&Yi(e),zi(e,100))}function bi(e,t,o){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||o)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function wi(e,t,o,n){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(o?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!n||(e.doc.scrollLeft=t,Zi(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function ki(e){var t=e.display,o=t.gutters.offsetWidth,n=Math.round(e.doc.height+Jo(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?o:0,docHeight:n,scrollHeight:n+Zo(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:o}}var _i=function(e,t,o){this.cm=o;var n=this.vert=D("div",[D("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=D("div",[D("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");n.tabIndex=i.tabIndex=-1,e(n),e(i),be(n,"scroll",(function(){n.clientHeight&&t(n.scrollTop,"vertical")})),be(i,"scroll",(function(){i.clientWidth&&t(i.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,a&&r<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};_i.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,o=e.scrollHeight>e.clientHeight+1,n=e.nativeBarWidth;if(o){this.vert.style.display="block",this.vert.style.bottom=t?n+"px":"0";var i=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=o?n+"px":"0",this.horiz.style.left=e.barLeft+"px";var l=e.viewWidth-e.barLeft-(o?n:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+l)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==n&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:o?n:0,bottom:t?n:0}},_i.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},_i.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},_i.prototype.zeroWidthHack=function(){var e=b&&!h?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new j,this.disableVert=new j},_i.prototype.enableZeroWidthBar=function(e,t,o){function n(){var i=e.getBoundingClientRect();("vert"==o?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=e?e.style.visibility="hidden":t.set(1e3,n)}e.style.visibility="",t.set(1e3,n)},_i.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Ci=function(){};function xi(e,t){t||(t=ki(e));var o=e.display.barWidth,n=e.display.barHeight;Si(e,t);for(var i=0;i<4&&o!=e.display.barWidth||n!=e.display.barHeight;i++)o!=e.display.barWidth&&e.options.lineWrapping&&li(e),Si(e,ki(e)),o=e.display.barWidth,n=e.display.barHeight}function Si(e,t){var o=e.display,n=o.scrollbars.update(t);o.sizer.style.paddingRight=(o.barWidth=n.right)+"px",o.sizer.style.paddingBottom=(o.barHeight=n.bottom)+"px",o.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(o.scrollbarFiller.style.display="block",o.scrollbarFiller.style.height=n.bottom+"px",o.scrollbarFiller.style.width=n.right+"px"):o.scrollbarFiller.style.display="",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(o.gutterFiller.style.display="block",o.gutterFiller.style.height=n.bottom+"px",o.gutterFiller.style.width=t.gutterWidth+"px"):o.gutterFiller.style.display=""}Ci.prototype.update=function(){return{bottom:0,right:0}},Ci.prototype.setScrollLeft=function(){},Ci.prototype.setScrollTop=function(){},Ci.prototype.clear=function(){};var Vi={native:_i,null:Ci};function Ni(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&N(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Vi[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),be(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){return e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,o){"horizontal"==o?wi(e,t):yi(e,t)}),e),e.display.scrollbars.addClass&&I(e.display.wrapper,e.display.scrollbars.addClass)}var Ei=0;function $i(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ei,markArrays:null},Do(e.curOp)}function Di(e){var t=e.curOp;t&&To(t,(function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;Bi(e)}))}function Bi(e){for(var t=e.ops,o=0;o<t.length;o++)Ti(t[o]);for(var n=0;n<t.length;n++)Oi(t[n]);for(var i=0;i<t.length;i++)Ii(t[i]);for(var l=0;l<t.length;l++)Fi(t[l]);for(var a=0;a<t.length;a++)Li(t[a])}function Ti(e){var t=e.cm,o=t.display;ji(t),e.updateMaxLine&&mo(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<o.viewFrom||e.scrollToPos.to.line>=o.viewTo)||o.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Wi(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Oi(e){e.updatedDisplay=e.mustUpdate&&Ki(e.cm,e.update)}function Ii(e){var t=e.cm,o=t.display;e.updatedDisplay&&li(t),e.barMeasure=ki(t),o.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=an(t,o.maxLine,o.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(o.scroller.clientWidth,o.sizer.offsetLeft+e.adjustWidthTo+Zo(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,o.sizer.offsetLeft+e.adjustWidthTo-en(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=o.input.prepareSelection())}function Fi(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&wi(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var o=e.focus&&e.focus==O(M(t));e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,o),(e.updatedDisplay||e.startHeight!=t.doc.height)&&xi(t,e.barMeasure),e.updatedDisplay&&Qi(t,e.barMeasure),e.selectionChanged&&ei(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),o&&ti(e.cm)}function Li(e){var t=e.cm,o=t.display,n=t.doc;e.updatedDisplay&&qi(t,e.update),null==o.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(o.wheelStartX=o.wheelStartY=null),null!=e.scrollTop&&bi(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&wi(t,e.scrollLeft,!0,!0),e.scrollToPos&&si(t,di(t,gt(n,e.scrollToPos.from),gt(n,e.scrollToPos.to),e.scrollToPos.margin));var i=e.maybeHiddenMarkers,l=e.maybeUnhiddenMarkers;if(i)for(var a=0;a<i.length;++a)i[a].lines.length||_e(i[a],"hide");if(l)for(var r=0;r<l.length;++r)l[r].lines.length&&_e(l[r],"unhide");o.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&_e(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Pi(e,t){if(e.curOp)return t();$i(e);try{return t()}finally{Di(e)}}function Mi(e,t){return function(){if(e.curOp)return t.apply(e,arguments);$i(e);try{return t.apply(e,arguments)}finally{Di(e)}}}function Ai(e){return function(){if(this.curOp)return e.apply(this,arguments);$i(this);try{return e.apply(this,arguments)}finally{Di(this)}}}function Ri(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);$i(t);try{return e.apply(this,arguments)}finally{Di(t)}}}function zi(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,z(Ui,e))}function Ui(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var o=+new Date+e.options.workTime,n=xt(e,t.highlightFrontier),i=[];t.iter(n.line,Math.min(t.first+t.size,e.display.viewTo+500),(function(l){if(n.line>=e.display.viewFrom){var a=l.styles,r=l.text.length>e.options.maxHighlightLength?Qe(t.mode,n.state):null,s=_t(e,l,n,!0);r&&(n.state=r),l.styles=s.styles;var d=l.styleClasses,u=s.classes;u?l.styleClasses=u:d&&(l.styleClasses=null);for(var c=!a||a.length!=l.styles.length||d!=u&&(!d||!u||d.bgClass!=u.bgClass||d.textClass!=u.textClass),p=0;!c&&p<a.length;++p)c=a[p]!=l.styles[p];c&&i.push(n.line),l.stateAfter=n.save(),n.nextLine()}else l.text.length<=e.options.maxHighlightLength&&St(e,l.text,n),l.stateAfter=n.line%5==0?n.save():null,n.nextLine();if(+new Date>o)return zi(e,e.options.workDelay),!0})),t.highlightFrontier=n.line,t.modeFrontier=Math.max(t.modeFrontier,n.line),i.length&&Pi(e,(function(){for(var t=0;t<i.length;t++)jn(e,i[t],"text")}))}}var Wi=function(e,t,o){var n=e.display;this.viewport=t,this.visible=ri(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=en(e),this.force=o,this.dims=Pn(e),this.events=[]};function ji(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Zo(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Zo(e)+"px",t.scrollbarsClipped=!0)}function Hi(e){if(e.hasFocus())return null;var t=O(M(e));if(!t||!T(e.display.lineDiv,t))return null;var o={activeElt:t};if(window.getSelection){var n=R(e).getSelection();n.anchorNode&&n.extend&&T(e.display.lineDiv,n.anchorNode)&&(o.anchorNode=n.anchorNode,o.anchorOffset=n.anchorOffset,o.focusNode=n.focusNode,o.focusOffset=n.focusOffset)}return o}function Gi(e){if(e&&e.activeElt&&e.activeElt!=O(A(e.activeElt))&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&T(document.body,e.anchorNode)&&T(document.body,e.focusNode))){var t=e.activeElt.ownerDocument,o=t.defaultView.getSelection(),n=t.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),o.removeAllRanges(),o.addRange(n),o.extend(e.focusNode,e.focusOffset)}}function Ki(e,t){var o=e.display,n=e.doc;if(t.editorIsHidden)return Hn(e),!1;if(!t.force&&t.visible.from>=o.viewFrom&&t.visible.to<=o.viewTo&&(null==o.updateLineNumbers||o.updateLineNumbers>=o.viewTo)&&o.renderedView==o.view&&0==qn(e))return!1;el(e)&&(Hn(e),t.dims=Pn(e));var i=n.first+n.size,l=Math.max(t.visible.from-e.options.viewportMargin,n.first),a=Math.min(i,t.visible.to+e.options.viewportMargin);o.viewFrom<l&&l-o.viewFrom<20&&(l=Math.max(n.first,o.viewFrom)),o.viewTo>a&&o.viewTo-a<20&&(a=Math.min(i,o.viewTo)),Ft&&(l=ao(e.doc,l),a=ro(e.doc,a));var r=l!=o.viewFrom||a!=o.viewTo||o.lastWrapHeight!=t.wrapperHeight||o.lastWrapWidth!=t.wrapperWidth;Kn(e,l,a),o.viewOffset=co(ot(e.doc,o.viewFrom)),e.display.mover.style.top=o.viewOffset+"px";var s=qn(e);if(!r&&0==s&&!t.force&&o.renderedView==o.view&&(null==o.updateLineNumbers||o.updateLineNumbers>=o.viewTo))return!1;var d=Hi(e);return s>4&&(o.lineDiv.style.display="none"),Xi(e,o.updateLineNumbers,t.dims),s>4&&(o.lineDiv.style.display=""),o.renderedView=o.view,Gi(d),E(o.cursorDiv),E(o.selectionDiv),o.gutters.style.height=o.sizer.style.minHeight=0,r&&(o.lastWrapHeight=t.wrapperHeight,o.lastWrapWidth=t.wrapperWidth,zi(e,400)),o.updateLineNumbers=null,!0}function qi(e,t){for(var o=t.viewport,n=!0;;n=!1){if(n&&e.options.lineWrapping&&t.oldDisplayWidth!=en(e))n&&(t.visible=ri(e.display,e.doc,o));else if(o&&null!=o.top&&(o={top:Math.min(e.doc.height+Jo(e.display)-tn(e),o.top)}),t.visible=ri(e.display,e.doc,o),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!Ki(e,t))break;li(e);var i=ki(e);Yn(e),xi(e,i),Qi(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Yi(e,t){var o=new Wi(e,t);if(Ki(e,o)){li(e),qi(e,o);var n=ki(e);Yn(e),xi(e,n),Qi(e,n),o.finish()}}function Xi(e,t,o){var n=e.display,i=e.options.lineNumbers,l=n.lineDiv,a=l.firstChild;function r(t){var o=t.nextSibling;return s&&b&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),o}for(var d=n.view,u=n.viewFrom,c=0;c<d.length;c++){var p=d[c];if(p.hidden);else if(p.node&&p.node.parentNode==l){for(;a!=p.node;)a=r(a);var m=i&&null!=t&&t<=u&&p.lineNumber;p.changes&&(H(p.changes,"gutter")>-1&&(m=!1),Lo(e,p,u,o)),m&&(E(p.lineNumber),p.lineNumber.appendChild(document.createTextNode(dt(e.options,u)))),a=p.node.nextSibling}else{var h=jo(e,p,u,o);l.insertBefore(h,a)}u+=p.size}for(;a;)a=r(a)}function Ji(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",Io(e,"gutterChanged",e)}function Qi(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Zo(e)+"px"}function Zi(e){var t=e.display,o=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=Mn(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,l=n+"px",a=0;a<o.length;a++)if(!o[a].hidden){e.options.fixedGutter&&(o[a].gutter&&(o[a].gutter.style.left=l),o[a].gutterBackground&&(o[a].gutterBackground.style.left=l));var r=o[a].alignable;if(r)for(var s=0;s<r.length;s++)r[s].style.left=l}e.options.fixedGutter&&(t.gutters.style.left=n+i+"px")}}function el(e){if(!e.options.lineNumbers)return!1;var t=e.doc,o=dt(e.options,t.first+t.size-1),n=e.display;if(o.length!=n.lineNumChars){var i=n.measure.appendChild(D("div",[D("div",o)],"CodeMirror-linenumber CodeMirror-gutter-elt")),l=i.firstChild.offsetWidth,a=i.offsetWidth-l;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(l,n.lineGutter.offsetWidth-a)+1,n.lineNumWidth=n.lineNumInnerWidth+a,n.lineNumChars=n.lineNumInnerWidth?o.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",Ji(e.display),!0}return!1}function tl(e,t){for(var o=[],n=!1,i=0;i<e.length;i++){var l=e[i],a=null;if("string"!=typeof l&&(a=l.style,l=l.className),"CodeMirror-linenumbers"==l){if(!t)continue;n=!0}o.push({className:l,style:a})}return t&&!n&&o.push({className:"CodeMirror-linenumbers",style:null}),o}function ol(e){var t=e.gutters,o=e.gutterSpecs;E(t),e.lineGutter=null;for(var n=0;n<o.length;++n){var i=o[n],l=i.className,a=i.style,r=t.appendChild(D("div",null,"CodeMirror-gutter "+l));a&&(r.style.cssText=a),"CodeMirror-linenumbers"==l&&(e.lineGutter=r,r.style.width=(e.lineNumWidth||1)+"px")}t.style.display=o.length?"":"none",Ji(e)}function nl(e){ol(e.display),Wn(e),Zi(e)}function il(e,t,n,i){var l=this;this.input=n,l.scrollbarFiller=D("div",null,"CodeMirror-scrollbar-filler"),l.scrollbarFiller.setAttribute("cm-not-content","true"),l.gutterFiller=D("div",null,"CodeMirror-gutter-filler"),l.gutterFiller.setAttribute("cm-not-content","true"),l.lineDiv=B("div",null,"CodeMirror-code"),l.selectionDiv=D("div",null,null,"position: relative; z-index: 1"),l.cursorDiv=D("div",null,"CodeMirror-cursors"),l.measure=D("div",null,"CodeMirror-measure"),l.lineMeasure=D("div",null,"CodeMirror-measure"),l.lineSpace=B("div",[l.measure,l.lineMeasure,l.selectionDiv,l.cursorDiv,l.lineDiv],null,"position: relative; outline: none");var d=B("div",[l.lineSpace],"CodeMirror-lines");l.mover=D("div",[d],null,"position: relative"),l.sizer=D("div",[l.mover],"CodeMirror-sizer"),l.sizerWidth=null,l.heightForcer=D("div",null,null,"position: absolute; height: "+G+"px; width: 1px;"),l.gutters=D("div",null,"CodeMirror-gutters"),l.lineGutter=null,l.scroller=D("div",[l.sizer,l.heightForcer,l.gutters],"CodeMirror-scroll"),l.scroller.setAttribute("tabIndex","-1"),l.wrapper=D("div",[l.scrollbarFiller,l.gutterFiller,l.scroller],"CodeMirror"),u&&c>=105&&(l.wrapper.style.clipPath="inset(0px)"),l.wrapper.setAttribute("translate","no"),a&&r<8&&(l.gutters.style.zIndex=-1,l.scroller.style.paddingRight=0),s||o&&y||(l.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(l.wrapper):e(l.wrapper)),l.viewFrom=l.viewTo=t.first,l.reportedViewFrom=l.reportedViewTo=t.first,l.view=[],l.renderedView=null,l.externalMeasured=null,l.viewOffset=0,l.lastWrapHeight=l.lastWrapWidth=0,l.updateLineNumbers=null,l.nativeBarWidth=l.barHeight=l.barWidth=0,l.scrollbarsClipped=!1,l.lineNumWidth=l.lineNumInnerWidth=l.lineNumChars=null,l.alignWidgets=!1,l.cachedCharWidth=l.cachedTextHeight=l.cachedPaddingH=null,l.maxLine=null,l.maxLineLength=0,l.maxLineChanged=!1,l.wheelDX=l.wheelDY=l.wheelStartX=l.wheelStartY=null,l.shift=!1,l.selForContextMenu=null,l.activeTouch=null,l.gutterSpecs=tl(i.gutters,i.lineNumbers),ol(l),n.init(l)}Wi.prototype.signal=function(e,t){Se(e,t)&&this.events.push(arguments)},Wi.prototype.finish=function(){for(var e=0;e<this.events.length;e++)_e.apply(null,this.events[e])};var ll=0,al=null;function rl(e){var t=e.wheelDeltaX,o=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==o&&e.detail&&e.axis==e.VERTICAL_AXIS?o=e.detail:null==o&&(o=e.wheelDelta),{x:t,y:o}}function sl(e){var t=rl(e);return t.x*=al,t.y*=al,t}function dl(e,t){u&&102==c&&(null==e.display.chromeScrollHack?e.display.sizer.style.pointerEvents="none":clearTimeout(e.display.chromeScrollHack),e.display.chromeScrollHack=setTimeout((function(){e.display.chromeScrollHack=null,e.display.sizer.style.pointerEvents=""}),100));var n=rl(t),i=n.x,l=n.y,a=al;0===t.deltaMode&&(i=t.deltaX,l=t.deltaY,a=1);var r=e.display,d=r.scroller,m=d.scrollWidth>d.clientWidth,h=d.scrollHeight>d.clientHeight;if(i&&m||l&&h){if(l&&b&&s)e:for(var f=t.target,v=r.view;f!=d;f=f.parentNode)for(var g=0;g<v.length;g++)if(v[g].node==f){e.display.currentWheelTarget=f;break e}if(i&&!o&&!p&&null!=a)return l&&h&&yi(e,Math.max(0,d.scrollTop+l*a)),wi(e,Math.max(0,d.scrollLeft+i*a)),(!l||l&&h)&&Ne(t),void(r.wheelStartX=null);if(l&&null!=a){var y=l*a,w=e.doc.scrollTop,k=w+r.wrapper.clientHeight;y<0?w=Math.max(0,w+y-50):k=Math.min(e.doc.height,k+y+50),Yi(e,{top:w,bottom:k})}ll<20&&0!==t.deltaMode&&(null==r.wheelStartX?(r.wheelStartX=d.scrollLeft,r.wheelStartY=d.scrollTop,r.wheelDX=i,r.wheelDY=l,setTimeout((function(){if(null!=r.wheelStartX){var e=d.scrollLeft-r.wheelStartX,t=d.scrollTop-r.wheelStartY,o=t&&r.wheelDY&&t/r.wheelDY||e&&r.wheelDX&&e/r.wheelDX;r.wheelStartX=r.wheelStartY=null,o&&(al=(al*ll+o)/(ll+1),++ll)}}),200)):(r.wheelDX+=i,r.wheelDY+=l))}}a?al=-.53:o?al=15:u?al=-.7:m&&(al=-1/3);var ul=function(e,t){this.ranges=e,this.primIndex=t};ul.prototype.primary=function(){return this.ranges[this.primIndex]},ul.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var o=this.ranges[t],n=e.ranges[t];if(!pt(o.anchor,n.anchor)||!pt(o.head,n.head))return!1}return!0},ul.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new cl(mt(this.ranges[t].anchor),mt(this.ranges[t].head));return new ul(e,this.primIndex)},ul.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},ul.prototype.contains=function(e,t){t||(t=e);for(var o=0;o<this.ranges.length;o++){var n=this.ranges[o];if(ct(t,n.from())>=0&&ct(e,n.to())<=0)return o}return-1};var cl=function(e,t){this.anchor=e,this.head=t};function pl(e,t,o){var n=e&&e.options.selectionsMayTouch,i=t[o];t.sort((function(e,t){return ct(e.from(),t.from())})),o=H(t,i);for(var l=1;l<t.length;l++){var a=t[l],r=t[l-1],s=ct(r.to(),a.from());if(n&&!a.empty()?s>0:s>=0){var d=ft(r.from(),a.from()),u=ht(r.to(),a.to()),c=r.empty()?a.from()==a.head:r.from()==r.head;l<=o&&--o,t.splice(--l,2,new cl(c?u:d,c?d:u))}}return new ul(t,o)}function ml(e,t){return new ul([new cl(e,t||e)],0)}function hl(e){return e.text?ut(e.from.line+e.text.length-1,ee(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function fl(e,t){if(ct(e,t.from)<0)return e;if(ct(e,t.to)<=0)return hl(t);var o=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=hl(t).ch-t.to.ch),ut(o,n)}function vl(e,t){for(var o=[],n=0;n<e.sel.ranges.length;n++){var i=e.sel.ranges[n];o.push(new cl(fl(i.anchor,t),fl(i.head,t)))}return pl(e.cm,o,e.sel.primIndex)}function gl(e,t,o){return e.line==t.line?ut(o.line,e.ch-t.ch+o.ch):ut(o.line+(e.line-t.line),e.ch)}function yl(e,t,o){for(var n=[],i=ut(e.first,0),l=i,a=0;a<t.length;a++){var r=t[a],s=gl(r.from,i,l),d=gl(hl(r),i,l);if(i=r.to,l=d,"around"==o){var u=e.sel.ranges[a],c=ct(u.head,u.anchor)<0;n[a]=new cl(c?d:s,c?s:d)}else n[a]=new cl(s,s)}return new ul(n,e.sel.primIndex)}function bl(e){e.doc.mode=Ye(e.options,e.doc.modeOption),wl(e)}function wl(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,zi(e,100),e.state.modeGen++,e.curOp&&Wn(e)}function kl(e,t){return 0==t.from.ch&&0==t.to.ch&&""==ee(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function _l(e,t,o,n){function i(e){return o?o[e]:null}function l(e,o,i){fo(e,o,i,n),Io(e,"change",e,t)}function a(e,t){for(var o=[],l=e;l<t;++l)o.push(new ho(d[l],i(l),n));return o}var r=t.from,s=t.to,d=t.text,u=ot(e,r.line),c=ot(e,s.line),p=ee(d),m=i(d.length-1),h=s.line-r.line;if(t.full)e.insert(0,a(0,d.length)),e.remove(d.length,e.size-d.length);else if(kl(e,t)){var f=a(0,d.length-1);l(c,c.text,m),h&&e.remove(r.line,h),f.length&&e.insert(r.line,f)}else if(u==c)if(1==d.length)l(u,u.text.slice(0,r.ch)+p+u.text.slice(s.ch),m);else{var v=a(1,d.length-1);v.push(new ho(p+u.text.slice(s.ch),m,n)),l(u,u.text.slice(0,r.ch)+d[0],i(0)),e.insert(r.line+1,v)}else if(1==d.length)l(u,u.text.slice(0,r.ch)+d[0]+c.text.slice(s.ch),i(0)),e.remove(r.line+1,h);else{l(u,u.text.slice(0,r.ch)+d[0],i(0)),l(c,p+c.text.slice(s.ch),m);var g=a(1,d.length-1);h>1&&e.remove(r.line+1,h-1),e.insert(r.line+1,g)}Io(e,"change",e,t)}function Cl(e,t,o){function n(e,i,l){if(e.linked)for(var a=0;a<e.linked.length;++a){var r=e.linked[a];if(r.doc!=i){var s=l&&r.sharedHist;o&&!s||(t(r.doc,s),n(r.doc,e,s))}}}n(e,null,!0)}function xl(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Rn(e),bl(e),Sl(e),e.options.direction=t.direction,e.options.lineWrapping||mo(e),e.options.mode=t.modeOption,Wn(e)}function Sl(e){("rtl"==e.doc.direction?I:N)(e.display.lineDiv,"CodeMirror-rtl")}function Vl(e){Pi(e,(function(){Sl(e),Wn(e)}))}function Nl(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function El(e,t){var o={from:mt(t.from),to:hl(t),text:nt(e,t.from,t.to)};return Fl(e,o,t.from.line,t.to.line+1),Cl(e,(function(e){return Fl(e,o,t.from.line,t.to.line+1)}),!0),o}function $l(e){for(;e.length&&ee(e).ranges;)e.pop()}function Dl(e,t){return t?($l(e.done),ee(e.done)):e.done.length&&!ee(e.done).ranges?ee(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),ee(e.done)):void 0}function Bl(e,t,o,n){var i=e.history;i.undone.length=0;var l,a,r=+new Date;if((i.lastOp==n||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>r-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(l=Dl(i,i.lastOp==n)))a=ee(l.changes),0==ct(t.from,t.to)&&0==ct(t.from,a.to)?a.to=hl(t):l.changes.push(El(e,t));else{var s=ee(i.done);for(s&&s.ranges||Il(e.sel,i.done),l={changes:[El(e,t)],generation:i.generation},i.done.push(l);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(o),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=r,i.lastOp=i.lastSelOp=n,i.lastOrigin=i.lastSelOrigin=t.origin,a||_e(e,"historyAdded")}function Tl(e,t,o,n){var i=t.charAt(0);return"*"==i||"+"==i&&o.ranges.length==n.ranges.length&&o.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Ol(e,t,o,n){var i=e.history,l=n&&n.origin;o==i.lastSelOp||l&&i.lastSelOrigin==l&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==l||Tl(e,l,ee(i.done),t))?i.done[i.done.length-1]=t:Il(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=l,i.lastSelOp=o,n&&!1!==n.clearRedo&&$l(i.undone)}function Il(e,t){var o=ee(t);o&&o.ranges&&o.equals(e)||t.push(e)}function Fl(e,t,o,n){var i=t["spans_"+e.id],l=0;e.iter(Math.max(e.first,o),Math.min(e.first+e.size,n),(function(o){o.markedSpans&&((i||(i=t["spans_"+e.id]={}))[l]=o.markedSpans),++l}))}function Ll(e){if(!e)return null;for(var t,o=0;o<e.length;++o)e[o].marker.explicitlyCleared?t||(t=e.slice(0,o)):t&&t.push(e[o]);return t?t.length?t:null:e}function Pl(e,t){var o=t["spans_"+e.id];if(!o)return null;for(var n=[],i=0;i<t.text.length;++i)n.push(Ll(o[i]));return n}function Ml(e,t){var o=Pl(e,t),n=jt(e,t);if(!o)return n;if(!n)return o;for(var i=0;i<o.length;++i){var l=o[i],a=n[i];if(l&&a)e:for(var r=0;r<a.length;++r){for(var s=a[r],d=0;d<l.length;++d)if(l[d].marker==s.marker)continue e;l.push(s)}else a&&(o[i]=a)}return o}function Al(e,t,o){for(var n=[],i=0;i<e.length;++i){var l=e[i];if(l.ranges)n.push(o?ul.prototype.deepCopy.call(l):l);else{var a=l.changes,r=[];n.push({changes:r});for(var s=0;s<a.length;++s){var d=a[s],u=void 0;if(r.push({from:d.from,to:d.to,text:d.text}),t)for(var c in d)(u=c.match(/^spans_(\d+)$/))&&H(t,Number(u[1]))>-1&&(ee(r)[c]=d[c],delete d[c])}}}return n}function Rl(e,t,o,n){if(n){var i=e.anchor;if(o){var l=ct(t,i)<0;l!=ct(o,i)<0?(i=t,t=o):l!=ct(t,o)<0&&(t=o)}return new cl(i,t)}return new cl(o||t,t)}function zl(e,t,o,n,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),Kl(e,new ul([Rl(e.sel.primary(),t,o,i)],0),n)}function Ul(e,t,o){for(var n=[],i=e.cm&&(e.cm.display.shift||e.extend),l=0;l<e.sel.ranges.length;l++)n[l]=Rl(e.sel.ranges[l],t[l],null,i);Kl(e,pl(e.cm,n,e.sel.primIndex),o)}function Wl(e,t,o,n){var i=e.sel.ranges.slice(0);i[t]=o,Kl(e,pl(e.cm,i,e.sel.primIndex),n)}function jl(e,t,o,n){Kl(e,ml(t,o),n)}function Hl(e,t,o){var n={ranges:t.ranges,update:function(t){this.ranges=[];for(var o=0;o<t.length;o++)this.ranges[o]=new cl(gt(e,t[o].anchor),gt(e,t[o].head))},origin:o&&o.origin};return _e(e,"beforeSelectionChange",e,n),e.cm&&_e(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?pl(e.cm,n.ranges,n.ranges.length-1):t}function Gl(e,t,o){var n=e.history.done,i=ee(n);i&&i.ranges?(n[n.length-1]=t,ql(e,t,o)):Kl(e,t,o)}function Kl(e,t,o){ql(e,t,o),Ol(e,e.sel,e.cm?e.cm.curOp.id:NaN,o)}function ql(e,t,o){(Se(e,"beforeSelectionChange")||e.cm&&Se(e.cm,"beforeSelectionChange"))&&(t=Hl(e,t,o));var n=o&&o.bias||(ct(t.primary().head,e.sel.primary().head)<0?-1:1);Yl(e,Jl(e,t,n,!0)),o&&!1===o.scroll||!e.cm||"nocursor"==e.cm.getOption("readOnly")||mi(e.cm)}function Yl(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,xe(e.cm)),Io(e,"cursorActivity",e))}function Xl(e){Yl(e,Jl(e,e.sel,null,!1))}function Jl(e,t,o,n){for(var i,l=0;l<t.ranges.length;l++){var a=t.ranges[l],r=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[l],s=Zl(e,a.anchor,r&&r.anchor,o,n),d=a.head==a.anchor?s:Zl(e,a.head,r&&r.head,o,n);(i||s!=a.anchor||d!=a.head)&&(i||(i=t.ranges.slice(0,l)),i[l]=new cl(s,d))}return i?pl(e.cm,i,t.primIndex):t}function Ql(e,t,o,n,i){var l=ot(e,t.line);if(l.markedSpans)for(var a=0;a<l.markedSpans.length;++a){var r=l.markedSpans[a],s=r.marker,d="selectLeft"in s?!s.selectLeft:s.inclusiveLeft,u="selectRight"in s?!s.selectRight:s.inclusiveRight;if((null==r.from||(d?r.from<=t.ch:r.from<t.ch))&&(null==r.to||(u?r.to>=t.ch:r.to>t.ch))){if(i&&(_e(s,"beforeCursorEnter"),s.explicitlyCleared)){if(l.markedSpans){--a;continue}break}if(!s.atomic)continue;if(o){var c=s.find(n<0?1:-1),p=void 0;if((n<0?u:d)&&(c=ea(e,c,-n,c&&c.line==t.line?l:null)),c&&c.line==t.line&&(p=ct(c,o))&&(n<0?p<0:p>0))return Ql(e,c,t,n,i)}var m=s.find(n<0?-1:1);return(n<0?d:u)&&(m=ea(e,m,n,m.line==t.line?l:null)),m?Ql(e,m,t,n,i):null}}return t}function Zl(e,t,o,n,i){var l=n||1,a=Ql(e,t,o,l,i)||!i&&Ql(e,t,o,l,!0)||Ql(e,t,o,-l,i)||!i&&Ql(e,t,o,-l,!0);return a||(e.cantEdit=!0,ut(e.first,0))}function ea(e,t,o,n){return o<0&&0==t.ch?t.line>e.first?gt(e,ut(t.line-1)):null:o>0&&t.ch==(n||ot(e,t.line)).text.length?t.line<e.first+e.size-1?ut(t.line+1,0):null:new ut(t.line,t.ch+o)}function ta(e){e.setSelection(ut(e.firstLine(),0),ut(e.lastLine()),q)}function oa(e,t,o){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return n.canceled=!0}};return o&&(n.update=function(t,o,i,l){t&&(n.from=gt(e,t)),o&&(n.to=gt(e,o)),i&&(n.text=i),void 0!==l&&(n.origin=l)}),_e(e,"beforeChange",e,n),e.cm&&_e(e.cm,"beforeChange",e.cm,n),n.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:n.from,to:n.to,text:n.text,origin:n.origin}}function na(e,t,o){if(e.cm){if(!e.cm.curOp)return Mi(e.cm,na)(e,t,o);if(e.cm.state.suppressEdits)return}if(!(Se(e,"beforeChange")||e.cm&&Se(e.cm,"beforeChange"))||(t=oa(e,t,!0))){var n=It&&!o&&Gt(e,t.from,t.to);if(n)for(var i=n.length-1;i>=0;--i)ia(e,{from:n[i].from,to:n[i].to,text:i?[""]:t.text,origin:t.origin});else ia(e,t)}}function ia(e,t){if(1!=t.text.length||""!=t.text[0]||0!=ct(t.from,t.to)){var o=vl(e,t);Bl(e,t,o,e.cm?e.cm.curOp.id:NaN),ra(e,t,o,jt(e,t));var n=[];Cl(e,(function(e,o){o||-1!=H(n,e.history)||(pa(e.history,t),n.push(e.history)),ra(e,t,null,jt(e,t))}))}}function la(e,t,o){var n=e.cm&&e.cm.state.suppressEdits;if(!n||o){for(var i,l=e.history,a=e.sel,r="undo"==t?l.done:l.undone,s="undo"==t?l.undone:l.done,d=0;d<r.length&&(i=r[d],o?!i.ranges||i.equals(e.sel):i.ranges);d++);if(d!=r.length){for(l.lastOrigin=l.lastSelOrigin=null;;){if(!(i=r.pop()).ranges){if(n)return void r.push(i);break}if(Il(i,s),o&&!i.equals(e.sel))return void Kl(e,i,{clearRedo:!1});a=i}var u=[];Il(a,s),s.push({changes:u,generation:l.generation}),l.generation=i.generation||++l.maxGeneration;for(var c=Se(e,"beforeChange")||e.cm&&Se(e.cm,"beforeChange"),p=function(o){var n=i.changes[o];if(n.origin=t,c&&!oa(e,n,!1))return r.length=0,{};u.push(El(e,n));var l=o?vl(e,n):ee(r);ra(e,n,l,Ml(e,n)),!o&&e.cm&&e.cm.scrollIntoView({from:n.from,to:hl(n)});var a=[];Cl(e,(function(e,t){t||-1!=H(a,e.history)||(pa(e.history,n),a.push(e.history)),ra(e,n,null,Ml(e,n))}))},m=i.changes.length-1;m>=0;--m){var h=p(m);if(h)return h.v}}}}function aa(e,t){if(0!=t&&(e.first+=t,e.sel=new ul(te(e.sel.ranges,(function(e){return new cl(ut(e.anchor.line+t,e.anchor.ch),ut(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){Wn(e.cm,e.first,e.first-t,t);for(var o=e.cm.display,n=o.viewFrom;n<o.viewTo;n++)jn(e.cm,n,"gutter")}}function ra(e,t,o,n){if(e.cm&&!e.cm.curOp)return Mi(e.cm,ra)(e,t,o,n);if(t.to.line<e.first)aa(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);aa(e,i),t={from:ut(e.first,0),to:ut(t.to.line+i,t.to.ch),text:[ee(t.text)],origin:t.origin}}var l=e.lastLine();t.to.line>l&&(t={from:t.from,to:ut(l,ot(e,l).text.length),text:[t.text[0]],origin:t.origin}),t.removed=nt(e,t.from,t.to),o||(o=vl(e,t)),e.cm?sa(e.cm,t,n):_l(e,t,n),ql(e,o,q),e.cantEdit&&Zl(e,ut(e.firstLine(),0))&&(e.cantEdit=!1)}}function sa(e,t,o){var n=e.doc,i=e.display,l=t.from,a=t.to,r=!1,s=l.line;e.options.lineWrapping||(s=at(no(ot(n,l.line))),n.iter(s,a.line+1,(function(e){if(e==i.maxLine)return r=!0,!0}))),n.sel.contains(t.from,t.to)>-1&&xe(e),_l(n,t,o,An(e)),e.options.lineWrapping||(n.iter(s,l.line+t.text.length,(function(e){var t=po(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,r=!1)})),r&&(e.curOp.updateMaxLine=!0)),Ot(n,l.line),zi(e,400);var d=t.text.length-(a.line-l.line)-1;t.full?Wn(e):l.line!=a.line||1!=t.text.length||kl(e.doc,t)?Wn(e,l.line,a.line+1,d):jn(e,l.line,"text");var u=Se(e,"changes"),c=Se(e,"change");if(c||u){var p={from:l,to:a,text:t.text,removed:t.removed,origin:t.origin};c&&Io(e,"change",e,p),u&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}function da(e,t,o,n,i){var l;n||(n=o),ct(n,o)<0&&(o=(l=[n,o])[0],n=l[1]),"string"==typeof t&&(t=e.splitLines(t)),na(e,{from:o,to:n,text:t,origin:i})}function ua(e,t,o,n){o<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function ca(e,t,o,n){for(var i=0;i<e.length;++i){var l=e[i],a=!0;if(l.ranges){l.copied||((l=e[i]=l.deepCopy()).copied=!0);for(var r=0;r<l.ranges.length;r++)ua(l.ranges[r].anchor,t,o,n),ua(l.ranges[r].head,t,o,n)}else{for(var s=0;s<l.changes.length;++s){var d=l.changes[s];if(o<d.from.line)d.from=ut(d.from.line+n,d.from.ch),d.to=ut(d.to.line+n,d.to.ch);else if(t<=d.to.line){a=!1;break}}a||(e.splice(0,i+1),i=0)}}}function pa(e,t){var o=t.from.line,n=t.to.line,i=t.text.length-(n-o)-1;ca(e.done,o,n,i),ca(e.undone,o,n,i)}function ma(e,t,o,n){var i=t,l=t;return"number"==typeof t?l=ot(e,vt(e,t)):i=at(t),null==i?null:(n(l,i)&&e.cm&&jn(e.cm,i,o),l)}function ha(e){this.lines=e,this.parent=null;for(var t=0,o=0;o<e.length;++o)e[o].parent=this,t+=e[o].height;this.height=t}function fa(e){this.children=e;for(var t=0,o=0,n=0;n<e.length;++n){var i=e[n];t+=i.chunkSize(),o+=i.height,i.parent=this}this.size=t,this.height=o,this.parent=null}cl.prototype.from=function(){return ft(this.anchor,this.head)},cl.prototype.to=function(){return ht(this.anchor,this.head)},cl.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},ha.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var o=e,n=e+t;o<n;++o){var i=this.lines[o];this.height-=i.height,vo(i),Io(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,o){this.height+=o,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,o){for(var n=e+t;e<n;++e)if(o(this.lines[e]))return!0}},fa.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var o=0;o<this.children.length;++o){var n=this.children[o],i=n.chunkSize();if(e<i){var l=Math.min(t,i-e),a=n.height;if(n.removeInner(e,l),this.height-=a-n.height,i==l&&(this.children.splice(o--,1),n.parent=null),0==(t-=l))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof ha))){var r=[];this.collapse(r),this.children=[new ha(r)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,o){this.size+=t.length,this.height+=o;for(var n=0;n<this.children.length;++n){var i=this.children[n],l=i.chunkSize();if(e<=l){if(i.insertInner(e,t,o),i.lines&&i.lines.length>50){for(var a=i.lines.length%25+25,r=a;r<i.lines.length;){var s=new ha(i.lines.slice(r,r+=25));i.height-=s.height,this.children.splice(++n,0,s),s.parent=this}i.lines=i.lines.slice(0,a),this.maybeSpill()}break}e-=l}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new fa(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var o=H(e.parent.children,e);e.parent.children.splice(o+1,0,t)}else{var n=new fa(e.children);n.parent=e,e.children=[n,t],e=n}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,o){for(var n=0;n<this.children.length;++n){var i=this.children[n],l=i.chunkSize();if(e<l){var a=Math.min(t,l-e);if(i.iterN(e,a,o))return!0;if(0==(t-=a))break;e=0}else e-=l}}};var va=function(e,t,o){if(o)for(var n in o)o.hasOwnProperty(n)&&(this[n]=o[n]);this.doc=e,this.node=t};function ga(e,t,o){co(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&pi(e,o)}function ya(e,t,o,n){var i=new va(e,o,n),l=e.cm;return l&&i.noHScroll&&(l.display.alignWidgets=!0),ma(e,t,"widget",(function(t){var o=t.widgets||(t.widgets=[]);if(null==i.insertAt?o.push(i):o.splice(Math.min(o.length,Math.max(0,i.insertAt)),0,i),i.line=t,l&&!so(e,t)){var n=co(t)<e.scrollTop;lt(t,t.height+qo(i)),n&&pi(l,i.height),l.curOp.forceUpdate=!0}return!0})),l&&Io(l,"lineWidgetAdded",l,i,"number"==typeof t?t:at(t)),i}va.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,o=this.line,n=at(o);if(null!=n&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(o.widgets=null);var l=qo(this);lt(o,Math.max(0,o.height-l)),e&&(Pi(e,(function(){ga(e,o,-l),jn(e,n,"widget")})),Io(e,"lineWidgetCleared",e,this,n))}},va.prototype.changed=function(){var e=this,t=this.height,o=this.doc.cm,n=this.line;this.height=null;var i=qo(this)-t;i&&(so(this.doc,n)||lt(n,n.height+i),o&&Pi(o,(function(){o.curOp.forceUpdate=!0,ga(o,n,i),Io(o,"lineWidgetChanged",o,e,at(n))})))},Ve(va);var ba=0,wa=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++ba};function ka(e,t,o,n,i){if(n&&n.shared)return Ca(e,t,o,n,i);if(e.cm&&!e.cm.curOp)return Mi(e.cm,ka)(e,t,o,n,i);var l=new wa(e,i),a=ct(t,o);if(n&&U(n,l,!1),a>0||0==a&&!1!==l.clearWhenEmpty)return l;if(l.replacedWith&&(l.collapsed=!0,l.widgetNode=B("span",[l.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||l.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(l.widgetNode.insertLeft=!0)),l.collapsed){if(oo(e,t.line,t,o,l)||t.line!=o.line&&oo(e,o.line,t,o,l))throw new Error("Inserting collapsed marker partially overlapping an existing one");Pt()}l.addToHistory&&Bl(e,{from:t,to:o,origin:"markText"},e.sel,NaN);var r,s=t.line,d=e.cm;if(e.iter(s,o.line+1,(function(n){d&&l.collapsed&&!d.options.lineWrapping&&no(n)==d.display.maxLine&&(r=!0),l.collapsed&&s!=t.line&&lt(n,0),zt(n,new Mt(l,s==t.line?t.ch:null,s==o.line?o.ch:null),e.cm&&e.cm.curOp),++s})),l.collapsed&&e.iter(t.line,o.line+1,(function(t){so(e,t)&&lt(t,0)})),l.clearOnEnter&&be(l,"beforeCursorEnter",(function(){return l.clear()})),l.readOnly&&(Lt(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),l.collapsed&&(l.id=++ba,l.atomic=!0),d){if(r&&(d.curOp.updateMaxLine=!0),l.collapsed)Wn(d,t.line,o.line+1);else if(l.className||l.startStyle||l.endStyle||l.css||l.attributes||l.title)for(var u=t.line;u<=o.line;u++)jn(d,u,"text");l.atomic&&Xl(d.doc),Io(d,"markerAdded",d,l)}return l}wa.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&$i(e),Se(this,"clear")){var o=this.find();o&&Io(this,"clear",o.from,o.to)}for(var n=null,i=null,l=0;l<this.lines.length;++l){var a=this.lines[l],r=At(a.markedSpans,this);e&&!this.collapsed?jn(e,at(a),"text"):e&&(null!=r.to&&(i=at(a)),null!=r.from&&(n=at(a))),a.markedSpans=Rt(a.markedSpans,r),null==r.from&&this.collapsed&&!so(this.doc,a)&&e&&lt(a,Fn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var d=no(this.lines[s]),u=po(d);u>e.display.maxLineLength&&(e.display.maxLine=d,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&Wn(e,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Xl(e.doc)),e&&Io(e,"markerCleared",e,this,n,i),t&&Di(e),this.parent&&this.parent.clear()}},wa.prototype.find=function(e,t){var o,n;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var l=this.lines[i],a=At(l.markedSpans,this);if(null!=a.from&&(o=ut(t?l:at(l),a.from),-1==e))return o;if(null!=a.to&&(n=ut(t?l:at(l),a.to),1==e))return n}return o&&{from:o,to:n}},wa.prototype.changed=function(){var e=this,t=this.find(-1,!0),o=this,n=this.doc.cm;t&&n&&Pi(n,(function(){var i=t.line,l=at(t.line),a=rn(n,l);if(a&&(vn(a),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!so(o.doc,i)&&null!=o.height){var r=o.height;o.height=null;var s=qo(o)-r;s&&lt(i,i.height+s)}Io(n,"markerChanged",n,e)}))},wa.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=H(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},wa.prototype.detachLine=function(e){if(this.lines.splice(H(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},Ve(wa);var _a=function(e,t){this.markers=e,this.primary=t;for(var o=0;o<e.length;++o)e[o].parent=this};function Ca(e,t,o,n,i){(n=U(n)).shared=!1;var l=[ka(e,t,o,n,i)],a=l[0],r=n.widgetNode;return Cl(e,(function(e){r&&(n.widgetNode=r.cloneNode(!0)),l.push(ka(e,gt(e,t),gt(e,o),n,i));for(var s=0;s<e.linked.length;++s)if(e.linked[s].isParent)return;a=ee(l)})),new _a(l,a)}function xa(e){return e.findMarks(ut(e.first,0),e.clipPos(ut(e.lastLine())),(function(e){return e.parent}))}function Sa(e,t){for(var o=0;o<t.length;o++){var n=t[o],i=n.find(),l=e.clipPos(i.from),a=e.clipPos(i.to);if(ct(l,a)){var r=ka(e,l,a,n.primary,n.primary.type);n.markers.push(r),r.parent=n}}}function Va(e){for(var t=function(t){var o=e[t],n=[o.primary.doc];Cl(o.primary.doc,(function(e){return n.push(e)}));for(var i=0;i<o.markers.length;i++){var l=o.markers[i];-1==H(n,l.doc)&&(l.parent=null,o.markers.splice(i--,1))}},o=0;o<e.length;o++)t(o)}_a.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Io(this,"clear")}},_a.prototype.find=function(e,t){return this.primary.find(e,t)},Ve(_a);var Na=0,Ea=function(e,t,o,n,i){if(!(this instanceof Ea))return new Ea(e,t,o,n,i);null==o&&(o=0),fa.call(this,[new ha([new ho("",null)])]),this.first=o,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=o;var l=ut(o,0);this.sel=ml(l),this.history=new Nl(null),this.id=++Na,this.modeOption=t,this.lineSep=n,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),_l(this,{from:l,to:l,text:e}),Kl(this,ml(l),q)};Ea.prototype=ie(fa.prototype,{constructor:Ea,iter:function(e,t,o){o?this.iterN(e-this.first,t-e,o):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var o=0,n=0;n<t.length;++n)o+=t[n].height;this.insertInner(e-this.first,t,o)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=it(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Ri((function(e){var t=ut(this.first,0),o=this.first+this.size-1;na(this,{from:t,to:ut(o,ot(this,o).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&hi(this.cm,0,0),Kl(this,ml(t),q)})),replaceRange:function(e,t,o,n){da(this,e,t=gt(this,t),o=o?gt(this,o):t,n)},getRange:function(e,t,o){var n=nt(this,gt(this,e),gt(this,t));return!1===o?n:""===o?n.join(""):n.join(o||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(st(this,e))return ot(this,e)},getLineNumber:function(e){return at(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=ot(this,e)),no(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return gt(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ri((function(e,t,o){jl(this,gt(this,"number"==typeof e?ut(e,t||0):e),null,o)})),setSelection:Ri((function(e,t,o){jl(this,gt(this,e),gt(this,t||e),o)})),extendSelection:Ri((function(e,t,o){zl(this,gt(this,e),t&&gt(this,t),o)})),extendSelections:Ri((function(e,t){Ul(this,bt(this,e),t)})),extendSelectionsBy:Ri((function(e,t){Ul(this,bt(this,te(this.sel.ranges,e)),t)})),setSelections:Ri((function(e,t,o){if(e.length){for(var n=[],i=0;i<e.length;i++)n[i]=new cl(gt(this,e[i].anchor),gt(this,e[i].head||e[i].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Kl(this,pl(this.cm,n,t),o)}})),addSelection:Ri((function(e,t,o){var n=this.sel.ranges.slice(0);n.push(new cl(gt(this,e),gt(this,t||e))),Kl(this,pl(this.cm,n,n.length-1),o)})),getSelection:function(e){for(var t,o=this.sel.ranges,n=0;n<o.length;n++){var i=nt(this,o[n].from(),o[n].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],o=this.sel.ranges,n=0;n<o.length;n++){var i=nt(this,o[n].from(),o[n].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[n]=i}return t},replaceSelection:function(e,t,o){for(var n=[],i=0;i<this.sel.ranges.length;i++)n[i]=e;this.replaceSelections(n,t,o||"+input")},replaceSelections:Ri((function(e,t,o){for(var n=[],i=this.sel,l=0;l<i.ranges.length;l++){var a=i.ranges[l];n[l]={from:a.from(),to:a.to(),text:this.splitLines(e[l]),origin:o}}for(var r=t&&"end"!=t&&yl(this,n,t),s=n.length-1;s>=0;s--)na(this,n[s]);r?Gl(this,r):this.cm&&mi(this.cm)})),undo:Ri((function(){la(this,"undo")})),redo:Ri((function(){la(this,"redo")})),undoSelection:Ri((function(){la(this,"undo",!0)})),redoSelection:Ri((function(){la(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,o=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++o;return{undo:t,redo:o}},clearHistory:function(){var e=this;this.history=new Nl(this.history),Cl(this,(function(t){return t.history=e.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Al(this.history.done),undone:Al(this.history.undone)}},setHistory:function(e){var t=this.history=new Nl(this.history);t.done=Al(e.done.slice(0),null,!0),t.undone=Al(e.undone.slice(0),null,!0)},setGutterMarker:Ri((function(e,t,o){return ma(this,e,"gutter",(function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=o,!o&&se(n)&&(e.gutterMarkers=null),!0}))})),clearGutter:Ri((function(e){var t=this;this.iter((function(o){o.gutterMarkers&&o.gutterMarkers[e]&&ma(t,o,"gutter",(function(){return o.gutterMarkers[e]=null,se(o.gutterMarkers)&&(o.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!st(this,e))return null;if(t=e,!(e=ot(this,e)))return null}else if(null==(t=at(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Ri((function(e,t,o){return ma(this,e,"gutter"==t?"gutter":"class",(function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[n]){if(S(o).test(e[n]))return!1;e[n]+=" "+o}else e[n]=o;return!0}))})),removeLineClass:Ri((function(e,t,o){return ma(this,e,"gutter"==t?"gutter":"class",(function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[n];if(!i)return!1;if(null==o)e[n]=null;else{var l=i.match(S(o));if(!l)return!1;var a=l.index+l[0].length;e[n]=i.slice(0,l.index)+(l.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0}))})),addLineWidget:Ri((function(e,t,o){return ya(this,e,t,o)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,o){return ka(this,gt(this,e),gt(this,t),o,o&&o.type||"range")},setBookmark:function(e,t){var o={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return ka(this,e=gt(this,e),e,o,"bookmark")},findMarksAt:function(e){var t=[],o=ot(this,(e=gt(this,e)).line).markedSpans;if(o)for(var n=0;n<o.length;++n){var i=o[n];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,o){e=gt(this,e),t=gt(this,t);var n=[],i=e.line;return this.iter(e.line,t.line+1,(function(l){var a=l.markedSpans;if(a)for(var r=0;r<a.length;r++){var s=a[r];null!=s.to&&i==e.line&&e.ch>=s.to||null==s.from&&i!=e.line||null!=s.from&&i==t.line&&s.from>=t.ch||o&&!o(s.marker)||n.push(s.marker.parent||s.marker)}++i})),n},getAllMarks:function(){var e=[];return this.iter((function(t){var o=t.markedSpans;if(o)for(var n=0;n<o.length;++n)null!=o[n].from&&e.push(o[n].marker)})),e},posFromIndex:function(e){var t,o=this.first,n=this.lineSeparator().length;return this.iter((function(i){var l=i.text.length+n;if(l>e)return t=e,!0;e-=l,++o})),gt(this,ut(o,t))},indexFromPos:function(e){var t=(e=gt(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var o=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+o})),t},copy:function(e){var t=new Ea(it(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,o=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<o&&(o=e.to);var n=new Ea(it(this,t,o),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Sa(n,xa(this)),n},unlinkDoc:function(e){if(e instanceof Ur&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Va(xa(this));break}if(e.history==this.history){var o=[e.id];Cl(e,(function(e){return o.push(e.id)}),!0),e.history=new Nl(null),e.history.done=Al(this.history.done,o),e.history.undone=Al(this.history.undone,o)}},iterLinkedDocs:function(e){Cl(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ae(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Ri((function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&Vl(this.cm))}))}),Ea.prototype.eachLine=Ea.prototype.iter;var $a=0;function Da(e){var t=this;if(Oa(t),!Ce(t,e)&&!Yo(t.display,e)){Ne(e),a&&($a=+new Date);var o=zn(t,e,!0),n=e.dataTransfer.files;if(o&&!t.isReadOnly())if(n&&n.length&&window.FileReader&&window.File)for(var i=n.length,l=Array(i),r=0,s=function(){++r==i&&Mi(t,(function(){var e={from:o=gt(t.doc,o),to:o,text:t.doc.splitLines(l.filter((function(e){return null!=e})).join(t.doc.lineSeparator())),origin:"paste"};na(t.doc,e),Gl(t.doc,ml(gt(t.doc,o),gt(t.doc,hl(e))))}))()},d=function(e,o){if(t.options.allowDropFileTypes&&-1==H(t.options.allowDropFileTypes,e.type))s();else{var n=new FileReader;n.onerror=function(){return s()},n.onload=function(){var e=n.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)||(l[o]=e),s()},n.readAsText(e)}},u=0;u<n.length;u++)d(n[u],u);else{if(t.state.draggingText&&t.doc.sel.contains(o)>-1)return t.state.draggingText(e),void setTimeout((function(){return t.display.input.focus()}),20);try{var c=e.dataTransfer.getData("Text");if(c){var p;if(t.state.draggingText&&!t.state.draggingText.copy&&(p=t.listSelections()),ql(t.doc,ml(o,o)),p)for(var m=0;m<p.length;++m)da(t.doc,"",p[m].anchor,p[m].head,"drag");t.replaceSelection(c,"around","paste"),t.display.input.focus()}}catch(h){}}}}function Ba(e,t){if(a&&(!e.state.draggingText||+new Date-$a<100))De(t);else if(!Ce(e,t)&&!Yo(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!m)){var o=D("img",null,null,"position: fixed; left: 0; top: 0;");o.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",p&&(o.width=o.height=1,e.display.wrapper.appendChild(o),o._top=o.offsetTop),t.dataTransfer.setDragImage(o,0,0),p&&o.parentNode.removeChild(o)}}function Ta(e,t){var o=zn(e,t);if(o){var n=document.createDocumentFragment();Jn(e,o,n),e.display.dragCursor||(e.display.dragCursor=D("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),$(e.display.dragCursor,n)}}function Oa(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Ia(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),o=[],n=0;n<t.length;n++){var i=t[n].CodeMirror;i&&o.push(i)}o.length&&o[0].operation((function(){for(var t=0;t<o.length;t++)e(o[t])}))}}var Fa=!1;function La(){Fa||(Pa(),Fa=!0)}function Pa(){var e;be(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,Ia(Ma)}),100))})),be(window,"blur",(function(){return Ia(ii)}))}function Ma(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Aa={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ra=0;Ra<10;Ra++)Aa[Ra+48]=Aa[Ra+96]=String(Ra);for(var za=65;za<=90;za++)Aa[za]=String.fromCharCode(za);for(var Ua=1;Ua<=12;Ua++)Aa[Ua+111]=Aa[Ua+63235]="F"+Ua;var Wa={};function ja(e){var t,o,n,i,l=e.split(/-(?!$)/);e=l[l.length-1];for(var a=0;a<l.length-1;a++){var r=l[a];if(/^(cmd|meta|m)$/i.test(r))i=!0;else if(/^a(lt)?$/i.test(r))t=!0;else if(/^(c|ctrl|control)$/i.test(r))o=!0;else{if(!/^s(hift)?$/i.test(r))throw new Error("Unrecognized modifier name: "+r);n=!0}}return t&&(e="Alt-"+e),o&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}function Ha(e){var t={};for(var o in e)if(e.hasOwnProperty(o)){var n=e[o];if(/^(name|fallthrough|(de|at)tach)$/.test(o))continue;if("..."==n){delete e[o];continue}for(var i=te(o.split(" "),ja),l=0;l<i.length;l++){var a=void 0,r=void 0;l==i.length-1?(r=i.join(" "),a=n):(r=i.slice(0,l+1).join(" "),a="...");var s=t[r];if(s){if(s!=a)throw new Error("Inconsistent bindings for "+r)}else t[r]=a}delete e[o]}for(var d in t)e[d]=t[d];return e}function Ga(e,t,o,n){var i=(t=Xa(t)).call?t.call(e,n):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&o(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Ga(e,t.fallthrough,o,n);for(var l=0;l<t.fallthrough.length;l++){var a=Ga(e,t.fallthrough[l],o,n);if(a)return a}}}function Ka(e){var t="string"==typeof e?e:Aa[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function qa(e,t,o){var n=e;return t.altKey&&"Alt"!=n&&(e="Alt-"+e),(C?t.metaKey:t.ctrlKey)&&"Ctrl"!=n&&(e="Ctrl-"+e),(C?t.ctrlKey:t.metaKey)&&"Mod"!=n&&(e="Cmd-"+e),!o&&t.shiftKey&&"Shift"!=n&&(e="Shift-"+e),e}function Ya(e,t){if(p&&34==e.keyCode&&e.char)return!1;var o=Aa[e.keyCode];return null!=o&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(o=e.code),qa(o,e,t))}function Xa(e){return"string"==typeof e?Wa[e]:e}function Ja(e,t){for(var o=e.doc.sel.ranges,n=[],i=0;i<o.length;i++){for(var l=t(o[i]);n.length&&ct(l.from,ee(n).to)<=0;){var a=n.pop();if(ct(a.from,l.from)<0){l.from=a.from;break}}n.push(l)}Pi(e,(function(){for(var t=n.length-1;t>=0;t--)da(e.doc,"",n[t].from,n[t].to,"+delete");mi(e)}))}function Qa(e,t,o){var n=ce(e.text,t+o,o);return n<0||n>e.text.length?null:n}function Za(e,t,o){var n=Qa(e,t.ch,o);return null==n?null:new ut(t.line,n,o<0?"after":"before")}function er(e,t,o,n,i){if(e){"rtl"==t.doc.direction&&(i=-i);var l=ge(o,t.doc.direction);if(l){var a,r=i<0?ee(l):l[0],s=i<0==(1==r.level)?"after":"before";if(r.level>0||"rtl"==t.doc.direction){var d=sn(t,o);a=i<0?o.text.length-1:0;var u=dn(t,d,a).top;a=pe((function(e){return dn(t,d,e).top==u}),i<0==(1==r.level)?r.from:r.to-1,a),"before"==s&&(a=Qa(o,a,1))}else a=i<0?r.to:r.from;return new ut(n,a,s)}}return new ut(n,i<0?o.text.length:0,i<0?"before":"after")}function tr(e,t,o,n){var i=ge(t,e.doc.direction);if(!i)return Za(t,o,n);o.ch>=t.text.length?(o.ch=t.text.length,o.sticky="before"):o.ch<=0&&(o.ch=0,o.sticky="after");var l=fe(i,o.ch,o.sticky),a=i[l];if("ltr"==e.doc.direction&&a.level%2==0&&(n>0?a.to>o.ch:a.from<o.ch))return Za(t,o,n);var r,s=function(e,o){return Qa(t,e instanceof ut?e.ch:e,o)},d=function(o){return e.options.lineWrapping?(r=r||sn(e,t),Dn(e,t,r,o)):{begin:0,end:t.text.length}},u=d("before"==o.sticky?s(o,-1):o.ch);if("rtl"==e.doc.direction||1==a.level){var c=1==a.level==n<0,p=s(o,c?1:-1);if(null!=p&&(c?p<=a.to&&p<=u.end:p>=a.from&&p>=u.begin)){var m=c?"before":"after";return new ut(o.line,p,m)}}var h=function(e,t,n){for(var l=function(e,t){return t?new ut(o.line,s(e,1),"before"):new ut(o.line,e,"after")};e>=0&&e<i.length;e+=t){var a=i[e],r=t>0==(1!=a.level),d=r?n.begin:s(n.end,-1);if(a.from<=d&&d<a.to)return l(d,r);if(d=r?a.from:s(a.to,-1),n.begin<=d&&d<n.end)return l(d,r)}},f=h(l+n,n,u);if(f)return f;var v=n>0?u.end:s(u.begin,-1);return null==v||n>0&&v==t.text.length||!(f=h(n>0?0:i.length-1,n,d(v)))?null:f}Wa.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Wa.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Wa.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Wa.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Wa.default=b?Wa.macDefault:Wa.pcDefault;var or={selectAll:ta,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),q)},killLine:function(e){return Ja(e,(function(t){if(t.empty()){var o=ot(e.doc,t.head.line).text.length;return t.head.ch==o&&t.head.line<e.lastLine()?{from:t.head,to:ut(t.head.line+1,0)}:{from:t.head,to:ut(t.head.line,o)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){return Ja(e,(function(t){return{from:ut(t.from().line,0),to:gt(e.doc,ut(t.to().line+1,0))}}))},delLineLeft:function(e){return Ja(e,(function(e){return{from:ut(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){return Ja(e,(function(t){var o=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:o},"div"),to:t.from()}}))},delWrappedLineRight:function(e){return Ja(e,(function(t){var o=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:o},"div");return{from:t.from(),to:n}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ut(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ut(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy((function(t){return nr(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy((function(t){return lr(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy((function(t){return ir(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy((function(t){var o=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:o},"div")}),X)},goLineLeft:function(e){return e.extendSelectionsBy((function(t){var o=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:o},"div")}),X)},goLineLeftSmart:function(e){return e.extendSelectionsBy((function(t){var o=e.cursorCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:o},"div");return n.ch<e.getLine(n.line).search(/\S/)?lr(e,t.head):n}),X)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],o=e.listSelections(),n=e.options.tabSize,i=0;i<o.length;i++){var l=o[i].from(),a=W(e.getLine(l.line),l.ch,n);t.push(Z(n-a%n))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Pi(e,(function(){for(var t=e.listSelections(),o=[],n=0;n<t.length;n++)if(t[n].empty()){var i=t[n].head,l=ot(e.doc,i.line).text;if(l)if(i.ch==l.length&&(i=new ut(i.line,i.ch-1)),i.ch>0)i=new ut(i.line,i.ch+1),e.replaceRange(l.charAt(i.ch-1)+l.charAt(i.ch-2),ut(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var a=ot(e.doc,i.line-1).text;a&&(i=new ut(i.line,1),e.replaceRange(l.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),ut(i.line-1,a.length-1),i,"+transpose"))}o.push(new cl(i,i))}e.setSelections(o)}))},newlineAndIndent:function(e){return Pi(e,(function(){for(var t=e.listSelections(),o=t.length-1;o>=0;o--)e.replaceRange(e.doc.lineSeparator(),t[o].anchor,t[o].head,"+input");t=e.listSelections();for(var n=0;n<t.length;n++)e.indentLine(t[n].from().line,null,!0);mi(e)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function nr(e,t){var o=ot(e.doc,t),n=no(o);return n!=o&&(t=at(n)),er(!0,e,n,t,1)}function ir(e,t){var o=ot(e.doc,t),n=io(o);return n!=o&&(t=at(n)),er(!0,e,o,t,-1)}function lr(e,t){var o=nr(e,t.line),n=ot(e.doc,o.line),i=ge(n,e.doc.direction);if(!i||0==i[0].level){var l=Math.max(o.ch,n.text.search(/\S/)),a=t.line==o.line&&t.ch<=l&&t.ch;return ut(o.line,a?0:l,o.sticky)}return o}function ar(e,t,o){if("string"==typeof t&&!(t=or[t]))return!1;e.display.input.ensurePolled();var n=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),o&&(e.display.shift=!1),i=t(e)!=K}finally{e.display.shift=n,e.state.suppressEdits=!1}return i}function rr(e,t,o){for(var n=0;n<e.state.keyMaps.length;n++){var i=Ga(t,e.state.keyMaps[n],o,e);if(i)return i}return e.options.extraKeys&&Ga(t,e.options.extraKeys,o,e)||Ga(t,e.options.keyMap,o,e)}var sr=new j;function dr(e,t,o,n){var i=e.state.keySeq;if(i){if(Ka(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:sr.set(50,(function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())})),ur(e,i+" "+t,o,n))return!0}return ur(e,t,o,n)}function ur(e,t,o,n){var i=rr(e,t,n);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&Io(e,"keyHandled",e,t,o),"handled"!=i&&"multi"!=i||(Ne(o),ei(e)),!!i}function cr(e,t){var o=Ya(t,!0);return!!o&&(t.shiftKey&&!e.state.keySeq?dr(e,"Shift-"+o,t,(function(t){return ar(e,t,!0)}))||dr(e,o,t,(function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return ar(e,t)})):dr(e,o,t,(function(t){return ar(e,t)})))}function pr(e,t,o){return dr(e,"'"+o+"'",t,(function(t){return ar(e,t,!0)}))}var mr=null;function hr(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=O(M(t)),Ce(t,e)))){a&&r<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var i=cr(t,e);p&&(mr=i?n:null,i||88!=n||ze||!(b?e.metaKey:e.ctrlKey)||t.replaceSelection("",null,"cut")),o&&!b&&!i&&46==n&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||fr(t)}}function fr(e){var t=e.display.lineDiv;function o(e){18!=e.keyCode&&e.altKey||(N(t,"CodeMirror-crosshair"),ke(document,"keyup",o),ke(document,"mouseover",o))}I(t,"CodeMirror-crosshair"),be(document,"keyup",o),be(document,"mouseover",o)}function vr(e){16==e.keyCode&&(this.doc.sel.shift=!1),Ce(this,e)}function gr(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||Yo(t.display,e)||Ce(t,e)||e.ctrlKey&&!e.altKey||b&&e.metaKey)){var o=e.keyCode,n=e.charCode;if(p&&o==mr)return mr=null,void Ne(e);if(!p||e.which&&!(e.which<10)||!cr(t,e)){var i=String.fromCharCode(null==n?o:n);"\b"!=i&&(pr(t,e,i)||t.display.input.onKeyPress(e))}}}var yr,br,wr=400,kr=function(e,t,o){this.time=e,this.pos=t,this.button=o};function _r(e,t){var o=+new Date;return br&&br.compare(o,e,t)?(yr=br=null,"triple"):yr&&yr.compare(o,e,t)?(br=new kr(o,e,t),yr=null,"double"):(yr=new kr(o,e,t),br=null,"single")}function Cr(e){var t=this,o=t.display;if(!(Ce(t,e)||o.activeTouch&&o.input.supportsTouch()))if(o.input.ensurePolled(),o.shift=e.shiftKey,Yo(o,e))s||(o.scroller.draggable=!1,setTimeout((function(){return o.scroller.draggable=!0}),100));else if(!Tr(t,e)){var n=zn(t,e),i=Te(e),l=n?_r(n,i):"single";R(t).focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),n&&xr(t,i,n,l,e)||(1==i?n?Vr(t,n,l,e):Be(e)==o.scroller&&Ne(e):2==i?(n&&zl(t.doc,n),setTimeout((function(){return o.input.focus()}),20)):3==i&&(x?t.display.input.onContextMenu(e):oi(t)))}}function xr(e,t,o,n,i){var l="Click";return"double"==n?l="Double"+l:"triple"==n&&(l="Triple"+l),dr(e,qa(l=(1==t?"Left":2==t?"Middle":"Right")+l,i),i,(function(t){if("string"==typeof t&&(t=or[t]),!t)return!1;var n=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n=t(e,o)!=K}finally{e.state.suppressEdits=!1}return n}))}function Sr(e,t,o){var n=e.getOption("configureMouse"),i=n?n(e,t,o):{};if(null==i.unit){var l=w?o.shiftKey&&o.metaKey:o.altKey;i.unit=l?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||o.shiftKey),null==i.addNew&&(i.addNew=b?o.metaKey:o.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(b?o.altKey:o.ctrlKey)),i}function Vr(e,t,o,n){a?setTimeout(z(ti,e),0):e.curOp.focus=O(M(e));var i,l=Sr(e,o,n),r=e.doc.sel;e.options.dragDrop&&Fe&&!e.isReadOnly()&&"single"==o&&(i=r.contains(t))>-1&&(ct((i=r.ranges[i]).from(),t)<0||t.xRel>0)&&(ct(i.to(),t)>0||t.xRel<0)?Nr(e,n,t,l):$r(e,n,t,l)}function Nr(e,t,o,n){var i=e.display,l=!1,d=Mi(e,(function(t){s&&(i.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:oi(e)),ke(i.wrapper.ownerDocument,"mouseup",d),ke(i.wrapper.ownerDocument,"mousemove",u),ke(i.scroller,"dragstart",c),ke(i.scroller,"drop",d),l||(Ne(t),n.addNew||zl(e.doc,o,null,null,n.extend),s&&!m||a&&9==r?setTimeout((function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()}),20):i.input.focus())})),u=function(e){l=l||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},c=function(){return l=!0};s&&(i.scroller.draggable=!0),e.state.draggingText=d,d.copy=!n.moveOnDrag,be(i.wrapper.ownerDocument,"mouseup",d),be(i.wrapper.ownerDocument,"mousemove",u),be(i.scroller,"dragstart",c),be(i.scroller,"drop",d),e.state.delayingBlurEvent=!0,setTimeout((function(){return i.input.focus()}),20),i.scroller.dragDrop&&i.scroller.dragDrop()}function Er(e,t,o){if("char"==o)return new cl(t,t);if("word"==o)return e.findWordAt(t);if("line"==o)return new cl(ut(t.line,0),gt(e.doc,ut(t.line+1,0)));var n=o(e,t);return new cl(n.from,n.to)}function $r(e,t,o,n){a&&oi(e);var i=e.display,l=e.doc;Ne(t);var r,s,d=l.sel,u=d.ranges;if(n.addNew&&!n.extend?(s=l.sel.contains(o),r=s>-1?u[s]:new cl(o,o)):(r=l.sel.primary(),s=l.sel.primIndex),"rectangle"==n.unit)n.addNew||(r=new cl(o,o)),o=zn(e,t,!0,!0),s=-1;else{var c=Er(e,o,n.unit);r=n.extend?Rl(r,c.anchor,c.head,n.extend):c}n.addNew?-1==s?(s=u.length,Kl(l,pl(e,u.concat([r]),s),{scroll:!1,origin:"*mouse"})):u.length>1&&u[s].empty()&&"char"==n.unit&&!n.extend?(Kl(l,pl(e,u.slice(0,s).concat(u.slice(s+1)),0),{scroll:!1,origin:"*mouse"}),d=l.sel):Wl(l,s,r,Y):(s=0,Kl(l,new ul([r],0),Y),d=l.sel);var p=o;function m(t){if(0!=ct(p,t))if(p=t,"rectangle"==n.unit){for(var i=[],a=e.options.tabSize,u=W(ot(l,o.line).text,o.ch,a),c=W(ot(l,t.line).text,t.ch,a),m=Math.min(u,c),h=Math.max(u,c),f=Math.min(o.line,t.line),v=Math.min(e.lastLine(),Math.max(o.line,t.line));f<=v;f++){var g=ot(l,f).text,y=J(g,m,a);m==h?i.push(new cl(ut(f,y),ut(f,y))):g.length>y&&i.push(new cl(ut(f,y),ut(f,J(g,h,a))))}i.length||i.push(new cl(o,o)),Kl(l,pl(e,d.ranges.slice(0,s).concat(i),s),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b,w=r,k=Er(e,t,n.unit),_=w.anchor;ct(k.anchor,_)>0?(b=k.head,_=ft(w.from(),k.anchor)):(b=k.anchor,_=ht(w.to(),k.head));var C=d.ranges.slice(0);C[s]=Dr(e,new cl(gt(l,_),b)),Kl(l,pl(e,C,s),Y)}}var h=i.wrapper.getBoundingClientRect(),f=0;function v(t){var o=++f,a=zn(e,t,!0,"rectangle"==n.unit);if(a)if(0!=ct(a,p)){e.curOp.focus=O(M(e)),m(a);var r=ri(i,l);(a.line>=r.to||a.line<r.from)&&setTimeout(Mi(e,(function(){f==o&&v(t)})),150)}else{var s=t.clientY<h.top?-20:t.clientY>h.bottom?20:0;s&&setTimeout(Mi(e,(function(){f==o&&(i.scroller.scrollTop+=s,v(t))})),50)}}function g(t){e.state.selectingText=!1,f=1/0,t&&(Ne(t),i.input.focus()),ke(i.wrapper.ownerDocument,"mousemove",y),ke(i.wrapper.ownerDocument,"mouseup",b),l.history.lastSelOrigin=null}var y=Mi(e,(function(e){0!==e.buttons&&Te(e)?v(e):g(e)})),b=Mi(e,g);e.state.selectingText=b,be(i.wrapper.ownerDocument,"mousemove",y),be(i.wrapper.ownerDocument,"mouseup",b)}function Dr(e,t){var o=t.anchor,n=t.head,i=ot(e.doc,o.line);if(0==ct(o,n)&&o.sticky==n.sticky)return t;var l=ge(i);if(!l)return t;var a=fe(l,o.ch,o.sticky),r=l[a];if(r.from!=o.ch&&r.to!=o.ch)return t;var s,d=a+(r.from==o.ch==(1!=r.level)?0:1);if(0==d||d==l.length)return t;if(n.line!=o.line)s=(n.line-o.line)*("ltr"==e.doc.direction?1:-1)>0;else{var u=fe(l,n.ch,n.sticky),c=u-a||(n.ch-o.ch)*(1==r.level?-1:1);s=u==d-1||u==d?c<0:c>0}var p=l[d+(s?-1:0)],m=s==(1==p.level),h=m?p.from:p.to,f=m?"after":"before";return o.ch==h&&o.sticky==f?t:new cl(new ut(o.line,h,f),n)}function Br(e,t,o,n){var i,l;if(t.touches)i=t.touches[0].clientX,l=t.touches[0].clientY;else try{i=t.clientX,l=t.clientY}catch(u){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&Ne(t);var a=e.display,r=a.lineDiv.getBoundingClientRect();if(l>r.bottom||!Se(e,o))return $e(t);l-=r.top-a.viewOffset;for(var s=0;s<e.display.gutterSpecs.length;++s){var d=a.gutters.childNodes[s];if(d&&d.getBoundingClientRect().right>=i)return _e(e,o,e,rt(e.doc,l),e.display.gutterSpecs[s].className,t),$e(t)}}function Tr(e,t){return Br(e,t,"gutterClick",!0)}function Or(e,t){Yo(e.display,t)||Ir(e,t)||Ce(e,t,"contextmenu")||x||e.display.input.onContextMenu(t)}function Ir(e,t){return!!Se(e,"gutterContextMenu")&&Br(e,t,"gutterContextMenu",!1)}function Fr(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),yn(e)}kr.prototype.compare=function(e,t,o){return this.time+wr>e&&0==ct(t,this.pos)&&o==this.button};var Lr={toString:function(){return"CodeMirror.Init"}},Pr={},Mr={};function Ar(e){var t=e.optionHandlers;function o(o,n,i,l){e.defaults[o]=n,i&&(t[o]=l?function(e,t,o){o!=Lr&&i(e,t,o)}:i)}e.defineOption=o,e.Init=Lr,o("value","",(function(e,t){return e.setValue(t)}),!0),o("mode",null,(function(e,t){e.doc.modeOption=t,bl(e)}),!0),o("indentUnit",2,bl,!0),o("indentWithTabs",!1),o("smartIndent",!0),o("tabSize",4,(function(e){wl(e),yn(e),Wn(e)}),!0),o("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var o=[],n=e.doc.first;e.doc.iter((function(e){for(var i=0;;){var l=e.text.indexOf(t,i);if(-1==l)break;i=l+t.length,o.push(ut(n,l))}n++}));for(var i=o.length-1;i>=0;i--)da(e.doc,t,o[i],ut(o[i].line,o[i].ch+t.length))}})),o("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,(function(e,t,o){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),o!=Lr&&e.refresh()})),o("specialCharPlaceholder",ko,(function(e){return e.refresh()}),!0),o("electricChars",!0),o("inputStyle",y?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),o("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),o("autocorrect",!1,(function(e,t){return e.getInputField().autocorrect=t}),!0),o("autocapitalize",!1,(function(e,t){return e.getInputField().autocapitalize=t}),!0),o("rtlMoveVisually",!k),o("wholeLineUpdateBefore",!0),o("theme","default",(function(e){Fr(e),nl(e)}),!0),o("keyMap","default",(function(e,t,o){var n=Xa(t),i=o!=Lr&&Xa(o);i&&i.detach&&i.detach(e,n),n.attach&&n.attach(e,i||null)})),o("extraKeys",null),o("configureMouse",null),o("lineWrapping",!1,zr,!0),o("gutters",[],(function(e,t){e.display.gutterSpecs=tl(t,e.options.lineNumbers),nl(e)}),!0),o("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?Mn(e.display)+"px":"0",e.refresh()}),!0),o("coverGutterNextToScrollbar",!1,(function(e){return xi(e)}),!0),o("scrollbarStyle","native",(function(e){Ni(e),xi(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),o("lineNumbers",!1,(function(e,t){e.display.gutterSpecs=tl(e.options.gutters,t),nl(e)}),!0),o("firstLineNumber",1,nl,!0),o("lineNumberFormatter",(function(e){return e}),nl,!0),o("showCursorWhenSelecting",!1,Yn,!0),o("resetSelectionOnContextMenu",!0),o("lineWiseCopyCut",!0),o("pasteLinesPerSelection",!0),o("selectionsMayTouch",!1),o("readOnly",!1,(function(e,t){"nocursor"==t&&(ii(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),o("screenReaderLabel",null,(function(e,t){t=""===t?null:t,e.display.input.screenReaderLabelChanged(t)})),o("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),o("dragDrop",!0,Rr),o("allowDropFileTypes",null),o("cursorBlinkRate",530),o("cursorScrollMargin",0),o("cursorHeight",1,Yn,!0),o("singleCursorHeightPerLine",!0,Yn,!0),o("workTime",100),o("workDelay",100),o("flattenSpans",!0,wl,!0),o("addModeClass",!1,wl,!0),o("pollInterval",100),o("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),o("historyEventDelay",1250),o("viewportMargin",10,(function(e){return e.refresh()}),!0),o("maxHighlightLength",1e4,wl,!0),o("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),o("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),o("autofocus",null),o("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0),o("phrases",null)}function Rr(e,t,o){if(!t!=!(o&&o!=Lr)){var n=e.display.dragFunctions,i=t?be:ke;i(e.display.scroller,"dragstart",n.start),i(e.display.scroller,"dragenter",n.enter),i(e.display.scroller,"dragover",n.over),i(e.display.scroller,"dragleave",n.leave),i(e.display.scroller,"drop",n.drop)}}function zr(e){e.options.lineWrapping?(I(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(N(e.display.wrapper,"CodeMirror-wrap"),mo(e)),Rn(e),Wn(e),yn(e),setTimeout((function(){return xi(e)}),100)}function Ur(e,t){var o=this;if(!(this instanceof Ur))return new Ur(e,t);this.options=t=t?U(t):{},U(Pr,t,!1);var n=t.value;"string"==typeof n?n=new Ea(n,t.mode,null,t.lineSeparator,t.direction):t.mode&&(n.modeOption=t.mode),this.doc=n;var i=new Ur.inputStyles[t.inputStyle](this),l=this.display=new il(e,n,i,t);for(var d in l.wrapper.CodeMirror=this,Fr(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Ni(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new j,keySeq:null,specialChars:null},t.autofocus&&!y&&l.input.focus(),a&&r<11&&setTimeout((function(){return o.display.input.reset(!0)}),20),Wr(this),La(),$i(this),this.curOp.forceUpdate=!0,xl(this,n),t.autofocus&&!y||this.hasFocus()?setTimeout((function(){o.hasFocus()&&!o.state.focused&&ni(o)}),20):ii(this),Mr)Mr.hasOwnProperty(d)&&Mr[d](this,t[d],Lr);el(this),t.finishInit&&t.finishInit(this);for(var u=0;u<jr.length;++u)jr[u](this);Di(this),s&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(l.lineDiv).textRendering&&(l.lineDiv.style.textRendering="auto")}function Wr(e){var t=e.display;be(t.scroller,"mousedown",Mi(e,Cr)),be(t.scroller,"dblclick",a&&r<11?Mi(e,(function(t){if(!Ce(e,t)){var o=zn(e,t);if(o&&!Tr(e,t)&&!Yo(e.display,t)){Ne(t);var n=e.findWordAt(o);zl(e.doc,n.anchor,n.head)}}})):function(t){return Ce(e,t)||Ne(t)}),be(t.scroller,"contextmenu",(function(t){return Or(e,t)})),be(t.input.getField(),"contextmenu",(function(o){t.scroller.contains(o.target)||Or(e,o)}));var o,n={end:0};function i(){t.activeTouch&&(o=setTimeout((function(){return t.activeTouch=null}),1e3),(n=t.activeTouch).end=+new Date)}function l(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function s(e,t){if(null==t.left)return!0;var o=t.left-e.left,n=t.top-e.top;return o*o+n*n>400}be(t.scroller,"touchstart",(function(i){if(!Ce(e,i)&&!l(i)&&!Tr(e,i)){t.input.ensurePolled(),clearTimeout(o);var a=+new Date;t.activeTouch={start:a,moved:!1,prev:a-n.end<=300?n:null},1==i.touches.length&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}})),be(t.scroller,"touchmove",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),be(t.scroller,"touchend",(function(o){var n=t.activeTouch;if(n&&!Yo(t,o)&&null!=n.left&&!n.moved&&new Date-n.start<300){var l,a=e.coordsChar(t.activeTouch,"page");l=!n.prev||s(n,n.prev)?new cl(a,a):!n.prev.prev||s(n,n.prev.prev)?e.findWordAt(a):new cl(ut(a.line,0),gt(e.doc,ut(a.line+1,0))),e.setSelection(l.anchor,l.head),e.focus(),Ne(o)}i()})),be(t.scroller,"touchcancel",i),be(t.scroller,"scroll",(function(){t.scroller.clientHeight&&(yi(e,t.scroller.scrollTop),wi(e,t.scroller.scrollLeft,!0),_e(e,"scroll",e))})),be(t.scroller,"mousewheel",(function(t){return dl(e,t)})),be(t.scroller,"DOMMouseScroll",(function(t){return dl(e,t)})),be(t.wrapper,"scroll",(function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){Ce(e,t)||De(t)},over:function(t){Ce(e,t)||(Ta(e,t),De(t))},start:function(t){return Ba(e,t)},drop:Mi(e,Da),leave:function(t){Ce(e,t)||Oa(e)}};var d=t.input.getField();be(d,"keyup",(function(t){return vr.call(e,t)})),be(d,"keydown",Mi(e,hr)),be(d,"keypress",Mi(e,gr)),be(d,"focus",(function(t){return ni(e,t)})),be(d,"blur",(function(t){return ii(e,t)}))}Ur.defaults=Pr,Ur.optionHandlers=Mr;var jr=[];function Hr(e,t,o,n){var i,l=e.doc;null==o&&(o="add"),"smart"==o&&(l.mode.indent?i=xt(e,t).state:o="prev");var a=e.options.tabSize,r=ot(l,t),s=W(r.text,null,a);r.stateAfter&&(r.stateAfter=null);var d,u=r.text.match(/^\s*/)[0];if(n||/\S/.test(r.text)){if("smart"==o&&((d=l.mode.indent(i,r.text.slice(u.length),r.text))==K||d>150)){if(!n)return;o="prev"}}else d=0,o="not";"prev"==o?d=t>l.first?W(ot(l,t-1).text,null,a):0:"add"==o?d=s+e.options.indentUnit:"subtract"==o?d=s-e.options.indentUnit:"number"==typeof o&&(d=s+o),d=Math.max(0,d);var c="",p=0;if(e.options.indentWithTabs)for(var m=Math.floor(d/a);m;--m)p+=a,c+="\t";if(p<d&&(c+=Z(d-p)),c!=u)return da(l,c,ut(t,0),ut(t,u.length),"+input"),r.stateAfter=null,!0;for(var h=0;h<l.sel.ranges.length;h++){var f=l.sel.ranges[h];if(f.head.line==t&&f.head.ch<u.length){var v=ut(t,u.length);Wl(l,h,new cl(v,v));break}}}Ur.defineInitHook=function(e){return jr.push(e)};var Gr=null;function Kr(e){Gr=e}function qr(e,t,o,n,i){var l=e.doc;e.display.shift=!1,n||(n=l.sel);var a=+new Date-200,r="paste"==i||e.state.pasteIncoming>a,s=Ae(t),d=null;if(r&&n.ranges.length>1)if(Gr&&Gr.text.join("\n")==t){if(n.ranges.length%Gr.text.length==0){d=[];for(var u=0;u<Gr.text.length;u++)d.push(l.splitLines(Gr.text[u]))}}else s.length==n.ranges.length&&e.options.pasteLinesPerSelection&&(d=te(s,(function(e){return[e]})));for(var c=e.curOp.updateInput,p=n.ranges.length-1;p>=0;p--){var m=n.ranges[p],h=m.from(),f=m.to();m.empty()&&(o&&o>0?h=ut(h.line,h.ch-o):e.state.overwrite&&!r?f=ut(f.line,Math.min(ot(l,f.line).text.length,f.ch+ee(s).length)):r&&Gr&&Gr.lineWise&&Gr.text.join("\n")==s.join("\n")&&(h=f=ut(h.line,0)));var v={from:h,to:f,text:d?d[p%d.length]:s,origin:i||(r?"paste":e.state.cutIncoming>a?"cut":"+input")};na(e.doc,v),Io(e,"inputRead",e,v)}t&&!r&&Xr(e,t),mi(e),e.curOp.updateInput<2&&(e.curOp.updateInput=c),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Yr(e,t){var o=e.clipboardData&&e.clipboardData.getData("Text");if(o)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||!t.hasFocus()||Pi(t,(function(){return qr(t,o,0,null,"paste")})),!0}function Xr(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var o=e.doc.sel,n=o.ranges.length-1;n>=0;n--){var i=o.ranges[n];if(!(i.head.ch>100||n&&o.ranges[n-1].head.line==i.head.line)){var l=e.getModeAt(i.head),a=!1;if(l.electricChars){for(var r=0;r<l.electricChars.length;r++)if(t.indexOf(l.electricChars.charAt(r))>-1){a=Hr(e,i.head.line,"smart");break}}else l.electricInput&&l.electricInput.test(ot(e.doc,i.head.line).text.slice(0,i.head.ch))&&(a=Hr(e,i.head.line,"smart"));a&&Io(e,"electricInput",e,i.head.line)}}}function Jr(e){for(var t=[],o=[],n=0;n<e.doc.sel.ranges.length;n++){var i=e.doc.sel.ranges[n].head.line,l={anchor:ut(i,0),head:ut(i+1,0)};o.push(l),t.push(e.getRange(l.anchor,l.head))}return{text:t,ranges:o}}function Qr(e,t,o,n){e.setAttribute("autocorrect",o?"on":"off"),e.setAttribute("autocapitalize",n?"on":"off"),e.setAttribute("spellcheck",!!t)}function Zr(){var e=D("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=D("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return s?e.style.width="1000px":e.setAttribute("wrap","off"),v&&(e.style.border="1px solid black"),t}function es(e){var t=e.optionHandlers,o=e.helpers={};e.prototype={constructor:e,focus:function(){R(this).focus(),this.display.input.focus()},setOption:function(e,o){var n=this.options,i=n[e];n[e]==o&&"mode"!=e||(n[e]=o,t.hasOwnProperty(e)&&Mi(this,t[e])(this,o,i),_e(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Xa(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,o=0;o<t.length;++o)if(t[o]==e||t[o].name==e)return t.splice(o,1),!0},addOverlay:Ai((function(t,o){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");oe(this.state.overlays,{mode:n,modeSpec:t,opaque:o&&o.opaque,priority:o&&o.priority||0},(function(e){return e.priority})),this.state.modeGen++,Wn(this)})),removeOverlay:Ai((function(e){for(var t=this.state.overlays,o=0;o<t.length;++o){var n=t[o].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(o,1),this.state.modeGen++,void Wn(this)}})),indentLine:Ai((function(e,t,o){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),st(this.doc,e)&&Hr(this,e,t,o)})),indentSelection:Ai((function(e){for(var t=this.doc.sel.ranges,o=-1,n=0;n<t.length;n++){var i=t[n];if(i.empty())i.head.line>o&&(Hr(this,i.head.line,e,!0),o=i.head.line,n==this.doc.sel.primIndex&&mi(this));else{var l=i.from(),a=i.to(),r=Math.max(o,l.line);o=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var s=r;s<o;++s)Hr(this,s,e);var d=this.doc.sel.ranges;0==l.ch&&t.length==d.length&&d[n].from().ch>0&&Wl(this.doc,n,new cl(l,d[n].to()),q)}}})),getTokenAt:function(e,t){return $t(this,e,t)},getLineTokens:function(e,t){return $t(this,ut(e),t,!0)},getTokenTypeAt:function(e){e=gt(this.doc,e);var t,o=Ct(this,ot(this.doc,e.line)),n=0,i=(o.length-1)/2,l=e.ch;if(0==l)t=o[2];else for(;;){var a=n+i>>1;if((a?o[2*a-1]:0)>=l)i=a;else{if(!(o[2*a+1]<l)){t=o[2*a+2];break}n=a+1}}var r=t?t.indexOf("overlay "):-1;return r<0?t:0==r?null:t.slice(0,r-1)},getModeAt:function(t){var o=this.doc.mode;return o.innerMode?e.innerMode(o,this.getTokenAt(t).state).mode:o},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!o.hasOwnProperty(t))return n;var i=o[t],l=this.getModeAt(e);if("string"==typeof l[t])i[l[t]]&&n.push(i[l[t]]);else if(l[t])for(var a=0;a<l[t].length;a++){var r=i[l[t][a]];r&&n.push(r)}else l.helperType&&i[l.helperType]?n.push(i[l.helperType]):i[l.name]&&n.push(i[l.name]);for(var s=0;s<i._global.length;s++){var d=i._global[s];d.pred(l,this)&&-1==H(n,d.val)&&n.push(d.val)}return n},getStateAfter:function(e,t){var o=this.doc;return xt(this,(e=vt(o,null==e?o.first+o.size-1:e))+1,t).state},cursorCoords:function(e,t){var o=this.doc.sel.primary();return Sn(this,null==e?o.head:"object"==typeof e?gt(this.doc,e):e?o.from():o.to(),t||"page")},charCoords:function(e,t){return xn(this,gt(this.doc,e),t||"page")},coordsChar:function(e,t){return En(this,(e=Cn(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=Cn(this,{top:e,left:0},t||"page").top,rt(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,o){var n,i=!1;if("number"==typeof e){var l=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>l&&(e=l,i=!0),n=ot(this.doc,e)}else n=e;return _n(this,n,{top:0,left:0},t||"page",o||i).top+(i?this.doc.height-co(n):0)},defaultTextHeight:function(){return Fn(this.display)},defaultCharWidth:function(){return Ln(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,o,n,i){var l=this.display,a=(e=Sn(this,gt(this.doc,e))).bottom,r=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),l.sizer.appendChild(t),"over"==n)a=e.top;else if("above"==n||"near"==n){var s=Math.max(l.wrapper.clientHeight,this.doc.height),d=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>s)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=s&&(a=e.bottom),r+t.offsetWidth>d&&(r=d-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==i?(r=l.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?r=0:"middle"==i&&(r=(l.sizer.clientWidth-t.offsetWidth)/2),t.style.left=r+"px"),o&&ui(this,{left:r,top:a,right:r+t.offsetWidth,bottom:a+t.offsetHeight})},triggerOnKeyDown:Ai(hr),triggerOnKeyPress:Ai(gr),triggerOnKeyUp:vr,triggerOnMouseDown:Ai(Cr),execCommand:function(e){if(or.hasOwnProperty(e))return or[e].call(null,this)},triggerElectric:Ai((function(e){Xr(this,e)})),findPosH:function(e,t,o,n){var i=1;t<0&&(i=-1,t=-t);for(var l=gt(this.doc,e),a=0;a<t&&!(l=ts(this.doc,l,i,o,n)).hitSide;++a);return l},moveH:Ai((function(e,t){var o=this;this.extendSelectionsBy((function(n){return o.display.shift||o.doc.extend||n.empty()?ts(o.doc,n.head,e,t,o.options.rtlMoveVisually):e<0?n.from():n.to()}),X)})),deleteH:Ai((function(e,t){var o=this.doc.sel,n=this.doc;o.somethingSelected()?n.replaceSelection("",null,"+delete"):Ja(this,(function(o){var i=ts(n,o.head,e,t,!1);return e<0?{from:i,to:o.head}:{from:o.head,to:i}}))})),findPosV:function(e,t,o,n){var i=1,l=n;t<0&&(i=-1,t=-t);for(var a=gt(this.doc,e),r=0;r<t;++r){var s=Sn(this,a,"div");if(null==l?l=s.left:s.left=l,(a=os(this,s,i,o)).hitSide)break}return a},moveV:Ai((function(e,t){var o=this,n=this.doc,i=[],l=!this.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy((function(a){if(l)return e<0?a.from():a.to();var r=Sn(o,a.head,"div");null!=a.goalColumn&&(r.left=a.goalColumn),i.push(r.left);var s=os(o,r,e,t);return"page"==t&&a==n.sel.primary()&&pi(o,xn(o,s,"div").top-r.top),s}),X),i.length)for(var a=0;a<n.sel.ranges.length;a++)n.sel.ranges[a].goalColumn=i[a]})),findWordAt:function(e){var t=ot(this.doc,e.line).text,o=e.ch,n=e.ch;if(t){var i=this.getHelper(e,"wordChars");"before"!=e.sticky&&n!=t.length||!o?++n:--o;for(var l=t.charAt(o),a=re(l,i)?function(e){return re(e,i)}:/\s/.test(l)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!re(e)};o>0&&a(t.charAt(o-1));)--o;for(;n<t.length&&a(t.charAt(n));)++n}return new cl(ut(e.line,o),ut(e.line,n))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?I(this.display.cursorDiv,"CodeMirror-overwrite"):N(this.display.cursorDiv,"CodeMirror-overwrite"),_e(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==O(M(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Ai((function(e,t){hi(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Zo(this)-this.display.barHeight,width:e.scrollWidth-Zo(this)-this.display.barWidth,clientHeight:tn(this),clientWidth:en(this)}},scrollIntoView:Ai((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:ut(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?fi(this,e):gi(this,e.from,e.to,e.margin)})),setSize:Ai((function(e,t){var o=this,n=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=n(e)),null!=t&&(this.display.wrapper.style.height=n(t)),this.options.lineWrapping&&gn(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){jn(o,i,"widget");break}++i})),this.curOp.forceUpdate=!0,_e(this,"refresh",this)})),operation:function(e){return Pi(this,e)},startOperation:function(){return $i(this)},endOperation:function(){return Di(this)},refresh:Ai((function(){var e=this.display.cachedTextHeight;Wn(this),this.curOp.forceUpdate=!0,yn(this),hi(this,this.doc.scrollLeft,this.doc.scrollTop),Ji(this.display),(null==e||Math.abs(e-Fn(this.display))>.5||this.options.lineWrapping)&&Rn(this),_e(this,"refresh",this)})),swapDoc:Ai((function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),xl(this,e),yn(this),this.display.input.reset(),hi(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,Io(this,"swapDoc",this,t),t})),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ve(e),e.registerHelper=function(t,n,i){o.hasOwnProperty(t)||(o[t]=e[t]={_global:[]}),o[t][n]=i},e.registerGlobalHelper=function(t,n,i,l){e.registerHelper(t,n,l),o[t]._global.push({pred:i,val:l})}}function ts(e,t,o,n,i){var l=t,a=o,r=ot(e,t.line),s=i&&"rtl"==e.direction?-o:o;function d(){var o=t.line+s;return!(o<e.first||o>=e.first+e.size)&&(t=new ut(o,t.ch,t.sticky),r=ot(e,o))}function u(l){var a;if("codepoint"==n){var u=r.text.charCodeAt(t.ch+(o>0?0:-1));if(isNaN(u))a=null;else{var c=o>0?u>=55296&&u<56320:u>=56320&&u<57343;a=new ut(t.line,Math.max(0,Math.min(r.text.length,t.ch+o*(c?2:1))),-o)}}else a=i?tr(e.cm,r,t,o):Za(r,t,o);if(null==a){if(l||!d())return!1;t=er(i,e.cm,r,t.line,s)}else t=a;return!0}if("char"==n||"codepoint"==n)u();else if("column"==n)u(!0);else if("word"==n||"group"==n)for(var c=null,p="group"==n,m=e.cm&&e.cm.getHelper(t,"wordChars"),h=!0;!(o<0)||u(!h);h=!1){var f=r.text.charAt(t.ch)||"\n",v=re(f,m)?"w":p&&"\n"==f?"n":!p||/\s/.test(f)?null:"p";if(!p||h||v||(v="s"),c&&c!=v){o<0&&(o=1,u(),t.sticky="after");break}if(v&&(c=v),o>0&&!u(!h))break}var g=Zl(e,t,l,a,!0);return pt(l,g)&&(g.hitSide=!0),g}function os(e,t,o,n){var i,l,a=e.doc,r=t.left;if("page"==n){var s=Math.min(e.display.wrapper.clientHeight,R(e).innerHeight||a(e).documentElement.clientHeight),d=Math.max(s-.5*Fn(e.display),3);i=(o>0?t.bottom:t.top)+o*d}else"line"==n&&(i=o>0?t.bottom+3:t.top-3);for(;(l=En(e,r,i)).outside;){if(o<0?i<=0:i>=a.height){l.hitSide=!0;break}i+=5*o}return l}var ns=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new j,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function is(e,t){var o=rn(e,t.line);if(!o||o.hidden)return null;var n=ot(e.doc,t.line),i=nn(o,n,t.line),l=ge(n,e.doc.direction),a="left";l&&(a=fe(l,t.ch)%2?"right":"left");var r=pn(i.map,t.ch,a);return r.offset="right"==r.collapse?r.end:r.start,r}function ls(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function as(e,t){return t&&(e.bad=!0),e}function rs(e,t,o,n,i){var l="",a=!1,r=e.doc.lineSeparator(),s=!1;function d(e){return function(t){return t.id==e}}function u(){a&&(l+=r,s&&(l+=r),a=s=!1)}function c(e){e&&(u(),l+=e)}function p(t){if(1==t.nodeType){var o=t.getAttribute("cm-text");if(o)return void c(o);var l,m=t.getAttribute("cm-marker");if(m){var h=e.findMarks(ut(n,0),ut(i+1,0),d(+m));return void(h.length&&(l=h[0].find(0))&&c(nt(e.doc,l.from,l.to).join(r)))}if("false"==t.getAttribute("contenteditable"))return;var f=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;f&&u();for(var v=0;v<t.childNodes.length;v++)p(t.childNodes[v]);/^(pre|p)$/i.test(t.nodeName)&&(s=!0),f&&(a=!0)}else 3==t.nodeType&&c(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;p(t),t!=o;)t=t.nextSibling,s=!1;return l}function ss(e,t,o){var n;if(t==e.display.lineDiv){if(!(n=e.display.lineDiv.childNodes[o]))return as(e.clipPos(ut(e.display.viewTo-1)),!0);t=null,o=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var l=e.display.view[i];if(l.node==n)return ds(l,t,o)}}function ds(e,t,o){var n=e.text.firstChild,i=!1;if(!t||!T(n,t))return as(ut(at(e.line),0),!0);if(t==n&&(i=!0,t=n.childNodes[o],o=0,!t)){var l=e.rest?ee(e.rest):e.line;return as(ut(at(l),l.text.length),i)}var a=3==t.nodeType?t:null,r=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,o&&(o=a.nodeValue.length));r.parentNode!=n;)r=r.parentNode;var s=e.measure,d=s.maps;function u(t,o,n){for(var i=-1;i<(d?d.length:0);i++)for(var l=i<0?s.map:d[i],a=0;a<l.length;a+=3){var r=l[a+2];if(r==t||r==o){var u=at(i<0?e.line:e.rest[i]),c=l[a]+n;return(n<0||r!=t)&&(c=l[a+(n?1:0)]),ut(u,c)}}}var c=u(a,r,o);if(c)return as(c,i);for(var p=r.nextSibling,m=a?a.nodeValue.length-o:0;p;p=p.nextSibling){if(c=u(p,p.firstChild,0))return as(ut(c.line,c.ch-m),i);m+=p.textContent.length}for(var h=r.previousSibling,f=o;h;h=h.previousSibling){if(c=u(h,h.firstChild,-1))return as(ut(c.line,c.ch+f),i);f+=h.textContent.length}}ns.prototype.init=function(e){var t=this,o=this,n=o.cm,i=o.div=e.lineDiv;function l(e){for(var t=e.target;t;t=t.parentNode){if(t==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function a(e){if(l(e)&&!Ce(n,e)){if(n.somethingSelected())Kr({lineWise:!1,text:n.getSelections()}),"cut"==e.type&&n.replaceSelection("",null,"cut");else{if(!n.options.lineWiseCopyCut)return;var t=Jr(n);Kr({lineWise:!0,text:t.text}),"cut"==e.type&&n.operation((function(){n.setSelections(t.ranges,0,q),n.replaceSelection("",null,"cut")}))}if(e.clipboardData){e.clipboardData.clearData();var a=Gr.text.join("\n");if(e.clipboardData.setData("Text",a),e.clipboardData.getData("Text")==a)return void e.preventDefault()}var r=Zr(),s=r.firstChild;Qr(s),n.display.lineSpace.insertBefore(r,n.display.lineSpace.firstChild),s.value=Gr.text.join("\n");var d=O(A(i));L(s),setTimeout((function(){n.display.lineSpace.removeChild(r),d.focus(),d==i&&o.showPrimarySelection()}),50)}}i.contentEditable=!0,Qr(i,n.options.spellcheck,n.options.autocorrect,n.options.autocapitalize),be(i,"paste",(function(e){!l(e)||Ce(n,e)||Yr(e,n)||r<=11&&setTimeout(Mi(n,(function(){return t.updateFromDOM()})),20)})),be(i,"compositionstart",(function(e){t.composing={data:e.data,done:!1}})),be(i,"compositionupdate",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),be(i,"compositionend",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),be(i,"touchstart",(function(){return o.forceCompositionEnd()})),be(i,"input",(function(){t.composing||t.readFromDOMSoon()})),be(i,"copy",a),be(i,"cut",a)},ns.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},ns.prototype.prepareSelection=function(){var e=Xn(this.cm,!1);return e.focus=O(A(this.div))==this.div,e},ns.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},ns.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},ns.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),i=n.from(),l=n.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||l.line<t.display.viewFrom)e.removeAllRanges();else{var a=ss(t,e.anchorNode,e.anchorOffset),r=ss(t,e.focusNode,e.focusOffset);if(!a||a.bad||!r||r.bad||0!=ct(ft(a,r),i)||0!=ct(ht(a,r),l)){var s=t.display.view,d=i.line>=t.display.viewFrom&&is(t,i)||{node:s[0].measure.map[2],offset:0},u=l.line<t.display.viewTo&&is(t,l);if(!u){var c=s[s.length-1].measure,p=c.maps?c.maps[c.maps.length-1]:c.map;u={node:p[p.length-1],offset:p[p.length-2]-p[p.length-3]}}if(d&&u){var m,h=e.rangeCount&&e.getRangeAt(0);try{m=V(d.node,d.offset,u.offset,u.node)}catch(Me){}m&&(!o&&t.state.focused?(e.collapse(d.node,d.offset),m.collapsed||(e.removeAllRanges(),e.addRange(m))):(e.removeAllRanges(),e.addRange(m)),h&&null==e.anchorNode?e.addRange(h):o&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},ns.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},ns.prototype.showMultipleSelections=function(e){$(this.cm.display.cursorDiv,e.cursors),$(this.cm.display.selectionDiv,e.selection)},ns.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},ns.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return T(this.div,t)},ns.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&O(A(this.div))==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},ns.prototype.blur=function(){this.div.blur()},ns.prototype.getField=function(){return this.div},ns.prototype.supportsTouch=function(){return!0},ns.prototype.receivedFocus=function(){var e=this,t=this;function o(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,o))}this.selectionInEditor()?setTimeout((function(){return e.pollSelection()}),20):Pi(this.cm,(function(){return t.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,o)},ns.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},ns.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(g&&u&&this.cm.display.gutterSpecs.length&&ls(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var o=ss(t,e.anchorNode,e.anchorOffset),n=ss(t,e.focusNode,e.focusOffset);o&&n&&Pi(t,(function(){Kl(t.doc,ml(o,n),q),(o.bad||n.bad)&&(t.curOp.selectionChanged=!0)}))}}},ns.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,o,n=this.cm,i=n.display,l=n.doc.sel.primary(),a=l.from(),r=l.to();if(0==a.ch&&a.line>n.firstLine()&&(a=ut(a.line-1,ot(n.doc,a.line-1).length)),r.ch==ot(n.doc,r.line).text.length&&r.line<n.lastLine()&&(r=ut(r.line+1,0)),a.line<i.viewFrom||r.line>i.viewTo-1)return!1;a.line==i.viewFrom||0==(e=Un(n,a.line))?(t=at(i.view[0].line),o=i.view[0].node):(t=at(i.view[e].line),o=i.view[e-1].node.nextSibling);var s,d,u=Un(n,r.line);if(u==i.view.length-1?(s=i.viewTo-1,d=i.lineDiv.lastChild):(s=at(i.view[u+1].line)-1,d=i.view[u+1].node.previousSibling),!o)return!1;for(var c=n.doc.splitLines(rs(n,o,d,t,s)),p=nt(n.doc,ut(t,0),ut(s,ot(n.doc,s).text.length));c.length>1&&p.length>1;)if(ee(c)==ee(p))c.pop(),p.pop(),s--;else{if(c[0]!=p[0])break;c.shift(),p.shift(),t++}for(var m=0,h=0,f=c[0],v=p[0],g=Math.min(f.length,v.length);m<g&&f.charCodeAt(m)==v.charCodeAt(m);)++m;for(var y=ee(c),b=ee(p),w=Math.min(y.length-(1==c.length?m:0),b.length-(1==p.length?m:0));h<w&&y.charCodeAt(y.length-h-1)==b.charCodeAt(b.length-h-1);)++h;if(1==c.length&&1==p.length&&t==a.line)for(;m&&m>a.ch&&y.charCodeAt(y.length-h-1)==b.charCodeAt(b.length-h-1);)m--,h++;c[c.length-1]=y.slice(0,y.length-h).replace(/^\u200b+/,""),c[0]=c[0].slice(m).replace(/\u200b+$/,"");var k=ut(t,m),_=ut(s,p.length?ee(p).length-h:0);return c.length>1||c[0]||ct(k,_)?(da(n.doc,c,k,_,"+input"),!0):void 0},ns.prototype.ensurePolled=function(){this.forceCompositionEnd()},ns.prototype.reset=function(){this.forceCompositionEnd()},ns.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},ns.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},ns.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Pi(this.cm,(function(){return Wn(e.cm)}))},ns.prototype.setUneditable=function(e){e.contentEditable="false"},ns.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Mi(this.cm,qr)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},ns.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},ns.prototype.onContextMenu=function(){},ns.prototype.resetPosition=function(){},ns.prototype.needsContentAttribute=!0;var us=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new j,this.hasSelection=!1,this.composing=null,this.resetting=!1};function cs(e,t){if((t=t?U(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var o=O(A(e));t.autofocus=o==e||null!=e.getAttribute("autofocus")&&o==document.body}function n(){e.value=r.getValue()}var i;if(e.form&&(be(e.form,"submit",n),!t.leaveSubmitMethodAlone)){var l=e.form;i=l.submit;try{var a=l.submit=function(){n(),l.submit=i,l.submit(),l.submit=a}}catch(Me){}}t.finishInit=function(o){o.save=n,o.getTextArea=function(){return e},o.toTextArea=function(){o.toTextArea=isNaN,n(),e.parentNode.removeChild(o.getWrapperElement()),e.style.display="",e.form&&(ke(e.form,"submit",n),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=i))}},e.style.display="none";var r=Ur((function(t){return e.parentNode.insertBefore(t,e.nextSibling)}),t);return r}function ps(e){e.off=ke,e.on=be,e.wheelEventPixels=sl,e.Doc=Ea,e.splitLines=Ae,e.countColumn=W,e.findColumn=J,e.isWordChar=ae,e.Pass=K,e.signal=_e,e.Line=ho,e.changeEnd=hl,e.scrollbarModel=Vi,e.Pos=ut,e.cmpPos=ct,e.modes=je,e.mimeModes=He,e.resolveMode=qe,e.getMode=Ye,e.modeExtensions=Xe,e.extendMode=Je,e.copyState=Qe,e.startState=et,e.innerMode=Ze,e.commands=or,e.keyMap=Wa,e.keyName=Ya,e.isModifierKey=Ka,e.lookupKey=Ga,e.normalizeKeyMap=Ha,e.StringStream=tt,e.SharedTextMarker=_a,e.TextMarker=wa,e.LineWidget=va,e.e_preventDefault=Ne,e.e_stopPropagation=Ee,e.e_stop=De,e.addClass=I,e.contains=T,e.rmClass=N,e.keyNames=Aa}us.prototype.init=function(e){var t=this,o=this,n=this.cm;this.createField(e);var i=this.textarea;function l(e){if(!Ce(n,e)){if(n.somethingSelected())Kr({lineWise:!1,text:n.getSelections()});else{if(!n.options.lineWiseCopyCut)return;var t=Jr(n);Kr({lineWise:!0,text:t.text}),"cut"==e.type?n.setSelections(t.ranges,null,q):(o.prevInput="",i.value=t.text.join("\n"),L(i))}"cut"==e.type&&(n.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),v&&(i.style.width="0px"),be(i,"input",(function(){a&&r>=9&&t.hasSelection&&(t.hasSelection=null),o.poll()})),be(i,"paste",(function(e){Ce(n,e)||Yr(e,n)||(n.state.pasteIncoming=+new Date,o.fastPoll())})),be(i,"cut",l),be(i,"copy",l),be(e.scroller,"paste",(function(t){if(!Yo(e,t)&&!Ce(n,t)){if(!i.dispatchEvent)return n.state.pasteIncoming=+new Date,void o.focus();var l=new Event("paste");l.clipboardData=t.clipboardData,i.dispatchEvent(l)}})),be(e.lineSpace,"selectstart",(function(t){Yo(e,t)||Ne(t)})),be(i,"compositionstart",(function(){var e=n.getCursor("from");o.composing&&o.composing.range.clear(),o.composing={start:e,range:n.markText(e,n.getCursor("to"),{className:"CodeMirror-composing"})}})),be(i,"compositionend",(function(){o.composing&&(o.poll(),o.composing.range.clear(),o.composing=null)}))},us.prototype.createField=function(e){this.wrapper=Zr(),this.textarea=this.wrapper.firstChild;var t=this.cm.options;Qr(this.textarea,t.spellcheck,t.autocorrect,t.autocapitalize)},us.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},us.prototype.prepareSelection=function(){var e=this.cm,t=e.display,o=e.doc,n=Xn(e);if(e.options.moveInputWithCursor){var i=Sn(e,o.sel.primary().head,"div"),l=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+a.top-l.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+a.left-l.left))}return n},us.prototype.showSelection=function(e){var t=this.cm.display;$(t.cursorDiv,e.cursors),$(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},us.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing&&e)){var t=this.cm;if(this.resetting=!0,t.somethingSelected()){this.prevInput="";var o=t.getSelection();this.textarea.value=o,t.state.focused&&L(this.textarea),a&&r>=9&&(this.hasSelection=o)}else e||(this.prevInput=this.textarea.value="",a&&r>=9&&(this.hasSelection=null));this.resetting=!1}},us.prototype.getField=function(){return this.textarea},us.prototype.supportsTouch=function(){return!1},us.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!y||O(A(this.textarea))!=this.textarea))try{this.textarea.focus()}catch(Me){}},us.prototype.blur=function(){this.textarea.blur()},us.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},us.prototype.receivedFocus=function(){this.slowPoll()},us.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},us.prototype.fastPoll=function(){var e=!1,t=this;function o(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,o))}t.pollingFast=!0,t.polling.set(20,o)},us.prototype.poll=function(){var e=this,t=this.cm,o=this.textarea,n=this.prevInput;if(this.contextMenuPending||this.resetting||!t.state.focused||Re(o)&&!n&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=o.value;if(i==n&&!t.somethingSelected())return!1;if(a&&r>=9&&this.hasSelection===i||b&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var l=i.charCodeAt(0);if(8203!=l||n||(n="​"),8666==l)return this.reset(),this.cm.execCommand("undo")}for(var s=0,d=Math.min(n.length,i.length);s<d&&n.charCodeAt(s)==i.charCodeAt(s);)++s;return Pi(t,(function(){qr(t,i.slice(s),n.length-s,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?o.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},us.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},us.prototype.onKeyPress=function(){a&&r>=9&&(this.hasSelection=null),this.fastPoll()},us.prototype.onContextMenu=function(e){var t=this,o=t.cm,n=o.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var l=zn(o,e),d=n.scroller.scrollTop;if(l&&!p){o.options.resetSelectionOnContextMenu&&-1==o.doc.sel.contains(l)&&Mi(o,Kl)(o.doc,ml(l),q);var u,c=i.style.cssText,m=t.wrapper.style.cssText,h=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-h.top-5)+"px; left: "+(e.clientX-h.left-5)+"px;\n      z-index: 1000; background: "+(a?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",s&&(u=i.ownerDocument.defaultView.scrollY),n.input.focus(),s&&i.ownerDocument.defaultView.scrollTo(null,u),n.input.reset(),o.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=g,n.selForContextMenu=o.doc.sel,clearTimeout(n.detectingSelectAll),a&&r>=9&&v(),x){De(e);var f=function(){ke(window,"mouseup",f),setTimeout(g,20)};be(window,"mouseup",f)}else setTimeout(g,50)}function v(){if(null!=i.selectionStart){var e=o.somethingSelected(),l="​"+(e?i.value:"");i.value="⇚",i.value=l,t.prevInput=e?"":"​",i.selectionStart=1,i.selectionEnd=l.length,n.selForContextMenu=o.doc.sel}}function g(){if(t.contextMenuPending==g&&(t.contextMenuPending=!1,t.wrapper.style.cssText=m,i.style.cssText=c,a&&r<9&&n.scrollbars.setScrollTop(n.scroller.scrollTop=d),null!=i.selectionStart)){(!a||a&&r<9)&&v();var e=0,l=function(){n.selForContextMenu==o.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"​"==t.prevInput?Mi(o,ta)(o):e++<10?n.detectingSelectAll=setTimeout(l,500):(n.selForContextMenu=null,n.input.reset())};n.detectingSelectAll=setTimeout(l,200)}}},us.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},us.prototype.setUneditable=function(){},us.prototype.needsContentAttribute=!1,Ar(Ur),es(Ur);var ms="iter insert remove copy getEditor constructor".split(" ");for(var hs in Ea.prototype)Ea.prototype.hasOwnProperty(hs)&&H(ms,hs)<0&&(Ur.prototype[hs]=function(e){return function(){return e.apply(this.doc,arguments)}}(Ea.prototype[hs]));return Ve(Ea),Ur.inputStyles={textarea:us,contenteditable:ns},Ur.defineMode=function(e){Ur.defaults.mode||"null"==e||(Ur.defaults.mode=e),Ge.apply(this,arguments)},Ur.defineMIME=Ke,Ur.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),Ur.defineMIME("text/plain","null"),Ur.defineExtension=function(e,t){Ur.prototype[e]=t},Ur.defineDocExtension=function(e,t){Ea.prototype[e]=t},Ur.fromTextArea=cs,ps(Ur),Ur.version="5.65.17",Ur}()}(codemirror$1);var CodeMirror=codemirror$1.exports,codemirror="",CodeMirror2;(CodeMirror2=codemirror$1.exports).defineMode("javascript",(function(e,t){var o,n,i=e.indentUnit,l=t.statementIndent,a=t.jsonld,r=t.json||a,s=!1!==t.trackScope,d=t.typescript,u=t.wordCharacters||/[\w$\xa1-\uffff]/,c=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),o=e("keyword b"),n=e("keyword c"),i=e("keyword d"),l=e("operator"),a={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:o,do:o,try:o,finally:o,return:i,break:i,continue:i,new:e("new"),delete:n,void:n,throw:n,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:l,typeof:l,instanceof:l,true:a,false:a,null:a,undefined:a,NaN:a,Infinity:a,this:e("this"),class:e("class"),super:e("atom"),yield:n,export:e("export"),import:e("import"),extends:n,await:n}}(),p=/[+\-*&%=<>!?|~^@]/,m=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function h(e){for(var t,o=!1,n=!1;null!=(t=e.next());){if(!o){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}o=!o&&"\\"==t}}function f(e,t,i){return o=e,n=i,t}function v(e,t){var o=e.next();if('"'==o||"'"==o)return t.tokenize=g(o),t.tokenize(e,t);if("."==o&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return f("number","number");if("."==o&&e.match(".."))return f("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(o))return f(o);if("="==o&&e.eat(">"))return f("=>","operator");if("0"==o&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return f("number","number");if(/\d/.test(o))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),f("number","number");if("/"==o)return e.eat("*")?(t.tokenize=y,y(e,t)):e.eat("/")?(e.skipToEnd(),f("comment","comment")):nt(e,t,1)?(h(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),f("regexp","string-2")):(e.eat("="),f("operator","operator",e.current()));if("`"==o)return t.tokenize=b,b(e,t);if("#"==o&&"!"==e.peek())return e.skipToEnd(),f("meta","meta");if("#"==o&&e.eatWhile(u))return f("variable","property");if("<"==o&&e.match("!--")||"-"==o&&e.match("->")&&!/\S/.test(e.string.slice(0,e.start)))return e.skipToEnd(),f("comment","comment");if(p.test(o))return">"==o&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=o&&"="!=o||e.eat("="):/[<>*+\-|&?]/.test(o)&&(e.eat(o),">"==o&&e.eat(o))),"?"==o&&e.eat(".")?f("."):f("operator","operator",e.current());if(u.test(o)){e.eatWhile(u);var n=e.current();if("."!=t.lastType){if(c.propertyIsEnumerable(n)){var i=c[n];return f(i.type,i.style,n)}if("async"==n&&e.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return f("async","keyword",n)}return f("variable","variable",n)}}function g(e){return function(t,o){var n,i=!1;if(a&&"@"==t.peek()&&t.match(m))return o.tokenize=v,f("jsonld-keyword","meta");for(;null!=(n=t.next())&&(n!=e||i);)i=!i&&"\\"==n;return i||(o.tokenize=v),f("string","string")}}function y(e,t){for(var o,n=!1;o=e.next();){if("/"==o&&n){t.tokenize=v;break}n="*"==o}return f("comment","comment")}function b(e,t){for(var o,n=!1;null!=(o=e.next());){if(!n&&("`"==o||"$"==o&&e.eat("{"))){t.tokenize=v;break}n=!n&&"\\"==o}return f("quasi","string-2",e.current())}var w="([{}])";function k(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var o=e.string.indexOf("=>",e.start);if(!(o<0)){if(d){var n=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,o));n&&(o=n.index)}for(var i=0,l=!1,a=o-1;a>=0;--a){var r=e.string.charAt(a),s=w.indexOf(r);if(s>=0&&s<3){if(!i){++a;break}if(0==--i){"("==r&&(l=!0);break}}else if(s>=3&&s<6)++i;else if(u.test(r))l=!0;else if(/["'\/`]/.test(r))for(;;--a){if(0==a)return;if(e.string.charAt(a-1)==r&&"\\"!=e.string.charAt(a-2)){a--;break}}else if(l&&!i){++a;break}}l&&!i&&(t.fatArrowAt=a)}}var _={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function C(e,t,o,n,i,l){this.indented=e,this.column=t,this.type=o,this.prev=i,this.info=l,null!=n&&(this.align=n)}function x(e,t){if(!s)return!1;for(var o=e.localVars;o;o=o.next)if(o.name==t)return!0;for(var n=e.context;n;n=n.prev)for(o=n.vars;o;o=o.next)if(o.name==t)return!0}function S(e,t,o,n,i){var l=e.cc;for(V.state=e,V.stream=i,V.marked=null,V.cc=l,V.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((l.length?l.pop():r?j:U)(o,n)){for(;l.length&&l[l.length-1].lex;)l.pop()();return V.marked?V.marked:"variable"==o&&x(e,n)?"variable-2":t}}var V={state:null,column:null,marked:null,cc:null};function N(){for(var e=arguments.length-1;e>=0;e--)V.cc.push(arguments[e])}function E(){return N.apply(null,arguments),!0}function $(e,t){for(var o=t;o;o=o.next)if(o.name==e)return!0;return!1}function D(e){var o=V.state;if(V.marked="def",s){if(o.context)if("var"==o.lexical.info&&o.context&&o.context.block){var n=B(e,o.context);if(null!=n)return void(o.context=n)}else if(!$(e,o.localVars))return void(o.localVars=new I(e,o.localVars));t.globalVars&&!$(e,o.globalVars)&&(o.globalVars=new I(e,o.globalVars))}}function B(e,t){if(t){if(t.block){var o=B(e,t.prev);return o?o==t.prev?t:new O(o,t.vars,!0):null}return $(e,t.vars)?t:new O(t.prev,new I(e,t.vars),!1)}return null}function T(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function O(e,t,o){this.prev=e,this.vars=t,this.block=o}function I(e,t){this.name=e,this.next=t}var F=new I("this",new I("arguments",null));function L(){V.state.context=new O(V.state.context,V.state.localVars,!1),V.state.localVars=F}function P(){V.state.context=new O(V.state.context,V.state.localVars,!0),V.state.localVars=null}function M(){V.state.localVars=V.state.context.vars,V.state.context=V.state.context.prev}function A(e,t){var o=function(){var o=V.state,n=o.indented;if("stat"==o.lexical.type)n=o.lexical.indented;else for(var i=o.lexical;i&&")"==i.type&&i.align;i=i.prev)n=i.indented;o.lexical=new C(n,V.stream.column(),e,null,o.lexical,t)};return o.lex=!0,o}function R(){var e=V.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function z(e){function t(o){return o==e?E():";"==e||"}"==o||")"==o||"]"==o?N():E(t)}return t}function U(e,t){return"var"==e?E(A("vardef",t),Ne,z(";"),R):"keyword a"==e?E(A("form"),G,U,R):"keyword b"==e?E(A("form"),U,R):"keyword d"==e?V.stream.match(/^\s*$/,!1)?E():E(A("stat"),q,z(";"),R):"debugger"==e?E(z(";")):"{"==e?E(A("}"),P,ce,R,M):";"==e?E():"if"==e?("else"==V.state.lexical.info&&V.state.cc[V.state.cc.length-1]==R&&V.state.cc.pop()(),E(A("form"),G,U,R,Oe)):"function"==e?E(Pe):"for"==e?E(A("form"),P,Ie,U,M,R):"class"==e||d&&"interface"==t?(V.marked="keyword",E(A("form","class"==e?e:t),Ue,R)):"variable"==e?d&&"declare"==t?(V.marked="keyword",E(U)):d&&("module"==t||"enum"==t||"type"==t)&&V.stream.match(/^\s*\w/,!1)?(V.marked="keyword","enum"==t?E(et):"type"==t?E(Ae,z("operator"),ve,z(";")):E(A("form"),Ee,z("{"),A("}"),ce,R,R)):d&&"namespace"==t?(V.marked="keyword",E(A("form"),j,U,R)):d&&"abstract"==t?(V.marked="keyword",E(U)):E(A("stat"),ie):"switch"==e?E(A("form"),G,z("{"),A("}","switch"),P,ce,R,R,M):"case"==e?E(j,z(":")):"default"==e?E(z(":")):"catch"==e?E(A("form"),L,W,U,R,M):"export"==e?E(A("stat"),Ge,R):"import"==e?E(A("stat"),qe,R):"async"==e?E(U):"@"==t?E(j,U):N(A("stat"),j,z(";"),R)}function W(e){if("("==e)return E(Re,z(")"))}function j(e,t){return K(e,t,!1)}function H(e,t){return K(e,t,!0)}function G(e){return"("!=e?N():E(A(")"),q,z(")"),R)}function K(e,t,o){if(V.state.fatArrowAt==V.stream.start){var n=o?ee:Z;if("("==e)return E(L,A(")"),de(Re,")"),R,z("=>"),n,M);if("variable"==e)return N(L,Ee,z("=>"),n,M)}var i=o?X:Y;return _.hasOwnProperty(e)?E(i):"function"==e?E(Pe,i):"class"==e||d&&"interface"==t?(V.marked="keyword",E(A("form"),ze,R)):"keyword c"==e||"async"==e?E(o?H:j):"("==e?E(A(")"),q,z(")"),R,i):"operator"==e||"spread"==e?E(o?H:j):"["==e?E(A("]"),Ze,R,i):"{"==e?ue(ae,"}",null,i):"quasi"==e?N(J,i):"new"==e?E(te(o)):E()}function q(e){return e.match(/[;\}\)\],]/)?N():N(j)}function Y(e,t){return","==e?E(q):X(e,t,!1)}function X(e,t,o){var n=0==o?Y:X,i=0==o?j:H;return"=>"==e?E(L,o?ee:Z,M):"operator"==e?/\+\+|--/.test(t)||d&&"!"==t?E(n):d&&"<"==t&&V.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?E(A(">"),de(ve,">"),R,n):"?"==t?E(j,z(":"),i):E(i):"quasi"==e?N(J,n):";"!=e?"("==e?ue(H,")","call",n):"."==e?E(le,n):"["==e?E(A("]"),q,z("]"),R,n):d&&"as"==t?(V.marked="keyword",E(ve,n)):"regexp"==e?(V.state.lastType=V.marked="operator",V.stream.backUp(V.stream.pos-V.stream.start-1),E(i)):void 0:void 0}function J(e,t){return"quasi"!=e?N():"${"!=t.slice(t.length-2)?E(J):E(q,Q)}function Q(e){if("}"==e)return V.marked="string-2",V.state.tokenize=b,E(J)}function Z(e){return k(V.stream,V.state),N("{"==e?U:j)}function ee(e){return k(V.stream,V.state),N("{"==e?U:H)}function te(e){return function(t){return"."==t?E(e?ne:oe):"variable"==t&&d?E(xe,e?X:Y):N(e?H:j)}}function oe(e,t){if("target"==t)return V.marked="keyword",E(Y)}function ne(e,t){if("target"==t)return V.marked="keyword",E(X)}function ie(e){return":"==e?E(R,U):N(Y,z(";"),R)}function le(e){if("variable"==e)return V.marked="property",E()}function ae(e,t){return"async"==e?(V.marked="property",E(ae)):"variable"==e||"keyword"==V.style?(V.marked="property","get"==t||"set"==t?E(re):(d&&V.state.fatArrowAt==V.stream.start&&(o=V.stream.match(/^\s*:\s*/,!1))&&(V.state.fatArrowAt=V.stream.pos+o[0].length),E(se))):"number"==e||"string"==e?(V.marked=a?"property":V.style+" property",E(se)):"jsonld-keyword"==e?E(se):d&&T(t)?(V.marked="keyword",E(ae)):"["==e?E(j,pe,z("]"),se):"spread"==e?E(H,se):"*"==t?(V.marked="keyword",E(ae)):":"==e?N(se):void 0;var o}function re(e){return"variable"!=e?N(se):(V.marked="property",E(Pe))}function se(e){return":"==e?E(H):"("==e?N(Pe):void 0}function de(e,t,o){function n(i,l){if(o?o.indexOf(i)>-1:","==i){var a=V.state.lexical;return"call"==a.info&&(a.pos=(a.pos||0)+1),E((function(o,n){return o==t||n==t?N():N(e)}),n)}return i==t||l==t?E():o&&o.indexOf(";")>-1?N(e):E(z(t))}return function(o,i){return o==t||i==t?E():N(e,n)}}function ue(e,t,o){for(var n=3;n<arguments.length;n++)V.cc.push(arguments[n]);return E(A(t,o),de(e,t),R)}function ce(e){return"}"==e?E():N(U,ce)}function pe(e,t){if(d){if(":"==e)return E(ve);if("?"==t)return E(pe)}}function me(e,t){if(d&&(":"==e||"in"==t))return E(ve)}function he(e){if(d&&":"==e)return V.stream.match(/^\s*\w+\s+is\b/,!1)?E(j,fe,ve):E(ve)}function fe(e,t){if("is"==t)return V.marked="keyword",E()}function ve(e,t){return"keyof"==t||"typeof"==t||"infer"==t||"readonly"==t?(V.marked="keyword",E("typeof"==t?H:ve)):"variable"==e||"void"==t?(V.marked="type",E(Ce)):"|"==t||"&"==t?E(ve):"string"==e||"number"==e||"atom"==e?E(Ce):"["==e?E(A("]"),de(ve,"]",","),R,Ce):"{"==e?E(A("}"),ye,R,Ce):"("==e?E(de(_e,")"),ge,Ce):"<"==e?E(de(ve,">"),ve):"quasi"==e?N(we,Ce):void 0}function ge(e){if("=>"==e)return E(ve)}function ye(e){return e.match(/[\}\)\]]/)?E():","==e||";"==e?E(ye):N(be,ye)}function be(e,t){return"variable"==e||"keyword"==V.style?(V.marked="property",E(be)):"?"==t||"number"==e||"string"==e?E(be):":"==e?E(ve):"["==e?E(z("variable"),me,z("]"),be):"("==e?N(Me,be):e.match(/[;\}\)\],]/)?void 0:E()}function we(e,t){return"quasi"!=e?N():"${"!=t.slice(t.length-2)?E(we):E(ve,ke)}function ke(e){if("}"==e)return V.marked="string-2",V.state.tokenize=b,E(we)}function _e(e,t){return"variable"==e&&V.stream.match(/^\s*[?:]/,!1)||"?"==t?E(_e):":"==e?E(ve):"spread"==e?E(_e):N(ve)}function Ce(e,t){return"<"==t?E(A(">"),de(ve,">"),R,Ce):"|"==t||"."==e||"&"==t?E(ve):"["==e?E(ve,z("]"),Ce):"extends"==t||"implements"==t?(V.marked="keyword",E(ve)):"?"==t?E(ve,z(":"),ve):void 0}function xe(e,t){if("<"==t)return E(A(">"),de(ve,">"),R,Ce)}function Se(){return N(ve,Ve)}function Ve(e,t){if("="==t)return E(ve)}function Ne(e,t){return"enum"==t?(V.marked="keyword",E(et)):N(Ee,pe,Be,Te)}function Ee(e,t){return d&&T(t)?(V.marked="keyword",E(Ee)):"variable"==e?(D(t),E()):"spread"==e?E(Ee):"["==e?ue(De,"]"):"{"==e?ue($e,"}"):void 0}function $e(e,t){return"variable"!=e||V.stream.match(/^\s*:/,!1)?("variable"==e&&(V.marked="property"),"spread"==e?E(Ee):"}"==e?N():"["==e?E(j,z("]"),z(":"),$e):E(z(":"),Ee,Be)):(D(t),E(Be))}function De(){return N(Ee,Be)}function Be(e,t){if("="==t)return E(H)}function Te(e){if(","==e)return E(Ne)}function Oe(e,t){if("keyword b"==e&&"else"==t)return E(A("form","else"),U,R)}function Ie(e,t){return"await"==t?E(Ie):"("==e?E(A(")"),Fe,R):void 0}function Fe(e){return"var"==e?E(Ne,Le):"variable"==e?E(Le):N(Le)}function Le(e,t){return")"==e?E():";"==e?E(Le):"in"==t||"of"==t?(V.marked="keyword",E(j,Le)):N(j,Le)}function Pe(e,t){return"*"==t?(V.marked="keyword",E(Pe)):"variable"==e?(D(t),E(Pe)):"("==e?E(L,A(")"),de(Re,")"),R,he,U,M):d&&"<"==t?E(A(">"),de(Se,">"),R,Pe):void 0}function Me(e,t){return"*"==t?(V.marked="keyword",E(Me)):"variable"==e?(D(t),E(Me)):"("==e?E(L,A(")"),de(Re,")"),R,he,M):d&&"<"==t?E(A(">"),de(Se,">"),R,Me):void 0}function Ae(e,t){return"keyword"==e||"variable"==e?(V.marked="type",E(Ae)):"<"==t?E(A(">"),de(Se,">"),R):void 0}function Re(e,t){return"@"==t&&E(j,Re),"spread"==e?E(Re):d&&T(t)?(V.marked="keyword",E(Re)):d&&"this"==e?E(pe,Be):N(Ee,pe,Be)}function ze(e,t){return"variable"==e?Ue(e,t):We(e,t)}function Ue(e,t){if("variable"==e)return D(t),E(We)}function We(e,t){return"<"==t?E(A(">"),de(Se,">"),R,We):"extends"==t||"implements"==t||d&&","==e?("implements"==t&&(V.marked="keyword"),E(d?ve:j,We)):"{"==e?E(A("}"),je,R):void 0}function je(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||d&&T(t))&&V.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1)?(V.marked="keyword",E(je)):"variable"==e||"keyword"==V.style?(V.marked="property",E(He,je)):"number"==e||"string"==e?E(He,je):"["==e?E(j,pe,z("]"),He,je):"*"==t?(V.marked="keyword",E(je)):d&&"("==e?N(Me,je):";"==e||","==e?E(je):"}"==e?E():"@"==t?E(j,je):void 0}function He(e,t){if("!"==t)return E(He);if("?"==t)return E(He);if(":"==e)return E(ve,Be);if("="==t)return E(H);var o=V.state.lexical.prev;return N(o&&"interface"==o.info?Me:Pe)}function Ge(e,t){return"*"==t?(V.marked="keyword",E(Qe,z(";"))):"default"==t?(V.marked="keyword",E(j,z(";"))):"{"==e?E(de(Ke,"}"),Qe,z(";")):N(U)}function Ke(e,t){return"as"==t?(V.marked="keyword",E(z("variable"))):"variable"==e?N(H,Ke):void 0}function qe(e){return"string"==e?E():"("==e?N(j):"."==e?N(Y):N(Ye,Xe,Qe)}function Ye(e,t){return"{"==e?ue(Ye,"}"):("variable"==e&&D(t),"*"==t&&(V.marked="keyword"),E(Je))}function Xe(e){if(","==e)return E(Ye,Xe)}function Je(e,t){if("as"==t)return V.marked="keyword",E(Ye)}function Qe(e,t){if("from"==t)return V.marked="keyword",E(j)}function Ze(e){return"]"==e?E():N(de(H,"]"))}function et(){return N(A("form"),Ee,z("{"),A("}"),de(tt,"}"),R,R)}function tt(){return N(Ee,Be)}function ot(e,t){return"operator"==e.lastType||","==e.lastType||p.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}function nt(e,t,o){return t.tokenize==v&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(o||0)))}return L.lex=P.lex=!0,M.lex=!0,R.lex=!0,{startState:function(e){var o={tokenize:v,lastType:"sof",cc:[],lexical:new C((e||0)-i,0,"block",!1),localVars:t.localVars,context:t.localVars&&new O(null,null,!1),indented:e||0};return t.globalVars&&"object"==typeof t.globalVars&&(o.globalVars=t.globalVars),o},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),k(e,t)),t.tokenize!=y&&e.eatSpace())return null;var i=t.tokenize(e,t);return"comment"==o?i:(t.lastType="operator"!=o||"++"!=n&&"--"!=n?o:"incdec",S(t,i,o,n,e))},indent:function(e,o){if(e.tokenize==y||e.tokenize==b)return CodeMirror2.Pass;if(e.tokenize!=v)return 0;var n,a=o&&o.charAt(0),r=e.lexical;if(!/^\s*else\b/.test(o))for(var s=e.cc.length-1;s>=0;--s){var d=e.cc[s];if(d==R)r=r.prev;else if(d!=Oe&&d!=M)break}for(;("stat"==r.type||"form"==r.type)&&("}"==a||(n=e.cc[e.cc.length-1])&&(n==Y||n==X)&&!/^[,\.=+\-*:?[\(]/.test(o));)r=r.prev;l&&")"==r.type&&"stat"==r.prev.type&&(r=r.prev);var u=r.type,c=a==u;return"vardef"==u?r.indented+("operator"==e.lastType||","==e.lastType?r.info.length+1:0):"form"==u&&"{"==a?r.indented:"form"==u?r.indented+i:"stat"==u?r.indented+(ot(e,o)?l||i:0):"switch"!=r.info||c||0==t.doubleIndentSwitch?r.align?r.column+(c?0:1):r.indented+(c?0:i):r.indented+(/^(?:case|default)\b/.test(o)?i:2*i)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:r?null:"/*",blockCommentEnd:r?null:"*/",blockCommentContinue:r?null:" * ",lineComment:r?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:r?"json":"javascript",jsonldMode:a,jsonMode:r,expressionAllowed:nt,skipExpression:function(e){S(e,"atom","atom","true",new CodeMirror2.StringStream("",2,null))}}})),CodeMirror2.registerHelper("wordChars","javascript",/[\w$]/),CodeMirror2.defineMIME("text/javascript","javascript"),CodeMirror2.defineMIME("text/ecmascript","javascript"),CodeMirror2.defineMIME("application/javascript","javascript"),CodeMirror2.defineMIME("application/x-javascript","javascript"),CodeMirror2.defineMIME("application/ecmascript","javascript"),CodeMirror2.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror2.defineMIME("application/x-json",{name:"javascript",json:!0}),CodeMirror2.defineMIME("application/manifest+json",{name:"javascript",json:!0}),CodeMirror2.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),CodeMirror2.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror2.defineMIME("application/typescript",{name:"javascript",typescript:!0});var ayuDark="";!function(e){var t={pairs:"()[]{}''\"\"",closeBefore:")]}'\":;>",triples:"",explode:"[]{}"},o=e.Pos;function n(e,o){return"pairs"==o&&"string"==typeof e?e:"object"==typeof e&&null!=e[o]?e[o]:t[o]}e.defineOption("autoCloseBrackets",!1,(function(t,o,a){a&&a!=e.Init&&(t.removeKeyMap(i),t.state.closeBrackets=null),o&&(l(n(o,"pairs")),t.state.closeBrackets=o,t.addKeyMap(i))}));var i={Backspace:s,Enter:d};function l(e){for(var t=0;t<e.length;t++){var o=e.charAt(t),n="'"+o+"'";i[n]||(i[n]=a(o))}}function a(e){return function(t){return p(t,e)}}function r(e){var t=e.state.closeBrackets;return!t||t.override?t:e.getModeAt(e.getCursor()).closeBrackets||t}function s(t){var i=r(t);if(!i||t.getOption("disableInput"))return e.Pass;for(var l=n(i,"pairs"),a=t.listSelections(),s=0;s<a.length;s++){if(!a[s].empty())return e.Pass;var d=m(t,a[s].head);if(!d||l.indexOf(d)%2!=0)return e.Pass}for(s=a.length-1;s>=0;s--){var u=a[s].head;t.replaceRange("",o(u.line,u.ch-1),o(u.line,u.ch+1),"+delete")}}function d(t){var o=r(t),i=o&&n(o,"explode");if(!i||t.getOption("disableInput"))return e.Pass;for(var l=t.listSelections(),a=0;a<l.length;a++){if(!l[a].empty())return e.Pass;var s=m(t,l[a].head);if(!s||i.indexOf(s)%2!=0)return e.Pass}t.operation((function(){var e=t.lineSeparator()||"\n";t.replaceSelection(e+e,null),u(t,-1),l=t.listSelections();for(var o=0;o<l.length;o++){var n=l[o].head.line;t.indentLine(n,null,!0),t.indentLine(n+1,null,!0)}}))}function u(e,t){for(var o=[],n=e.listSelections(),i=0,l=0;l<n.length;l++){var a=n[l];a.head==e.getCursor()&&(i=l);var r=a.head.ch||t>0?{line:a.head.line,ch:a.head.ch+t}:{line:a.head.line-1};o.push({anchor:r,head:r})}e.setSelections(o,i)}function c(t){var n=e.cmpPos(t.anchor,t.head)>0;return{anchor:new o(t.anchor.line,t.anchor.ch+(n?-1:1)),head:new o(t.head.line,t.head.ch+(n?1:-1))}}function p(t,i){var l=r(t);if(!l||t.getOption("disableInput"))return e.Pass;var a=n(l,"pairs"),s=a.indexOf(i);if(-1==s)return e.Pass;for(var d,p=n(l,"closeBefore"),m=n(l,"triples"),f=a.charAt(s+1)==i,v=t.listSelections(),g=s%2==0,y=0;y<v.length;y++){var b,w=v[y],k=w.head,_=t.getRange(k,o(k.line,k.ch+1));if(g&&!w.empty())b="surround";else if(!f&&g||_!=i)if(f&&k.ch>1&&m.indexOf(i)>=0&&t.getRange(o(k.line,k.ch-2),k)==i+i){if(k.ch>2&&/\bstring/.test(t.getTokenTypeAt(o(k.line,k.ch-2))))return e.Pass;b="addFour"}else if(f){var C=0==k.ch?" ":t.getRange(o(k.line,k.ch-1),k);if(e.isWordChar(_)||C==i||e.isWordChar(C))return e.Pass;b="both"}else{if(!g||!(0===_.length||/\s/.test(_)||p.indexOf(_)>-1))return e.Pass;b="both"}else b=f&&h(t,k)?"both":m.indexOf(i)>=0&&t.getRange(k,o(k.line,k.ch+3))==i+i+i?"skipThree":"skip";if(d){if(d!=b)return e.Pass}else d=b}var x=s%2?a.charAt(s-1):i,S=s%2?i:a.charAt(s+1);t.operation((function(){if("skip"==d)u(t,1);else if("skipThree"==d)u(t,3);else if("surround"==d){for(var e=t.getSelections(),o=0;o<e.length;o++)e[o]=x+e[o]+S;for(t.replaceSelections(e,"around"),e=t.listSelections().slice(),o=0;o<e.length;o++)e[o]=c(e[o]);t.setSelections(e)}else"both"==d?(t.replaceSelection(x+S,null),t.triggerElectric(x+S),u(t,-1)):"addFour"==d&&(t.replaceSelection(x+x+x+x,"before"),u(t,1))}))}function m(e,t){var n=e.getRange(o(t.line,t.ch-1),o(t.line,t.ch+1));return 2==n.length?n:null}function h(e,t){var n=e.getTokenAt(o(t.line,t.ch+1));return/\bstring/.test(n.type)&&n.start==t.ch&&(0==t.ch||!/\bstring/.test(e.getTokenTypeAt(t)))}l(t.pairs+"`")}(codemirror$1.exports),function(e){var t="CodeMirror-activeline",o="CodeMirror-activeline-background",n="CodeMirror-activeline-gutter";function i(e){for(var i=0;i<e.state.activeLines.length;i++)e.removeLineClass(e.state.activeLines[i],"wrap",t),e.removeLineClass(e.state.activeLines[i],"background",o),e.removeLineClass(e.state.activeLines[i],"gutter",n)}function l(e,t){if(e.length!=t.length)return!1;for(var o=0;o<e.length;o++)if(e[o]!=t[o])return!1;return!0}function a(e,a){for(var r=[],s=0;s<a.length;s++){var d=a[s],u=e.getOption("styleActiveLine");if("object"==typeof u&&u.nonEmpty?d.anchor.line==d.head.line:d.empty()){var c=e.getLineHandleVisualStart(d.head.line);r[r.length-1]!=c&&r.push(c)}}l(e.state.activeLines,r)||e.operation((function(){i(e);for(var l=0;l<r.length;l++)e.addLineClass(r[l],"wrap",t),e.addLineClass(r[l],"background",o),e.addLineClass(r[l],"gutter",n);e.state.activeLines=r}))}function r(e,t){a(e,t.ranges)}e.defineOption("styleActiveLine",!1,(function(t,o,n){var l=n!=e.Init&&n;o!=l&&(l&&(t.off("beforeSelectionChange",r),i(t),delete t.state.activeLines),o&&(t.state.activeLines=[],a(t,t.listSelections()),t.on("beforeSelectionChange",r)))}))}(codemirror$1.exports);var simplescrollbars="";!function(e){function t(t,o,n){this.orientation=o,this.scroll=n,this.screen=this.total=this.size=1,this.pos=0,this.node=document.createElement("div"),this.node.className=t+"-"+o,this.inner=this.node.appendChild(document.createElement("div"));var i=this;function l(t){var o=e.wheelEventPixels(t)["horizontal"==i.orientation?"x":"y"],n=i.pos;i.moveTo(i.pos+o),i.pos!=n&&e.e_preventDefault(t)}e.on(this.inner,"mousedown",(function(t){if(1==t.which){e.e_preventDefault(t);var o="horizontal"==i.orientation?"pageX":"pageY",n=t[o],l=i.pos;e.on(document,"mousemove",r),e.on(document,"mouseup",a)}function a(){e.off(document,"mousemove",r),e.off(document,"mouseup",a)}function r(e){if(1!=e.which)return a();i.moveTo(l+(e[o]-n)*(i.total/i.size))}})),e.on(this.node,"click",(function(t){e.e_preventDefault(t);var o,n=i.inner.getBoundingClientRect();o="horizontal"==i.orientation?t.clientX<n.left?-1:t.clientX>n.right?1:0:t.clientY<n.top?-1:t.clientY>n.bottom?1:0,i.moveTo(i.pos+o*i.screen)})),e.on(this.node,"mousewheel",l),e.on(this.node,"DOMMouseScroll",l)}t.prototype.setPos=function(e,t){return e<0&&(e=0),e>this.total-this.screen&&(e=this.total-this.screen),!(!t&&e==this.pos||(this.pos=e,this.inner.style["horizontal"==this.orientation?"left":"top"]=e*(this.size/this.total)+"px",0))},t.prototype.moveTo=function(e){this.setPos(e)&&this.scroll(e,this.orientation)};var o=10;function n(e,o,n){this.addClass=e,this.horiz=new t(e,"horizontal",n),o(this.horiz.node),this.vert=new t(e,"vertical",n),o(this.vert.node),this.width=null}t.prototype.update=function(e,t,n){var i=this.screen!=t||this.total!=e||this.size!=n;i&&(this.screen=t,this.total=e,this.size=n);var l=this.screen*(this.size/this.total);l<o&&(this.size-=o-l,l=o),this.inner.style["horizontal"==this.orientation?"width":"height"]=l+"px",this.setPos(this.pos,i)},n.prototype.update=function(e){if(null==this.width){var t=window.getComputedStyle?window.getComputedStyle(this.horiz.node):this.horiz.node.currentStyle;t&&(this.width=parseInt(t.height))}var o=this.width||0,n=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1;return this.vert.node.style.display=i?"block":"none",this.horiz.node.style.display=n?"block":"none",i&&(this.vert.update(e.scrollHeight,e.clientHeight,e.viewHeight-(n?o:0)),this.vert.node.style.bottom=n?o+"px":"0"),n&&(this.horiz.update(e.scrollWidth,e.clientWidth,e.viewWidth-(i?o:0)-e.barLeft),this.horiz.node.style.right=i?o+"px":"0",this.horiz.node.style.left=e.barLeft+"px"),{right:i?o:0,bottom:n?o:0}},n.prototype.setScrollTop=function(e){this.vert.setPos(e)},n.prototype.setScrollLeft=function(e){this.horiz.setPos(e)},n.prototype.clear=function(){var e=this.horiz.node.parentNode;e.removeChild(this.horiz.node),e.removeChild(this.vert.node)},e.scrollbarModel.simple=function(e,t){return new n("CodeMirror-simplescroll",e,t)},e.scrollbarModel.overlay=function(e,t){return new n("CodeMirror-overlayscroll",e,t)}}(codemirror$1.exports);var index_vue_vue_type_style_index_0_lang$8="";const _sfc_main$1s={props:["modelValue","showArguments","showRow"],inject:{getFormModels:{default:()=>new Function},getResponseVariables:{default:()=>new Function},getLocalVariables:{default:()=>new Function}},data(){let e=[];return this.showArguments&&(e=[{id:"arguments[0]",name:this.$t("fm.formula.argsData.name"),children:[{id:" arguments[0].value",name:"value",desc:"当前字段值"},{id:" arguments[0].fieldNode",name:"fieldNode",desc:"当前字段标识"},{id:" arguments[0].currentRef",name:"currentRef",desc:"当前组件实例"}]}],this.showRow&&(e[0].children=e[0].children.concat([{id:" arguments[0].rowIndex",name:"rowIndex",desc:"当前操作行下标"},{id:" arguments[0].row",name:"row",desc:"当前行数据"}]))),{value:this.modelValue,editorId:"formula-"+Math.random().toString(36).slice(-8),modelsData:[],argsData:e,responseVariables:[],localVariables:[]}},mounted(){var e,t,o;this.modelsData=null!=(e=this.getFormModels())?e:[];let n=null!=(t=this.getResponseVariables())?t:[],i=null!=(o=this.getLocalVariables())?o:[];(n.length||i.length)&&(this.localVariables=[{id:"",name:this.$t("fm.formula.argsData.variable"),children:[...n,...i].map((e=>({id:" "+e,name:e})))}]),setTimeout((()=>{this.initEditor()}))},methods:{initEditor(){let e="default";document.querySelector("html").className.indexOf("dark")>-1&&(e="ayu-dark"),this.editor=CodeMirror(document.getElementById(this.editorId),{value:this.value,lineNumbers:!1,mode:"javascript",lineWrapping:!1,autofocus:!0,theme:e,autoCloseBrackets:!0,styleActiveLine:!0,scrollbarStyle:"simple"}),this.editor.on("change",(e=>{this.value=e.getValue()})),this.replaceFieldContent(),this.replaceArgsContent(),this.replaceVarContent(),this.editor.execCommand("goDocEnd")},_escapeRegExp:e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),replaceVarContent(){this.localVariables&&this.localVariables.length&&this.localVariables[0].children.forEach((e=>{const t=new RegExp(e.id,"g"),o=[];let n;for(;null!==(n=t.exec(this.value));){const t=n[0],i=n.index-this.calcLastIndex(this.value,n.index)-1,l=this.calcLineCount(this.value,n.index);o.push({value:t,startIndex:i,lineIndex:l,id:e.id,name:e.name})}o.forEach((e=>{let t=document.createElement("span");t.className="cm-eventvar",t.textContent=e.name,t.title=e.id,this.editor.markText({line:e.lineIndex,ch:e.startIndex},{line:e.lineIndex,ch:e.startIndex+e.value.length},{atomic:!0,selectLeft:!0,selectRight:!0,inclusiveLeft:!1,inclusiveRight:!1,replacedWith:t,handleMouseEvents:!0})}))}))},replaceArgsContent(){this.argsData.length&&this.argsData[0].children.forEach((e=>{const t=new RegExp(this._escapeRegExp(e.id),"g"),o=[];let n;for(;null!==(n=t.exec(this.value));){const t=n[0],i=n.index-this.calcLastIndex(this.value,n.index)-1,l=this.calcLineCount(this.value,n.index);o.push({value:t,startIndex:i,lineIndex:l,id:e.id,name:e.name})}o.forEach((e=>{let t=document.createElement("span");t.className="cm-eventargs",t.textContent=e.name,t.title=e.id,this.editor.markText({line:e.lineIndex,ch:e.startIndex},{line:e.lineIndex,ch:e.startIndex+e.value.length},{atomic:!0,selectLeft:!0,selectRight:!0,inclusiveLeft:!1,inclusiveRight:!1,replacedWith:t,handleMouseEvents:!0})}))}))},replaceFieldContent(){const e=/ this\.getValue\("([^"]+)"\)/g,t=[];let o;for(;null!==(o=e.exec(this.value));){const e=o[0],n=o[1],i=o.index-this.calcLastIndex(this.value,o.index)-1,l=this.calcLineCount(this.value,o.index),a=this.$refs.fieldTree.getNode(n);a&&t.push({value:e,startIndex:i,lineIndex:l,id:n,data:a.data})}t.forEach((e=>{let t=document.createElement("span");t.className="cm-value",t.textContent=e.data.name||e.data.id,t.title=e.value,this.editor.markText({line:e.lineIndex,ch:e.startIndex},{line:e.lineIndex,ch:e.startIndex+e.value.length},{title:e.value,atomic:!0,selectLeft:!0,selectRight:!0,inclusiveLeft:!1,inclusiveRight:!1,replacedWith:t,handleMouseEvents:!0})}))},calcLineCount(e,t){let o=0;for(let n=0;n<t;n++)"\n"===e[n]&&o++;return o},calcLastIndex(e,t){let o=-1;for(let n=0;n<t;n++)"\n"===e[n]&&(o=n);return o},handleFieldId(e){let t=this.editor.getCursor(),o=`"${e.id}"`;this.editor.replaceRange(o,t),this.editor.focus()},handleNode(e){let t=this.editor.getCursor(),o=document.createElement("span");o.className="cm-value",o.textContent=e.name||e.id;let n=` this.getValue("${e.id}")`;o.title=n,this.editor.replaceRange(n,t),this.editor.markText({line:t.line,ch:t.ch},{line:t.line,ch:t.ch+n.length},{title:n,atomic:!0,selectLeft:!0,selectRight:!0,inclusiveLeft:!1,inclusiveRight:!1,replacedWith:o,handleMouseEvents:!0}),this.editor.focus()},handleArgsNode(e){let t=this.editor.getCursor(),o=document.createElement("span");o.className="cm-eventargs",o.textContent=e.name,o.title=e.id;let n=e.id;this.editor.replaceRange(n,t),this.editor.markText({line:t.line,ch:t.ch},{line:t.line,ch:t.ch+n.length},{atomic:!0,selectLeft:!0,selectRight:!0,inclusiveLeft:!1,inclusiveRight:!1,replacedWith:o,handleMouseEvents:!0}),this.editor.focus()},handleVariableNode(e){let t=this.editor.getCursor(),o=e.id,n=document.createElement("span");n.className="cm-eventvar",n.textContent=e.name,n.title=e.id,this.editor.replaceRange(o,t),this.editor.markText({line:t.line,ch:t.ch},{line:t.line,ch:t.ch+o.length},{atomic:!0,selectLeft:!0,selectRight:!0,inclusiveLeft:!1,inclusiveRight:!1,replacedWith:n,handleMouseEvents:!0}),this.editor.focus()},handleGoHelp(){window.open("https://form.making.link/docs/manual/formula.html")}},watch:{modelValue(e){this.value=e},value(e){this.$emit("update:modelValue",e)}}},_hoisted_1$11={class:"fm-formula-container"},_hoisted_2$R={style:{display:"flex","justify-content":"space-between"}},_hoisted_3$I=["id"],_hoisted_4$F=["onClick"],_hoisted_5$D={style:{"font-size":"12px"}},_hoisted_6$y=["onClick"],_hoisted_7$u={style:{"font-size":"12px"}},_hoisted_8$n=["onClick"],_hoisted_9$k={style:{padding:"0 5px","max-width":"50%"}},_hoisted_10$g=["onClick"],_hoisted_11$f={style:{padding:"0 5px","max-width":"50%"}},_hoisted_12$d={key:0},_hoisted_13$a={style:{"font-size":"12px"}};function _sfc_render$1q(e,t,o,n,i,l){const a=vue.resolveComponent("el-card"),r=vue.resolveComponent("el-col"),s=vue.resolveComponent("el-row"),d=vue.resolveComponent("el-tag"),u=vue.resolveComponent("el-tree"),c=vue.resolveComponent("el-scrollbar"),p=vue.resolveComponent("el-tab-pane"),m=vue.resolveComponent("el-tabs");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1$11,[vue.createVNode(s,{justify:"space-between"},{default:vue.withCtx((()=>[vue.createVNode(r,{span:24},{default:vue.withCtx((()=>[vue.createVNode(a,{shadow:"never",size:"small",class:"formula-card"},{header:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_2$R,[vue.createElementVNode("span",null,vue.toDisplayString(e.$t("fm.formula.header")),1),vue.createElementVNode("span",null,[vue.createElementVNode("i",{class:"fm-iconfont icon-question-circle is-help",onClick:t[0]||(t[0]=(...e)=>l.handleGoHelp&&l.handleGoHelp(...e))})])])])),default:vue.withCtx((()=>[vue.createElementVNode("div",{id:i.editorId,class:"formula-editor"},null,8,_hoisted_3$I)])),_:1})])),_:1})])),_:1}),vue.createVNode(s,{justify:"space-between",gutter:10},{default:vue.withCtx((()=>[vue.createVNode(r,{span:24},{default:vue.withCtx((()=>[vue.createVNode(m,{class:"formula-tabs"},{default:vue.withCtx((()=>[vue.createVNode(p,{label:e.$t("fm.formula.field")},{default:vue.withCtx((()=>[vue.createVNode(c,{ref:"scrollRef",always:""},{default:vue.withCtx((()=>[vue.createVNode(u,{data:i.modelsData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,style:{width:"100%"},ref:"fieldTree"},{default:vue.withCtx((({node:t})=>[vue.createElementVNode("div",{style:{display:"flex","justify-content":"space-between",width:"95%","align-items":"center"},onClick:e=>l.handleNode(t.data)},[vue.createElementVNode("span",null,[vue.createTextVNode(vue.toDisplayString(t.data.name)+" {",1),vue.createElementVNode("span",_hoisted_5$D,vue.toDisplayString(t.data.id),1),vue.createTextVNode("}")]),vue.createVNode(d,{type:"info"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.components.fields."+t.data.type)),1)])),_:2},1024)],8,_hoisted_4$F)])),_:1},8,["data"])])),_:1},512)])),_:1},8,["label"]),vue.createVNode(p,{label:e.$t("fm.formula.fieldId")},{default:vue.withCtx((()=>[vue.createVNode(c,{ref:"scrollRef",always:""},{default:vue.withCtx((()=>[vue.createVNode(u,{data:i.modelsData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,style:{width:"100%"}},{default:vue.withCtx((({node:t})=>[vue.createElementVNode("div",{style:{display:"flex","justify-content":"space-between",width:"95%","align-items":"center"},onClick:e=>l.handleFieldId(t.data)},[vue.createElementVNode("span",null,[vue.createTextVNode(vue.toDisplayString(t.data.name)+" {",1),vue.createElementVNode("span",_hoisted_7$u,vue.toDisplayString(t.data.id),1),vue.createTextVNode("}")]),vue.createVNode(d,{type:"info"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.components.fields."+t.data.type)),1)])),_:2},1024)],8,_hoisted_6$y)])),_:1},8,["data"])])),_:1},512)])),_:1},8,["label"]),vue.createVNode(p,{label:e.$t("fm.formula.event")},{default:vue.withCtx((()=>[vue.createVNode(c,{always:""},{default:vue.withCtx((()=>[i.localVariables.length?(vue.openBlock(),vue.createBlock(u,{key:0,data:i.localVariables,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,style:{width:"100%"}},{default:vue.withCtx((({node:e})=>[vue.createElementVNode("div",{style:{display:"flex","justify-content":"space-between",width:"90%"},onClick:t=>l.handleVariableNode(e.data)},[vue.createElementVNode("span",_hoisted_9$k,vue.toDisplayString(e.data.name),1)],8,_hoisted_8$n)])),_:1},8,["data"])):vue.createCommentVNode("",!0),vue.createVNode(u,{data:i.argsData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,style:{width:"100%"}},{default:vue.withCtx((({node:t})=>[vue.createElementVNode("div",{style:{display:"flex","justify-content":"space-between",width:"95%","align-items":"center"},onClick:e=>l.handleArgsNode(t.data)},[vue.createElementVNode("span",_hoisted_11$f,[vue.createElementVNode("span",null,vue.toDisplayString(t.data.name),1),vue.createTextVNode(),t.data.desc&&"zh-cn"==e.$i18n.locale?(vue.openBlock(),vue.createElementBlock("span",_hoisted_12$d,"（"+vue.toDisplayString(t.data.desc)+"）",1)):vue.createCommentVNode("",!0)]),vue.createElementVNode("span",_hoisted_13$a,vue.toDisplayString(t.data.id),1)],8,_hoisted_10$g)])),_:1},8,["data"])])),_:1})])),_:1},8,["label"])])),_:1})])),_:1})])),_:1})])}var FormulaPanelIndex=_export_sfc(_sfc_main$1s,[["render",_sfc_render$1q]]),dialog_vue_vue_type_style_index_0_lang$2="";const _sfc_main$1r={components:{CusDialog:CusDialog,FormulaPanelIndex:FormulaPanelIndex},emits:["dialog-close","dialog-confirm"],data:()=>({visible:!1,scriptList:[],formulaValue:"",showArguments:!0,showRow:!0}),methods:{open(e,t={showArguments:!0,showRow:!0}){var o,n;this.formulaValue=null!=e?e:"",this.visible=!0,this.showArguments=null==(o=null==t?void 0:t.showArguments)||o,this.showRow=null==(n=null==t?void 0:t.showRow)||n},handleClose(){this.$emit("dialog-close"),this.visible=!1},handleSubmit(){try{new Function("args",`return ${this.formulaValue}`),this.$emit("dialog-confirm",this.formulaValue),this.visible=!1}catch(e){elementPlus.ElMessage({message:this.$t("fm.message.jsError")+e.message,type:"error"})}}}},_hoisted_1$10={class:"fm-formula-panel-dialog-container"};function _sfc_render$1p(e,t,o,n,i,l){const a=vue.resolveComponent("FormulaPanelIndex"),r=vue.resolveComponent("el-button"),s=vue.resolveComponent("el-dialog");return vue.openBlock(),vue.createBlock(s,{modelValue:e.visible,"onUpdate:modelValue":t[1]||(t[1]=t=>e.visible=t),onOnClose:l.handleClose,ref:"formulaDialog",width:"800px","close-on-click-modal":!1,"show-close":!1,draggable:"","destroy-on-close":"","append-to-body":"",class:"fm-formula-dialog"},{footer:vue.withCtx((()=>[vue.createElementVNode("span",null,[vue.createVNode(r,{onClick:l.handleClose},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.cancel")),1)])),_:1},8,["onClick"]),vue.createVNode(r,{type:"primary",onClick:l.handleSubmit},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.confirm")),1)])),_:1},8,["onClick"])])])),default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_1$10,[vue.createVNode(a,{modelValue:e.formulaValue,"onUpdate:modelValue":t[0]||(t[0]=t=>e.formulaValue=t),showArguments:e.showArguments,showRow:e.showRow},null,8,["modelValue","showArguments","showRow"])])])),_:1},8,["modelValue","onOnClose"])}var FormulaDialog=_export_sfc(_sfc_main$1r,[["render",_sfc_render$1p]]),input_vue_vue_type_style_index_0_lang="";const _sfc_main$1q={components:{FormulaDialog:FormulaDialog},props:{select:{type:Boolean,default:!0},modelValue:{type:String},only:{type:Boolean,default:!1},size:{type:String,default:"small"},showArguments:{type:Boolean,default:!0},showRow:{type:Boolean,default:!0},isArgs:{type:Boolean,default:!1},keyValue:{type:String,default:""}},emits:["update:select","update:modelValue"],watch:{selectValue(e){"args"===e?(this.value=`args.${this.keyValue}`,this.$emit("update:select",!0)):this.$emit("update:select",e)},value(e){this.$emit("update:modelValue",e)},modelValue(e){this.value=e},keyValue(e){"args"===this.selectValue&&(this.value=`args.${this.keyValue}`)}},data(){var e,t;return{selectValue:(e=>{const t=`^args\\.${this.keyValue}$`;return new RegExp(t).test(e)})(this.modelValue)?"args":null!=(e=this.select)&&e,value:null!=(t=this.modelValue)?t:""}},computed:{placeholder(){return this.selectValue?this.$t("fm.formula.input.fxPlaceholder"):this.$t("fm.formula.input.valuePlaceholder")}},methods:{handleFormulaInput(){this.selectValue&&this.$refs.formulaDialog.open(this.value,{showArguments:this.showArguments,showRow:this.showRow})},handleFormulaConfirm(e){this.value=e}}};function _sfc_render$1o(e,t,o,n,i,l){const a=vue.resolveComponent("el-option"),r=vue.resolveComponent("el-select"),s=vue.resolveComponent("el-input"),d=vue.resolveComponent("FormulaDialog");return vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createVNode(s,{placeholder:l.placeholder,modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e),size:o.size,class:vue.normalizeClass({"input-with-select":!0,"formula-input":Boolean(this.selectValue),[e.$attrs.class]:!0}),onClick:l.handleFormulaInput,readonly:Boolean(i.selectValue),style:vue.normalizeStyle(e.$attrs.style),disabled:"args"===i.selectValue},vue.createSlots({_:2},[o.only?void 0:{name:"append",fn:vue.withCtx((()=>[vue.createVNode(r,{modelValue:i.selectValue,"onUpdate:modelValue":t[0]||(t[0]=e=>i.selectValue=e),style:{width:"80px"}},{default:vue.withCtx((()=>[vue.createVNode(a,{label:e.$t("fm.formula.input.value"),value:!1},null,8,["label"]),vue.createVNode(a,{label:e.$t("fm.formula.input.fx"),value:!0},null,8,["label"]),o.isArgs?(vue.openBlock(),vue.createBlock(a,{key:0,label:e.$t("fm.formula.input.variable"),value:"args"},null,8,["label"])):vue.createCommentVNode("",!0)])),_:1},8,["modelValue"])])),key:"0"}]),1032,["placeholder","modelValue","size","class","onClick","readonly","style","disabled"]),vue.createVNode(d,{ref:"formulaDialog",onDialogConfirm:l.handleFormulaConfirm},null,8,["onDialogConfirm"])],64)}var FormulaInput=_export_sfc(_sfc_main$1q,[["render",_sfc_render$1o]]),arrayDynamic_vue_vue_type_style_index_0_lang="";const _sfc_main$1p={components:{FormulaInput:FormulaInput},props:{modelValue:{type:Array,default:()=>[]},operable:{type:Boolean,default:!0},showArguments:{type:Boolean,default:!0},showRow:{type:Boolean,default:!0},isArgs:{type:Boolean,default:!1}},emits:["update:modelValue"],data(){return{array:this.modelValue}},methods:{handleAdd(){this.array.push({key:"",value:"",fx:!1})},handleRemove(e){this.array.splice(e,1)}},watch:{modelValue(e){this.array=e},array:{deep:!0,handler(e){this.$emit("update:modelValue",e)}}}},_hoisted_1$$={class:"array-dynamic-container"},_hoisted_2$Q=["onClick"],_hoisted_3$H=vue.createElementVNode("i",{class:"fm-iconfont icon-delete"},null,-1),_hoisted_4$E=[_hoisted_3$H],_hoisted_5$C=vue.createElementVNode("i",{class:"fm-iconfont icon-plus",style:{"font-size":"12px",margin:"5px"}},null,-1);function _sfc_render$1n(e,t,o,n,i,l){const a=vue.resolveComponent("el-input"),r=vue.resolveComponent("formula-input"),s=vue.resolveComponent("el-button");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1$$,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.array,((e,t)=>(vue.openBlock(),vue.createElementBlock("div",{key:t,class:"array-dynamic-item"},[vue.createVNode(a,{readonly:!o.operable,modelValue:e.key,"onUpdate:modelValue":t=>e.key=t,placeholder:"KEY",size:"small"},null,8,["readonly","modelValue","onUpdate:modelValue"]),vue.createVNode(r,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,select:e.fx,"onUpdate:select":t=>e.fx=t,class:vue.normalizeClass({"not-operable":!o.operable}),showArguments:o.showArguments,showRow:o.showRow,isArgs:o.isArgs,keyValue:e.key},null,8,["modelValue","onUpdate:modelValue","select","onUpdate:select","class","showArguments","showRow","isArgs","keyValue"]),o.operable?(vue.openBlock(),vue.createElementBlock("i",{key:0,onClick:e=>l.handleRemove(t),style:{"font-size":"16px",margin:"0 10px",cursor:"pointer",color:"#F56C6C"}},_hoisted_4$E,8,_hoisted_2$Q)):vue.createCommentVNode("",!0)])))),128)),o.operable?(vue.openBlock(),vue.createBlock(s,{key:0,link:"",type:"primary",onClick:l.handleAdd},{default:vue.withCtx((()=>[_hoisted_5$C,vue.createTextVNode(vue.toDisplayString(e.$t("fm.datasource.edit.add")),1)])),_:1},8,["onClick"])):vue.createCommentVNode("",!0)])}var ArrayDynamic=_export_sfc(_sfc_main$1p,[["render",_sfc_render$1n]]);const _sfc_main$1o={components:{ArrayDynamic:ArrayDynamic},props:{modelValue:{type:[String,Object]},operable:{type:Boolean,default:!0},showArguments:{type:Boolean,default:!0},showRow:{type:Boolean,default:!0}},data(){return{array:this.object2Array(this.modelValue)}},methods:{object2Array:e=>e?("string"==typeof e&&(e=new Function('"use strict";return ('+(e||"{}")+")")()),Object.keys(e).map((t=>({key:t,fx:isExpression(e[t]),value:isExpression(e[t])?extractExpression(e[t]):e[t]})))):[],array2Object(e){let t={};return e.forEach((e=>{e.key&&(t[e.key]=e.fx?`{{${e.value}}}`:e.value)})),t}},watch:{array:{deep:!0,handler(e){this.$emit("update:modelValue",this.array2Object(e))}}}};function _sfc_render$1m(e,t,o,n,i,l){const a=vue.resolveComponent("array-dynamic");return vue.openBlock(),vue.createBlock(a,{modelValue:i.array,"onUpdate:modelValue":t[0]||(t[0]=e=>i.array=e),operable:o.operable,showArguments:o.showArguments,showRow:o.showRow},null,8,["modelValue","operable","showArguments","showRow"])}var ObjectDynamic=_export_sfc(_sfc_main$1o,[["render",_sfc_render$1m]]),TemplateInput_vue_vue_type_style_index_0_lang="";const _sfc_main$1n={components:{CodeEditor:CodeEditor},props:{modelValue:{type:String},prefix:{type:String,default:""},suffix:{type:String,default:""}},emits:["update:modelValue"],data:()=>({visible:!1,value:"",key:Math.random().toString(36).slice(-8)}),mounted(){document.addEventListener("click",this.onClickOutside)},beforeUnmount(){document.removeEventListener("click",this.onClickOutside)},methods:{handleEdit(){this.visible?this.visible=!1:(this.value=this.modelValue,this.visible=!0,this.key=Math.random().toString(36).slice(-8))},handleConfirm(){this.visible=!1,this.$emit("update:modelValue",this.value)},onClickOutside(e){var t,o,n,i,l;const a=null==(l=null==(i=null==(n=null==(o=null==(t=this.$refs.tempaleInput)?void 0:t.$refs)?void 0:o.tooltipRef)?void 0:n.$refs)?void 0:i.popperRef)?void 0:l.contentRef,r=this.$refs.buttonRef.$el;!a||a.contains(e.target)||r&&r.contains(e.target)||(this.visible=!1)}}},_hoisted_1$_={class:"code-line"},_hoisted_2$P={class:"code-line"},_hoisted_3$G={style:{"text-align":"right",margin:"0"}};function _sfc_render$1l(e,t,o,n,i,l){const a=vue.resolveComponent("code-editor"),r=vue.resolveComponent("el-button"),s=vue.resolveComponent("el-popover");return vue.openBlock(),vue.createBlock(s,{visible:i.visible,width:"500",teleported:!0,placement:"bottom-end",ref:"tempaleInput","popper-class":"fm-template-popover"},{reference:vue.withCtx((()=>[vue.createVNode(r,{ref:"buttonRef",onClick:l.handleEdit,size:"small",style:vue.normalizeStyle(e.$attrs.style)},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString("zh-cn"==e.$i18n.locale?"点击编辑模板":"Setting"),1)])),_:1},8,["onClick","style"])])),default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_1$_,vue.toDisplayString(o.prefix),1),(vue.openBlock(),vue.createBlock(a,{mode:"xml",modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),height:"150px",key:i.key},null,8,["modelValue"])),vue.createElementVNode("div",_hoisted_2$P,vue.toDisplayString(o.suffix),1),vue.createElementVNode("div",_hoisted_3$G,[vue.createVNode(r,{size:"small",bg:"",text:"",onClick:t[1]||(t[1]=e=>i.visible=!1)},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString("zh-cn"==e.$i18n.locale?"取 消":"Cancel"),1)])),_:1}),vue.createVNode(r,{size:"small",type:"primary",onClick:l.handleConfirm},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString("zh-cn"==e.$i18n.locale?"确 定":"Confirm"),1)])),_:1},8,["onClick"])])])),_:1},8,["visible"])}var TemplateInput=_export_sfc(_sfc_main$1n,[["render",_sfc_render$1l]]),ColumnsConfig_vue_vue_type_style_index_0_lang="";const _sfc_main$1m={name:"columns-config",components:{Draggable:draggableComponent,CodeEditor:CodeEditor,TemplateInput:TemplateInput},emits:["update:modelValue"],props:{modelValue:{type:Array,default:()=>[]}},data(){var e;return{key:Math.random().toString(36).slice(-8),columns:null!=(e=this.modelValue)?e:[],currentDetailRef:null,popoverRef:null,buttonRefs:[],showPopover:!1,columnDetail:{},columnItem:{label:"",prop:"",width:"",sortable:!1,fixed:!1,align:"left",headderAlign:"left",fixedOption:"left",defaultSlot:!1,defaultSlotTemplate:"",headerSlot:!1,headerSlotTemplate:""},parentItem:{label:"",width:"",fixed:!1,fixedOption:"left",align:"left",headerSlot:!1,headerSlotTemplate:"",isParent:!0,isExpand:!0,children:[]},currentIndex:-1}},mounted(){this.popoverRef=this.$refs.popoverRef,document.addEventListener("click",this.onClickOutside)},beforeUnmount(){document.removeEventListener("click",this.onClickOutside)},watch:{columns(e){this.$emit("update:modelValue",e)},modelValue(e){this.columns=e},showPopover(e){e||(this.currentIndex=-1)}},methods:{handleAdd(){const e=Math.random().toString(36).slice(-8);this.columns.push({...this.columnItem,key:e})},handleParentAdd(){const e=Math.random().toString(36).slice(-8);this.columns.push({..._.cloneDeep(this.parentItem),key:e})},handleDetail(e){this.showPopover?this.showPopover=!1:(this.columnDetail=this.columns[e],this.currentDetailRef=this.buttonRefs[e],this.currentIndex=e,this.showPopover=!0)},handleRemove(e){this.columns.splice(e,1)},handleClosePopover(){this.showPopover=!1},onClickOutside(e){var t,o,n,i,l,a,r,s,d,u,c,p,m,h,f,v,g,y;const b=null==(i=null==(n=null==(o=null==(t=this.popoverRef.$refs)?void 0:t.tooltipRef)?void 0:o.$refs)?void 0:n.popperRef)?void 0:i.contentRef,w=this.buttonRefs[this.currentIndex],k=null==(c=null==(u=null==(d=null==(s=null==(r=null==(a=null==(l=this.$refs.templateDefaultInput)?void 0:l.$refs)?void 0:a.tempaleInput)?void 0:r.$refs)?void 0:s.tooltipRef)?void 0:d.$refs)?void 0:u.popperRef)?void 0:c.contentRef,_=null==(y=null==(g=null==(v=null==(f=null==(h=null==(m=null==(p=this.$refs.templateHeaderInput)?void 0:p.$refs)?void 0:m.tempaleInput)?void 0:h.$refs)?void 0:f.tooltipRef)?void 0:v.$refs)?void 0:g.popperRef)?void 0:y.contentRef;!b||b.contains(e.target)||w&&w.contains(e.target)||k&&(!k||k.contains(e.target))||_&&(!_||_.contains(e.target))||(this.showPopover=!1)},handleMoveStart(){this.showPopover=!1},handleExpand(e){this.columns[e].isExpand=!this.columns[e].isExpand}}},_hoisted_1$Z={class:"fm-columns-config-container"},_hoisted_2$O={key:0,class:"column-config-header"},_hoisted_3$F=["onClick"],_hoisted_4$D=vue.createElementVNode("i",{class:"fm-iconfont icon-zidingyishuju"},null,-1),_hoisted_5$B=[_hoisted_4$D],_hoisted_6$x=["onClick"],_hoisted_7$t=vue.createElementVNode("i",{class:"fm-iconfont icon-icon_function_shouqi"},null,-1),_hoisted_8$m=[_hoisted_7$t],_hoisted_9$j=["onClick"],_hoisted_10$f=vue.createElementVNode("i",{class:"fm-iconfont icon-delete"},null,-1),_hoisted_11$e=[_hoisted_10$f],_hoisted_12$c=vue.createElementVNode("i",{class:"drag-item",style:{"font-size":"16px",margin:"0 5px",cursor:"move"}},[vue.createElementVNode("i",{class:"fm-iconfont icon-drag"})],-1),_hoisted_13$9={key:0,class:"column-config-parent"},_hoisted_14$7=vue.createElementVNode("i",{style:{"font-size":"12px","font-weight":"600"},class:"fm-iconfont icon-plus"},null,-1),_hoisted_15$6=vue.createElementVNode("i",{style:{"font-size":"12px","font-weight":"600"},class:"fm-iconfont icon-plus"},null,-1),_hoisted_16$5=vue.createElementVNode("i",{class:"fm-iconfont icon-close"},null,-1),_hoisted_17$4=[_hoisted_16$5],_hoisted_18$2={style:{display:"flex","align-items":"center",height:"28px",width:"100%"}};function _sfc_render$1k(e,t,o,n,i,l){const a=vue.resolveComponent("el-input"),r=vue.resolveComponent("columns-config",!0),s=vue.resolveComponent("draggable"),d=vue.resolveComponent("el-button"),u=vue.resolveComponent("el-form-item"),c=vue.resolveComponent("el-switch"),p=vue.resolveComponent("el-radio-button"),m=vue.resolveComponent("el-radio-group"),h=vue.resolveComponent("template-input"),f=vue.resolveComponent("el-form"),v=vue.resolveComponent("el-scrollbar"),g=vue.resolveComponent("el-popover");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1$Z,[i.columns.length?(vue.openBlock(),vue.createElementBlock("div",_hoisted_2$O,[vue.createElementVNode("label",null,vue.toDisplayString(e.$t("fm.config.widget.columnLabel")),1),vue.createElementVNode("label",null,vue.toDisplayString(e.$t("fm.config.widget.columnProp")),1)])):vue.createCommentVNode("",!0),vue.createVNode(s,vue.mergeProps({modelValue:i.columns,"onUpdate:modelValue":t[0]||(t[0]=e=>i.columns=e)},{group:{name:"options"+i.key},ghostClass:"ghost",handle:".drag-item"},{handle:".drag-item","item-key":"key",onStart:l.handleMoveStart}),{item:vue.withCtx((({element:e,index:t})=>[(vue.openBlock(),vue.createElementBlock("div",{key:e.key},[vue.createElementVNode("div",{class:vue.normalizeClass(["column-config-item",{"is-parent":e.isParent}])},[vue.createElementVNode("i",{class:vue.normalizeClass({"is-active":i.currentIndex==t}),ref:e=>{i.buttonRefs[t]=e},onClick:e=>l.handleDetail(t),style:{"font-size":"16px","margin-right":"5px",cursor:"pointer"}},_hoisted_5$B,10,_hoisted_3$F),vue.createVNode(a,{class:vue.normalizeClass({"is-template":e.headerSlot}),disabled:e.headerSlot,clearable:"",modelValue:e.label,"onUpdate:modelValue":t=>e.label=t,style:{margin:"0 3px"}},null,8,["class","disabled","modelValue","onUpdate:modelValue"]),e.isParent?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(a,{key:0,class:vue.normalizeClass({"is-template":e.defaultSlot}),disabled:e.defaultSlot,clearable:"",modelValue:e.prop,"onUpdate:modelValue":t=>e.prop=t,style:{margin:"0 3px"}},null,8,["class","disabled","modelValue","onUpdate:modelValue"])),e.isParent?(vue.openBlock(),vue.createElementBlock("i",{key:1,style:vue.normalizeStyle([{"font-size":"16px",margin:"0 5px",cursor:"pointer"},{transform:e.isExpand?"":"rotate(180deg)"}]),onClick:e=>l.handleExpand(t),class:"expand-action"},_hoisted_8$m,12,_hoisted_6$x)):vue.createCommentVNode("",!0),vue.createElementVNode("i",{style:{"font-size":"16px",margin:"0 5px",cursor:"pointer"},onClick:e=>l.handleRemove(t)},_hoisted_11$e,8,_hoisted_9$j),_hoisted_12$c],2),e.isParent?vue.withDirectives((vue.openBlock(),vue.createElementBlock("div",_hoisted_13$9,[vue.createVNode(r,{modelValue:e.children,"onUpdate:modelValue":t=>e.children=t},null,8,["modelValue","onUpdate:modelValue"])],512)),[[vue.vShow,e.isExpand]]):vue.createCommentVNode("",!0)]))])),_:1},16,["modelValue","onStart"]),vue.createVNode(d,{link:"",type:"primary",onClick:l.handleAdd},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.addColumn"))+" ",1),_hoisted_14$7])),_:1},8,["onClick"]),vue.createVNode(d,{link:"",type:"primary",onClick:l.handleParentAdd},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.addParentHeader"))+" ",1),_hoisted_15$6])),_:1},8,["onClick"]),vue.createVNode(g,{ref:"popoverRef","virtual-ref":i.currentDetailRef,trigger:"click","virtual-triggering":"",placement:"left",visible:i.showPopover,width:"360",title:e.$t("fm.config.widget.columnSetting")},{default:vue.withCtx((()=>[vue.createElementVNode("div",{class:"fm-columns-config-popover-close",onClick:t[1]||(t[1]=(...e)=>l.handleClosePopover&&l.handleClosePopover(...e))},_hoisted_17$4),vue.createVNode(v,{"max-height":"600px"},{default:vue.withCtx((()=>[vue.createVNode(f,{"label-position":"left","label-width":"85px",size:"small",class:"fm-columns-config-form"},{default:vue.withCtx((()=>[vue.createVNode(u,{label:e.$t("fm.config.widget.columnLabel")},{default:vue.withCtx((()=>[vue.createVNode(a,{modelValue:i.columnDetail.label,"onUpdate:modelValue":t[2]||(t[2]=e=>i.columnDetail.label=e)},null,8,["modelValue"])])),_:1},8,["label"]),i.columnDetail.isParent?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(u,{key:0,label:e.$t("fm.config.widget.columnProp")},{default:vue.withCtx((()=>[vue.createVNode(a,{modelValue:i.columnDetail.prop,"onUpdate:modelValue":t[3]||(t[3]=e=>i.columnDetail.prop=e)},null,8,["modelValue"])])),_:1},8,["label"])),vue.createVNode(u,{label:e.$t("fm.config.widget.columnWidth")},{default:vue.withCtx((()=>[vue.createVNode(a,{modelValue:i.columnDetail.width,"onUpdate:modelValue":t[4]||(t[4]=e=>i.columnDetail.width=e),modelModifiers:{number:!0},disabled:i.columnDetail.isParent},{suffix:vue.withCtx((()=>[vue.createTextVNode("px")])),_:1},8,["modelValue","disabled"])])),_:1},8,["label"]),vue.createVNode(u,{label:e.$t("fm.config.widget.ellipsis")},{default:vue.withCtx((()=>[vue.createVNode(c,{modelValue:i.columnDetail.ellipsis,"onUpdate:modelValue":t[5]||(t[5]=e=>i.columnDetail.ellipsis=e)},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(u,{label:e.$t("fm.config.widget.columnAlign")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:i.columnDetail.align,"onUpdate:modelValue":t[6]||(t[6]=e=>i.columnDetail.align=e),size:"small"},{default:vue.withCtx((()=>[vue.createVNode(p,{label:"left",value:"left"}),vue.createVNode(p,{label:"center",value:"center"}),vue.createVNode(p,{label:"right",value:"right"})])),_:1},8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(u,{label:e.$t("fm.config.widget.columnFixed")},{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_18$2,[vue.createVNode(c,{modelValue:i.columnDetail.fixed,"onUpdate:modelValue":t[7]||(t[7]=e=>i.columnDetail.fixed=e)},null,8,["modelValue"]),i.columnDetail.fixed?(vue.openBlock(),vue.createBlock(m,{key:0,modelValue:i.columnDetail.fixedOption,"onUpdate:modelValue":t[8]||(t[8]=e=>i.columnDetail.fixedOption=e),size:"small",style:{"margin-left":"20px"}},{default:vue.withCtx((()=>[vue.createVNode(p,{label:"left",value:"left"}),vue.createVNode(p,{label:"right",value:"right"})])),_:1},8,["modelValue"])):vue.createCommentVNode("",!0)])])),_:1},8,["label"]),vue.createVNode(u,{label:e.$t("fm.config.widget.rowspan")},{default:vue.withCtx((()=>[vue.createVNode(c,{modelValue:i.columnDetail.isRowspan,"onUpdate:modelValue":t[9]||(t[9]=e=>i.columnDetail.isRowspan=e),disabled:!i.columnDetail.prop},null,8,["modelValue","disabled"])])),_:1},8,["label"]),i.columnDetail.isParent?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(u,{key:1,label:e.$t("fm.config.widget.columnDefaultSlot")},{default:vue.withCtx((()=>[vue.createVNode(c,{modelValue:i.columnDetail.defaultSlot,"onUpdate:modelValue":t[10]||(t[10]=e=>i.columnDetail.defaultSlot=e)},null,8,["modelValue"]),i.columnDetail.defaultSlot?(vue.openBlock(),vue.createBlock(h,{key:0,prefix:'<template #default="scope">',suffix:"</template>",modelValue:i.columnDetail.defaultSlotTemplate,"onUpdate:modelValue":t[11]||(t[11]=e=>i.columnDetail.defaultSlotTemplate=e),ref:"templateDefaultInput",style:{"margin-left":"20px",width:"169px"}},null,8,["modelValue"])):vue.createCommentVNode("",!0)])),_:1},8,["label"])),vue.createVNode(u,{label:e.$t("fm.config.widget.columnHeaderSlot")},{default:vue.withCtx((()=>[vue.createVNode(c,{modelValue:i.columnDetail.headerSlot,"onUpdate:modelValue":t[12]||(t[12]=e=>i.columnDetail.headerSlot=e)},null,8,["modelValue"]),i.columnDetail.headerSlot?(vue.openBlock(),vue.createBlock(h,{key:0,modelValue:i.columnDetail.headerSlotTemplate,"onUpdate:modelValue":t[13]||(t[13]=e=>i.columnDetail.headerSlotTemplate=e),prefix:"<template #header>",suffix:"</template>",ref:"templateHeaderInput",style:{"margin-left":"20px",width:"169px"}},null,8,["modelValue"])):vue.createCommentVNode("",!0)])),_:1},8,["label"])])),_:1})])),_:1})])),_:1},8,["virtual-ref","visible","title"])])}var ColumnsConfig=_export_sfc(_sfc_main$1m,[["render",_sfc_render$1k]]),OperationConfig_vue_vue_type_style_index_0_lang="";const _sfc_main$1l={components:{Draggable:draggableComponent},emits:["update:modelValue","on-add-buttonevent","on-edit-buttonevent"],props:{modelValue:{type:Object}},data(){return{data:this.modelValue,buttonItem:{name:"zh-cn"==this.$i18n.locale?"操作":"Operation",type:"primary",event:""}}},watch:{modelValue(e){this.data=this.modelValue},data(e){this.$emit("update:modelValue",e)}},methods:{handleRemove(e){this.data.buttons.splice(e,1)},handleEvent(e){this.data.buttons[e].event?this.$emit("on-edit-buttonevent",e,this.data.buttons[e].event):this.$emit("on-add-buttonevent",e)},handleAdd(){const e=Math.random().toString(36).slice(-8);this.data.buttons.push({...this.buttonItem,key:e})}}},_hoisted_1$Y={class:"fm-operation-config-container"},_hoisted_2$N={class:"button-config-item"},_hoisted_3$E=vue.createElementVNode("i",{class:"fm-iconfont icon-zidingyishuju"},null,-1),_hoisted_4$C=["onClick"],_hoisted_5$A=vue.createElementVNode("i",{class:"fm-iconfont icon-delete"},null,-1),_hoisted_6$w=[_hoisted_5$A],_hoisted_7$s=vue.createElementVNode("i",{class:"drag-item",style:{"font-size":"16px",margin:"0 5px",cursor:"move"}},[vue.createElementVNode("i",{class:"fm-iconfont icon-drag"})],-1),_hoisted_8$l=vue.createElementVNode("i",{style:{"font-size":"12px","font-weight":"600"},class:"fm-iconfont icon-plus"},null,-1);function _sfc_render$1j(e,t,o,n,i,l){const a=vue.resolveComponent("el-input-number"),r=vue.resolveComponent("el-form-item"),s=vue.resolveComponent("el-input"),d=vue.resolveComponent("el-option"),u=vue.resolveComponent("el-select"),c=vue.resolveComponent("el-button"),p=vue.resolveComponent("draggable");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1$Y,[vue.createVNode(r,{label:e.$t("fm.config.widget.width")},{default:vue.withCtx((()=>[vue.createVNode(a,{modelValue:i.data.width,"onUpdate:modelValue":t[0]||(t[0]=e=>i.data.width=e)},null,8,["modelValue"]),vue.createTextVNode(" px ")])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.operationButton")},{default:vue.withCtx((()=>[vue.createVNode(p,vue.mergeProps({modelValue:i.data.buttons,"onUpdate:modelValue":t[1]||(t[1]=e=>i.data.buttons=e)},{group:{name:"buttons"},ghostClass:"ghost",handle:".drag-item"},{handle:".drag-item","item-key":"key"}),{item:vue.withCtx((({element:t,index:o})=>[(vue.openBlock(),vue.createElementBlock("div",{key:t.key},[vue.createElementVNode("div",_hoisted_2$N,[vue.createVNode(s,{modelValue:t.name,"onUpdate:modelValue":e=>t.name=e,style:{margin:"0 3px"}},null,8,["modelValue","onUpdate:modelValue"]),vue.createVNode(u,{modelValue:t.type,"onUpdate:modelValue":e=>t.type=e,class:"type-select"},{default:vue.withCtx((()=>[vue.createVNode(d,{label:e.$t("fm.config.widget.primaryButton"),value:"primary"},null,8,["label"]),vue.createVNode(d,{label:e.$t("fm.config.widget.defaultButton"),value:"default"},null,8,["label"]),vue.createVNode(d,{label:e.$t("fm.config.widget.textButton"),value:"text"},null,8,["label"]),vue.createVNode(d,{label:e.$t("fm.config.widget.linkButton"),value:"link"},null,8,["label"])])),_:2},1032,["modelValue","onUpdate:modelValue"]),vue.createVNode(c,{plain:"",type:t.event?"primary":"default",style:{margin:"0 5px","font-size":"12px"},onClick:e=>l.handleEvent(o)},{default:vue.withCtx((()=>[_hoisted_3$E])),_:2},1032,["type","onClick"]),vue.createElementVNode("i",{style:{"font-size":"16px",margin:"0 5px",cursor:"pointer"},onClick:e=>l.handleRemove(o)},_hoisted_6$w,8,_hoisted_4$C),_hoisted_7$s])]))])),_:1},16,["modelValue"]),vue.createVNode(c,{link:"",type:"primary",onClick:l.handleAdd},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.addButton"))+" ",1),_hoisted_8$l])),_:1},8,["onClick"])])),_:1},8,["label"])])}var OperationConfig=_export_sfc(_sfc_main$1l,[["render",_sfc_render$1j]]),ExtendProp_vue_vue_type_style_index_0_lang="";const _sfc_main$1k={name:"extend-prop-config",components:{FormulaInput:FormulaInput},emits:["update:modelValue"],props:{modelValue:{type:Object,default:()=>({})}},data(){return{extendArray:this.transformExtends(this.modelValue)}},watch:{extendArray:{deep:!0,handler(e){this.$emit("update:modelValue",this.transformExtends(e))}}},methods:{transformExtends(e){if(Array.isArray(e)){let t={};return e&&e.length&&e.forEach((e=>{e.key&&(t[e.key.trim()]="fx"==e.valueType||"function"==e.valueType?`{{${e.value}}}`:e.value)})),t}return e?Object.keys(e).map((t=>({key:t,valueType:isExpression(e[t])?"fx":typeof e[t],value:isExpression(e[t])?extractExpression(e[t]):e[t]}))):[]},handleAdd(){this.extendArray.push({key:"key"+(this.extendArray.length+1),valueType:"string",value:""})},handleRemove(e){this.extendArray.splice(e,1)}}},_hoisted_1$X={class:"fm-extend-config"},_hoisted_2$M={class:"fm-extend-content"},_hoisted_3$D=["onClick"],_hoisted_4$B=vue.createElementVNode("i",{class:"fm-iconfont icon-delete"},null,-1),_hoisted_5$z=[_hoisted_4$B],_hoisted_6$v=vue.createElementVNode("i",{class:"fm-iconfont icon-plus",style:{"font-size":"12px",margin:"5px"}},null,-1);function _sfc_render$1i(e,t,o,n,i,l){const a=vue.resolveComponent("el-input"),r=vue.resolveComponent("formula-input"),s=vue.resolveComponent("el-option"),d=vue.resolveComponent("el-select"),u=vue.resolveComponent("el-button");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1$X,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.extendArray,((t,o)=>(vue.openBlock(),vue.createElementBlock("div",{key:o,class:"fm-extend-item"},[vue.createVNode(a,{modelValue:t.key,"onUpdate:modelValue":e=>t.key=e,placeholder:"Key",type:"textarea",autosize:""},null,8,["modelValue","onUpdate:modelValue"]),vue.createElementVNode("div",_hoisted_2$M,["fx"===t.valueType?(vue.openBlock(),vue.createBlock(r,{key:0,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,only:""},null,8,["modelValue","onUpdate:modelValue"])):"number"===t.valueType?(vue.openBlock(),vue.createBlock(a,{key:1,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,modelModifiers:{number:!0},placeholder:"Value",type:"number"},null,8,["modelValue","onUpdate:modelValue"])):"boolean"===t.valueType?(vue.openBlock(),vue.createBlock(d,{key:2,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e},{default:vue.withCtx((()=>[vue.createVNode(s,{label:"true",value:!0}),vue.createVNode(s,{label:"false",value:!1})])),_:2},1032,["modelValue","onUpdate:modelValue"])):(vue.openBlock(),vue.createBlock(a,{key:3,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,placeholder:"Value",type:"textarea",autosize:""},null,8,["modelValue","onUpdate:modelValue"])),vue.createVNode(d,{modelValue:t.valueType,"onUpdate:modelValue":e=>t.valueType=e,class:"fm-extend-select"},{default:vue.withCtx((()=>[vue.createVNode(s,{label:e.$t("fm.rules.label.string"),value:"string"},null,8,["label"]),vue.createVNode(s,{label:e.$t("fm.rules.label.number"),value:"number"},null,8,["label"]),vue.createVNode(s,{label:e.$t("fm.rules.label.boolean"),value:"boolean"},null,8,["label"]),vue.createVNode(s,{label:e.$t("fm.rules.label.fx"),value:"fx"},null,8,["label"])])),_:2},1032,["modelValue","onUpdate:modelValue"])]),vue.createElementVNode("i",{onClick:e=>l.handleRemove(o),style:{"font-size":"16px",margin:"0 10px",cursor:"pointer",color:"#F56C6C"}},_hoisted_5$z,8,_hoisted_3$D)])))),128)),vue.createVNode(u,{text:"",bg:"",plain:"",type:"primary",style:{width:"100%"},size:"small",onClick:l.handleAdd},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.add")),1),_hoisted_6$v])),_:1},8,["onClick"])])}var ExtendPropConfig=_export_sfc(_sfc_main$1k,[["render",_sfc_render$1i]]),StateConfig_vue_vue_type_style_index_0_lang="";const _sfc_main$1j={name:"state-config",components:{FormulaInput:FormulaInput},emits:["update:modelValue"],props:{label:{type:String},modelValue:{type:[String,Boolean]}},data:()=>({select:!1,fx:!1,fxValue:""}),created(){this.transformData(this.modelValue)},watch:{select(e){this.$emit("update:modelValue",this.transformValue())},fx(e){this.$emit("update:modelValue",this.transformValue())},fxValue(e){this.$emit("update:modelValue",this.transformValue())}},methods:{transformData(e){"boolean"==typeof e&&(this.select=e,this.fx=!1),"string"==typeof e&&(this.select=!0,this.fx=!0,this.fxValue=extractExpression(e))},transformValue(){return!!this.select&&(!this.fx||`{{${this.fxValue}}}`)}}},_hoisted_1$W={class:"fm-state-config"},_hoisted_2$L={class:"fm-state-item"},_hoisted_3$C={key:0,class:"fm-state-content"},_hoisted_4$A={key:0};function _sfc_render$1h(e,t,o,n,i,l){const a=vue.resolveComponent("el-switch"),r=vue.resolveComponent("el-radio"),s=vue.resolveComponent("el-radio-group"),d=vue.resolveComponent("formula-input");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1$W,[vue.createElementVNode("div",_hoisted_2$L,[vue.createElementVNode("div",null,vue.toDisplayString(o.label)+":",1),vue.createElementVNode("div",null,[vue.createVNode(a,{modelValue:i.select,"onUpdate:modelValue":t[0]||(t[0]=e=>i.select=e)},null,8,["modelValue"])])]),i.select?(vue.openBlock(),vue.createElementBlock("div",_hoisted_3$C,[vue.createElementVNode("div",null,[vue.createVNode(s,{modelValue:i.fx,"onUpdate:modelValue":t[1]||(t[1]=e=>i.fx=e),size:"small"},{default:vue.withCtx((()=>[vue.createVNode(r,{label:e.$t("fm.formula.input.value2"),value:!1},null,8,["label"]),vue.createVNode(r,{label:e.$t("fm.formula.input.fx"),value:!0},null,8,["label"])])),_:1},8,["modelValue"])]),i.fx?(vue.openBlock(),vue.createElementBlock("div",_hoisted_4$A,[vue.createVNode(d,{modelValue:i.fxValue,"onUpdate:modelValue":t[2]||(t[2]=e=>i.fxValue=e),only:"",size:"small"},null,8,["modelValue"])])):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0)])}var StateConfig=_export_sfc(_sfc_main$1j,[["render",_sfc_render$1h]]);const _sfc_main$1i={components:{Draggable:draggableComponent,CodeEditor:CodeEditor,CodeDialog:CodeDialog,CusDialog:CusDialog,FmFormTable:FmFormTable$1,EventConfig:EventConfig,Editor:_sfc_main$1t,ObjectDynamic:ObjectDynamic,FormulaInput:FormulaInput,ArrayDynamic:ArrayDynamic,ColumnsConfig:ColumnsConfig,OperationConfig:OperationConfig,ExtendPropConfig:ExtendPropConfig,StateConfig:StateConfig},props:["data","sheets","platform","datasources","eventscripts","formKey","fieldModels"],emits:["on-event-add","on-event-edit","on-event-remove","on-datasource-edit","on-class-edit"],inject:["getModelNode"],data(){return{validator:{type:null,required:null,pattern:null,range:null,length:null,validator:null},editorVisible:!1,editorValue:"",tableVisible:!1,customClassArray:this.data&&this.data.options&&this.data.options.customClass?this.data.options.customClass.split(" ").filter((e=>e)):[],kindEditorToolbar:[[{label:"HTML代码",value:"source"}],[{label:"后退(Ctrl+Z)",value:"undo"},{label:"前进(Ctrl+Y)",value:"redo"}],[{label:"预览",value:"preview"},{label:"打印",value:"print"},{label:"剪切(Ctrl+X)",value:"cut"},{label:"复制(Ctrl+C)",value:"copy"},{label:"粘贴",value:"paste"},{label:"粘贴为无格式文本",value:"plainpaste"},{label:"从Word粘贴",value:"wordpaste"}],[{label:"左对齐",value:"justifyleft"},{label:"居中",value:"justifycenter"},{label:"右对齐",value:"justifyright"},{label:"两端对齐",value:"justifyfull"},{label:"编号",value:"insertorderedlist"},{label:"项目符号",value:"insertunorderedlist"},{label:"增加缩进",value:"indent"},{label:"减少缩进",value:"outdent"},{label:"下标",value:"subscript"},{label:"上标",value:"superscript"},{label:"清理HTML代码",value:"clearhtml"},{label:"一键排版",value:"quickformat"},{label:"全选(Ctrl+A)",value:"selectall"}],[{label:"全屏",value:"fullscreen"},{label:"段落",value:"formatblock"},{label:"字体",value:"fontname"},{label:"文字大小",value:"fontsize"}],[{label:"文字颜色",value:"forecolor"},{label:"文字背景",value:"hilitecolor"},{label:"粗体(Ctrl+B)",value:"bold"},{label:"斜体(Ctrl+I)",value:"italic"},{label:"下划线(Ctrl+U)",value:"underline"},{label:"删除线",value:"strikethrough"},{label:"行距",value:"lineheight"},{label:"删除格式",value:"removeformat"}],[{label:"图片",value:"image"},{label:"插入文件",value:"insertfile"},{label:"表格",value:"table"},{label:"插入横线",value:"hr"},{label:"插入分页符",value:"pagebreak"},{label:"锚点",value:"anchor"},{label:"超链接",value:"link"},{label:"取消超链接",value:"unlink"}]]}},computed:{show(){return!!(this.data&&Object.keys(this.data).length>0&&this.data.key&&this.data.options)}},mounted(){this.validateRequired(!(!this.data||!this.data.options)&&this.data.options.required),this.validateDataType(this.data&&this.data.options?this.data.options.dataType:""),this.valiatePattern(this.data&&this.data.options?this.data.options.pattern:""),this.validateCustom(this.data&&this.data.options?this.data.options.validator:"")},methods:{handleCopyField(){const e=document.createElement("textarea");e.value=this.getModelNode()+this.data.model,document.getElementsByClassName("clipboard-content")[0].appendChild(e),e.select(),document.execCommand("copy"),document.getElementsByClassName("clipboard-content")[0].removeChild(e),elementPlus.ElMessage({message:this.$t("fm.message.copySuccess"),type:"success"})},handleOptionsRemove(e){"grid"===this.data.type?this.data.columns.splice(e,1):"tabs"===this.data.type||"collapse"===this.data.type?this.data.tabs.splice(e,1):"imgupload"===this.data.type||"fileupload"===this.data.type?this.data.options.headers.splice(e,1):"steps"===this.data.type?this.data.options.steps.splice(e,1):"transfer"===this.data.type?this.data.options.data.splice(e,1):(!this.data.options.remote&&this.data.options.options[e].value&&(this.data.options.defaultValue="string"==typeof this.data.options.defaultValue?"":[]),this.data.options.options.splice(e,1)),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleClearSelect(){"checkbox"==this.data.type||"select"==this.data.type&&this.data.options.multiple||"transfer"==this.data.type?this.data.options.defaultValue=[]:this.data.options.defaultValue="",this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleAddData(){this.data.options.data.push({key:"",label:""}),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleAddStep(){this.data.options.steps.push({title:"New Step",description:""}),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleAddOption(){this.data.options.showLabel?this.data.options.options.push({value:this.$t("fm.config.widget.newOption"),label:this.$t("fm.config.widget.newOption")}):this.data.options.options.push({value:this.$t("fm.config.widget.newOption")}),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleAddTab(){let e=this.data.tabs.length;this.data.tabs.push({label:this.$t("fm.config.widget.tab")+(e+1),name:"tab_"+Math.random().toString(36).slice(-8),list:[]}),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleAddCollapse(){let e=this.data.tabs.length;this.data.tabs.push({title:this.$t("fm.config.widget.collapse")+(e+1),name:"collapse_"+Math.random().toString(36).slice(-8),list:[]}),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleAddHeader(){"headers"in this.data.options?this.data.options.headers.push({key:"",value:""}):this.data.options.headers=[{key:"",value:""}],this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},generateRule(){this.data&&(this.data.rules=[],Object.keys(this.validator).forEach((e=>{this.validator[e]&&this.data.rules.push(this.validator[e])})))},handleSelectMuliple(e){"select"!=this.data.type&&"treeselect"!=this.data.type||(e?this.data.options.defaultValue?this.data.options.defaultValue=[this.data.options.defaultValue]:this.data.options.defaultValue=[]:this.data.options.defaultValue.length>0?this.data.options.defaultValue=this.data.options.defaultValue[0]:this.data.options.defaultValue="")},handleSelectSelectType(e){if("orgselector"===this.data.type)if("company"===e)if(this.data.options.defaultValue){const e=this.data.options.defaultValue.filter((e=>"1"==e.type));this.data.options.defaultValue=e}else this.data.options.defaultValue=[];else if("dept"===e)if(this.data.options.defaultValue){const e=this.data.options.defaultValue.filter((e=>"2"==e.type));this.data.options.defaultValue=e}else this.data.options.defaultValue=[]},handleSetTemplate(){this.$refs.codeDialog.open(this.data.options.template)},handleTemplateConfirm(e){try{this.data.options.template=e,this.$refs.codeDialog.close(),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}catch(t){this.$refs.codeDialog.end(),elementPlus.ElMessage({message:t.message,type:"error"})}},handleSetEditorValue(){this.editorVisible=!0,this.editorValue=this.data.options.defaultValue},handleEditorValueConfirm(e){try{this.data.options.defaultValue=this.editorValue,this.editorVisible=!1,this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}catch(t){this.editorVisible=!1,elementPlus.ElMessage({message:t.message,type:"error"})}},handleSetDefaultValue(){this.$refs.defaultValueDialog.open(this.data.options.defaultValue)},handleDefaultValueConfirm(e){try{this.data.options.defaultValue="string"==typeof e?Function('"use strict";return ('+e+")")():e,this.$refs.defaultValueDialog.close(),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}catch(t){this.$refs.defaultValueDialog.end(),elementPlus.ElMessage({message:t.message,type:"error"})}},handleSetCascader(){this.$refs.cascaderDialog.open(this.data.options.options)},handleCascaderConfirm(e){try{this.data.options.options="string"==typeof e?Function('"use strict";return ('+e+")")():e,this.$refs.cascaderDialog.close(),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}catch(t){this.$refs.cascaderDialog.end(),elementPlus.ElMessage({message:t.message,type:"error"})}},handleSetTree(){this.$refs.treeDialog.open(this.data.options.options)},handleTreeConfirm(e){try{this.data.options.options="string"==typeof e?Function('"use strict";return ('+e+")")():e,this.$refs.treeDialog.close(),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}catch(t){this.$refs.treeDialog.end(),elementPlus.ElMessage({message:t.message,type:"error"})}},handleSetProps(){this.data.options.extendProps||(this.data.options.extendProps={}),this.$refs.extendPropsDialog.open(this.data.options.extendProps)},handlePropsConfirm(e){try{this.data.options.extendProps="string"==typeof e?Function('"use strict";return ('+e+")")():e,this.$refs.extendPropsDialog.close(),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}catch(t){this.$refs.extendPropsDialog.end(),elementPlus.ElMessage({message:t.message,type:"error"})}},validateRequired(e){this.validator.required=e?{required:!0,message:this.data.options.requiredMessage?this.data.options.requiredMessage:""}:null,this.$nextTick((()=>{this.generateRule()}))},validateDataType(e){if(!this.show)return!1;!e||!this.data.options.dataTypeCheck&&Object.keys(this.data.options).includes("dataTypeCheck")?this.validator.type=null:this.validator.type={type:e,message:this.data.options.dataTypeMessage?this.data.options.dataTypeMessage:""},this.generateRule()},valiatePattern(e){if(!this.show)return!1;!e||!this.data.options.patternCheck&&Object.keys(this.data.options).includes("patternCheck")?this.validator.pattern=null:this.validator.pattern={pattern:e,message:this.data.options.patternMessage?this.data.options.patternMessage:""},this.generateRule()},validateCustom(e){if(!this.show)return!1;e&&this.data.options.validatorCheck?this.validator.validator={func:e}:this.validator.validator=null,this.generateRule()},handleSetClass(){this.$emit("on-class-edit")},handleDatasourceManage(e){this.$emit("on-datasource-edit",e)},handleEventAdd(e){this.$emit("on-event-add",e)},handleEventEdit({eventName:e,functionKey:t}){this.$emit("on-event-edit",{eventName:e,functionKey:t})},handleEventRemove(e){this.$emit("on-event-remove",e),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},setEvent(e){if(e.type.includes("operate_")&&"list"==this.data.type){const t=e.type.match(/^operate_(\d+)$/);if(t){const o=Number(t[1]);this.data.options.operations.buttons[o].event=e.key}}else this.data.events[e.type]=e.key;this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleDataSourceChange(e){var t;let o=null==(t=this.datasources.find((t=>t.value==e)))?void 0:t.args;o&&(this.data.options.remoteArgs=o)},handleDynamicDataSourceChange(e){var t;let o=null==(t=this.datasources.find((t=>t.value==e)))?void 0:t.args;o&&(this.data.options.dynamicValueArgs=o)},handleButtonEventAdd(e){this.$emit("on-event-add","operate_"+e)},handleButtonEventEdit(e,t){this.$emit("on-event-edit",{eventName:"operate_"+e,functionKey:t})}},watch:{"data.options.isRange":function(e){void 0!==e&&(e?this.data.options.defaultValue=null:Object.keys(this.data.options).indexOf("defaultValue")>=0&&(this.data.options.defaultValue=""))},"data.options.type":function(e){"date"==this.data.type&&(this.data.options.defaultValue="daterange"==e||"datetimerange"==e||"dates"==e||"monthrange"==e?[]:"")},"data.options.required":function(e){this.validateRequired(e)},"data.options.requiredMessage":function(e){this.validateRequired(!(!this.data||!this.data.options)&&this.data.options.required)},"data.options.dataType":function(e){this.validateDataType(e)},"data.options.dataTypeCheck":function(e){this.validateDataType(this.data&&this.data.options?this.data.options.dataType:"")},"data.options.dataTypeMessage":function(e){this.validateDataType(this.data&&this.data.options?this.data.options.dataType:"")},"data.options.pattern":function(e){this.valiatePattern(e)},"data.options.patternCheck":function(e){this.valiatePattern(this.data&&this.data.options?this.data.options.pattern:"")},"data.options.patternMessage":function(e){this.valiatePattern(this.data&&this.data.options?this.data.options.pattern:"")},"data.options.validator":function(e){this.validateCustom(e)},"data.options.validatorCheck":function(e){this.validateCustom(this.data&&this.data.options?this.data.options.validator:"")},"data.options.options":{deep:!0,handler(e){this.data.options&&"object"==typeof this.data.options.defaultValue&&Array.isArray(this.data.options.defaultValue)&&(this.data.options.defaultValue=this.data.options.defaultValue.filter((t=>e.map((e=>e.value)).includes(t)))),this.data.options&&"string"==typeof this.data.options.defaultValue&&("object"!=typeof e||e.map((e=>e.value)).includes(this.data.options.defaultValue)||(this.data.options.defaultValue=""))}},"data.options.customClass":function(e){this.customClassArray=this.data&&this.data.options&&this.data.options.customClass?this.data.options.customClass.split(" ").filter((e=>e)):[]},"data.options.format":function(e){this.data.options.defaultValue=""},customClassArray(e){this.data.options.customClass=e.join(" ")}}},_hoisted_1$V=vue.createElementVNode("i",{class:"icon fm-iconfont icon-extend",style:{"font-size":"14px"}},null,-1),_hoisted_2$K=["title"],_hoisted_3$B={key:0,style:{"font-size":"13px","word-break":"break-all","line-height":"1.2",color:"#e6a23c",padding:"0 5px 5px 5px"}},_hoisted_4$z={style:{display:"flex"},class:"clipboard-content"},_hoisted_5$y={key:11},_hoisted_6$u={style:{height:"300px","overflow-y":"auto"}},_hoisted_7$r=vue.createElementVNode("i",{class:"fm-iconfont icon-justify-content-flex-start-icon"},null,-1),_hoisted_8$k=vue.createElementVNode("i",{class:"fm-iconfont icon-justify-content-flex-end-icon"},null,-1),_hoisted_9$i=vue.createElementVNode("i",{class:"fm-iconfont icon-justify-content-center-icon"},null,-1),_hoisted_10$e=vue.createElementVNode("i",{class:"fm-iconfont icon-justify-content-space-between-icon"},null,-1),_hoisted_11$d=vue.createElementVNode("i",{class:"fm-iconfont icon-justify-content-space-around-icon"},null,-1),_hoisted_12$b=vue.createElementVNode("i",{class:"fm-iconfont icon-justify-content-space-evenly-icon"},null,-1),_hoisted_13$8=vue.createElementVNode("i",{class:"fm-iconfont icon-align-items-flex-start"},null,-1),_hoisted_14$6=vue.createElementVNode("i",{class:"fm-iconfont icon-align-items-flex-end"},null,-1),_hoisted_15$5=vue.createElementVNode("i",{class:"fm-iconfont icon-align-items-center"},null,-1),_hoisted_16$4=vue.createElementVNode("i",{class:"fm-iconfont icon-align-items-stretch"},null,-1),_hoisted_17$3=vue.createElementVNode("i",{class:"fm-iconfont icon-text-align-left"},null,-1),_hoisted_18$1=vue.createElementVNode("i",{class:"fm-iconfont icon-text-align-center"},null,-1),_hoisted_19$1=vue.createElementVNode("i",{class:"fm-iconfont icon-text-align-right"},null,-1),_hoisted_20$1=vue.createElementVNode("i",{class:"fm-iconfont icon-ic24-vertical-align-top"},null,-1),_hoisted_21$1=vue.createElementVNode("i",{class:"fm-iconfont icon-vertical-align-middle-outlined"},null,-1),_hoisted_22$1=vue.createElementVNode("i",{class:"fm-iconfont icon-ic24-vertical-align-bottom"},null,-1),_hoisted_23$1={key:1,style:{display:"flex","align-items":"center","margin-bottom":"5px"}},_hoisted_24$1=vue.createElementVNode("i",{class:"fm-iconfont icon-pm"},null,-1),_hoisted_25$1=vue.createElementVNode("i",{class:"drag-item",style:{"font-size":"16px",margin:"0 5px",cursor:"move"}},[vue.createElementVNode("i",{class:"fm-iconfont icon-icon_bars"})],-1),_hoisted_26$1=["onClick"],_hoisted_27$1=vue.createElementVNode("i",{class:"fm-iconfont icon-delete"},null,-1),_hoisted_28$1=[_hoisted_27$1],_hoisted_29$1={style:{"margin-left":"22px"}},_hoisted_30$1=vue.createElementVNode("i",{class:"drag-item",style:{"font-size":"16px",margin:"0 5px",cursor:"move"}},[vue.createElementVNode("i",{class:"fm-iconfont icon-icon_bars"})],-1),_hoisted_31$1=["onClick"],_hoisted_32$1=vue.createElementVNode("i",{class:"fm-iconfont icon-delete"},null,-1),_hoisted_33$1=[_hoisted_32$1],_hoisted_34$1={style:{"margin-left":"22px"}},_hoisted_35={key:0},_hoisted_36={key:1,style:{display:"flex","align-items":"center","margin-bottom":"5px"}},_hoisted_37=vue.createElementVNode("i",{class:"fm-iconfont icon-pm"},null,-1),_hoisted_38={key:0},_hoisted_39=vue.createElementVNode("i",{class:"drag-item",style:{"font-size":"16px",margin:"0 5px",cursor:"move"}},[vue.createElementVNode("i",{class:"fm-iconfont icon-icon_bars"})],-1),_hoisted_40=["onClick"],_hoisted_41=vue.createElementVNode("i",{class:"fm-iconfont icon-delete"},null,-1),_hoisted_42=[_hoisted_41],_hoisted_43=vue.createElementVNode("i",{class:"drag-item",style:{"font-size":"16px",margin:"0 5px",cursor:"move"}},[vue.createElementVNode("i",{class:"fm-iconfont icon-icon_bars"})],-1),_hoisted_44=["onClick"],_hoisted_45=vue.createElementVNode("i",{class:"fm-iconfont icon-delete"},null,-1),_hoisted_46=[_hoisted_45],_hoisted_47={key:3,style:{"margin-left":"22px"}},_hoisted_48={key:1,style:{display:"flex","align-items":"center","margin-bottom":"5px"}},_hoisted_49=vue.createElementVNode("i",{class:"fm-iconfont icon-pm"},null,-1),_hoisted_50={style:{display:"inline-block","vertical-align":"middle"}},_hoisted_51=vue.createElementVNode("br",null,null,-1),_hoisted_52=vue.createElementVNode("i",{class:"drag-item",style:{"font-size":"16px",margin:"0 5px",cursor:"move"}},[vue.createElementVNode("i",{class:"fm-iconfont icon-icon_bars"})],-1),_hoisted_53=["onClick"],_hoisted_54=vue.createElementVNode("i",{class:"fm-iconfont icon-delete"},null,-1),_hoisted_55=[_hoisted_54],_hoisted_56={style:{"margin-left":"5px"}},_hoisted_57={key:1,style:{display:"flex","align-items":"center","margin-bottom":"5px"}},_hoisted_58=vue.createElementVNode("i",{class:"fm-iconfont icon-pm"},null,-1),_hoisted_59={style:{display:"inline-block","vertical-align":"middle"}},_hoisted_60=vue.createElementVNode("br",null,null,-1),_hoisted_61=vue.createElementVNode("i",{class:"drag-item",style:{"font-size":"16px",margin:"0 5px",cursor:"move"}},[vue.createElementVNode("i",{class:"fm-iconfont icon-icon_bars"})],-1),_hoisted_62=["onClick"],_hoisted_63=vue.createElementVNode("i",{class:"fm-iconfont icon-delete"},null,-1),_hoisted_64=[_hoisted_63],_hoisted_65={style:{"margin-left":"5px"}},_hoisted_66={key:1,style:{display:"flex","align-items":"center","margin-bottom":"5px"}},_hoisted_67=vue.createElementVNode("i",{class:"fm-iconfont icon-pm"},null,-1),_hoisted_68={style:{display:"flex","align-items":"center"}},_hoisted_69=vue.createElementVNode("i",{class:"fm-iconfont icon-pm"},null,-1),_hoisted_70={key:0,class:"validate-block"},_hoisted_71={key:1,class:"validate-block"},_hoisted_72={key:2,class:"validate-block"},_hoisted_73={key:3,class:"validate-block"},_hoisted_74={key:0},_hoisted_75=vue.createElementVNode("div",{style:{"font-size":"14px","font-weight":"500"},class:"code-line"},"(rule, value, callback) => {",-1),_hoisted_76=vue.createElementVNode("div",{style:{"font-size":"14px","font-weight":"500"},class:"code-line"},"}",-1),_hoisted_77={key:1,class:"empty"};function _sfc_render$1g(e,t,o,n,i,l){const a=vue.resolveComponent("el-tag"),r=vue.resolveComponent("el-form-item"),s=vue.resolveComponent("el-option"),d=vue.resolveComponent("el-select"),u=vue.resolveComponent("el-input"),c=vue.resolveComponent("el-checkbox"),p=vue.resolveComponent("el-input-number"),m=vue.resolveComponent("el-switch"),h=vue.resolveComponent("el-checkbox-group"),f=vue.resolveComponent("el-divider"),v=vue.resolveComponent("code-editor"),g=vue.resolveComponent("el-radio-button"),y=vue.resolveComponent("el-radio-group"),b=vue.resolveComponent("el-radio"),w=vue.resolveComponent("el-time-picker"),k=vue.resolveComponent("el-date-picker"),_=vue.resolveComponent("formula-input"),C=vue.resolveComponent("el-button"),x=vue.resolveComponent("el-tooltip"),S=vue.resolveComponent("object-dynamic"),V=vue.resolveComponent("array-dynamic"),N=vue.resolveComponent("draggable"),E=vue.resolveComponent("el-color-picker"),$=vue.resolveComponent("el-rate"),D=vue.resolveComponent("el-popover"),B=vue.resolveComponent("el-cascader"),T=vue.resolveComponent("el-tree-select"),O=vue.resolveComponent("el-collapse-item"),I=vue.resolveComponent("columns-config"),F=vue.resolveComponent("operation-config"),L=vue.resolveComponent("state-config"),P=vue.resolveComponent("extend-prop-config"),M=vue.resolveComponent("event-config"),A=vue.resolveComponent("el-collapse"),R=vue.resolveComponent("el-form"),z=vue.resolveComponent("code-dialog"),U=vue.resolveComponent("Editor"),W=vue.resolveComponent("cus-dialog"),j=vue.resolveComponent("el-scrollbar");return vue.openBlock(),vue.createBlock(j,null,{default:vue.withCtx((()=>{var n,j;return[vue.createElementVNode("div",null,[l.show?(vue.openBlock(),vue.createElementBlock("div",{key:o.data.key},[vue.createVNode(R,{"label-position":"top",size:"default",model:o.data},{default:vue.withCtx((()=>[vue.createVNode(r,{label:e.$t("fm.config.widget.widgetType")},{default:vue.withCtx((()=>[vue.createVNode(a,{effect:"plain"},{default:vue.withCtx((()=>["custom"===o.data.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[_hoisted_1$V,vue.createTextVNode("  "+vue.toDisplayString(e.$t("fm.components.custom.title")),1)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createElementVNode("i",{class:vue.normalizeClass(`fm-iconfont ${o.data.icon}`),style:{"font-size":"14px"}},null,2),vue.createTextVNode("  "+vue.toDisplayString(e.$t(`fm.components.fields.${o.data.type}`)),1)],64))])),_:1})])),_:1},8,["label"]),vue.createVNode(A,{class:"fm-widget-config-collapse","model-value":["basic","options","expend","columns","operation","paging"]},{default:vue.withCtx((()=>[vue.createVNode(O,{title:e.$t("fm.config.widget.basicSetting"),name:"basic"},{default:vue.withCtx((()=>["td"!=o.data.type&&"th"!=o.data.type&&"col"!=o.data.type?(vue.openBlock(),vue.createBlock(r,{key:0,required:!0,prop:"model",for:""},{label:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.model"))+" ",1),vue.createElementVNode("i",{class:"fm-iconfont icon-copy",title:e.$t("fm.tooltip.copy"),onClick:t[0]||(t[0]=(...e)=>l.handleCopyField&&l.handleCopyField(...e)),style:{cursor:"pointer","font-size":"18px",padding:"0 5px",color:"var(--fm-color-primary)"}},null,8,_hoisted_2$K)])),default:vue.withCtx((()=>{var e;return[l.getModelNode()?(vue.openBlock(),vue.createElementBlock("div",_hoisted_3$B,vue.toDisplayString(l.getModelNode()),1)):vue.createCommentVNode("",!0),vue.createElementVNode("div",_hoisted_4$z,[(null==(e=o.fieldModels)?void 0:e.length)>0?(vue.openBlock(),vue.createBlock(d,{key:0,modelValue:o.data.model,"onUpdate:modelValue":t[1]||(t[1]=e=>o.data.model=e),filterable:"","allow-create":"","default-first-option":"",style:{width:"100%"}},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.fieldModels,(e=>{var t;return vue.openBlock(),vue.createBlock(s,{key:e.fieldId,label:null!=(t=e.fieldLabel)?t:e.fieldId,value:e.fieldId},null,8,["label","value"])})),128))])),_:1},8,["modelValue"])):(vue.openBlock(),vue.createBlock(u,{key:1,clearable:"",modelValue:o.data.model,"onUpdate:modelValue":t[2]||(t[2]=e=>o.data.model=e)},null,8,["modelValue"]))])]})),_:1})):vue.createCommentVNode("",!0),"grid"!=o.data.type&&"tabs"!=o.data.type&&"collapse"!=o.data.type&&"report"!=o.data.type&&"inline"!=o.data.type&&"td"!=o.data.type&&"th"!=o.data.type&&"col"!=o.data.type&&"alert"!=o.data.type&&"dialog"!=o.data.type&&"card"!=o.data.type?(vue.openBlock(),vue.createBlock(r,{key:1,label:e.$t("fm.config.widget.name")},{default:vue.withCtx((()=>[vue.createVNode(u,{clearable:"",modelValue:o.data.name,"onUpdate:modelValue":t[3]||(t[3]=e=>o.data.name=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("buttonName")>=0?(vue.openBlock(),vue.createBlock(r,{key:2,label:e.$t("fm.config.widget.buttonName")},{default:vue.withCtx((()=>[vue.createVNode(u,{clearable:"",modelValue:o.data.options.buttonName,"onUpdate:modelValue":t[4]||(t[4]=e=>o.data.options.buttonName=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("linkName")>=0?(vue.openBlock(),vue.createBlock(r,{key:3,label:e.$t("fm.config.widget.linkName")},{default:vue.withCtx((()=>[vue.createVNode(u,{clearable:"",modelValue:o.data.options.linkName,"onUpdate:modelValue":t[5]||(t[5]=e=>o.data.options.linkName=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("title")>=0?(vue.openBlock(),vue.createBlock(r,{key:4,label:e.$t("fm.config.widget.otitle")},{default:vue.withCtx((()=>[vue.createVNode(u,{clearable:"",modelValue:o.data.options.title,"onUpdate:modelValue":t[6]||(t[6]=e=>o.data.options.title=e),type:"textarea",autosize:""},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("description")>=0?(vue.openBlock(),vue.createBlock(r,{key:5,label:e.$t("fm.config.widget.description")},{default:vue.withCtx((()=>[vue.createVNode(u,{clearable:"",modelValue:o.data.options.description,"onUpdate:modelValue":t[7]||(t[7]=e=>o.data.options.description=e),type:"textarea",autosize:""},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("width")>=0&&"td"!=o.data.type?(vue.openBlock(),vue.createBlock(r,{key:6,label:e.$t("fm.config.widget.width")},{default:vue.withCtx((()=>[vue.createVNode(u,{clearable:"",modelValue:o.data.options.width,"onUpdate:modelValue":t[8]||(t[8]=e=>o.data.options.width=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("height")>=0?(vue.openBlock(),vue.createBlock(r,{key:7,label:e.$t("fm.config.widget.height")},{default:vue.withCtx((()=>[vue.createVNode(u,{clearable:"",modelValue:o.data.options.height,"onUpdate:modelValue":t[9]||(t[9]=e=>o.data.options.height=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),"imgupload"==o.data.type&&Object.keys(o.data.options).indexOf("size")>=0?(vue.openBlock(),vue.createBlock(r,{key:8,label:e.$t("fm.config.widget.size")},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.width"))+" ",1),vue.createVNode(u,{clearable:"",style:{width:"90px"},type:"number",modelValue:o.data.options.size.width,"onUpdate:modelValue":t[10]||(t[10]=e=>o.data.options.size.width=e),modelModifiers:{number:!0}},null,8,["modelValue"]),vue.createTextVNode(" "+vue.toDisplayString(e.$t("fm.config.widget.height"))+" ",1),vue.createVNode(u,{clearable:"",style:{width:"90px"},type:"number",modelValue:o.data.options.size.height,"onUpdate:modelValue":t[11]||(t[11]=e=>o.data.options.size.height=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("labelWidth")>=0?(vue.openBlock(),vue.createBlock(r,{key:9,label:e.$t("fm.config.widget.labelWidth")},{default:vue.withCtx((()=>[vue.createVNode(c,{modelValue:o.data.options.isLabelWidth,"onUpdate:modelValue":t[12]||(t[12]=e=>o.data.options.isLabelWidth=e),style:{"margin-right":"5px"}},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.custom")),1)])),_:1},8,["modelValue"]),vue.createVNode(p,{modelValue:o.data.options.labelWidth,"onUpdate:modelValue":t[13]||(t[13]=e=>o.data.options.labelWidth=e),disabled:!o.data.options.isLabelWidth,min:0,max:99999,step:10},null,8,["modelValue","disabled"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),"grid"!=o.data.type&&"tabs"!=o.data.type&&"collapse"!=o.data.type&&"report"!=o.data.type&&"inline"!=o.data.type&&"divider"!=o.data.type&&"td"!=o.data.type&&"th"!=o.data.type&&"col"!=o.data.type&&"alert"!=o.data.type&&"dialog"!=o.data.type&&"card"!=o.data.type?(vue.openBlock(),vue.createBlock(r,{key:10,label:e.$t("fm.config.widget.labelWrap")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.labelWrap,"onUpdate:modelValue":t[14]||(t[14]=e=>o.data.options.labelWrap=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),"kindeditor"===o.data.type?(vue.openBlock(),vue.createElementBlock("div",_hoisted_5$y,[vue.createVNode(r,{label:"工具栏",class:"kind-editor-toolbar-setting"},{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_6$u,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.kindEditorToolbar,((e,t)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[e&&e.length>0?(vue.openBlock(),vue.createBlock(h,{key:t,modelValue:o.data.options.customToolbar[t],"onUpdate:modelValue":e=>o.data.options.customToolbar[t]=e},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e,(e=>(vue.openBlock(),vue.createBlock(c,{style:{display:"block"},label:e.value,value:e.value,key:e.value},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.label),1)])),_:2},1032,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])):vue.createCommentVNode("",!0),vue.createVNode(f,{class:"toolbar-divider"})],64)))),256))])])),_:1}),vue.createVNode(r,{label:"编辑器样式"},{default:vue.withCtx((()=>[(vue.openBlock(),vue.createBlock(v,{mode:"css",key:o.data.key,modelValue:o.data.options.cssData,"onUpdate:modelValue":t[15]||(t[15]=e=>o.data.options.cssData=e),height:"200px"},null,8,["modelValue"]))])),_:1})])):vue.createCommentVNode("",!0),"grid"!=o.data.type&&"tabs"!=o.data.type&&"collapse"!=o.data.type&&"report"!=o.data.type&&"inline"!=o.data.type&&"divider"!=o.data.type&&"td"!=o.data.type&&"th"!=o.data.type&&"col"!=o.data.type&&"alert"!=o.data.type&&"dialog"!=o.data.type&&"card"!=o.data.type?(vue.openBlock(),vue.createBlock(r,{key:12,label:e.$t("fm.config.widget.hideLabel")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.hideLabel,"onUpdate:modelValue":t[16]||(t[16]=e=>o.data.options.hideLabel=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("placeholder")>=0&&"time"!=o.data.type&&"date"!=o.data.type?(vue.openBlock(),vue.createBlock(r,{key:13,label:e.$t("fm.config.widget.placeholder")},{default:vue.withCtx((()=>[vue.createVNode(u,{modelValue:o.data.options.placeholder,"onUpdate:modelValue":t[17]||(t[17]=e=>o.data.options.placeholder=e),clearable:""},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("tip")>=0?(vue.openBlock(),vue.createBlock(r,{key:14,label:e.$t("fm.config.widget.tip")},{default:vue.withCtx((()=>[vue.createVNode(u,{type:"textarea",autosize:"",clearable:"",modelValue:o.data.options.tip,"onUpdate:modelValue":t[18]||(t[18]=e=>o.data.options.tip=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("inline")>=0?(vue.openBlock(),vue.createBlock(r,{key:15,label:e.$t("fm.config.widget.layout")},{default:vue.withCtx((()=>[vue.createVNode(y,{modelValue:o.data.options.inline,"onUpdate:modelValue":t[19]||(t[19]=e=>o.data.options.inline=e)},{default:vue.withCtx((()=>[vue.createVNode(g,{label:!1,value:!1},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.block")),1)])),_:1}),vue.createVNode(g,{label:!0,value:!0},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.inline")),1)])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("effect")>=0?(vue.openBlock(),vue.createBlock(r,{key:16,label:e.$t("fm.config.widget.effect")},{default:vue.withCtx((()=>[vue.createVNode(y,{modelValue:o.data.options.effect,"onUpdate:modelValue":t[20]||(t[20]=e=>o.data.options.effect=e)},{default:vue.withCtx((()=>[vue.createVNode(g,{label:"light",value:"light"},{default:vue.withCtx((()=>[vue.createTextVNode("light")])),_:1}),vue.createVNode(g,{label:"dark",value:"dark"},{default:vue.withCtx((()=>[vue.createTextVNode("dark")])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("contentPosition")>=0?(vue.openBlock(),vue.createBlock(r,{key:17,label:e.$t("fm.config.widget.contentPosition")},{default:vue.withCtx((()=>[vue.createVNode(y,{modelValue:o.data.options.contentPosition,"onUpdate:modelValue":t[21]||(t[21]=e=>o.data.options.contentPosition=e)},{default:vue.withCtx((()=>[vue.createVNode(g,{label:"left",value:"left"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.left")),1)])),_:1}),vue.createVNode(g,{label:"center",value:"center"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.center")),1)])),_:1}),vue.createVNode(g,{label:"right",value:"right"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.right")),1)])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("showInput")>=0?(vue.openBlock(),vue.createBlock(r,{key:18,label:e.$t("fm.config.widget.showInput")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.showInput,"onUpdate:modelValue":t[22]||(t[22]=e=>o.data.options.showInput=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("min")>=0?(vue.openBlock(),vue.createBlock(r,{key:19,label:e.$t("fm.config.widget.min")},{default:vue.withCtx((()=>[vue.createVNode(p,{modelValue:o.data.options.min,"onUpdate:modelValue":t[23]||(t[23]=e=>o.data.options.min=e),step:1},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("max")>=0?(vue.openBlock(),vue.createBlock(r,{key:20,label:e.$t("fm.config.widget.max")},{default:vue.withCtx((()=>[vue.createVNode(p,{modelValue:o.data.options.max,"onUpdate:modelValue":t[24]||(t[24]=e=>o.data.options.max=e),step:1},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("step")>=0?(vue.openBlock(),vue.createBlock(r,{key:21,label:e.$t("fm.config.widget.step")},{default:vue.withCtx((()=>[vue.createVNode(p,{modelValue:o.data.options.step,"onUpdate:modelValue":t[25]||(t[25]=e=>o.data.options.step=e),min:-99999,max:99999,step:1},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("maxlength")>=0?(vue.openBlock(),vue.createBlock(r,{key:22,label:e.$t("fm.config.widget.maxlength")},{default:vue.withCtx((()=>[vue.createVNode(u,{modelValue:o.data.options.maxlength,"onUpdate:modelValue":t[26]||(t[26]=e=>o.data.options.maxlength=e),type:"number"},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("rows")>=0?(vue.openBlock(),vue.createBlock(r,{key:23,label:e.$t("fm.config.widget.rows")},{default:vue.withCtx((()=>[vue.createVNode(p,{modelValue:o.data.options.rows,"onUpdate:modelValue":t[27]||(t[27]=e=>o.data.options.rows=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("autosize")>=0?(vue.openBlock(),vue.createBlock(r,{key:24,label:e.$t("fm.config.widget.autosize")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.autosize,"onUpdate:modelValue":t[28]||(t[28]=e=>o.data.options.autosize=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("precision")>=0?(vue.openBlock(),vue.createBlock(r,{key:25,label:e.$t("fm.config.widget.precision")},{default:vue.withCtx((()=>[vue.createVNode(p,{modelValue:o.data.options.precision,"onUpdate:modelValue":t[29]||(t[29]=e=>o.data.options.precision=e),min:0,max:99999,step:1},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("controls")>=0?(vue.openBlock(),vue.createBlock(r,{key:26,label:e.$t("fm.config.widget.controls")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.controls,"onUpdate:modelValue":t[30]||(t[30]=e=>o.data.options.controls=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("controlsPosition")>=0&&o.data.options.controls?(vue.openBlock(),vue.createBlock(r,{key:27,label:e.$t("fm.config.widget.controlsPosition")},{default:vue.withCtx((()=>[vue.createVNode(y,{modelValue:o.data.options.controlsPosition,"onUpdate:modelValue":t[31]||(t[31]=e=>o.data.options.controlsPosition=e)},{default:vue.withCtx((()=>[vue.createVNode(g,{label:"",value:""},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.default")),1)])),_:1}),vue.createVNode(g,{label:"right",value:"right"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.right")),1)])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),"select"==o.data.type||"imgupload"==o.data.type||"fileupload"==o.data.type||"cascader"==o.data.type||"treeselect"==o.data.type||"empselector"==o.data.type||"orgselector"==o.data.type||"processselector"==o.data.type?(vue.openBlock(),vue.createBlock(r,{key:28,label:e.$t("fm.config.widget.multiple")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.multiple,"onUpdate:modelValue":t[32]||(t[32]=e=>o.data.options.multiple=e),onChange:l.handleSelectMuliple},null,8,["modelValue","onChange"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),"select"==o.data.type||"cascader"==o.data.type||"transfer"==o.data.type||"treeselect"==o.data.type?(vue.openBlock(),vue.createBlock(r,{key:29,label:e.$t("fm.config.widget.filterable")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.filterable,"onUpdate:modelValue":t[33]||(t[33]=e=>o.data.options.filterable=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("checkStrictly")>=0?(vue.openBlock(),vue.createBlock(r,{key:30,label:e.$t("fm.config.widget.checkStrictly")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.checkStrictly,"onUpdate:modelValue":t[34]||(t[34]=e=>o.data.options.checkStrictly=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),"orgselector"==o.data.type?(vue.openBlock(),vue.createBlock(r,{key:31,label:e.$t("fm.config.widget.selectType")},{default:vue.withCtx((()=>[vue.createVNode(y,{modelValue:o.data.options.selectType,"onUpdate:modelValue":t[35]||(t[35]=e=>o.data.options.selectType=e),onChange:l.handleSelectSelectType},{default:vue.withCtx((()=>[vue.createVNode(b,{label:"all",style:{"margin-right":"10px"}},{default:vue.withCtx((()=>[vue.createTextVNode("公司，部门")])),_:1}),vue.createVNode(b,{label:"company",style:{"margin-right":"10px"}},{default:vue.withCtx((()=>[vue.createTextVNode("选公司")])),_:1}),vue.createVNode(b,{label:"dept",style:{"margin-right":"0px"}},{default:vue.withCtx((()=>[vue.createTextVNode("选部门")])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("allowHalf")>=0?(vue.openBlock(),vue.createBlock(r,{key:32,label:e.$t("fm.config.widget.allowHalf")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.allowHalf,"onUpdate:modelValue":t[36]||(t[36]=e=>o.data.options.allowHalf=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("showAlpha")>=0?(vue.openBlock(),vue.createBlock(r,{key:33,label:e.$t("fm.config.widget.showAlpha")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.showAlpha,"onUpdate:modelValue":t[37]||(t[37]=e=>o.data.options.showAlpha=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),"inline"==o.data.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:34},[vue.createVNode(r,{label:e.$t("fm.config.widget.flex")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.flex,"onUpdate:modelValue":t[38]||(t[38]=e=>o.data.options.flex=e)},null,8,["modelValue"])])),_:1},8,["label"]),"inline"==o.data.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[o.data.options.flex?(vue.openBlock(),vue.createBlock(r,{key:0,label:e.$t("fm.config.widget.justify")},{default:vue.withCtx((()=>[vue.createVNode(y,{modelValue:o.data.options.flexJustify,"onUpdate:modelValue":t[39]||(t[39]=e=>o.data.options.flexJustify=e),size:"small"},{default:vue.withCtx((()=>[vue.createVNode(g,{value:"flex-start"},{default:vue.withCtx((()=>[_hoisted_7$r])),_:1}),vue.createVNode(g,{value:"flex-end"},{default:vue.withCtx((()=>[_hoisted_8$k])),_:1}),vue.createVNode(g,{value:"center"},{default:vue.withCtx((()=>[_hoisted_9$i])),_:1}),vue.createVNode(g,{value:"space-between"},{default:vue.withCtx((()=>[_hoisted_10$e])),_:1}),vue.createVNode(g,{value:"space-around"},{default:vue.withCtx((()=>[_hoisted_11$d])),_:1}),vue.createVNode(g,{value:"space-evenly"},{default:vue.withCtx((()=>[_hoisted_12$b])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),o.data.options.flex?(vue.openBlock(),vue.createBlock(r,{key:1,label:e.$t("fm.config.widget.align")},{default:vue.withCtx((()=>[vue.createVNode(y,{modelValue:o.data.options.flexAlign,"onUpdate:modelValue":t[40]||(t[40]=e=>o.data.options.flexAlign=e),size:"small"},{default:vue.withCtx((()=>[vue.createVNode(g,{value:"flex-start"},{default:vue.withCtx((()=>[_hoisted_13$8])),_:1}),vue.createVNode(g,{value:"flex-end"},{default:vue.withCtx((()=>[_hoisted_14$6])),_:1}),vue.createVNode(g,{value:"center"},{default:vue.withCtx((()=>[_hoisted_15$5])),_:1}),vue.createVNode(g,{value:"stretch"},{default:vue.withCtx((()=>[_hoisted_16$4])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0)],64)):vue.createCommentVNode("",!0)],64)):vue.createCommentVNode("",!0),"td"==o.data.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:35},[vue.createVNode(r,{label:e.$t("fm.config.widget.textAlign")},{default:vue.withCtx((()=>[vue.createVNode(y,{modelValue:o.data.options.textAlign,"onUpdate:modelValue":t[41]||(t[41]=e=>o.data.options.textAlign=e),size:"small"},{default:vue.withCtx((()=>[vue.createVNode(g,{value:"left"},{default:vue.withCtx((()=>[_hoisted_17$3])),_:1}),vue.createVNode(g,{value:"center"},{default:vue.withCtx((()=>[_hoisted_18$1])),_:1}),vue.createVNode(g,{value:"right"},{default:vue.withCtx((()=>[_hoisted_19$1])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.verticalAlign")},{default:vue.withCtx((()=>[vue.createVNode(y,{modelValue:o.data.options.verticalAlign,"onUpdate:modelValue":t[42]||(t[42]=e=>o.data.options.verticalAlign=e),size:"small"},{default:vue.withCtx((()=>[vue.createVNode(g,{value:"top"},{default:vue.withCtx((()=>[_hoisted_20$1])),_:1}),vue.createVNode(g,{value:"middle"},{default:vue.withCtx((()=>[_hoisted_21$1])),_:1}),vue.createVNode(g,{value:"bottom"},{default:vue.withCtx((()=>[_hoisted_22$1])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"])],64)):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("steps")>=0?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:36},[vue.createVNode(r,{label:e.$t("fm.config.widget.space")},{default:vue.withCtx((()=>[vue.createVNode(p,{modelValue:o.data.options.space,"onUpdate:modelValue":t[43]||(t[43]=e=>o.data.options.space=e),min:0,step:10},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.direction")},{default:vue.withCtx((()=>[vue.createVNode(y,{modelValue:o.data.options.direction,"onUpdate:modelValue":t[44]||(t[44]=e=>o.data.options.direction=e)},{default:vue.withCtx((()=>[vue.createVNode(g,{label:"horizontal",value:"horizontal"},{default:vue.withCtx((()=>[vue.createTextVNode("Horizontal")])),_:1}),vue.createVNode(g,{label:"vertical",value:"vertical"},{default:vue.withCtx((()=>[vue.createTextVNode("Vertical")])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.processStatus")},{default:vue.withCtx((()=>[vue.createVNode(d,{modelValue:o.data.options.processStatus,"onUpdate:modelValue":t[45]||(t[45]=e=>o.data.options.processStatus=e)},{default:vue.withCtx((()=>[vue.createVNode(s,{value:"wait",label:"wait"}),vue.createVNode(s,{value:"process",label:"process"}),vue.createVNode(s,{value:"finish",label:"finish"}),vue.createVNode(s,{value:"error",label:"error"}),vue.createVNode(s,{value:"success",label:"success"})])),_:1},8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.finishStatus")},{default:vue.withCtx((()=>[vue.createVNode(d,{modelValue:o.data.options.finishStatus,"onUpdate:modelValue":t[46]||(t[46]=e=>o.data.options.finishStatus=e)},{default:vue.withCtx((()=>[vue.createVNode(s,{value:"wait",label:"wait"}),vue.createVNode(s,{value:"process",label:"process"}),vue.createVNode(s,{value:"finish",label:"finish"}),vue.createVNode(s,{value:"error",label:"error"}),vue.createVNode(s,{value:"success",label:"success"})])),_:1},8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.alignCenter")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.alignCenter,"onUpdate:modelValue":t[47]||(t[47]=e=>o.data.options.alignCenter=e)},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.simple")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.simple,"onUpdate:modelValue":t[48]||(t[48]=e=>o.data.options.simple=e)},null,8,["modelValue"])])),_:1},8,["label"])],64)):vue.createCommentVNode("",!0),"transfer"==o.data.type?(vue.openBlock(),vue.createBlock(r,{key:37,label:e.$t("fm.config.widget.titles")},{default:vue.withCtx((()=>[vue.createVNode(u,{placeholder:"List 1",modelValue:o.data.options.titles[0],"onUpdate:modelValue":t[49]||(t[49]=e=>o.data.options.titles[0]=e),style:{width:"130px"}},null,8,["modelValue"]),vue.createTextVNode(" - "),vue.createVNode(u,{placeholder:"List 2",modelValue:o.data.options.titles[1],"onUpdate:modelValue":t[50]||(t[50]=e=>o.data.options.titles[1]=e),style:{width:"130px"}},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),"alert"==o.data.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:38},[vue.createVNode(r,{label:e.$t("fm.config.widget.type")},{default:vue.withCtx((()=>[vue.createVNode(d,{modelValue:o.data.options.type,"onUpdate:modelValue":t[51]||(t[51]=e=>o.data.options.type=e)},{default:vue.withCtx((()=>[vue.createVNode(s,{value:"success"}),vue.createVNode(s,{value:"warning"}),vue.createVNode(s,{value:"info"}),vue.createVNode(s,{value:"error"})])),_:1},8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.closable")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.closable,"onUpdate:modelValue":t[52]||(t[52]=e=>o.data.options.closable=e)},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.center")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.center,"onUpdate:modelValue":t[53]||(t[53]=e=>o.data.options.center=e)},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.showIcon")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.showIcon,"onUpdate:modelValue":t[54]||(t[54]=e=>o.data.options.showIcon=e)},null,8,["modelValue"])])),_:1},8,["label"])],64)):vue.createCommentVNode("",!0),"pagination"==o.data.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:39},[Object.keys(o.data.options).indexOf("pageSize")>=0?(vue.openBlock(),vue.createBlock(r,{key:0,label:e.$t("fm.config.widget.pageSize")},{default:vue.withCtx((()=>[vue.createVNode(p,{modelValue:o.data.options.pageSize,"onUpdate:modelValue":t[55]||(t[55]=e=>o.data.options.pageSize=e),step:5,min:1,max:100},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("pagerCount")>=0?(vue.openBlock(),vue.createBlock(r,{key:1,label:e.$t("fm.config.widget.pagerCount")},{default:vue.withCtx((()=>[vue.createVNode(p,{modelValue:o.data.options.pagerCount,"onUpdate:modelValue":t[56]||(t[56]=e=>o.data.options.pagerCount=e),step:1,min:5,max:21},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("total")>=0?(vue.openBlock(),vue.createBlock(r,{key:2,label:e.$t("fm.config.widget.total")},{default:vue.withCtx((()=>[vue.createVNode(p,{modelValue:o.data.options.total,"onUpdate:modelValue":t[57]||(t[57]=e=>o.data.options.total=e),step:1,min:0},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("background")>=0?(vue.openBlock(),vue.createBlock(r,{key:3,label:e.$t("fm.config.widget.background")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.background,"onUpdate:modelValue":t[58]||(t[58]=e=>o.data.options.background=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0)],64)):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("buttonSize")>=0?(vue.openBlock(),vue.createBlock(r,{key:40,label:e.$t("fm.config.widget.buttonSize")},{default:vue.withCtx((()=>[vue.createVNode(y,{modelValue:o.data.options.buttonSize,"onUpdate:modelValue":t[59]||(t[59]=e=>o.data.options.buttonSize=e)},{default:vue.withCtx((()=>[vue.createVNode(g,{label:"large",value:"large"},{default:vue.withCtx((()=>[vue.createTextVNode("Large")])),_:1}),vue.createVNode(g,{label:"default",value:"default"},{default:vue.withCtx((()=>[vue.createTextVNode("Default")])),_:1}),vue.createVNode(g,{label:"small",value:"small"},{default:vue.withCtx((()=>[vue.createTextVNode("Small")])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("buttonType")>=0?(vue.openBlock(),vue.createBlock(r,{key:41,label:e.$t("fm.config.widget.buttonType")},{default:vue.withCtx((()=>[vue.createVNode(d,{modelValue:o.data.options.buttonType,"onUpdate:modelValue":t[60]||(t[60]=e=>o.data.options.buttonType=e),style:{width:"100%"}},{default:vue.withCtx((()=>[vue.createVNode(s,{value:"",label:"Default"}),vue.createVNode(s,{value:"primary",label:"Primary"}),vue.createVNode(s,{value:"success",label:"Success"}),vue.createVNode(s,{value:"warning",label:"Warning"}),vue.createVNode(s,{value:"danger",label:"Danger"}),vue.createVNode(s,{value:"info",label:"Info"}),vue.createVNode(s,{value:"text",label:"Text"}),vue.createVNode(s,{value:"link",label:"Link"})])),_:1},8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("linkType")>=0?(vue.openBlock(),vue.createBlock(r,{key:42,label:e.$t("fm.config.widget.linkType")},{default:vue.withCtx((()=>[vue.createVNode(d,{modelValue:o.data.options.linkType,"onUpdate:modelValue":t[61]||(t[61]=e=>o.data.options.linkType=e),style:{width:"100%"}},{default:vue.withCtx((()=>[vue.createVNode(s,{value:"default",label:"Default"}),vue.createVNode(s,{value:"primary",label:"Primary"}),vue.createVNode(s,{value:"success",label:"Success"}),vue.createVNode(s,{value:"warning",label:"Warning"}),vue.createVNode(s,{value:"danger",label:"Danger"}),vue.createVNode(s,{value:"info",label:"Info"})])),_:1},8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("buttonPlain")>=0?(vue.openBlock(),vue.createBlock(r,{key:43,label:e.$t("fm.config.widget.buttonPlain")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.buttonPlain,"onUpdate:modelValue":t[62]||(t[62]=e=>o.data.options.buttonPlain=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("buttonRound")>=0?(vue.openBlock(),vue.createBlock(r,{key:44,label:e.$t("fm.config.widget.buttonRound")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.buttonRound,"onUpdate:modelValue":t[63]||(t[63]=e=>o.data.options.buttonRound=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("buttonCircle")>=0?(vue.openBlock(),vue.createBlock(r,{key:45,label:e.$t("fm.config.widget.buttonCircle")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.buttonCircle,"onUpdate:modelValue":t[64]||(t[64]=e=>o.data.options.buttonCircle=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("href")>=0?(vue.openBlock(),vue.createBlock(r,{key:46,label:"href"},{default:vue.withCtx((()=>[vue.createVNode(u,{clearable:"",modelValue:o.data.options.href,"onUpdate:modelValue":t[65]||(t[65]=e=>o.data.options.href=e)},null,8,["modelValue"])])),_:1})):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("underline")>=0?(vue.openBlock(),vue.createBlock(r,{key:47,label:e.$t("fm.config.widget.underline")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.underline,"onUpdate:modelValue":t[66]||(t[66]=e=>o.data.options.underline=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("blank")>=0?(vue.openBlock(),vue.createBlock(r,{key:48,label:e.$t("fm.config.widget.isBlank")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.blank,"onUpdate:modelValue":t[67]||(t[67]=e=>o.data.options.blank=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("paging")>=0?(vue.openBlock(),vue.createBlock(r,{key:49,label:e.$t("fm.config.widget.paging")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.paging,"onUpdate:modelValue":t[68]||(t[68]=e=>o.data.options.paging=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),o.data.options.paging&&Object.keys(o.data.options).indexOf("pageSize")>=0?(vue.openBlock(),vue.createBlock(r,{key:50,label:e.$t("fm.config.widget.pageSize")},{default:vue.withCtx((()=>[vue.createVNode(p,{modelValue:o.data.options.pageSize,"onUpdate:modelValue":t[69]||(t[69]=e=>o.data.options.pageSize=e),step:5,min:1},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("showControl")>=0?(vue.openBlock(),vue.createBlock(r,{key:51,label:e.$t("fm.config.widget.showControl")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.showControl,"onUpdate:modelValue":t[70]||(t[70]=e=>o.data.options.showControl=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("virtualTable")>=0?(vue.openBlock(),vue.createBlock(r,{key:52,label:e.$t("fm.config.widget.virtualTable")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.virtualTable,"onUpdate:modelValue":t[71]||(t[71]=e=>o.data.options.virtualTable=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),"table"==o.data.type?(vue.openBlock(),vue.createBlock(r,{key:53,label:e.$t("fm.config.widget.selection")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.selection,"onUpdate:modelValue":t[72]||(t[72]=e=>o.data.options.selection=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),o.data.options.tableColumn?(vue.openBlock(),vue.createBlock(r,{key:54,label:e.$t("fm.config.widget.fixedColumn")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.fixedColumn,"onUpdate:modelValue":t[73]||(t[73]=e=>o.data.options.fixedColumn=e)},null,8,["modelValue"]),o.data.options.fixedColumn?(vue.openBlock(),vue.createBlock(d,{key:0,modelValue:o.data.options.fixedColumnPosition,"onUpdate:modelValue":t[74]||(t[74]=e=>o.data.options.fixedColumnPosition=e),placeholder:e.$t("fm.config.widget.fixedColumnSelect"),style:{"margin-left":"10px",width:"180px"}},{default:vue.withCtx((()=>[vue.createVNode(s,{label:e.$t("fm.config.widget.left"),value:"left"},null,8,["label"]),vue.createVNode(s,{label:e.$t("fm.config.widget.right"),value:"right"},null,8,["label"])])),_:1},8,["modelValue","placeholder"])):vue.createCommentVNode("",!0)])),_:1},8,["label"])):vue.createCommentVNode("",!0),"time"==o.data.type||"date"==o.data.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:55},["date"==o.data.type?(vue.openBlock(),vue.createBlock(r,{key:0,label:e.$t("fm.config.widget.showType")},{default:vue.withCtx((()=>[vue.createVNode(d,{modelValue:o.data.options.type,"onUpdate:modelValue":t[75]||(t[75]=e=>o.data.options.type=e)},{default:vue.withCtx((()=>[vue.createVNode(s,{value:"year"}),vue.createVNode(s,{value:"month"}),vue.createVNode(s,{value:"date"}),vue.createVNode(s,{value:"week"}),vue.createVNode(s,{value:"dates"}),vue.createVNode(s,{value:"datetime"}),vue.createVNode(s,{value:"datetimerange"}),vue.createVNode(s,{value:"daterange"}),vue.createVNode(s,{value:"monthrange"})])),_:1},8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),"time"==o.data.type?(vue.openBlock(),vue.createBlock(r,{key:1,label:e.$t("fm.config.widget.isRange")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.isRange,"onUpdate:modelValue":t[76]||(t[76]=e=>o.data.options.isRange=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),!o.data.options.isRange&&"time"==o.data.type||"time"!=o.data.type&&"datetimerange"!=o.data.options.type&&"daterange"!=o.data.options.type?(vue.openBlock(),vue.createBlock(r,{key:2,label:e.$t("fm.config.widget.placeholder")},{default:vue.withCtx((()=>[vue.createVNode(u,{clearable:"",modelValue:o.data.options.placeholder,"onUpdate:modelValue":t[77]||(t[77]=e=>o.data.options.placeholder=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),o.data.options.isRange||"datetimerange"==o.data.options.type||"daterange"==o.data.options.type?(vue.openBlock(),vue.createBlock(r,{key:3,label:e.$t("fm.config.widget.startPlaceholder")},{default:vue.withCtx((()=>[vue.createVNode(u,{clearable:"",modelValue:o.data.options.startPlaceholder,"onUpdate:modelValue":t[78]||(t[78]=e=>o.data.options.startPlaceholder=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),o.data.options.isRange||"datetimerange"==o.data.options.type||"daterange"==o.data.options.type?(vue.openBlock(),vue.createBlock(r,{key:4,label:e.$t("fm.config.widget.endPlaceholder")},{default:vue.withCtx((()=>[vue.createVNode(u,{clearable:"",modelValue:o.data.options.endPlaceholder,"onUpdate:modelValue":t[79]||(t[79]=e=>o.data.options.endPlaceholder=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),vue.createVNode(r,{label:e.$t("fm.config.widget.format")},{default:vue.withCtx((()=>[vue.createVNode(u,{clearable:"",modelValue:o.data.options.format,"onUpdate:modelValue":t[80]||(t[80]=e=>o.data.options.format=e),modelModifiers:{lazy:!0}},null,8,["modelValue"])])),_:1},8,["label"]),"date"==o.data.type?(vue.openBlock(),vue.createBlock(r,{key:5,label:e.$t("fm.config.widget.isTimestamp")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.timestamp,"onUpdate:modelValue":t[81]||(t[81]=e=>o.data.options.timestamp=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),"time"==o.data.type&&Object.keys(o.data.options).indexOf("isRange")>=0?(vue.openBlock(),vue.createBlock(r,{key:6,label:e.$t("fm.config.widget.defaultValue")},{default:vue.withCtx((()=>[o.data.options.isRange?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(w,{key:"1",style:{width:"100%"},modelValue:o.data.options.defaultValue,"onUpdate:modelValue":t[82]||(t[82]=e=>o.data.options.defaultValue=e),arrowControl:o.data.options.arrowControl,"value-format":o.data.options.format},null,8,["modelValue","arrowControl","value-format"])),o.data.options.isRange?(vue.openBlock(),vue.createBlock(w,{key:"2",style:{width:"100%"},modelValue:o.data.options.defaultValue,"onUpdate:modelValue":t[83]||(t[83]=e=>o.data.options.defaultValue=e),"is-range":"",arrowControl:o.data.options.arrowControl,"value-format":o.data.options.format},null,8,["modelValue","arrowControl","value-format"])):vue.createCommentVNode("",!0)])),_:1},8,["label"])):vue.createCommentVNode("",!0),"date"==o.data.type?(vue.openBlock(),vue.createBlock(r,{key:7,label:e.$t("fm.config.widget.defaultValue")},{default:vue.withCtx((()=>[o.data.options.timestamp?(vue.openBlock(),vue.createBlock(k,{key:"1",modelValue:o.data.options.defaultValue,"onUpdate:modelValue":t[84]||(t[84]=e=>o.data.options.defaultValue=e),type:o.data.options.type,clearable:!0,"value-format":o.data.options.timestamp?"x":o.data.options.format,format:o.data.options.format,style:{width:"100%"}},null,8,["modelValue","type","value-format","format"])):(vue.openBlock(),vue.createBlock(k,{key:"2",modelValue:o.data.options.defaultValue,"onUpdate:modelValue":t[85]||(t[85]=e=>o.data.options.defaultValue=e),type:o.data.options.type,clearable:!0,"value-format":o.data.options.timestamp?"x":o.data.options.format,format:o.data.options.format,style:{width:"100%"}},null,8,["modelValue","type","value-format","format"]))])),_:1},8,["label"])):vue.createCommentVNode("",!0)],64)):vue.createCommentVNode("",!0),"imgupload"==o.data.type||"fileupload"==o.data.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:56},["fileupload"==o.data.type?(vue.openBlock(),vue.createBlock(r,{key:0,label:e.$t("fm.config.widget.accept")},{default:vue.withCtx((()=>[vue.createVNode(u,{clearable:"",modelValue:o.data.options.accept,"onUpdate:modelValue":t[86]||(t[86]=e=>o.data.options.accept=e),placeholder:e.$t("fm.config.widget.acceptPlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),vue.createVNode(r,{label:e.$t("fm.config.widget.limit")},{default:vue.withCtx((()=>[vue.createVNode(u,{clearable:"",type:"number",modelValue:o.data.options.limit,"onUpdate:modelValue":t[87]||(t[87]=e=>o.data.options.limit=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.isQiniu")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.isQiniu,"onUpdate:modelValue":t[88]||(t[88]=e=>o.data.options.isQiniu=e)},null,8,["modelValue"])])),_:1},8,["label"]),o.data.options.isQiniu?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createVNode(r,{label:"Domain",required:!0,prop:"options.domain"},{default:vue.withCtx((()=>[vue.createVNode(u,{clearable:"",modelValue:o.data.options.domain,"onUpdate:modelValue":t[89]||(t[89]=e=>o.data.options.domain=e)},null,8,["modelValue"])])),_:1}),vue.createVNode(r,{label:e.$t("fm.config.widget.tokenFunc"),required:!0},{default:vue.withCtx((()=>[vue.createVNode(y,{modelValue:o.data.options.tokenType,"onUpdate:modelValue":t[90]||(t[90]=e=>o.data.options.tokenType=e)},{default:vue.withCtx((()=>[vue.createVNode(b,{label:"datasource",value:"datasource"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.datasource.name")),1)])),_:1}),vue.createVNode(b,{label:"fx",value:"fx"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.formula.input.fx")),1)])),_:1})])),_:1},8,["modelValue"]),"fx"==o.data.options.tokenType?(vue.openBlock(),vue.createBlock(_,{key:0,size:"default",only:"",modelValue:o.data.options.tokenFx,"onUpdate:modelValue":t[91]||(t[91]=e=>o.data.options.tokenFx=e),style:{"margin-bottom":"5px"}},null,8,["modelValue"])):vue.createCommentVNode("",!0),"datasource"==o.data.options.tokenType?(vue.openBlock(),vue.createElementBlock("div",_hoisted_23$1,[vue.createVNode(d,{onChange:l.handleDataSourceChange,modelValue:o.data.options.tokenDataSource,"onUpdate:modelValue":t[92]||(t[92]=e=>o.data.options.tokenDataSource=e)},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.datasources,(e=>(vue.openBlock(),vue.createBlock(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["onChange","modelValue"]),vue.createVNode(x,{content:e.$t("fm.config.widget.settings")},{default:vue.withCtx((()=>[vue.createVNode(C,{link:"",type:"primary",style:{margin:"5px"},onClick:t[93]||(t[93]=e=>l.handleDatasourceManage(o.data.options.tokenDataSource))},{default:vue.withCtx((()=>[_hoisted_24$1])),_:1})])),_:1},8,["content"])])):vue.createCommentVNode("",!0),"datasource"==o.data.options.tokenType&&o.data.options.remoteArgs?(vue.openBlock(),vue.createBlock(S,{key:o.data.options.tokenDataSource,operable:!1,modelValue:o.data.options.remoteArgs,"onUpdate:modelValue":t[94]||(t[94]=e=>o.data.options.remoteArgs=e)},null,8,["modelValue"])):vue.createCommentVNode("",!0)])),_:1},8,["label"])],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:2},[vue.createVNode(r,{label:e.$t("fm.config.widget.action"),required:!0,prop:"options.action",trigger:"change"},{default:vue.withCtx((()=>[vue.createVNode(u,{clearable:"",modelValue:o.data.options.action,"onUpdate:modelValue":t[95]||(t[95]=e=>o.data.options.action=e)},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.headers")},{default:vue.withCtx((()=>[vue.createVNode(V,{modelValue:o.data.options.headers,"onUpdate:modelValue":t[96]||(t[96]=e=>o.data.options.headers=e)},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.withCredentials")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.withCredentials,"onUpdate:modelValue":t[97]||(t[97]=e=>o.data.options.withCredentials=e)},null,8,["modelValue"])])),_:1},8,["label"])],64))],64)):vue.createCommentVNode("",!0),"blank"==o.data.type?(vue.openBlock(),vue.createBlock(r,{key:57,label:e.$t("fm.config.widget.defaultType")},{default:vue.withCtx((()=>[vue.createVNode(d,{modelValue:o.data.options.defaultType,"onUpdate:modelValue":t[98]||(t[98]=e=>o.data.options.defaultType=e)},{default:vue.withCtx((()=>[vue.createVNode(s,{value:"String",label:e.$t("fm.config.widget.string")},null,8,["label"]),vue.createVNode(s,{value:"Object",label:e.$t("fm.config.widget.object")},null,8,["label"]),vue.createVNode(s,{value:"Array",label:e.$t("fm.config.widget.array")},null,8,["label"])])),_:1},8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),"component"==o.data.type?(vue.openBlock(),vue.createBlock(r,{key:58,label:e.$t("fm.config.widget.customTemplates")},{default:vue.withCtx((()=>[vue.createVNode(C,{style:{width:"100%"},onClick:l.handleSetTemplate},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.setting")),1)])),_:1},8,["onClick"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),"inline"==o.data.type?(vue.openBlock(),vue.createBlock(r,{key:59,label:e.$t("fm.config.widget.spaceSize")},{default:vue.withCtx((()=>[vue.createVNode(p,{clearable:"",min:0,modelValue:o.data.options.spaceSize,"onUpdate:modelValue":t[99]||(t[99]=e=>o.data.options.spaceSize=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),"grid"==o.data.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:60},[vue.createVNode(r,{label:e.$t("fm.config.widget.gutter"),key:"gutter"},{default:vue.withCtx((()=>[vue.createVNode(u,{clearable:"",type:"number",modelValue:o.data.options.gutter,"onUpdate:modelValue":t[100]||(t[100]=e=>o.data.options.gutter=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.flex"),key:"flex"},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.flex,"onUpdate:modelValue":t[101]||(t[101]=e=>o.data.options.flex=e),disabled:""},null,8,["modelValue"])])),_:1},8,["label"]),o.data.options.flex?(vue.openBlock(),vue.createBlock(r,{label:e.$t("fm.config.widget.justify"),key:"justify"},{default:vue.withCtx((()=>[vue.createVNode(d,{modelValue:o.data.options.justify,"onUpdate:modelValue":t[102]||(t[102]=e=>o.data.options.justify=e)},{default:vue.withCtx((()=>[vue.createVNode(s,{value:"start",label:e.$t("fm.config.widget.justifyStart")},null,8,["label"]),vue.createVNode(s,{value:"end",label:e.$t("fm.config.widget.justifyEnd")},null,8,["label"]),vue.createVNode(s,{value:"center",label:e.$t("fm.config.widget.justifyCenter")},null,8,["label"]),vue.createVNode(s,{value:"space-around",label:e.$t("fm.config.widget.justifySpaceAround")},null,8,["label"]),vue.createVNode(s,{value:"space-between",label:e.$t("fm.config.widget.justifySpaceBetween")},null,8,["label"])])),_:1},8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),o.data.options.flex?(vue.openBlock(),vue.createBlock(r,{label:e.$t("fm.config.widget.align"),key:"align"},{default:vue.withCtx((()=>[vue.createVNode(d,{modelValue:o.data.options.align,"onUpdate:modelValue":t[103]||(t[103]=e=>o.data.options.align=e)},{default:vue.withCtx((()=>[vue.createVNode(s,{value:"top",label:e.$t("fm.config.widget.alignTop")},null,8,["label"]),vue.createVNode(s,{value:"middle",label:e.$t("fm.config.widget.alignMiddle")},null,8,["label"]),vue.createVNode(s,{value:"bottom",label:e.$t("fm.config.widget.alignBottom")},null,8,["label"])])),_:1},8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0)],64)):vue.createCommentVNode("",!0),"col"==o.data.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:61},[vue.createVNode(r,{label:e.$t("fm.config.widget.span")},{default:vue.withCtx((()=>["pc"==o.platform?(vue.openBlock(),vue.createBlock(p,{key:0,modelValue:o.data.options.md,"onUpdate:modelValue":t[104]||(t[104]=e=>o.data.options.md=e),step:1,min:1,max:24},null,8,["modelValue"])):vue.createCommentVNode("",!0),"pad"==o.platform?(vue.openBlock(),vue.createBlock(p,{key:1,modelValue:o.data.options.sm,"onUpdate:modelValue":t[105]||(t[105]=e=>o.data.options.sm=e),step:1,min:1,max:24},null,8,["modelValue"])):vue.createCommentVNode("",!0),"mobile"==o.platform?(vue.openBlock(),vue.createBlock(p,{key:2,modelValue:o.data.options.xs,"onUpdate:modelValue":t[106]||(t[106]=e=>o.data.options.xs=e),step:1,min:1,max:24},null,8,["modelValue"])):vue.createCommentVNode("",!0)])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.offset")},{default:vue.withCtx((()=>[vue.createVNode(p,{modelValue:o.data.options.offset,"onUpdate:modelValue":t[107]||(t[107]=e=>o.data.options.offset=e),step:1,min:0,max:24},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.push")},{default:vue.withCtx((()=>[vue.createVNode(p,{modelValue:o.data.options.push,"onUpdate:modelValue":t[108]||(t[108]=e=>o.data.options.push=e),step:1,min:0,max:24},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.pull")},{default:vue.withCtx((()=>[vue.createVNode(p,{modelValue:o.data.options.pull,"onUpdate:modelValue":t[109]||(t[109]=e=>o.data.options.pull=e),step:1,min:0,max:24},null,8,["modelValue"])])),_:1},8,["label"])],64)):vue.createCommentVNode("",!0),"tabs"==o.data.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:62},[vue.createVNode(r,{label:e.$t("fm.config.widget.type")},{default:vue.withCtx((()=>[vue.createVNode(y,{modelValue:o.data.options.type,"onUpdate:modelValue":t[110]||(t[110]=e=>o.data.options.type=e)},{default:vue.withCtx((()=>[vue.createVNode(g,{label:"",value:""},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.default")),1)])),_:1}),vue.createVNode(g,{label:"card",value:"card"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.card")),1)])),_:1}),vue.createVNode(g,{label:"border-card",value:"border-card"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.borderCard")),1)])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.tabPosition")},{default:vue.withCtx((()=>[vue.createVNode(y,{modelValue:o.data.options.tabPosition,"onUpdate:modelValue":t[111]||(t[111]=e=>o.data.options.tabPosition=e)},{default:vue.withCtx((()=>[vue.createVNode(g,{label:"top",value:"top"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.top")),1)])),_:1}),vue.createVNode(g,{label:"left",value:"left"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.left")),1)])),_:1}),vue.createVNode(g,{label:"right",value:"right"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.right")),1)])),_:1}),vue.createVNode(g,{label:"bottom",value:"bottom"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.bottom")),1)])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.tabOption")},{default:vue.withCtx((()=>[vue.createVNode(N,vue.mergeProps({tag:"ul",list:o.data.tabs},{group:{name:"options"},ghostClass:"ghost",handle:".drag-item"},{handle:".drag-item","item-key":"index"}),{item:vue.withCtx((({element:t,index:o})=>[(vue.openBlock(),vue.createElementBlock("li",{key:o},[_hoisted_25$1,vue.createVNode(u,{clearable:"",placeholder:e.$t("fm.config.widget.tabName"),style:{width:"200px","margin-bottom":"5px"},modelValue:t.label,"onUpdate:modelValue":e=>t.label=e},null,8,["placeholder","modelValue","onUpdate:modelValue"]),vue.createElementVNode("i",{onClick:e=>l.handleOptionsRemove(o),style:{"font-size":"16px",margin:"0 5px",cursor:"pointer"}},_hoisted_28$1,8,_hoisted_26$1)]))])),_:1},16,["list"]),vue.createElementVNode("div",_hoisted_29$1,[vue.createVNode(C,{link:"",type:"primary",onClick:l.handleAddTab},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.addTab")),1)])),_:1},8,["onClick"])])])),_:1},8,["label"])],64)):vue.createCommentVNode("",!0),"collapse"==o.data.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:63},[vue.createVNode(r,{label:e.$t("fm.config.widget.collapseOptions")},{default:vue.withCtx((()=>[vue.createVNode(N,vue.mergeProps({tag:"ul",list:o.data.tabs},{group:{name:"options"},ghostClass:"ghost",handle:".drag-item"},{handle:".drag-item","item-key":"index"}),{item:vue.withCtx((({element:t,index:o})=>[(vue.openBlock(),vue.createElementBlock("li",{key:o},[_hoisted_30$1,vue.createVNode(u,{clearable:"",placeholder:e.$t("fm.config.widget.collapseTitle"),style:{width:"200px","margin-bottom":"5px"},modelValue:t.title,"onUpdate:modelValue":e=>t.title=e},null,8,["placeholder","modelValue","onUpdate:modelValue"]),vue.createElementVNode("i",{onClick:e=>l.handleOptionsRemove(o),style:{"font-size":"16px",margin:"0 5px",cursor:"pointer"}},_hoisted_33$1,8,_hoisted_31$1)]))])),_:1},16,["list"]),vue.createElementVNode("div",_hoisted_34$1,[vue.createVNode(C,{link:"",type:"primary",onClick:l.handleAddCollapse},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.addCollapse")),1)])),_:1},8,["onClick"])])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.accordion")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.accordion,"onUpdate:modelValue":t[112]||(t[112]=e=>o.data.options.accordion=e)},null,8,["modelValue"])])),_:1},8,["label"])],64)):vue.createCommentVNode("",!0),"report"==o.data.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:64},[vue.createVNode(r,{label:e.$t("fm.config.widget.borderWidth")},{default:vue.withCtx((()=>[vue.createVNode(p,{modelValue:o.data.options.borderWidth,"onUpdate:modelValue":t[113]||(t[113]=e=>o.data.options.borderWidth=e),min:0,step:1},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.borderColor")},{default:vue.withCtx((()=>[vue.createVNode(E,{modelValue:o.data.options.borderColor,"onUpdate:modelValue":t[114]||(t[114]=e=>o.data.options.borderColor=e)},null,8,["modelValue"])])),_:1},8,["label"])],64)):vue.createCommentVNode("",!0),"dialog"==o.data.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:65},[vue.createVNode(r,{label:e.$t("fm.config.widget.showDialog")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.visible,"onUpdate:modelValue":t[115]||(t[115]=e=>o.data.options.visible=e)},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.center")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.center,"onUpdate:modelValue":t[116]||(t[116]=e=>o.data.options.center=e)},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.showClose")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.showClose,"onUpdate:modelValue":t[117]||(t[117]=e=>o.data.options.showClose=e)},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.showCancel")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.showCancel,"onUpdate:modelValue":t[118]||(t[118]=e=>o.data.options.showCancel=e)},null,8,["modelValue"]),o.data.options.showCancel?(vue.openBlock(),vue.createBlock(u,{key:0,modelValue:o.data.options.cancelText,"onUpdate:modelValue":t[119]||(t[119]=e=>o.data.options.cancelText=e)},{prepend:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.cancelText")),1)])),_:1},8,["modelValue"])):vue.createCommentVNode("",!0)])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.showOk")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.showOk,"onUpdate:modelValue":t[120]||(t[120]=e=>o.data.options.showOk=e)},null,8,["modelValue"]),o.data.options.showOk?(vue.openBlock(),vue.createBlock(c,{key:0,modelValue:o.data.options.confirmLoading,"onUpdate:modelValue":t[121]||(t[121]=e=>o.data.options.confirmLoading=e),label:e.$t("fm.config.widget.confirmLoading"),style:{"margin-left":"18px","vertical-align":"middle"}},null,8,["modelValue","label"])):vue.createCommentVNode("",!0),o.data.options.showOk?(vue.openBlock(),vue.createBlock(u,{key:1,modelValue:o.data.options.okText,"onUpdate:modelValue":t[122]||(t[122]=e=>o.data.options.okText=e)},{prepend:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.okText")),1)])),_:1},8,["modelValue"])):vue.createCommentVNode("",!0)])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.marginTop")},{default:vue.withCtx((()=>[vue.createVNode(u,{modelValue:o.data.options.top,"onUpdate:modelValue":t[123]||(t[123]=e=>o.data.options.top=e)},null,8,["modelValue"])])),_:1},8,["label"])],64)):vue.createCommentVNode("",!0),"card"==o.data.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:66},[vue.createVNode(r,{label:e.$t("fm.config.widget.padding")},{default:vue.withCtx((()=>[vue.createVNode(u,{modelValue:o.data.options.padding,"onUpdate:modelValue":t[124]||(t[124]=e=>o.data.options.padding=e),clearable:""},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.showHeader")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.showHeader,"onUpdate:modelValue":t[125]||(t[125]=e=>o.data.options.showHeader=e)},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.bordered")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.bordered,"onUpdate:modelValue":t[126]||(t[126]=e=>o.data.options.bordered=e)},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.shadow")},{default:vue.withCtx((()=>[vue.createVNode(y,{modelValue:o.data.options.shadow,"onUpdate:modelValue":t[127]||(t[127]=e=>o.data.options.shadow=e)},{default:vue.withCtx((()=>[vue.createVNode(g,{label:"always",value:"always"},{default:vue.withCtx((()=>[vue.createTextVNode("always")])),_:1}),vue.createVNode(g,{label:"hover",value:"hover"},{default:vue.withCtx((()=>[vue.createTextVNode("hover")])),_:1}),vue.createVNode(g,{label:"never",value:"never"},{default:vue.withCtx((()=>[vue.createTextVNode("never")])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"])],64)):vue.createCommentVNode("",!0),"list"==o.data.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:67},[vue.createVNode(r,{label:e.$t("fm.config.widget.stripe")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.stripe,"onUpdate:modelValue":t[128]||(t[128]=e=>o.data.options.stripe=e)},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.bordered")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.border,"onUpdate:modelValue":t[129]||(t[129]=e=>o.data.options.border=e)},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.highlight")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.highlight,"onUpdate:modelValue":t[130]||(t[130]=e=>o.data.options.highlight=e)},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.selection")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.selection,"onUpdate:modelValue":t[131]||(t[131]=e=>o.data.options.selection=e)},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(r,{label:e.$t("fm.config.widget.maxHeight")},{default:vue.withCtx((()=>[vue.createVNode(u,{clearable:"",modelValue:o.data.options.maxHeight,"onUpdate:modelValue":t[132]||(t[132]=e=>o.data.options.maxHeight=e),modelModifiers:{number:!0}},{suffix:vue.withCtx((()=>[vue.createTextVNode("px")])),_:1},8,["modelValue"])])),_:1},8,["label"])],64)):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("defaultValue")>=0&&"custom"!=o.data.type&&"imgupload"!=o.data.type&&"fileupload"!=o.data.type&&"radio"!=o.data.type&&"checkbox"!=o.data.type&&"select"!=o.data.type&&"date"!=o.data.type&&"time"!=o.data.type&&"steps"!=o.data.type&&"transfer"!=o.data.type&&"dialog"!=o.data.type&&"card"!=o.data.type&&"slider"!=o.data.type&&"group"!=o.data.type?(vue.openBlock(),vue.createBlock(r,{key:68,label:e.$t("fm.config.widget.defaultValue")},{default:vue.withCtx((()=>["textarea"==o.data.type?(vue.openBlock(),vue.createBlock(u,{key:0,clearable:"",type:"textarea",rows:o.data.options.rows,maxlength:o.data.options.maxlength,modelValue:o.data.options.defaultValue,"onUpdate:modelValue":t[133]||(t[133]=e=>o.data.options.defaultValue=e)},null,8,["rows","maxlength","modelValue"])):vue.createCommentVNode("",!0),"input"==o.data.type||"text"==o.data.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},["number"==o.data.options.dataType||"integer"==o.data.options.dataType||"float"==o.data.options.dataType?(vue.openBlock(),vue.createBlock(u,{key:0,clearable:"",type:"number",modelValue:o.data.options.defaultValue,"onUpdate:modelValue":t[134]||(t[134]=e=>o.data.options.defaultValue=e),modelModifiers:{number:!0}},null,8,["modelValue"])):(vue.openBlock(),vue.createBlock(u,{key:1,clearable:"",modelValue:o.data.options.defaultValue,"onUpdate:modelValue":t[135]||(t[135]=e=>o.data.options.defaultValue=e)},null,8,["modelValue"]))],64)):vue.createCommentVNode("",!0),"rate"==o.data.type?(vue.openBlock(),vue.createBlock($,{key:2,style:{display:"inline-block","vertical-align":"middle"},max:o.data.options.max,"allow-half":o.data.options.allowHalf,modelValue:o.data.options.defaultValue,"onUpdate:modelValue":t[136]||(t[136]=e=>o.data.options.defaultValue=e)},null,8,["max","allow-half","modelValue"])):vue.createCommentVNode("",!0),"rate"==o.data.type?(vue.openBlock(),vue.createBlock(C,{key:3,link:"",type:"primary",style:{display:"inline-block","vertical-align":"middle","margin-left":"10px"},onClick:t[137]||(t[137]=e=>o.data.options.defaultValue=0)},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.clear")),1)])),_:1})):vue.createCommentVNode("",!0),"color"==o.data.type?(vue.openBlock(),vue.createBlock(E,{key:4,modelValue:o.data.options.defaultValue,"onUpdate:modelValue":t[138]||(t[138]=e=>o.data.options.defaultValue=e),"show-alpha":o.data.options.showAlpha},null,8,["modelValue","show-alpha"])):vue.createCommentVNode("",!0),"switch"==o.data.type?(vue.openBlock(),vue.createBlock(m,{key:5,modelValue:o.data.options.defaultValue,"onUpdate:modelValue":t[139]||(t[139]=e=>o.data.options.defaultValue=e)},null,8,["modelValue"])):vue.createCommentVNode("",!0),"number"==o.data.type?(vue.openBlock(),vue.createBlock(p,{key:6,modelValue:o.data.options.defaultValue,"onUpdate:modelValue":t[140]||(t[140]=e=>o.data.options.defaultValue=e),step:o.data.options.step,min:o.data.options.min,max:o.data.options.max},null,8,["modelValue","step","min","max"])):vue.createCommentVNode("",!0),"pagination"==o.data.type?(vue.openBlock(),vue.createBlock(p,{key:7,modelValue:o.data.options.defaultValue,"onUpdate:modelValue":t[141]||(t[141]=e=>o.data.options.defaultValue=e),step:1,min:1},null,8,["modelValue"])):vue.createCommentVNode("",!0),"html"==o.data.type?(vue.openBlock(),vue.createBlock(D,{key:8,placement:"right",width:500,trigger:"click","hide-after":0},{reference:vue.withCtx((()=>[vue.createVNode(C,{style:{width:"100%"}},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.setting")),1)])),_:1})])),default:vue.withCtx((()=>[(vue.openBlock(),vue.createBlock(v,{key:o.data.key,modelValue:o.data.options.defaultValue,"onUpdate:modelValue":t[142]||(t[142]=e=>o.data.options.defaultValue=e),height:"300px"},null,8,["modelValue"]))])),_:1})):vue.createCommentVNode("",!0),"cascader"==o.data.type?(vue.openBlock(),vue.createBlock(B,{key:9,modelValue:o.data.options.defaultValue,"onUpdate:modelValue":t[143]||(t[143]=e=>o.data.options.defaultValue=e),clearable:"",options:o.data.options.remote?[]:o.data.options.options,style:{width:"100%"},props:{multiple:o.data.options.multiple,checkStrictly:o.data.options.checkStrictly},filterable:o.data.options.filterable,"collapse-tags":""},null,8,["modelValue","options","props","filterable"])):vue.createCommentVNode("",!0),"treeselect"==o.data.type?(vue.openBlock(),vue.createBlock(T,{key:10,modelValue:o.data.options.defaultValue,"onUpdate:modelValue":t[144]||(t[144]=e=>o.data.options.defaultValue=e),clearable:"",data:o.data.options.remote?[]:o.data.options.options,style:{width:"100%"},multiple:o.data.options.multiple,"check-strictly":o.data.options.checkStrictly,filterable:o.data.options.filterable},null,8,["modelValue","data","multiple","check-strictly","filterable"])):vue.createCommentVNode("",!0),"editor"==o.data.type?(vue.openBlock(),vue.createBlock(C,{key:11,style:{width:"100%"},onClick:l.handleSetEditorValue},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.setting")),1)])),_:1},8,["onClick"])):vue.createCommentVNode("",!0),"table"==o.data.type||"subform"==o.data.type||"list"==o.data.type?(vue.openBlock(),vue.createBlock(C,{key:12,style:{width:"100%"},onClick:l.handleSetDefaultValue},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.setting")),1)])),_:1},8,["onClick"])):vue.createCommentVNode("",!0)])),_:1},8,["label"])):vue.createCommentVNode("",!0)])),_:1},8,["title"]),Object.keys(o.data.options).indexOf("options")>=0||Object.keys(o.data.options).indexOf("steps")>=0||"transfer"==o.data.type?(vue.openBlock(),vue.createBlock(O,{key:0,title:e.$t("fm.config.widget.optionsSetting"),name:"options"},{default:vue.withCtx((()=>[Object.keys(o.data.options).indexOf("options")>=0?(vue.openBlock(),vue.createBlock(r,{key:0,label:e.$t("fm.config.widget.option")},{default:vue.withCtx((()=>[vue.createVNode(y,{modelValue:o.data.options.remote,"onUpdate:modelValue":t[145]||(t[145]=e=>o.data.options.remote=e),style:{"margin-bottom":"10px"}},{default:vue.withCtx((()=>[vue.createVNode(g,{label:!1,value:!1},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.staticData")),1)])),_:1}),vue.createVNode(g,{label:!0,value:!0},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.remoteData")),1)])),_:1})])),_:1},8,["modelValue"]),o.data.options.remote?(vue.openBlock(),vue.createElementBlock("div",_hoisted_35,[vue.createVNode(y,{modelValue:o.data.options.remoteType,"onUpdate:modelValue":t[146]||(t[146]=e=>o.data.options.remoteType=e),style:{"margin-bottom":"8px"}},{default:vue.withCtx((()=>[vue.createVNode(b,{label:"datasource",value:"datasource"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.datasource.name")),1)])),_:1}),vue.createVNode(b,{label:"fx",value:"fx"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.formula.input.fx")),1)])),_:1})])),_:1},8,["modelValue"]),"fx"==o.data.options.remoteType?(vue.openBlock(),vue.createBlock(_,{key:0,size:"default",only:"",modelValue:o.data.options.remoteFx,"onUpdate:modelValue":t[147]||(t[147]=e=>o.data.options.remoteFx=e),style:{"margin-bottom":"5px"}},null,8,["modelValue"])):vue.createCommentVNode("",!0),"datasource"==o.data.options.remoteType?(vue.openBlock(),vue.createElementBlock("div",_hoisted_36,[vue.createVNode(d,{onChange:l.handleDataSourceChange,modelValue:o.data.options.remoteDataSource,"onUpdate:modelValue":t[148]||(t[148]=e=>o.data.options.remoteDataSource=e)},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.datasources,(e=>(vue.openBlock(),vue.createBlock(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["onChange","modelValue"]),vue.createVNode(x,{content:e.$t("fm.config.widget.settings")},{default:vue.withCtx((()=>[vue.createVNode(C,{link:"",type:"primary",style:{margin:"5px"},onClick:t[149]||(t[149]=e=>l.handleDatasourceManage(o.data.options.remoteDataSource))},{default:vue.withCtx((()=>[_hoisted_37])),_:1})])),_:1},8,["content"])])):vue.createCommentVNode("",!0),"datasource"==o.data.options.remoteType&&o.data.options.remoteArgs?(vue.openBlock(),vue.createBlock(S,{key:o.data.options.remoteDataSource,operable:!1,modelValue:o.data.options.remoteArgs,"onUpdate:modelValue":t[150]||(t[150]=e=>o.data.options.remoteArgs=e)},null,8,["modelValue"])):vue.createCommentVNode("",!0),vue.createVNode(u,{class:"fm-options-item",clearable:"",modelValue:o.data.options.props.value,"onUpdate:modelValue":t[151]||(t[151]=e=>o.data.options.props.value=e)},{prepend:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.value")),1)])),_:1},8,["modelValue"]),vue.createVNode(u,{class:"fm-options-item",clearable:"",modelValue:o.data.options.props.label,"onUpdate:modelValue":t[152]||(t[152]=e=>o.data.options.props.label=e)},{prepend:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.label")),1)])),_:1},8,["modelValue"]),vue.createVNode(u,{class:"fm-options-item",clearable:"",modelValue:o.data.options.props.children,"onUpdate:modelValue":t[153]||(t[153]=e=>o.data.options.props.children=e)},{prepend:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.childrenOption")),1)])),_:1},8,["modelValue"])])):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[Object.keys(o.data.options).indexOf("showLabel")>=0?(vue.openBlock(),vue.createElementBlock("div",_hoisted_38,[vue.createVNode(c,{modelValue:o.data.options.showLabel,"onUpdate:modelValue":t[154]||(t[154]=e=>o.data.options.showLabel=e)},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.showLabel")),1)])),_:1},8,["modelValue"])])):vue.createCommentVNode("",!0),"radio"==o.data.type||"select"==o.data.type&&!o.data.options.multiple?(vue.openBlock(),vue.createBlock(y,{key:1,modelValue:o.data.options.defaultValue,"onUpdate:modelValue":t[156]||(t[156]=e=>o.data.options.defaultValue=e)},{default:vue.withCtx((()=>[vue.createVNode(N,vue.mergeProps({tag:"ul",modelValue:o.data.options.options,"onUpdate:modelValue":t[155]||(t[155]=e=>o.data.options.options=e)},{group:{name:"options"},ghostClass:"ghost",handle:".drag-item"},{handle:".drag-item","item-key":"index"}),{item:vue.withCtx((({element:e,index:t})=>[(vue.openBlock(),vue.createElementBlock("li",{key:t},[vue.createVNode(b,{label:e.value,value:e.value,style:{"margin-right":"5px"}},{default:vue.withCtx((()=>[vue.createVNode(u,{clearable:"",style:vue.normalizeStyle({width:o.data.options.showLabel?"90px":"180px"}),modelValue:e.value,"onUpdate:modelValue":t=>e.value=t},null,8,["style","modelValue","onUpdate:modelValue"]),o.data.options.showLabel?(vue.openBlock(),vue.createBlock(u,{key:0,clearable:"",style:{width:"90px"},modelValue:e.label,"onUpdate:modelValue":t=>e.label=t},null,8,["modelValue","onUpdate:modelValue"])):vue.createCommentVNode("",!0)])),_:2},1032,["label","value"]),_hoisted_39,vue.createElementVNode("i",{onClick:e=>l.handleOptionsRemove(t),style:{"font-size":"16px",margin:"0 5px",cursor:"pointer"}},_hoisted_42,8,_hoisted_40)]))])),_:1},16,["modelValue"])])),_:1},8,["modelValue"])):vue.createCommentVNode("",!0),"checkbox"==o.data.type||"select"==o.data.type&&o.data.options.multiple?(vue.openBlock(),vue.createBlock(h,{key:2,modelValue:o.data.options.defaultValue,"onUpdate:modelValue":t[157]||(t[157]=e=>o.data.options.defaultValue=e)},{default:vue.withCtx((()=>[vue.createVNode(N,vue.mergeProps({tag:"ul",list:o.data.options.options},{group:{name:"options"},ghostClass:"ghost",handle:".drag-item"},{handle:".drag-item","item-key":"index"}),{item:vue.withCtx((({element:e,index:t})=>[(vue.openBlock(),vue.createElementBlock("li",{key:t},[vue.createVNode(c,{label:e.value,value:e.value,style:{"margin-right":"5px","margin-bottom":"3px"}},{default:vue.withCtx((()=>[vue.createVNode(u,{clearable:"",style:vue.normalizeStyle({width:o.data.options.showLabel?"90px":"180px"}),modelValue:e.value,"onUpdate:modelValue":t=>e.value=t},null,8,["style","modelValue","onUpdate:modelValue"]),o.data.options.showLabel?(vue.openBlock(),vue.createBlock(u,{key:0,clearable:"",style:{width:"90px"},modelValue:e.label,"onUpdate:modelValue":t=>e.label=t},null,8,["modelValue","onUpdate:modelValue"])):vue.createCommentVNode("",!0)])),_:2},1032,["label","value"]),_hoisted_43,vue.createElementVNode("i",{onClick:e=>l.handleOptionsRemove(t),style:{"font-size":"16px",margin:"0 5px",cursor:"pointer"}},_hoisted_46,8,_hoisted_44)]))])),_:1},16,["list"])])),_:1},8,["modelValue"])):vue.createCommentVNode("",!0),"cascader"!=o.data.type&&"treeselect"!=o.data.type?(vue.openBlock(),vue.createElementBlock("div",_hoisted_47,[vue.createVNode(C,{link:"",type:"primary",onClick:l.handleAddOption},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.addOption")),1)])),_:1},8,["onClick"]),vue.createVNode(C,{link:"",type:"primary",onClick:l.handleClearSelect},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.clearSelect")),1)])),_:1},8,["onClick"])])):vue.createCommentVNode("",!0),"cascader"==o.data.type?(vue.openBlock(),vue.createBlock(C,{key:4,style:{width:"100%"},onClick:l.handleSetCascader},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.setting")),1)])),_:1},8,["onClick"])):vue.createCommentVNode("",!0),"treeselect"==o.data.type?(vue.openBlock(),vue.createBlock(C,{key:5,style:{width:"100%"},onClick:l.handleSetTree},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.setting")),1)])),_:1},8,["onClick"])):vue.createCommentVNode("",!0)],64))])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("steps")>=0?(vue.openBlock(),vue.createBlock(r,{key:1,label:e.$t("fm.config.widget.steps")},{default:vue.withCtx((()=>[vue.createVNode(y,{modelValue:o.data.options.remote,"onUpdate:modelValue":t[158]||(t[158]=e=>o.data.options.remote=e),style:{"margin-bottom":"10px"}},{default:vue.withCtx((()=>[vue.createVNode(g,{label:!1,value:!1},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.staticData")),1)])),_:1}),vue.createVNode(g,{label:!0,value:!0},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.remoteData")),1)])),_:1})])),_:1},8,["modelValue"]),o.data.options.remote?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createVNode(y,{modelValue:o.data.options.remoteType,"onUpdate:modelValue":t[159]||(t[159]=e=>o.data.options.remoteType=e),style:{"margin-bottom":"8px"}},{default:vue.withCtx((()=>[vue.createVNode(b,{label:"datasource",value:"datasource"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.datasource.name")),1)])),_:1}),vue.createVNode(b,{label:"fx",value:"fx"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.formula.input.fx")),1)])),_:1})])),_:1},8,["modelValue"]),"fx"==o.data.options.remoteType?(vue.openBlock(),vue.createBlock(_,{key:0,size:"default",only:"",modelValue:o.data.options.remoteFx,"onUpdate:modelValue":t[160]||(t[160]=e=>o.data.options.remoteFx=e),style:{"margin-bottom":"5px"}},null,8,["modelValue"])):vue.createCommentVNode("",!0),"datasource"==o.data.options.remoteType?(vue.openBlock(),vue.createElementBlock("div",_hoisted_48,[vue.createVNode(d,{onChange:l.handleDataSourceChange,modelValue:o.data.options.remoteDataSource,"onUpdate:modelValue":t[161]||(t[161]=e=>o.data.options.remoteDataSource=e)},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.datasources,(e=>(vue.openBlock(),vue.createBlock(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["onChange","modelValue"]),vue.createVNode(x,{content:e.$t("fm.config.widget.settings")},{default:vue.withCtx((()=>[vue.createVNode(C,{link:"",type:"primary",style:{margin:"5px"},onClick:t[162]||(t[162]=e=>l.handleDatasourceManage(o.data.options.remoteDataSource))},{default:vue.withCtx((()=>[_hoisted_49])),_:1})])),_:1},8,["content"])])):vue.createCommentVNode("",!0),"datasource"==o.data.options.remoteType&&o.data.options.remoteArgs?(vue.openBlock(),vue.createBlock(S,{key:o.data.options.remoteDataSource,operable:!1,modelValue:o.data.options.remoteArgs,"onUpdate:modelValue":t[163]||(t[163]=e=>o.data.options.remoteArgs=e)},null,8,["modelValue"])):vue.createCommentVNode("",!0),vue.createVNode(u,{class:"fm-options-item",clearable:"",modelValue:o.data.options.props.title,"onUpdate:modelValue":t[164]||(t[164]=e=>o.data.options.props.title=e)},{prepend:vue.withCtx((()=>[vue.createTextVNode("Title")])),_:1},8,["modelValue"]),vue.createVNode(u,{class:"fm-options-item",clearable:"",modelValue:o.data.options.props.description,"onUpdate:modelValue":t[165]||(t[165]=e=>o.data.options.props.description=e)},{prepend:vue.withCtx((()=>[vue.createTextVNode("Description")])),_:1},8,["modelValue"])],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createVNode(y,{modelValue:o.data.options.defaultValue,"onUpdate:modelValue":t[166]||(t[166]=e=>o.data.options.defaultValue=e)},{default:vue.withCtx((()=>[vue.createVNode(N,vue.mergeProps({tag:"ul",list:o.data.options.steps},{group:{name:"options"},ghostClass:"ghost",handle:".drag-item"},{handle:".drag-item","item-key":"index"}),{item:vue.withCtx((({element:e,index:t})=>[(vue.openBlock(),vue.createElementBlock("li",{key:t,class:"drag-item-bk",style:{padding:"5px","margin-bottom":"5px",display:"flex","align-items":"center"}},[vue.createVNode(b,{label:t,value:t,style:{"margin-right":"5px",height:"100%"}},{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_50,[vue.createVNode(u,{placeholder:"Title",clearable:"",modelValue:e.title,"onUpdate:modelValue":t=>e.title=t},null,8,["modelValue","onUpdate:modelValue"]),vue.createTextVNode(),_hoisted_51,vue.createVNode(u,{placeholder:"Description",clearable:"",modelValue:e.description,"onUpdate:modelValue":t=>e.description=t},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1032,["label","value"]),_hoisted_52,vue.createElementVNode("i",{onClick:e=>l.handleOptionsRemove(t),style:{"font-size":"16px",margin:"0 5px",cursor:"pointer"}},_hoisted_55,8,_hoisted_53)]))])),_:1},16,["list"])])),_:1},8,["modelValue"]),vue.createElementVNode("div",_hoisted_56,[vue.createVNode(C,{link:"",type:"primary",onClick:l.handleAddStep},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.addOption")),1)])),_:1},8,["onClick"])])],64))])),_:1},8,["label"])):vue.createCommentVNode("",!0),"transfer"==o.data.type?(vue.openBlock(),vue.createBlock(r,{key:2,label:e.$t("fm.config.widget.option")},{default:vue.withCtx((()=>[vue.createVNode(y,{modelValue:o.data.options.remote,"onUpdate:modelValue":t[167]||(t[167]=e=>o.data.options.remote=e),style:{"margin-bottom":"10px"}},{default:vue.withCtx((()=>[vue.createVNode(g,{label:!1,value:!1},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.staticData")),1)])),_:1}),vue.createVNode(g,{label:!0,value:!0},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.remoteData")),1)])),_:1})])),_:1},8,["modelValue"]),o.data.options.remote?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createVNode(y,{modelValue:o.data.options.remoteType,"onUpdate:modelValue":t[168]||(t[168]=e=>o.data.options.remoteType=e),style:{"margin-bottom":"8px"}},{default:vue.withCtx((()=>[vue.createVNode(b,{label:"datasource",value:"datasource"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.datasource.name")),1)])),_:1}),vue.createVNode(b,{label:"fx",value:"fx"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.formula.input.fx")),1)])),_:1})])),_:1},8,["modelValue"]),"fx"==o.data.options.remoteType?(vue.openBlock(),vue.createBlock(_,{key:0,size:"default",only:"",modelValue:o.data.options.remoteFx,"onUpdate:modelValue":t[169]||(t[169]=e=>o.data.options.remoteFx=e),style:{"margin-bottom":"5px"}},null,8,["modelValue"])):vue.createCommentVNode("",!0),"datasource"==o.data.options.remoteType?(vue.openBlock(),vue.createElementBlock("div",_hoisted_57,[vue.createVNode(d,{onChange:l.handleDataSourceChange,modelValue:o.data.options.remoteDataSource,"onUpdate:modelValue":t[170]||(t[170]=e=>o.data.options.remoteDataSource=e)},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.datasources,(e=>(vue.openBlock(),vue.createBlock(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["onChange","modelValue"]),vue.createVNode(x,{content:e.$t("fm.config.widget.settings")},{default:vue.withCtx((()=>[vue.createVNode(C,{link:"",type:"primary",style:{margin:"5px"},onClick:t[171]||(t[171]=e=>l.handleDatasourceManage(o.data.options.remoteDataSource))},{default:vue.withCtx((()=>[_hoisted_58])),_:1})])),_:1},8,["content"])])):vue.createCommentVNode("",!0),"datasource"==o.data.options.remoteType&&o.data.options.remoteArgs?(vue.openBlock(),vue.createBlock(S,{key:o.data.options.remoteDataSource,operable:!1,modelValue:o.data.options.remoteArgs,"onUpdate:modelValue":t[172]||(t[172]=e=>o.data.options.remoteArgs=e)},null,8,["modelValue"])):vue.createCommentVNode("",!0),vue.createVNode(u,{class:"fm-options-item",clearable:"",modelValue:o.data.options.props.key,"onUpdate:modelValue":t[173]||(t[173]=e=>o.data.options.props.key=e)},{prepend:vue.withCtx((()=>[vue.createTextVNode("Key")])),_:1},8,["modelValue"]),vue.createVNode(u,{class:"fm-options-item",clearable:"",modelValue:o.data.options.props.label,"onUpdate:modelValue":t[174]||(t[174]=e=>o.data.options.props.label=e)},{prepend:vue.withCtx((()=>[vue.createTextVNode("Label")])),_:1},8,["modelValue"]),vue.createVNode(u,{class:"fm-options-item",clearable:"",modelValue:o.data.options.props.disabled,"onUpdate:modelValue":t[175]||(t[175]=e=>o.data.options.props.disabled=e)},{prepend:vue.withCtx((()=>[vue.createTextVNode("Disabled")])),_:1},8,["modelValue"])],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createVNode(h,{modelValue:o.data.options.defaultValue,"onUpdate:modelValue":t[176]||(t[176]=e=>o.data.options.defaultValue=e)},{default:vue.withCtx((()=>[vue.createVNode(N,vue.mergeProps({tag:"ul",list:o.data.options.data},{group:{name:"options"},ghostClass:"ghost",handle:".drag-item"},{handle:".drag-item","item-key":"index"}),{item:vue.withCtx((({element:e,index:t})=>[(vue.openBlock(),vue.createElementBlock("li",{key:e.key,class:"drag-item-bk",style:{padding:"5px","margin-bottom":"5px",display:"flex","align-items":"center"}},[vue.createVNode(c,{label:e.label,value:e.key,style:{"margin-right":"5px",height:"100%"}},{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_59,[vue.createVNode(u,{placeholder:"Key",clearable:"",modelValue:e.key,"onUpdate:modelValue":t=>e.key=t,style:{"margin-bottom":"3px"}},null,8,["modelValue","onUpdate:modelValue"]),vue.createTextVNode(),_hoisted_60,vue.createVNode(u,{placeholder:"Label",clearable:"",modelValue:e.label,"onUpdate:modelValue":t=>e.label=t},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1032,["label","value"]),_hoisted_61,vue.createElementVNode("i",{onClick:e=>l.handleOptionsRemove(t),style:{"font-size":"16px",margin:"0 5px",cursor:"pointer"}},_hoisted_64,8,_hoisted_62)]))])),_:1},16,["list"])])),_:1},8,["modelValue"]),vue.createElementVNode("div",_hoisted_65,[vue.createVNode(C,{link:"",type:"primary",onClick:l.handleAddData},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.addOption")),1)])),_:1},8,["onClick"]),vue.createVNode(C,{link:"",type:"primary",onClick:l.handleClearSelect},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.clearSelect")),1)])),_:1},8,["onClick"])])],64))])),_:1},8,["label"])):vue.createCommentVNode("",!0)])),_:1},8,["title"])):vue.createCommentVNode("",!0),"list"==o.data.type?(vue.openBlock(),vue.createBlock(O,{key:1,title:e.$t("fm.config.widget.columnSetting"),name:"columns"},{default:vue.withCtx((()=>[vue.createVNode(r,null,{default:vue.withCtx((()=>[vue.createVNode(I,{modelValue:o.data.options.columns,"onUpdate:modelValue":t[177]||(t[177]=e=>o.data.options.columns=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["title"])):vue.createCommentVNode("",!0),"list"==o.data.type?(vue.openBlock(),vue.createBlock(O,{key:2,title:e.$t("fm.config.widget.operationSetting"),name:"operation"},{default:vue.withCtx((()=>[vue.createVNode(r,{label:e.$t("fm.config.widget.showOperation")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.showOperation,"onUpdate:modelValue":t[178]||(t[178]=e=>o.data.options.showOperation=e)},null,8,["modelValue"])])),_:1},8,["label"]),o.data.options.showOperation?(vue.openBlock(),vue.createBlock(F,{key:0,modelValue:o.data.options.operations,"onUpdate:modelValue":t[179]||(t[179]=e=>o.data.options.operations=e),onOnAddButtonevent:l.handleButtonEventAdd,onOnEditButtonevent:l.handleButtonEventEdit},null,8,["modelValue","onOnAddButtonevent","onOnEditButtonevent"])):vue.createCommentVNode("",!0)])),_:1},8,["title"])):vue.createCommentVNode("",!0),"list"==o.data.type?(vue.openBlock(),vue.createBlock(O,{key:3,title:e.$t("fm.config.widget.pageSetting"),name:"paging"},{default:vue.withCtx((()=>[vue.createVNode(r,{label:e.$t("fm.config.widget.paging")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.pagination.paging,"onUpdate:modelValue":t[180]||(t[180]=e=>o.data.options.pagination.paging=e)},null,8,["modelValue"])])),_:1},8,["label"]),o.data.options.pagination.paging?(vue.openBlock(),vue.createBlock(r,{key:0,label:e.$t("fm.config.widget.pageSizes")},{default:vue.withCtx((()=>[vue.createVNode(u,{modelValue:o.data.options.pagination.pageSizes,"onUpdate:modelValue":t[181]||(t[181]=e=>o.data.options.pagination.pageSizes=e),placeholder:e.$t("fm.config.widget.pageSizesPlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),o.data.options.pagination.paging?(vue.openBlock(),vue.createBlock(r,{key:1,label:e.$t("fm.config.widget.pagerCount")},{default:vue.withCtx((()=>[vue.createVNode(p,{step:2,min:5,max:21,modelValue:o.data.options.pagination.pagerCount,"onUpdate:modelValue":t[182]||(t[182]=e=>o.data.options.pagination.pagerCount=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),o.data.options.pagination.paging?(vue.openBlock(),vue.createBlock(r,{key:2,label:e.$t("fm.config.widget.background")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.pagination.background,"onUpdate:modelValue":t[183]||(t[183]=e=>o.data.options.pagination.background=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),o.data.options.pagination.paging?(vue.openBlock(),vue.createBlock(r,{key:3,label:e.$t("fm.config.widget.smallPage")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:o.data.options.pagination.small,"onUpdate:modelValue":t[184]||(t[184]=e=>o.data.options.pagination.small=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0),o.data.options.pagination.paging?(vue.openBlock(),vue.createBlock(r,{key:4,label:e.$t("fm.config.widget.dataStruct")},{default:vue.withCtx((()=>[vue.createVNode(u,{class:"fm-options-item",clearable:"",modelValue:o.data.options.pagination.props.list,"onUpdate:modelValue":t[185]||(t[185]=e=>o.data.options.pagination.props.list=e)},{prepend:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.structList")),1)])),_:1},8,["modelValue"]),vue.createVNode(u,{class:"fm-options-item",clearable:"",modelValue:o.data.options.pagination.props.total,"onUpdate:modelValue":t[186]||(t[186]=e=>o.data.options.pagination.props.total=e)},{prepend:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.structTotal")),1)])),_:1},8,["modelValue"]),vue.createVNode(u,{class:"fm-options-item",clearable:"",modelValue:o.data.options.pagination.props.size,"onUpdate:modelValue":t[187]||(t[187]=e=>o.data.options.pagination.props.size=e)},{prepend:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.structSize")),1)])),_:1},8,["modelValue"]),vue.createVNode(u,{class:"fm-options-item",clearable:"",modelValue:o.data.options.pagination.props.current,"onUpdate:modelValue":t[188]||(t[188]=e=>o.data.options.pagination.props.current=e)},{prepend:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.structCurrent")),1)])),_:1},8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0)])),_:1},8,["title"])):vue.createCommentVNode("",!0),vue.createVNode(O,{title:e.$t("fm.config.widget.expandSetting"),name:"expend"},{default:vue.withCtx((()=>[["grid","col","report","th","td","tabs","collapse","inline","card","divider","alert"].includes(o.data.type)?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(r,{key:0,label:e.$t("fm.config.widget.dynamicValue")},{default:vue.withCtx((()=>[vue.createElementVNode("div",null,[vue.createVNode(m,{modelValue:o.data.options.isDynamicValue,"onUpdate:modelValue":t[189]||(t[189]=e=>o.data.options.isDynamicValue=e)},null,8,["modelValue"])]),o.data.options.isDynamicValue?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createVNode(y,{modelValue:o.data.options.dynamicValueType,"onUpdate:modelValue":t[190]||(t[190]=e=>o.data.options.dynamicValueType=e),style:{"margin-bottom":"10px"}},{default:vue.withCtx((()=>[vue.createVNode(b,{label:"datasource",value:"datasource"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.datasource.name")),1)])),_:1}),vue.createVNode(b,{label:"fx",value:"fx"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.formula.input.fx")),1)])),_:1})])),_:1},8,["modelValue"]),"fx"==o.data.options.dynamicValueType?(vue.openBlock(),vue.createBlock(_,{key:0,size:"default",only:"",modelValue:o.data.options.dynamicValueFx,"onUpdate:modelValue":t[191]||(t[191]=e=>o.data.options.dynamicValueFx=e),style:{"margin-bottom":"5px"}},null,8,["modelValue"])):vue.createCommentVNode("",!0),"datasource"==o.data.options.dynamicValueType?(vue.openBlock(),vue.createElementBlock("div",_hoisted_66,[vue.createVNode(d,{onChange:l.handleDynamicDataSourceChange,modelValue:o.data.options.dynamicValueDataSource,"onUpdate:modelValue":t[192]||(t[192]=e=>o.data.options.dynamicValueDataSource=e)},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.datasources,(e=>(vue.openBlock(),vue.createBlock(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["onChange","modelValue"]),vue.createVNode(x,{content:e.$t("fm.config.widget.settings")},{default:vue.withCtx((()=>[vue.createVNode(C,{link:"",type:"primary",style:{margin:"5px"},onClick:t[193]||(t[193]=e=>l.handleDatasourceManage(o.data.options.dynamicValueDataSource))},{default:vue.withCtx((()=>[_hoisted_67])),_:1})])),_:1},8,["content"])])):vue.createCommentVNode("",!0),"datasource"==o.data.options.dynamicValueType&&o.data.options.dynamicValueArgs?(vue.openBlock(),vue.createBlock(S,{key:o.data.options.dynamicValueDataSource,operable:!1,modelValue:o.data.options.dynamicValueArgs,"onUpdate:modelValue":t[194]||(t[194]=e=>o.data.options.dynamicValueArgs=e)},null,8,["modelValue"])):vue.createCommentVNode("",!0),"datasource"==o.data.options.dynamicValueType?(vue.openBlock(),vue.createBlock(u,{key:3,class:"fm-options-item",placeholder:e.$t("fm.config.widget.dynamicStructPlaceholder"),clearable:"",modelValue:o.data.options.dynamicValueStruct,"onUpdate:modelValue":t[195]||(t[195]=e=>o.data.options.dynamicValueStruct=e)},{prepend:vue.withCtx((()=>[vue.createTextVNode("data.")])),_:1},8,["placeholder","modelValue"])):vue.createCommentVNode("",!0)],64)):vue.createCommentVNode("",!0)])),_:1},8,["label"])),"td"!=o.data.type&&"th"!=o.data.type&&"col"!=o.data.type&&"dialog"!=o.data.type?(vue.openBlock(),vue.createBlock(r,{key:1,label:e.$t("fm.config.widget.state")},{default:vue.withCtx((()=>[Object.keys(o.data.options).indexOf("hidden")>=0?(vue.openBlock(),vue.createBlock(L,{key:0,modelValue:o.data.options.hidden,"onUpdate:modelValue":t[196]||(t[196]=e=>o.data.options.hidden=e),label:e.$t("fm.config.widget.hidden")},null,8,["modelValue","label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("disabled")>=0?(vue.openBlock(),vue.createBlock(L,{key:1,modelValue:o.data.options.disabled,"onUpdate:modelValue":t[197]||(t[197]=e=>o.data.options.disabled=e),label:e.$t("fm.config.widget.disabled")},null,8,["modelValue","label"])):vue.createCommentVNode("",!0)])),_:1},8,["label"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).includes("customClass")?(vue.openBlock(),vue.createBlock(r,{key:2,label:e.$t("fm.config.widget.customClass")},{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_68,[vue.createVNode(d,{modelValue:i.customClassArray,"onUpdate:modelValue":t[198]||(t[198]=e=>i.customClassArray=e),multiple:"",filterable:"","allow-create":"","default-first-option":""},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.sheets,(e=>(vue.openBlock(),vue.createBlock(s,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),vue.createVNode(x,{content:e.$t("fm.config.widget.settings")},{default:vue.withCtx((()=>[vue.createVNode(C,{link:"",type:"primary",style:{margin:"5px"},onClick:l.handleSetClass},{default:vue.withCtx((()=>[_hoisted_69])),_:1},8,["onClick"])])),_:1},8,["content"])])])),_:1},8,["label"])):vue.createCommentVNode("",!0),"td"!=o.data.type&&"th"!=o.data.type&&"col"!=o.data.type&&"button"!=o.data.type?(vue.openBlock(),vue.createBlock(r,{label:e.$t("fm.config.widget.attribute"),key:"attribute"},{default:vue.withCtx((()=>[Object.keys(o.data.options).indexOf("dataBind")>=0?(vue.openBlock(),vue.createBlock(c,{key:0,modelValue:o.data.options.dataBind,"onUpdate:modelValue":t[199]||(t[199]=e=>o.data.options.dataBind=e)},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.dataBind")),1)])),_:1},8,["modelValue"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("readonly")>=0?(vue.openBlock(),vue.createBlock(c,{key:1,modelValue:o.data.options.readonly,"onUpdate:modelValue":t[200]||(t[200]=e=>o.data.options.readonly=e)},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.readonly")),1)])),_:1},8,["modelValue"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("editable")>=0?(vue.openBlock(),vue.createBlock(c,{key:2,modelValue:o.data.options.editable,"onUpdate:modelValue":t[201]||(t[201]=e=>o.data.options.editable=e)},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.editable")),1)])),_:1},8,["modelValue"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("clearable")>=0?(vue.openBlock(),vue.createBlock(c,{key:3,modelValue:o.data.options.clearable,"onUpdate:modelValue":t[202]||(t[202]=e=>o.data.options.clearable=e)},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.clearable")),1)])),_:1},8,["modelValue"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("arrowControl")>=0?(vue.openBlock(),vue.createBlock(c,{key:4,modelValue:o.data.options.arrowControl,"onUpdate:modelValue":t[203]||(t[203]=e=>o.data.options.arrowControl=e)},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.arrowControl")),1)])),_:1},8,["modelValue"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("isDelete")>=0?(vue.openBlock(),vue.createBlock(c,{key:5,modelValue:o.data.options.isDelete,"onUpdate:modelValue":t[204]||(t[204]=e=>o.data.options.isDelete=e)},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.isDelete")),1)])),_:1},8,["modelValue"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("isEdit")>=0?(vue.openBlock(),vue.createBlock(c,{key:6,modelValue:o.data.options.isEdit,"onUpdate:modelValue":t[205]||(t[205]=e=>o.data.options.isEdit=e)},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.isEdit")),1)])),_:1},8,["modelValue"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("isAdd")>=0?(vue.openBlock(),vue.createBlock(c,{key:7,modelValue:o.data.options.isAdd,"onUpdate:modelValue":t[206]||(t[206]=e=>o.data.options.isAdd=e)},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.isAdd")),1)])),_:1},8,["modelValue"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("showPassword")>=0?(vue.openBlock(),vue.createBlock(c,{key:8,modelValue:o.data.options.showPassword,"onUpdate:modelValue":t[207]||(t[207]=e=>o.data.options.showPassword=e)},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.showPassword")),1)])),_:1},8,["modelValue"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("showScore")>=0?(vue.openBlock(),vue.createBlock(c,{key:9,modelValue:o.data.options.showScore,"onUpdate:modelValue":t[208]||(t[208]=e=>o.data.options.showScore=e)},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.showScore")),1)])),_:1},8,["modelValue"])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("showWordLimit")>=0?(vue.openBlock(),vue.createBlock(c,{key:10,modelValue:o.data.options.showWordLimit,"onUpdate:modelValue":t[209]||(t[209]=e=>o.data.options.showWordLimit=e)},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.showWordLimit")),1)])),_:1},8,["modelValue"])):vue.createCommentVNode("",!0)])),_:1},8,["label"])):vue.createCommentVNode("",!0),o.data.options.customProps?vue.renderSlot(e.$slots,"widgetconfig",{key:4,type:o.data.type,data:o.data,customProps:o.data.options.customProps}):vue.createCommentVNode("",!0),Object.keys(o.data.options).includes("extendProps")?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:5},[Object.keys(o.data.options).includes("extendProps")?(vue.openBlock(),vue.createBlock(r,{key:0,label:e.$t("fm.config.widget.extendPropsConfig")},{default:vue.withCtx((()=>[vue.createVNode(P,{modelValue:o.data.options.extendProps,"onUpdate:modelValue":t[210]||(t[210]=e=>o.data.options.extendProps=e)},null,8,["modelValue"])])),_:1},8,["label"])):vue.createCommentVNode("",!0)],64)):vue.createCommentVNode("",!0),"grid"!=o.data.type&&"tabs"!=o.data.type&&"collapse"!=o.data.type&&"report"!=o.data.type&&"inline"!=o.data.type&&"divider"!=o.data.type&&"td"!=o.data.type&&"th"!=o.data.type&&"col"!=o.data.type&&"button"!=o.data.type&&"link"!=o.data.type&&"steps"!=o.data.type&&"alert"!=o.data.type&&"pagination"!=o.data.type&&"dialog"!=o.data.type&&"list"!=o.data.type&&"card"!=o.data.type?(vue.openBlock(),vue.createBlock(r,{key:6,label:e.$t("fm.config.widget.validate")},{default:vue.withCtx((()=>[Object.keys(o.data.options).indexOf("required")>=0?(vue.openBlock(),vue.createElementBlock("div",_hoisted_70,[vue.createVNode(c,{modelValue:o.data.options.required,"onUpdate:modelValue":t[211]||(t[211]=e=>o.data.options.required=e)},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.required")),1)])),_:1},8,["modelValue"]),o.data.options.required?(vue.openBlock(),vue.createBlock(u,{key:0,class:"message-input",clearable:"",modelValue:o.data.options.requiredMessage,"onUpdate:modelValue":t[212]||(t[212]=e=>o.data.options.requiredMessage=e),placeholder:e.$t("fm.message.errorTip")},null,8,["modelValue","placeholder"])):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("dataType")>=0?(vue.openBlock(),vue.createElementBlock("div",_hoisted_71,[vue.createVNode(c,{modelValue:o.data.options.dataTypeCheck,"onUpdate:modelValue":t[213]||(t[213]=e=>o.data.options.dataTypeCheck=e),style:{"margin-right":"10px"}},null,8,["modelValue"]),Object.keys(o.data.options).indexOf("dataType")>=0?(vue.openBlock(),vue.createBlock(d,{key:0,disabled:!o.data.options.dataTypeCheck,modelValue:o.data.options.dataType,"onUpdate:modelValue":t[214]||(t[214]=e=>o.data.options.dataType=e),style:{width:"239px"}},{default:vue.withCtx((()=>[vue.createVNode(s,{value:"string",label:e.$t("fm.config.widget.string")},null,8,["label"]),vue.createVNode(s,{value:"url",label:e.$t("fm.config.widget.url")},null,8,["label"]),vue.createVNode(s,{value:"email",label:e.$t("fm.config.widget.email")},null,8,["label"]),vue.createVNode(s,{value:"hex",label:e.$t("fm.config.widget.hex")},null,8,["label"])])),_:1},8,["disabled","modelValue"])):vue.createCommentVNode("",!0),o.data.options.dataTypeCheck?(vue.openBlock(),vue.createBlock(u,{key:1,class:"message-input",clearable:"",modelValue:o.data.options.dataTypeMessage,"onUpdate:modelValue":t[215]||(t[215]=e=>o.data.options.dataTypeMessage=e),placeholder:e.$t("fm.message.errorTip")},null,8,["modelValue","placeholder"])):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("pattern")>=0?(vue.openBlock(),vue.createElementBlock("div",_hoisted_72,[vue.createVNode(c,{modelValue:o.data.options.patternCheck,"onUpdate:modelValue":t[216]||(t[216]=e=>o.data.options.patternCheck=e),style:{"margin-right":"10px"}},null,8,["modelValue"]),vue.createVNode(u,{clearable:"",disabled:!o.data.options.patternCheck,modelValue:o.data.options.pattern,"onUpdate:modelValue":t[217]||(t[217]=e=>o.data.options.pattern=e),modelModifiers:{lazy:!0},style:{width:"239px"},placeholder:e.$t("fm.config.widget.patternPlaceholder")},null,8,["disabled","modelValue","placeholder"]),o.data.options.patternCheck?(vue.openBlock(),vue.createBlock(u,{key:0,class:"message-input",clearable:"",modelValue:o.data.options.patternMessage,"onUpdate:modelValue":t[218]||(t[218]=e=>o.data.options.patternMessage=e),placeholder:e.$t("fm.message.errorTip")},null,8,["modelValue","placeholder"])):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0),Object.keys(o.data.options).indexOf("validator")>=0?(vue.openBlock(),vue.createElementBlock("div",_hoisted_73,[vue.createVNode(c,{modelValue:o.data.options.validatorCheck,"onUpdate:modelValue":t[219]||(t[219]=e=>o.data.options.validatorCheck=e),style:{"margin-right":"10px"}},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.customValidation")),1)])),_:1},8,["modelValue"]),o.data.options.validatorCheck?(vue.openBlock(),vue.createElementBlock("div",_hoisted_74,[vue.createVNode(D,{placement:"right",width:500,trigger:"click","hide-after":0},{reference:vue.withCtx((()=>[vue.createVNode(C,{class:"message-input"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.setting")),1)])),_:1})])),default:vue.withCtx((()=>[vue.createElementVNode("div",null,[_hoisted_75,(vue.openBlock(),vue.createBlock(v,{mode:"javascript",key:o.data.key,modelValue:o.data.options.validator,"onUpdate:modelValue":t[220]||(t[220]=e=>o.data.options.validator=e),height:"300px"},null,8,["modelValue"])),_hoisted_76])])),_:1})])):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0)])),_:1},8,["label"])):vue.createCommentVNode("",!0),o.data.events?(vue.openBlock(),vue.createBlock(r,{key:7,label:e.$t("fm.eventscript.config.title")},{default:vue.withCtx((()=>[vue.createVNode(M,{events:o.data.events,eventscripts:o.eventscripts,onOnAdd:l.handleEventAdd,onOnEdit:l.handleEventEdit,onOnRemove:l.handleEventRemove},null,8,["events","eventscripts","onOnAdd","onOnEdit","onOnRemove"])])),_:1},8,["label"])):vue.createCommentVNode("",!0)])),_:3},8,["title"])])),_:3})])),_:3},8,["model"])])):(vue.openBlock(),vue.createElementBlock("div",_hoisted_77,vue.toDisplayString(e.$t("fm.description.configEmpty")),1)),vue.createVNode(z,{ref:"codeDialog",mode:"html",title:e.$t("fm.config.widget.customTemplates"),help:"https://form.making.link/docs/manual/component.html",onOnConfirm:l.handleTemplateConfirm},null,8,["title","onOnConfirm"]),vue.createVNode(z,{ref:"cascaderDialog",width:"800px","code-height":"400px",mode:"javascript",title:e.$t("fm.config.widget.option"),onOnConfirm:l.handleCascaderConfirm},null,8,["title","onOnConfirm"]),vue.createVNode(z,{ref:"treeDialog",width:"800px","code-height":"400px",mode:"javascript",title:e.$t("fm.config.widget.option"),onOnConfirm:l.handleTreeConfirm},null,8,["title","onOnConfirm"]),vue.createVNode(z,{ref:"extendPropsDialog",width:"800px","code-height":"400px",mode:"javascript",title:e.$t("fm.config.widget.extendPropsConfig"),onOnConfirm:l.handlePropsConfirm},null,8,["title","onOnConfirm"]),vue.createVNode(z,{ref:"defaultValueDialog",width:"800px","code-height":"400px",mode:"javascript",title:e.$t("fm.config.widget.defaultValue"),onOnConfirm:l.handleDefaultValueConfirm},null,8,["title","onOnConfirm"]),vue.createVNode(W,{visible:i.editorVisible,onOnClose:t[222]||(t[222]=e=>i.editorVisible=!1),width:`calc(${(null==(j=null==(n=o.data)?void 0:n.options)?void 0:j.width)||"900px"} + 40px)`,title:e.$t("fm.config.widget.defaultValue"),onOnSubmit:l.handleEditorValueConfirm},{default:vue.withCtx((()=>[vue.createVNode(U,{modelValue:i.editorValue,"onUpdate:modelValue":t[221]||(t[221]=e=>i.editorValue=e),"custom-style":{width:o.data.options.width},toolbar:o.data.options.customToolbar,class:"fm-editor"},null,8,["modelValue","custom-style","toolbar"])])),_:1},8,["visible","width","title","onOnSubmit"])])]})),_:3})}var WidgetConfig=_export_sfc(_sfc_main$1i,[["render",_sfc_render$1g]]),axios$2={exports:{}},bind$2=function(e,t){return function(){for(var o=new Array(arguments.length),n=0;n<o.length;n++)o[n]=arguments[n];return e.apply(t,o)}},bind$1=bind$2,toString=Object.prototype.toString;function isArray(e){return Array.isArray(e)}function isUndefined$1(e){return void 0===e}function isBuffer(e){return null!==e&&!isUndefined$1(e)&&null!==e.constructor&&!isUndefined$1(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isArrayBuffer(e){return"[object ArrayBuffer]"===toString.call(e)}function isFormData(e){return"[object FormData]"===toString.call(e)}function isArrayBufferView(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&isArrayBuffer(e.buffer)}function isString$1(e){return"string"==typeof e}function isNumber$1(e){return"number"==typeof e}function isObject$2(e){return null!==e&&"object"==typeof e}function isPlainObject$1(e){if("[object Object]"!==toString.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function isDate(e){return"[object Date]"===toString.call(e)}function isFile(e){return"[object File]"===toString.call(e)}function isBlob(e){return"[object Blob]"===toString.call(e)}function isFunction$2(e){return"[object Function]"===toString.call(e)}function isStream(e){return isObject$2(e)&&isFunction$2(e.pipe)}function isURLSearchParams(e){return"[object URLSearchParams]"===toString.call(e)}function trim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function forEach$1(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),isArray(e))for(var o=0,n=e.length;o<n;o++)t.call(null,e[o],o,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function merge(){var e={};function t(t,o){isPlainObject$1(e[o])&&isPlainObject$1(t)?e[o]=merge(e[o],t):isPlainObject$1(t)?e[o]=merge({},t):isArray(t)?e[o]=t.slice():e[o]=t}for(var o=0,n=arguments.length;o<n;o++)forEach$1(arguments[o],t);return e}function extend$1(e,t,o){return forEach$1(t,(function(t,n){e[n]=o&&"function"==typeof t?bind$1(t,o):t})),e}function stripBOM(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}var utils$e={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isObject:isObject$2,isPlainObject:isPlainObject$1,isUndefined:isUndefined$1,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction$2,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach$1,merge:merge,extend:extend$1,trim:trim,stripBOM:stripBOM},utils$d=utils$e;function encode$1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$2=function(e,t,o){if(!t)return e;var n;if(o)n=o(t);else if(utils$d.isURLSearchParams(t))n=t.toString();else{var i=[];utils$d.forEach(t,(function(e,t){null!=e&&(utils$d.isArray(e)?t+="[]":e=[e],utils$d.forEach(e,(function(e){utils$d.isDate(e)?e=e.toISOString():utils$d.isObject(e)&&(e=JSON.stringify(e)),i.push(encode$1(t)+"="+encode$1(e))})))})),n=i.join("&")}if(n){var l=e.indexOf("#");-1!==l&&(e=e.slice(0,l)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e},utils$c=utils$e;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function(e,t,o){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!o&&o.synchronous,runWhen:o?o.runWhen:null}),this.handlers.length-1},InterceptorManager$1.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},InterceptorManager$1.prototype.forEach=function(e){utils$c.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var InterceptorManager_1=InterceptorManager$1,utils$b=utils$e,normalizeHeaderName$1=function(e,t){utils$b.forEach(e,(function(o,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=o,delete e[n])}))},enhanceError$2=function(e,t,o,n,i){return e.config=t,o&&(e.code=o),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},transitional={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},enhanceError$1=enhanceError$2,createError$2=function(e,t,o,n,i){var l=new Error(e);return enhanceError$1(l,t,o,n,i)},createError$1=createError$2,settle$1=function(e,t,o){var n=o.config.validateStatus;o.status&&n&&!n(o.status)?t(createError$1("Request failed with status code "+o.status,o.config,null,o.request,o)):e(o)},utils$a=utils$e,cookies$1=utils$a.isStandardBrowserEnv()?{write:function(e,t,o,n,i,l){var a=[];a.push(e+"="+encodeURIComponent(t)),utils$a.isNumber(o)&&a.push("expires="+new Date(o).toGMTString()),utils$a.isString(n)&&a.push("path="+n),utils$a.isString(i)&&a.push("domain="+i),!0===l&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},isAbsoluteURL$1=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},combineURLs$1=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function(e,t){return e&&!isAbsoluteURL(t)?combineURLs(e,t):t},utils$9=utils$e,ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders$1=function(e){var t,o,n,i={};return e?(utils$9.forEach(e.split("\n"),(function(e){if(n=e.indexOf(":"),t=utils$9.trim(e.substr(0,n)).toLowerCase(),o=utils$9.trim(e.substr(n+1)),t){if(i[t]&&ignoreDuplicateOf.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([o]):i[t]?i[t]+", "+o:o}})),i):i},utils$8=utils$e,isURLSameOrigin$1=utils$8.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function n(e){var n=e;return t&&(o.setAttribute("href",n),n=o.href),o.setAttribute("href",n),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}return e=n(window.location.href),function(t){var o=utils$8.isString(t)?n(t):t;return o.protocol===e.protocol&&o.host===e.host}}():function(){return!0};function Cancel$3(e){this.message=e}Cancel$3.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel$3.prototype.__CANCEL__=!0;var Cancel_1=Cancel$3,utils$7=utils$e,settle=settle$1,cookies=cookies$1,buildURL$1=buildURL$2,buildFullPath=buildFullPath$1,parseHeaders=parseHeaders$1,isURLSameOrigin=isURLSameOrigin$1,createError=createError$2,transitionalDefaults$1=transitional,Cancel$2=Cancel_1,xhr=function(e){return new Promise((function(t,o){var n,i=e.data,l=e.headers,a=e.responseType;function r(){e.cancelToken&&e.cancelToken.unsubscribe(n),e.signal&&e.signal.removeEventListener("abort",n)}utils$7.isFormData(i)&&delete l["Content-Type"];var s=new XMLHttpRequest;if(e.auth){var d=e.auth.username||"",u=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";l.Authorization="Basic "+btoa(d+":"+u)}var c=buildFullPath(e.baseURL,e.url);function p(){if(s){var n="getAllResponseHeaders"in s?parseHeaders(s.getAllResponseHeaders()):null,i={data:a&&"text"!==a&&"json"!==a?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:n,config:e,request:s};settle((function(e){t(e),r()}),(function(e){o(e),r()}),i),s=null}}if(s.open(e.method.toUpperCase(),buildURL$1(c,e.params,e.paramsSerializer),!0),s.timeout=e.timeout,"onloadend"in s?s.onloadend=p:s.onreadystatechange=function(){s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))&&setTimeout(p)},s.onabort=function(){s&&(o(createError("Request aborted",e,"ECONNABORTED",s)),s=null)},s.onerror=function(){o(createError("Network Error",e,null,s)),s=null},s.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||transitionalDefaults$1;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),o(createError(t,e,n.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",s)),s=null},utils$7.isStandardBrowserEnv()){var m=(e.withCredentials||isURLSameOrigin(c))&&e.xsrfCookieName?cookies.read(e.xsrfCookieName):void 0;m&&(l[e.xsrfHeaderName]=m)}"setRequestHeader"in s&&utils$7.forEach(l,(function(e,t){void 0===i&&"content-type"===t.toLowerCase()?delete l[t]:s.setRequestHeader(t,e)})),utils$7.isUndefined(e.withCredentials)||(s.withCredentials=!!e.withCredentials),a&&"json"!==a&&(s.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&s.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(n=function(e){s&&(o(!e||e&&e.type?new Cancel$2("canceled"):e),s.abort(),s=null)},e.cancelToken&&e.cancelToken.subscribe(n),e.signal&&(e.signal.aborted?n():e.signal.addEventListener("abort",n))),i||(i=null),s.send(i)}))},utils$6=utils$e,normalizeHeaderName=normalizeHeaderName$1,enhanceError=enhanceError$2,transitionalDefaults=transitional,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,t){!utils$6.isUndefined(e)&&utils$6.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function getDefaultAdapter(){var e;return("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=xhr),e}function stringifySafely(e,t,o){if(utils$6.isString(e))try{return(t||JSON.parse)(e),utils$6.trim(e)}catch(n){if("SyntaxError"!==n.name)throw n}return(o||JSON.stringify)(e)}var defaults$3={transitional:transitionalDefaults,adapter:getDefaultAdapter(),transformRequest:[function(e,t){return normalizeHeaderName(t,"Accept"),normalizeHeaderName(t,"Content-Type"),utils$6.isFormData(e)||utils$6.isArrayBuffer(e)||utils$6.isBuffer(e)||utils$6.isStream(e)||utils$6.isFile(e)||utils$6.isBlob(e)?e:utils$6.isArrayBufferView(e)?e.buffer:utils$6.isURLSearchParams(e)?(setContentTypeIfUnset(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):utils$6.isObject(e)||t&&"application/json"===t["Content-Type"]?(setContentTypeIfUnset(t,"application/json"),stringifySafely(e)):e}],transformResponse:[function(e){var t=this.transitional||defaults$3.transitional,o=t&&t.silentJSONParsing,n=t&&t.forcedJSONParsing,i=!o&&"json"===this.responseType;if(i||n&&utils$6.isString(e)&&e.length)try{return JSON.parse(e)}catch(l){if(i){if("SyntaxError"===l.name)throw enhanceError(l,this,"E_JSON_PARSE");throw l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$6.forEach(["delete","get","head"],(function(e){defaults$3.headers[e]={}})),utils$6.forEach(["post","put","patch"],(function(e){defaults$3.headers[e]=utils$6.merge(DEFAULT_CONTENT_TYPE)}));var defaults_1=defaults$3,utils$5=utils$e,defaults$2=defaults_1,transformData$1=function(e,t,o){var n=this||defaults$2;return utils$5.forEach(o,(function(o){e=o.call(n,e,t)})),e},isCancel$1=function(e){return!(!e||!e.__CANCEL__)},utils$4=utils$e,transformData=transformData$1,isCancel=isCancel$1,defaults$1=defaults_1,Cancel$1=Cancel_1;function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Cancel$1("canceled")}var dispatchRequest$1=function(e){return throwIfCancellationRequested(e),e.headers=e.headers||{},e.data=transformData.call(e,e.data,e.headers,e.transformRequest),e.headers=utils$4.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),utils$4.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||defaults$1.adapter)(e).then((function(t){return throwIfCancellationRequested(e),t.data=transformData.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return isCancel(t)||(throwIfCancellationRequested(e),t&&t.response&&(t.response.data=transformData.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},utils$3=utils$e,mergeConfig$2=function(e,t){t=t||{};var o={};function n(e,t){return utils$3.isPlainObject(e)&&utils$3.isPlainObject(t)?utils$3.merge(e,t):utils$3.isPlainObject(t)?utils$3.merge({},t):utils$3.isArray(t)?t.slice():t}function i(o){return utils$3.isUndefined(t[o])?utils$3.isUndefined(e[o])?void 0:n(void 0,e[o]):n(e[o],t[o])}function l(e){if(!utils$3.isUndefined(t[e]))return n(void 0,t[e])}function a(o){return utils$3.isUndefined(t[o])?utils$3.isUndefined(e[o])?void 0:n(void 0,e[o]):n(void 0,t[o])}function r(o){return o in t?n(e[o],t[o]):o in e?n(void 0,e[o]):void 0}var s={url:l,method:l,data:l,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:r};return utils$3.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=s[e]||i,n=t(e);utils$3.isUndefined(n)&&t!==r||(o[e]=n)})),o},data$1={version:"0.26.1"},VERSION=data$1.version,validators$1={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){validators$1[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}}));var deprecatedWarnings={};function assertOptions(e,t,o){if("object"!=typeof e)throw new TypeError("options must be an object");for(var n=Object.keys(e),i=n.length;i-- >0;){var l=n[i],a=t[l];if(a){var r=e[l],s=void 0===r||a(r,l,e);if(!0!==s)throw new TypeError("option "+l+" must be "+s)}else if(!0!==o)throw Error("Unknown option "+l)}}validators$1.transitional=function(e,t,o){return function(n,i,l){if(!1===e)throw new Error(function(e,t){return"[Axios v"+VERSION+"] Transitional option '"+e+"'"+t+(o?". "+o:"")}(i," has been removed"+(t?" in "+t:"")));return t&&!deprecatedWarnings[i]&&(deprecatedWarnings[i]=!0),!e||e(n,i,l)}};var validator$1={assertOptions:assertOptions,validators:validators$1},utils$2=utils$e,buildURL=buildURL$2,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,validator=validator$1,validators=validator.validators;function Axios$1(e){this.defaults=e,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=mergeConfig$1(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var o=t.transitional;void 0!==o&&validator.assertOptions(o,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var l,a=[];if(this.interceptors.response.forEach((function(e){a.push(e.fulfilled,e.rejected)})),!i){var r=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(r,n),r=r.concat(a),l=Promise.resolve(t);r.length;)l=l.then(r.shift(),r.shift());return l}for(var s=t;n.length;){var d=n.shift(),u=n.shift();try{s=d(s)}catch(c){u(c);break}}try{l=dispatchRequest(s)}catch(c){return Promise.reject(c)}for(;a.length;)l=l.then(a.shift(),a.shift());return l},Axios$1.prototype.getUri=function(e){return e=mergeConfig$1(this.defaults,e),buildURL(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},utils$2.forEach(["delete","get","head","options"],(function(e){Axios$1.prototype[e]=function(t,o){return this.request(mergeConfig$1(o||{},{method:e,url:t,data:(o||{}).data}))}})),utils$2.forEach(["post","put","patch"],(function(e){Axios$1.prototype[e]=function(t,o,n){return this.request(mergeConfig$1(n||{},{method:e,url:t,data:o}))}}));var Axios_1=Axios$1,Cancel=Cancel_1;function CancelToken(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var o=this;this.promise.then((function(e){if(o._listeners){var t,n=o._listeners.length;for(t=0;t<n;t++)o._listeners[t](e);o._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){o.subscribe(e),t=e})).then(e);return n.cancel=function(){o.unsubscribe(t)},n},e((function(e){o.reason||(o.reason=new Cancel(e),t(o.reason))}))}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},CancelToken.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},CancelToken.source=function(){var e;return{token:new CancelToken((function(t){e=t})),cancel:e}};var CancelToken_1=CancelToken,spread=function(e){return function(t){return e.apply(null,t)}},utils$1=utils$e,isAxiosError=function(e){return utils$1.isObject(e)&&!0===e.isAxiosError},utils=utils$e,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults=defaults_1;function createInstance(e){var t=new Axios(e),o=bind(Axios.prototype.request,t);return utils.extend(o,Axios.prototype,t),utils.extend(o,t),o.create=function(t){return createInstance(mergeConfig(e,t))},o}var axios$1=createInstance(defaults);axios$1.Axios=Axios,axios$1.Cancel=Cancel_1,axios$1.CancelToken=CancelToken_1,axios$1.isCancel=isCancel$1,axios$1.VERSION=data$1.version,axios$1.all=function(e){return Promise.all(e)},axios$1.spread=spread,axios$1.isAxiosError=isAxiosError,axios$2.exports=axios$1,axios$2.exports.default=axios$1;var axios=axios$2.exports,index_vue_vue_type_style_index_0_lang$7="";const _sfc_main$1h={components:{ArrayDynamic:ArrayDynamic,CodeEditor:CodeEditor},props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],data(){return{formData:{key:"",name:"",url:"",method:"GET",auto:!0,params:[],headers:[],responseFunc:"return res;",requestFunc:"return config;",errorFunc:""},formRules:{name:[{required:!0,message:" "},{validator:(e,t,o)=>{let n=this.historyList.find((e=>e.name==t));n&&n.key!=this.selectKey?o(new Error(this.$t("fm.datasource.message.repeat"))):o()}}],url:[{required:!0,message:" "}]},list:[...this.modelValue],selectIndex:-1,selectKey:"",historyList:[...this.modelValue],saved:!0,requestError:!1,collapseAppend:[],tempFormData:{key:"",name:"",url:"",method:"GET",auto:!0,params:[],headers:[],responseFunc:"return res;",requestFunc:"return config;",errorFunc:""}}},computed:{isFormChange(){return!_.isEqual(this.formData,this.tempFormData)}},methods:{_getAttributeFunction(e){let t=new RegExp("(?<=args.)\\w*(?=[\\s|,|;]|$)","g"),o=new RegExp("(?<=args\\[\\s*['|\"])\\w*(?=['|\"]\\s*\\])","g"),n=new RegExp("(?<={)[\\s+\\w*\\s+,{0|1}]+(?=}\\s+=\\s+args)","g"),i=new Set;return e.forEach((e=>{var l,a,r;null==(l=null==e?void 0:e.match(t))||l.forEach((e=>e&&i.add(e.trim()))),null==(a=null==e?void 0:e.match(o))||a.forEach((e=>e&&i.add(e.trim()))),null==(r=null==e?void 0:e.match(n))||r.forEach((e=>e&&e.split(",").forEach((e=>e&&i.add(e.trim())))))})),i},_getArgsObject(e){const t={};for(let o of e)t[o]="";return t},handleTest(){this.$refs.dataForm.validate((e=>{if(e){const e=this._getAttributeFunction([this.formData.requestFunc,this.formData.responseFunc,...this.formData.params.filter((e=>e.fx)).map((e=>e.value)),...this.formData.headers.filter((e=>e.fx)).map((e=>e.value))]);if(e.size>0){let t=this._getArgsObject(e);elementPlus.ElMessageBox({title:"Data source arguments",customStyle:"z-index: 3000",customClass:"fm-messagebox",class:"aaa",draggable:!0,key:(new Date).getTime(),message:vue.h("div",null,[vue.h(CodeEditor,{modelValue:t,mode:"object"==typeof data?"javascript":"xml",height:"200px",key:(new Date).getTime(),"onUpdate:modelValue":e=>{t=e}})]),callback:e=>{if("confirm"==e){let e={};e="string"==typeof t?Function('"use strict";return ('+t+")")():t,this.requestTest(e)}}})}else this.requestTest()}else elementPlus.ElMessage({message:this.$t("fm.datasource.message.settingError"),type:"warning"})}))},requestTest(e={}){let t={method:this.formData.method,url:this.formData.url,headers:(()=>{let t={};return this.formData.headers.forEach((o=>{o.key&&(t[o.key]=o.fx?executeExpression(o.value,e):o.value)})),t})()};if("POST"===this.formData.method||"PUT"===this.formData.method?t.data=(()=>{let t={};return this.formData.params.forEach((o=>{o.key&&(t[o.key]=o.fx?executeExpression(o.value,e):o.value)})),t})():t.params=(()=>{let t={};return this.formData.params.forEach((o=>{o.key&&(t[o.key]=o.fx?executeExpression(o.value,e):o.value)})),t})(),this.requestError=!1,this.formData.requestFunc){const n=new Function("config","args",this.formData.requestFunc);try{t=n(t,e)}catch(o){this.requestError=!0}}axios(t).then((t=>{try{let o=new Function("res","args",this.formData.responseFunc)(t.data,e);elementPlus.ElMessageBox({title:"Response",customStyle:"z-index: 3000",customClass:"fm-messagebox",class:"aaa",draggable:!0,key:(new Date).getTime(),message:vue.h("div",null,[vue.h("div",{style:this.requestError?"margin: 10px 0; ":"display: none;"},["The request test does not support ",vue.h("b",{style:"color: red;"},"this"),", has been ignored."]),vue.h(CodeEditor,{modelValue:o,mode:"object"==typeof o?"javascript":"xml",height:"300px",key:(new Date).getTime()})])})}catch(o){elementPlus.ElMessageBox({title:"Response",customStyle:"z-index: 3000",customClass:"fm-messagebox",class:"aaa",draggable:!0,key:(new Date).getTime(),message:vue.h("div",null,[vue.h("div",{style:this.requestError?"margin: 10px 0; ":"display: none;"},["The request test does not support ",vue.h("b",{style:"color: red;"},"this"),", has been ignored."]),vue.h(CodeEditor,{modelValue:t.data,mode:"object"==typeof t.data?"javascript":"xml",height:"300px",key:(new Date).getTime()})])})}})).catch((e=>{elementPlus.ElMessageBox.alert(e.message)}))},handleSave(){return new Promise(((e,t)=>{this.$refs.dataForm.validate((o=>{if(o){const t=this._getAttributeFunction([this.formData.requestFunc,this.formData.responseFunc,...this.formData.params.filter((e=>e.fx)).map((e=>e.value)),...this.formData.headers.filter((e=>e.fx)).map((e=>e.value))]);let o={...this.formData,params:(()=>{let e={};return this.formData.params.forEach((t=>{t.key&&(e[t.key]=t.fx?`{{${t.value}}}`:t.value)})),e})(),headers:(()=>{let e={};return this.formData.headers.forEach((t=>{t.key&&(e[t.key]=t.fx?`{{${t.value}}}`:t.value)})),e})(),args:[...t]};this.list[this.list.findIndex((e=>e.key===this.selectKey))]=o,this.historyList=[...this.list],this.saved=!0,this.$emit("update:modelValue",this.historyList),elementPlus.ElMessage({message:this.$t("fm.datasource.message.saveSuccess"),type:"success"}),this.tempFormData=_.cloneDeep(this.formData),setTimeout((()=>{e()}),300)}else elementPlus.ElMessage({message:this.$t("fm.datasource.message.settingError"),type:"warning"}),t()}))}))},handleAdd(){if(!this.saved||this.isFormChange)return void elementPlus.ElMessage({message:this.$t("fm.datasource.message.saveError"),type:"warning"});let e=Math.random().toString(36).slice(-8);this.list.push({key:e,name:"DataSource_"+e,url:"",method:"GET",auto:!1,params:{},headers:{},responseFunc:"return res;",requestFunc:"return config;",errorFunc:""}),this.selectKey=e,this.saved=!1},loadForm(){let e=this.list[this.selectIndex];this.formData={...e,params:e.params&&Object.keys(e.params).map((t=>({key:t,fx:isExpression(e.params[t]),value:isExpression(e.params[t])?extractExpression(e.params[t]):e.params[t]})))||[],headers:e.headers&&Object.keys(e.headers).map((t=>({key:t,fx:isExpression(e.headers[t]),value:isExpression(e.headers[t])?extractExpression(e.headers[t]):e.headers[t]})))||[],requestFunc:e.requestFunc||"return config;"},this.tempFormData=_.cloneDeep(this.formData);let t=[];"return config;"!=this.formData.requestFunc&&t.push("1"),"return res;"!=this.formData.responseFunc&&t.push("2"),this.formData.errorFunc&&t.push("3"),this.collapseAppend=t},handleSelect(e){e!==this.selectKey&&(!this.selectKey||this.saved&&!this.isFormChange?this.selectKey=e:elementPlus.ElMessage({message:this.$t("fm.datasource.message.saveError"),type:"warning"}))},handleCancal(){this.beforeClose((()=>{this.selectKey="",this.list=[...this.historyList],this.saved=!0}))},handleClone(e){if(!this.saved)return void elementPlus.ElMessage({message:this.$t("fm.datasource.message.saveError"),type:"warning"});let t=this.list[e],o=Math.random().toString(36).slice(-8),n={...t,key:o,name:t.name+"_copy"};this.list.push(n),this.selectKey=o,this.saved=!1},handleRemove(e){let t=this.list[e];elementPlus.ElMessageBox.confirm(`${this.$t("fm.datasource.message.confirmRemove")} [${t.name}] ?`,"",{type:"warning"}).then((()=>{t.key===this.selectKey&&(this.selectKey="",this.saved=!0),this.list.splice(e,1),e<this.historyList.length&&this.historyList.splice(e,1),this.$emit("update:modelValue",this.historyList)})).catch((()=>{}))},beforeClose(e){_.isEqual(this.formData,this.tempFormData)&&this.saved?e():elementPlus.ElMessageBox.confirm(this.$t("fm.eventscript.message.saveConfirm"),"Confirm",{distinguishCancelAndClose:!0,confirmButtonText:this.$t("fm.eventscript.config.save"),cancelButtonText:this.$t("fm.eventscript.config.notSave"),type:"warning"}).then((()=>{this.handleSave().then((()=>{e()}))})).catch((t=>{"cancel"===t&&e()}))}},watch:{selectKey(e){e?(this.selectIndex=this.list.findIndex((t=>t.key===e)),this.loadForm()):this.selectIndex=-1}}},_hoisted_1$U=vue.createElementVNode("i",{class:"fm-iconfont icon-plus",style:{"font-size":"12px",margin:"5px"}},null,-1),_hoisted_2$J={class:"data-source-menu-label"},_hoisted_3$A={class:"data-source-menu-action"},_hoisted_4$y=["onClick","title"],_hoisted_5$x=["onClick","title"],_hoisted_6$t={class:"data-source-action"},_hoisted_7$q={key:0,class:"code-desc"},_hoisted_8$j={key:1,class:"code-desc"},_hoisted_9$h={key:2,class:"code-desc"},_hoisted_10$d=vue.createElementVNode("div",{class:"code-line"},"(config, args) => {",-1),_hoisted_11$c=vue.createElementVNode("div",{class:"code-line"},"}",-1),_hoisted_12$a={key:0,class:"code-desc"},_hoisted_13$7=vue.createElementVNode("div",{class:"code-line"},"(res, args) => {",-1),_hoisted_14$5=vue.createElementVNode("div",{class:"code-line"},"}",-1),_hoisted_15$4=vue.createElementVNode("div",{class:"code-line"},"(error) => {",-1),_hoisted_16$3=vue.createElementVNode("div",{class:"code-line"},"}",-1);function _sfc_render$1f(e,t,o,n,i,l){const a=vue.resolveComponent("el-button"),r=vue.resolveComponent("el-header"),s=vue.resolveComponent("el-badge"),d=vue.resolveComponent("el-menu-item"),u=vue.resolveComponent("el-menu"),c=vue.resolveComponent("el-scrollbar"),p=vue.resolveComponent("el-main"),m=vue.resolveComponent("el-container"),h=vue.resolveComponent("el-aside"),f=vue.resolveComponent("el-input"),v=vue.resolveComponent("el-form-item"),g=vue.resolveComponent("el-radio-button"),y=vue.resolveComponent("el-radio-group"),b=vue.resolveComponent("array-dynamic"),w=vue.resolveComponent("el-switch"),k=vue.resolveComponent("code-editor"),_=vue.resolveComponent("el-collapse-item"),C=vue.resolveComponent("el-collapse"),x=vue.resolveComponent("el-form");return vue.openBlock(),vue.createBlock(m,{class:"data-source-container"},{default:vue.withCtx((()=>[vue.createVNode(h,{width:"300px",class:"data-source-aside"},{default:vue.withCtx((()=>[vue.createVNode(m,null,{default:vue.withCtx((()=>[vue.createVNode(r,{height:"42px"},{default:vue.withCtx((()=>[vue.createVNode(a,{link:"",type:"primary",size:"default",onClick:l.handleAdd},{default:vue.withCtx((()=>[_hoisted_1$U,vue.createTextVNode(" "+vue.toDisplayString(e.$t("fm.datasource.config.add")),1)])),_:1},8,["onClick"])])),_:1}),vue.createVNode(p,null,{default:vue.withCtx((()=>[vue.createVNode(c,null,{default:vue.withCtx((()=>[vue.createVNode(u,{class:"data-source-aside-menu","default-active":i.selectKey},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.list,((t,o)=>(vue.openBlock(),vue.createBlock(d,{class:vue.normalizeClass({"is-disabled":l.isFormChange||!i.saved,"is-active2":i.selectKey==t.key}),index:t.key,key:t.key,onClick:e=>l.handleSelect(t.key)},{title:vue.withCtx((()=>[vue.createElementVNode("div",null,[!l.isFormChange&&i.saved||i.selectKey!=t.key?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(s,{key:0,"is-dot":"",style:{position:"absolute",top:"2px",left:"2px"}})),vue.createElementVNode("span",{class:vue.normalizeClass(["data-source-menu-i",t.method])},vue.toDisplayString(t.method),3),vue.createElementVNode("div",_hoisted_2$J,vue.toDisplayString(t.name),1),vue.createElementVNode("div",_hoisted_3$A,[vue.createElementVNode("i",{class:"fm-iconfont icon-icon_clone",onClick:vue.withModifiers((e=>l.handleClone(o)),["stop"]),title:e.$t("fm.tooltip.clone")},null,8,_hoisted_4$y),vue.createElementVNode("i",{class:"fm-iconfont icon-trash",onClick:vue.withModifiers((e=>l.handleRemove(o)),["stop"]),title:e.$t("fm.tooltip.trash")},null,8,_hoisted_5$x)])])])),_:2},1032,["class","index","onClick"])))),128))])),_:1},8,["default-active"])])),_:1})])),_:1})])),_:1})])),_:1}),vue.createVNode(p,{class:"data-source-main"},{default:vue.withCtx((()=>[i.selectIndex>=0?(vue.openBlock(),vue.createBlock(m,{key:0},{default:vue.withCtx((()=>[vue.createVNode(r,{height:"42px"},{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_6$t,[vue.createVNode(a,{type:"primary",size:"default",onClick:l.handleSave},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.datasource.config.save")),1)])),_:1},8,["onClick"]),vue.createVNode(a,{size:"default",onClick:l.handleTest},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.datasource.config.test")),1)])),_:1},8,["onClick"]),vue.createVNode(a,{size:"default",onClick:l.handleCancal},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.datasource.config.cancel")),1)])),_:1},8,["onClick"])])])),_:1}),vue.createVNode(p,null,{default:vue.withCtx((()=>[(vue.openBlock(),vue.createBlock(x,{ref:"dataForm",model:i.formData,rules:i.formRules,"label-width":"zh-cn"==e.$i18n.locale?"80px":"119px",size:"default","label-position":"right",key:i.selectKey,onSubmit:t[9]||(t[9]=vue.withModifiers((()=>{}),["prevent"]))},{default:vue.withCtx((()=>[vue.createVNode(v,{label:e.$t("fm.datasource.edit.name"),prop:"name"},{default:vue.withCtx((()=>[vue.createVNode(f,{modelValue:i.formData.name,"onUpdate:modelValue":t[0]||(t[0]=e=>i.formData.name=e)},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(v,{label:e.$t("fm.datasource.edit.url"),prop:"url"},{default:vue.withCtx((()=>[vue.createVNode(f,{type:"textarea",rows:1,modelValue:i.formData.url,"onUpdate:modelValue":t[1]||(t[1]=e=>i.formData.url=e),autosize:""},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(v,{label:e.$t("fm.datasource.edit.method"),prop:"method"},{default:vue.withCtx((()=>[vue.createVNode(y,{modelValue:i.formData.method,"onUpdate:modelValue":t[2]||(t[2]=e=>i.formData.method=e)},{default:vue.withCtx((()=>[vue.createVNode(g,{label:"GET",value:"GET"}),vue.createVNode(g,{label:"POST",value:"POST"}),vue.createVNode(g,{label:"PUT",value:"PUT"}),vue.createVNode(g,{label:"DELETE",value:"DELETE"})])),_:1},8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(v,{label:e.$t("fm.datasource.edit.headers")},{default:vue.withCtx((()=>[vue.createVNode(b,{modelValue:i.formData.headers,"onUpdate:modelValue":t[3]||(t[3]=e=>i.formData.headers=e),"show-arguments":!1,"is-args":""},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(v,{label:e.$t("fm.datasource.edit.params")},{default:vue.withCtx((()=>[vue.createVNode(b,{modelValue:i.formData.params,"onUpdate:modelValue":t[4]||(t[4]=e=>i.formData.params=e),"show-arguments":!1,"is-args":""},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(v,{label:e.$t("fm.datasource.edit.auto"),"label-width":"zh-cn"==e.$i18n.locale?"175px":"340px"},{default:vue.withCtx((()=>[vue.createVNode(w,{modelValue:i.formData.auto,"onUpdate:modelValue":t[5]||(t[5]=e=>i.formData.auto=e)},null,8,["modelValue"])])),_:1},8,["label","label-width"]),vue.createVNode(v,{label:e.$t("fm.datasource.edit.response")},{default:vue.withCtx((()=>[vue.createVNode(C,{modelValue:i.collapseAppend},{default:vue.withCtx((()=>[vue.createVNode(_,{name:"1",title:e.$t("fm.datasource.edit.willRequest")},{default:vue.withCtx((()=>["zh-cn"==e.$i18n.locale?(vue.openBlock(),vue.createElementBlock("div",_hoisted_7$q,"// config: 发出请求的可用配置选项;")):vue.createCommentVNode("",!0),"zh-cn"==e.$i18n.locale?(vue.openBlock(),vue.createElementBlock("div",_hoisted_8$j,"// 通过 config.url 可以更改请求地址，通过 config.headers 可以更改请求头部")):vue.createCommentVNode("",!0),"zh-cn"==e.$i18n.locale?(vue.openBlock(),vue.createElementBlock("div",_hoisted_9$h,"// 通过 config.data 可以更改发送的数据，（GET 请求不适用，需要更改 config.params）")):vue.createCommentVNode("",!0),_hoisted_10$d,vue.createVNode(k,{modelValue:i.formData.requestFunc,"onUpdate:modelValue":t[6]||(t[6]=e=>i.formData.requestFunc=e),mode:"javascript",height:"150px"},null,8,["modelValue"]),_hoisted_11$c])),_:1},8,["title"]),vue.createVNode(_,{title:e.$t("fm.datasource.edit.responseSuccess"),name:"2"},{default:vue.withCtx((()=>["zh-cn"==e.$i18n.locale?(vue.openBlock(),vue.createElementBlock("div",_hoisted_12$a,"// "+vue.toDisplayString(e.$t("fm.datasource.edit.annotation")),1)):vue.createCommentVNode("",!0),_hoisted_13$7,vue.createVNode(k,{modelValue:i.formData.responseFunc,"onUpdate:modelValue":t[7]||(t[7]=e=>i.formData.responseFunc=e),mode:"javascript",height:"150px"},null,8,["modelValue"]),_hoisted_14$5])),_:1},8,["title"]),vue.createVNode(_,{title:e.$t("fm.datasource.edit.requestError"),name:"3"},{default:vue.withCtx((()=>[_hoisted_15$4,vue.createVNode(k,{modelValue:i.formData.errorFunc,"onUpdate:modelValue":t[8]||(t[8]=e=>i.formData.errorFunc=e),mode:"javascript",height:"150px"},null,8,["modelValue"]),_hoisted_16$3])),_:1},8,["title"])])),_:1},8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model","rules","label-width"]))])),_:1})])),_:1})):vue.createCommentVNode("",!0)])),_:1})])),_:1})}var DatasourceIndex=_export_sfc(_sfc_main$1h,[["render",_sfc_render$1f]]),dialog_vue_vue_type_style_index_0_lang$1="";const _sfc_main$1g={components:{CusDialog:CusDialog,DatasourceIndex:DatasourceIndex},emits:["dialog-close"],data:()=>({visible:!1,dataSourceList:[]}),methods:{open(e,t){this.visible=!0,e&&(this.dataSourceList=e),this.$nextTick((()=>{t&&this.$refs.datasourceIndex.handleSelect(t)}))},handleClose(){this.$emit("dialog-close",this.dataSourceList),this.visible=!1},beforeClose(e){this.$refs.datasourceIndex.beforeClose(e)}}};function _sfc_render$1e(e,t,o,n,i,l){const a=vue.resolveComponent("datasource-index"),r=vue.resolveComponent("el-container"),s=vue.resolveComponent("cus-dialog");return vue.openBlock(),vue.createBlock(s,{visible:e.visible,onOnClose:l.handleClose,ref:"dataSourceDialog",width:"1000px",title:e.$t("fm.datasource.config.title"),action:!1,"before-close":l.beforeClose},{default:vue.withCtx((()=>[vue.createVNode(r,{class:"fm-data-source-dialog-container",style:{height:"600px"}},{default:vue.withCtx((()=>[vue.createVNode(a,{ref:"datasourceIndex",modelValue:e.dataSourceList,"onUpdate:modelValue":t[0]||(t[0]=t=>e.dataSourceList=t)},null,8,["modelValue"])])),_:1})])),_:1},8,["visible","onOnClose","title","before-close"])}var DatasourceDialog=_export_sfc(_sfc_main$1g,[["render",_sfc_render$1e]]),fieldsSelect_vue_vue_type_style_index_0_lang="";const _sfc_main$1f={props:["modelValue","multiple","action","defaultExpand"],emits:["update:modelValue","on-data-change"],data(){return{value:this.modelValue,formFields:[]}},computed:{disabledProp(){switch(this.action){case"openDialog":case"closeDialog":return"dialogDisabled";case"setData":case"validate":return"setdataDisabled";case"refreshFieldDataSource":case"getFieldDataSource":case"refreshFieldOptionData":return"remoteOptionDisabled";case"hide":case"display":return"hideDisabled";case"refreshDynamicValue":return"dynamicValueDisabled";case"getOptionData":return"optionDisabled";default:return"disabled"}}},inject:["getFormFields"],mounted(){this.formFields=this.getFormFields()},methods:{handleChange(e){("refreshFieldDataSource"==this.action&&!e.remoteOptionDisabled||"refreshDynamicValue"==this.action&&!e.dynamicValueDisabled||"refreshFieldOptionData"==this.action&&!e.remoteOptionDisabled)&&this.$emit("on-data-change",_.cloneDeep(e))}},watch:{modelValue(e){this.value=e},value(e){this.$emit("update:modelValue",e)}}},_hoisted_1$T={class:"custom-tree-node-type"},_hoisted_2$I={key:0,class:"custom-tree-node-model"};function _sfc_render$1d(e,t,o,n,i,l){const a=vue.resolveComponent("el-tree-select");return vue.openBlock(),vue.createBlock(a,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),data:i.formFields,"check-strictly":"","render-after-expand":!1,"default-expand-all":o.defaultExpand,"expand-on-click-node":!1,"node-key":"id",multiple:o.multiple,clearable:o.multiple,style:{width:"100%"},class:"fm-custom-fields-select",props:{disabled:l.disabledProp,label:"label"},onCurrentChange:l.handleChange},{default:vue.withCtx((({node:e})=>{var t;return[vue.createElementVNode("div",{class:vue.normalizeClass(["custom-tree-node",{"is-bind":null==(t=e.data)?void 0:t.dataBind}])},[vue.createElementVNode("span",_hoisted_1$T,vue.toDisplayString(e.data.type?"<"+this.$t("fm.components.fields."+e.data.type)+">":e.data.label),1),e.data.model?(vue.openBlock(),vue.createElementBlock("span",_hoisted_2$I,vue.toDisplayString(e.data.model),1)):vue.createCommentVNode("",!0)],2)]})),_:1},8,["modelValue","data","default-expand-all","multiple","clearable","props","onCurrentChange"])}var FieldsSelect=_export_sfc(_sfc_main$1f,[["render",_sfc_render$1d]]);const _sfc_main$1e={props:["modelValue"],emits:["update:modelValue"],data(){return{value:this.modelValue,dataSource:[]}},inject:["getDataSourceArray"],mounted(){this.dataSource=this.getDataSourceArray()},watch:{modelValue(e){this.value=e},value(e){this.$emit("update:modelValue",e)}}};function _sfc_render$1c(e,t,o,n,i,l){const a=vue.resolveComponent("el-option"),r=vue.resolveComponent("el-select");return vue.openBlock(),vue.createBlock(r,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),style:{width:"100%"}},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.dataSource,(e=>(vue.openBlock(),vue.createBlock(a,{key:e.key,value:e,label:e.label},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])}var DataSourceSelect=_export_sfc(_sfc_main$1e,[["render",_sfc_render$1c]]);const _sfc_main$1d={props:["modelValue"],emits:["update:modelValue"],data(){return{value:this.modelValue,events:[]}},inject:["getEventsArray"],mounted(){this.events=this.getEventsArray()},watch:{modelValue(e){this.value=e},value(e){this.$emit("update:modelValue",e)}}},_hoisted_1$S={style:{display:"flex","justify-content":"space-between","align-items":"center"}};function _sfc_render$1b(e,t,o,n,i,l){const a=vue.resolveComponent("el-tag"),r=vue.resolveComponent("el-option"),s=vue.resolveComponent("el-select");return vue.openBlock(),vue.createBlock(s,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),style:{width:"100%"}},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.events,(e=>(vue.openBlock(),vue.createBlock(r,{key:e.key,value:e.name,label:e.name},{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_1$S,[vue.createElementVNode("span",null,vue.toDisplayString(e.name),1),vue.createVNode(a,{size:"small",type:"rule"==e.type?"warning":"success"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString("rule"==e.type?"VIS":"JS"),1)])),_:2},1032,["type"])])])),_:2},1032,["value","label"])))),128))])),_:1},8,["modelValue"])}var EventsSelect=_export_sfc(_sfc_main$1d,[["render",_sfc_render$1b]]);const formActions=[{action:"hide",options:{fields:[],condition:"",isCondition:!1}},{action:"display",options:{fields:[],condition:"",isCondition:!1}},{action:"disabled",options:{fields:[],condition:"",isCondition:!1,disabled:!1}},{action:"refresh",options:{condition:"",isCondition:!1}},{action:"reset",options:{condition:"",isCondition:!1}},{action:"setData",options:{condition:"",isCondition:!1,fields:[],values:{},valueTypes:{}}},{action:"validate",options:{condition:"",isCondition:!1,fields:[],failSuspend:!1}}],requestActions=[{action:"sendRequest",options:{condition:"",isCondition:!1,dataSource:"",valueTypes:{},responseVariable:""}},{action:"refreshDynamicValue",options:{condition:"",isCondition:!1,field:"",valueTypes:{}}},{action:"refreshDynamicValueAll",options:{condition:"",isCondition:!1}},{action:"refreshFieldOptionData",options:{condition:"",isCondition:!1,field:"",valueTypes:{}}},{action:"getOptionData",options:{condition:"",isCondition:!1,field:"",localVariable:""}}],dialogActions=[{action:"openDialog",options:{condition:"",isCondition:!1,field:""}},{action:"closeDialog",options:{condition:"",isCondition:!1,field:""}}],otherActions=[{action:"triggerEvent",options:{condition:"",isCondition:!1,functionName:"",functionParams:""}},{action:"js",options:{func:""}}];var rule_vue_vue_type_style_index_0_lang="";const _sfc_main$1c={components:{Draggable:draggableComponent,FieldsSelect:FieldsSelect,DataSourceSelect:DataSourceSelect,EventsSelect:EventsSelect,FormulaDialog:FormulaDialog,CodeEditor:CodeEditor},props:["modelValue"],emits:["update:modelValue"],data(){return{ruleList:this.modelValue||[],select:"",formActions:formActions,requestActions:requestActions,dialogActions:dialogActions,otherActions:otherActions,curIndex:-1,curOption:"",curField:""}},provide(){return{getResponseVariables:this.getResponseVariables,getLocalVariables:this.getLocalVariables}},methods:{handleOpenCondition(e,t){this.$refs.formulaDialog.open(e),this.curIndex=t,this.curOption="condition"},handleOpenFx(e,t,o,n="values"){this.$refs.formulaDialog.open(e),this.curIndex=t,this.curOption=n,this.curField=o},handleFormulaConfirm(e){this.curIndex>=0&&"condition"==this.curOption&&(this.ruleList[this.curIndex].options[this.curOption]=e),this.curIndex>=0&&"values"==this.curOption&&(this.ruleList[this.curIndex].options[this.curOption][this.curField]=e),this.curIndex>=0&&"dataSource"==this.curOption&&(this.ruleList[this.curIndex].options.dataSource.args[this.curField]=e)},handleActionCommand(e){let t=Math.random().toString(36).slice(-8);this.ruleList.push({key:t,..._.cloneDeep(e)})},handleActonRemove(e){this.ruleList.splice(e,1)},handleFieldDataChange(e,t){e?("refreshDynamicValue"==t.action?t.options.dataSource="datasource"==e.options.dynamicValueType?{args:"string"==typeof e.options.dynamicValueArgs?JSON.parse(e.options.dynamicValueArgs):e.options.dynamicValueArgs}:{args:{}}:t.options.dataSource="datasource"==e.options.remoteType?{args:"string"==typeof e.options.remoteArgs?JSON.parse(e.options.remoteArgs):e.options.remoteArgs}:{args:{}},t.options.dataSource.args&&Object.keys(t.options.dataSource.args).forEach((e=>{t.options.dataSource.args[e]=""}))):t.options.dataSource={}},getResponseVariables(){let e=[];return this.ruleList.forEach((t=>{t.options.responseVariable&&!e.includes(t.options.responseVariable)&&e.push(t.options.responseVariable)})),e},getLocalVariables(){let e=[];return this.ruleList.forEach((t=>{t.options.localVariable&&!e.includes(t.options.localVariable)&&e.push(t.options.localVariable)})),e},handleTypeChange(e,t,o){var n,i,l;switch(e){case"string":case"fx":t[o]=String(null!=(n=t[o])?n:"");break;case"boolean":t[o]=Boolean(null!=(i=t[o])&&i);break;case"number":t[o]=Number(null!=(l=t[o])?l:0)}}},watch:{modelValue(e){this.ruleList=e},ruleList:{deep:!0,handler(e){this.$emit("update:modelValue",e)}}}},_hoisted_1$R={class:"fm-rules-config-container"},_hoisted_2$H={class:"card-header"},_hoisted_3$z=vue.createElementVNode("div",{class:"widget-view-delete widget-view-action"},[vue.createElementVNode("i",{class:"fm-iconfont icon-delete"})],-1),_hoisted_4$x=vue.createElementVNode("div",{class:"widget-view-drag widget-view-action"},[vue.createElementVNode("i",{class:"fm-iconfont icon-icon_bars drag-widget"})],-1),_hoisted_5$w=vue.createElementVNode("div",null," = ",-1),_hoisted_6$s={class:"values-value"},_hoisted_7$p=vue.createElementVNode("div",null," = ",-1),_hoisted_8$i={class:"values-value"},_hoisted_9$g=vue.createElementVNode("i",{class:"fm-iconfont icon-editor-formula",style:{"font-size":"13px"}},null,-1),_hoisted_10$c=vue.createElementVNode("div",{class:"code-line"},"Function () {",-1),_hoisted_11$b=vue.createElementVNode("div",{class:"code-line"},"}",-1),_hoisted_12$9={class:"fm-add-rules-button"},_hoisted_13$6=vue.createElementVNode("i",{class:"fm-iconfont icon-plus",style:{"font-size":"12px",margin:"5px"}},null,-1);function _sfc_render$1a(e,t,o,n,i,l){const a=vue.resolveComponent("el-tag"),r=vue.resolveComponent("el-popconfirm"),s=vue.resolveComponent("FieldsSelect"),d=vue.resolveComponent("el-form-item"),u=vue.resolveComponent("events-select"),c=vue.resolveComponent("el-input"),p=vue.resolveComponent("data-source-select"),m=vue.resolveComponent("el-switch"),h=vue.resolveComponent("el-option"),f=vue.resolveComponent("el-select"),v=vue.resolveComponent("el-radio"),g=vue.resolveComponent("el-radio-group"),y=vue.resolveComponent("el-button"),b=vue.resolveComponent("code-editor"),w=vue.resolveComponent("el-form"),k=vue.resolveComponent("el-card"),_=vue.resolveComponent("draggable"),C=vue.resolveComponent("el-dropdown-item"),x=vue.resolveComponent("el-dropdown-menu"),S=vue.resolveComponent("el-dropdown"),V=vue.resolveComponent("FormulaDialog");return vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createElementVNode("div",_hoisted_1$R,[vue.createVNode(_,vue.mergeProps({list:i.ruleList},{group:"peo2",ghostClass:"ghost11",animation:200,handle:".drag-widget"},{"no-transition-on-drag":!0,"item-key":"key",class:"widget-form-list"}),{item:vue.withCtx((({element:t,index:o})=>[vue.createVNode(k,{class:"rule-card",shadow:"never",size:"small"},{header:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_2$H,[vue.createVNode(a,null,{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.rules.actions."+t.action)),1)])),_:2},1024),vue.createElementVNode("div",null,[vue.createVNode(r,{width:"200",title:e.$t("fm.rules.message.confirmDelete"),onConfirm:e=>l.handleActonRemove(o)},{reference:vue.withCtx((()=>[_hoisted_3$z])),_:2},1032,["title","onConfirm"]),_hoisted_4$x])])])),default:vue.withCtx((()=>[vue.createVNode(w,{"label-width":"100px",style:{"margin-right":"20px"},modelValue:t.options,"onUpdate:modelValue":e=>t.options=e,class:"rule-card-form"},{default:vue.withCtx((()=>[Object.keys(t.options).includes("fields")?(vue.openBlock(),vue.createBlock(d,{key:0,label:e.$t("fm.rules.label.field")},{default:vue.withCtx((()=>[vue.createVNode(s,{defaultExpand:!0,multiple:!0,modelValue:t.options.fields,"onUpdate:modelValue":e=>t.options.fields=e,action:t.action},null,8,["modelValue","onUpdate:modelValue","action"])])),_:2},1032,["label"])):vue.createCommentVNode("",!0),Object.keys(t.options).includes("field")?(vue.openBlock(),vue.createBlock(d,{key:1,label:e.$t("fm.rules.label.field")},{default:vue.withCtx((()=>[vue.createVNode(s,{defaultExpand:"openDialog"!=t.action&&"closeDialog"!=t.action,multiple:!1,modelValue:t.options.field,"onUpdate:modelValue":e=>t.options.field=e,action:t.action,onOnDataChange:e=>l.handleFieldDataChange(e,t)},null,8,["defaultExpand","modelValue","onUpdate:modelValue","action","onOnDataChange"])])),_:2},1032,["label"])):vue.createCommentVNode("",!0),Object.keys(t.options).includes("functionName")?(vue.openBlock(),vue.createBlock(d,{key:2,label:e.$t("fm.rules.label.functionName")},{default:vue.withCtx((()=>[vue.createVNode(u,{modelValue:t.options.functionName,"onUpdate:modelValue":e=>t.options.functionName=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])):vue.createCommentVNode("",!0),t.options.functionName&&!["mounted","refresh"].includes(t.options.functionName)&&Object.keys(t.options).includes("functionParams")?(vue.openBlock(),vue.createBlock(d,{key:3,label:e.$t("fm.rules.label.functionParams")},{default:vue.withCtx((()=>[vue.createVNode(c,{type:"textarea",modelValue:t.options.functionParams,"onUpdate:modelValue":e=>t.options.functionParams=e,autosize:!0},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])):vue.createCommentVNode("",!0),Object.keys(t.options).includes("dataSource")&&"sendRequest"==t.action?(vue.openBlock(),vue.createBlock(d,{key:4,label:e.$t("fm.rules.label.datasource")},{default:vue.withCtx((()=>[vue.createVNode(p,{modelValue:t.options.dataSource,"onUpdate:modelValue":e=>t.options.dataSource=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])):vue.createCommentVNode("",!0),t.options.dataSource&&t.options.dataSource.args&&Object.keys(t.options.dataSource.args).length?(vue.openBlock(),vue.createBlock(d,{key:5,label:e.$t("fm.rules.label.datasourceArgs")},{default:vue.withCtx((()=>["sendRequest"!==t.action?(vue.openBlock(),vue.createBlock(m,{key:0,modelValue:t.options.isArgs,"onUpdate:modelValue":e=>t.options.isArgs=e},null,8,["modelValue","onUpdate:modelValue"])):vue.createCommentVNode("",!0),Object.keys(t.options.dataSource.args).length&&(t.options.isArgs||"sendRequest"==t.action)?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:1},vue.renderList(Object.keys(t.options.dataSource.args),(n=>(vue.openBlock(),vue.createElementBlock("div",{key:n,class:"values-item"},[vue.createVNode(c,{value:n,readonly:"",style:{width:"200px"},title:n},null,8,["value","title"]),_hoisted_5$w,vue.createVNode(f,{onChange:e=>l.handleTypeChange(e,t.options.dataSource.args,n),modelValue:t.options.valueTypes[n],"onUpdate:modelValue":e=>t.options.valueTypes[n]=e,placeholder:e.$t("fm.rules.label.string"),style:{width:"150px"}},{default:vue.withCtx((()=>[vue.createVNode(h,{label:e.$t("fm.rules.label.string"),value:"string"},null,8,["label"]),vue.createVNode(h,{label:e.$t("fm.rules.label.number"),value:"number"},null,8,["label"]),vue.createVNode(h,{label:e.$t("fm.rules.label.boolean"),value:"boolean"},null,8,["label"]),vue.createVNode(h,{label:e.$t("fm.rules.label.fx"),value:"fx"},null,8,["label"])])),_:2},1032,["onChange","modelValue","onUpdate:modelValue","placeholder"]),vue.createElementVNode("div",_hoisted_6$s,[t.options.valueTypes[n]&&"string"!=t.options.valueTypes[n]?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(c,{key:0,modelValue:t.options.dataSource.args[n],"onUpdate:modelValue":e=>t.options.dataSource.args[n]=e},null,8,["modelValue","onUpdate:modelValue"])),"number"==t.options.valueTypes[n]?(vue.openBlock(),vue.createBlock(c,{key:1,type:"number",modelValue:t.options.dataSource.args[n],"onUpdate:modelValue":e=>t.options.dataSource.args[n]=e,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])):vue.createCommentVNode("",!0),"boolean"==t.options.valueTypes[n]?(vue.openBlock(),vue.createBlock(m,{key:2,"active-value":"true","inactive-value":"false",modelValue:t.options.dataSource.args[n],"onUpdate:modelValue":e=>t.options.dataSource.args[n]=e,style:{"margin-left":"5px"}},null,8,["modelValue","onUpdate:modelValue"])):vue.createCommentVNode("",!0),"fx"==t.options.valueTypes[n]?(vue.openBlock(),vue.createBlock(c,{key:3,class:vue.normalizeClass({"is-fx":"fx"==t.options.valueTypes[n]}),readonly:"",modelValue:t.options.dataSource.args[n],"onUpdate:modelValue":e=>t.options.dataSource.args[n]=e,placeholder:e.$t("fm.rules.message.editFx"),onClick:e=>l.handleOpenFx(t.options.dataSource.args[n],o,n,"dataSource")},null,8,["class","modelValue","onUpdate:modelValue","placeholder","onClick"])):vue.createCommentVNode("",!0)])])))),128)):vue.createCommentVNode("",!0)])),_:2},1032,["label"])):vue.createCommentVNode("",!0),t.options.dataSource&&Object.keys(t.options).includes("responseVariable")?(vue.openBlock(),vue.createBlock(d,{key:6,label:e.$t("fm.rules.label.responseVariable")},{default:vue.withCtx((()=>[vue.createVNode(c,{modelValue:t.options.responseVariable,"onUpdate:modelValue":e=>t.options.responseVariable=e,clearable:""},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])):vue.createCommentVNode("",!0),t.options.field&&Object.keys(t.options).includes("localVariable")?(vue.openBlock(),vue.createBlock(d,{key:7,label:e.$t("fm.rules.label.localVariable")},{default:vue.withCtx((()=>[vue.createVNode(c,{modelValue:t.options.localVariable,"onUpdate:modelValue":e=>t.options.localVariable=e,clearable:""},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])):vue.createCommentVNode("",!0),Object.keys(t.options).includes("disabled")?(vue.openBlock(),vue.createBlock(d,{key:8,"label-width":"zh-cn"==e.$i18n.locale?"100px":"120px",label:e.$t("fm.rules.label.enabled")+"/"+e.$t("fm.rules.label.disabled")},{default:vue.withCtx((()=>[vue.createVNode(g,{modelValue:t.options.disabled,"onUpdate:modelValue":e=>t.options.disabled=e},{default:vue.withCtx((()=>[vue.createVNode(v,{label:!1,value:!1},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.rules.label.enabled")),1)])),_:1}),vue.createVNode(v,{label:!0,value:!0},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.rules.label.disabled")),1)])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label-width","label"])):vue.createCommentVNode("",!0),Object.keys(t.options).includes("values")&&t.options.fields.length?(vue.openBlock(),vue.createBlock(d,{key:9,label:e.$t("fm.rules.label.values")},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t.options.fields,(n=>(vue.openBlock(),vue.createElementBlock("div",{key:n,class:"values-item"},[vue.createVNode(c,{value:n,readonly:"",style:{width:"200px",direction:"rtl"},title:n},null,8,["value","title"]),_hoisted_7$p,vue.createVNode(f,{onChange:e=>l.handleTypeChange(e,t.options.values,n),modelValue:t.options.valueTypes[n],"onUpdate:modelValue":e=>t.options.valueTypes[n]=e,placeholder:e.$t("fm.rules.label.string"),style:{width:"150px"}},{default:vue.withCtx((()=>[vue.createVNode(h,{label:e.$t("fm.rules.label.string"),value:"string"},null,8,["label"]),vue.createVNode(h,{label:e.$t("fm.rules.label.number"),value:"number"},null,8,["label"]),vue.createVNode(h,{label:e.$t("fm.rules.label.boolean"),value:"boolean"},null,8,["label"]),vue.createVNode(h,{label:e.$t("fm.rules.label.fx"),value:"fx"},null,8,["label"])])),_:2},1032,["onChange","modelValue","onUpdate:modelValue","placeholder"]),vue.createElementVNode("div",_hoisted_8$i,[t.options.valueTypes[n]&&"string"!=t.options.valueTypes[n]?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(c,{key:0,modelValue:t.options.values[n],"onUpdate:modelValue":e=>t.options.values[n]=e},null,8,["modelValue","onUpdate:modelValue"])),"number"==t.options.valueTypes[n]?(vue.openBlock(),vue.createBlock(c,{key:1,type:"number",modelValue:t.options.values[n],"onUpdate:modelValue":e=>t.options.values[n]=e,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])):vue.createCommentVNode("",!0),"boolean"==t.options.valueTypes[n]?(vue.openBlock(),vue.createBlock(m,{key:2,modelValue:t.options.values[n],"onUpdate:modelValue":e=>t.options.values[n]=e,style:{"margin-left":"5px"}},null,8,["modelValue","onUpdate:modelValue"])):vue.createCommentVNode("",!0),"fx"==t.options.valueTypes[n]?(vue.openBlock(),vue.createBlock(c,{key:3,class:vue.normalizeClass({"is-fx":"fx"==t.options.valueTypes[n]}),readonly:"",modelValue:t.options.values[n],"onUpdate:modelValue":e=>t.options.values[n]=e,placeholder:e.$t("fm.rules.message.editFx"),onClick:e=>l.handleOpenFx(t.options.values[n],o,n)},null,8,["class","modelValue","onUpdate:modelValue","placeholder","onClick"])):vue.createCommentVNode("",!0)])])))),128))])),_:2},1032,["label"])):vue.createCommentVNode("",!0),Object.keys(t.options).includes("failSuspend")?(vue.openBlock(),vue.createBlock(d,{key:10,label:e.$t("fm.rules.label.validateFail")},{default:vue.withCtx((()=>[vue.createVNode(g,{modelValue:t.options.failSuspend,"onUpdate:modelValue":e=>t.options.failSuspend=e},{default:vue.withCtx((()=>[vue.createVNode(v,{label:!1,value:!1},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.rules.label.validateFailContinue")),1)])),_:1}),vue.createVNode(v,{label:!0,value:!0},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.rules.label.validateFailSuspend")),1)])),_:1})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])):vue.createCommentVNode("",!0),Object.keys(t.options).includes("condition")?(vue.openBlock(),vue.createBlock(d,{key:11,label:e.$t("fm.rules.label.condition")},{default:vue.withCtx((()=>[vue.createVNode(m,{modelValue:t.options.isCondition,"onUpdate:modelValue":e=>t.options.isCondition=e},null,8,["modelValue","onUpdate:modelValue"]),t.options.isCondition?(vue.openBlock(),vue.createBlock(c,{key:0,modelValue:t.options.condition,"onUpdate:modelValue":e=>t.options.condition=e,placeholder:e.$t("fm.rules.message.condition"),class:"input-with-select",readonly:"",onClick:e=>l.handleOpenCondition(t.options.condition,o)},{append:vue.withCtx((()=>[vue.createVNode(y,{size:"small",onClick:e=>l.handleOpenCondition(t.options.condition,o)},{default:vue.withCtx((()=>[_hoisted_9$g])),_:2},1032,["onClick"])])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onClick"])):vue.createCommentVNode("",!0)])),_:2},1032,["label"])):vue.createCommentVNode("",!0),Object.keys(t.options).includes("func")?(vue.openBlock(),vue.createBlock(d,{key:12,"label-width":"0",style:{"margin-bottom":"0px"}},{default:vue.withCtx((()=>[_hoisted_10$c,vue.createVNode(b,{modelValue:t.options.func,"onUpdate:modelValue":e=>t.options.func=e,mode:"javascript",height:"200px"},null,8,["modelValue","onUpdate:modelValue"]),_hoisted_11$b])),_:2},1024)):vue.createCommentVNode("",!0)])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:1},16,["list"]),vue.createVNode(S,{onCommand:l.handleActionCommand,trigger:"click",class:"fm-add-rules-wrapper","max-height":"400px"},{dropdown:vue.withCtx((()=>[vue.createVNode(x,null,{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.dialogActions,(t=>(vue.openBlock(),vue.createBlock(C,{key:t.action,command:t},{default:vue.withCtx((()=>[vue.createElementVNode("div",null,vue.toDisplayString(e.$t("fm.rules.actions."+t.action)),1)])),_:2},1032,["command"])))),128)),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.formActions,((t,o)=>(vue.openBlock(),vue.createBlock(C,{key:t.action,command:t,divided:0==o},{default:vue.withCtx((()=>[vue.createElementVNode("div",null,vue.toDisplayString(e.$t("fm.rules.actions."+t.action)),1)])),_:2},1032,["command","divided"])))),128)),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.requestActions,((t,o)=>(vue.openBlock(),vue.createBlock(C,{key:t.action,command:t,divided:0==o},{default:vue.withCtx((()=>[vue.createElementVNode("div",null,vue.toDisplayString(e.$t("fm.rules.actions."+t.action)),1)])),_:2},1032,["command","divided"])))),128)),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.otherActions,((t,o)=>(vue.openBlock(),vue.createBlock(C,{key:t.action,command:t,divided:0==o},{default:vue.withCtx((()=>[vue.createElementVNode("div",null,vue.toDisplayString(e.$t("fm.rules.actions."+t.action)),1)])),_:2},1032,["command","divided"])))),128))])),_:1})])),default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_12$9,[vue.createTextVNode(vue.toDisplayString(e.$t("fm.rules.actions.add")),1),_hoisted_13$6])])),_:1},8,["onCommand"])]),vue.createVNode(V,{ref:"formulaDialog",onDialogConfirm:l.handleFormulaConfirm},null,8,["onDialogConfirm"])],64)}var EventRule=_export_sfc(_sfc_main$1c,[["render",_sfc_render$1a]]);const ruleToFuncString=e=>{var t;const o=(null==(t=e.options)?void 0:t.isCondition)?` if (${e.options.condition||"false"}) `:"";if("hide"==e.action)return`${o} this.hide(${JSON.stringify(e.options.fields)});`;if("display"==e.action)return`${o} this.display(${JSON.stringify(e.options.fields)});`;if("disabled"==e.action)return`${o} this.disabled(${JSON.stringify(e.options.fields)}, ${e.options.disabled});`;if("refresh"==e.action)return`${o} await this.refresh();`;if("reset"==e.action)return`${o} this.reset();`;if("setData"==e.action){return`${o} await this.setData({${e.options.fields.map((t=>{var o,n;return"fx"==e.options.valueTypes[t]?`'${t}' : ${e.options.values[t]||JSON.stringify("")}`:"boolean"==e.options.valueTypes[t]?`'${t}' : ${null!=(o=e.options.values[t])&&o}`:"number"==e.options.valueTypes[t]?`'${t}' : ${e.options.values[t]||("number"==typeof e.options.values[t]?0:void 0)}`:`'${t}' : ${JSON.stringify(null!=(n=e.options.values[t])?n:"")}`})).join(",")}});`}if("validate"==e.action)return e.options.failSuspend?`${o} await this.validate(${JSON.stringify(e.options.fields)});`:`${o} this.validate(${JSON.stringify(e.options.fields)});`;if("sendRequest"==e.action){if(!e.options.dataSource)return"";let t=Object.keys(e.options.dataSource.args).map((t=>{var o;return"fx"==e.options.valueTypes[t]?`'${t}' : ${e.options.dataSource.args[t]||JSON.stringify("")}`:"boolean"==e.options.valueTypes[t]?`'${t}' : ${e.options.dataSource.args[t]}`:"number"==e.options.valueTypes[t]?`'${t}' : ${e.options.dataSource.args[t]||("number"==typeof e.options.values[item]?0:void 0)}`:`'${t}' : ${JSON.stringify(null!=(o=e.options.dataSource.args[t])?o:"")}`}));if(e.options.responseVariable){return`${` let ${e.options.responseVariable} = undefined;`} ${o} ${e.options.responseVariable} = await this.sendRequest('${e.options.dataSource.value}', {${t.join(",")}});`}return`${o} await this.sendRequest('${e.options.dataSource.value}', {${t.join(",")}});`}if("refreshFieldDataSource"==e.action){if(!e.options.field)return"";let t=Object.keys(e.options.dataSource.args).map((t=>{var o;return"fx"==e.options.valueTypes[t]?`'${t}' : ${e.options.dataSource.args[t]||JSON.stringify("")}`:"boolean"==e.options.valueTypes[t]?`'${t}' : ${e.options.dataSource.args[t]}`:"number"==e.options.valueTypes[t]?`'${t}' : ${e.options.dataSource.args[t]||("number"==typeof e.options.values[item]?0:void 0)}`:`'${t}' : ${JSON.stringify(null!=(o=e.options.dataSource.args[t])?o:"")}`}));return`${o} await this.refreshFieldDataSource('${e.options.field}', {${t.join(",")}});`}if("getFieldDataSource"==e.action&&e.options.localVariable){return`${` let ${e.options.localVariable} = undefined;`} ${o} ${e.options.localVariable} = this.getFieldDataSource('${e.options.field}');`}if("getOptionData"==e.action&&e.options.localVariable){return`${` let ${e.options.localVariable} = undefined;`} ${o} ${e.options.localVariable} = this.getOptionData('${e.options.field}');`}if("refreshDynamicValueAll"==e.action)return`${o} this.refreshDynamicValueAll()`;if("refreshDynamicValue"==e.action){if(!e.options.field)return"";let t=[];return e.options.isArgs&&(t=Object.keys(e.options.dataSource.args).map((t=>{var o;return"fx"==e.options.valueTypes[t]?`'${t}' : ${e.options.dataSource.args[t]||JSON.stringify("")}`:"boolean"==e.options.valueTypes[t]?`'${t}' : ${e.options.dataSource.args[t]}`:"number"==e.options.valueTypes[t]?`'${t}' : ${e.options.dataSource.args[t]||("number"==typeof e.options.values[item]?0:void 0)}`:`'${t}' : ${JSON.stringify(null!=(o=e.options.dataSource.args[t])?o:"")}`}))),`${o} this.refreshDynamicValue('${e.options.field}', {${t.join(",")}});`}if("refreshFieldOptionData"==e.action){if(!e.options.field)return"";let t=[];return e.options.isArgs&&(t=Object.keys(e.options.dataSource.args).map((t=>{var o;return"fx"==e.options.valueTypes[t]?`'${t}' : ${e.options.dataSource.args[t]||JSON.stringify("")}`:"boolean"==e.options.valueTypes[t]?`'${t}' : ${e.options.dataSource.args[t]}`:"number"==e.options.valueTypes[t]?`'${t}' : ${e.options.dataSource.args[t]||("number"==typeof e.options.values[item]?0:void 0)}`:`'${t}' : ${JSON.stringify(null!=(o=e.options.dataSource.args[t])?o:"")}`}))),`${o} this.refreshFieldOptionData('${e.options.field}', {${t.join(",")}});`}if("openDialog"==e.action)return e.options.field?`${o} this.openDialog('${e.options.field}');`:"";if("closeDialog"==e.action)return e.options.field?`${o} this.closeDialog('${e.options.field}');`:"";if("triggerEvent"==e.action){if(!e.options.functionName)return"";let t=e.options.functionParams.trim();if(t){try{t=new Function("return "+t)()}catch(n){return`${o} this.triggerEvent('${e.options.functionName}', "${t}");`}return`${o} this.triggerEvent('${e.options.functionName}', ${JSON.stringify(t)});`}return`${o} this.triggerEvent('${e.options.functionName}');`}return"js"==e.action?e.options.func:void 0},ruleToFunction=e=>{if(!e)return"";"string"==typeof e&&(e=JSON.parse(e));let t=[];return e.forEach((e=>{t.push(ruleToFuncString(e))})),t.join("\n")};var index_vue_vue_type_style_index_0_lang$6="";const _sfc_main$1b={components:{Draggable:draggableComponent,CodeEditor:CodeEditor,EventRule:EventRule},props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue","on-confirm-event"],data(){return{formData:{key:"",name:"",func:"",type:"rule"},tmpData:{},formRules:{name:[{required:!0,message:" "},{validator:(e,t,o)=>{let n=this.historyList.find((e=>e.name==t));n&&n.key!=this.selectKey?o(new Error(this.$t("fm.eventscript.message.repeat"))):o()}}]},list:[...this.modelValue],selectIndex:-1,selectKey:"",historyList:[...this.modelValue],saved:!0,eventType:"",readonlyFunctions:["mounted","refresh","onFormChange"]}},provide(){return{getEventsArray:this.getEventsArray}},methods:{handleSave(e){return new Promise(((t,o)=>{this.$refs.dataForm.validate((n=>{if(n)try{if("rule"===this.formData.type){new(0,Object.getPrototypeOf((async function(){})).constructor)(ruleToFunction(this.formData.rules))}else new Function(this.formData.func);this.list[this.list.findIndex((e=>e.key===this.selectKey))]=this.formData,this.historyList=[...this.list],this.saved=!0,this.tmpData=_.cloneDeep(this.formData),this.$emit("update:modelValue",this.historyList),e?this.$emit("on-confirm-event",{...this.formData,type:this.eventType}):elementPlus.ElMessage({message:this.$t("fm.eventscript.message.saveSuccess"),type:"success"}),setTimeout((()=>{t()}),300)}catch(i){elementPlus.ElMessage({message:this.$t("fm.message.eventSaveError")+i.message,type:"error"})}else o()}))}))},handleAdd(){if(!this.saved||this.isFormChange())return void elementPlus.ElMessage({message:this.$t("fm.eventscript.message.saveError"),type:"warning"});let e=Math.random().toString(36).slice(-8);this.list.push({key:e,name:"func_"+e,func:"",type:"rule"}),this.selectKey=e,this.saved=!1},loadNewFunction(e){let t=Math.random().toString(36).slice(-8);this.list.push({key:t,name:e+"_"+t,func:"",type:"rule"}),this.selectKey=t,this.saved=!1,this.eventType=e},loadForm(){let e=_.cloneDeep(this.list[this.selectIndex]);this.formData={...e,type:e.type||"js"},this.tmpData=_.cloneDeep(this.formData)},handleSelect(e){e!==this.selectKey&&(this.saved&&!this.isFormChange()?this.selectKey=e:elementPlus.ElMessage({message:this.$t("fm.eventscript.message.saveError"),type:"warning"}))},isFormChange(){return!(!this.selectKey||!Object.keys(this.tmpData).length)&&!_.isEqual(this.formData,this.tmpData)},loadFunction(e,t){this.selectKey=e,t&&(this.eventType=t)},handleCancal(){this.beforeClose((()=>{this.selectKey="",this.list=[...this.historyList],this.saved=!0}))},handleClone(e){if(!this.saved||this.isFormChange())return void elementPlus.ElMessage({message:this.$t("fm.eventscript.message.saveError"),type:"warning"});let t=this.list[e],o=Math.random().toString(36).slice(-8),n={...t,key:o,name:t.name+"_copy"};this.list.push(n),this.selectKey=o,this.saved=!1},handleRemove(e){let t=this.list[e];elementPlus.ElMessageBox.confirm(`${this.$t("fm.eventscript.message.confirmRemove")} [${t.name}] ?`,"",{type:"warning"}).then((()=>{t.key===this.selectKey&&(this.selectKey="",this.saved=!0),this.list.splice(e,1),e<this.historyList.length&&this.historyList.splice(e,1),this.$emit("update:modelValue",this.historyList)})).catch((()=>{}))},getEventsArray(){return this.list.map((e=>({key:e.key,name:e.name,type:e.type}))).filter((e=>"mounted"!=e.key&&"refresh"!=e.key&&e.key!=this.selectKey))},beforeClose(e){this.isFormChange()||!this.saved?elementPlus.ElMessageBox.confirm(this.$t("fm.eventscript.message.saveConfirm"),"Confirm",{distinguishCancelAndClose:!0,confirmButtonText:this.$t("fm.eventscript.config.save"),cancelButtonText:this.$t("fm.eventscript.config.notSave"),type:"warning"}).then((()=>{this.handleSave().then((()=>{e()}))})).catch((t=>{"cancel"===t&&e()})):e()}},watch:{selectKey(e){e?(this.selectIndex=this.list.findIndex((t=>t.key===e)),this.selectIndex>=0&&this.loadForm()):this.selectIndex=-1}}},_hoisted_1$Q=vue.createElementVNode("i",{class:"fm-iconfont icon-plus",style:{"font-size":"12px",margin:"5px"}},null,-1),_hoisted_2$G={class:"event-script-menu-label"},_hoisted_3$y={class:"event-script-menu-action"},_hoisted_4$w=["onClick","title"],_hoisted_5$v=["onClick","title"],_hoisted_6$r=vue.createElementVNode("i",{class:"fm-iconfont icon-icon_bars drag-widget"},null,-1),_hoisted_7$o={class:"event-script-action"},_hoisted_8$h=vue.createElementVNode("div",{class:"code-line"},"Function () {",-1),_hoisted_9$f=vue.createElementVNode("div",{class:"code-line"},"}",-1);function _sfc_render$19(e,t,o,n,i,l){const a=vue.resolveComponent("el-button"),r=vue.resolveComponent("el-header"),s=vue.resolveComponent("el-badge"),d=vue.resolveComponent("el-menu-item"),u=vue.resolveComponent("draggable"),c=vue.resolveComponent("el-menu"),p=vue.resolveComponent("el-scrollbar"),m=vue.resolveComponent("el-main"),h=vue.resolveComponent("el-container"),f=vue.resolveComponent("el-aside"),v=vue.resolveComponent("el-input"),g=vue.resolveComponent("el-form-item"),y=vue.resolveComponent("el-radio-button"),b=vue.resolveComponent("el-radio-group"),w=vue.resolveComponent("code-editor"),k=vue.resolveComponent("event-rule"),_=vue.resolveComponent("el-form");return vue.openBlock(),vue.createBlock(h,{class:"event-script-container"},{default:vue.withCtx((()=>[vue.createVNode(f,{width:"300px",class:"event-script-aside"},{default:vue.withCtx((()=>[vue.createVNode(h,null,{default:vue.withCtx((()=>[vue.createVNode(r,{height:"42px"},{default:vue.withCtx((()=>[vue.createVNode(a,{link:"",type:"primary",size:"default",onClick:l.handleAdd},{default:vue.withCtx((()=>[_hoisted_1$Q,vue.createTextVNode(vue.toDisplayString(e.$t("fm.eventscript.config.add")),1)])),_:1},8,["onClick"])])),_:1}),vue.createVNode(m,null,{default:vue.withCtx((()=>[vue.createVNode(p,null,{default:vue.withCtx((()=>[vue.createVNode(c,{class:"event-script-aside-menu","default-active":i.selectKey},{default:vue.withCtx((()=>[vue.createVNode(u,vue.mergeProps({list:i.list},{group:"peo1",ghostClass:"ghost11",animation:200,handle:".drag-widget"},{"no-transition-on-drag":!0,"item-key":"key"}),{item:vue.withCtx((({element:t,index:o})=>[(vue.openBlock(),vue.createBlock(d,{class:vue.normalizeClass({"is-disabled":!i.saved||l.isFormChange(),"is-active2":i.selectKey==t.key}),index:t.key,key:t.key,onClick:e=>l.handleSelect(t.key)},{title:vue.withCtx((()=>[vue.createElementVNode("div",null,[!l.isFormChange()&&i.saved||i.selectKey!=t.key?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(s,{key:0,"is-dot":"",style:{position:"absolute",top:"2px",left:"2px"}})),vue.createElementVNode("span",{class:vue.normalizeClass(["event-script-menu-i",{"is-vis":"rule"==t.type}])},vue.toDisplayString("rule"==t.type?"VIS":"JS"),3),vue.createElementVNode("div",_hoisted_2$G,vue.toDisplayString(t.name),1),vue.createElementVNode("div",_hoisted_3$y,[i.readonlyFunctions.includes(t.name)?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("i",{key:0,class:"fm-iconfont icon-icon_clone",onClick:vue.withModifiers((e=>l.handleClone(o)),["stop"]),title:e.$t("fm.tooltip.clone")},null,8,_hoisted_4$w)),i.readonlyFunctions.includes(t.name)?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("i",{key:1,class:"fm-iconfont icon-trash",onClick:vue.withModifiers((e=>l.handleRemove(o)),["stop"]),title:e.$t("fm.tooltip.trash")},null,8,_hoisted_5$v)),_hoisted_6$r])])])),_:2},1032,["class","index","onClick"]))])),_:1},16,["list"])])),_:1},8,["default-active"])])),_:1})])),_:1})])),_:1})])),_:1}),vue.createVNode(m,{class:"event-script-main"},{default:vue.withCtx((()=>[i.selectIndex>=0?(vue.openBlock(),vue.createBlock(h,{key:0},{default:vue.withCtx((()=>[vue.createVNode(r,{height:"42px"},{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_7$o,[this.eventType?(vue.openBlock(),vue.createBlock(a,{key:0,type:"primary",size:"default",onClick:t[0]||(t[0]=e=>l.handleSave(!0))},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.eventscript.config.confirm")),1)])),_:1})):vue.createCommentVNode("",!0),vue.createVNode(a,{type:"primary",size:"default",onClick:t[1]||(t[1]=e=>l.handleSave(!1))},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.eventscript.config.save")),1)])),_:1}),vue.createVNode(a,{size:"default",onClick:l.handleCancal},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.eventscript.config.cancel")),1)])),_:1},8,["onClick"])])])),_:1}),vue.createVNode(m,null,{default:vue.withCtx((()=>[(vue.openBlock(),vue.createBlock(_,{ref:"dataForm",model:i.formData,rules:i.formRules,"label-width":"125px",size:"default","label-position":"left",key:i.selectKey,onSubmit:t[6]||(t[6]=vue.withModifiers((()=>{}),["prevent"]))},{default:vue.withCtx((()=>[vue.createVNode(g,{label:e.$t("fm.eventscript.config.name"),"label-width":"zh-cn"==e.$i18n.locale?"100px":"125px",prop:"name"},{default:vue.withCtx((()=>[vue.createVNode(v,{modelValue:i.formData.name,"onUpdate:modelValue":t[2]||(t[2]=e=>i.formData.name=e),disabled:i.readonlyFunctions.includes(i.formData.name)},null,8,["modelValue","disabled"])])),_:1},8,["label","label-width"]),i.formData.type?(vue.openBlock(),vue.createBlock(g,{key:0,"label-width":"0"},{default:vue.withCtx((()=>[vue.createVNode(b,{modelValue:i.formData.type,"onUpdate:modelValue":t[3]||(t[3]=e=>i.formData.type=e)},{default:vue.withCtx((()=>[vue.createVNode(y,{label:"rule",value:"rule"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.eventscript.config.rules")),1)])),_:1}),vue.createVNode(y,{label:"js",value:"js"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.eventscript.config.js")),1)])),_:1})])),_:1},8,["modelValue"])])),_:1})):vue.createCommentVNode("",!0),i.formData.type&&"js"!=i.formData.type?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(g,{key:1,"label-width":"0",prop:"func",style:{"margin-bottom":"0px"}},{default:vue.withCtx((()=>[_hoisted_8$h,vue.createVNode(w,{modelValue:i.formData.func,"onUpdate:modelValue":t[4]||(t[4]=e=>i.formData.func=e),mode:"javascript",height:i.formData.type?"350px":"400px"},null,8,["modelValue","height"]),_hoisted_9$f])),_:1})),"rule"==i.formData.type?(vue.openBlock(),vue.createBlock(k,{key:2,modelValue:i.formData.rules,"onUpdate:modelValue":t[5]||(t[5]=e=>i.formData.rules=e)},null,8,["modelValue"])):vue.createCommentVNode("",!0)])),_:1},8,["model","rules"]))])),_:1})])),_:1})):vue.createCommentVNode("",!0)])),_:1})])),_:1})}var EventScriptIndex=_export_sfc(_sfc_main$1b,[["render",_sfc_render$19]]),dialog_vue_vue_type_style_index_0_lang="";const _sfc_main$1a={components:{CusDialog:CusDialog,EventScriptIndex:EventScriptIndex},emits:["dialog-close","dialog-confirm"],data:()=>({visible:!1,scriptList:[]}),methods:{open(e,t,o){this.visible=!0,e&&(this.scriptList=e),this.$nextTick((()=>{!o&&t&&this.$refs.eventScriptIndex.loadNewFunction(t),o&&t&&this.$refs.eventScriptIndex.loadFunction(o,t)}))},handleClose(){this.$emit("dialog-close",this.scriptList),this.visible=!1},handleConfirmEvent(e){this.$emit("dialog-close",this.scriptList),this.$emit("dialog-confirm",e),this.visible=!1},beforeClose(e){this.$refs.eventScriptIndex.beforeClose(e)}}};function _sfc_render$18(e,t,o,n,i,l){const a=vue.resolveComponent("event-script-index"),r=vue.resolveComponent("el-container"),s=vue.resolveComponent("cus-dialog");return vue.openBlock(),vue.createBlock(s,{visible:e.visible,onOnClose:l.handleClose,ref:"scriptDialog",width:"1000px",title:e.$t("fm.eventscript.config.title"),action:!1,"before-close":l.beforeClose},{default:vue.withCtx((()=>[vue.createVNode(r,{style:{height:"600px"},class:"fm-event-panel-dialog-container"},{default:vue.withCtx((()=>[vue.createVNode(a,{modelValue:e.scriptList,"onUpdate:modelValue":t[0]||(t[0]=t=>e.scriptList=t),ref:"eventScriptIndex",onOnConfirmEvent:l.handleConfirmEvent},null,8,["modelValue","onOnConfirmEvent"])])),_:1})])),_:1},8,["visible","onOnClose","title","before-close"])}var EventScriptDialog=_export_sfc(_sfc_main$1a,[["render",_sfc_render$18]]);const _sfc_main$19={components:{CodeDialog:CodeDialog,DatasourceDialog:DatasourceDialog,EventScriptDialog:EventScriptDialog},props:["data","sheets","formKey"],emits:["on-style-update","on-datasource-update","on-eventscript-update","on-eventscript-confirm","update:data"],data(){return{customClassArray:this.data&&this.data.customClass?this.data.customClass.split(" ").filter((e=>e)):[],dataModel:this.data}},inject:["isMobile","useAntdForm"],methods:{handleSetStyleSheets(){document.styleSheets[0].insertRule?this.$refs.styleDialog.open(this.data.styleSheets||""):elementPlus.ElMessage({message:this.$t("fm.message.notSupport"),type:"warning"})},handlestyleSheetsConfirm(e){this.dataModel.styleSheets=e,this.$refs.styleDialog.close();var t=splitStyleSheets(e);this.$emit("on-style-update",t),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleSetDatasource(){this.dataModel.dataSource=this.data.dataSource||[],this.$refs.dataSourceDialog.open(this.data.dataSource)},handleDataSourceClose(e){this.dataModel.dataSource=e,this.$emit("on-datasource-update",e),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleSetScript(){this.dataModel.eventScript=this.data.eventScript||[],this.$refs.eventScriptDialog.open(this.data.eventScript)},editClass(){this.handleSetStyleSheets()},editDatasource(e){this.dataModel.dataSource=this.data.dataSource||[],this.$refs.dataSourceDialog.open(this.data.dataSource,e)},editScript(e,t){this.dataModel.eventScript=this.data.eventScript||[],this.$refs.eventScriptDialog.open(this.data.eventScript,e,t)},handleEventScriptClose(e){this.dataModel.eventScript=e,this.$emit("on-eventscript-update",e),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleEventConfirm(e){this.$emit("on-eventscript-confirm",e),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}},created(){this.useAntdForm?this.dataModel.ui="antd":this.dataModel.ui="element"},watch:{"data.customClass":function(e){this.customClassArray=this.data&&this.data.customClass?this.data.customClass.split(" ").filter((e=>e)):[]},customClassArray(e){this.dataModel.customClass=e.join(" ")},data(e){this.dataModel=e},dataModel:{deep:!0,handler(e){this.$emit("update:data",e)}}}},_hoisted_1$P={class:"form-config-container"};function _sfc_render$17(e,t,o,n,i,l){const a=vue.resolveComponent("el-radio-button"),r=vue.resolveComponent("el-radio-group"),s=vue.resolveComponent("el-form-item"),d=vue.resolveComponent("el-input"),u=vue.resolveComponent("el-input-number"),c=vue.resolveComponent("el-switch"),p=vue.resolveComponent("el-button"),m=vue.resolveComponent("el-option"),h=vue.resolveComponent("el-select"),f=vue.resolveComponent("el-form"),v=vue.resolveComponent("code-dialog"),g=vue.resolveComponent("datasource-dialog"),y=vue.resolveComponent("event-script-dialog"),b=vue.resolveComponent("el-scrollbar");return vue.openBlock(),vue.createBlock(b,null,{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_1$P,[vue.createVNode(f,{"label-position":"top",size:"default"},{default:vue.withCtx((()=>[vue.createVNode(s,{label:"UI"},{default:vue.withCtx((()=>[vue.createVNode(r,{modelValue:i.dataModel.ui,"onUpdate:modelValue":t[0]||(t[0]=e=>i.dataModel.ui=e)},{default:vue.withCtx((()=>[vue.createVNode(a,{value:"element",label:"element"},{default:vue.withCtx((()=>[vue.createTextVNode("Element")])),_:1}),vue.createVNode(a,{value:"antd",label:"antd",disabled:!l.useAntdForm},{default:vue.withCtx((()=>[vue.createTextVNode("Ant Design")])),_:1},8,["disabled"])])),_:1},8,["modelValue"])])),_:1}),vue.createVNode(s,{label:e.$t("fm.config.form.width")},{default:vue.withCtx((()=>[vue.createVNode(d,{modelValue:i.dataModel.width,"onUpdate:modelValue":t[1]||(t[1]=e=>i.dataModel.width=e),clearable:"",disabled:l.isMobile()},null,8,["modelValue","disabled"])])),_:1},8,["label"]),vue.createVNode(s,{label:e.$t("fm.config.form.labelPosition.title")},{default:vue.withCtx((()=>[(vue.openBlock(),vue.createBlock(r,{modelValue:i.dataModel.labelPosition,"onUpdate:modelValue":t[2]||(t[2]=e=>i.dataModel.labelPosition=e),key:o.data.labelPosition},{default:vue.withCtx((()=>[vue.createVNode(a,{value:"left",label:"left"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.form.labelPosition.left")),1)])),_:1}),vue.createVNode(a,{value:"right",label:"right"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.form.labelPosition.right")),1)])),_:1}),vue.createVNode(a,{value:"top",label:"top"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.form.labelPosition.top")),1)])),_:1})])),_:1},8,["modelValue"]))])),_:1},8,["label"]),vue.createVNode(s,{label:e.$t("fm.config.form.labelWidth")},{default:vue.withCtx((()=>[vue.createVNode(u,{modelValue:i.dataModel.labelWidth,"onUpdate:modelValue":t[3]||(t[3]=e=>i.dataModel.labelWidth=e),min:0,max:200,step:10},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(s,{label:e.$t("fm.config.form.labelSuffix")},{default:vue.withCtx((()=>[vue.createVNode(c,{modelValue:i.dataModel.labelSuffix,"onUpdate:modelValue":t[4]||(t[4]=e=>i.dataModel.labelSuffix=e)},null,8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(s,{label:e.$t("fm.config.form.size")},{default:vue.withCtx((()=>[vue.createVNode(r,{modelValue:i.dataModel.size,"onUpdate:modelValue":t[5]||(t[5]=e=>i.dataModel.size=e)},{default:vue.withCtx((()=>[vue.createVNode(a,{value:"large",label:"large"},{default:vue.withCtx((()=>[vue.createTextVNode("Large")])),_:1}),vue.createVNode(a,{value:"default",label:"default"},{default:vue.withCtx((()=>[vue.createTextVNode("Default")])),_:1}),vue.createVNode(a,{value:"small",label:"small"},{default:vue.withCtx((()=>[vue.createTextVNode("Small")])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(s,{label:e.$t("fm.config.form.styleSheets")},{default:vue.withCtx((()=>[vue.createVNode(p,{style:{width:"100%"},onClick:l.handleSetStyleSheets},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.setting")),1)])),_:1},8,["onClick"])])),_:1},8,["label"]),vue.createVNode(s,{label:e.$t("fm.config.form.customClass")},{default:vue.withCtx((()=>[vue.createVNode(h,{style:{width:"100%"},modelValue:i.customClassArray,"onUpdate:modelValue":t[6]||(t[6]=e=>i.customClassArray=e),multiple:"",filterable:"","allow-create":"","default-first-option":""},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.sheets,(e=>(vue.openBlock(),vue.createBlock(m,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),vue.createVNode(s,{label:e.$t("fm.datasource.name")},{default:vue.withCtx((()=>[vue.createVNode(p,{style:{width:"100%"},onClick:l.handleSetDatasource},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.setting")),1)])),_:1},8,["onClick"])])),_:1},8,["label"]),vue.createVNode(s,{label:e.$t("fm.eventscript.name")},{default:vue.withCtx((()=>[vue.createVNode(p,{style:{width:"100%"},onClick:l.handleSetScript},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.config.widget.setting")),1)])),_:1},8,["onClick"])])),_:1},8,["label"])])),_:1}),vue.createVNode(v,{ref:"styleDialog",mode:"css",title:e.$t("fm.config.form.styleSheets"),help:"https://form.making.link/docs/manual/custom-style.html#%E8%A1%A8%E5%8D%95%E6%A0%B7%E5%BC%8F%E8%A1%A8",onOnConfirm:l.handlestyleSheetsConfirm},null,8,["title","onOnConfirm"]),vue.createVNode(g,{ref:"dataSourceDialog",onDialogClose:l.handleDataSourceClose},null,8,["onDialogClose"]),vue.createVNode(y,{ref:"eventScriptDialog",onDialogClose:l.handleEventScriptClose,onDialogConfirm:l.handleEventConfirm},null,8,["onDialogClose","onDialogConfirm"])])])),_:1})}var FormConfig=_export_sfc(_sfc_main$19,[["render",_sfc_render$17]]);
/*!
   * Viewer.js v1.11.6
   * https://fengyuanchen.github.io/viewerjs
   *
   * Copyright 2015-present Chen Fengyuan
   * Released under the MIT license
   *
   * Date: 2023-09-17T03:16:38.052Z
   */function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach((function(t){_defineProperty(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,o){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}var DEFAULTS={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,inheritedAttributes:["crossOrigin","decoding","isMap","loading","referrerPolicy","sizes","srcset","useMap"],initialCoverage:.9,initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,focus:!0,loading:!0,loop:!0,minWidth:200,minHeight:100,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,slideOnTouch:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,move:null,moved:null,rotate:null,rotated:null,scale:null,scaled:null,zoom:null,zoomed:null,play:null,stop:null},TEMPLATE='<div class="viewer-container" tabindex="-1" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list" role="navigation"></ul></div></div><div class="viewer-tooltip" role="alert" aria-hidden="true"></div><div class="viewer-button" data-viewer-action="mix" role="button"></div><div class="viewer-player"></div></div>',IS_BROWSER="undefined"!=typeof window&&void 0!==window.document,WINDOW=IS_BROWSER?window:{},IS_TOUCH_DEVICE=!(!IS_BROWSER||!WINDOW.document.documentElement)&&"ontouchstart"in WINDOW.document.documentElement,HAS_POINTER_EVENT=!!IS_BROWSER&&"PointerEvent"in WINDOW,NAMESPACE="viewer",ACTION_MOVE="move",ACTION_SWITCH="switch",ACTION_ZOOM="zoom",CLASS_ACTIVE="".concat(NAMESPACE,"-active"),CLASS_CLOSE="".concat(NAMESPACE,"-close"),CLASS_FADE="".concat(NAMESPACE,"-fade"),CLASS_FIXED="".concat(NAMESPACE,"-fixed"),CLASS_FULLSCREEN="".concat(NAMESPACE,"-fullscreen"),CLASS_FULLSCREEN_EXIT="".concat(NAMESPACE,"-fullscreen-exit"),CLASS_HIDE="".concat(NAMESPACE,"-hide"),CLASS_HIDE_MD_DOWN="".concat(NAMESPACE,"-hide-md-down"),CLASS_HIDE_SM_DOWN="".concat(NAMESPACE,"-hide-sm-down"),CLASS_HIDE_XS_DOWN="".concat(NAMESPACE,"-hide-xs-down"),CLASS_IN="".concat(NAMESPACE,"-in"),CLASS_INVISIBLE="".concat(NAMESPACE,"-invisible"),CLASS_LOADING="".concat(NAMESPACE,"-loading"),CLASS_MOVE="".concat(NAMESPACE,"-move"),CLASS_OPEN="".concat(NAMESPACE,"-open"),CLASS_SHOW="".concat(NAMESPACE,"-show"),CLASS_TRANSITION="".concat(NAMESPACE,"-transition"),EVENT_CLICK="click",EVENT_DBLCLICK="dblclick",EVENT_DRAG_START="dragstart",EVENT_FOCUSIN="focusin",EVENT_KEY_DOWN="keydown",EVENT_LOAD="load",EVENT_ERROR="error",EVENT_TOUCH_END=IS_TOUCH_DEVICE?"touchend touchcancel":"mouseup",EVENT_TOUCH_MOVE=IS_TOUCH_DEVICE?"touchmove":"mousemove",EVENT_TOUCH_START=IS_TOUCH_DEVICE?"touchstart":"mousedown",EVENT_POINTER_DOWN=HAS_POINTER_EVENT?"pointerdown":EVENT_TOUCH_START,EVENT_POINTER_MOVE=HAS_POINTER_EVENT?"pointermove":EVENT_TOUCH_MOVE,EVENT_POINTER_UP=HAS_POINTER_EVENT?"pointerup pointercancel":EVENT_TOUCH_END,EVENT_RESIZE="resize",EVENT_TRANSITION_END="transitionend",EVENT_WHEEL="wheel",EVENT_READY="ready",EVENT_SHOW="show",EVENT_SHOWN="shown",EVENT_HIDE="hide",EVENT_HIDDEN="hidden",EVENT_VIEW="view",EVENT_VIEWED="viewed",EVENT_MOVE="move",EVENT_MOVED="moved",EVENT_ROTATE="rotate",EVENT_ROTATED="rotated",EVENT_SCALE="scale",EVENT_SCALED="scaled",EVENT_ZOOM="zoom",EVENT_ZOOMED="zoomed",EVENT_PLAY="play",EVENT_STOP="stop",DATA_ACTION="".concat(NAMESPACE,"Action"),REGEXP_SPACES=/\s\s*/,BUTTONS=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"];function isString(e){return"string"==typeof e}var isNaN$1=Number.isNaN||WINDOW.isNaN;function isNumber(e){return"number"==typeof e&&!isNaN$1(e)}function isUndefined(e){return void 0===e}function isObject$1(e){return"object"===_typeof(e)&&null!==e}var hasOwnProperty$1=Object.prototype.hasOwnProperty;function isPlainObject(e){if(!isObject$1(e))return!1;try{var t=e.constructor,o=t.prototype;return t&&o&&hasOwnProperty$1.call(o,"isPrototypeOf")}catch(n){return!1}}function isFunction$1(e){return"function"==typeof e}function forEach(e,t){if(e&&isFunction$1(t))if(Array.isArray(e)||isNumber(e.length)){var o,n=e.length;for(o=0;o<n&&!1!==t.call(e,e[o],o,e);o+=1);}else isObject$1(e)&&Object.keys(e).forEach((function(o){t.call(e,e[o],o,e)}));return e}var assign=Object.assign||function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];return isObject$1(e)&&o.length>0&&o.forEach((function(t){isObject$1(t)&&Object.keys(t).forEach((function(o){e[o]=t[o]}))})),e},REGEXP_SUFFIX=/^(?:width|height|left|top|marginLeft|marginTop)$/;function setStyle(e,t){var o=e.style;forEach(t,(function(e,t){REGEXP_SUFFIX.test(t)&&isNumber(e)&&(e+="px"),o[t]=e}))}function escapeHTMLEntities(e){return isString(e)?e.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e}function hasClass(e,t){return!(!e||!t)&&(e.classList?e.classList.contains(t):e.className.indexOf(t)>-1)}function addClass(e,t){if(e&&t)if(isNumber(e.length))forEach(e,(function(e){addClass(e,t)}));else if(e.classList)e.classList.add(t);else{var o=e.className.trim();o?o.indexOf(t)<0&&(e.className="".concat(o," ").concat(t)):e.className=t}}function removeClass(e,t){e&&t&&(isNumber(e.length)?forEach(e,(function(e){removeClass(e,t)})):e.classList?e.classList.remove(t):e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function toggleClass(e,t,o){t&&(isNumber(e.length)?forEach(e,(function(e){toggleClass(e,t,o)})):o?addClass(e,t):removeClass(e,t))}var REGEXP_HYPHENATE=/([a-z\d])([A-Z])/g;function hyphenate(e){return e.replace(REGEXP_HYPHENATE,"$1-$2").toLowerCase()}function getData(e,t){return isObject$1(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(hyphenate(t)))}function setData(e,t,o){isObject$1(o)?e[t]=o:e.dataset?e.dataset[t]=o:e.setAttribute("data-".concat(hyphenate(t)),o)}var onceSupported=function(){var e=!1;if(IS_BROWSER){var t=!1,o=function(){},n=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(e){t=e}});WINDOW.addEventListener("test",o,n),WINDOW.removeEventListener("test",o,n)}return e}();function removeListener(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o;t.trim().split(REGEXP_SPACES).forEach((function(t){if(!onceSupported){var l=e.listeners;l&&l[t]&&l[t][o]&&(i=l[t][o],delete l[t][o],0===Object.keys(l[t]).length&&delete l[t],0===Object.keys(l).length&&delete e.listeners)}e.removeEventListener(t,i,n)}))}function addListener(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o;t.trim().split(REGEXP_SPACES).forEach((function(t){if(n.once&&!onceSupported){var l=e.listeners,a=void 0===l?{}:l;i=function(){delete a[t][o],e.removeEventListener(t,i,n);for(var l=arguments.length,r=new Array(l),s=0;s<l;s++)r[s]=arguments[s];o.apply(e,r)},a[t]||(a[t]={}),a[t][o]&&e.removeEventListener(t,a[t][o],n),a[t][o]=i,e.listeners=a}e.addEventListener(t,i,n)}))}function dispatchEvent(e,t,o,n){var i;return isFunction$1(Event)&&isFunction$1(CustomEvent)?i=new CustomEvent(t,_objectSpread2({bubbles:!0,cancelable:!0,detail:o},n)):(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,o),e.dispatchEvent(i)}function getOffset(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}function getTransforms(e){var t=e.rotate,o=e.scaleX,n=e.scaleY,i=e.translateX,l=e.translateY,a=[];isNumber(i)&&0!==i&&a.push("translateX(".concat(i,"px)")),isNumber(l)&&0!==l&&a.push("translateY(".concat(l,"px)")),isNumber(t)&&0!==t&&a.push("rotate(".concat(t,"deg)")),isNumber(o)&&1!==o&&a.push("scaleX(".concat(o,")")),isNumber(n)&&1!==n&&a.push("scaleY(".concat(n,")"));var r=a.length?a.join(" "):"none";return{WebkitTransform:r,msTransform:r,transform:r}}function getImageNameFromURL(e){return isString(e)?decodeURIComponent(e.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""}var IS_SAFARI=WINDOW.navigator&&/Version\/\d+(\.\d+)+?\s+Safari/i.test(WINDOW.navigator.userAgent);function getImageNaturalSizes(e,t,o){var n=document.createElement("img");if(e.naturalWidth&&!IS_SAFARI)return o(e.naturalWidth,e.naturalHeight),n;var i=document.body||document.documentElement;return n.onload=function(){o(n.width,n.height),IS_SAFARI||i.removeChild(n)},forEach(t.inheritedAttributes,(function(t){var o=e.getAttribute(t);null!==o&&n.setAttribute(t,o)})),n.src=e.src,IS_SAFARI||(n.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",i.appendChild(n)),n}function getResponsiveClass(e){switch(e){case 2:return CLASS_HIDE_XS_DOWN;case 3:return CLASS_HIDE_SM_DOWN;case 4:return CLASS_HIDE_MD_DOWN;default:return""}}function getMaxZoomRatio(e){var t=_objectSpread2({},e),o=[];return forEach(e,(function(e,n){delete t[n],forEach(t,(function(t){var n=Math.abs(e.startX-t.startX),i=Math.abs(e.startY-t.startY),l=Math.abs(e.endX-t.endX),a=Math.abs(e.endY-t.endY),r=Math.sqrt(n*n+i*i),s=(Math.sqrt(l*l+a*a)-r)/r;o.push(s)}))})),o.sort((function(e,t){return Math.abs(e)<Math.abs(t)})),o[0]}function getPointer(e,t){var o=e.pageX,n=e.pageY,i={endX:o,endY:n};return t?i:_objectSpread2({timeStamp:Date.now(),startX:o,startY:n},i)}function getPointersCenter(e){var t=0,o=0,n=0;return forEach(e,(function(e){var i=e.startX,l=e.startY;t+=i,o+=l,n+=1})),{pageX:t/=n,pageY:o/=n}}var render={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initBody:function(){var e=this.element.ownerDocument,t=e.body||e.documentElement;this.body=t,this.scrollbarWidth=window.innerWidth-e.documentElement.clientWidth,this.initialBodyPaddingRight=t.style.paddingRight,this.initialBodyComputedPaddingRight=window.getComputedStyle(t).paddingRight},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var e,t=this.options,o=this.parent;t.inline&&(e={width:Math.max(o.offsetWidth,t.minWidth),height:Math.max(o.offsetHeight,t.minHeight)},this.parentData=e),!this.fulled&&e||(e=this.containerData),this.viewerData=assign({},e)},renderViewer:function(){this.options.inline&&!this.fulled&&setStyle(this.viewer,this.viewerData)},initList:function(){var e=this,t=this.element,o=this.options,n=this.list,i=[];n.innerHTML="",forEach(this.images,(function(t,l){var a=t.src,r=t.alt||getImageNameFromURL(a),s=e.getImageURL(t);if(a||s){var d=document.createElement("li"),u=document.createElement("img");forEach(o.inheritedAttributes,(function(e){var o=t.getAttribute(e);null!==o&&u.setAttribute(e,o)})),o.navbar&&(u.src=a||s),u.alt=r,u.setAttribute("data-original-url",s||a),d.setAttribute("data-index",l),d.setAttribute("data-viewer-action","view"),d.setAttribute("role","button"),o.keyboard&&d.setAttribute("tabindex",0),d.appendChild(u),n.appendChild(d),i.push(d)}})),this.items=i,forEach(i,(function(t){var n,i,l=t.firstElementChild;setData(l,"filled",!0),o.loading&&addClass(t,CLASS_LOADING),addListener(l,EVENT_LOAD,n=function(n){removeListener(l,EVENT_ERROR,i),o.loading&&removeClass(t,CLASS_LOADING),e.loadImage(n)},{once:!0}),addListener(l,EVENT_ERROR,i=function(){removeListener(l,EVENT_LOAD,n),o.loading&&removeClass(t,CLASS_LOADING)},{once:!0})})),o.transition&&addListener(t,EVENT_VIEWED,(function(){addClass(n,CLASS_TRANSITION)}),{once:!0})},renderList:function(){var e=this.index,t=this.items[e];if(t){var o=t.nextElementSibling,n=parseInt(window.getComputedStyle(o||t).marginLeft,10),i=t.offsetWidth,l=i+n;setStyle(this.list,assign({width:l*this.length-n},getTransforms({translateX:(this.viewerData.width-i)/2-l*e})))}},resetList:function(){var e=this.list;e.innerHTML="",removeClass(e,CLASS_TRANSITION),setStyle(e,getTransforms({translateX:0}))},initImage:function(e){var t,o=this,n=this.options,i=this.image,l=this.viewerData,a=this.footer.offsetHeight,r=l.width,s=Math.max(l.height-a,a),d=this.imageData||{};this.imageInitializing={abort:function(){t.onload=null}},t=getImageNaturalSizes(i,n,(function(t,i){var l=t/i,a=Math.max(0,Math.min(1,n.initialCoverage)),u=r,c=s;o.imageInitializing=!1,s*l>r?c=r/l:u=s*l,a=isNumber(a)?a:.9,u=Math.min(u*a,t),c=Math.min(c*a,i);var p=(r-u)/2,m=(s-c)/2,h={left:p,top:m,x:p,y:m,width:u,height:c,oldRatio:1,ratio:u/t,aspectRatio:l,naturalWidth:t,naturalHeight:i},f=assign({},h);n.rotatable&&(h.rotate=d.rotate||0,f.rotate=0),n.scalable&&(h.scaleX=d.scaleX||1,h.scaleY=d.scaleY||1,f.scaleX=1,f.scaleY=1),o.imageData=h,o.initialImageData=f,e&&e()}))},renderImage:function(e){var t=this,o=this.image,n=this.imageData;if(setStyle(o,assign({width:n.width,height:n.height,marginLeft:n.x,marginTop:n.y},getTransforms(n))),e)if((this.viewing||this.moving||this.rotating||this.scaling||this.zooming)&&this.options.transition&&hasClass(o,CLASS_TRANSITION)){var i=function(){t.imageRendering=!1,e()};this.imageRendering={abort:function(){removeListener(o,EVENT_TRANSITION_END,i)}},addListener(o,EVENT_TRANSITION_END,i,{once:!0})}else e()},resetImage:function(){var e=this.image;e&&(this.viewing&&this.viewing.abort(),e.parentNode.removeChild(e),this.image=null,this.title.innerHTML="")}},events={bind:function(){var e=this.options,t=this.viewer,o=this.canvas,n=this.element.ownerDocument;addListener(t,EVENT_CLICK,this.onClick=this.click.bind(this)),addListener(t,EVENT_DRAG_START,this.onDragStart=this.dragstart.bind(this)),addListener(o,EVENT_POINTER_DOWN,this.onPointerDown=this.pointerdown.bind(this)),addListener(n,EVENT_POINTER_MOVE,this.onPointerMove=this.pointermove.bind(this)),addListener(n,EVENT_POINTER_UP,this.onPointerUp=this.pointerup.bind(this)),addListener(n,EVENT_KEY_DOWN,this.onKeyDown=this.keydown.bind(this)),addListener(window,EVENT_RESIZE,this.onResize=this.resize.bind(this)),e.zoomable&&e.zoomOnWheel&&addListener(t,EVENT_WHEEL,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleOnDblclick&&addListener(o,EVENT_DBLCLICK,this.onDblclick=this.dblclick.bind(this))},unbind:function(){var e=this.options,t=this.viewer,o=this.canvas,n=this.element.ownerDocument;removeListener(t,EVENT_CLICK,this.onClick),removeListener(t,EVENT_DRAG_START,this.onDragStart),removeListener(o,EVENT_POINTER_DOWN,this.onPointerDown),removeListener(n,EVENT_POINTER_MOVE,this.onPointerMove),removeListener(n,EVENT_POINTER_UP,this.onPointerUp),removeListener(n,EVENT_KEY_DOWN,this.onKeyDown),removeListener(window,EVENT_RESIZE,this.onResize),e.zoomable&&e.zoomOnWheel&&removeListener(t,EVENT_WHEEL,this.onWheel,{passive:!1,capture:!0}),e.toggleOnDblclick&&removeListener(o,EVENT_DBLCLICK,this.onDblclick)}},handlers={click:function(e){var t=this.options,o=this.imageData,n=e.target,i=getData(n,DATA_ACTION);switch(i||"img"!==n.localName||"li"!==n.parentElement.localName||(i=getData(n=n.parentElement,DATA_ACTION)),IS_TOUCH_DEVICE&&e.isTrusted&&n===this.canvas&&clearTimeout(this.clickCanvasTimeout),i){case"mix":this.played?this.stop():t.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.pointerMoved||this.hide();break;case"view":this.view(getData(n,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(t.loop);break;case"play":this.play(t.fullscreen);break;case"next":this.next(t.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-o.scaleX||-1);break;case"flip-vertical":this.scaleY(-o.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(e){e.preventDefault(),this.viewed&&e.target===this.image&&(IS_TOUCH_DEVICE&&e.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle(e.isTrusted?e:e.detail&&e.detail.originalEvent))},load:function(){var e=this;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1);var t=this.element,o=this.options,n=this.image,i=this.index,l=this.viewerData;removeClass(n,CLASS_INVISIBLE),o.loading&&removeClass(this.canvas,CLASS_LOADING),n.style.cssText="height:0;"+"margin-left:".concat(l.width/2,"px;")+"margin-top:".concat(l.height/2,"px;")+"max-width:none!important;position:relative;width:0;",this.initImage((function(){toggleClass(n,CLASS_MOVE,o.movable),toggleClass(n,CLASS_TRANSITION,o.transition),e.renderImage((function(){e.viewed=!0,e.viewing=!1,isFunction$1(o.viewed)&&addListener(t,EVENT_VIEWED,o.viewed,{once:!0}),dispatchEvent(t,EVENT_VIEWED,{originalImage:e.images[i],index:i,image:n},{cancelable:!1})}))}))},loadImage:function(e){var t=e.target,o=t.parentNode,n=o.offsetWidth||30,i=o.offsetHeight||50,l=!!getData(t,"filled");getImageNaturalSizes(t,this.options,(function(e,o){var a=e/o,r=n,s=i;i*a>n?l?r=i*a:s=n/a:l?s=n/a:r=i*a,setStyle(t,assign({width:r,height:s},getTransforms({translateX:(n-r)/2,translateY:(i-s)/2})))}))},keydown:function(e){var t=this.options;if(t.keyboard){var o=e.keyCode||e.which||e.charCode;if(13===o)this.viewer.contains(e.target)&&this.click(e);if(this.fulled)switch(o){case 27:this.played?this.stop():t.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.played&&this.playing?this.playing.prev():this.prev(t.loop);break;case 38:e.preventDefault(),this.zoom(t.zoomRatio,!0);break;case 39:this.played&&this.playing?this.playing.next():this.next(t.loop);break;case 40:e.preventDefault(),this.zoom(-t.zoomRatio,!0);break;case 48:case 49:e.ctrlKey&&(e.preventDefault(),this.toggle())}}},dragstart:function(e){"img"===e.target.localName&&e.preventDefault()},pointerdown:function(e){var t=this.options,o=this.pointers,n=e.buttons,i=e.button;if(this.pointerMoved=!1,!(!this.viewed||this.showing||this.viewing||this.hiding||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(isNumber(n)&&1!==n||isNumber(i)&&0!==i||e.ctrlKey))){e.preventDefault(),e.changedTouches?forEach(e.changedTouches,(function(e){o[e.identifier]=getPointer(e)})):o[e.pointerId||0]=getPointer(e);var l=!!t.movable&&ACTION_MOVE;t.zoomOnTouch&&t.zoomable&&Object.keys(o).length>1?l=ACTION_ZOOM:t.slideOnTouch&&("touch"===e.pointerType||"touchstart"===e.type)&&this.isSwitchable()&&(l=ACTION_SWITCH),!t.transition||l!==ACTION_MOVE&&l!==ACTION_ZOOM||removeClass(this.image,CLASS_TRANSITION),this.action=l}},pointermove:function(e){var t=this.pointers,o=this.action;this.viewed&&o&&(e.preventDefault(),e.changedTouches?forEach(e.changedTouches,(function(e){assign(t[e.identifier]||{},getPointer(e,!0))})):assign(t[e.pointerId||0]||{},getPointer(e,!0)),this.change(e))},pointerup:function(e){var t,o=this,n=this.options,i=this.action,l=this.pointers;e.changedTouches?forEach(e.changedTouches,(function(e){t=l[e.identifier],delete l[e.identifier]})):(t=l[e.pointerId||0],delete l[e.pointerId||0]),i&&(e.preventDefault(),!n.transition||i!==ACTION_MOVE&&i!==ACTION_ZOOM||addClass(this.image,CLASS_TRANSITION),this.action=!1,IS_TOUCH_DEVICE&&i!==ACTION_ZOOM&&t&&Date.now()-t.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),n.toggleOnDblclick&&this.viewed&&e.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout((function(){dispatchEvent(o.image,EVENT_DBLCLICK,{originalEvent:e})}),50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout((function(){o.imageClicked=!1}),500)):(this.imageClicked=!1,n.backdrop&&"static"!==n.backdrop&&e.target===this.canvas&&(this.clickCanvasTimeout=setTimeout((function(){dispatchEvent(o.canvas,EVENT_CLICK,{originalEvent:e})}),50)))))},resize:function(){var e=this;if(this.isShown&&!this.hiding&&(this.fulled&&(this.close(),this.initBody(),this.open()),this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage((function(){e.renderImage()})),this.played)){if(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement))return void this.stop();forEach(this.player.getElementsByTagName("img"),(function(t){addListener(t,EVENT_LOAD,e.loadImage.bind(e),{once:!0}),dispatchEvent(t,EVENT_LOAD)}))}},wheel:function(e){var t=this;if(this.viewed&&(e.preventDefault(),!this.wheeling)){this.wheeling=!0,setTimeout((function(){t.wheeling=!1}),50);var o=Number(this.options.zoomRatio)||.1,n=1;e.deltaY?n=e.deltaY>0?1:-1:e.wheelDelta?n=-e.wheelDelta/120:e.detail&&(n=e.detail>0?1:-1),this.zoom(-n*o,!0,null,e)}}},methods={show:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.element,o=this.options;if(o.inline||this.showing||this.isShown||this.showing)return this;if(!this.ready)return this.build(),this.ready&&this.show(e),this;if(isFunction$1(o.show)&&addListener(t,EVENT_SHOW,o.show,{once:!0}),!1===dispatchEvent(t,EVENT_SHOW)||!this.ready)return this;this.hiding&&this.transitioning.abort(),this.showing=!0,this.open();var n=this.viewer;if(removeClass(n,CLASS_HIDE),n.setAttribute("role","dialog"),n.setAttribute("aria-labelledby",this.title.id),n.setAttribute("aria-modal",!0),n.removeAttribute("aria-hidden"),o.transition&&!e){var i=this.shown.bind(this);this.transitioning={abort:function(){removeListener(n,EVENT_TRANSITION_END,i),removeClass(n,CLASS_IN)}},addClass(n,CLASS_TRANSITION),n.initialOffsetWidth=n.offsetWidth,addListener(n,EVENT_TRANSITION_END,i,{once:!0}),addClass(n,CLASS_IN)}else addClass(n,CLASS_IN),this.shown();return this},hide:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=this.element,n=this.options;if(n.inline||this.hiding||!this.isShown&&!this.showing)return this;if(isFunction$1(n.hide)&&addListener(o,EVENT_HIDE,n.hide,{once:!0}),!1===dispatchEvent(o,EVENT_HIDE))return this;this.showing&&this.transitioning.abort(),this.hiding=!0,this.played?this.stop():this.viewing&&this.viewing.abort();var i=this.viewer,l=this.image,a=function(){removeClass(i,CLASS_IN),e.hidden()};if(n.transition&&!t){var r=function t(o){o&&o.target===i&&(removeListener(i,EVENT_TRANSITION_END,t),e.hidden())},s=function(){hasClass(i,CLASS_TRANSITION)?(addListener(i,EVENT_TRANSITION_END,r),removeClass(i,CLASS_IN)):a()};this.transitioning={abort:function(){e.viewed&&hasClass(l,CLASS_TRANSITION)?removeListener(l,EVENT_TRANSITION_END,s):hasClass(i,CLASS_TRANSITION)&&removeListener(i,EVENT_TRANSITION_END,r)}},this.viewed&&hasClass(l,CLASS_TRANSITION)?(addListener(l,EVENT_TRANSITION_END,s,{once:!0}),this.zoomTo(0,!1,null,null,!0)):s()}else a();return this},view:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.initialViewIndex;if(t=Number(t)||0,this.hiding||this.played||t<0||t>=this.length||this.viewed&&t===this.index)return this;if(!this.isShown)return this.index=t,this.show();this.viewing&&this.viewing.abort();var o=this.element,n=this.options,i=this.title,l=this.canvas,a=this.items[t],r=a.querySelector("img"),s=getData(r,"originalUrl"),d=r.getAttribute("alt"),u=document.createElement("img");if(forEach(n.inheritedAttributes,(function(e){var t=r.getAttribute(e);null!==t&&u.setAttribute(e,t)})),u.src=s,u.alt=d,isFunction$1(n.view)&&addListener(o,EVENT_VIEW,n.view,{once:!0}),!1===dispatchEvent(o,EVENT_VIEW,{originalImage:this.images[t],index:t,image:u})||!this.isShown||this.hiding||this.played)return this;var c=this.items[this.index];c&&(removeClass(c,CLASS_ACTIVE),c.removeAttribute("aria-selected")),addClass(a,CLASS_ACTIVE),a.setAttribute("aria-selected",!0),n.focus&&a.focus(),this.image=u,this.viewed=!1,this.index=t,this.imageData={},addClass(u,CLASS_INVISIBLE),n.loading&&addClass(l,CLASS_LOADING),l.innerHTML="",l.appendChild(u),this.renderList(),i.innerHTML="";var p,m,h=function(){var t=e.imageData,o=Array.isArray(n.title)?n.title[1]:n.title;i.innerHTML=escapeHTMLEntities(isFunction$1(o)?o.call(e,u,t):"".concat(d," (").concat(t.naturalWidth," × ").concat(t.naturalHeight,")"))};return addListener(o,EVENT_VIEWED,h,{once:!0}),this.viewing={abort:function(){removeListener(o,EVENT_VIEWED,h),u.complete?e.imageRendering?e.imageRendering.abort():e.imageInitializing&&e.imageInitializing.abort():(u.src="",removeListener(u,EVENT_LOAD,p),e.timeout&&clearTimeout(e.timeout))}},u.complete?this.load():(addListener(u,EVENT_LOAD,p=function(){removeListener(u,EVENT_ERROR,m),e.load()},{once:!0}),addListener(u,EVENT_ERROR,m=function(){removeListener(u,EVENT_LOAD,p),e.timeout&&(clearTimeout(e.timeout),e.timeout=!1),removeClass(u,CLASS_INVISIBLE),n.loading&&removeClass(e.canvas,CLASS_LOADING)},{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){removeClass(u,CLASS_INVISIBLE),e.timeout=!1}),1e3)),this},prev:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.index-1;return t<0&&(t=e?this.length-1:0),this.view(t),this},next:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.length-1,o=this.index+1;return o>t&&(o=e?0:t),this.view(o),this},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,o=this.imageData;return this.moveTo(isUndefined(e)?e:o.x+Number(e),isUndefined(t)?t:o.y+Number(t)),this},moveTo:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.element,l=this.options,a=this.imageData;if(e=Number(e),o=Number(o),this.viewed&&!this.played&&l.movable){var r=a.x,s=a.y,d=!1;if(isNumber(e)?d=!0:e=r,isNumber(o)?d=!0:o=s,d){if(isFunction$1(l.move)&&addListener(i,EVENT_MOVE,l.move,{once:!0}),!1===dispatchEvent(i,EVENT_MOVE,{x:e,y:o,oldX:r,oldY:s,originalEvent:n}))return this;a.x=e,a.y=o,a.left=e,a.top=o,this.moving=!0,this.renderImage((function(){t.moving=!1,isFunction$1(l.moved)&&addListener(i,EVENT_MOVED,l.moved,{once:!0}),dispatchEvent(i,EVENT_MOVED,{x:e,y:o,oldX:r,oldY:s,originalEvent:n},{cancelable:!1})}))}}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e)),this},rotateTo:function(e){var t=this,o=this.element,n=this.options,i=this.imageData;if(isNumber(e=Number(e))&&this.viewed&&!this.played&&n.rotatable){var l=i.rotate;if(isFunction$1(n.rotate)&&addListener(o,EVENT_ROTATE,n.rotate,{once:!0}),!1===dispatchEvent(o,EVENT_ROTATE,{degree:e,oldDegree:l}))return this;i.rotate=e,this.rotating=!0,this.renderImage((function(){t.rotating=!1,isFunction$1(n.rotated)&&addListener(o,EVENT_ROTATED,n.rotated,{once:!0}),dispatchEvent(o,EVENT_ROTATED,{degree:e,oldDegree:l},{cancelable:!1})}))}return this},scaleX:function(e){return this.scale(e,this.imageData.scaleY),this},scaleY:function(e){return this.scale(this.imageData.scaleX,e),this},scale:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.element,i=this.options,l=this.imageData;if(e=Number(e),o=Number(o),this.viewed&&!this.played&&i.scalable){var a=l.scaleX,r=l.scaleY,s=!1;if(isNumber(e)?s=!0:e=a,isNumber(o)?s=!0:o=r,s){if(isFunction$1(i.scale)&&addListener(n,EVENT_SCALE,i.scale,{once:!0}),!1===dispatchEvent(n,EVENT_SCALE,{scaleX:e,scaleY:o,oldScaleX:a,oldScaleY:r}))return this;l.scaleX=e,l.scaleY=o,this.scaling=!0,this.renderImage((function(){t.scaling=!1,isFunction$1(i.scaled)&&addListener(n,EVENT_SCALED,i.scaled,{once:!0}),dispatchEvent(n,EVENT_SCALED,{scaleX:e,scaleY:o,oldScaleX:a,oldScaleY:r},{cancelable:!1})}))}}return this},zoom:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=this.imageData;return e=(e=Number(e))<0?1/(1-e):1+e,this.zoomTo(i.width*e/i.naturalWidth,t,o,n),this},zoomTo:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=this.element,r=this.options,s=this.pointers,d=this.imageData,u=d.x,c=d.y,p=d.width,m=d.height,h=d.naturalWidth,f=d.naturalHeight;if(isNumber(e=Math.max(0,e))&&this.viewed&&!this.played&&(l||r.zoomable)){if(!l){var v=Math.max(.01,r.minZoomRatio),g=Math.min(100,r.maxZoomRatio);e=Math.min(Math.max(e,v),g)}if(i)switch(i.type){case"wheel":r.zoomRatio>=.055&&e>.95&&e<1.05&&(e=1);break;case"pointermove":case"touchmove":case"mousemove":e>.99&&e<1.01&&(e=1)}var y=h*e,b=f*e,w=y-p,k=b-m,_=d.ratio;if(isFunction$1(r.zoom)&&addListener(a,EVENT_ZOOM,r.zoom,{once:!0}),!1===dispatchEvent(a,EVENT_ZOOM,{ratio:e,oldRatio:_,originalEvent:i}))return this;if(this.zooming=!0,i){var C=getOffset(this.viewer),x=s&&Object.keys(s).length>0?getPointersCenter(s):{pageX:i.pageX,pageY:i.pageY};d.x-=w*((x.pageX-C.left-u)/p),d.y-=k*((x.pageY-C.top-c)/m)}else isPlainObject(n)&&isNumber(n.x)&&isNumber(n.y)?(d.x-=w*((n.x-u)/p),d.y-=k*((n.y-c)/m)):(d.x-=w/2,d.y-=k/2);d.left=d.x,d.top=d.y,d.width=y,d.height=b,d.oldRatio=_,d.ratio=e,this.renderImage((function(){t.zooming=!1,isFunction$1(r.zoomed)&&addListener(a,EVENT_ZOOMED,r.zoomed,{once:!0}),dispatchEvent(a,EVENT_ZOOMED,{ratio:e,oldRatio:_,originalEvent:i},{cancelable:!1})})),o&&this.tooltip()}return this},play:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isShown||this.played)return this;var o=this.element,n=this.options;if(isFunction$1(n.play)&&addListener(o,EVENT_PLAY,n.play,{once:!0}),!1===dispatchEvent(o,EVENT_PLAY))return this;var i=this.player,l=this.loadImage.bind(this),a=[],r=0,s=0;if(this.played=!0,this.onLoadWhenPlay=l,t&&this.requestFullscreen(t),addClass(i,CLASS_SHOW),forEach(this.items,(function(e,t){var o=e.querySelector("img"),d=document.createElement("img");d.src=getData(o,"originalUrl"),d.alt=o.getAttribute("alt"),d.referrerPolicy=o.referrerPolicy,r+=1,addClass(d,CLASS_FADE),toggleClass(d,CLASS_TRANSITION,n.transition),hasClass(e,CLASS_ACTIVE)&&(addClass(d,CLASS_IN),s=t),a.push(d),addListener(d,EVENT_LOAD,l,{once:!0}),i.appendChild(d)})),isNumber(n.interval)&&n.interval>0){var d=function t(){clearTimeout(e.playing.timeout),removeClass(a[s],CLASS_IN),addClass(a[s=(s-=1)>=0?s:r-1],CLASS_IN),e.playing.timeout=setTimeout(t,n.interval)},u=function t(){clearTimeout(e.playing.timeout),removeClass(a[s],CLASS_IN),addClass(a[s=(s+=1)<r?s:0],CLASS_IN),e.playing.timeout=setTimeout(t,n.interval)};r>1&&(this.playing={prev:d,next:u,timeout:setTimeout(u,n.interval)})}return this},stop:function(){var e=this;if(!this.played)return this;var t=this.element,o=this.options;if(isFunction$1(o.stop)&&addListener(t,EVENT_STOP,o.stop,{once:!0}),!1===dispatchEvent(t,EVENT_STOP))return this;var n=this.player;return clearTimeout(this.playing.timeout),this.playing=!1,this.played=!1,forEach(n.getElementsByTagName("img"),(function(t){removeListener(t,EVENT_LOAD,e.onLoadWhenPlay)})),removeClass(n,CLASS_SHOW),n.innerHTML="",this.exitFullscreen(),this},full:function(){var e=this,t=this.options,o=this.viewer,n=this.image,i=this.list;return!this.isShown||this.played||this.fulled||!t.inline||(this.fulled=!0,this.open(),addClass(this.button,CLASS_FULLSCREEN_EXIT),t.transition&&(removeClass(i,CLASS_TRANSITION),this.viewed&&removeClass(n,CLASS_TRANSITION)),addClass(o,CLASS_FIXED),o.setAttribute("role","dialog"),o.setAttribute("aria-labelledby",this.title.id),o.setAttribute("aria-modal",!0),o.removeAttribute("style"),setStyle(o,{zIndex:t.zIndex}),t.focus&&this.enforceFocus(),this.initContainer(),this.viewerData=assign({},this.containerData),this.renderList(),this.viewed&&this.initImage((function(){e.renderImage((function(){t.transition&&setTimeout((function(){addClass(n,CLASS_TRANSITION),addClass(i,CLASS_TRANSITION)}),0)}))}))),this},exit:function(){var e=this,t=this.options,o=this.viewer,n=this.image,i=this.list;return this.isShown&&!this.played&&this.fulled&&t.inline?(this.fulled=!1,this.close(),removeClass(this.button,CLASS_FULLSCREEN_EXIT),t.transition&&(removeClass(i,CLASS_TRANSITION),this.viewed&&removeClass(n,CLASS_TRANSITION)),t.focus&&this.clearEnforceFocus(),o.removeAttribute("role"),o.removeAttribute("aria-labelledby"),o.removeAttribute("aria-modal"),removeClass(o,CLASS_FIXED),setStyle(o,{zIndex:t.zIndexInline}),this.viewerData=assign({},this.parentData),this.renderViewer(),this.renderList(),this.viewed&&this.initImage((function(){e.renderImage((function(){t.transition&&setTimeout((function(){addClass(n,CLASS_TRANSITION),addClass(i,CLASS_TRANSITION)}),0)}))})),this):this},tooltip:function(){var e=this,t=this.options,o=this.tooltipBox,n=this.imageData;return this.viewed&&!this.played&&t.tooltip?(o.textContent="".concat(Math.round(100*n.ratio),"%"),this.tooltipping?clearTimeout(this.tooltipping):t.transition?(this.fading&&dispatchEvent(o,EVENT_TRANSITION_END),addClass(o,CLASS_SHOW),addClass(o,CLASS_FADE),addClass(o,CLASS_TRANSITION),o.removeAttribute("aria-hidden"),o.initialOffsetWidth=o.offsetWidth,addClass(o,CLASS_IN)):(addClass(o,CLASS_SHOW),o.removeAttribute("aria-hidden")),this.tooltipping=setTimeout((function(){t.transition?(addListener(o,EVENT_TRANSITION_END,(function(){removeClass(o,CLASS_SHOW),removeClass(o,CLASS_FADE),removeClass(o,CLASS_TRANSITION),o.setAttribute("aria-hidden",!0),e.fading=!1}),{once:!0}),removeClass(o,CLASS_IN),e.fading=!0):(removeClass(o,CLASS_SHOW),o.setAttribute("aria-hidden",!0)),e.tooltipping=!1}),1e3),this):this},toggle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 1===this.imageData.ratio?this.zoomTo(this.imageData.oldRatio,!0,null,e):this.zoomTo(1,!0,null,e),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=assign({},this.initialImageData),this.renderImage()),this},update:function(){var e=this,t=this.element,o=this.options,n=this.isImg;if(n&&!t.parentNode)return this.destroy();var i=[];if(forEach(n?[t]:t.querySelectorAll("img"),(function(t){isFunction$1(o.filter)?o.filter.call(e,t)&&i.push(t):e.getImageURL(t)&&i.push(t)})),!i.length)return this;if(this.images=i,this.length=i.length,this.ready){var l=[];if(forEach(this.items,(function(e,t){var o=e.querySelector("img"),n=i[t];n&&o&&n.src===o.src&&n.alt===o.alt||l.push(t)})),setStyle(this.list,{width:"auto"}),this.initList(),this.isShown)if(this.length){if(this.viewed){var a=l.indexOf(this.index);if(a>=0)this.viewed=!1,this.view(Math.max(Math.min(this.index-a,this.length-1),0));else{var r=this.items[this.index];addClass(r,CLASS_ACTIVE),r.setAttribute("aria-selected",!0)}}}else this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""}else this.build();return this},destroy:function(){var e=this.element,t=this.options;return e[NAMESPACE]?(this.destroyed=!0,this.ready?(this.played&&this.stop(),t.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):t.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),t.inline||removeListener(e,EVENT_CLICK,this.onStart),e[NAMESPACE]=void 0,this):this}},others={getImageURL:function(e){var t=this.options.url;return t=isString(t)?e.getAttribute(t):isFunction$1(t)?t.call(this,e):""},enforceFocus:function(){var e=this;this.clearEnforceFocus(),addListener(document,EVENT_FOCUSIN,this.onFocusin=function(t){var o=e.viewer,n=t.target;if(n!==document&&n!==o&&!o.contains(n)){for(;n;){if(null!==n.getAttribute("tabindex")||"true"===n.getAttribute("aria-modal"))return;n=n.parentElement}o.focus()}})},clearEnforceFocus:function(){this.onFocusin&&(removeListener(document,EVENT_FOCUSIN,this.onFocusin),this.onFocusin=null)},open:function(){var e=this.body;addClass(e,CLASS_OPEN),this.scrollbarWidth>0&&(e.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyComputedPaddingRight)||0),"px"))},close:function(){var e=this.body;removeClass(e,CLASS_OPEN),this.scrollbarWidth>0&&(e.style.paddingRight=this.initialBodyPaddingRight)},shown:function(){var e=this.element,t=this.options,o=this.viewer;this.fulled=!0,this.isShown=!0,this.render(),this.bind(),this.showing=!1,t.focus&&(o.focus(),this.enforceFocus()),isFunction$1(t.shown)&&addListener(e,EVENT_SHOWN,t.shown,{once:!0}),!1!==dispatchEvent(e,EVENT_SHOWN)&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var e=this.element,t=this.options,o=this.viewer;t.fucus&&this.clearEnforceFocus(),this.close(),this.unbind(),addClass(o,CLASS_HIDE),o.removeAttribute("role"),o.removeAttribute("aria-labelledby"),o.removeAttribute("aria-modal"),o.setAttribute("aria-hidden",!0),this.resetList(),this.resetImage(),this.fulled=!1,this.viewed=!1,this.isShown=!1,this.hiding=!1,this.destroyed||(isFunction$1(t.hidden)&&addListener(e,EVENT_HIDDEN,t.hidden,{once:!0}),dispatchEvent(e,EVENT_HIDDEN,null,{cancelable:!1}))},requestFullscreen:function(e){var t=this.element.ownerDocument;if(this.fulled&&!(t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement)){var o=t.documentElement;o.requestFullscreen?isPlainObject(e)?o.requestFullscreen(e):o.requestFullscreen():o.webkitRequestFullscreen?o.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):o.mozRequestFullScreen?o.mozRequestFullScreen():o.msRequestFullscreen&&o.msRequestFullscreen()}},exitFullscreen:function(){var e=this.element.ownerDocument;this.fulled&&(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())},change:function(e){var t=this.options,o=this.pointers,n=o[Object.keys(o)[0]];if(n){var i=n.endX-n.startX,l=n.endY-n.startY;switch(this.action){case ACTION_MOVE:0===i&&0===l||(this.pointerMoved=!0,this.move(i,l,e));break;case ACTION_ZOOM:this.zoom(getMaxZoomRatio(o),!1,null,e);break;case ACTION_SWITCH:this.action="switched";var a=Math.abs(i);a>1&&a>Math.abs(l)&&(this.pointers={},i>1?this.prev(t.loop):i<-1&&this.next(t.loop))}forEach(o,(function(e){e.startX=e.endX,e.startY=e.endY}))}},isSwitchable:function(){var e=this.imageData,t=this.viewerData;return this.length>1&&e.x>=0&&e.y>=0&&e.width<=t.width&&e.height<=t.height}},AnotherViewer=WINDOW.Viewer,getUniqueID=(id=-1,function(){return id+=1}),id,Viewer$1=function(){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck(this,e),!t||1!==t.nodeType)throw new Error("The first argument is required and must be an element.");this.element=t,this.options=assign({},DEFAULTS,isPlainObject(o)&&o),this.action=!1,this.fading=!1,this.fulled=!1,this.hiding=!1,this.imageClicked=!1,this.imageData={},this.index=this.options.initialViewIndex,this.isImg=!1,this.isShown=!1,this.length=0,this.moving=!1,this.played=!1,this.playing=!1,this.pointers={},this.ready=!1,this.rotating=!1,this.scaling=!1,this.showing=!1,this.timeout=!1,this.tooltipping=!1,this.viewed=!1,this.viewing=!1,this.wheeling=!1,this.zooming=!1,this.pointerMoved=!1,this.id=getUniqueID(),this.init()}return _createClass(e,[{key:"init",value:function(){var e=this,t=this.element,o=this.options;if(!t[NAMESPACE]){t[NAMESPACE]=this,o.focus&&!o.keyboard&&(o.focus=!1);var n="img"===t.localName,i=[];if(forEach(n?[t]:t.querySelectorAll("img"),(function(t){isFunction$1(o.filter)?o.filter.call(e,t)&&i.push(t):e.getImageURL(t)&&i.push(t)})),this.isImg=n,this.length=i.length,this.images=i,this.initBody(),isUndefined(document.createElement(NAMESPACE).style.transition)&&(o.transition=!1),o.inline){var l=0,a=function(){var t;(l+=1)===e.length&&(e.initializing=!1,e.delaying={abort:function(){clearTimeout(t)}},t=setTimeout((function(){e.delaying=!1,e.build()}),0))};this.initializing={abort:function(){forEach(i,(function(e){e.complete||(removeListener(e,EVENT_LOAD,a),removeListener(e,EVENT_ERROR,a))}))}},forEach(i,(function(e){var t,o;e.complete?a():(addListener(e,EVENT_LOAD,t=function(){removeListener(e,EVENT_ERROR,o),a()},{once:!0}),addListener(e,EVENT_ERROR,o=function(){removeListener(e,EVENT_LOAD,t),a()},{once:!0}))}))}else addListener(t,EVENT_CLICK,this.onStart=function(t){var n=t.target;"img"!==n.localName||isFunction$1(o.filter)&&!o.filter.call(e,n)||e.view(e.images.indexOf(n))})}}},{key:"build",value:function(){if(!this.ready){var e=this.element,t=this.options,o=e.parentNode,n=document.createElement("div");n.innerHTML=TEMPLATE;var i=n.querySelector(".".concat(NAMESPACE,"-container")),l=i.querySelector(".".concat(NAMESPACE,"-title")),a=i.querySelector(".".concat(NAMESPACE,"-toolbar")),r=i.querySelector(".".concat(NAMESPACE,"-navbar")),s=i.querySelector(".".concat(NAMESPACE,"-button")),d=i.querySelector(".".concat(NAMESPACE,"-canvas"));if(this.parent=o,this.viewer=i,this.title=l,this.toolbar=a,this.navbar=r,this.button=s,this.canvas=d,this.footer=i.querySelector(".".concat(NAMESPACE,"-footer")),this.tooltipBox=i.querySelector(".".concat(NAMESPACE,"-tooltip")),this.player=i.querySelector(".".concat(NAMESPACE,"-player")),this.list=i.querySelector(".".concat(NAMESPACE,"-list")),i.id="".concat(NAMESPACE).concat(this.id),l.id="".concat(NAMESPACE,"Title").concat(this.id),addClass(l,t.title?getResponsiveClass(Array.isArray(t.title)?t.title[0]:t.title):CLASS_HIDE),addClass(r,t.navbar?getResponsiveClass(t.navbar):CLASS_HIDE),toggleClass(s,CLASS_HIDE,!t.button),t.keyboard&&s.setAttribute("tabindex",0),t.backdrop&&(addClass(i,"".concat(NAMESPACE,"-backdrop")),t.inline||"static"===t.backdrop||setData(d,DATA_ACTION,"hide")),isString(t.className)&&t.className&&t.className.split(REGEXP_SPACES).forEach((function(e){addClass(i,e)})),t.toolbar){var u=document.createElement("ul"),c=isPlainObject(t.toolbar),p=BUTTONS.slice(0,3),m=BUTTONS.slice(7,9),h=BUTTONS.slice(9);c||addClass(a,getResponsiveClass(t.toolbar)),forEach(c?t.toolbar:BUTTONS,(function(e,o){var n=c&&isPlainObject(e),i=c?hyphenate(o):e,l=n&&!isUndefined(e.show)?e.show:e;if(l&&(t.zoomable||-1===p.indexOf(i))&&(t.rotatable||-1===m.indexOf(i))&&(t.scalable||-1===h.indexOf(i))){var a=n&&!isUndefined(e.size)?e.size:e,r=n&&!isUndefined(e.click)?e.click:e,s=document.createElement("li");t.keyboard&&s.setAttribute("tabindex",0),s.setAttribute("role","button"),addClass(s,"".concat(NAMESPACE,"-").concat(i)),isFunction$1(r)||setData(s,DATA_ACTION,i),isNumber(l)&&addClass(s,getResponsiveClass(l)),-1!==["small","large"].indexOf(a)?addClass(s,"".concat(NAMESPACE,"-").concat(a)):"play"===i&&addClass(s,"".concat(NAMESPACE,"-large")),isFunction$1(r)&&addListener(s,EVENT_CLICK,r),u.appendChild(s)}})),a.appendChild(u)}else addClass(a,CLASS_HIDE);if(!t.rotatable){var f=a.querySelectorAll('li[class*="rotate"]');addClass(f,CLASS_INVISIBLE),forEach(f,(function(e){a.appendChild(e)}))}if(t.inline)addClass(s,CLASS_FULLSCREEN),setStyle(i,{zIndex:t.zIndexInline}),"static"===window.getComputedStyle(o).position&&setStyle(o,{position:"relative"}),o.insertBefore(i,e.nextSibling);else{addClass(s,CLASS_CLOSE),addClass(i,CLASS_FIXED),addClass(i,CLASS_FADE),addClass(i,CLASS_HIDE),setStyle(i,{zIndex:t.zIndex});var v=t.container;isString(v)&&(v=e.ownerDocument.querySelector(v)),v||(v=this.body),v.appendChild(i)}t.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,isFunction$1(t.ready)&&addListener(e,EVENT_READY,t.ready,{once:!0}),!1!==dispatchEvent(e,EVENT_READY)?this.ready&&t.inline&&this.view(this.index):this.ready=!1}}}],[{key:"noConflict",value:function(){return window.Viewer=AnotherViewer,e}},{key:"setDefaults",value:function(e){assign(DEFAULTS,isPlainObject(e)&&e)}}]),e}();assign(Viewer$1.prototype,render,events,handlers,methods,others);var __extends$3=globalThis&&globalThis.__extends||(extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),extendStatics,QiniuErrorName,QiniuErrorName2;QiniuErrorName2=QiniuErrorName||(QiniuErrorName={}),QiniuErrorName2.InvalidFile="InvalidFile",QiniuErrorName2.InvalidToken="InvalidToken",QiniuErrorName2.InvalidMetadata="InvalidMetadata",QiniuErrorName2.InvalidChunkSize="InvalidChunkSize",QiniuErrorName2.InvalidCustomVars="InvalidCustomVars",QiniuErrorName2.NotAvailableUploadHost="NotAvailableUploadHost",QiniuErrorName2.ReadCacheFailed="ReadCacheFailed",QiniuErrorName2.InvalidCacheData="InvalidCacheData",QiniuErrorName2.WriteCacheFailed="WriteCacheFailed",QiniuErrorName2.RemoveCacheFailed="RemoveCacheFailed",QiniuErrorName2.GetCanvasContextFailed="GetCanvasContextFailed",QiniuErrorName2.UnsupportedFileType="UnsupportedFileType",QiniuErrorName2.FileReaderReadFailed="FileReaderReadFailed",QiniuErrorName2.NotAvailableXMLHttpRequest="NotAvailableXMLHttpRequest",QiniuErrorName2.InvalidProgressEventTarget="InvalidProgressEventTarget",QiniuErrorName2.RequestError="RequestError";var QiniuError=function(e,t){this.name=e,this.message=t,this.stack=(new Error).stack},QiniuRequestError=function(e){function t(t,o,n,i){var l=e.call(this,QiniuErrorName.RequestError,n)||this;return l.code=t,l.reqId=o,l.isRequestError=!0,l.data=i,l}return __extends$3(t,e),t}(QiniuError),QiniuNetworkError=function(e){function t(t,o){return void 0===o&&(o=""),e.call(this,0,o,t)||this}return __extends$3(t,e),t}(QiniuRequestError),Pool=function(){function e(e,t){this.runTask=e,this.limit=t,this.aborted=!1,this.queue=[],this.processing=[]}return e.prototype.enqueue=function(e){var t=this;return new Promise((function(o,n){t.queue.push({task:e,resolve:o,reject:n}),t.check()}))},e.prototype.run=function(e){var t=this;this.queue=this.queue.filter((function(t){return t!==e})),this.processing.push(e),this.runTask(e.task).then((function(){t.processing=t.processing.filter((function(t){return t!==e})),e.resolve(),t.check()}),(function(t){return e.reject(t)}))},e.prototype.check=function(){var e=this;if(!this.aborted){var t=this.processing.length,o=this.limit-t;this.queue.slice(0,o).forEach((function(t){e.run(t)}))}},e.prototype.abort=function(){this.queue=[],this.aborted=!0},e}(),__extends$2=globalThis&&globalThis.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),__assign$6=globalThis&&globalThis.__assign||function(){return __assign$6=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$6.apply(this,arguments)},Subscription=function(){function e(){this.closed=!1}return e.prototype.unsubscribe=function(){this.closed||(this.closed=!0,this._unsubscribe&&this._unsubscribe())},e.prototype.add=function(e){this._unsubscribe=e},e}(),Subscriber=function(e){function t(t,o,n){var i=e.call(this)||this;return i.isStopped=!1,i.destination=t&&"object"==typeof t?t:__assign$6(__assign$6(__assign$6({},t&&{next:t}),o&&{error:o}),n&&{complete:n}),i}return __extends$2(t,e),t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype.next=function(e){!this.isStopped&&this.destination.next&&this.destination.next(e)},t.prototype.error=function(e){!this.isStopped&&this.destination.error&&(this.isStopped=!0,this.destination.error(e))},t.prototype.complete=function(e){!this.isStopped&&this.destination.complete&&(this.isStopped=!0,this.destination.complete(e))},t}(Subscription),Observable=function(){function e(e){this._subscribe=e}return e.prototype.subscribe=function(e,t,o){var n=new Subscriber(e,t,o);return n.add(this._subscribe(n)),n},e}();function utf8Encode(e){if(null==e)return"";var t,o,n,i=e+"",l="";t=o=0,n=i.length;for(var a=0;a<n;a++){var r=i.charCodeAt(a),s=null;if(r<128)o++;else if(r>127&&r<2048)s=String.fromCharCode(r>>6|192,63&r|128);else if((63488&r^55296)>0)s=String.fromCharCode(r>>12|224,r>>6&63|128,63&r|128);else{if((64512&r^55296)>0)throw new RangeError("Unmatched trail surrogate at "+a);var d=i.charCodeAt(++a);if((64512&d^56320)>0)throw new RangeError("Unmatched lead surrogate at "+(a-1));r=((1023&r)<<10)+(1023&d)+65536,s=String.fromCharCode(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}null!==s&&(o>t&&(l+=i.slice(t,o)),l+=s,t=o=a+1)}return o>t&&(l+=i.slice(t,n)),l}function utf8Decode(e){var t=[],o=0,n=0,i=0;for(e+="";o<e.length;){i=0,(n=255&e.charCodeAt(o))<=191?(n&=127,i=1):n<=223?(n&=31,i=2):n<=239?(n&=15,i=3):(n&=7,i=4);for(var l=1;l<i;++l)n=n<<6|63&e.charCodeAt(l+o);4===i?(n-=65536,t.push(String.fromCharCode(55296|n>>10&1023)),t.push(String.fromCharCode(56320|1023&n))):t.push(String.fromCharCode(n)),o+=i}return t.join("")}function base64Encode(e){var t,o,n,i,l,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=0,s=0,d="",u=[];if(!e)return e;e=utf8Encode(e+"");do{t=(l=e.charCodeAt(r++)<<16|e.charCodeAt(r++)<<8|e.charCodeAt(r++))>>18&63,o=l>>12&63,n=l>>6&63,i=63&l,u[s++]=a.charAt(t)+a.charAt(o)+a.charAt(n)+a.charAt(i)}while(r<e.length);switch(d=u.join(""),e.length%3){case 1:d=d.slice(0,-2)+"==";break;case 2:d=d.slice(0,-1)+"="}return d}function base64Decode(e){var t,o,n,i,l,a,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=0,d=0,u=[];if(!e)return e;e+="";do{t=(a=r.indexOf(e.charAt(s++))<<18|r.indexOf(e.charAt(s++))<<12|(i=r.indexOf(e.charAt(s++)))<<6|(l=r.indexOf(e.charAt(s++))))>>16&255,o=a>>8&255,n=255&a,u[d++]=64===i?String.fromCharCode(t):64===l?String.fromCharCode(t,o):String.fromCharCode(t,o,n)}while(s<e.length);return utf8Decode(u.join(""))}function urlSafeBase64Encode(e){return(e=base64Encode(e)).replace(/\//g,"_").replace(/\+/g,"-")}function urlSafeBase64Decode(e){return base64Decode(e=e.replace(/_/g,"/").replace(/-/g,"+"))}var sparkMd5={exports:{}};!function(e,t){e.exports=function(e){var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function o(e,t){var o=e[0],n=e[1],i=e[2],l=e[3];n=((n+=((i=((i+=((l=((l+=((o=((o+=(n&i|~n&l)+t[0]-680876936|0)<<7|o>>>25)+n|0)&n|~o&i)+t[1]-389564586|0)<<12|l>>>20)+o|0)&o|~l&n)+t[2]+606105819|0)<<17|i>>>15)+l|0)&l|~i&o)+t[3]-1044525330|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((l=((l+=((o=((o+=(n&i|~n&l)+t[4]-176418897|0)<<7|o>>>25)+n|0)&n|~o&i)+t[5]+1200080426|0)<<12|l>>>20)+o|0)&o|~l&n)+t[6]-1473231341|0)<<17|i>>>15)+l|0)&l|~i&o)+t[7]-45705983|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((l=((l+=((o=((o+=(n&i|~n&l)+t[8]+1770035416|0)<<7|o>>>25)+n|0)&n|~o&i)+t[9]-1958414417|0)<<12|l>>>20)+o|0)&o|~l&n)+t[10]-42063|0)<<17|i>>>15)+l|0)&l|~i&o)+t[11]-1990404162|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((l=((l+=((o=((o+=(n&i|~n&l)+t[12]+1804603682|0)<<7|o>>>25)+n|0)&n|~o&i)+t[13]-40341101|0)<<12|l>>>20)+o|0)&o|~l&n)+t[14]-1502002290|0)<<17|i>>>15)+l|0)&l|~i&o)+t[15]+1236535329|0)<<22|n>>>10)+i|0,n=((n+=((i=((i+=((l=((l+=((o=((o+=(n&l|i&~l)+t[1]-165796510|0)<<5|o>>>27)+n|0)&i|n&~i)+t[6]-1069501632|0)<<9|l>>>23)+o|0)&n|o&~n)+t[11]+643717713|0)<<14|i>>>18)+l|0)&o|l&~o)+t[0]-373897302|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((l=((l+=((o=((o+=(n&l|i&~l)+t[5]-701558691|0)<<5|o>>>27)+n|0)&i|n&~i)+t[10]+38016083|0)<<9|l>>>23)+o|0)&n|o&~n)+t[15]-660478335|0)<<14|i>>>18)+l|0)&o|l&~o)+t[4]-405537848|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((l=((l+=((o=((o+=(n&l|i&~l)+t[9]+568446438|0)<<5|o>>>27)+n|0)&i|n&~i)+t[14]-1019803690|0)<<9|l>>>23)+o|0)&n|o&~n)+t[3]-187363961|0)<<14|i>>>18)+l|0)&o|l&~o)+t[8]+1163531501|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((l=((l+=((o=((o+=(n&l|i&~l)+t[13]-1444681467|0)<<5|o>>>27)+n|0)&i|n&~i)+t[2]-51403784|0)<<9|l>>>23)+o|0)&n|o&~n)+t[7]+1735328473|0)<<14|i>>>18)+l|0)&o|l&~o)+t[12]-1926607734|0)<<20|n>>>12)+i|0,n=((n+=((i=((i+=((l=((l+=((o=((o+=(n^i^l)+t[5]-378558|0)<<4|o>>>28)+n|0)^n^i)+t[8]-2022574463|0)<<11|l>>>21)+o|0)^o^n)+t[11]+1839030562|0)<<16|i>>>16)+l|0)^l^o)+t[14]-35309556|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((l=((l+=((o=((o+=(n^i^l)+t[1]-1530992060|0)<<4|o>>>28)+n|0)^n^i)+t[4]+1272893353|0)<<11|l>>>21)+o|0)^o^n)+t[7]-155497632|0)<<16|i>>>16)+l|0)^l^o)+t[10]-1094730640|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((l=((l+=((o=((o+=(n^i^l)+t[13]+681279174|0)<<4|o>>>28)+n|0)^n^i)+t[0]-358537222|0)<<11|l>>>21)+o|0)^o^n)+t[3]-722521979|0)<<16|i>>>16)+l|0)^l^o)+t[6]+76029189|0)<<23|n>>>9)+i|0,n=((n+=((i=((i+=((l=((l+=((o=((o+=(n^i^l)+t[9]-640364487|0)<<4|o>>>28)+n|0)^n^i)+t[12]-421815835|0)<<11|l>>>21)+o|0)^o^n)+t[15]+530742520|0)<<16|i>>>16)+l|0)^l^o)+t[2]-995338651|0)<<23|n>>>9)+i|0,n=((n+=((l=((l+=(n^((o=((o+=(i^(n|~l))+t[0]-198630844|0)<<6|o>>>26)+n|0)|~i))+t[7]+1126891415|0)<<10|l>>>22)+o|0)^((i=((i+=(o^(l|~n))+t[14]-1416354905|0)<<15|i>>>17)+l|0)|~o))+t[5]-57434055|0)<<21|n>>>11)+i|0,n=((n+=((l=((l+=(n^((o=((o+=(i^(n|~l))+t[12]+1700485571|0)<<6|o>>>26)+n|0)|~i))+t[3]-1894986606|0)<<10|l>>>22)+o|0)^((i=((i+=(o^(l|~n))+t[10]-1051523|0)<<15|i>>>17)+l|0)|~o))+t[1]-2054922799|0)<<21|n>>>11)+i|0,n=((n+=((l=((l+=(n^((o=((o+=(i^(n|~l))+t[8]+1873313359|0)<<6|o>>>26)+n|0)|~i))+t[15]-30611744|0)<<10|l>>>22)+o|0)^((i=((i+=(o^(l|~n))+t[6]-1560198380|0)<<15|i>>>17)+l|0)|~o))+t[13]+1309151649|0)<<21|n>>>11)+i|0,n=((n+=((l=((l+=(n^((o=((o+=(i^(n|~l))+t[4]-145523070|0)<<6|o>>>26)+n|0)|~i))+t[11]-1120210379|0)<<10|l>>>22)+o|0)^((i=((i+=(o^(l|~n))+t[2]+718787259|0)<<15|i>>>17)+l|0)|~o))+t[9]-343485551|0)<<21|n>>>11)+i|0,e[0]=o+e[0]|0,e[1]=n+e[1]|0,e[2]=i+e[2]|0,e[3]=l+e[3]|0}function n(e){var t,o=[];for(t=0;t<64;t+=4)o[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return o}function i(e){var t,o=[];for(t=0;t<64;t+=4)o[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return o}function l(e){var t,i,l,a,r,s,d=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=d;t+=64)o(u,n(e.substring(t-64,t)));for(i=(e=e.substring(t-64)).length,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1)l[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(l[t>>2]|=128<<(t%4<<3),t>55)for(o(u,l),t=0;t<16;t+=1)l[t]=0;return a=(a=8*d).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(a[2],16),s=parseInt(a[1],16)||0,l[14]=r,l[15]=s,o(u,l),u}function a(e){var t,n,l,a,r,s,d=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=d;t+=64)o(u,i(e.subarray(t-64,t)));for(n=(e=t-64<d?e.subarray(t-64):new Uint8Array(0)).length,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)l[t>>2]|=e[t]<<(t%4<<3);if(l[t>>2]|=128<<(t%4<<3),t>55)for(o(u,l),t=0;t<16;t+=1)l[t]=0;return a=(a=8*d).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(a[2],16),s=parseInt(a[1],16)||0,l[14]=r,l[15]=s,o(u,l),u}function r(e){var o,n="";for(o=0;o<4;o+=1)n+=t[e>>8*o+4&15]+t[e>>8*o&15];return n}function s(e){var t;for(t=0;t<e.length;t+=1)e[t]=r(e[t]);return e.join("")}function d(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function u(e,t){var o,n=e.length,i=new ArrayBuffer(n),l=new Uint8Array(i);for(o=0;o<n;o+=1)l[o]=e.charCodeAt(o);return t?l:i}function c(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function p(e,t,o){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e)),n.set(new Uint8Array(t),e.byteLength),o?n:n.buffer}function m(e){var t,o=[],n=e.length;for(t=0;t<n-1;t+=2)o.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,o)}function h(){this.reset()}return s(l("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(o,n){var i,l,a,r,s=this.byteLength,d=t(o,s),u=s;return n!==e&&(u=t(n,s)),d>u?new ArrayBuffer(0):(i=u-d,l=new ArrayBuffer(i),a=new Uint8Array(l),r=new Uint8Array(this,d,i),a.set(r),l)}}(),h.prototype.append=function(e){return this.appendBinary(d(e)),this},h.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,i=this._buff.length;for(t=64;t<=i;t+=64)o(this._hash,n(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},h.prototype.end=function(e){var t,o,n=this._buff,i=n.length,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)l[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(l,i),o=s(this._hash),e&&(o=m(o)),this.reset(),o},h.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},h.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},h.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},h.prototype._finish=function(e,t){var n,i,l,a=t;if(e[a>>2]|=128<<(a%4<<3),a>55)for(o(this._hash,e),a=0;a<16;a+=1)e[a]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(n[2],16),l=parseInt(n[1],16)||0,e[14]=i,e[15]=l,o(this._hash,e)},h.hash=function(e,t){return h.hashBinary(d(e),t)},h.hashBinary=function(e,t){var o=s(l(e));return t?m(o):o},h.ArrayBuffer=function(){this.reset()},h.ArrayBuffer.prototype.append=function(e){var t,n=p(this._buff.buffer,e,!0),l=n.length;for(this._length+=e.byteLength,t=64;t<=l;t+=64)o(this._hash,i(n.subarray(t-64,t)));return this._buff=t-64<l?new Uint8Array(n.buffer.slice(t-64)):new Uint8Array(0),this},h.ArrayBuffer.prototype.end=function(e){var t,o,n=this._buff,i=n.length,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)l[t>>2]|=n[t]<<(t%4<<3);return this._finish(l,i),o=s(this._hash),e&&(o=m(o)),this.reset(),o},h.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},h.ArrayBuffer.prototype.getState=function(){var e=h.prototype.getState.call(this);return e.buff=c(e.buff),e},h.ArrayBuffer.prototype.setState=function(e){return e.buff=u(e.buff,!0),h.prototype.setState.call(this,e)},h.ArrayBuffer.prototype.destroy=h.prototype.destroy,h.ArrayBuffer.prototype._finish=h.prototype._finish,h.ArrayBuffer.hash=function(e,t){var o=s(a(new Uint8Array(e)));return t?m(o):o},h}()}(sparkMd5);var SparkMD5=sparkMd5.exports,__assign$5=globalThis&&globalThis.__assign||function(){return __assign$5=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$5.apply(this,arguments)},__awaiter$6=globalThis&&globalThis.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,l){function a(e){try{s(n.next(e))}catch(t){l(t)}}function r(e){try{s(n.throw(e))}catch(t){l(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}s((n=n.apply(e,t||[])).next())}))},__generator$6=globalThis&&globalThis.__generator||function(e,t){var o,n,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(l){return function(r){return function(l){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(r){l=[6,r],n=0}finally{o=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,r])}}},MB=Math.pow(1024,2),_a;function getChunks(e,t){var o=t*MB;if(o>e.size)o=e.size;else for(;e.size>1e4*o;)o*=2;for(var n=[],i=Math.ceil(e.size/o),l=0;l<i;l++){var a=e.slice(o*l,l===i-1?e.size:o*(l+1));n.push(a)}return n}function isMetaDataValid(e){return Object.keys(e).every((function(e){return 0===e.indexOf("x-qn-meta-")}))}function isCustomVarsValid(e){return Object.keys(e).every((function(e){return 0===e.indexOf("x:")}))}function sum(e){return e.reduce((function(e,t){return e+t}),0)}function setLocalFileInfo(e,t,o){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){o.warn(new QiniuError(QiniuErrorName.WriteCacheFailed,"setLocalFileInfo failed: "+e))}}function createLocalKey(e,t,o){return"qiniu_js_sdk_upload_file_name_"+e+(null==t?"_":"_key_"+t+"_")+"size_"+o}function removeLocalFileInfo(e,t){try{localStorage.removeItem(e)}catch(o){t.warn(new QiniuError(QiniuErrorName.RemoveCacheFailed,"removeLocalFileInfo failed. key: "+e))}}function getLocalFileInfo(e,t){var o=null;try{o=localStorage.getItem(e)}catch(i){t.warn(new QiniuError(QiniuErrorName.ReadCacheFailed,"getLocalFileInfo failed. key: "+e))}if(null==o)return null;var n=null;try{n=JSON.parse(o)}catch(l){removeLocalFileInfo(e,t),t.warn(new QiniuError(QiniuErrorName.InvalidCacheData,"getLocalFileInfo failed to parse. key: "+e))}return n}function getAuthHeaders(e){return{Authorization:"UpToken "+e}}function getHeadersForChunkUpload(e){var t=getAuthHeaders(e);return __assign$5({"content-type":"application/octet-stream"},t)}function getHeadersForMkFile(e){var t=getAuthHeaders(e);return __assign$5({"content-type":"application/json"},t)}function createXHR(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)return new window.ActiveXObject("Microsoft.XMLHTTP");throw new QiniuError(QiniuErrorName.NotAvailableXMLHttpRequest,"the current environment does not support.")}function computeMd5(e){return __awaiter$6(this,void 0,void 0,(function(){var t,o;return __generator$6(this,(function(n){switch(n.label){case 0:return[4,readAsArrayBuffer(e)];case 1:return t=n.sent(),(o=new SparkMD5.ArrayBuffer).append(t),[2,o.end()]}}))}))}function readAsArrayBuffer(e){return new Promise((function(t,o){var n=new FileReader;n.onload=function(e){if(e.target){var n=e.target.result;t(n)}else o(new QiniuError(QiniuErrorName.InvalidProgressEventTarget,"progress event target is undefined"))},n.onerror=function(){o(new QiniuError(QiniuErrorName.FileReaderReadFailed,"fileReader read failed"))},n.readAsArrayBuffer(e)}))}function request$1(e,t){return new Promise((function(o,n){var i=createXHR();if(i.open(t.method,e),t.onCreate&&t.onCreate(i),t.headers){var l=t.headers;Object.keys(l).forEach((function(e){i.setRequestHeader(e,l[e])}))}i.upload.addEventListener("progress",(function(e){e.lengthComputable&&t.onProgress&&t.onProgress({loaded:e.loaded,total:e.total})})),i.onreadystatechange=function(){var e=i.responseText;if(4===i.readyState){var t=i.getResponseHeader("x-reqId")||"";if(0!==i.status)if(200===i.status)try{o({data:JSON.parse(e),reqId:t})}catch(r){n(r)}else{var l="xhr request failed, code: "+i.status;e&&(l+=" response: "+e);var a=void 0;try{a=JSON.parse(e)}catch(s){}n(new QiniuRequestError(i.status,t,l,a))}else n(new QiniuNetworkError("network error.",t))}},i.send(t.body)}))}function getPortFromUrl(e){if(e&&e.match){var t=e.match(/(^https?)/);if(!t)return"";var o=t[1];return(t=e.match(/^https?:\/\/([^:^/]*):(\d*)/))?t[2]:"http"===o?"80":"443"}return""}function getDomainFromUrl(e){if(e&&e.match){var t=e.match(/^https?:\/\/([^:^/]*)/);return t?t[1]:""}return""}function getPutPolicy(e){if(!e)throw new QiniuError(QiniuErrorName.InvalidToken,"invalid token.");var t=e.split(":");if(1===t.length)throw new QiniuError(QiniuErrorName.InvalidToken,"invalid token segments.");var o=t.length>3?t[1]:t[0];if(!o)throw new QiniuError(QiniuErrorName.InvalidToken,"missing assess key field.");var n=null;try{n=JSON.parse(urlSafeBase64Decode(t[t.length-1]))}catch(l){throw new QiniuError(QiniuErrorName.InvalidToken,"token parse failed.")}if(null==n)throw new QiniuError(QiniuErrorName.InvalidToken,"putPolicy is null.");if(null==n.scope)throw new QiniuError(QiniuErrorName.InvalidToken,"scope field is null.");var i=n.scope.split(":")[0];if(!i)throw new QiniuError(QiniuErrorName.InvalidToken,"resolve bucketName failed.");return{assessKey:o,bucketName:i,scope:n.scope}}var region={z0:"z0",z1:"z1",z2:"z2",na0:"na0",as0:"as0",cnEast2:"cn-east-2"},regionUphostMap=(_a={},_a[region.z0]={srcUphost:["up.qiniup.com"],cdnUphost:["upload.qiniup.com"]},_a[region.z1]={srcUphost:["up-z1.qiniup.com"],cdnUphost:["upload-z1.qiniup.com"]},_a[region.z2]={srcUphost:["up-z2.qiniup.com"],cdnUphost:["upload-z2.qiniup.com"]},_a[region.na0]={srcUphost:["up-na0.qiniup.com"],cdnUphost:["upload-na0.qiniup.com"]},_a[region.as0]={srcUphost:["up-as0.qiniup.com"],cdnUphost:["upload-as0.qiniup.com"]},_a[region.cnEast2]={srcUphost:["up-cn-east-2.qiniup.com"],cdnUphost:["upload-cn-east-2.qiniup.com"]},_a),stringifyPrimitive=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},encode=function(e,t,o,n){return t=t||"&",o=o||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(n){var i=encodeURIComponent(stringifyPrimitive(n))+o;return Array.isArray(e[n])?e[n].map((function(e){return i+encodeURIComponent(stringifyPrimitive(e))})).join(t):i+encodeURIComponent(stringifyPrimitive(e[n]))})).filter(Boolean).join(t):n?encodeURIComponent(stringifyPrimitive(n))+o+encodeURIComponent(stringifyPrimitive(e)):""},stringify;stringify=encode;var __assign$4=globalThis&&globalThis.__assign||function(){return __assign$4=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$4.apply(this,arguments)},__awaiter$5=globalThis&&globalThis.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,l){function a(e){try{s(n.next(e))}catch(t){l(t)}}function r(e){try{s(n.throw(e))}catch(t){l(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}s((n=n.apply(e,t||[])).next())}))},__generator$5=globalThis&&globalThis.__generator||function(e,t){var o,n,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(l){return function(r){return function(l){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(r){l=[6,r],n=0}finally{o=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,r])}}};function getUpHosts(e,t,o){return __awaiter$5(this,void 0,void 0,(function(){var n;return __generator$5(this,(function(i){return n=stringify({ak:e,bucket:t}),[2,request$1(o+"://api.qiniu.com/v2/query?"+n,{method:"GET"})]}))}))}function getBaseUrl(e,t,o){var n=o.url,i=o.id;return n+"/buckets/"+e+"/objects/"+(null!=t?urlSafeBase64Encode(t):"~")+"/uploads/"+i}function initUploadParts(e,t,o,n){return request$1(n+"/buckets/"+t+"/objects/"+(null!=o?urlSafeBase64Encode(o):"~")+"/uploads",{method:"POST",headers:getAuthHeaders(e)})}function uploadChunk(e,t,o,n,i){var l=getBaseUrl(getPutPolicy(e).bucketName,t,n)+"/"+o,a=getHeadersForChunkUpload(e);return i.md5&&(a["Content-MD5"]=i.md5),request$1(l,__assign$4(__assign$4({},i),{method:"PUT",headers:a}))}function uploadComplete(e,t,o,n){return request$1(getBaseUrl(getPutPolicy(e).bucketName,t,o),__assign$4(__assign$4({},n),{method:"POST",headers:getHeadersForMkFile(e)}))}function direct(e,t,o){return request$1(e,__assign$4({method:"POST",body:t},o))}var __assign$3=globalThis&&globalThis.__assign||function(){return __assign$3=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$3.apply(this,arguments)},__awaiter$4=globalThis&&globalThis.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,l){function a(e){try{s(n.next(e))}catch(t){l(t)}}function r(e){try{s(n.throw(e))}catch(t){l(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}s((n=n.apply(e,t||[])).next())}))},__generator$4=globalThis&&globalThis.__generator||function(e,t){var o,n,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(l){return function(r){return function(l){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(r){l=[6,r],n=0}finally{o=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,r])}}},__read$3=globalThis&&globalThis.__read||function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var n,i,l=o.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=l.next()).done;)a.push(n.value)}catch(r){i={error:r}}finally{try{n&&!n.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return a},__spread$3=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$3(arguments[t]));return e},DEFAULT_CHUNK_SIZE=4,FREEZE_CODE_LIST=[0,502,503,504,599],RETRY_CODE_LIST=__spread$3(FREEZE_CODE_LIST,[612]),GB=Math.pow(1024,3),Base=function(){function e(e,t,o,n){this.hostPool=o,this.logger=n,this.aborted=!1,this.retryCount=0,this.xhrList=[],this.config=e.config,n.info("config inited.",this.config),this.putExtra=__assign$3({fname:""},e.putExtra),n.info("putExtra inited.",this.putExtra),this.key=e.key,this.file=e.file,this.token=e.token,this.onData=t.onData,this.onError=t.onError,this.onComplete=t.onComplete;try{var i=getPutPolicy(this.token);this.bucketName=i.bucketName,this.assessKey=i.assessKey}catch(l){n.error("get putPolicy from token failed.",l),this.onError(l)}}return e.prototype.checkAndUpdateUploadHost=function(){return __awaiter$4(this,void 0,void 0,(function(){var e;return __generator$4(this,(function(t){switch(t.label){case 0:return this.logger.info("get available upload host."),[4,this.hostPool.getUp(this.assessKey,this.bucketName,this.config.upprotocol)];case 1:if(null==(e=t.sent()))throw new QiniuError(QiniuErrorName.NotAvailableUploadHost,"no available upload host.");return null!=this.uploadHost&&this.uploadHost.host!==e.host?this.logger.warn("host switches from "+this.uploadHost.host+" to "+e.host+"."):this.logger.info("use host "+e.host+"."),this.uploadHost=e,[2]}}))}))},e.prototype.checkAndUnfreezeHost=function(){this.logger.info("check unfreeze host."),null!=this.uploadHost&&this.uploadHost.isFrozen()&&(this.logger.warn(this.uploadHost.host+" will be unfrozen."),this.uploadHost.unfreeze())},e.prototype.checkAndFreezeHost=function(e){this.logger.info("check freeze host."),e instanceof QiniuRequestError&&null!=this.uploadHost&&FREEZE_CODE_LIST.includes(e.code)&&(this.logger.warn(this.uploadHost.host+" will be temporarily frozen."),this.uploadHost.freeze())},e.prototype.handleError=function(e){this.logger.error(e.message),this.onError(e)},e.prototype.putFile=function(){return __awaiter$4(this,void 0,void 0,(function(){var e,t,o;return __generator$4(this,(function(n){switch(n.label){case 0:if(this.aborted=!1,this.putExtra.fname||(this.logger.info("use file.name as fname."),this.putExtra.fname=this.file.name),this.file.size>1e4*GB)return this.handleError(new QiniuError(QiniuErrorName.InvalidFile,"file size exceed maximum value 10000G")),[2];if(this.putExtra.customVars&&!isCustomVarsValid(this.putExtra.customVars))return this.handleError(new QiniuError(QiniuErrorName.InvalidCustomVars,"customVars key should start width x:")),[2];if(this.putExtra.metadata&&!isMetaDataValid(this.putExtra.metadata))return this.handleError(new QiniuError(QiniuErrorName.InvalidMetadata,"metadata key should start with x-qn-meta-")),[2];n.label=1;case 1:return n.trys.push([1,4,,5]),this.uploadAt=(new Date).getTime(),[4,this.checkAndUpdateUploadHost()];case 2:return n.sent(),[4,this.run()];case 3:return e=n.sent(),this.onComplete(e.data),this.checkAndUnfreezeHost(),this.sendLog(e.reqId,200),[2];case 4:return t=n.sent(),this.aborted?(this.logger.warn("upload is aborted."),this.sendLog("",-2),[2]):(this.clear(),this.logger.error(t),t instanceof QiniuRequestError&&(this.sendLog(t.reqId,t.code),this.checkAndFreezeHost(t),o=++this.retryCount<=this.config.retryCount,RETRY_CODE_LIST.includes(t.code)&&o)?(this.logger.warn("error auto retry: "+this.retryCount+"/"+this.config.retryCount+"."),this.putFile(),[2]):(this.onError(t),[3,5]));case 5:return[2]}}))}))},e.prototype.clear=function(){this.xhrList.forEach((function(e){e.onreadystatechange=null,e.abort()})),this.xhrList=[],this.logger.info("cleanup uploading xhr.")},e.prototype.stop=function(){this.logger.info("aborted."),this.clear(),this.aborted=!0},e.prototype.addXhr=function(e){this.xhrList.push(e)},e.prototype.sendLog=function(e,t){var o,n;this.logger.report({code:t,reqId:e,remoteIp:"",upType:"jssdk-h5",size:this.file.size,time:Math.floor(this.uploadAt/1e3),port:getPortFromUrl(null===(o=this.uploadHost)||void 0===o?void 0:o.getUrl()),host:getDomainFromUrl(null===(n=this.uploadHost)||void 0===n?void 0:n.getUrl()),bytesSent:this.progress?this.progress.total.loaded:0,duration:Math.floor(((new Date).getTime()-this.uploadAt)/1e3)})},e.prototype.getProgressInfoItem=function(e,t,o){return __assign$3({size:t,loaded:e,percent:e/t*100},null==o?{}:{fromCache:o})},e}(),__extends$1=globalThis&&globalThis.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),__assign$2=globalThis&&globalThis.__assign||function(){return __assign$2=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$2.apply(this,arguments)},__awaiter$3=globalThis&&globalThis.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,l){function a(e){try{s(n.next(e))}catch(t){l(t)}}function r(e){try{s(n.throw(e))}catch(t){l(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}s((n=n.apply(e,t||[])).next())}))},__generator$3=globalThis&&globalThis.__generator||function(e,t){var o,n,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(l){return function(r){return function(l){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(r){l=[6,r],n=0}finally{o=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,r])}}};function isPositiveInteger(e){return/^[1-9]\d*$/.test(String(e))}var Resume=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$1(t,e),t.prototype.run=function(){return __awaiter$3(this,void 0,void 0,(function(){var e,t,o,n,i,l=this;return __generator$3(this,(function(a){switch(a.label){case 0:if(this.logger.info("start run Resume."),!this.config.chunkSize||!isPositiveInteger(this.config.chunkSize))throw new QiniuError(QiniuErrorName.InvalidChunkSize,"chunkSize must be a positive integer");if(this.config.chunkSize>1024)throw new QiniuError(QiniuErrorName.InvalidChunkSize,"chunkSize maximum value is 1024");return[4,this.initBeforeUploadChunks()];case 1:a.sent(),e=new Pool((function(t){return __awaiter$3(l,void 0,void 0,(function(){return __generator$3(this,(function(o){switch(o.label){case 0:if(this.aborted)throw e.abort(),new Error("pool is aborted");return[4,this.uploadChunk(t)];case 1:return o.sent(),[2]}}))}))}),this.config.concurrentRequestLimit),t=null,o=this.getLocalKey(),n=this.chunks.map((function(t,o){return e.enqueue({chunk:t,index:o})})),a.label=2;case 2:return a.trys.push([2,5,,6]),[4,Promise.all(n)];case 3:return a.sent(),[4,this.mkFileReq()];case 4:return t=a.sent(),[3,6];case 5:throw(i=a.sent())instanceof QiniuRequestError&&(612===i.code||400===i.code)&&removeLocalFileInfo(o,this.logger),i;case 6:return removeLocalFileInfo(o,this.logger),[2,t]}}))}))},t.prototype.uploadChunk=function(e){return __awaiter$3(this,void 0,void 0,(function(){var t,o,n,i,l,a,r,s,d,u=this;return __generator$3(this,(function(c){switch(c.label){case 0:return t=e.index,o=e.chunk,n=this.cachedUploadedList[t],this.logger.info("upload part "+t+", cache:",n),i=this.config.checkByMD5,l=function(){u.usedCacheList[t]=!0,u.updateChunkProgress(o.size,t),u.uploadedList[t]=n,u.updateLocalCache()},n&&!i?(l(),[2]):[4,computeMd5(o)];case 1:return a=c.sent(),this.logger.info("computed part md5.",a),n&&a===n.md5?(l(),[2]):(this.usedCacheList[t]=!1,r=function(e){u.updateChunkProgress(e.loaded,t)},s={body:o,md5:this.config.checkByServer?a:void 0,onProgress:r,onCreate:function(e){return u.addXhr(e)}},this.logger.info("part "+t+" start uploading."),[4,uploadChunk(this.token,this.key,e.index+1,this.getUploadInfo(),s)]);case 2:return d=c.sent(),this.logger.info("part "+t+" upload completed."),r({loaded:o.size,total:o.size}),this.uploadedList[t]={etag:d.data.etag,md5:d.data.md5,size:o.size},this.updateLocalCache(),[2]}}))}))},t.prototype.mkFileReq=function(){return __awaiter$3(this,void 0,void 0,(function(){var e,t,o=this;return __generator$3(this,(function(n){switch(n.label){case 0:return e=__assign$2(__assign$2(__assign$2({parts:this.uploadedList.map((function(e,t){return{etag:e.etag,partNumber:t+1}})),fname:this.putExtra.fname},this.putExtra.mimeType&&{mimeType:this.putExtra.mimeType}),this.putExtra.customVars&&{customVars:this.putExtra.customVars}),this.putExtra.metadata&&{metadata:this.putExtra.metadata}),this.logger.info("parts upload completed, make file.",e),[4,uploadComplete(this.token,this.key,this.getUploadInfo(),{onCreate:function(e){return o.addXhr(e)},body:JSON.stringify(e)})];case 1:return t=n.sent(),this.logger.info("finish Resume Progress."),this.updateMkFileProgress(1),[2,t]}}))}))},t.prototype.initBeforeUploadChunks=function(){return __awaiter$3(this,void 0,void 0,(function(){var e,t,o;return __generator$3(this,(function(n){switch(n.label){case 0:return this.uploadedList=[],this.usedCacheList=[],(e=getLocalFileInfo(this.getLocalKey(),this.logger))?[3,2]:(this.logger.info("init upload parts from api."),[4,initUploadParts(this.token,this.bucketName,this.key,this.uploadHost.getUrl())]);case 1:return t=n.sent(),this.logger.info("initd upload parts of id: "+t.data.uploadId+"."),this.uploadId=t.data.uploadId,this.cachedUploadedList=[],[3,3];case 2:o=["resume upload parts from local cache,","total "+e.data.length+" part,","id is "+e.id+"."],this.logger.info(o.join(" ")),this.cachedUploadedList=e.data,this.uploadId=e.id,n.label=3;case 3:return this.chunks=getChunks(this.file,this.config.chunkSize),this.loaded={mkFileProgress:0,chunks:this.chunks.map((function(e){return 0}))},this.notifyResumeProgress(),[2]}}))}))},t.prototype.getUploadInfo=function(){return{id:this.uploadId,url:this.uploadHost.getUrl()}},t.prototype.getLocalKey=function(){return createLocalKey(this.file.name,this.key,this.file.size)},t.prototype.updateLocalCache=function(){setLocalFileInfo(this.getLocalKey(),{id:this.uploadId,data:this.uploadedList},this.logger)},t.prototype.updateChunkProgress=function(e,t){this.loaded.chunks[t]=e,this.notifyResumeProgress()},t.prototype.updateMkFileProgress=function(e){this.loaded.mkFileProgress=e,this.notifyResumeProgress()},t.prototype.notifyResumeProgress=function(){var e=this;this.progress={total:this.getProgressInfoItem(sum(this.loaded.chunks)+this.loaded.mkFileProgress,this.file.size+1),chunks:this.chunks.map((function(t,o){var n=e.usedCacheList[o];return e.getProgressInfoItem(e.loaded.chunks[o],t.size,n)})),uploadInfo:{id:this.uploadId,url:this.uploadHost.getUrl()}},this.onData(this.progress)},t}(Base),__awaiter$2=globalThis&&globalThis.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,l){function a(e){try{s(n.next(e))}catch(t){l(t)}}function r(e){try{s(n.throw(e))}catch(t){l(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}s((n=n.apply(e,t||[])).next())}))},__generator$2=globalThis&&globalThis.__generator||function(e,t){var o,n,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(l){return function(r){return function(l){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(r){l=[6,r],n=0}finally{o=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,r])}}},CRC32=function(){function e(){this.crc=-1,this.table=this.makeTable()}return e.prototype.makeTable=function(){for(var e=new Array,t=0;t<256;t++){for(var o=t,n=0;n<8;n++)1&o?o=o>>>1^3988292384:o>>>=1;e[t]=o}return e},e.prototype.append=function(e){for(var t=this.crc,o=0;o<e.byteLength;o++)t=t>>>8^this.table[255&(t^e[o])];this.crc=t},e.prototype.compute=function(){return(-1^this.crc)>>>0},e.prototype.readAsUint8Array=function(e){return __awaiter$2(this,void 0,void 0,(function(){var t;return __generator$2(this,(function(o){switch(o.label){case 0:return"function"!=typeof e.arrayBuffer?[3,2]:(t=Uint8Array.bind,[4,e.arrayBuffer()]);case 1:return[2,new(t.apply(Uint8Array,[void 0,o.sent()]))];case 2:return[2,new Promise((function(t,o){var n=new FileReader;n.onload=function(){null!=n.result&&"string"!=typeof n.result?t(new Uint8Array(n.result)):o()},n.readAsArrayBuffer(e)}))]}}))}))},e.prototype.file=function(e){return __awaiter$2(this,void 0,void 0,(function(){var t,o,n,i,l,a;return __generator$2(this,(function(r){switch(r.label){case 0:return e.size<=MB?(t=this.append,[4,this.readAsUint8Array(e)]):[3,2];case 1:return t.apply(this,[r.sent()]),[2,this.compute()];case 2:o=Math.ceil(e.size/MB),n=0,r.label=3;case 3:return n<o?(i=n*MB,l=n===o-1?e.size:i+MB,[4,this.readAsUint8Array(e.slice(i,l))]):[3,6];case 4:a=r.sent(),this.append(new Uint8Array(a)),r.label=5;case 5:return n++,[3,3];case 6:return[2,this.compute()]}}))}))},e.file=function(t){return(new e).file(t)},e}(),__extends=globalThis&&globalThis.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),__awaiter$1=globalThis&&globalThis.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,l){function a(e){try{s(n.next(e))}catch(t){l(t)}}function r(e){try{s(n.throw(e))}catch(t){l(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}s((n=n.apply(e,t||[])).next())}))},__generator$1=globalThis&&globalThis.__generator||function(e,t){var o,n,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(l){return function(r){return function(l){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(r){l=[6,r],n=0}finally{o=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,r])}}},Direct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.run=function(){return __awaiter$1(this,void 0,void 0,(function(){var e,t,o,n,i,l=this;return __generator$1(this,(function(a){switch(a.label){case 0:return this.logger.info("start run Direct."),(e=new FormData).append("file",this.file),e.append("token",this.token),null!=this.key&&e.append("key",this.key),e.append("fname",this.putExtra.fname),this.config.checkByServer?[4,CRC32.file(this.file)]:[3,2];case 1:t=a.sent(),e.append("crc32",t.toString()),a.label=2;case 2:return this.putExtra.customVars&&(this.logger.info("init customVars."),o=this.putExtra.customVars,Object.keys(o).forEach((function(t){return e.append(t,o[t].toString())})),this.logger.info("customVars inited.")),this.putExtra.metadata&&(this.logger.info("init metadata."),n=this.putExtra.metadata,Object.keys(n).forEach((function(t){return e.append(t,n[t].toString())}))),this.logger.info("formData inited."),[4,direct(this.uploadHost.getUrl(),e,{onProgress:function(e){l.updateDirectProgress(e.loaded,e.total)},onCreate:function(e){return l.addXhr(e)}})];case 3:return i=a.sent(),this.logger.info("Direct progress finish."),this.finishDirectProgress(),[2,i]}}))}))},t.prototype.updateDirectProgress=function(e,t){this.progress={total:this.getProgressInfoItem(e,t+1)},this.onData(this.progress)},t.prototype.finishDirectProgress=function(){if(!this.progress)return this.logger.warn("progress is null."),this.progress={total:this.getProgressInfoItem(this.file.size,this.file.size)},void this.onData(this.progress);var e=this.progress.total;this.progress={total:this.getProgressInfoItem(e.loaded+1,e.size)},this.onData(this.progress)},t}(Base);function reportV3(e,t,o){void 0===o&&(o=3);var n=createXHR();n.open("POST","https://uplog.qbox.me/log/3"),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.setRequestHeader("Authorization",getAuthHeaders(e).Authorization),n.onreadystatechange=function(){4===n.readyState&&200!==n.status&&o>0&&reportV3(e,t,o-1)};var i=[t.code||"",t.reqId||"",t.host||"",t.remoteIp||"",t.port||"",t.duration||"",t.time||"",t.bytesSent||"",t.upType||"",t.size||""].join(",");n.send(i)}var __read$2=globalThis&&globalThis.__read||function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var n,i,l=o.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=l.next()).done;)a.push(n.value)}catch(r){i={error:r}}finally{try{n&&!n.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return a},__spread$2=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$2(arguments[t]));return e},Logger=function(){function e(t,o,n,i){void 0===o&&(o=!0),void 0===n&&(n="OFF"),void 0===i&&(i="UPLOAD"),this.token=t,this.disableReport=o,this.level=n,this.prefix=i,this.id=++e.id}return e.prototype.getPrintPrefix=function(e){return"Qiniu-JS-SDK ["+e+"]["+this.prefix+"#"+this.id+"]:"},e.prototype.report=function(e,t){if(!this.disableReport)try{reportV3(this.token,e,t)}catch(o){this.warn(o)}},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=["INFO"];o.includes(this.level)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=["INFO","WARN"];o.includes(this.level)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=["INFO","WARN","ERROR"];o.includes(this.level)},e.id=0,e}(),__awaiter=globalThis&&globalThis.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,l){function a(e){try{s(n.next(e))}catch(t){l(t)}}function r(e){try{s(n.throw(e))}catch(t){l(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,r)}s((n=n.apply(e,t||[])).next())}))},__generator=globalThis&&globalThis.__generator||function(e,t){var o,n,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function r(l){return function(r){return function(l){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(r){l=[6,r],n=0}finally{o=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,r])}}},__read$1=globalThis&&globalThis.__read||function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var n,i,l=o.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=l.next()).done;)a.push(n.value)}catch(r){i={error:r}}finally{try{n&&!n.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return a},__spread$1=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$1(arguments[t]));return e},unfreezeTimeMap=new Map,Host=function(){function e(e,t){this.host=e,this.protocol=t}return e.prototype.isFrozen=function(){var e=(new Date).getTime(),t=unfreezeTimeMap.get(this.host);return null!=t&&t>=e},e.prototype.freeze=function(e){void 0===e&&(e=20);var t=(new Date).getTime()+1e3*e;unfreezeTimeMap.set(this.host,t)},e.prototype.unfreeze=function(){unfreezeTimeMap.delete(this.host)},e.prototype.getUrl=function(){return this.protocol+"://"+this.host},e.prototype.getUnfreezeTime=function(){return unfreezeTimeMap.get(this.host)},e}(),HostPool=function(){function e(e){void 0===e&&(e=[]),this.initHosts=e,this.cachedHostsMap=new Map}return e.prototype.register=function(e,t,o,n){this.cachedHostsMap.set(e+"@"+t,o.map((function(e){return new Host(e,n)})))},e.prototype.refresh=function(e,t,o){var n,i,l,a;return __awaiter(this,void 0,void 0,(function(){var r,s;return __generator(this,(function(d){switch(d.label){case 0:return(this.cachedHostsMap.get(e+"@"+t)||[]).length>0?[2]:this.initHosts.length>0?(this.register(e,t,this.initHosts,o),[2]):[4,getUpHosts(e,t,o)];case 1:return null!=(null==(r=d.sent())?void 0:r.data)&&(s=__spread$1((null===(i=null===(n=r.data.up)||void 0===n?void 0:n.acc)||void 0===i?void 0:i.main)||[],(null===(a=null===(l=r.data.up)||void 0===l?void 0:l.acc)||void 0===a?void 0:a.backup)||[]),this.register(e,t,s,o)),[2]}}))}))},e.prototype.getUp=function(e,t,o){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(l){switch(l.label){case 0:return[4,this.refresh(e,t,o)];case 1:return l.sent(),0===(n=this.cachedHostsMap.get(e+"@"+t)||[]).length?[2,null]:(i=n.filter((function(e){return!e.isFrozen()}))).length>0?[2,i[0]]:[2,n.slice().sort((function(e,t){return(e.getUnfreezeTime()||0)-(t.getUnfreezeTime()||0)}))[0]]}}))}))},e}();function createUploadManager(e,t,o,n){return e.config&&e.config.forceDirect?(n.info("ues forceDirect mode."),new Direct(e,t,o,n)):e.file.size>4*MB?(n.info("file size over 4M, use Resume."),new Resume(e,t,o,n)):(n.info("file size less or equal than 4M, use Direct."),new Direct(e,t,o,n))}function upload(e,t,o,n,i){var l=new Logger(o,null==i?void 0:i.disableStatisticsReport,null==i?void 0:i.debugLogLevel,e.name),a={file:e,key:t,token:o,putExtra:n,config:normalizeUploadConfig(i,l)},r=new HostPool(a.config.uphost);return new Observable((function(e){var t=createUploadManager(a,{onData:function(t){return e.next(t)},onError:function(t){return e.error(t)},onComplete:function(t){return e.complete(t)}},r,l);return t.putFile(),t.stop.bind(t)}))}var __assign$1=globalThis&&globalThis.__assign||function(){return __assign$1=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$1.apply(this,arguments)},__rest=globalThis&&globalThis.__rest||function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(o[n[i]]=e[n[i]])}return o},__read=globalThis&&globalThis.__read||function(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var n,i,l=o.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=l.next()).done;)a.push(n.value)}catch(r){i={error:r}}finally{try{n&&!n.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return a},__spread=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e};function normalizeUploadConfig(e,t){var o=__assign$1({},e),n=o.upprotocol,i=o.uphost,l=__rest(o,["upprotocol","uphost"]),a=__assign$1({uphost:[],retryCount:3,checkByMD5:!1,forceDirect:!1,useCdnDomain:!0,checkByServer:!1,concurrentRequestLimit:3,chunkSize:DEFAULT_CHUNK_SIZE,upprotocol:"https",debugLogLevel:"OFF",disableStatisticsReport:!1},l);n&&(a.upprotocol=n.replace(/:$/,""));var r=[];if(t&&null!=(null==e?void 0:e.uphost)&&null!=(null==e?void 0:e.region)&&t.warn("do not use both the uphost and region config."),i)Array.isArray(i)?r.push.apply(r,__spread(i)):r.push(i);else if(null==a?void 0:a.region){var s=regionUphostMap[null==a?void 0:a.region];a.useCdnDomain?r.push.apply(r,__spread(s.cdnUphost)):r.push.apply(r,__spread(s.srcUphost))}return __assign$1(__assign$1({},a),{uphost:r.filter(Boolean)})}var __assign=globalThis&&globalThis.__assign||function(){return __assign=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign.apply(this,arguments)};globalThis&&globalThis.__awaiter,globalThis&&globalThis.__generator;var mimeTypes={PNG:"image/png",JPEG:"image/jpeg",WEBP:"image/webp",BMP:"image/bmp"};Object.keys(mimeTypes).map((function(e){return mimeTypes[e]})),mimeTypes.JPEG;var viewer="",index_vue_vue_type_style_index_0_lang$5="";const _sfc_main$18={components:{Draggable:draggableComponent},props:{modelValue:{type:Array,default:()=>[]},width:{type:Number,default:100},height:{type:Number,default:100},token:{type:String,default:""},domain:{type:String,default:""},multiple:{type:Boolean,default:!1},limit:{type:Number,default:9},isQiniu:{type:Boolean,default:!1},isDelete:{type:Boolean,default:!1},min:{type:Number,default:0},meitu:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1},action:{type:String,default:""},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},headers:{type:Array,default:()=>[]},ui:{type:String,default:"element"},containerKey:{type:String,default:""},withCredentials:{type:Boolean,default:!1},printRead:{type:Boolean,default:!1},onSelect:{type:Function,default:void 0}},emits:["update:modelValue","on-upload-success","on-upload-error","on-upload-progress","on-upload-remove","on-meitu"],inject:{formContext:{default:{}}},data(){return{fileList:this.modelValue.map((e=>({...e,key:e.key?e.key:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())}))),viewer:null,uploadId:"upload_"+(new Date).getTime(),editIndex:-1,meituIndex:-1}},computed:{miniWidth(){return this.width>this.height?this.height:this.width}},methods:{handleChange(){const e=this.$refs.uploadInput.files;if(this.editIndex<0&&this.fileList.length+e.length>this.limit)return this.$refs.uploadInput.value=[],!1;for(let t=0;t<e.length;t++){let o=e[t],n=this.onSelect(o);if(!1===n)return!1;n instanceof File&&(o=n);const i=new FileReader,l=(new Date).getTime()+"_"+Math.ceil(99999*Math.random());i.readAsDataURL(o),i.onload=()=>{this.editIndex>=0?(this.fileList[this.editIndex]={key:l,url:i.result,percent:0,status:"uploading"},this.editIndex=-1):this.fileList.push({key:l,url:i.result,percent:0,status:"uploading"}),this.$nextTick((()=>{this.isQiniu?this.uploadAction2(i.result,o,l):this.uploadAction(i.result,o,l)}))}}this.$refs.uploadInput.value=[]},uploadAction(e,t,o){this.fileList.findIndex((e=>e.key===o));const n=new XMLHttpRequest,i=this.action;n.open("POST",i,!0),this.headers.map((e=>{e.key&&n.setRequestHeader(e.key,e.fx?executeExpression(e.value,{},this.formContext):e.value)}));let l=new FormData;l.append("file",t),l.append("fname",t.name),l.append("key",o),n.withCredentials=this.withCredentials,n.onreadystatechange=()=>{if(4===n.readyState){let e=JSON.parse(n.response);e.url=e.data,e&&e.url?(this.fileList[this.fileList.findIndex((e=>e.key===o))]={...this.fileList[this.fileList.findIndex((e=>e.key===o))],url:e.url,percent:100,...e},setTimeout((()=>{this.fileList[this.fileList.findIndex((e=>e.key===o))]={...this.fileList[this.fileList.findIndex((e=>e.key===o))],status:"success"},this.$emit("on-upload-success",{...this.fileList[this.fileList.findIndex((e=>e.key===o))],status:"success"}),this.$emit("update:modelValue",this.fileList)}),200)):(this.fileList[this.fileList.findIndex((e=>e.key===o))]={...this.fileList[this.fileList.findIndex((e=>e.key===o))],status:"error"},this.$emit("on-upload-error",{...this.fileList[this.fileList.findIndex((e=>e.key===o))],status:"error"}),this.fileList.splice(this.fileList.findIndex((e=>e.key===o)),1))}},n.upload.onprogress=e=>{e.total&&e.loaded&&(this.fileList[this.fileList.findIndex((e=>e.key===o))].percent=e.loaded==e.total?99:parseInt(e.loaded/e.total*100),this.$emit("on-upload-progress",{...this.fileList[this.fileList.findIndex((e=>e.key===o))],status:"uploading",percent:e.loaded==e.total?99:parseInt(e.loaded/e.total*100)}))},n.send(l)},uploadAction2(e,t,o){const n=this;upload(t,o,this.token,{fname:o,mimeType:[]},{useCdnDomain:!0}).subscribe({next(e){n.fileList[n.fileList.findIndex((e=>e.key===o))].percent=parseInt(e.total.percent),n.$emit("on-upload-progress",{...n.fileList[n.fileList.findIndex((e=>e.key===o))],status:"uploading",percent:parseInt(e.total.percent)})},error(e){n.$message.error(e.message),n.fileList[n.fileList.findIndex((e=>e.key===o))]={...n.fileList[n.fileList.findIndex((e=>e.key===o))],status:"error"},n.$emit("on-upload-error",{...n.fileList[n.fileList.findIndex((e=>e.key===o))],status:"error"}),n.fileList.splice(n.fileList.findIndex((e=>e.key===o)),1)},complete(e){n.fileList[n.fileList.findIndex((e=>e.key===o))]={...n.fileList[n.fileList.findIndex((e=>e.key===o))],url:n.domain+e.key,percent:100,...e},setTimeout((()=>{n.fileList[n.fileList.findIndex((e=>e.key===o))]={...n.fileList[n.fileList.findIndex((e=>e.key===o))],status:"success"},n.$emit("on-upload-success",{...n.fileList[n.fileList.findIndex((e=>e.key===o))],status:"success"}),n.$emit("update:modelValue",n.fileList)}),200)}})},handleRemove(e){this.$emit("on-upload-remove",this.fileList[this.fileList.findIndex((t=>t.key===e))]),this.fileList.splice(this.fileList.findIndex((t=>t.key===e)),1),this.$nextTick((()=>{this.$emit("update:modelValue",this.fileList)}))},handleEdit(e){this.editIndex=this.fileList.findIndex((t=>t.key===e)),this.$refs.uploadInput.click()},handleMeitu(e){this.$emit("on-meitu",this.fileList.findIndex((t=>t.key===e)))},handleAdd(){this.disabled||(this.editIndex=-1,this.$refs.uploadInput.click())},handlePreviewFile(e){this.viewer&&this.viewer.destroy(),this.uploadId="upload_"+(new Date).getTime(),this.$nextTick((()=>{this.viewer=new Viewer$1(document.getElementById(this.uploadId)),this.viewer.view(this.fileList.findIndex((t=>t.key===e)))}))}},watch:{modelValue(e){this.fileList=this.modelValue.map((e=>({...e,key:e.key?e.key:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())})))}}},_hoisted_1$O=["id"],_hoisted_2$F=["id"],_hoisted_3$x=["src"],_hoisted_4$v={key:2,class:"item-status"},_hoisted_5$u=vue.createElementVNode("i",{class:"fm-iconfont icon-check1",style:{color:"#fff",transform:"rotate(-45deg)","line-height":"12px",display:"block"}},null,-1),_hoisted_6$q=[_hoisted_5$u],_hoisted_7$n=["title","onClick"],_hoisted_8$g=["title","onClick"],_hoisted_9$e=["title","onClick"];function _sfc_render$16(e,t,o,n,i,l){const a=vue.resolveComponent("el-progress"),r=vue.resolveComponent("a-progress"),s=vue.resolveComponent("draggable");return vue.openBlock(),vue.createElementBlock("div",{class:"fm-uplaod-container",id:i.uploadId},[vue.createVNode(s,vue.mergeProps({class:"drag-img-list",modelValue:i.fileList,"onUpdate:modelValue":t[0]||(t[0]=e=>i.fileList=e)},{group:i.uploadId,ghostClass:"ghost",animation:200},{"no-transition-on-drag":!0,"item-key":"key"}),{item:vue.withCtx((({element:t})=>[(vue.openBlock(),vue.createElementBlock("div",{id:t.key,style:vue.normalizeStyle({width:o.width+"px",height:o.height+"px"}),class:vue.normalizeClass([{uploading:"uploading"==t.status,"is-success":"success"==t.status,"is-disabled":o.disabled},"upload-file"]),key:t.key},[vue.createElementVNode("img",{src:t.url},null,8,_hoisted_3$x),"uploading"==t.status&&"element"==o.ui?(vue.openBlock(),vue.createBlock(a,{key:0,width:.9*l.miniWidth,class:"upload-progress",type:"circle",percentage:t.percent},null,8,["width","percentage"])):vue.createCommentVNode("",!0),"uploading"==t.status&&"antd"==o.ui?(vue.openBlock(),vue.createBlock(r,{key:1,size:.9*l.miniWidth,class:"upload-progress",type:"circle",percent:t.percent},null,8,["size","percent"])):vue.createCommentVNode("",!0),"success"==t.status?(vue.openBlock(),vue.createElementBlock("label",_hoisted_4$v,_hoisted_6$q)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"uplaod-action",style:vue.normalizeStyle({height:l.miniWidth/4+"px"})},[vue.createElementVNode("i",{class:"fm-iconfont icon-tupianyulan",title:e.$t("fm.upload.preview"),onClick:e=>l.handlePreviewFile(t.key),style:vue.normalizeStyle({"font-size":l.miniWidth/8+"px"})},null,12,_hoisted_7$n),!o.isEdit||o.disabled||o.printRead?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("i",{key:0,class:"fm-iconfont icon-sync1",title:e.$t("fm.upload.edit"),onClick:e=>l.handleEdit(t.key),style:vue.normalizeStyle({"font-size":l.miniWidth/8+"px"})},null,12,_hoisted_8$g)),o.isDelete&&i.fileList.length>o.min&&!o.disabled&&!o.printRead?(vue.openBlock(),vue.createElementBlock("i",{key:1,class:"fm-iconfont icon-delete",title:e.$t("fm.upload.delete"),onClick:e=>l.handleRemove(t.key),style:vue.normalizeStyle({"font-size":l.miniWidth/8+"px"})},null,12,_hoisted_9$e)):vue.createCommentVNode("",!0)],4)],14,_hoisted_2$F))])),_:1},16,["modelValue"]),o.readonly?vue.createCommentVNode("",!0):vue.withDirectives((vue.openBlock(),vue.createElementBlock("div",{key:0,class:vue.normalizeClass({"is-disabled":o.disabled,"el-upload":"element"==o.ui,"el-upload--picture-card":"element"==o.ui,"ant-upload":"antd"==o.ui,"ant-upload-select":"antd"==o.ui,"ant-upload-select-picture-card":"antd"==o.ui}),style:vue.normalizeStyle({width:o.width+"px",height:o.height+"px"}),onClick:t[4]||(t[4]=vue.withModifiers(((...e)=>l.handleAdd&&l.handleAdd(...e)),["self"]))},[vue.createElementVNode("i",{onClick:t[1]||(t[1]=vue.withModifiers(((...e)=>l.handleAdd&&l.handleAdd(...e)),["self"])),class:"fm-iconfont icon-plus",style:vue.normalizeStyle({fontSize:l.miniWidth/4+"px",lineHeight:l.miniWidth/4+"px",marginTop:-l.miniWidth/8+"px",marginLeft:-l.miniWidth/8+"px",position:"absolute",top:o.height/2+"px",left:o.width/2+"px"})},null,4),o.multiple?(vue.openBlock(),vue.createElementBlock("input",{key:0,accept:"image/*",multiple:"",ref:"uploadInput",onChange:t[2]||(t[2]=(...e)=>l.handleChange&&l.handleChange(...e)),type:"file",style:{width:0,height:0},name:"file",class:"upload-input"},null,544)):(vue.openBlock(),vue.createElementBlock("input",{key:1,accept:"image/*",ref:"uploadInput",onChange:t[3]||(t[3]=(...e)=>l.handleChange&&l.handleChange(...e)),type:"file",style:{width:0,height:0},name:"file",class:"upload-input"},null,544))],6)),[[vue.vShow,(!o.isQiniu||o.isQiniu&&o.token)&&i.fileList.length<o.limit]])],8,_hoisted_1$O)}var FmUpload=_export_sfc(_sfc_main$18,[["render",_sfc_render$16]]),index_vue_vue_type_style_index_0_lang$4="";const _sfc_main$17={components:{DataTableColumn:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return column$1}))))},props:{columns:{type:Array,default:()=>[]},modelValue:{type:[Array,Object]},showOperation:{type:Boolean,default:!1},operations:{type:Object,default:()=>({})},pagination:{type:Object,default:()=>({})},isDesign:{type:Boolean,default:!1},maxHeight:{type:[String,Number]},stripe:{type:Boolean,default:!1},border:{type:Boolean,default:!1},highlight:{type:Boolean,default:!1},selection:{type:Boolean,default:!1},printRead:{type:Boolean,default:!1}},computed:{theMaxHeight(){return this.maxHeight?this.maxHeight:"100%"},listPageSizes(){return this.pagination.pageSizes&&this.pagination.pageSizes.trim()?this.pagination.pageSizes.split(",").map((e=>e.trim())).filter((e=>""!==e&&!isNaN(Number(e)))).map((e=>parseInt(e))):[10,20,50,100]},rowspanColumnKeys(){return this.columns.filter((e=>e.prop&&e.isRowspan)).map((e=>e.key))}},data(){return{tableData:[],total:0,currentPage:1,pageSize:this.pagination.pageSizes&&this.pagination.pageSizes.trim()?this.pagination.pageSizes.split(",").map((e=>parseInt(e.trim())))[0]:10,multipleSelection:[],tableKey:Math.random().toString(36).slice(-8)}},created(){this.loadData()},emits:["update:modelValue","on-current-row","on-page-change","on-operate","on-selection-change"],watch:{modelValue(e){this.loadData()},"pagination.props":{deep:!0,handler(e){this.loadData()}}},methods:{loadData(){var e,t;"object"==typeof this.modelValue&&(Array.isArray(this.modelValue)?(this.tableData=this._generateDataKey(this.modelValue),this.total=this.isDesign?100:0):(this.tableData=this._generateDataKey(this.modelValue[this.pagination.props.list]),this.total=Number(this.modelValue[this.pagination.props.total]),this.currentPage=null!=(e=Number(this.modelValue[this.pagination.props.current]))?e:this.currentPage,this.pageSize=null!=(t=Number(this.modelValue[this.pagination.props.size]))?t:this.pageSize))},_generateDataKey(e){return Array.isArray(e)?e.map((e=>e.children&&e.children.length?{...e,fm_key:Math.random().toString(36).slice(-8),children:this._generateDataKey(e.children)}:{...e,fm_key:Math.random().toString(36).slice(-8)})):e},handlePageChange(e){this.$emit("on-page-change",{[this.pagination.props.current]:this.currentPage,[this.pagination.props.size]:this.pageSize})},handleCurrentRow(e){this.$emit("on-current-row",{row:e})},handleOperate(e,t){const o=this.operations.buttons[t].event;o&&this.$emit("on-operate",{funcKey:o,$index:e.$index,column:e.column,row:e.row})},handleSelectionChange(e){this.multipleSelection=e,this.$emit("on-selection-change",this.multipleSelection)},_calcRowspan(e,t){if(0===e){let o=this.tableData[e][t],n=1;for(let i=e+1;i<this.tableData.length&&!(this.tableData[i][t]!==o||null==this.tableData[i][t]||this.tableData[i].children&&this.tableData[i].children.length||this.tableData[e].children&&this.tableData[e].children.length);i++)n++;return{rowspan:n,colspan:1}}if(e<this.tableData.length){let o=this.tableData[e][t];if(this.tableData[e-1][t]!==o||null==this.tableData[e-1][t]||this.tableData[e-1].children&&this.tableData[e-1].children.length||this.tableData[e].children&&this.tableData[e].children.length){let n=1;for(let i=e+1;i<this.tableData.length&&!(this.tableData[i][t]!==o||null==this.tableData[i][t]||this.tableData[i].children&&this.tableData[i].children.length||this.tableData[e].children&&this.tableData[e].children.length);i++)n++;return{rowspan:n,colspan:1}}return{rowspan:0,colspan:0}}return{rowspan:1,colspan:1}},onSpanMethod({row:e,column:t,rowIndex:o,columnIndex:n}){if(this.rowspanColumnKeys.includes(t.columnKey))return this._calcRowspan(o,t.property)},getSelection(){return JSON.parse(JSON.stringify(this.multipleSelection))},getPageInfo(){return this.pagination.paging?{[this.pagination.props.current]:this.currentPage,[this.pagination.props.size]:this.pageSize}:{}},clearSelection(){this.$refs[`table${this.tableKey}`].clearSelection()},getSelectionRows(){return this.$refs[`table${this.tableKey}`].getSelectionRows()},toggleAllSelection(){this.$refs[`table${this.tableKey}`].toggleAllSelection()},_filterMatchRow(e,t){let o=[];return o=e.filter((e=>((e,t)=>{for(let o in t)if(e[o]!==t[o])return!1;return!0})(e,t))),e.forEach((e=>{e.children&&e.children.length&&o.push(...this._filterMatchRow(e.children,t))})),o},toggleRowSelection(e,t){this._filterMatchRow(this.tableData,e).forEach((e=>{this.$refs[`table${this.tableKey}`].toggleRowSelection(e,t)}))},setCurrentRow(e){const t=this._filterMatchRow(this.tableData,e);t&&t[0]&&this.$refs[`table${this.tableKey}`].setCurrentRow(t[0])}}},_hoisted_1$N={class:"fm-data-table-container"};function _sfc_render$15(e,t,o,n,i,l){const a=vue.resolveComponent("el-table-column"),r=vue.resolveComponent("data-table-column"),s=vue.resolveComponent("el-button"),d=vue.resolveComponent("el-table"),u=vue.resolveComponent("el-pagination"),c=vue.resolveComponent("el-col"),p=vue.resolveComponent("el-row");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1$N,[vue.createVNode(d,{data:i.tableData,"max-height":l.theMaxHeight,stripe:o.stripe,border:o.border,"highlight-current-row":o.highlight,onCurrentChange:l.handleCurrentRow,onSelectionChange:l.handleSelectionChange,"row-key":"fm_key","span-method":l.onSpanMethod,"table-layout":"fixed",ref:`table${i.tableKey}`},{default:vue.withCtx((()=>[o.selection&&!o.printRead?(vue.openBlock(),vue.createBlock(a,{key:0,type:"selection",width:"50",fixed:"left"})):vue.createCommentVNode("",!0),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.columns,((e,t)=>(vue.openBlock(),vue.createBlock(r,{key:t,data:e},null,8,["data"])))),128)),o.showOperation&&!o.printRead?(vue.openBlock(),vue.createBlock(a,{key:1,fixed:"right",label:"zh-cn"==e.$i18n.locale?"操作":"Operations",width:o.operations.width},{default:vue.withCtx((e=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.operations.buttons,((t,o)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:o},["primary"==t.type?(vue.openBlock(),vue.createBlock(s,{key:0,class:"is-data-table",type:"primary",size:"small",onClick:vue.withModifiers((t=>l.handleOperate(e,o)),["stop"])},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(t.name),1)])),_:2},1032,["onClick"])):vue.createCommentVNode("",!0),"default"==t.type?(vue.openBlock(),vue.createBlock(s,{key:1,class:"is-data-table",size:"small",onClick:vue.withModifiers((t=>l.handleOperate(e,o)),["stop"])},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(t.name),1)])),_:2},1032,["onClick"])):vue.createCommentVNode("",!0),"text"==t.type?(vue.openBlock(),vue.createBlock(s,{key:2,class:"is-data-table",text:"",size:"small",onClick:vue.withModifiers((t=>l.handleOperate(e,o)),["stop"])},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(t.name),1)])),_:2},1032,["onClick"])):vue.createCommentVNode("",!0),"link"==t.type?(vue.openBlock(),vue.createBlock(s,{key:3,class:"is-data-table",link:"",type:"primary","size.stop":"small",onClick:vue.withModifiers((t=>l.handleOperate(e,o)),["stop"])},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(t.name),1)])),_:2},1032,["onClick"])):vue.createCommentVNode("",!0)],64)))),128))])),_:1},8,["label","width"])):vue.createCommentVNode("",!0)])),_:1},8,["data","max-height","stripe","border","highlight-current-row","onCurrentChange","onSelectionChange","span-method"]),o.pagination.paging&&i.total?(vue.openBlock(),vue.createBlock(p,{key:0,class:"table-pagination"},{default:vue.withCtx((()=>[vue.createVNode(c,{style:{"text-align":"right"}},{default:vue.withCtx((()=>[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(" Page "+vue.toDisplayString(i.currentPage),1)],64)):(vue.openBlock(),vue.createBlock(u,{key:1,currentPage:i.currentPage,"onUpdate:currentPage":t[0]||(t[0]=e=>i.currentPage=e),"page-size":i.pageSize,"onUpdate:pageSize":t[1]||(t[1]=e=>i.pageSize=e),"pager-count":o.pagination.pagerCount,layout:"total, sizes, prev, pager, next","page-sizes":l.listPageSizes,total:i.total,background:o.pagination.background,small:o.pagination.small,onChange:l.handlePageChange},null,8,["currentPage","page-size","pager-count","page-sizes","total","background","small","onChange"]))])),_:1})])),_:1})):vue.createCommentVNode("",!0)])}var FmDataTable$1=_export_sfc(_sfc_main$17,[["render",_sfc_render$15]]);function treeDataTranslate(e,t="id",o="parentId"){for(var n=[],i={},l=0;l<e.length;l++)i[e[l][t]]=e[l];for(var a=0;a<e.length;a++)i[e[a][o]]&&e[a][t]!==e[a][o]?(i[e[a][o]].children||(i[e[a][o]].children=[]),i[e[a][o]]._level||(i[e[a][o]]._level=1),e[a]._level=i[e[a][o]]._level+1,i[e[a][o]].children.push(e[a])):n.push(e[a]);return n}function familyTree(e,t,o="parentId"){let n=[],i=function(t,l){for(let a=0;a<t.length;a++){let r=t[a];if(r.id===l){n.push(r),i(e,r[o]);break}r.children&&i(r.children,l)}};i(e,t);let l=JSON.parse(JSON.stringify(n));return l&&l.forEach((e=>{delete e.children})),l}function genOrgData(e,t){return e.map((e=>{delete e.parentList;let o=familyTree(t,e.id,"pid");return o&&o.length>0&&o.splice(0,1),o=o.reverse(),{...e,parentList:o}}))}const request=axios.create({withCredentials:!1});request.interceptors.request.use((e=>e),(e=>Promise.reject(new Error(e).message))),request.interceptors.response.use((e=>e.data),(e=>Promise.reject(new Error(e).message)));const BASE_URL="",API={getAllSystem:"/flow/api/public/getApps",getFormTemplate:"/flow/form/template/getPagerModel",getFormMakInfoById:"/flow/api/public/getFormInfoByModelKey",getTaskFormMakInfoById:"/flow/form/task/custom/getTaskFormInfoById",getTemplateFormById:"/flow/form/template/getById",saveMakForm:"/flow/form/custom/saveFormInfo",saveTaskMakForm:"/flow/form/task/custom/saveTaskFormInfo",saveFormTemplate:"/flow/form/template/saveOrUpdate",getDictionarys:"/flow/api/public/getDictionarys",getDictionaryItems:"/flow/api/public/getDictionaryItems",editorUploadAction:"/flow/api/public/editorUpload",uploadFileAction:"/flow/api/public/uploadFile",ajaxListPerson:"/flow/api/public/getPagePersonal",getPersonalByCodes:"/flow/api/public/getPersonalByCodes",ajaxListOrgTree:"/flow/api/public/getOrgTree",ajaxListCompanyTree:"/flow/api/public/getCompanyTree",getPagerModelRelateFlow:"/flow/api/public/getPagerModelRelateFlow",getFormDataByBizKey:"/flow/api/public/getCustomFormInfoVoByModelKeyAndBusinessKey"},editorUploadAction=BASE_URL+API.editorUploadAction,ajaxListPerson=e=>request.post(BASE_URL+API.ajaxListPerson,{query:{pageSize:e.pager.pageSize,pageNum:e.pager.pageNum},entity:{...e.searchInfo}}).then((e=>{const{rows:t}=e.data;return t&&(e.data.rows=t.map((e=>({userId:e.code,userName:e.name,sex:e.sex,tel:e.tel,email:e.email,headImg:e.headImg,companyId:e.companyId,companyName:e.companyName,deptId:e.deptId,deptName:e.deptName})))),Promise.resolve(e.data)})),getPersonalByCodes=e=>request.post(BASE_URL+API.getPersonalByCodes,e).then((e=>{const{data:t}=e;return Promise.resolve(t)})),ajaxListProcess=e=>{try{const t=window.currentUser||window.parent.currentUser;return e.searchInfo.userCode=t.no||t.personalCode||t.userNo,request.post(BASE_URL+API.getPagerModelRelateFlow,{query:{pageSize:e.pager.pageSize,pageNum:e.pager.pageNum},entity:{...e.searchInfo}}).then((e=>(e.data.rows&&(e.data.rows=e.data.rows.map((e=>({...e,id:e.processInstanceId,dataType:"process",url:`/#/process/view/${e.modelKey}/${e.processInstanceId}/${e.businessKey}/0/0`})))),Promise.resolve(e.data))))}catch(t){return Promise.reject("获取当前登录人失败！")}},ajaxListOrgTree=()=>request.post(BASE_URL+API.ajaxListOrgTree).then((e=>{const t=e.data.map((e=>{const t="1"===e.sourceType?e.id:e.companyId,o="1"===e.sourceType?e.shortName:e.companyName;return{id:e.id,companyId:t,companyName:o,type:e.sourceType,text:e.shortName,pid:e.pid,leaderName:e.leaderName,leaderCode:e.leaderCode,chargeLeaderName:e.chargeLeaderName,chargeLeaderCode:e.chargeLeaderCode}}));return Promise.resolve(t)})),ajaxListCompanyTree=()=>request.post(BASE_URL+API.ajaxListCompanyTree).then((e=>{const t=e.data.map((e=>{const t="1"===e.sourceType?e.id:e.companyId,o="1"===e.sourceType?e.shortName:e.companyName;return{id:e.id,companyId:t,companyName:o,type:e.sourceType,text:e.shortName,pid:e.pid,leaderName:e.leaderName,leaderCode:e.leaderCode,chargeLeaderName:e.chargeLeaderName,chargeLeaderCode:e.chargeLeaderCode}}));return Promise.resolve(t)}));
/*! Element Plus Icons Vue v2.3.1 */
var circle_close_vue_vue_type_script_setup_true_lang_default=vue.defineComponent({name:"CircleClose",__name:"circle-close",setup:e=>(e,t)=>(vue.openBlock(),vue.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[vue.createElementVNode("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),vue.createElementVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}),circle_close_default=circle_close_vue_vue_type_script_setup_true_lang_default,connection_vue_vue_type_script_setup_true_lang_default=vue.defineComponent({name:"Connection",__name:"connection",setup:e=>(e,t)=>(vue.openBlock(),vue.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[vue.createElementVNode("path",{fill:"currentColor",d:"M640 384v64H448a128 128 0 0 0-128 128v128a128 128 0 0 0 128 128h320a128 128 0 0 0 128-128V576a128 128 0 0 0-64-110.848V394.88c74.56 26.368 128 97.472 128 181.056v128a192 192 0 0 1-192 192H448a192 192 0 0 1-192-192V576a192 192 0 0 1 192-192z"}),vue.createElementVNode("path",{fill:"currentColor",d:"M384 640v-64h192a128 128 0 0 0 128-128V320a128 128 0 0 0-128-128H256a128 128 0 0 0-128 128v128a128 128 0 0 0 64 110.848v70.272A192.064 192.064 0 0 1 64 448V320a192 192 0 0 1 192-192h320a192 192 0 0 1 192 192v128a192 192 0 0 1-192 192z"})]))}),connection_default=connection_vue_vue_type_script_setup_true_lang_default,female_vue_vue_type_script_setup_true_lang_default=vue.defineComponent({name:"Female",__name:"female",setup:e=>(e,t)=>(vue.openBlock(),vue.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[vue.createElementVNode("path",{fill:"currentColor",d:"M512 640a256 256 0 1 0 0-512 256 256 0 0 0 0 512m0 64a320 320 0 1 1 0-640 320 320 0 0 1 0 640"}),vue.createElementVNode("path",{fill:"currentColor",d:"M512 640q32 0 32 32v256q0 32-32 32t-32-32V672q0-32 32-32"}),vue.createElementVNode("path",{fill:"currentColor",d:"M352 800h320q32 0 32 32t-32 32H352q-32 0-32-32t32-32"})]))}),female_default=female_vue_vue_type_script_setup_true_lang_default,male_vue_vue_type_script_setup_true_lang_default=vue.defineComponent({name:"Male",__name:"male",setup:e=>(e,t)=>(vue.openBlock(),vue.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[vue.createElementVNode("path",{fill:"currentColor",d:"M399.5 849.5a225 225 0 1 0 0-450 225 225 0 0 0 0 450m0 56.25a281.25 281.25 0 1 1 0-562.5 281.25 281.25 0 0 1 0 562.5m253.125-787.5h225q28.125 0 28.125 28.125T877.625 174.5h-225q-28.125 0-28.125-28.125t28.125-28.125"}),vue.createElementVNode("path",{fill:"currentColor",d:"M877.625 118.25q28.125 0 28.125 28.125v225q0 28.125-28.125 28.125T849.5 371.375v-225q0-28.125 28.125-28.125"}),vue.createElementVNode("path",{fill:"currentColor",d:"M604.813 458.9 565.1 419.131l292.613-292.668 39.825 39.824z"})]))}),male_default=male_vue_vue_type_script_setup_true_lang_default,office_building_vue_vue_type_script_setup_true_lang_default=vue.defineComponent({name:"OfficeBuilding",__name:"office-building",setup:e=>(e,t)=>(vue.openBlock(),vue.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[vue.createElementVNode("path",{fill:"currentColor",d:"M192 128v704h384V128zm-32-64h448a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32"}),vue.createElementVNode("path",{fill:"currentColor",d:"M256 256h256v64H256zm0 192h256v64H256zm0 192h256v64H256zm384-128h128v64H640zm0 128h128v64H640zM64 832h896v64H64z"}),vue.createElementVNode("path",{fill:"currentColor",d:"M640 384v448h192V384zm-32-64h256a32 32 0 0 1 32 32v512a32 32 0 0 1-32 32H608a32 32 0 0 1-32-32V352a32 32 0 0 1 32-32"})]))}),office_building_default=office_building_vue_vue_type_script_setup_true_lang_default,search_vue_vue_type_script_setup_true_lang_default=vue.defineComponent({name:"Search",__name:"search",setup:e=>(e,t)=>(vue.openBlock(),vue.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[vue.createElementVNode("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})]))}),search_default=search_vue_vue_type_script_setup_true_lang_default,share_vue_vue_type_script_setup_true_lang_default=vue.defineComponent({name:"Share",__name:"share",setup:e=>(e,t)=>(vue.openBlock(),vue.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[vue.createElementVNode("path",{fill:"currentColor",d:"m679.872 348.8-301.76 188.608a127.808 127.808 0 0 1 5.12 52.16l279.936 104.96a128 128 0 1 1-22.464 59.904l-279.872-104.96a128 128 0 1 1-16.64-166.272l301.696-188.608a128 128 0 1 1 33.92 54.272z"})]))}),share_default=share_vue_vue_type_script_setup_true_lang_default,EmpInfoPopover_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$16={name:"EmpInfoPopover",components:{},props:{code:{type:String,default:""},name:{type:String,default:""}},data:()=>({data:{userName:"-"},loading:!1}),methods:{getStorage(e){const t=window.sessionStorage.getItem("emps");return(t?JSON.parse(t):{})[e]},setStorage(e){const t=window.sessionStorage.getItem("emps"),o=t?JSON.parse(t):{};o&&o[this.code]||(o[this.code]=e,window.sessionStorage.setItem("emps",JSON.stringify(o)))},onShowHandle(e){const t=this.getStorage(this.code);t?this.data=t:(this.loading=!0,getPersonalByCodes([this.code]).then((e=>{this.data=e[0],this.setStorage(e[0])})).finally((()=>{this.loading=!1})))}}},_withScopeId=e=>(vue.pushScopeId("data-v-1b8012d3"),e=e(),vue.popScopeId(),e),_hoisted_1$M={class:"user-base-info","element-loading-background":"rgba(48, 49, 51, 0.8)"},_hoisted_2$E=_withScopeId((()=>vue.createElementVNode("br",null,null,-1))),_hoisted_3$w=_withScopeId((()=>vue.createElementVNode("br",null,null,-1))),_hoisted_4$u=_withScopeId((()=>vue.createElementVNode("br",null,null,-1))),_hoisted_5$t=_withScopeId((()=>vue.createElementVNode("br",null,null,-1))),_hoisted_6$p=_withScopeId((()=>vue.createElementVNode("br",null,null,-1))),_hoisted_7$m=_withScopeId((()=>vue.createElementVNode("br",null,null,-1))),_hoisted_8$f={class:"cursor-pointer"};function _sfc_render$14(e,t,o,n,i,l){const a=vue.resolveComponent("el-avatar"),r=vue.resolveComponent("el-col"),s=vue.resolveComponent("el-row"),d=vue.resolveComponent("el-popover"),u=vue.resolveDirective("loading");return vue.openBlock(),vue.createBlock(d,{placement:"top-start",width:350,trigger:"hover",onShow:l.onShowHandle,"show-after":200,effect:"dark"},{default:vue.withCtx((()=>[vue.withDirectives((vue.openBlock(),vue.createElementBlock("div",_hoisted_1$M,[vue.createVNode(s,{type:"flex",align:"middle"},{default:vue.withCtx((()=>[vue.createVNode(r,{span:6,style:{"text-align":"center"}},{default:vue.withCtx((()=>{var e;return[vue.createElementVNode("div",null,[vue.createVNode(a,{size:"large",src:null==(e=i.data)?void 0:e.headImg},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(i.data.userName||o.name),1)])),_:1},8,["src"])])]})),_:1}),vue.createVNode(r,{span:18},{default:vue.withCtx((()=>[vue.createTextVNode(" 工号："+vue.toDisplayString(i.data.code||o.code),1),_hoisted_2$E,vue.createTextVNode(" 姓名："+vue.toDisplayString(i.data.userName||o.name),1),_hoisted_3$w,vue.createTextVNode(" 手机："+vue.toDisplayString(i.data.mobile),1),_hoisted_4$u,vue.createTextVNode(" 邮箱："+vue.toDisplayString(i.data.email),1),_hoisted_5$t,vue.createTextVNode(" 公司："+vue.toDisplayString(i.data.companyName),1),_hoisted_6$p,vue.createTextVNode(" 部门："+vue.toDisplayString(i.data.deptName),1),_hoisted_7$m])),_:1})])),_:1})])),[[u,i.loading]])])),reference:vue.withCtx((()=>[vue.createElementVNode("span",_hoisted_8$f,[vue.renderSlot(e.$slots,"default",{},(()=>[vue.createTextVNode("-")]),!0)])])),_:3},8,["onShow"])}var EmpInfoPopover=_export_sfc(_sfc_main$16,[["render",_sfc_render$14],["__scopeId","data-v-1b8012d3"]]),OrgInfoPopover_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$15={name:"OrgInfoPopover",components:{OfficeBuilding:office_building_default,Share:share_default},props:{id:{type:String,default:""},data:{type:Object,default:{}}},data:()=>({loading:!1}),methods:{getStorage(e){const t=window.sessionStorage.getItem("orgs");return(t?JSON.parse(t):{})[e]},setStorage(e){const t=window.sessionStorage.getItem("orgs"),o=t?JSON.parse(t):{};o&&o[this.id]||(o[this.id]=e,window.sessionStorage.setItem("emps",JSON.stringify(o)))},onShowHandle(e){}}},_hoisted_1$L={class:"org-base-info","element-loading-background":"rgba(48, 49, 51, 0.8)"},_hoisted_2$D={key:0},_hoisted_3$v={key:0,class:"org-company"},_hoisted_4$t={key:1,class:"org-dept"},_hoisted_5$s={key:1},_hoisted_6$o={key:0,class:"org-company"},_hoisted_7$l={key:1,class:"org-dept"},_hoisted_8$e={class:"cursor-pointer"},_hoisted_9$d={key:0,class:"org-company"},_hoisted_10$b={key:1,class:"org-dept"};function _sfc_render$13(e,t,o,n,i,l){const a=vue.resolveComponent("Share"),r=vue.resolveComponent("el-icon"),s=vue.resolveComponent("OfficeBuilding"),d=vue.resolveComponent("el-col"),u=vue.resolveComponent("el-row"),c=vue.resolveComponent("el-popover"),p=vue.resolveDirective("loading");return vue.openBlock(),vue.createBlock(c,{placement:"top-start",width:"auto",trigger:"hover",onShow:l.onShowHandle,"show-after":200,effect:"dark"},{default:vue.withCtx((()=>[vue.withDirectives((vue.openBlock(),vue.createElementBlock("div",_hoisted_1$L,[vue.createVNode(u,{type:"flex",align:"middle"},{default:vue.withCtx((()=>[vue.createVNode(d,{span:24},{default:vue.withCtx((()=>[o.data.parentList&&o.data.parentList.length>0?(vue.openBlock(),vue.createElementBlock("div",_hoisted_2$D,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.data.parentList,((e,t)=>(vue.openBlock(),vue.createElementBlock("span",{key:e.id},["2"===e.type?(vue.openBlock(),vue.createElementBlock("span",_hoisted_3$v,[vue.createVNode(r,{style:{"vertical-align":"middle"}},{default:vue.withCtx((()=>[vue.createVNode(a)])),_:1}),vue.createTextVNode(" "+vue.toDisplayString(e.text),1)])):(vue.openBlock(),vue.createElementBlock("span",_hoisted_4$t,[vue.createVNode(r,{style:{"vertical-align":"middle"}},{default:vue.withCtx((()=>[vue.createVNode(s)])),_:1}),vue.createTextVNode(" "+vue.toDisplayString(e.text),1)])),t<o.data.parentList.length-1?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:2},[vue.createTextVNode(" / ")],64)):vue.createCommentVNode("",!0)])))),128))])):(vue.openBlock(),vue.createElementBlock("div",_hoisted_5$s,["2"===o.data.type?(vue.openBlock(),vue.createElementBlock("span",_hoisted_6$o,[vue.createVNode(r,{style:{"vertical-align":"middle"}},{default:vue.withCtx((()=>[vue.createVNode(a)])),_:1}),vue.createTextVNode(" "+vue.toDisplayString(o.data.text),1)])):(vue.openBlock(),vue.createElementBlock("span",_hoisted_7$l,[vue.createVNode(r,{style:{"vertical-align":"middle"}},{default:vue.withCtx((()=>[vue.createVNode(s)])),_:1}),vue.createTextVNode(" "+vue.toDisplayString(o.data.text),1)]))]))])),_:1})])),_:1})])),[[p,i.loading]])])),reference:vue.withCtx((()=>[vue.createElementVNode("span",_hoisted_8$e,[vue.renderSlot(e.$slots,"default",{},(()=>["2"===o.data.type?(vue.openBlock(),vue.createElementBlock("span",_hoisted_9$d,[vue.createVNode(r,{style:{"vertical-align":"middle"}},{default:vue.withCtx((()=>[vue.createVNode(a)])),_:1}),vue.createTextVNode(" "+vue.toDisplayString(o.data.text),1)])):(vue.openBlock(),vue.createElementBlock("span",_hoisted_10$b,[vue.createVNode(r,{style:{"vertical-align":"middle"}},{default:vue.withCtx((()=>[vue.createVNode(s)])),_:1}),vue.createTextVNode(" "+vue.toDisplayString(o.data.text),1)]))]),!0)])])),_:3},8,["onShow"])}var OrgInfoPopover=_export_sfc(_sfc_main$15,[["render",_sfc_render$13],["__scopeId","data-v-7ea86576"]]),ProcessInfoPopover_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$14={name:"ProcessInfoPopover",components:{Connection:connection_default,Share:share_default},props:{id:{type:String,default:""},data:{type:Object,default:{}}},data:()=>({loading:!1}),methods:{getStorage(e){const t=window.sessionStorage.getItem("orgs");return(t?JSON.parse(t):{})[e]},setStorage(e){const t=window.sessionStorage.getItem("orgs"),o=t?JSON.parse(t):{};o&&o[this.id]||(o[this.id]=e,window.sessionStorage.setItem("emps",JSON.stringify(o)))},onShowHandle(e){}}},_hoisted_1$K={class:"link-process-base-info","element-loading-background":"rgba(48, 49, 51, 0.8)"},_hoisted_2$C={class:"cursor-pointer"},_hoisted_3$u={class:"link-process"};function _sfc_render$12(e,t,o,n,i,l){const a=vue.resolveComponent("el-tag"),r=vue.resolveComponent("el-col"),s=vue.resolveComponent("el-row"),d=vue.resolveComponent("Connection"),u=vue.resolveComponent("el-icon"),c=vue.resolveComponent("el-popover"),p=vue.resolveDirective("loading");return vue.openBlock(),vue.createBlock(c,{placement:"bottom-start",width:"auto",trigger:"hover",onShow:l.onShowHandle,"show-after":200},{default:vue.withCtx((()=>[vue.withDirectives((vue.openBlock(),vue.createElementBlock("div",_hoisted_1$K,[vue.createVNode(s,{type:"flex",align:"middle"},{default:vue.withCtx((()=>[vue.createVNode(r,{span:24},{default:vue.withCtx((()=>[vue.createElementVNode("div",null,[vue.createElementVNode("p",null,[vue.createTextVNode("提交人："),vue.createVNode(a,null,{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.data.submiterName)+"-["+vue.toDisplayString(o.data.submitterCode)+"]",1)])),_:1})]),vue.createElementVNode("p",null,"提交时间："+vue.toDisplayString(o.data.startTime),1),vue.createElementVNode("p",null,"流程名称："+vue.toDisplayString(o.data.name),1)])])),_:1})])),_:1})])),[[p,i.loading]])])),reference:vue.withCtx((()=>[vue.createElementVNode("span",_hoisted_2$C,[vue.renderSlot(e.$slots,"default",{},(()=>[vue.createElementVNode("span",_hoisted_3$u,[vue.createVNode(u,{style:{"vertical-align":"middle"}},{default:vue.withCtx((()=>[vue.createVNode(d)])),_:1}),vue.createTextVNode(" "+vue.toDisplayString(o.data.name),1)])]),!0)])])),_:3},8,["onShow"])}var ProcessInfoPopover=_export_sfc(_sfc_main$14,[["render",_sfc_render$12],["__scopeId","data-v-08a6fc5b"]]);const _sfc_main$13={name:"TagInput",components:{EmpInfoPopover:EmpInfoPopover,OrgInfoPopover:OrgInfoPopover,ProcessInfoPopover:ProcessInfoPopover,CircleClose:circle_close_default,Search:search_default},props:["modelValue","placeholder","printRead","disabled","scrollMaxHeight","dataType","showSearch"],emits:["update:modelValue","on-remove","on-remove-all"],data(){return{dataModel:this.modelValue}},methods:{doRemove(e){this.$emit("on-remove",e)},doRemoveAll(){this.$emit("on-remove-all")},scrollBottom(){this.$refs.scrollbarRef.setScrollTop(1e5)}},watch:{modelValue(e){this.dataModel=e},dataModel(e,t){this.$emit("update:modelValue",e)}}},_hoisted_1$J={class:"opt-button"};function _sfc_render$11(e,t,o,n,i,l){const a=vue.resolveComponent("EmpInfoPopover"),r=vue.resolveComponent("OrgInfoPopover"),s=vue.resolveComponent("ProcessInfoPopover"),d=vue.resolveComponent("el-tag"),u=vue.resolveComponent("el-space"),c=vue.resolveComponent("el-scrollbar"),p=vue.resolveComponent("CircleClose"),m=vue.resolveComponent("el-icon"),h=vue.resolveComponent("Search");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["selector-items-tag",o.disabled?"is-disabled":""])},[vue.createVNode(c,{ref:"scrollbarRef","max-height":(o.scrollMaxHeight||500)+"px"},{default:vue.withCtx((()=>[i.dataModel.length>0?(vue.openBlock(),vue.createBlock(u,{key:0},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.dataModel,(e=>(vue.openBlock(),vue.createBlock(d,{closable:!o.printRead&&!o.disabled,onClose:t=>l.doRemove(e)},{default:vue.withCtx((()=>["emp"===o.dataType?(vue.openBlock(),vue.createBlock(a,{key:0,code:e.userId,name:e.userName},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.userName),1)])),_:2},1032,["code","name"])):"org"===o.dataType?(vue.openBlock(),vue.createBlock(r,{key:1,id:e.id,data:e},null,8,["id","data"])):"process"===o.dataType?(vue.openBlock(),vue.createBlock(s,{key:2,id:e.id,data:e},null,8,["id","data"])):vue.createCommentVNode("",!0)])),_:2},1032,["closable","onClose"])))),256))])),_:1})):(vue.openBlock(),vue.createBlock(u,{key:1},{default:vue.withCtx((()=>[vue.createVNode(d,{class:"empty","disable-transitions":""},{default:vue.withCtx((()=>[o.printRead?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(o.placeholder),1)],64))])),_:1})])),_:1}))])),_:1},8,["max-height"]),vue.createElementVNode("span",_hoisted_1$J,[vue.createVNode(m,{onClick:l.doRemoveAll,class:"clear-btn",title:"清除"},{default:vue.withCtx((()=>[vue.createVNode(p)])),_:1},8,["onClick"]),"hidden"!==o.showSearch?(vue.openBlock(),vue.createBlock(m,{key:0,class:"search"},{default:vue.withCtx((()=>[vue.createVNode(h)])),_:1})):vue.createCommentVNode("",!0)])],2)}var TagInput=_export_sfc(_sfc_main$13,[["render",_sfc_render$11]]);const _sfc_main$12={name:"EmpSelectorDialog",components:{EmpInfoPopover:EmpInfoPopover,CusDialog:CusDialog,TagInput:TagInput,OfficeBuilding:office_building_default,Share:share_default,Male:male_default,Female:female_default,Search:search_default},props:{multiple:{type:Boolean,default:!1},title:{type:String,default:""},width:{type:String,default:"800px"}},data:()=>({Search:search_default,treeLoading:!1,empLoading:!1,filterText:"",filterEmpText:"",pager:{pageSize:15,pageNum:1,total:0,sizes:[15,30,50,100]},selectedList:[],selectedListValue:[],defaultExpandedKeys:[],empData:[],orgTreeData:[],orgTreeProps:{label:"text",children:"children"},loading:!1,dialogVisible:!1,id:"dialog_"+(new Date).getTime(),showForm:!1}),emits:["dialog-confirm","dialog-close"],methods:{filterNode:(e,t)=>!e||-1!==t.text.indexOf(e),open(e){this.selectedList=e,this.dialogVisible=!0,this.filterText="",this.filterEmpText="",this.getEmpData({}),this.getOrgTreeData()},getOrgTreeData(){this.treeLoading=!0,ajaxListOrgTree().then((e=>{const t=treeDataTranslate(e,"id","pid");this.orgTreeData=t,this.$nextTick((()=>{let e=[];if(this.orgTreeData&&this.orgTreeData.forEach((t=>{e.push(t.id)})),0===e.length)try{const t=window.currentUser||window.parent.currentUser;t&&(e.push(t.deptId),e.push(t.companyId))}catch(t){}this.defaultExpandedKeys=e}))})).finally((()=>{this.treeLoading=!1}))},searchEmpHandle(){this.pager.pageSize=15,this.pager.pageNum=1,this.pager.total=0,this.getEmpData({keyword:this.filterEmpText})},getRowKeys:e=>e.userId,getEmpData(e){this.empLoading=!0,ajaxListPerson({pager:this.pager,searchInfo:{...e}}).then((e=>{this.$nextTick((()=>{const{rows:t=[],total:o}=e;this.pager.total=o,this.empData=t,this.$nextTick((()=>{let e=this.$refs.multipleTable;this.selectedList&&this.empData.forEach((t=>{this.selectedList.findIndex((e=>e.userId===t.userId))>-1&&e.toggleRowSelection(t,!0)}))}))}))})).finally((()=>{this.empLoading=!1}))},doRemove(e){let t=this.$refs.multipleTable,o=this.selectedList.findIndex((t=>t&&t.userId===e.userId));o>=0&&this.selectedList.splice(o,1);const n=this.empData.find((t=>t.userId===e.userId));t.toggleRowSelection(n,!1)},doRemoveAll(e){let t=this.$refs.multipleTable;this.selectedList.forEach((e=>{const o=this.empData.find((t=>t.userId===e.userId));t.toggleRowSelection(o,!1)})),this.selectedList=[]},handleSelectAllChange(e){this.empData.forEach((t=>{this.selectionChangeHandle(e||[],t)}))},selectionChangeHandle(e,t){let o=this.$refs.multipleTable;if(this.multiple)if(e.length>0){if(e.some((e=>e.userId===t.userId)))this.appendSelectVal(t);else{let e=this.selectedList.findIndex((e=>e&&e.userId===t.userId));e>=0&&this.selectedList.splice(e,1)}}else{let e=this.selectedList.findIndex((e=>e&&e.userId===t.userId));e>=0&&this.selectedList.splice(e,1)}else if(o.clearSelection(),e.length>0){if(e.some((e=>e&&e.userId===t.userId)))o.toggleRowSelection(t,!0),this.appendSelectVal(t);else{o.toggleRowSelection(t,!1);let e=this.selectedList.findIndex((e=>e&&e.userId===t.userId));e>=0&&this.selectedList.splice(e,1)}}else{o.toggleRowSelection(t,!1);let e=this.selectedList.findIndex((e=>e&&e.userId===t.userId));e>=0&&this.selectedList.splice(e,1)}},rowClickHandle(e,t){let o=this.$refs.multipleTable;const n=this.selectedList.some((t=>t.userId===e.userId));if(this.multiple||o.clearSelection(),o.setCurrentRow(),n){o.toggleRowSelection(e,!1);let t=this.selectedList.findIndex((t=>t.userId===e.userId));t>=0&&this.selectedList.splice(t,1)}else o.toggleRowSelection(e,!0),this.appendSelectVal(e)},appendSelectVal(e){if(!e||!e.userId)return;if(!(this.multiple||this.selectedList&&0!==this.selectedList.length&&this.selectedList[0].userId===e.userId))return void(this.selectedList=[e]);this.selectedList.find((t=>t.userId===e.userId))||(this.selectedList.push(e),setTimeout((()=>{this.$refs.tagInputRef.scrollBottom()}),200))},close(){this.dialogVisible=!1},submit(){this.$emit("dialog-confirm",this.selectedList)},end(){this.loading=!1},handleSizeChange(e){this.pager.pageSize=e;const t=this.genQueryParam();this.getEmpData(t)},handleCurrentChange(e){this.pager.pageNum=e;const t=this.genQueryParam();this.getEmpData(t)},genQueryParam(){const e=this.$refs.tree.getCurrentNode();let t={};return e&&(t="1"==e.type?{companyId:e.id}:{deptId:e.id}),t},isChecked(e){return this.selectedList.filter((t=>t.userId===e.userId)).length>0},handleSelectionChange(e){this.selectedList=e},handleNodeClick(e){let t={};"1"==e.type?t={companyId:e.id}:"2"==e.type&&(t={deptId:e.id,companyId:e.companyId}),this.pager.pageNum=1,this.getEmpData(t)}},mounted(){},watch:{filterText(e){this.$refs.tree&&this.$refs.tree.filter(e)}}},_hoisted_1$I={slot:"header",style:{padding:"0"}},_hoisted_2$B={class:"custom-tree-node"},_hoisted_3$t={key:0,style:{color:"#67c23a"}},_hoisted_4$s={key:1,style:{color:"#409EFF"}},_hoisted_5$r={key:2},_hoisted_6$n={slot:"header",style:{padding:"0"}};function _sfc_render$10(e,t,o,n,i,l){const a=vue.resolveComponent("tag-input"),r=vue.resolveComponent("el-header"),s=vue.resolveComponent("el-input"),d=vue.resolveComponent("OfficeBuilding"),u=vue.resolveComponent("el-icon"),c=vue.resolveComponent("Share"),p=vue.resolveComponent("el-tree"),m=vue.resolveComponent("el-card"),h=vue.resolveComponent("el-aside"),f=vue.resolveComponent("el-button"),v=vue.resolveComponent("el-table-column"),g=vue.resolveComponent("Male"),y=vue.resolveComponent("Female"),b=vue.resolveComponent("emp-info-popover"),w=vue.resolveComponent("el-table"),k=vue.resolveComponent("el-pagination"),_=vue.resolveComponent("el-main"),C=vue.resolveComponent("el-container"),x=vue.resolveComponent("cus-dialog"),S=vue.resolveDirective("loading");return vue.openBlock(),vue.createBlock(x,{visible:i.dialogVisible,onOnClose:l.close,ref:"templateDialog",width:o.width,title:o.title,onOnSubmit:l.submit,"custom-class":"selector-dialog-container"},{default:vue.withCtx((()=>[vue.createVNode(C,null,{default:vue.withCtx((()=>[vue.createVNode(r,{style:{padding:"0","min-height":"42px",height:"auto"}},{default:vue.withCtx((()=>[vue.createVNode(a,{ref:"tagInputRef",placeholder:"请选择","model-value":i.selectedList,onOnRemove:l.doRemove,onOnRemoveAll:l.doRemoveAll,"data-type":"emp","show-search":"hidden",scrollMaxHeight:"73"},null,8,["model-value","onOnRemove","onOnRemoveAll"])])),_:1}),vue.createVNode(C,null,{default:vue.withCtx((()=>[vue.createVNode(h,{width:"200px",style:{height:"400px"}},{default:vue.withCtx((()=>[vue.createVNode(m,{shadow:"never","body-style":"padding:0;height: 398px;overflow-y:scroll;"},{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_1$I,[vue.createVNode(s,{placeholder:"请输入关键字",size:"default",modelValue:i.filterText,"onUpdate:modelValue":t[0]||(t[0]=e=>i.filterText=e),"suffix-icon":i.Search,clearable:""},null,8,["modelValue","suffix-icon"])]),vue.createElementVNode("div",null,[vue.withDirectives((vue.openBlock(),vue.createBlock(p,{"highlight-current":"","default-expanded-keys":i.defaultExpandedKeys,class:"filter-tree","expand-on-click-node":!1,"filter-node-method":l.filterNode,onNodeClick:l.handleNodeClick,ref:"tree",data:i.orgTreeData,props:i.orgTreeProps},{default:vue.withCtx((({node:e,data:t})=>[vue.createElementVNode("span",_hoisted_2$B,["1"==t.type?(vue.openBlock(),vue.createElementBlock("span",_hoisted_3$t,[vue.createVNode(u,{style:{"vertical-align":"middle"}},{default:vue.withCtx((()=>[vue.createVNode(d)])),_:1}),vue.createTextVNode(" "+vue.toDisplayString(e.label),1)])):"2"==t.type?(vue.openBlock(),vue.createElementBlock("span",_hoisted_4$s,[vue.createVNode(u,{style:{"vertical-align":"middle"}},{default:vue.withCtx((()=>[vue.createVNode(c)])),_:1}),vue.createTextVNode(" "+vue.toDisplayString(e.label),1)])):(vue.openBlock(),vue.createElementBlock("span",_hoisted_5$r,vue.toDisplayString(e.label),1))])])),_:1},8,["default-expanded-keys","filter-node-method","onNodeClick","data","props"])),[[S,i.treeLoading]])])])),_:1})])),_:1}),vue.createVNode(_,{style:{padding:"0"}},{default:vue.withCtx((()=>[vue.createVNode(m,{shadow:"never","body-style":"padding:0;height: 397px;overflow-y:hidden;"},{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_6$n,[vue.createVNode(s,{placeholder:"请输入关键字",size:"default",onKeyup:vue.withKeys(l.searchEmpHandle,["enter","native"]),modelValue:i.filterEmpText,"onUpdate:modelValue":t[1]||(t[1]=e=>i.filterEmpText=e),"suffix-icon":i.Search,clearable:""},{default:vue.withCtx((()=>[vue.createVNode(f,{slot:"append",type:"primary",icon:"el-icon-search",onClick:l.searchEmpHandle},null,8,["onClick"])])),_:1},8,["onKeyup","modelValue","suffix-icon"])]),vue.createElementVNode("div",null,[vue.withDirectives((vue.openBlock(),vue.createBlock(w,{ref:"multipleTable",data:i.empData,height:"320",onRowClick:l.rowClickHandle,"row-key":l.getRowKeys,stripe:"","highlight-current-row":!0,onSelect:l.selectionChangeHandle,onSelectAll:l.handleSelectAllChange},{default:vue.withCtx((()=>[vue.createVNode(v,{type:"selection",property:"operate",align:"center",width:"60"}),vue.createVNode(v,{property:"userName",label:"姓名",width:"120"},{default:vue.withCtx((e=>[vue.createVNode(b,{code:e.row.userId,name:e.row.userName},{default:vue.withCtx((()=>[1==e.row.sex?(vue.openBlock(),vue.createBlock(u,{key:0,color:"#10aeff"},{default:vue.withCtx((()=>[vue.createVNode(g)])),_:1})):(vue.openBlock(),vue.createBlock(u,{key:1,color:"#f27e7d"},{default:vue.withCtx((()=>[vue.createVNode(y)])),_:1})),vue.createTextVNode(" "+vue.toDisplayString(e.row.userName),1)])),_:2},1032,["code","name"])])),_:1}),vue.createVNode(v,{property:"companyName",label:"组织"},{default:vue.withCtx((e=>[vue.createTextVNode(vue.toDisplayString(e.row.companyName)+" / "+vue.toDisplayString(e.row.deptName),1)])),_:1})])),_:1},8,["data","onRowClick","row-key","onSelect","onSelectAll"])),[[S,i.empLoading]]),vue.createVNode(k,{small:"",background:"",onSizeChange:l.handleSizeChange,onCurrentChange:l.handleCurrentChange,style:{"text-align":"center","margin-top":"4px"},"current-page":i.pager.pageNum,"page-size":i.pager.pageSize,"page-sizes":i.pager.sizes,total:i.pager.total,layout:"sizes, total, prev, pager, next"},null,8,["onSizeChange","onCurrentChange","current-page","page-size","page-sizes","total"])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["visible","onOnClose","width","title","onOnSubmit"])}var EmpSelectorDialog=_export_sfc(_sfc_main$12,[["render",_sfc_render$10]]);const isDef=e=>null!=e,isFunction=e=>"function"==typeof e,isObject=e=>null!==e&&"object"==typeof e,isPromise=e=>isObject(e)&&isFunction(e.then)&&isFunction(e.catch),isNumeric=e=>"number"==typeof e||/^\d+(\.\d+)?$/.test(e),isIOS$1=()=>!!inBrowser$1&&/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase());function noop(){}const extend=Object.assign,inBrowser$1="undefined"!=typeof window;function get(e,t){const o=t.split(".");let n=e;return o.forEach((e=>{var t;n=isObject(n)&&null!=(t=n[e])?t:""})),n}function pick(e,t,o){return t.reduce(((t,n)=>(o&&void 0===e[n]||(t[n]=e[n]),t)),{})}const toArray=e=>Array.isArray(e)?e:[e],unknownProp=null,numericProp=[Number,String],truthProp={type:Boolean,default:!0},makeRequiredProp=e=>({type:e,required:!0}),makeArrayProp=()=>({type:Array,default:()=>[]}),makeNumericProp=e=>({type:numericProp,default:e}),makeStringProp=e=>({type:String,default:e});var inBrowser="undefined"!=typeof window,isWindow=e=>e===window,makeDOMRect=(e,t)=>({top:0,left:0,right:e,bottom:t,width:e,height:t}),useRect=e=>{const t=vue.unref(e);if(isWindow(t)){const e=t.innerWidth,o=t.innerHeight;return makeDOMRect(e,o)}return(null==t?void 0:t.getBoundingClientRect)?t.getBoundingClientRect():makeDOMRect(0,0)};function useParent(e){const t=vue.inject(e,null);if(t){const e=vue.getCurrentInstance(),{link:o,unlink:n,internalChildren:i}=t;o(e),vue.onUnmounted((()=>n(e)));return{parent:t,index:vue.computed((()=>i.indexOf(e)))}}return{parent:null,index:vue.ref(-1)}}function flattenVNodes(e){const t=[],o=e=>{Array.isArray(e)&&e.forEach((e=>{var n;vue.isVNode(e)&&(t.push(e),(null==(n=e.component)?void 0:n.subTree)&&(t.push(e.component.subTree),o(e.component.subTree.children)),e.children&&o(e.children))}))};return o(e),t}var findVNodeIndex=(e,t)=>{const o=e.indexOf(t);return-1===o?e.findIndex((e=>void 0!==t.key&&null!==t.key&&e.type===t.type&&e.key===t.key)):o},width,height;function sortChildren(e,t,o){const n=flattenVNodes(e.subTree.children);o.sort(((e,t)=>findVNodeIndex(n,e.vnode)-findVNodeIndex(n,t.vnode)));const i=o.map((e=>e.proxy));t.sort(((e,t)=>i.indexOf(e)-i.indexOf(t)))}function useChildren(e){const t=vue.reactive([]),o=vue.reactive([]),n=vue.getCurrentInstance();return{children:t,linkChildren:i=>{vue.provide(e,Object.assign({link:e=>{e.proxy&&(o.push(e),t.push(e.proxy),sortChildren(n,t,o))},unlink:e=>{const n=o.indexOf(e);t.splice(n,1),o.splice(n,1)},children:t,internalChildren:o},i))}}}function onMountedOrActivated(e){let t;vue.onMounted((()=>{e(),vue.nextTick((()=>{t=!0}))})),vue.onActivated((()=>{t&&e()}))}function useEventListener(e,t,o={}){if(!inBrowser)return;const{target:n=window,passive:i=!1,capture:l=!1}=o;let a,r=!1;const s=o=>{if(r)return;const n=vue.unref(o);n&&!a&&(n.addEventListener(e,t,{capture:l,passive:i}),a=!0)},d=o=>{if(r)return;const n=vue.unref(o);n&&a&&(n.removeEventListener(e,t,l),a=!1)};let u;return vue.onUnmounted((()=>d(n))),vue.onDeactivated((()=>d(n))),onMountedOrActivated((()=>s(n))),vue.isRef(n)&&(u=vue.watch(n,((e,t)=>{d(t),s(e)}))),()=>{null==u||u(),d(n),r=!0}}function useWindowSize(){if(!width&&(width=vue.ref(0),height=vue.ref(0),inBrowser)){const e=()=>{width.value=window.innerWidth,height.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:width,height:height}}var overflowScrollReg=/scroll|auto|overlay/i,defaultRoot=inBrowser?window:void 0;function isElement(e){return"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType}function getScrollParent(e,t=defaultRoot){let o=e;for(;o&&o!==t&&isElement(o);){const{overflowY:e}=window.getComputedStyle(o);if(overflowScrollReg.test(e))return o;o=o.parentNode}return t}function useScrollParent(e,t=defaultRoot){const o=vue.ref();return vue.onMounted((()=>{e.value&&(o.value=getScrollParent(e.value,t))})),o}var CUSTOM_FIELD_INJECTION_KEY=Symbol("van-field");function useCustomFieldValue(e){const t=vue.inject(CUSTOM_FIELD_INJECTION_KEY,null);t&&!t.customValue.value&&(t.customValue.value=e,vue.watch(e,(()=>{t.resetValidation(),t.validateWithTrigger("onChange")})))}function getScrollTop(e){const t="scrollTop"in e?e.scrollTop:e.pageYOffset;return Math.max(t,0)}function setScrollTop(e,t){"scrollTop"in e?e.scrollTop=t:e.scrollTo(e.scrollX,t)}function getRootScrollTop(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function setRootScrollTop(e){setScrollTop(window,e),setScrollTop(document.body,e)}const isIOS=isIOS$1();function resetScroll(){isIOS&&setRootScrollTop(getRootScrollTop())}const stopPropagation=e=>e.stopPropagation();function preventDefault(e,t){("boolean"!=typeof e.cancelable||e.cancelable)&&e.preventDefault(),t&&stopPropagation(e)}function isHidden(e){const t=vue.unref(e);if(!t)return!1;const o=window.getComputedStyle(t),n="none"===o.display,i=null===t.offsetParent&&"fixed"!==o.position;return n||i}function addUnit(e){if(isDef(e))return isNumeric(e)?`${e}px`:String(e)}function getSizeStyle(e){if(isDef(e)){if(Array.isArray(e))return{width:addUnit(e[0]),height:addUnit(e[1])};const t=addUnit(e);return{width:t,height:t}}}function getZIndexStyle(e){const t={};return void 0!==e&&(t.zIndex=+e),t}useWindowSize();const camelizeRE=/-(\w)/g,camelize=e=>e.replace(camelizeRE,((e,t)=>t.toUpperCase())),kebabCase=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"");function trimExtraChar(e,t,o){const n=e.indexOf(t);return-1===n?e:"-"===t&&0!==n?e.slice(0,n):e.slice(0,n+1)+e.slice(n).replace(o,"")}function formatNumber(e,t=!0,o=!0){e=t?trimExtraChar(e,".",/\./g):e.split(".")[0];const n=t?/[^-0-9.]/g:/[^-0-9]/g;return(e=o?trimExtraChar(e,"-",/-/g):e.replace(/-/,"")).replace(n,"")}const{hasOwnProperty:hasOwnProperty}=Object.prototype;function assignKey(e,t,o){const n=t[o];isDef(n)&&(hasOwnProperty.call(e,o)&&isObject(n)?e[o]=deepAssign(Object(e[o]),n):e[o]=n)}function deepAssign(e,t){return Object.keys(t).forEach((o=>{assignKey(e,t,o)})),e}var stdin_default$m={name:"姓名",tel:"电话",save:"保存",confirm:"确认",cancel:"取消",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(e,t)=>`${e}年${t}月`,rangePrompt:e=>`最多选择 ${e} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:e=>`${e}折`,condition:e=>`满${e}元可用`},vanCouponCell:{title:"优惠券",count:e=>`${e}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",postal:"邮政编码",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",postalEmpty:"邮政编码不正确",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}};const lang=vue.ref("zh-CN"),messages=vue.reactive({"zh-CN":stdin_default$m}),Locale={messages:()=>messages[lang.value],use(e,t){lang.value=e,this.add({[e]:t})},add(e={}){deepAssign(messages,e)}};var stdin_default$l=Locale;function createTranslate(e){const t=camelize(e)+".";return(e,...o)=>{const n=stdin_default$l.messages(),i=get(n,t+e)||get(n,e);return isFunction(i)?i(...o):i}}function genBem(e,t){return t?"string"==typeof t?` ${e}--${t}`:Array.isArray(t)?t.reduce(((t,o)=>t+genBem(e,o)),""):Object.keys(t).reduce(((o,n)=>o+(t[n]?genBem(e,n):"")),""):""}function createBEM(e){return(t,o)=>(t&&"string"!=typeof t&&(o=t,t=""),`${t=t?`${e}__${t}`:e}${genBem(t,o)}`)}function createNamespace(e){const t=`van-${e}`;return[t,createBEM(t),createTranslate(t)]}const BORDER="van-hairline",BORDER_SURROUND=`${BORDER}--surround`,BORDER_TOP_BOTTOM=`${BORDER}--top-bottom`,HAPTICS_FEEDBACK="van-haptics-feedback",FORM_KEY=Symbol("van-form");function callInterceptor(e,{args:t=[],done:o,canceled:n}){if(e){const i=e.apply(null,t);isPromise(i)?i.then((e=>{e?o():n&&n()})).catch(noop):i?o():n&&n()}else o()}function withInstall(e){return e.install=t=>{const{name:o}=e;o&&(t.component(o,e),t.component(camelize(`-${o}`),e))},e}const POPUP_TOGGLE_KEY=Symbol();function useExpose(e){const t=vue.getCurrentInstance();t&&extend(t.proxy,e)}const routeProps={to:[String,Object],url:String,replace:Boolean};function route({to:e,url:t,replace:o,$router:n}){e&&n?n[o?"replace":"push"](e):t&&(o?location.replace(t):location.href=t)}function useRoute(){const e=vue.getCurrentInstance().proxy;return()=>route(e)}const[name$k,bem$k]=createNamespace("badge"),badgeProps={dot:Boolean,max:numericProp,tag:makeStringProp("div"),color:String,offset:Array,content:numericProp,showZero:truthProp,position:makeStringProp("top-right")};var stdin_default$k=vue.defineComponent({name:name$k,props:badgeProps,setup(e,{slots:t}){const o=()=>{if(t.content)return!0;const{content:o,showZero:n}=e;return isDef(o)&&""!==o&&(n||0!==o&&"0"!==o)},n=()=>{const{dot:n,max:i,content:l}=e;if(!n&&o())return t.content?t.content():isDef(i)&&isNumeric(l)&&+l>i?`${i}+`:l},i=vue.computed((()=>{const o={background:e.color};if(e.offset){const[n,i]=e.offset;t.default?(o.top=addUnit(i),o.right="number"==typeof n?addUnit(-n):n.startsWith("-")?n.replace("-",""):`-${n}`):(o.marginTop=addUnit(i),o.marginLeft=addUnit(n))}return o})),l=()=>{if(o()||e.dot)return vue.createVNode("div",{class:bem$k([e.position,{dot:e.dot,fixed:!!t.default}]),style:i.value},[n()])};return()=>{if(t.default){const{tag:o}=e;return vue.createVNode(o,{class:bem$k("wrapper")},{default:()=>[t.default(),l()]})}return l()}}});const Badge=withInstall(stdin_default$k);let globalZIndex=2e3;const useGlobalZIndex=()=>++globalZIndex,setGlobalZIndex=e=>{globalZIndex=e},[name$j,bem$j]=createNamespace("config-provider"),CONFIG_PROVIDER_KEY=Symbol(name$j),configProviderProps={tag:makeStringProp("div"),zIndex:Number,themeVars:Object,iconPrefix:String};function mapThemeVarsToCSSVars(e){const t={};return Object.keys(e).forEach((o=>{t[`--van-${kebabCase(o)}`]=e[o]})),t}vue.defineComponent({name:name$j,props:configProviderProps,setup(e,{slots:t}){const o=vue.computed((()=>{if(e.themeVars)return mapThemeVarsToCSSVars(e.themeVars)}));return vue.provide(CONFIG_PROVIDER_KEY,e),vue.watchEffect((()=>{void 0!==e.zIndex&&setGlobalZIndex(e.zIndex)})),()=>vue.createVNode(e.tag,{class:bem$j(),style:o.value},{default:()=>{var e;return[null==(e=t.default)?void 0:e.call(t)]}})}});const[name$i,bem$i]=createNamespace("icon"),isImage=e=>null==e?void 0:e.includes("/"),iconProps={dot:Boolean,tag:makeStringProp("i"),name:String,size:numericProp,badge:numericProp,color:String,badgeProps:Object,classPrefix:String};var stdin_default$j=vue.defineComponent({name:name$i,props:iconProps,setup(e,{slots:t}){const o=vue.inject(CONFIG_PROVIDER_KEY,null),n=vue.computed((()=>e.classPrefix||(null==o?void 0:o.iconPrefix)||bem$i()));return()=>{const{tag:o,dot:i,name:l,size:a,badge:r,color:s}=e,d=isImage(l);return vue.createVNode(Badge,vue.mergeProps({dot:i,tag:o,class:[n.value,d?"":`${n.value}-${l}`],style:{color:s,fontSize:addUnit(a)},content:r},e.badgeProps),{default:()=>{var e;return[null==(e=t.default)?void 0:e.call(t),d&&vue.createVNode("img",{class:bem$i("image"),src:l},null)]}})}}});const Icon=withInstall(stdin_default$j),[name$h,bem$h]=createNamespace("loading"),SpinIcon=Array(12).fill(null).map(((e,t)=>vue.createVNode("i",{class:bem$h("line",String(t+1))},null))),CircularIcon=vue.createVNode("svg",{class:bem$h("circular"),viewBox:"25 25 50 50"},[vue.createVNode("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),loadingProps={size:numericProp,type:makeStringProp("circular"),color:String,vertical:Boolean,textSize:numericProp,textColor:String};var stdin_default$i=vue.defineComponent({name:name$h,props:loadingProps,setup(e,{slots:t}){const o=vue.computed((()=>extend({color:e.color},getSizeStyle(e.size)))),n=()=>{var o;if(t.default)return vue.createVNode("span",{class:bem$h("text"),style:{fontSize:addUnit(e.textSize),color:null!=(o=e.textColor)?o:e.color}},[t.default()])};return()=>{const{type:t,vertical:i}=e;return vue.createVNode("div",{class:bem$h([t,{vertical:i}]),"aria-live":"polite","aria-busy":!0},[vue.createVNode("span",{class:bem$h("spinner",t),style:o.value},["spinner"===t?SpinIcon:CircularIcon]),n()])}}});const Loading=withInstall(stdin_default$i),[name$g,bem$g]=createNamespace("button"),buttonProps=extend({},routeProps,{tag:makeStringProp("button"),text:String,icon:String,type:makeStringProp("default"),size:makeStringProp("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:makeStringProp("button"),loadingSize:numericProp,loadingText:String,loadingType:String,iconPosition:makeStringProp("left")});var stdin_default$h=vue.defineComponent({name:name$g,props:buttonProps,emits:["click"],setup(e,{emit:t,slots:o}){const n=useRoute(),i=()=>e.loading?o.loading?o.loading():vue.createVNode(Loading,{size:e.loadingSize,type:e.loadingType,class:bem$g("loading")},null):o.icon?vue.createVNode("div",{class:bem$g("icon")},[o.icon()]):e.icon?vue.createVNode(Icon,{name:e.icon,class:bem$g("icon"),classPrefix:e.iconPrefix},null):void 0,l=()=>{let t;if(t=e.loading?e.loadingText:o.default?o.default():e.text,t)return vue.createVNode("span",{class:bem$g("text")},[t])},a=()=>{const{color:t,plain:o}=e;if(t){const e={color:o?t:"white"};return o||(e.background=t),t.includes("gradient")?e.border=0:e.borderColor=t,e}},r=o=>{e.loading?preventDefault(o):e.disabled||(t("click",o),n())};return()=>{const{tag:t,type:o,size:n,block:s,round:d,plain:u,square:c,loading:p,disabled:m,hairline:h,nativeType:f,iconPosition:v}=e,g=[bem$g([o,n,{plain:u,block:s,round:d,square:c,loading:p,disabled:m,hairline:h}]),{[BORDER_SURROUND]:h}];return vue.createVNode(t,{type:f,class:g,style:a(),disabled:m,onClick:r},{default:()=>[vue.createVNode("div",{class:bem$g("content")},["left"===v&&i(),l(),"right"===v&&i()])]})}}});const Button=withInstall(stdin_default$h),popupSharedProps={show:Boolean,zIndex:numericProp,overlay:truthProp,duration:numericProp,teleport:[String,Object],lockScroll:truthProp,lazyRender:truthProp,beforeClose:Function,overlayStyle:Object,overlayClass:unknownProp,transitionAppear:Boolean,closeOnClickOverlay:truthProp};function getDirection(e,t){return e>t?"horizontal":t>e?"vertical":""}function useTouch(){const e=vue.ref(0),t=vue.ref(0),o=vue.ref(0),n=vue.ref(0),i=vue.ref(0),l=vue.ref(0),a=vue.ref(""),r=()=>{o.value=0,n.value=0,i.value=0,l.value=0,a.value=""};return{move:r=>{const s=r.touches[0];o.value=(s.clientX<0?0:s.clientX)-e.value,n.value=s.clientY-t.value,i.value=Math.abs(o.value),l.value=Math.abs(n.value);(!a.value||i.value<10&&l.value<10)&&(a.value=getDirection(i.value,l.value))},start:o=>{r(),e.value=o.touches[0].clientX,t.value=o.touches[0].clientY},reset:r,startX:e,startY:t,deltaX:o,deltaY:n,offsetX:i,offsetY:l,direction:a,isVertical:()=>"vertical"===a.value,isHorizontal:()=>"horizontal"===a.value}}let totalLockCount=0;const BODY_LOCK_CLASS="van-overflow-hidden";function useLockScroll(e,t){const o=useTouch(),n=t=>{o.move(t);const n=o.deltaY.value>0?"10":"01",i=getScrollParent(t.target,e.value),{scrollHeight:l,offsetHeight:a,scrollTop:r}=i;let s="11";0===r?s=a>=l?"00":"01":r+a>=l&&(s="10"),"11"===s||!o.isVertical()||parseInt(s,2)&parseInt(n,2)||preventDefault(t,!0)},i=()=>{document.addEventListener("touchstart",o.start),document.addEventListener("touchmove",n,{passive:!1}),totalLockCount||document.body.classList.add(BODY_LOCK_CLASS),totalLockCount++},l=()=>{totalLockCount&&(document.removeEventListener("touchstart",o.start),document.removeEventListener("touchmove",n),totalLockCount--,totalLockCount||document.body.classList.remove(BODY_LOCK_CLASS))},a=()=>t()&&l();onMountedOrActivated((()=>t()&&i())),vue.onDeactivated(a),vue.onBeforeUnmount(a),vue.watch(t,(e=>{e?i():l()}))}function useLazyRender(e){const t=vue.ref(!1);return vue.watch(e,(e=>{e&&(t.value=e)}),{immediate:!0}),e=>()=>t.value?e():null}const[name$f,bem$f]=createNamespace("overlay"),overlayProps={show:Boolean,zIndex:numericProp,duration:numericProp,className:unknownProp,lockScroll:truthProp,lazyRender:truthProp,customStyle:Object};var stdin_default$g=vue.defineComponent({name:name$f,props:overlayProps,setup(e,{slots:t}){const o=vue.ref(),n=useLazyRender((()=>e.show||!e.lazyRender))((()=>{var n;const i=extend(getZIndexStyle(e.zIndex),e.customStyle);return isDef(e.duration)&&(i.animationDuration=`${e.duration}s`),vue.withDirectives(vue.createVNode("div",{ref:o,style:i,class:[bem$f(),e.className]},[null==(n=t.default)?void 0:n.call(t)]),[[vue.vShow,e.show]])}));return useEventListener("touchmove",(t=>{e.lockScroll&&preventDefault(t,!0)}),{target:o}),()=>vue.createVNode(vue.Transition,{name:"van-fade",appear:!0},{default:n})}});const Overlay=withInstall(stdin_default$g),popupProps=extend({},popupSharedProps,{round:Boolean,position:makeStringProp("center"),closeIcon:makeStringProp("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:makeStringProp("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[name$e,bem$e]=createNamespace("popup");var stdin_default$f=vue.defineComponent({name:name$e,inheritAttrs:!1,props:popupProps,emits:["open","close","opened","closed","keydown","update:show","click-overlay","click-close-icon"],setup(e,{emit:t,attrs:o,slots:n}){let i,l;const a=vue.ref(),r=vue.ref(),s=useLazyRender((()=>e.show||!e.lazyRender)),d=vue.computed((()=>{const t={zIndex:a.value};if(isDef(e.duration)){t["center"===e.position?"animationDuration":"transitionDuration"]=`${e.duration}s`}return t})),u=()=>{i||(i=!0,a.value=void 0!==e.zIndex?+e.zIndex:useGlobalZIndex(),t("open"))},c=()=>{i&&callInterceptor(e.beforeClose,{done(){i=!1,t("close"),t("update:show",!1)}})},p=o=>{t("click-overlay",o),e.closeOnClickOverlay&&c()},m=()=>{if(e.overlay)return vue.createVNode(Overlay,{show:e.show,class:e.overlayClass,zIndex:a.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:p},{default:n["overlay-content"]})},h=e=>{t("click-close-icon",e),c()},f=()=>{if(e.closeable)return vue.createVNode(Icon,{role:"button",tabindex:0,name:e.closeIcon,class:[bem$e("close-icon",e.closeIconPosition),HAPTICS_FEEDBACK],classPrefix:e.iconPrefix,onClick:h},null)},v=()=>t("opened"),g=()=>t("closed"),y=e=>t("keydown",e),b=s((()=>{var t;const{round:i,position:l,safeAreaInsetTop:a,safeAreaInsetBottom:s}=e;return vue.withDirectives(vue.createVNode("div",vue.mergeProps({ref:r,style:d.value,role:"dialog",tabindex:0,class:[bem$e({round:i,[l]:l}),{"van-safe-area-top":a,"van-safe-area-bottom":s}],onKeydown:y},o),[null==(t=n.default)?void 0:t.call(n),f()]),[[vue.vShow,e.show]])})),w=()=>{const{position:t,transition:o,transitionAppear:n}=e,i="center"===t?"van-fade":`van-popup-slide-${t}`;return vue.createVNode(vue.Transition,{name:o||i,appear:n,onAfterEnter:v,onAfterLeave:g},{default:b})};return vue.watch((()=>e.show),(e=>{e&&!i&&(u(),0===o.tabindex&&vue.nextTick((()=>{var e;null==(e=r.value)||e.focus()}))),!e&&i&&(i=!1,t("close"))})),useExpose({popupRef:r}),useLockScroll(r,(()=>e.show&&e.lockScroll)),useEventListener("popstate",(()=>{e.closeOnPopstate&&(c(),l=!1)})),vue.onMounted((()=>{e.show&&u()})),vue.onActivated((()=>{l&&(t("update:show",!0),l=!1)})),vue.onDeactivated((()=>{e.show&&e.teleport&&(c(),l=!0)})),vue.provide(POPUP_TOGGLE_KEY,(()=>e.show)),()=>e.teleport?vue.createVNode(vue.Teleport,{to:e.teleport},{default:()=>[m(),w()]}):vue.createVNode(vue.Fragment,null,[m(),w()])}});const Popup=withInstall(stdin_default$f),[name$d,bem$d]=createNamespace("cell"),cellSharedProps={icon:String,size:String,title:numericProp,value:numericProp,label:numericProp,center:Boolean,isLink:Boolean,border:truthProp,required:Boolean,iconPrefix:String,valueClass:unknownProp,labelClass:unknownProp,titleClass:unknownProp,titleStyle:null,arrowDirection:String,clickable:{type:Boolean,default:null}},cellProps=extend({},cellSharedProps,routeProps);var stdin_default$e=vue.defineComponent({name:name$d,props:cellProps,setup(e,{slots:t}){const o=useRoute(),n=()=>{if(t.label||isDef(e.label))return vue.createVNode("div",{class:[bem$d("label"),e.labelClass]},[t.label?t.label():e.label])},i=()=>{if(t.title||isDef(e.title))return vue.createVNode("div",{class:[bem$d("title"),e.titleClass],style:e.titleStyle},[t.title?t.title():vue.createVNode("span",null,[e.title]),n()])},l=()=>{const o=t.value||t.default;if(o||isDef(e.value)){const n=t.title||isDef(e.title);return vue.createVNode("div",{class:[bem$d("value",{alone:!n}),e.valueClass]},[o?o():vue.createVNode("span",null,[e.value])])}},a=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const t=e.arrowDirection&&"right"!==e.arrowDirection?`arrow-${e.arrowDirection}`:"arrow";return vue.createVNode(Icon,{name:t,class:bem$d("right-icon")},null)}};return()=>{var n,r;const{size:s,center:d,border:u,isLink:c,required:p}=e,m=null!=(n=e.clickable)?n:c,h={center:d,required:p,clickable:m,borderless:!u};return s&&(h[s]=!!s),vue.createVNode("div",{class:bem$d(h),role:m?"button":void 0,tabindex:m?0:void 0,onClick:o},[t.icon?t.icon():e.icon?vue.createVNode(Icon,{name:e.icon,class:bem$d("left-icon"),classPrefix:e.iconPrefix},null):void 0,i(),l(),a(),null==(r=t.extra)?void 0:r.call(t)])}}});const Cell=withInstall(stdin_default$e);function isEmptyValue(e){return Array.isArray(e)?!e.length:0!==e&&!e}function runSyncRule(e,t){if(isEmptyValue(e)){if(t.required)return!1;if(!1===t.validateEmpty)return!0}return!(t.pattern&&!t.pattern.test(String(e)))}function runRuleValidator(e,t){return new Promise((o=>{const n=t.validator(e,t);isPromise(n)?n.then(o):o(n)}))}function getRuleMessage(e,t){const{message:o}=t;return isFunction(o)?o(e,t):o||""}function startComposing({target:e}){e.composing=!0}function endComposing({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function resizeTextarea(e,t){const o=getRootScrollTop();e.style.height="auto";let n=e.scrollHeight;if(isObject(t)){const{maxHeight:e,minHeight:o}=t;void 0!==e&&(n=Math.min(n,e)),void 0!==o&&(n=Math.max(n,o))}n&&(e.style.height=`${n}px`,setRootScrollTop(o))}function mapInputType(e){return"number"===e?{type:"text",inputmode:"decimal"}:"digit"===e?{type:"tel",inputmode:"numeric"}:{type:e}}function getStringLength(e){return[...e].length}function cutString(e,t){return[...e].slice(0,t).join("")}let current=0;function useId(){const e=vue.getCurrentInstance(),{name:t="unknown"}=(null==e?void 0:e.type)||{};return`${t}-${++current}`}const[name$c,bem$c]=createNamespace("field"),fieldSharedProps={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:numericProp,formatter:Function,clearIcon:makeStringProp("clear"),modelValue:makeNumericProp(""),inputAlign:String,placeholder:String,autocomplete:String,errorMessage:String,enterkeyhint:String,clearTrigger:makeStringProp("focus"),formatTrigger:makeStringProp("onChange"),error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},fieldProps=extend({},cellSharedProps,fieldSharedProps,{rows:numericProp,type:makeStringProp("text"),rules:Array,autosize:[Boolean,Object],labelWidth:numericProp,labelClass:unknownProp,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var stdin_default$d=vue.defineComponent({name:name$c,props:fieldProps,emits:["blur","focus","clear","keypress","click-input","end-validate","start-validate","click-left-icon","click-right-icon","update:modelValue"],setup(e,{emit:t,slots:o}){const n=useId(),i=vue.reactive({status:"unvalidated",focused:!1,validateMessage:""}),l=vue.ref(),a=vue.ref(),r=vue.ref(),{parent:s}=useParent(FORM_KEY),d=()=>{var t;return String(null!=(t=e.modelValue)?t:"")},u=t=>isDef(e[t])?e[t]:s&&isDef(s.props[t])?s.props[t]:void 0,c=vue.computed((()=>{const t=u("readonly");if(e.clearable&&!t){const t=""!==d(),o="always"===e.clearTrigger||"focus"===e.clearTrigger&&i.focused;return t&&o}return!1})),p=vue.computed((()=>r.value&&o.input?r.value():e.modelValue)),m=()=>{i.status="unvalidated",i.validateMessage=""},h=()=>t("end-validate",{status:i.status}),f=(o=e.rules)=>new Promise((n=>{m(),o?(t("start-validate"),(e=>e.reduce(((e,t)=>e.then((()=>{if("failed"===i.status)return;let{value:e}=p;if(t.formatter&&(e=t.formatter(e,t)),!runSyncRule(e,t))return i.status="failed",void(i.validateMessage=getRuleMessage(e,t));if(t.validator){if(isEmptyValue(e)&&!1===t.validateEmpty)return;return runRuleValidator(e,t).then((o=>{o&&"string"==typeof o?(i.status="failed",i.validateMessage=o):!1===o&&(i.status="failed",i.validateMessage=getRuleMessage(e,t))}))}}))),Promise.resolve()))(o).then((()=>{"failed"===i.status?(n({name:e.name,message:i.validateMessage}),h()):(i.status="passed",n(),h())}))):n()})),v=t=>{if(s&&e.rules){const{validateTrigger:o}=s.props,n=toArray(o).includes(t),i=e.rules.filter((e=>e.trigger?toArray(e.trigger).includes(t):n));i.length&&f(i)}},g=(o,n="onChange")=>{const a=o;o=(t=>{var o;const{maxlength:n}=e;if(isDef(n)&&getStringLength(t)>n){const e=d();if(e&&getStringLength(e)===+n)return e;const a=null==(o=l.value)?void 0:o.selectionEnd;if(i.focused&&a){const e=[...t],o=e.length-+n;return e.splice(a-o,o),e.join("")}return cutString(t,+n)}return t})(o);const r=getStringLength(a)-getStringLength(o);if("number"===e.type||"digit"===e.type){const t="number"===e.type;o=formatNumber(o,t,t)}let s=0;if(e.formatter&&n===e.formatTrigger){const{formatter:t,maxlength:n}=e;if(o=t(o),isDef(n)&&getStringLength(o)>n&&(o=cutString(o,+n)),l.value&&i.focused){const{selectionEnd:e}=l.value,o=cutString(a,e);s=getStringLength(t(o))-getStringLength(o)}}if(l.value&&l.value.value!==o)if(i.focused){let{selectionStart:e,selectionEnd:t}=l.value;if(l.value.value=o,isDef(e)&&isDef(t)){const n=getStringLength(o);r?(e-=r,t-=r):s&&(e+=s,t+=s),l.value.setSelectionRange(Math.min(e,n),Math.min(t,n))}}else l.value.value=o;o!==e.modelValue&&t("update:modelValue",o)},y=e=>{e.target.composing||g(e.target.value)},b=()=>{var e;return null==(e=l.value)?void 0:e.blur()},w=()=>{const t=l.value;"textarea"===e.type&&e.autosize&&t&&resizeTextarea(t,e.autosize)},k=e=>{i.focused=!0,t("focus",e),vue.nextTick(w),u("readonly")&&b()},_=e=>{u("readonly")||(i.focused=!1,g(d(),"onBlur"),t("blur",e),v("onBlur"),vue.nextTick(w),resetScroll())},C=e=>t("click-input",e),x=e=>t("click-left-icon",e),S=e=>t("click-right-icon",e),V=vue.computed((()=>"boolean"==typeof e.error?e.error:!(!s||!s.props.showError||"failed"!==i.status)||void 0)),N=vue.computed((()=>{const e=u("labelWidth");if(e)return{width:addUnit(e)}})),E=o=>{if(13===o.keyCode){s&&s.props.submitOnEnter||"textarea"===e.type||preventDefault(o),"search"===e.type&&b()}t("keypress",o)},$=()=>e.id||`${n}-input`,D=()=>{const t=bem$c("control",[u("inputAlign"),{error:V.value,custom:!!o.input,"min-height":"textarea"===e.type&&!e.autosize}]);if(o.input)return vue.createVNode("div",{class:t,onClick:C},[o.input()]);const i={id:$(),ref:l,name:e.name,rows:void 0!==e.rows?+e.rows:void 0,class:t,disabled:u("disabled"),readonly:u("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,enterkeyhint:e.enterkeyhint,"aria-labelledby":e.label?`${n}-label`:void 0,onBlur:_,onFocus:k,onInput:y,onClick:C,onChange:endComposing,onKeypress:E,onCompositionend:endComposing,onCompositionstart:startComposing};return"textarea"===e.type?vue.createVNode("textarea",i,null):vue.createVNode("input",vue.mergeProps(mapInputType(e.type),i),null)},B=()=>{const t=o["right-icon"];if(e.rightIcon||t)return vue.createVNode("div",{class:bem$c("right-icon"),onClick:S},[t?t():vue.createVNode(Icon,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},T=()=>{if(e.showWordLimit&&e.maxlength){const t=getStringLength(d());return vue.createVNode("div",{class:bem$c("word-limit")},[vue.createVNode("span",{class:bem$c("word-num")},[t]),vue.createTextVNode("/"),e.maxlength])}},O=()=>{if(s&&!1===s.props.showErrorMessage)return;const t=e.errorMessage||i.validateMessage;if(t){const e=o["error-message"],n=u("errorMessageAlign");return vue.createVNode("div",{class:bem$c("error-message",n)},[e?e({message:t}):t])}},I=()=>[vue.createVNode("div",{class:bem$c("body")},[D(),c.value&&vue.createVNode(Icon,{ref:a,name:e.clearIcon,class:bem$c("clear")},null),B(),o.button&&vue.createVNode("div",{class:bem$c("button")},[o.button()])]),T(),O()];return useExpose({blur:b,focus:()=>{var e;return null==(e=l.value)?void 0:e.focus()},validate:f,formValue:p,resetValidation:m,getValidationStatus:()=>i.status}),vue.provide(CUSTOM_FIELD_INJECTION_KEY,{customValue:r,resetValidation:m,validateWithTrigger:v}),vue.watch((()=>e.modelValue),(()=>{g(d()),m(),v("onChange"),vue.nextTick(w)})),vue.onMounted((()=>{g(d(),e.formatTrigger),vue.nextTick(w)})),useEventListener("touchstart",(e=>{preventDefault(e),t("update:modelValue",""),t("clear",e)}),{target:vue.computed((()=>{var e;return null==(e=a.value)?void 0:e.$el}))}),()=>{const t=u("disabled"),i=u("labelAlign"),l=(()=>{const t=u("colon")?":":"";return o.label?[o.label(),t]:e.label?vue.createVNode("label",{id:`${n}-label`,for:$()},[e.label+t]):void 0})(),a=(()=>{const t=o["left-icon"];if(e.leftIcon||t)return vue.createVNode("div",{class:bem$c("left-icon"),onClick:x},[t?t():vue.createVNode(Icon,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])})();return vue.createVNode(Cell,{size:e.size,icon:e.leftIcon,class:bem$c({error:V.value,disabled:t,[`label-${i}`]:i}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:N.value,valueClass:bem$c("value"),titleClass:[bem$c("label",[i,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:a?()=>a:null,title:l?()=>l:null,value:I,extra:o.extra})}}});const Field=withInstall(stdin_default$d),[name$b,bem$b]=createNamespace("radio-group"),radioGroupProps={disabled:Boolean,iconSize:numericProp,direction:String,modelValue:unknownProp,checkedColor:String},RADIO_KEY=Symbol(name$b);var stdin_default$c=vue.defineComponent({name:name$b,props:radioGroupProps,emits:["change","update:modelValue"],setup(e,{emit:t,slots:o}){const{linkChildren:n}=useChildren(RADIO_KEY);return vue.watch((()=>e.modelValue),(e=>t("change",e))),n({props:e,updateValue:e=>t("update:modelValue",e)}),useCustomFieldValue((()=>e.modelValue)),()=>{var t;return vue.createVNode("div",{class:bem$b([e.direction]),role:"radiogroup"},[null==(t=o.default)?void 0:t.call(o)])}}});const RadioGroup=withInstall(stdin_default$c),[name$a,bem$a]=createNamespace("tag"),tagProps={size:String,mark:Boolean,show:truthProp,type:makeStringProp("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var stdin_default$b=vue.defineComponent({name:name$a,props:tagProps,emits:["close"],setup(e,{slots:t,emit:o}){const n=e=>{e.stopPropagation(),o("close",e)},i=()=>{var o;const{type:i,mark:l,plain:a,round:r,size:s,closeable:d}=e,u={mark:l,plain:a,round:r};s&&(u[s]=s);const c=d&&vue.createVNode(Icon,{name:"cross",class:[bem$a("close"),HAPTICS_FEEDBACK],onClick:n},null);return vue.createVNode("span",{style:e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color},class:bem$a([u,i])},[null==(o=t.default)?void 0:o.call(t),c])};return()=>vue.createVNode(vue.Transition,{name:e.closeable?"van-fade":void 0},{default:()=>[e.show?i():null]})}});const Tag=withInstall(stdin_default$b),checkerProps={name:unknownProp,shape:makeStringProp("round"),disabled:Boolean,iconSize:numericProp,modelValue:unknownProp,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var stdin_default$a=vue.defineComponent({props:extend({},checkerProps,{bem:makeRequiredProp(Function),role:String,parent:Object,checked:Boolean,bindGroup:truthProp}),emits:["click","toggle"],setup(e,{emit:t,slots:o}){const n=vue.ref(),i=t=>{if(e.parent&&e.bindGroup)return e.parent.props[t]},l=vue.computed((()=>i("disabled")||e.disabled)),a=vue.computed((()=>i("direction"))),r=vue.computed((()=>{const t=e.checkedColor||i("checkedColor");if(t&&e.checked&&!l.value)return{borderColor:t,backgroundColor:t}})),s=o=>{const{target:i}=o,a=n.value,r=a===i||(null==a?void 0:a.contains(i));l.value||!r&&e.labelDisabled||t("toggle"),t("click",o)},d=()=>{const{bem:t,shape:a,checked:s}=e,d=e.iconSize||i("iconSize");return vue.createVNode("div",{ref:n,class:t("icon",[a,{disabled:l.value,checked:s}]),style:{fontSize:addUnit(d)}},[o.icon?o.icon({checked:s,disabled:l.value}):vue.createVNode(Icon,{name:"success",style:r.value},null)])},u=()=>{if(o.default)return vue.createVNode("span",{class:e.bem("label",[e.labelPosition,{disabled:l.value}])},[o.default()])};return()=>{const t="left"===e.labelPosition?[u(),d()]:[d(),u()];return vue.createVNode("div",{role:e.role,class:e.bem([{disabled:l.value,"label-disabled":e.labelDisabled},a.value]),tabindex:l.value?void 0:0,"aria-checked":e.checked,onClick:s},[t])}}});const[name$9,bem$9]=createNamespace("radio");var stdin_default$9=vue.defineComponent({name:name$9,props:checkerProps,emits:["update:modelValue"],setup(e,{emit:t,slots:o}){const{parent:n}=useParent(RADIO_KEY),i=()=>{n?n.updateValue(e.name):t("update:modelValue",e.name)};return()=>vue.createVNode(stdin_default$a,vue.mergeProps({bem:bem$9,role:"radio",parent:n,checked:(n?n.props.modelValue:e.modelValue)===e.name,onToggle:i},e),pick(o,["default","icon"]))}});const Radio=withInstall(stdin_default$9),[name$8,bem$8]=createNamespace("image"),imageProps={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:numericProp,height:numericProp,radius:numericProp,lazyLoad:Boolean,iconSize:numericProp,showError:truthProp,errorIcon:makeStringProp("photo-fail"),iconPrefix:String,showLoading:truthProp,loadingIcon:makeStringProp("photo")};var stdin_default$8=vue.defineComponent({name:name$8,props:imageProps,emits:["load","error"],setup(e,{emit:t,slots:o}){const n=vue.ref(!1),i=vue.ref(!0),l=vue.ref(),{$Lazyload:a}=vue.getCurrentInstance().proxy,r=vue.computed((()=>{const t={width:addUnit(e.width),height:addUnit(e.height)};return isDef(e.radius)&&(t.overflow="hidden",t.borderRadius=addUnit(e.radius)),t}));vue.watch((()=>e.src),(()=>{n.value=!1,i.value=!0}));const s=e=>{i.value=!1,t("load",e)},d=e=>{n.value=!0,i.value=!1,t("error",e)},u=(t,o,n)=>n?n():vue.createVNode(Icon,{name:t,size:e.iconSize,class:o,classPrefix:e.iconPrefix},null),c=()=>{if(n.value||!e.src)return;const t={alt:e.alt,class:bem$8("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?vue.withDirectives(vue.createVNode("img",vue.mergeProps({ref:l},t),null),[[vue.resolveDirective("lazy"),e.src]]):vue.createVNode("img",vue.mergeProps({src:e.src,onLoad:s,onError:d},t),null)},p=({el:e})=>{const t=()=>{e===l.value&&i.value&&s()};l.value?t():vue.nextTick(t)},m=({el:e})=>{e!==l.value||n.value||d()};return a&&inBrowser$1&&(a.$on("loaded",p),a.$on("error",m),vue.onBeforeUnmount((()=>{a.$off("loaded",p),a.$off("error",m)}))),()=>{var t;return vue.createVNode("div",{class:bem$8({round:e.round,block:e.block}),style:r.value},[c(),i.value&&e.showLoading?vue.createVNode("div",{class:bem$8("loading")},[u(e.loadingIcon,bem$8("loading-icon"),o.loading)]):n.value&&e.showError?vue.createVNode("div",{class:bem$8("error")},[u(e.errorIcon,bem$8("error-icon"),o.error)]):void 0,null==(t=o.default)?void 0:t.call(o)])}}});const Image=withInstall(stdin_default$8),TAB_STATUS_KEY=Symbol(),useTabStatus=()=>vue.inject(TAB_STATUS_KEY,null),[name$7,bem$7]=createNamespace("cell-group"),cellGroupProps={title:String,inset:Boolean,border:truthProp};var stdin_default$7=vue.defineComponent({name:name$7,inheritAttrs:!1,props:cellGroupProps,setup(e,{slots:t,attrs:o}){const n=()=>{var n;return vue.createVNode("div",vue.mergeProps({class:[bem$7({inset:e.inset}),{[BORDER_TOP_BOTTOM]:e.border&&!e.inset}]},o),[null==(n=t.default)?void 0:n.call(t)])};return()=>e.title||t.title?vue.createVNode(vue.Fragment,null,[vue.createVNode("div",{class:bem$7("title",{inset:e.inset})},[t.title?t.title():e.title]),n()]):n()}});const CellGroup=withInstall(stdin_default$7),[name$6,bem$6]=createNamespace("checkbox-group"),checkboxGroupProps={max:numericProp,disabled:Boolean,iconSize:numericProp,direction:String,modelValue:makeArrayProp(),checkedColor:String},CHECKBOX_GROUP_KEY=Symbol(name$6);var stdin_default$6=vue.defineComponent({name:name$6,props:checkboxGroupProps,emits:["change","update:modelValue"],setup(e,{emit:t,slots:o}){const{children:n,linkChildren:i}=useChildren(CHECKBOX_GROUP_KEY),l=e=>t("update:modelValue",e);return vue.watch((()=>e.modelValue),(e=>t("change",e))),useExpose({toggleAll:(e={})=>{"boolean"==typeof e&&(e={checked:e});const{checked:t,skipDisabled:o}=e,i=n.filter((e=>!!e.props.bindGroup&&(e.props.disabled&&o?e.checked.value:null!=t?t:!e.checked.value))).map((e=>e.name));l(i)}}),useCustomFieldValue((()=>e.modelValue)),i({props:e,updateValue:l}),()=>{var t;return vue.createVNode("div",{class:bem$6([e.direction])},[null==(t=o.default)?void 0:t.call(o)])}}});const[name$5,bem$5]=createNamespace("checkbox"),checkboxProps=extend({},checkerProps,{bindGroup:truthProp});var stdin_default$5=vue.defineComponent({name:name$5,props:checkboxProps,emits:["change","update:modelValue"],setup(e,{emit:t,slots:o}){const{parent:n}=useParent(CHECKBOX_GROUP_KEY),i=vue.computed((()=>n&&e.bindGroup?-1!==n.props.modelValue.indexOf(e.name):!!e.modelValue)),l=(o=!i.value)=>{n&&e.bindGroup?(t=>{const{name:o}=e,{max:i,modelValue:l}=n.props,a=l.slice();if(t)i&&a.length>=i||a.includes(o)||(a.push(o),e.bindGroup&&n.updateValue(a));else{const t=a.indexOf(o);-1!==t&&(a.splice(t,1),e.bindGroup&&n.updateValue(a))}})(o):t("update:modelValue",o)};return vue.watch((()=>e.modelValue),(e=>t("change",e))),useExpose({toggle:l,props:e,checked:i}),useCustomFieldValue((()=>e.modelValue)),()=>vue.createVNode(stdin_default$a,vue.mergeProps({bem:bem$5,role:"checkbox",parent:n,checked:i.value,onToggle:l},e),pick(o,["default","icon"]))}});const Checkbox=withInstall(stdin_default$5),CheckboxGroup=withInstall(stdin_default$6),[name$4,bem$4]=createNamespace("row"),ROW_KEY=Symbol(name$4),rowProps={tag:makeStringProp("div"),wrap:truthProp,align:String,gutter:makeNumericProp(0),justify:String};var stdin_default$4=vue.defineComponent({name:name$4,props:rowProps,setup(e,{slots:t}){const{children:o,linkChildren:n}=useChildren(ROW_KEY),i=vue.computed((()=>{const e=[[]];let t=0;return o.forEach(((o,n)=>{t+=Number(o.span),t>24?(e.push([n]),t-=24):e[e.length-1].push(n)})),e}));return n({spaces:vue.computed((()=>{const t=Number(e.gutter),o=[];return t?(i.value.forEach((e=>{const n=t*(e.length-1)/e.length;e.forEach(((e,i)=>{if(0===i)o.push({right:n});else{const i=t-o[e-1].right,l=n-i;o.push({left:i,right:l})}}))})),o):o}))}),()=>{const{tag:o,wrap:n,align:i,justify:l}=e;return vue.createVNode(o,{class:bem$4({[`align-${i}`]:i,[`justify-${l}`]:l,nowrap:!n})},{default:()=>{var e;return[null==(e=t.default)?void 0:e.call(t)]}})}}});const[name$3,bem$3]=createNamespace("col"),colProps={tag:makeStringProp("div"),span:makeNumericProp(0),offset:numericProp};var stdin_default$3=vue.defineComponent({name:name$3,props:colProps,setup(e,{slots:t}){const{parent:o,index:n}=useParent(ROW_KEY),i=vue.computed((()=>{if(!o)return;const{spaces:e}=o;if(e&&e.value&&e.value[n.value]){const{left:t,right:o}=e.value[n.value];return{paddingLeft:t?`${t}px`:null,paddingRight:o?`${o}px`:null}}}));return()=>{const{tag:o,span:n,offset:l}=e;return vue.createVNode(o,{style:i.value,class:bem$3({[n]:n,[`offset-${l}`]:l})},{default:()=>{var e;return[null==(e=t.default)?void 0:e.call(t)]}})}}});const Col=withInstall(stdin_default$3),[name$2,bem$2,t$2]=createNamespace("list"),listProps={error:Boolean,offset:makeNumericProp(300),loading:Boolean,finished:Boolean,errorText:String,direction:makeStringProp("down"),loadingText:String,finishedText:String,immediateCheck:truthProp};var stdin_default$2=vue.defineComponent({name:name$2,props:listProps,emits:["load","update:error","update:loading"],setup(e,{emit:t,slots:o}){const n=vue.ref(e.loading),i=vue.ref(),l=vue.ref(),a=useTabStatus(),r=useScrollParent(i),s=()=>{vue.nextTick((()=>{if(n.value||e.finished||e.error||!1===(null==a?void 0:a.value))return;const{offset:o,direction:s}=e,d=useRect(r);if(!d.height||isHidden(i))return;let u=!1;const c=useRect(l);u="up"===s?d.top-c.top<=o:c.bottom-d.bottom<=o,u&&(n.value=!0,t("update:loading",!0),t("load"))}))},d=()=>{if(e.finished){const t=o.finished?o.finished():e.finishedText;if(t)return vue.createVNode("div",{class:bem$2("finished-text")},[t])}},u=()=>{t("update:error",!1),s()},c=()=>{if(e.error){const t=o.error?o.error():e.errorText;if(t)return vue.createVNode("div",{role:"button",class:bem$2("error-text"),tabindex:0,onClick:u},[t])}},p=()=>{if(n.value&&!e.finished)return vue.createVNode("div",{class:bem$2("loading")},[o.loading?o.loading():vue.createVNode(Loading,{class:bem$2("loading-icon")},{default:()=>[e.loadingText||t$2("loading")]})])};return vue.watch((()=>[e.loading,e.finished,e.error]),s),a&&vue.watch(a,(e=>{e&&s()})),vue.onUpdated((()=>{n.value=e.loading})),vue.onMounted((()=>{e.immediateCheck&&s()})),useExpose({check:s}),useEventListener("scroll",s,{target:r,passive:!0}),()=>{var t;const a=null==(t=o.default)?void 0:t.call(o),r=vue.createVNode("div",{ref:l,class:bem$2("placeholder")},null);return vue.createVNode("div",{ref:i,role:"feed",class:bem$2(),"aria-busy":n.value},["down"===e.direction?a:r,p(),d(),c(),"up"===e.direction?a:r])}}});const List=withInstall(stdin_default$2),[name$1,bem$1,t$1]=createNamespace("pull-refresh"),DEFAULT_HEAD_HEIGHT=50,TEXT_STATUS=["pulling","loosing","success"],pullRefreshProps={disabled:Boolean,modelValue:Boolean,headHeight:makeNumericProp(DEFAULT_HEAD_HEIGHT),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:numericProp,successDuration:makeNumericProp(500),animationDuration:makeNumericProp(300)};var stdin_default$1=vue.defineComponent({name:name$1,props:pullRefreshProps,emits:["change","refresh","update:modelValue"],setup(e,{emit:t,slots:o}){let n;const i=vue.ref(),l=vue.ref(),a=useScrollParent(i),r=vue.reactive({status:"normal",distance:0,duration:0}),s=useTouch(),d=()=>{if(e.headHeight!==DEFAULT_HEAD_HEIGHT)return{height:`${e.headHeight}px`}},u=()=>"loading"!==r.status&&"success"!==r.status&&!e.disabled,c=(o,n)=>{const i=+(e.pullDistance||e.headHeight);r.distance=o,r.status=n?"loading":0===o?"normal":o<i?"pulling":"loosing",t("change",{status:r.status,distance:o})},p=()=>{const{status:t}=r;return"normal"===t?"":e[`${t}Text`]||t$1(t)},m=()=>{const{status:e,distance:t}=r;if(o[e])return o[e]({distance:t});const n=[];return TEXT_STATUS.includes(e)&&n.push(vue.createVNode("div",{class:bem$1("text")},[p()])),"loading"===e&&n.push(vue.createVNode(Loading,{class:bem$1("loading")},{default:p})),n},h=e=>{n=0===getScrollTop(a.value),n&&(r.duration=0,s.start(e))},f=e=>{u()&&h(e)},v=()=>{n&&s.deltaY.value&&u()&&(r.duration=+e.animationDuration,"loosing"===r.status?(c(+e.headHeight,!0),t("update:modelValue",!0),vue.nextTick((()=>t("refresh")))):c(0))};return vue.watch((()=>e.modelValue),(t=>{r.duration=+e.animationDuration,t?c(+e.headHeight,!0):o.success||e.successText?(r.status="success",setTimeout((()=>{c(0)}),+e.successDuration)):c(0,!1)})),useEventListener("touchmove",(t=>{if(u()){n||h(t);const{deltaY:o}=s;s.move(t),n&&o.value>=0&&s.isVertical()&&(preventDefault(t),c((t=>{const o=+(e.pullDistance||e.headHeight);return t>o&&(t=t<2*o?o+(t-o)/2:1.5*o+(t-2*o)/4),Math.round(t)})(o.value)))}}),{target:l}),()=>{var e;const t={transitionDuration:`${r.duration}ms`,transform:r.distance?`translate3d(0,${r.distance}px, 0)`:""};return vue.createVNode("div",{ref:i,class:bem$1()},[vue.createVNode("div",{ref:l,class:bem$1("track"),style:t,onTouchstartPassive:f,onTouchend:v,onTouchcancel:v},[vue.createVNode("div",{class:bem$1("head"),style:d()},[m()]),null==(e=o.default)?void 0:e.call(o)])])}}});const PullRefresh=withInstall(stdin_default$1),Row=withInstall(stdin_default$4),[name,bem,t]=createNamespace("search"),searchProps=extend({},fieldSharedProps,{label:String,shape:makeStringProp("square"),leftIcon:makeStringProp("search"),clearable:truthProp,actionText:String,background:String,showAction:Boolean});var stdin_default=vue.defineComponent({name:name,props:searchProps,emits:["blur","focus","clear","search","cancel","click-input","click-left-icon","click-right-icon","update:modelValue"],setup(e,{emit:o,slots:n,attrs:i}){const l=useId(),a=vue.ref(),r=()=>{n.action||(o("update:modelValue",""),o("cancel"))},s=t=>{13===t.keyCode&&(preventDefault(t),o("search",e.modelValue))},d=()=>e.id||`${l}-input`,u=()=>{if(n.label||e.label)return vue.createVNode("label",{class:bem("label"),for:d()},[n.label?n.label():e.label])},c=()=>{if(e.showAction){const o=e.actionText||t("cancel");return vue.createVNode("div",{class:bem("action"),role:"button",tabindex:0,onClick:r},[n.action?n.action():o])}},p=e=>o("blur",e),m=e=>o("focus",e),h=e=>o("clear",e),f=e=>o("click-input",e),v=e=>o("click-left-icon",e),g=e=>o("click-right-icon",e),y=Object.keys(fieldSharedProps),b=()=>{const t=extend({},i,pick(e,y),{id:d()});return vue.createVNode(Field,vue.mergeProps({ref:a,type:"search",class:bem("field"),border:!1,onBlur:p,onFocus:m,onClear:h,onKeypress:s,"onClick-input":f,"onClick-left-icon":v,"onClick-right-icon":g,"onUpdate:modelValue":e=>o("update:modelValue",e)},t),pick(n,["left-icon","right-icon"]))};return useExpose({focus:()=>{var e;return null==(e=a.value)?void 0:e.focus()},blur:()=>{var e;return null==(e=a.value)?void 0:e.blur()}}),()=>{var t;return vue.createVNode("div",{class:bem({"show-action":e.showAction}),style:{background:e.background}},[null==(t=n.left)?void 0:t.call(n),vue.createVNode("div",{class:bem("content",e.shape)},[u(),b()]),c()])}}});const Search=withInstall(stdin_default);var woman="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAAHdbkFIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjc1MURFQTI4OEQxNjExRUI5RjM1OEVBNTc2RURCMzc2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjc1MURFQTI5OEQxNjExRUI5RjM1OEVBNTc2RURCMzc2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NzUxREVBMjY4RDE2MTFFQjlGMzU4RUE1NzZFREIzNzYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzUxREVBMjc4RDE2MTFFQjlGMzU4RUE1NzZFREIzNzYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6gu6psAAAcLUlEQVR42mL8//8/Az7AAiYvXmT4+f//c19vUwmYBB+3yMU1SzYaQBT8/v3f19+SYdfenQwgExn5+RncTC31gTK5TGAFjIwMf//8YWBg54Bo//0HqAfIZ2aexAIzUlpWnuH/j+8MDF/eM4BcZWlhhuQGIHjx/CnQaD6G/yxAK1g5GM6cPQcWB1vRMbUXzPkrbsTA+Oohw+rtEEmgg74xghxVFuHOUCMaDdQKEkR4Med8ByNAADESDodLlxgYvn9ncAuy+Q8xFWgQ0Fe7NhxjBHKAbgByPvz+A/TAH4ade3aAwwIoxLD10N7/YMb/M2f+WwId//f63v//b+7//+/anv//7x8Bi/0/ezaOCWIsMKyAxP+/fyGO//6DgYkJLLEQrICHh4nBw9UD5FEg/gNlgxXMZ2L494/x75//DL+AQc346g4wkLgZ/gFNY2UBR0ESY2m4G0OndgHD51ev////+QcSNewsDNOOrmS8xnWfASCAIOEA8iqI/vEDHGENkzpZju9c9RsSckhhwsr1MrGiSSLU2AqinoEBzYA/f/67+5kzwDRy8gozbNyzCcx2M7eGG7Rr29lfDD9/sCMMuHyZleHXr1/B8f4Mn9+/ZNh19ADQsL8M/3//hmtiZGVlYODgABv0+y8jw/6txxmAehgh6Q2oGUQ9ffgUGCacDFMmTme4ee8+w8evX8DSf4AOunv/AUNmQibDo2d/GL58hBrMxvafCdmPbEBLmJi+MwSGBDGoycow8IuLMTD65zCw/P7LoCQjzTB1zhQGOSkWeLpGpFdmZg+gzh0cnBBuYlg4xK/r5jL8X9cPjI0vDG4u4djSGiNEBwvLTlDIfQWmqcOxaxi+/PrKwDc5DqLi3BoGBqMQho3t+xl+n77HwMbCweCzMhIsBQ9EUHoHAVB8f3n7luE/E2M3MKRKUOwCpWJmZs1/337emH52HQMoDYAAQAARzA+EACS/gMAXYIgDo+r0lQsMFZV5X5mZ/3CheBboYNeobMaS1BwGhjevQeHGwGBmxsCEbmJ+Qdp/dM2wHLNr6VQM5yIbYLFp3+7/PDyQcP3+7Q9DWWMLOIN+/fYXrsjHwwzFEMb/0CwPdNJ/Jy8TYISwMPTNnsWgrSiHYpO7WwADw78fkOjddIIBlAsZTE2hLgBqBvkJpPnPP2YGHRUFYNJlQYpsFoZd+7YwfPkMyY0M7OBssAviBZDt4JzDDS5w1mxZC0zznMBkyY6wngPIZmVj2H1kB1gNWI6JyRUWBo6Q0GBiWDCrh0FIVIRhxpTZDCdOnoPrP7j/BMPqNRsZuMVFGXZtWQRLQ9AwOHt2CdDYaAZePgZ3Jy2G5etXMgjy8ENk/wAzzV9gPmPnhuQ5YHL1cfZg2L37MrDs+MbAYGwMzI3//++H5khwVIX6hCBMd01hYPQrgPOdLV3BZSp6NM4FMa7duAYJTxZmhoCAaEjcHwBmpj0zwOyi0joGLm4WBsx0AEpRQFBckgIX/P7lLUNkeBSkiPv+k0Ff14Xh6vlT6Hr/QQwAlTp//+pbWDvDZd5++MOw4tJLYPZ8w8D45RXDJWCp+xlaoILAt+/fwI6FOPPyZTB2lOD4vz+s8v/HnIX/P6TN/Q8GwPIaBkDiX3IX/8/R1f+fbGWQB6wxIPUMqNgGgXMnDjKs8531HsgUgNQOwNBnBgbRH6BLWYBVEBvE/0z8nAlZB+oXgtiLjlxjQAkVZmlBwT/3XzMwMjH+Z+Rkg5Zz8Oz4GBj9cugBARCA8mqNjaIKo+dO90G3pV0bpaJLahsIfYjUbrVlJUIkjVlJEGnRRIlBxT8YX/ww+IoaFY3ZWDC1rTRgNQJVg5gSahMhTStKERVQmrDEmEalNk2o223pdqezM56Z2d2ZDavUm056d2bu6/vOd84Zi9btZXf5slmuukARgacYwCPf9GEyEkH4198CcmTkkCpPLdDHOgn5hKFpEuR4ApLDOXv9TUseWuhb9PkNi8tRUlaKjWvWApG/ddlAKmlGIx045sg7df2HDww6XdbrUnIiVRdWyey7DU7WnJcuXviMF34aOKY88UbIeXUjlL3VszpOrAxUwpMrwb64LVws8ASW+atR6C3A2VPfwU6wLFlH+yvPaoGyimFmpzSrKmRJQQlDNYy8PATqK5BvA79Cb7XMX49dbe/Sa7HyFCVzMm8hVlbVI88jMjYSo3kZGBiCiMd+Z75K7ClIKbN5Y2bmEPO+Xu+2dH6A7i8+RMoWvfjmDqyqqzG5/SpNd4prau5kui1lLym7GR279pgYU1XD/eh8ah7PBN3e1OLweNC1vwOeeebjx596Bv7a5djQ9CgiU5MMxTTebg7h9lsq0wvECfHgXeugsnQ8jH2ofSd6D/egr/eI8fyXs2eAvHxq16QObpXrCUtSJMnF6xELGS7IpOkqfy1073f/gxvJCH9g62NBNDWtxv7OEOqWV2Wc2s2TdX/ZhqZ1d2DzpgZULgS2v/qCIQJLy8tZIciMnqIMWRgYHHyd9fRS+mGBFyv8i3HdAi/T0EpcF5t+839IuGAJaywRIf+Fbc+F8P3JMzh+8gIjELVeIp07kiSRyBidUAwKmInR0gQfJkPn4itKGuRZewHo3wz6SuyTraamkYE89p/eth3nfz6d3BFMHsiq6m73AfvNGAnH5bLvJ4ZAzSoD5dYR+fd1P0TzbohPDtpFDoIYCgYbrcWzt4jFA7FYmCng14i4Uf+5d98eg+HsTbcbd9+2gronoWegF/N4aq3+VrJFtbmbhP6dNB+NDfdhcmJsDjkSFVYE9OMK4TMiR0PQta8j6xg9wrNxGe83t0CMD/MivY//af6PjVBx1yIaGc061vjsSCipH+u53qgFwnPn7KzR19N/bPXO5pdNppMTuHfpPdhS/QAKFDJi+6bkbpj3/jZqBc2ym+VVa9pfNcx5d3+L02NhvHOiFSPRi8hlNDW+39p2EEt8i3J1xkmCMNPdphqlseho46eXovLElScpykf+axvSQIwfHYK7IVmSsoKJrZ1IK2FqDEuo5XjXR3TEm+33r5BTWxvXvC6R47wG6ujE81pC3ZH2EeNTiD75ccbL8e4frdTaF1e1MU1WSlFcMP1vUJDmUNJvcRIBZ47I8RUJ4cgplK6dv4VmoYum4bw2LYdpFn4gvb5HPxCgeRCOKp8gDwj2i3UH81+T/yMAa9YCFFUZhb97d2EXEMUWUVHTIcEwFbMGFdTxgVqWU5rmoyTJLHPGzJwwLYfwMWpmigLp5IiZlvnK8TmOmuiIpFLmo0bFF6PykOW5XOACe2/nv5e7u5ddHmp35h8W9ueec89/zvm+79yn1gdPe6lH4IqGTPCx5aUoNhTYbNiUugp3C4rw4O4dBFgsW4pzb8UxUqeVqt0uwS5JdNYGBHUNO2nNzYsptAp4aUAE1i5eRajeWi0D2qMsFzTkH8PZr+SaYrns0Z04A3E0AxF+RkZUQsIrwoAnfLE+yB5hry1jYR3X8gg0c2VkZBCYV/XkXelUE5eB9rV7RtpHH9+ita+pvc1F4IPExAUyM95UqnjOIw63rmXtZbrnyRzg+Rvnr17+4eb1LDRmnDEkgZTg1xvWO7WXq/AnGjcxbjyrgr6P54DJlE+ZEzZ3zgzyg2/wtJJiLGr4aOwhspFx+RyiwsOwdM1y6rR2t1vVVpfDKggMlca01IE8Wu0zTp9E69YGncq2keFlSRtw7t8/kLBoHtr6mCALlcqXIwYPwKzP49WZnGs+kNhKWBLPPjJqFOzZAXZ3tmpqFtDPDpTSWP1tgkNIsq98/AKReTMLkb16QLZVeMyDia+NxIqktRBFvRN/ZV1Q6RjHPdTZaxABA/1xpSaXC/KckCoIduxPPwi5pLTJjGWp0j+iF1anrifu4TwOxuhlUdRy66jnIxDFdO1jRXERfMwa6ElI27kVcmmZMrNSFs97gHd1psURtEf2eYFyJMbBUbxNPLJvZWsbXyHvOI0dOVmxl9cg7WZXbhJKeannb6uQEEoENHXdJvy2czf5KcK/VQAOH9+tjBfr4Q4LFi1HZsZZGM1+6NmjB5J3bERUSF+08jeSTR5Xs28grGu9JDAaGeN53+kAz09wfZqcW9cd5x8UbAHKyzF7zkzM/mi62lIZDWR5oLFcaoer1ixheo36sqQM3uxWK4Kf7YjykkIlP/Lv33YNVxy1ZJ0Di3VlQJwwILAdcnPyENq7O3Ie5MFYlYMjv1+EhYjo+OkfehAoHI78shm37z3EyCH9YLaEIHJwFA7t2ovoqEjirOX685JlNocRtSrooyPF9BDWAitSkhNRLtaSqumGWfOS0StyGCKiRuHQgeP6PKAbnjqRjuciohE9+k2s3LAfAR06oUNge4waPRQFhYUoqarTz65leZAzAqpHDVLajg6WNvgp6Qs66yocPLTDMVoO6RysJKcrWRwa3d/x69a0ZOX72EnEtOoGY9CwKQjq0qvBhERiQ/6TvINtun5XXUV5wmP8lE9x5NgZljQO4/rOVKSuBvNlxTn6PvNClmLc15eQs7JCv89oHNxoK64RbMpPP1LGa9akUAiL3DeZiXp1oqzu1I02mt3L0scH8Z8tVYx7BpK6s54dIM8LrLk6aI2bGgfOZNJvW7kZ3NBYdU2eX8+7tVtw+GTWXOpnTaJ9lTMHZFmg//LTCLy1oFDvbI2Aw4eOYUzMUEcU5fj3wJnV7Jdnvu1kOnSc9x5Zce3PLEcvaQTDjzojIMs7XF4QIL/gfoOgcPgmcRluPMh1ocIi5DnTlMUakWa8kiI25fXJTRtXsfqe04G6uoUuUAyxyh3bTWYjZk2NRdrPe5X5qxI80gGqYDUqLfjUhUsYFTmckLwZoiXLVo3FqA74+BRrlZCfc48Sx/MUxNtkxLaN30PMvwFOKFJeibF3HKgsxZbUFKxYtJBArwUsj+Mmavb4elrL1hiWgInLFyqJ1xjeSXTwJhNVgFgBzpYPrjwPXHUZ2gW1h2CzN2pTqLRp/cZOeZauJS1f3xRUmPQ2iXmUgMGdu7tPwyjcMRNm4swjSt5u0fquVluNsQuScM5G+4Q6iHb3IywstWo8YKArPTfWH4FmyLL/wMmKgf26w59QrJogM9AvCPP7f4wBwb0hv/q8ui0olHr1XaDkPisRYKBT8qW/sx3VFMC0K3vw6z/70crboFRKUf5DluCZqBEvNkXJhEtnT4/zpYIMtYTj2NSd2D72O/QODIFApVh90QXReo4C2nYBBkxzTNSV4mZvRCnKcb3H4WzsbiQMWQSBcoURWLQJiPIozRqq404PvXfOeHHSJEmWGrTIOrRaMYkUsmqw9vxtGPs+S01KHYYKKSdgv57rFv7W5gD0XPdGwMv9w8tapI67dOw8WaqtOwID96MOdolbVXy5Sxk+sSk25+sNOe1MveSS3WS5WuL2YnjJlicRJts4sxd7l1KowxpiuWx0zoyrrxYNSgTcjLMys0vxnK/J8jTKqJLzNwfR04bTE95WhGBzF5vvc1hFxpnbq/8XbUjXdb6tb3epsoaFOhJi7bv0ZAOl0kp/BgUUjb85P/Nxjuf2wMiXSyVCixXvfwIUbyXgUZRn+J3d2Ww2d9gQQBDloXKVS0MCDxJoLEKUiKLWq2osFbQ8IEc9QaFegMWjWlup8lSo1hZNLYcQCDkECRIDBAwGQkJCEnKRTfZKNptkdqbf/8+G7GZ3k3BY53kmx+7Mzv9/x/u937Fd9QHPFN2nMtWhpuxqeOyKfOy3VkS9xYzK8hKkp38JOSwaFWdL0c8Yg+8pH9BHxcCgVRA5YNAgh802zWq6MF2n00zQKK6hDRfqjLIgsEauJjwswiRBzIvoF5PT7mwfcu0NN+B8WWl1RD/jQVerrVBRyJVrazA2fjJy0rPx6yWLcDo/F7PvfxjJI8Yh/NqhgNWirpetkaUBrMQgy/73lZBwSRq4nOMmOlc66s/OcyiSxlJfytk59173BQa9xiPi25lrX2erM9/H/i/Jr1BhpbGcIMTFg4U+JGoPvbScWcTVLdBcvWPwme8LNladPZ0SbNDwDfO4fUWPEQi/RUZSSJvNyYXfZiTrRYWZI2UG2HKlC9ZchU2zuLll/YZXHJlZe86baktTDCHiRW1f7YN1xyIixKD0Le9uLi0ssPVU+fgxBRBLZxoiIpV3Nr5TckdK0qN2a50hOPhyNa3whn87BTpW7utTEYxMK0gvhL/97LKCrdu2bmbh6//hAlPIpllTbSAbYnni0TtRWlyEqMi+f4xE/IaxBRbbYgfFYmJCPGYmz8LUhInQRISjvKgYTz66EO2t9gBtSu+DcaZNH3+YamtrS12xYmUVbFZWyT9wtaMAyzm38coRIX87Gc6CJx7EubJTRE3FHjXraHFB0GowMT4es1KSMZWSdGNsjNppYK19NjPk03GMQNpnaXj7tT8SUKra7hklKADYJDz93Grce9/DLBpUkaTvpChQ0FsU6E0AlJ607aJNd80VhIVjzZpnsS99O8L8kH/GnJxkzsGh4XhyxRLMu3uO+qLDgUupyPMpCxJExs4MrH/pVcguJ8+KAn2GLLOWfQj+vikNQwYN5j1levEruoEVq6VAAtB4l7c8TqdzPDllo9fmiSYfPJCNzL1s875JSwf5sKiPwIdbP8Hew5m4a3YSFEcrL2JeajuCKYZV5G6dloDsggN482/vE+MJJjYvdS9DuCmJFs22Fnz6r8186sz9YgqdJsbdffbXIwhK0ly68cTFTL1LzPgi7VN3Duy9iuZmCdNnzcaub/Zg5JBBUGz2PjXY+2AKUKw2xI0ZhYz8r7Fs1fOwk7n7kygraebmZsJUWw10uo0gRBIxOklrn8lLkp2njwDIRN3nNLp4u8/ig/QoLytB0clj5Pfe7znI5CcnTsHLa9cAtmZCpjC00kMqTU0oN5lRYbLgAm1CYgNzOl2vps8SfCtZzvkmC87RveUNZjRY7Rwz7nrgbny+cysE0UBu4fKJDGZTI06e/gFeI3+cTIj7CBOSODv0WIPoBXaAkS78wu/K6KYzpSVoaWn1muVgTQNdkA4LnnwcCoHdl+lZqKyqxpT4iRhojIaLEkFzsx1mezPsjg7cHDeO8nejWkzwo22JlnEoNw9NJMj+kaGIJMwJDQlBo60D+/d/i7LKKqTOfxBvvLsBSx5fxGm2pzUymVSVlQFJfq3vP7Q/ViSs8RUA4/WC8AZHer+MQYvK6jIO3qQjSnYUukUhmJAxnHj7iOHDIBD/vue2JHIV4uEa5quyOlOgHUKS0kPpcKm1BMkVMOIwZEmMv1Et/WhZsYSs0kXkWdBi9PCBbDKIrDEYA2+KQcLNU5H3TS5CQrSceLG2MNt2TUMl/AKFIERTRFtLC3/MHw8YQ2881JMvmp0u3nSPNBqxevUyrHxuHcyNVhj694cYY8Q3e7Pxp/Ub0GxpQm1tG3cwNhHIJlQMIQbMX/gQ7n/4EYhMTYFQUa9HXu5BrHvtLdTWmLhe2gjQpTZWUQBZTyxumXMbFq9cgdGjR+BQTi4sFhdef20xjh4pxL8/z4bN6XILQPEVBNujJLE09QdvAQjCHb119QTuZ2Ri5+pwOPcIduz7BNWFp1BQ3gjZbEHipAlI3L6Vu0moMUoFG87sFLeFafjUZo8darKiKdMSsT1juve9uiC0E7AyABZFLRTCh8QZUzF8cDSSbpmMkyeKsTvjAEjOkCH0BDI6WkCKrwAoyPUFkXmNhdjX5s1pKDh+CmtfWYaU4dfTOiVVqZQ2h+i0ahTo7bM88wXmW27BKE6nn1KyEzp3K0whXGE5wcihRoo4k/DXDz7DJ59uJ+wV4WAytzapKbw/QfBB1KDR/lyg57yAzFYi0+a1RSYtSnhKS4oxd94C1kLCXQ/OwZrXV0Ox2/sW3hhDc5gJ2Vu4dhHaTzUv9E4YBIoy6Tv3YNWKPyAkGBwDwr1ImdDbs0/6CkCSNHzGNyDVchHdbPLsAvBLGRUmCED6l7swcEAsnli+CIrZGngNBG5C5iGgzuSO1W4/VdTmmpKcqAb0ABRWCA3B0cNHsJbYYUy0xtuK+p6QiL5aZ+2CQJsntcuE3DWNJlaT83tEUkK0ZePHeOn3q/j8lBCIBDH/7U/aJgxBWTlBNkUkCm04dJSsgZAuOtL/5tnAbVQkdpCgF89fzHMEXG7KrdHk+FqAXp9HDzlOK5/oT2v1DXVorCknKxUC5kysJ5ubtQ8zEw7irY3vYsJN4zmL8yJVLBUcdz2Uv6wCCk5BqKjmm1YWPUAEihCM1fA9PZNtnKitjTBg+b2pKP6hiNUDcNmTPopygs4jvhbgomAryy/7D03BOFF4nEKerYfGRaestBT22rEkdQHumJGCPIoSQnQU+0JDl3/KbgyYMBLK3FugJMapLT/OE7RdGEnJ0AWKKIsWLsXsKbdS9DnDp8mvYPNM+xsIBF2+FqDSSpbybqGLUr24OIWznV+lBTR/f89h3zFpazXjxaVLYbUqmDFzMtave4kEZKCkRnRjndItVhORETUor67Bxj9vImvK4s9kWWCvPa++5RVp9POfnhIUPTp2nX/N52PMgvCLzvR3x38/x7H8vG5I20d3I83r9USHL9RB22Li44vCRR/vzMyULvAND0VOWhqyd2chOlr018TuU4XJD/JnkWJ/1f3DNF5hST1luuiXdGay9Hd/1l6sffVFTkDYuHzfEzwFLXYJoycl4aOcY9h0qJi2q1EtTXCjtyB4CML9P2HGb9Z9gO3FlZhxZyocLRJfUl8P5mlmiwlyR1sXSMryHjK9meqYh8a7oX2RleXn+/OXdR2C8LxMiZCLcv1HHptLmqzmVVrvZogEJ/uKAElpcPgQjB/wc8RFjcG0Nb9DaEK3XuNZCoFVBerMqdeH0IKjBhNAzqHnenz+eQvyn34P39V/j/zaApyzVKCNhBhMG9VpfS2SfakxNGoAtnyURtgaxnj0apLKqz4XxsV1E4DnAK23IkcR9O9eunzBsGPfHSROr0UrgZVCyhrbfyxu/9kvEH/NjRhgiIKL2GC71E6/yYgcbdDPGo/g+yf75RQ4lQk0lKpaZyRo7O0EHBG+RZbDpXB89DXvhbFkJ0gbBJ1Gh6Y2O/JqjmN3aQ5O1J/gVm9wN+abHS68vHpDxq33PPAUGuqL/e6ruwC6tyi7h/mj+/fvcMny9IWTUnHvyFkcqx0dTnquEtANGWUNXZ4McdQ1l4VZssWB5le2Ueh0f6/Gb34i0MaDeWDZdiYLG49sRkd7R+awMSMprqIxYOfxYNElVYWtgh4znkr4rTBv3Ny1tpr6Zwittb1VKlkXs+XtPdAYwxA0YxTE4bG8teqqMEEqqIBUUs8THu3QfhAnXgdxxEDe6ZTrrGg/cBpSWQMEgy7g5lU5K6SIVu6y942/7fWymqoX/1G4G8N+pLI4U/cLtLcXtIOj42gjb/Jo0cMC2RdalWYn2nYdR1v39wxqZUZuakF7dhE//b0f2ERYxdqVLYQHP0PXHoN86VZ2Je2bo0KoPom0LAhh+pFKu/QeabOxTy3ky+udqMCsKFZIrvcJEEbQ38yFWdH22E/dGzxD51J+ksY1IUFGIdww01VvTYGzI4GsZBiFIh1nNXzYGr5m3dkRYqDIeuwaQaFrzyBY/E4TYdilGRSdLRWdb2CVH8UlXzW5/uTj8z/18T9cxo98P2UiTwAAAABJRU5ErkJggg==",man="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAAHdbkFIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQ0RkM0RTgzOEQxNjExRUI5RDMyRjJCNjgxQTY3RUUwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQ0RkM0RTg0OEQxNjExRUI5RDMyRjJCNjgxQTY3RUUwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDRGQzRFODE4RDE2MTFFQjlEMzJGMkI2ODFBNjdFRTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDRGQzRFODI4RDE2MTFFQjlEMzJGMkI2ODFBNjdFRTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4KZJvrAAAb1ElEQVR42mL8//8/Az7ABCL+PTrEwLAtntNNmvU/DDOs8mf49xAoDjLh91LfOmcJ5v//7x/9///uof//H534byHI+P/v2VkQExi+vGx88fovw7VL1xj+//zFcO3sJYb/f/4z/Dsz5z8jyIQ/s8z//1cIZGCRNQVaygK08w/Dn6fnGRjvrYaaAASMD9ZDWT8hfKAk3JEgwMzwl4FR05nhz4PTDD9kDSCCf3//AVvx795+hvSrdv//AX3MxAiRA/l+jslZRoAAYiQUDiz/Hh5kYHh1ncEjIBdF5dZ8IUbmcJAjPz1n+Hd+/v9fv/4w7Dp+mGHnnh0QRwoo/Gd4eZmB8fcc2x0Mf3+6r/vszPDp4wcGFSUFhifPXzBECB9lYLItZWT8PdMcaPR/BmbbNhS7/x6uAgr/+8nE8O8XRGB/IZD8DcZ/D1dCrOEWi2di0okAe+wZhzLDn7tHGf6xcjL8YoD4lVHddyXj31vbGZKvujKwMDP8D9ViYnBTZmRI3fyXQUOMmbFY9hQDQABBAgrkVUagrpfXGA7dZWBYt3yN4Y0zB88hu+nP7z8MZp6hjO0e3xj+PD7NAAoCsC3IBvzbW3/SruSgGQ8HM5YgBTnrP4OCJBfD1DAOLqAB38EBDY6W2zsY/t/bBw5oLjYmhl0njjD8//IFw4j3QFf4OnkCw1jj278dxQyM8jaM4MTw/+4eSCz9+82wZ9UEhksXrzKkpGYzvP8JCcFvQFnfoGiG61duMBxZ0cwADlmQ1ldXV8LTI7JNzPZd4DTJ8OY9RICLE4g5GBhYuRj+7itAKPz35z0kDA61Of27sXEvinv//2VgtmpiYGDjZvj//QPDv1NtmBlOzRuSGv/d2gYM5h8MkfeD/vP9+wuWdFdmYgjRYmT4f7CfgdG+kCFq7V8GbjaIRvcvsxiCdAQZQYEKMQAYiAzM7AxJl+wYlIUYGW6/+7+GnZkhGMVBQE8yMzFYSfEyHufhYGIApQEQAAhAWLWENhFF0fPmZZpMoqGhIlatH9CdLkQtoiiIirpwo+KmYBGbUt250FIXLkQrqAW7F7LRuipBQdCm1FiaQMAPGIhYPzWrFtPUkl+pM5PnnTdJJmkKvfC4M/PeZc6959z71uyHtUzSaOmg/HMCil5E6JMHL4YHhcIbtdBz+4E7PhH5N9S7F/AEwHYchbL9mNPTEiaJJfToflOwZU8HB5b/zGamVp1c9hMHn4sJr+ZqCl4qGdLPp5NH8DsqmlJAbg6Yfi2yur136UoQPX3dxAwxous0xAwc7jyJ9X4XuNcN48szwbRWhmoK5fjjTFXuxYKBq10XIPIF4n9JBlsWT0RQyBs2HW4/RPaH5qTAlA2Wa2vfhVgqgWRqGm8m45WuBl6NR5Ga/oX4949UwG12vWbelZwUKqav2wdXLo+hh8Ok+28482Fcfr/bfw8dO9sRHh2BEdgPtjhDkW5HB7VeoGbix59IX0FmzaU6desoT9GsUlS7gL0JpjRyosJ8f9N5n18AsotO70z214IbWWgiV7VRbA6QL8tZKDJJOu1ZXYkrTaLwbQI/QJNUKDCj5HlL46EydV+VBbal86JzF+Qw4u+Dq+sl3TQxGOkYXNc+Y0w7R3tFB+TB61oNAdt9dpSnxxDs+CoFbdllWuoJQuKy/xxuHZBrmXGEFk4H0eKtS4Fq+VztZqYQRc4gd/4SwBtvOYnRRJvXQe4R5nl+6k4YQl3RC2Q+Fb5DWxmz7sFbERMq7Wp0rqRLAeb3bGSMhkq4Pua/AIxXa2wUVRT+7sy0S7fdttt0WxZLScAagoFYgkho8NFADBSBGhKNQoIpGNBEJf21Go08DP1hAlZhfWAMYKO/jEEw0FBDGpYS20JrRQ0WCmVTilvYLnUfdGfu9czs7GPqbmGSye7e2bn33HPO97gpPjCo3Rgheh/sgORwA3cH0Rl8FFeH/Ljc24PxUAQ3rvzxsYgGm2kZQ0oM5NIcmiZgKyq/VFDiWvr+p61qm/cg4tEw9m/MAy+bD95/DNJTbxk0kMojYUl5IOHQQhPjE0sGfO3dTEe8PqhvLXPzFIms6KwarJ2IBeNvr1uJqvlP7HO5K9590PxS7iekpSH/B51Hdomfvz1kLP6wl22GgsD13z0Dvg7xz+1bd6c2f/YAtMnErZILuun7lfceFnJ0eNep7oDlhVhUxb17KsJhFVH6HiOCKbAX49nnG9B+vhPbdzan5Y0MUeOeS0555KxgpXMEJCnfgHfyzgSSGPbpObSLwTNhmLsdDcSQn5f44zseD1bXP53wEDkuEYmgsWEVVjy3Ahvq16KwSDFNGTNu8eeP98kFnJSW7lib5JhUAKyspox3HbiDjFRXltswGed4dctrWLN+NbyfHMaofxhV8+aiacsrYCbXGu/bbDhy9HvcHBwi/bbDN9CFy7+RQ9i8NW0NDZcTa+AXv+mRFjQusaBA9dYKC12QfZBqNmHDjo9wvP2EsTtWQkQepk9yCoJod2o29HFKcyIbJAisxAHPtq3YvXMz2NXv6Fl6fuZeXCe/4D2fDuDLZSLJIkmJFLNWUscXQpmzXE9gQk30RRXFoGmhaukJdTjqdzyeQgYVHeo1greIg/lPm6VIvRFQXr9QoWQuONXOsZEOg5VF6SyguDrtMJKLaCr4xBgkp5u0goLRNIsT4X2fgYWuJ/w/pvSO4E4rCoSGXNLA+70EySHruH8UrOVzyG2nwfa0UqYUC7h43yEqg99cPOt11toDXy0bpqhnTwvweITc/F4yfA5TKTUzc8w4rej2jN84Q173pF6T3PPQZlnNGkmu3y3SKHDOrRaBv6gRc5OG3g9aJ5Gb8zGIcmpibgZg4JogN0bGmg4u086hl7ao8hncuSKsPKBHPHMRw62+UTIMlQr/FxcL6vC1cy/G5QoUkMLcVzmONaZ3Fj/xnuGZmWselMUvG2Nf9HL0jJDPoPkmKTF14R+wPfghOCOECBVSbVMpbI7Q/8Xo71MmfdlwtKMbvpnNWV2rrmxtLyaCuE2niJYuYP+qxLNrQYF953jWfRfOkD0HFl1oAc8ojfvJ7GKUBxVxKlOxzcjYwfAk3khyiZ2y23Rcs3DLtp/oGEvVyJetvU4CGakuYa5QTESqipEomZAeUozM9nLZ2ZvLZzOmkfo+4mCsuhQLFQmt9LufSDJGgcbI94/ZFfxCh7OXHnfp/wMjBmcLK1ghBRSZbo3/BCDNymObLOPw835tt3YHg20MGBmMS+UYAzIVFXFoNEGFOIEE5JjRCOKif5gYFG+ioOKBgFxBYRxDlEWIYjjCzALItQ3GgI1jbJBtsI2u7Y52bff19fd+X6+vrNvAJk27ffm+93c+v+f59X/rg//70mvIiLdFPOX7wOwWcKcNh5CF9R+/g9Qxj6HkxPHhsVH6ApfdlqLXS0p+PAIRqUCpfTDwwYzXps6es6WtxYaC37dhx+a3SUEWgdcVAa4W6Gbnq9PWS0a6TYE/T4Tvl4pOlMZEOK963G0pegE6SusxukYkhaBZr2eoryz+JX/DquPm23U9jkA3BpBfRHWara2tOjjG9iRbLeaaxwv3/VbFJCmuxykIWyBEUI7/ujLPEMGi7yWvsrMltbbSYnU72yPpANf9RYDLkq6j0XX4WNmc+ykuQcuyZn7o1DnvLLx3AzgfyO9UyP9caDPEmnrGBUU3DXlgtGaq2p00EZ3WjYzj964N8PFB8W6ui8ONozViiu39t0ErZwhIhAJtIaVpJ93rdMkEWRL6pQzB8lWrsDFvM2y2wFSNJDA4dolQ19hrJjNE7VFmRBAfDNRAm9k/KDzHv7cKZqQnqKusd/i4BfllRO4f2zEwhbiBUB4C1YRyU9RbhxIBbrXhqx+XY8UnH/vn/6nLVjwxgqanKX4GP/bdq2zQ41uVC4MmBSLAzRXgTVfhObX6vH+SMSHgVFwXHh8qLkQyUSxBxcQqidtJf7c7wV1uBIPZlMwn0Cu+v5+tWZrdfoJCad0idjcw9QlJgZs8tZsHEPtJC8ZhnZcRP5ZJ1jZZelZ9ZNCeP3/DAw+NU4wwGoKmA6XVc2bDRV5bpE2BQCW58Mvi4FHSQWFO7WtC0SULvlv7LWqrbmDdmk3o0y8JE9JHY8qkiZpzy69V4+CRQjTcvIGsObOwZutaZE54EqnJUSE96h7FkkbqvGzGu+ao2Ce43wBtxcl49JF0fL1mJRxWK8ouVmDuvNnKwVera6nCghiu0Yj9B45gYkY65mfPg4sYdE1lNZ7PmobJkyZr6Z6IQvXRdZphJP+V8wrh9U5NW8WPgcM0GGfNsZj88FgabwaVDYsC7HCrJDRkI4nYWDV3jnZlP7Np514smjoU7tsVYOZzwVEg0V/CAjvL26U5d6EgsWETxeepieMVuj1vQQ5i9JzUUgNMMXHYtWOT3wiCXby39AuUnDyJhMTekCN7I3/3RiyalQn3rfLA1sX/cEk7jjvWT3BQxRlD5wBPfRm6AeS9PpIKigV0gRAmrW0aYcJiohXPlbYUmoA+5TtXwB22oO174Nn6hadZoAukTtYvIqjWclJCd/xIx32fpI7U5YAePiknDBIRUa4rRkjUpqSebFfCrJB7MA2ZlfCh+Ju7Nzzeh3ArjV2XPayeYFdywSwXw3CtYAO4HJ426YnN2htDgR8wW8BcVJhWwpCGJq0AFU10gQDPEBPGMynEgMjYyvBhkCCfWKYa4gd5kvlrt4Hl/QG2fQ/YyRK1O/yLgQjw+qKuJpcWiJjOuIu7HWlhbxCKp2Q1pHGL1X26i9rs8xzVa6GGXW4vrugUr+XDi5R7wr6CukJd1PVPW4tu6I7Qhp7i1Yo6Ug4SY0KoY+VwSf0f1bJ8+M2uD1ciGHdam4Lkh1vu6tXOjGitgXzwdRKdt9TgSSb1LYZidQEd/laYgg2pz/7pczUp4Jcoj9F9s3m7LbfLOyn8LG4wZMtNGk5VXoHqTQMNNOb7G11EU3Z5uL3hmjYFyRlgw6du81Fm7e9obeSgB8eMmWibkQ/dvL+hGzXVe7AXB1wOGKZ/D31OGXIT30eVYaiyc9XhbskvjcyayAZNDtEF9WWq1fHDhqK59rrYbXDuxIb4z3Ai6iVE0CU9DZRTVxiW9KWHpIwnXlAHT805xXPDtC/8DyzANJxMnA4HRSVObsAbTUswrv0MOiSF15YjfsQZIVK14zhtjq/lqvj5HSt2djz7wZHobDpYRpQn4EVpfSC0utEvQLLVgGXM9yNbQRVXtKNwxkT3uVgCfkr4Ga1kTN71IeBPrxyl1BrTh+BAEE/T9U5autuQvSKik41JND387O2AER+5FqHKHsCH3FJPp6gXQQKy6JkjTOozGFLicOXdJRS3u7E0OZa929m19WfUQ7L3ymhskbGs0IP8cg+In0LHOsUc83PDaJTJ7WqaOdcAUdhZMCIBP5A8TyJa6ApF8QV0uJDi4ruQiAeucSzeL4tfxzRgR+lYlhCFxA7PfUozooSNg+IQOSAWL5Icd/rsjuxEKvhGgTiMvueRLmEpvdin3cm5brflAuLjiHGN7suMFGapqZ1nWxzIJm/TnFSjgiXQ+3IvIwroc92oJFZZ1ww0tvVM9v8nQPPWAlxFdYa/s3vfyc3No4SQpwkEjEQgihFRRIs4AnasVKXV+kCcsWiD2moroxbHYrX4RO0oAtX6qLQVR0UYLVJBHgEiBgKRQBKShkDI+3Xf9+6e/mf3hrzuvSSB1u7Mzt67u2f3/M/z/9//bz98oF+a3geKFw5IFYCjr4MUKA+8bhcFIMlQWyuxQ5oDt2pBw7+r8PGaV5BbMB1+vwqny4XKg/uRlJaJlNTUOGdH+5UBr3cWD/qmtLU2Z9ptVofX3eUQ8zeYrE63P9iWkJBUH1T4bkVRN+ZckL9TZYZgY+0x3Hj3PZhYMAklO3biKD2zvqIMo7PG4oUn5kI6vBmKKUEAX1CPbqSgqE0DyaSpi8m3XYNwvq0HGhiSBIa7iQJKwO+Lc3d2LDWo3vs9p47YaxqPEh/7Z2Mel6cXbPM5HWTgDmfbiWz6KyoqjxzeXU+OXoI3aNpCUrhVkqQmFgWoPyuA5mw2HvKBBgrYVZXNKd22+QNJUhyCYLNZGjkjtVWGXJ8hOGvtUw81Trh4ZlFsYuLbNrvd+X/BAEE4C7gwI+0YdnqmxT334vN7ZbgnyFrxWzq3UjIaUF2281WuKq8GRT+OaixNG5t3A2nb8bPW2BGNCuUDsgFXVe/eVPLkovmdBuabIA2jqjai19LzjSYDzFZesPOLz+rWrnh5C7OaLoyKyp9TDRAEqoF43lb9ptx88OY2v4yH11Zqdv9fME/4fUGYNOyZDUpp7DEGrP6s+odmOVh2+9XJCLqTX6crD4SajkaoAeJFg3ZJD7B5MA3H9+xTS99qJybczGwWvLu1Aa2dfq00OVwD6hsVcApjFSWoESyaLAQYNGvej7Bhzw6kpGdr58NtArt778uTqG8JwuBvWcwsDj8zx62nB1pHpgHNhwfonAA4nbK6/5119NCbtGCfsk2JGON2K9hb0aFhcAMzXoUyFTetw47EWGRPOB852VlIychETJyN1nQzOUcLSdYEm8UCSfwmZiaIPT4ekmhZEpmOh1aJoB9vvrMai35+N+pra2icYUDwwdDtDmDz/jYsvDaN7hcF5MT5zBTr5k3lr7HR+UUwWkM1paEwwDqqzxUL+ImSmfzwR5vpt7FvOi3yDyGldtr7NvwEKQyyxjjw/BvPYdIlBeImHTscMrgc1CqtfRBRiOTu/Y/+it888Fts//JrxDkM/bJHRtpX2+DuF19qgmqv/qX61bKfSeddPQ2xKVUa+NpjSrlzIphAFznVTtpdTeBl7y6lTG1rL/FhjKdvKZq470gchb9/8jdMGp8D3tYOPhzio6aiTqx4+Rl8sGkdEpMz4XQGT9MiDv4gD58EyuYktWZLJQ+4FmB0PpA0Tt8jaYDafZI4agRvLFtOjHhMVALDToji0zirAQmxBpxspclInEwCeHLFr0nNYzSpsxg6KmpP/0JIwqSKdGPU+JguCrRRRx9ZCIkWGaGM89LT8cH6v8Dj9WPJvQ/iSPlBusSQFG8Kn4qEcB1e8ck6dNbakFLwlqYJkRggxVPS1lR+FzrqHuvpsQqrqTQfq4Xj/AwLKmpcuOqa6XjhTy9pKrxx42Y8+8Qf0EXO0WTWrUaYZjCgF+2eXv4QfnrHLTq2N3CZI6Irq2px2013kDPUi4+i+Uj4WPEMgbjdes/NWPLQfVj93ir8YuFilOw+gKnZxLCAP/KqLsy54cCfmTG2BgnZWyMygLdUZPLjxa9GI15Lp62jgZzrMHtuBdZvfR23LbpTc1gCsp83bzbmXX9tSPohMLMHuBBSCoTsPMy6Kcbn5mRi7+E9/esQveGhvrs92rFw6iVoqK3GtHmLoYjV6iTR5joRvk1AgGVNh96W0gpFKccVngEdNUvpjbFAtHK/Ch6TiYDHi8K8NHz+j2cQm5mldU73qHlNTR0+/fRzHCjdDx+pvIk8/dRphbjjzgWw22yRm2+0xEvVmjK+3laMPbtL0N3aAnNMLHLG52LG5YVIz0jVwFdGK0VO3jg8WrSA0lNVc8A0ETBXfWQ40tuZxY/vuhcFd70YNhsMvnlpIx2SzwRNwZYCPmamXtYiHTWkXnQ6bnATYySTEVab7bQn9/mDaG5rw4ED5SThLIwfd57mIAfNkfKJ2roTKPm2DJOnTERKUhIRH6P1iomc1+XyIkAMTUyM1xtD2mu1XUenTGCntkfWgJDwIFtKDPdsLwzPgFWFfEghnQB2YjPAR19BgzyQRudBihkVdb0993Exg3KilBjp1hwdayymZbcG0RrVNC3wu5yG+8vsUULhMwCLIegd7ga9GyomHVwhmx573dDG9gijuwXc7xYplZa/M0eyHmoPpSIusOqmMvD2I2C+ViK8Vh8bjfhQKwI5xJhouQDXlW1IItBf6GnUJqAqXZAm3qm1FkWPPfXYnolaZk/yJOxeq/6Elko1ChOEM+uqBT+0RluyewpvQw8qVF9kBih+J4wWO4bbRSLW2hO7aN4cUv5CYoIrvGIZSdJPvALs+44CeZve6ibWOEGw8AkeH/gffwXk5wI+f1jJg4hXv3lpeET3qXzCNupIZAaY4/5FNn0D2AiyZMGEUyVQOqohX/Iw/bf1Lw4KnvqIwOX3abU8VlYB1DfqhMfHgV8wFsimeN7j1+4b1GpnigWv/Bhq9YZQhWQkIaUCZk3YHBETVN65diZ3t24dEXf7bmQGLOUiMomFum0qPQT1dNud0ch7Y23xWcbJPVDL3w4B6GeBOSgBD4sbky/ftvFYeFD0n49APVW2Bu7mRWd0KEPZRLO6yQ4pZw5Y6rRQi7wScnR8gMPsk35TFsq7j4NXfULBWbneQs+ksxfKuOuWSnnzn2WZl4XXAH7oQ/IRAYO6b/Vu+LouxrlCeAQjjKTm6bN1jSCCmKiKi6xNOESRBSqi8cOjM6fjO7DmfXqP5rnYhCnaUz+Sxl//E/FburQoPAOC788NyYJZeFdDCUksH8PAOiTRsctF075fe6lqSgIKiyBdMB9qcyWU0vU6AyJJU8yFGCFPuQlSSh7Uqs+hFq+EwX1cd3rMCJWZyJCk4Tk+2biROTJOt23LCz6M4AO+WtYbkga84Me2iA6DHw+csCjfydyj5QUd8igcNhfgkPkKVNGx2ZAFL03US3x45FLgsjEDzLByK9QK8kOmAZkmxQRSzuWQJ87td7qiDVi2Q+ebmeaaFKzDOH8pJnm3YaJvH+KVZo0xCrOcRqh71d4DljxxpTT9wQe1GCBEK8u4PEJhZN+aAZ7dTEz46hZeX7yOme1M5m4UW2dhk30hakz654xmUQoK49h4KEVffrWMMfbBF4PfrqMMrVzTBpaYBUPh7YPKy13kOx/dokAgYuFQN5WcpS8km1xfCa7vXouLvduJGTYSdtDLMmdcxbKu3KOZYN/mjN4K9QAGVH4xOC6iJUeq2SRvr2x/6bW0N4ritCBFHZrp020/IEE/PUuGKYzWuinnVSjxsSckhh3/1Ncqqtp42FpceKRRQrfC8Lht1e8uzM38PYzx4SPT9OmRIkEePvlRfUody1zS4sISg0FdThN6TB6CGYrKZQNFyau+UVFU2DvgUBPHG3Su02fTrM0sK7h7ioTLMnql9O4BFRUtXKsJD2mFo4QwNU5demGs/LzfMgOwtBM5Z+bc8BZ8rlVMH589lj2+s47P7PZjJf2fHC1/Et/57a7nyHSoWuv3hiNc+8BJqLSlz9vXlqpYuReYncOQk8DwxbEzE6/oPRG74i1YTIpclpvI0OLFsGC4EUU8io5zbEuNxRS7haHJyWeQZSwjhswyhNEM0Taw4ajuomJMkaEAu0lnVjHtYT6Q1PwKvUd8/rg+NwkrzDIrddGC4/TrJ//ntUEekoLdjO3Z8eyaTh/HQYpusxxscqsHN3qDfC4xazJN3NRTZugZ18+p6YSFulNDv/XT3aQlBx1mfEr3rzfJrIqYrd1nNTDt3WcLun7v7fPf9/Yf4enahh6ho+IAAAAASUVORK5CYII=",MobileEmpItem_vue_vue_type_style_index_0_lang="";const _sfc_main$11={components:{woman:woman,man:man,VanRadio:Radio,VanIcon:Icon,VanCheckbox:Checkbox,VanImage:Image},data(){return{defaultHeadImg:"0"==this.userItem.sex?woman:man}},props:{userItem:{type:Object,default:()=>{}},showDetail:{type:Boolean,default:!1}}},_hoisted_1$H={style:{display:"flex"}},_hoisted_2$A={style:{width:"40px","align-items":"center",display:"flex"}},_hoisted_3$s={class:"user-info"},_hoisted_4$r={class:"user-name"},_hoisted_5$q={key:0,class:"user-detail"};function _sfc_render$$(e,t,o,n,i,l){const a=vue.resolveComponent("van-image");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1$H,[vue.createElementVNode("div",_hoisted_2$A,[vue.createVNode(a,{round:"",width:"32px",height:"32px",src:o.userItem&&o.userItem.headImg?o.userItem.headImg:i.defaultHeadImg,style:{"vertical-align":"middle","align-items":"center"}},null,8,["src"])]),vue.createElementVNode("div",_hoisted_3$s,[vue.createElementVNode("div",null,[vue.createElementVNode("div",_hoisted_4$r,vue.toDisplayString(o.userItem.userName),1),o.showDetail?(vue.openBlock(),vue.createElementBlock("div",_hoisted_5$q,vue.toDisplayString(o.userItem.companyName)+" / "+vue.toDisplayString(o.userItem.deptName),1)):vue.createCommentVNode("",!0)])])])}var MobileEmpItem=_export_sfc(_sfc_main$11,[["render",_sfc_render$$]]),index$2="";const _sfc_main$10={components:{MobileEmpItem:MobileEmpItem,VanCell:Cell,VanCellGroup:CellGroup,VanRadio:Radio,VanCheckbox:Checkbox},props:{currentEmpList:{type:Array,default:()=>[]},showDetail:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1}}};function _sfc_render$_(e,t,o,n,i,l){const a=vue.resolveComponent("mobile-emp-item"),r=vue.resolveComponent("van-checkbox"),s=vue.resolveComponent("van-radio"),d=vue.resolveComponent("van-cell"),u=vue.resolveComponent("van-cell-group");return vue.openBlock(),vue.createElementBlock("div",null,[vue.createVNode(u,null,{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.currentEmpList,(e=>(vue.openBlock(),vue.createBlock(d,{key:e.userId},{title:vue.withCtx((()=>[o.multiple?(vue.openBlock(),vue.createBlock(r,{key:0,name:e.userId,shape:"square"},{default:vue.withCtx((()=>[vue.createVNode(a,{"user-item":e,"show-detail":o.showDetail},null,8,["user-item","show-detail"])])),_:2},1032,["name"])):(vue.openBlock(),vue.createBlock(s,{key:1,name:e.userId},{default:vue.withCtx((()=>[vue.createVNode(a,{"user-item":e,"show-detail":o.showDetail},null,8,["user-item","show-detail"])])),_:2},1032,["name"]))])),_:2},1024)))),128))])),_:1})])}var MobileEmpList=_export_sfc(_sfc_main$10,[["render",_sfc_render$_]]),MobileOrgItem_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$$={components:{OfficeBuilding:office_building_default,Share:share_default,VanRadio:Radio,VanIcon:Icon,VanCheckbox:Checkbox,VanImage:Image},data:()=>({}),props:{item:{type:Object,default:()=>{}},showDetail:{type:Boolean,default:!1}}},_hoisted_1$G={style:{display:"flex"}},_hoisted_2$z={class:"org-img-box"},_hoisted_3$r={class:"org-info"},_hoisted_4$q={key:0},_hoisted_5$p={key:0,class:"org-detail"};function _sfc_render$Z(e,t,o,n,i,l){const a=vue.resolveComponent("Share"),r=vue.resolveComponent("el-icon"),s=vue.resolveComponent("OfficeBuilding");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1$G,[vue.createElementVNode("div",_hoisted_2$z,[vue.createElementVNode("div",{class:vue.normalizeClass(["van-image van-image--round org-img",{dept:"2"==o.item.type}])},["2"==o.item.type?(vue.openBlock(),vue.createBlock(r,{key:0,class:"org-icon"},{default:vue.withCtx((()=>[vue.createVNode(a,{color:"white"})])),_:1})):(vue.openBlock(),vue.createBlock(r,{key:1,class:"org-icon"},{default:vue.withCtx((()=>[vue.createVNode(s,{color:"white"})])),_:1}))],2)]),vue.createElementVNode("div",_hoisted_3$r,[vue.createElementVNode("div",null,[vue.createElementVNode("span",{class:vue.normalizeClass(["dept",{company:"1"==o.item.type}])},vue.toDisplayString(o.item.text),3),o.showDetail?(vue.openBlock(),vue.createElementBlock("div",_hoisted_4$q,["2"==o.item.type?(vue.openBlock(),vue.createElementBlock("span",_hoisted_5$p,vue.toDisplayString(o.item.companyName),1)):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0)])])])}var MobileOrgItem=_export_sfc(_sfc_main$$,[["render",_sfc_render$Z],["__scopeId","data-v-f13dd9b0"]]);const _sfc_main$_={components:{MobileOrgItem:MobileOrgItem,VanCell:Cell},methods:{showChildren(e){this.$emit("show-children",e)}},props:{currentList:{type:Array,default:()=>[]}}};function _sfc_render$Y(e,t,o,n,i,l){const a=vue.resolveComponent("mobile-org-item"),r=vue.resolveComponent("van-cell");return vue.openBlock(),vue.createElementBlock("div",null,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.currentList,(e=>(vue.openBlock(),vue.createBlock(r,{key:e.id,onClick:t=>l.showChildren(e),"is-link":""},{default:vue.withCtx((()=>[vue.createVNode(a,{item:e},null,8,["item"])])),_:2},1032,["onClick"])))),128))])}var MobileEmpOrgList=_export_sfc(_sfc_main$_,[["render",_sfc_render$Y]]),MobileEmpSelectorDialog_vue_vue_type_style_index_0_lang="",MobileEmpSelectorDialog_vue_vue_type_style_index_1_lang="";const _sfc_main$Z={name:"MobileEmpSelectorDialog",components:{TagInput:TagInput,VanPopup:Popup,VanButton:Button,VanTag:Tag,VanList:List,VanCell:Cell,VanRow:Row,VanCol:Col,VanRadio:Radio,VanCellGroup:CellGroup,VanRadioGroup:RadioGroup,VanIcon:Icon,VanCheckbox:Checkbox,VanCheckboxGroup:CheckboxGroup,VanSearch:Search,VanPullRefresh:PullRefresh,MobileEmpList:MobileEmpList,MobileEmpOrgList:MobileEmpOrgList,VanLoading:Loading},props:{value:{type:Array,default:()=>[]},visible:Boolean,multiple:{type:Boolean,default:!1},loadingText:{type:String,default:""},selectType:{type:String,default:""},title:{type:String,default:""},action:{type:Boolean,default:!0},fullscreen:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},data(){return{error:!1,noData:!1,isLoading:!1,loading:!1,finished:!1,searchLoading:!1,searchFinished:!1,searchIsLoading:!1,searchNoData:!1,searchError:!1,selectedList:this.value.map((e=>({...e,userId:e.userId?e.userId:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())}))),treeRoot:[],selectedItem:"",selectedItems:[],treeLoading:!1,showSearchPanel:!1,selectedPath:[],filterText:"",filterItems:[],orgAllData:[],currentList:[],currentEmpList:[],currentSearchEmpList:[],currentDeptId:"",orgTreeProps:{label:"text",children:"children"},dialogVisible:!1,id:"dialog_"+(new Date).getTime(),showForm:!1,pager:{pageSize:15,pageNum:1,total:0},searchPager:{pageSize:15,pageNum:1,total:0}}},methods:{open(e){this.dialogVisible=!0,this.selectedList=e,this.getOrgTreeData()},onSearch(e){this.getEmpData({},!1)},onLoad(){this.getInfo()},onSearchLoad(){this.getSearchInfo(),this.searchLoading=!0},onCancel(){this.showSearchPanel=!1,this.filterText=""},debounce(e,t){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{e()}),t)},doFilter(e){this.showSearchPanel=!0,e?this.debounce(this.getSearchInfo,1e3):this.currentSearchEmpList=[]},getSearchInfo(){this.searchLoading=!0;const e={keyword:this.filterText};this.searchPager.pageNum=1,ajaxListPerson({pager:{pageSize:this.searchPager.pageSize,pageNum:this.searchPager.pageNum-1},searchInfo:{...e}}).then((e=>{const{rows:t,total:o}=e;this.searchLoading=!1,this.currentSearchEmpList=this.currentSearchEmpList.concat(t),this.searchPager.pageNum++,this.searchPager.total=o,0===this.currentSearchEmpList.length&&1===this.searchPager.pageNum&&(this.searchNoData=!0),this.currentSearchEmpList.length===this.searchPager.total&&(this.searchFinished=!0)})).finally((()=>{this.searchLoading=!1}))},showRoot(){this.currentList=this.treeRoot,this.selectedPath=[],this.currentEmpList=[],this.currentDeptId=""},showChildren(e){this.currentList=e.children;const t=this.selectedPath.findIndex((t=>t.id===e.id));t>=0?this.selectedPath.splice(t+1):this.selectedPath.push(e),this.$nextTick((()=>{let e=this.$refs.selectedPath;e.scrollLeft=e.scrollWidth})),"2"==e.type?(this.currentDeptId=e.id,this.currentEmpList=[],this.pager.pageNum=1,this.pager.total=0,this.pager.pageSize=15,this.getInfo()):(this.currentDeptId="",this.pager.pageNum=1,this.pager.total=0,this.currentEmpList=[])},filterNode:(e,t)=>!e||-1!==t.text.indexOf(e),doRemoveAll(){this.selectedItems=[],this.selectedList=[]},doRemove(e){let t=this.selectedItems.findIndex((t=>t===e.userId));this.multiple?t>=0&&(this.selectedItems=this.selectedItems.filter((t=>t!==e.userId))):t>=0&&(this.selectedList.splice(t,1),this.selectedItem="")},getInfo(){this.currentDeptId&&(this.loading=!0,ajaxListPerson({pager:{pageSize:this.pager.pageSize||15,pageNum:this.pager.pageNum-1},searchInfo:{deptId:this.currentDeptId}}).then((e=>{let t=[];e.rows.forEach((e=>{-1===this.currentEmpList.findIndex((t=>t.userId===e.userId))&&t.push(e)})),this.currentEmpList=this.currentEmpList.concat(t),this.pager.pageNum++,this.pager.total=e.total,0===this.currentEmpList.length&&1===this.pager.pageNum&&(this.noData=!0),this.currentEmpList.length===this.pager.total&&(this.finished=!0)})).catch((()=>{this.error=!0,this.loading=!1})).finally((()=>{this.loading=!1})))},getEmpData(e){},async getOrgTreeData(e){this.treeLoading=!0,this.currentDeptId="",this.showSearchPanel=!1,this.filterText="",this.pager.pageNum=1;let t=[];try{t="company"===this.selectType?await ajaxListCompanyTree():await ajaxListOrgTree()}finally{this.treeLoading=!1}this.orgAllData=t;const o=treeDataTranslate(t,"id","pid");this.$nextTick((()=>{this.selectedList&&this.selectedList.length>0&&this.multiple&&(this.selectedItems=this.selectedList.map((e=>e.userId))),this.currentList=o,this.treeRoot=o,this.selectedPath=[],this.currentEmpList=[]}))},close(){this.dialogVisible=!1,this.currentEmpList=[],this.selectedItems=[]},submit(){this.$emit("dialog-confirm",this.selectedList)},end(){this.loading=!1}},mounted(){},watch:{dialogVisible(e){e&&this.$nextTick((()=>{try{const e=document.querySelector(".fm-generate-preview.mobile").offsetWidth,t=document.querySelector(".el-main").offsetWidth;if(t&&t>400){const t=document.querySelector("body").offsetWidth;document.querySelectorAll(".van-selector-container").forEach((o=>{o.style.width=e+"px",o.style.left=t/2-e/2+"px"}))}}catch(e){}}))},selectType(e){this.selectType=e},filterText(e,t){e!==t&&(this.currentSearchEmpList=[])},selectedItem(e){this.selectedItem=e,""===e?this.selectedList=[]:this.showSearchPanel?this.selectedList=this.currentSearchEmpList.filter((t=>t.userId===e)):this.currentEmpList.length>0&&(this.selectedList=this.currentEmpList.filter((t=>t.userId===e)))},selectedItems(e,t){let o={};if(o=t.length>e.length?t.filter((t=>!e.includes(t))):e.filter((e=>!t.includes(e))),this.showSearchPanel){if(e.length>t.length){const e=this.currentSearchEmpList.filter((e=>e.userId===o[0]));this.selectedList.push(e[0])}else if(o[0]){const e=this.selectedList.findIndex((e=>e.userId===o[0]));this.selectedList.splice(e,1)}}else if(e.length>t.length){if(this.currentEmpList.length>0){const e=this.currentEmpList.filter((e=>e.userId===o[0]));if(e){-1==this.selectedList.findIndex((e=>e.userId===o[0]))&&(this.selectedList.push(e[0]),setTimeout((()=>{this.$refs.tagInputRef.scrollBottom()}),200))}}}else if(this.selectedList.length>e.length){const t=this.selectedList.map((e=>o&&e.userId)).filter((t=>!e.includes(t))),n=this.selectedList.findIndex((e=>e.userId===t[0]));this.selectedList.splice(n,1)}},value(e){this.selectedList=this.value.map((e=>({...e,userId:e.userId?e.userId:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())}))),this.multiple?this.selectedItems=this.multiple?this.value.map((e=>e.userId)):[]:this.selectedItem=!this.multiple&&this.value?this.value.map((e=>e.userId))[0]:""}}},_hoisted_1$F={class:"van-selector-container"},_hoisted_2$y={class:"van-selector-header"},_hoisted_3$q={style:{width:"100%"}},_hoisted_4$p={style:{width:"100%"}},_hoisted_5$o={action:"/"},_hoisted_6$m={key:0,ref:"selectedPath",class:"selected-path"},_hoisted_7$k=["onClick"],_hoisted_8$d={class:"van-selector-body"},_hoisted_9$c={key:0,class:"van-sku-messages"},_hoisted_10$a={key:1,class:"no-data"},_hoisted_11$a={key:1,class:"van-sku-messages"},_hoisted_12$8={key:0,style:{"text-align":"center","line-height":"30px"}},_hoisted_13$5={class:"van-selector-actions"};function _sfc_render$X(e,t,o,n,i,l){const a=vue.resolveComponent("van-search"),r=vue.resolveComponent("tag-input"),s=vue.resolveComponent("van-icon"),d=vue.resolveComponent("van-loading"),u=vue.resolveComponent("mobile-emp-org-list"),c=vue.resolveComponent("mobile-emp-list"),p=vue.resolveComponent("van-radio-group"),m=vue.resolveComponent("van-checkbox-group"),h=vue.resolveComponent("van-list"),f=vue.resolveComponent("van-button"),v=vue.resolveComponent("van-col"),g=vue.resolveComponent("van-row"),y=vue.resolveComponent("van-popup");return vue.openBlock(),vue.createBlock(y,{show:i.dialogVisible,"onUpdate:show":t[8]||(t[8]=e=>i.dialogVisible=e),"get-container":"body",position:"bottom",style:{height:"100%","max-height":"100%"}},{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_1$F,[vue.createElementVNode("div",_hoisted_2$y,[vue.createElementVNode("div",_hoisted_3$q,[vue.createElementVNode("div",_hoisted_4$p,[vue.createElementVNode("form",_hoisted_5$o,[vue.createVNode(a,{modelValue:i.filterText,"onUpdate:modelValue":t[0]||(t[0]=e=>i.filterText=e),"show-action":""!==i.filterText||i.showSearchPanel,placeholder:"请输入关键字",onSearch:l.onSearch,onCancel:l.onCancel,onInput:l.doFilter},null,8,["modelValue","show-action","onSearch","onCancel","onInput"])])]),vue.createVNode(r,{ref:"tagInputRef",placeholder:"请选择","model-value":i.selectedList,onOnRemove:l.doRemove,onOnRemoveAll:l.doRemoveAll,scrollMaxHeight:"73","data-type":"emp"},null,8,["model-value","onOnRemove","onOnRemoveAll"]),i.showSearchPanel?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("div",_hoisted_6$m,[vue.createElementVNode("span",{style:{"margin-right":"6px"},onClick:t[1]||(t[1]=(...e)=>l.showRoot&&l.showRoot(...e))},vue.toDisplayString("公司、部门")),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.selectedPath,((e,t)=>(vue.openBlock(),vue.createElementBlock("span",{key:e.id},[vue.createElementVNode("span",{class:vue.normalizeClass({"has-children":t!==i.selectedPath.length-1}),onClick:t=>l.showChildren(e)},vue.toDisplayString(e.text),11,_hoisted_7$k),t!==i.selectedPath.length-1?(vue.openBlock(),vue.createBlock(s,{key:0,name:"arrow"})):vue.createCommentVNode("",!0)])))),128))],512))])]),vue.createElementVNode("div",_hoisted_8$d,[i.showSearchPanel?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("div",_hoisted_9$c,[vue.createElementVNode("div",null,[i.treeLoading?(vue.openBlock(),vue.createBlock(d,{key:0,style:{"text-align":"center"}})):vue.createCommentVNode("",!0),vue.createVNode(u,{"current-list":i.currentList,onShowChildren:l.showChildren},null,8,["current-list","onShowChildren"]),i.loading||0!==i.currentEmpList.length||""===i.currentDeptId?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("div",_hoisted_10$a," 暂无人员数据 ")),i.loading?(vue.openBlock(),vue.createBlock(d,{key:2,style:{"text-align":"center"}})):vue.createCommentVNode("",!0),i.currentEmpList.length>0?(vue.openBlock(),vue.createBlock(h,{key:3,error:i.error,modelValue:i.loading,"onUpdate:modelValue":t[4]||(t[4]=e=>i.loading=e),finished:i.finished,"finished-text":"没有更多了",onLoad:l.onLoad,offset:10},{default:vue.withCtx((()=>[o.multiple?(vue.openBlock(),vue.createBlock(m,{key:1,modelValue:i.selectedItems,"onUpdate:modelValue":t[3]||(t[3]=e=>i.selectedItems=e)},{default:vue.withCtx((()=>[vue.createVNode(c,{"current-emp-list":i.currentEmpList,multiple:o.multiple},null,8,["current-emp-list","multiple"])])),_:1},8,["modelValue"])):(vue.openBlock(),vue.createBlock(p,{key:0,modelValue:i.selectedItem,"onUpdate:modelValue":t[2]||(t[2]=e=>i.selectedItem=e)},{default:vue.withCtx((()=>[vue.createVNode(c,{"current-emp-list":i.currentEmpList,multiple:o.multiple},null,8,["current-emp-list","multiple"])])),_:1},8,["modelValue"]))])),_:1},8,["error","modelValue","finished","onLoad"])):vue.createCommentVNode("",!0)])])),i.showSearchPanel?(vue.openBlock(),vue.createElementBlock("div",_hoisted_11$a,[i.currentSearchEmpList&&i.currentSearchEmpList.length<=0?(vue.openBlock(),vue.createElementBlock("div",_hoisted_12$8," 暂无相关数据！ ")):vue.createCommentVNode("",!0),i.currentSearchEmpList.length>0?(vue.openBlock(),vue.createBlock(h,{key:1,error:i.error,modelValue:i.searchLoading,"onUpdate:modelValue":t[7]||(t[7]=e=>i.searchLoading=e),finished:i.searchFinished,"finished-text":"没有更多了",onLoad:l.onSearchLoad,offset:10},{default:vue.withCtx((()=>[o.multiple?(vue.openBlock(),vue.createBlock(m,{key:1,modelValue:i.selectedItems,"onUpdate:modelValue":t[6]||(t[6]=e=>i.selectedItems=e)},{default:vue.withCtx((()=>[vue.createVNode(c,{"current-emp-list":i.currentSearchEmpList,multiple:o.multiple,"show-detail":""},null,8,["current-emp-list","multiple"])])),_:1},8,["modelValue"])):(vue.openBlock(),vue.createBlock(p,{key:0,modelValue:i.selectedItem,"onUpdate:modelValue":t[5]||(t[5]=e=>i.selectedItem=e)},{default:vue.withCtx((()=>[vue.createVNode(c,{"current-emp-list":i.currentSearchEmpList,multiple:o.multiple,"show-detail":""},null,8,["current-emp-list","multiple"])])),_:1},8,["modelValue"]))])),_:1},8,["error","modelValue","finished","onLoad"])):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0)]),vue.createElementVNode("div",_hoisted_13$5,[vue.createVNode(g,{gutter:"20"},{default:vue.withCtx((()=>[vue.createVNode(v,{span:"12"},{default:vue.withCtx((()=>[vue.createVNode(f,{round:"",block:"",onClick:l.close},{default:vue.withCtx((()=>[vue.createTextVNode("取消")])),_:1},8,["onClick"])])),_:1}),vue.createVNode(v,{span:"12"},{default:vue.withCtx((()=>[vue.createVNode(f,{type:"primary",round:"",block:"",onClick:l.submit},{default:vue.withCtx((()=>[vue.createTextVNode("确定")])),_:1},8,["onClick"])])),_:1})])),_:1})])])])),_:1},8,["show"])}var MobileEmpSelectorDialog=_export_sfc(_sfc_main$Z,[["render",_sfc_render$X]]);const _sfc_main$Y={name:"EmpSelector",components:{TagInput:TagInput,EmpSelectorDialog:EmpSelectorDialog,MobileEmpSelectorDialog:MobileEmpSelectorDialog},props:{modelValue:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},printRead:{type:Boolean,default:!1},tip:{type:String,default:""},placeholder:{type:String,default:""},ui:{type:String,default:"element"},platform:{type:String,default:"pc"}},emits:["update:modelValue"],data(){return{empList:this.modelValue.map((e=>({...e,userId:e.userId?e.userId:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())}))),selectorId:"empselector_"+(new Date).getTime()}},computed:{},methods:{handleSubmit(e){this.empList=e,"mobile"===this.platform?this.$refs.selectorDialogMobileRef.close():this.$refs.selectorDialogRef.close();try{document.getElementById(this.selectorId).closest(".el-form-item").classList.remove("is-error")}catch(t){}this.$emit("update:modelValue",this.genEmpData())},genEmpData(){return this.empList.map((e=>({userId:e.userId,userName:e.userName,deptId:e.deptId,deptName:e.deptName,companyId:e.companyId,companyName:e.companyName})))},doRemove(e){let t=this.empList.findIndex((t=>t.userId===e.userId));t>=0&&this.empList.splice(t,1),this.$emit("update:modelValue",this.genEmpData())},doRemoveAll(){this.disabled||(this.empList=[],this.$emit("update:modelValue",[]))},openSelectorDialog(e){if(e.target.closest(".clear-btn"))return;if(this.disabled||this.printRead)return;const t=_.cloneDeep(this.empList);"mobile"!==this.platform?this.$refs.selectorDialogRef.open(t):this.$refs.selectorDialogMobileRef.open(t)}},watch:{modelValue(e){this.empList=this.modelValue.map((e=>({...e,userId:e.userId?e.userId:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())})))}}},_hoisted_1$E=["id"];function _sfc_render$W(e,t,o,n,i,l){const a=vue.resolveComponent("tag-input"),r=vue.resolveComponent("mobile-emp-selector-dialog"),s=vue.resolveComponent("emp-selector-dialog");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["selector-items",{"is-disabled":o.disabled}]),id:i.selectorId},[vue.createVNode(a,{onClick:l.openSelectorDialog,placeholder:o.placeholder,"model-value":i.empList,"print-read":o.printRead,disabled:o.disabled,"data-type":"emp",onOnRemoveAll:l.doRemoveAll,onOnRemove:l.doRemove},null,8,["onClick","placeholder","model-value","print-read","disabled","onOnRemoveAll","onOnRemove"]),vue.createVNode(r,{multiple:o.multiple,onDialogConfirm:l.handleSubmit,ref:"selectorDialogMobileRef",title:"人员选择"},null,8,["multiple","onDialogConfirm"]),vue.createVNode(s,{multiple:o.multiple,onDialogConfirm:l.handleSubmit,ref:"selectorDialogRef",width:"800px",title:"人员选择"},null,8,["multiple","onDialogConfirm"])],10,_hoisted_1$E)}var EmpSelector=_export_sfc(_sfc_main$Y,[["render",_sfc_render$W]]);const _sfc_main$X={components:{CusDialog:CusDialog,TagInput:TagInput,OfficeBuilding:office_building_default,Share:share_default},props:{multiple:{type:Boolean,default:!1},selectType:{type:String,default:""},title:{type:String,default:""},width:{type:String,default:"600px"}},data:()=>({Search:search_default,treeLoading:!1,filterText:"",selectedList:[],defaultExpandedKeys:[],orgTreeData:[],orgTreeProps:{label:"text",children:"children"},loading:!1,dialogVisible:!1,id:"dialog_"+(new Date).getTime(),showForm:!1}),emits:["dialog-confirm","dialog-close"],methods:{filterNode:(e,t)=>!e||-1!==t.text.indexOf(e),doRemove(e){let t=this.selectedList.findIndex((t=>t&&t.id===e.id));t>=0&&this.selectedList.splice(t,1),this.handleCheckChange(e,!1),this.$refs.orgTree.setCheckedNodes(this.selectedList)},doRemoveAll(e){this.selectedList=[],this.$refs.orgTree.setCheckedNodes(this.selectedList)},open(e){this.selectedList=e,this.dialogVisible=!0,this.filterText="",this.filterEmpText="",this.getOrgTreeData()},nodeClick(e,t,o){if(e.disabled)return;const n=this.$refs.orgTree.getCheckedKeys();if(this.multiple){this.$refs.orgTree.setCheckedNodes(this.selectedList);-1===this.selectedList.findIndex((t=>t.id===e.id))?this.handleCheckChange(e,!0):this.handleCheckChange(e,!1)}else n instanceof Array&&n[0]===e.id?this.handleCheckChange(e,!1):this.handleCheckChange(e,!0);this.$refs.orgTree.setCheckedNodes(this.selectedList)},handleCheckChange(e,t,o){const n=JSON.parse(JSON.stringify(e));delete n.children;let i=this.selectedList.findIndex((t=>t.id===e.id));this.multiple?t?-1===i&&(this.selectedList.push(n),this.selectedList=genOrgData(this.selectedList,this.orgTreeData)):i>=0&&this.selectedList.splice(i,1):t?(this.selectedList=genOrgData([n],this.orgTreeData),this.$refs.orgTree.setCheckedKeys([e.id],!1)):this.selectedList.length>0&&this.selectedList[0].id===e.id&&(this.$refs.orgTree.setCheckedKeys([],!1),this.selectedList=[])},async getOrgTreeData(){this.treeLoading=!0;let e=[];try{"company"===this.selectType?e=await ajaxListCompanyTree():(e=await ajaxListOrgTree(),e.forEach((e=>{"dept"===this.selectType&&"1"==e.type&&(e.disabled=!0)})));const t=treeDataTranslate(e,"id","pid");this.$nextTick((()=>{this.orgTreeData=t;const e=this.selectedList.map((e=>e.id));this.$refs.orgTree&&this.$refs.orgTree.setCheckedKeys(e);let o=[];this.orgTreeData&&this.orgTreeData.forEach((e=>{o.push(e.id)})),this.defaultExpandedKeys=[...o,...e]}))}finally{this.treeLoading=!1}},close(){this.dialogVisible=!1},submit(){this.selectedList&&this.selectedList.length>0&&(this.selectedList=genOrgData(this.selectedList,this.orgTreeData)),this.$emit("dialog-confirm",this.selectedList)},end(){this.loading=!1},isChecked(e){return this.selectedList.filter((t=>t.userId===e.userId)).length>0},selectionChangeHandle(e,t){this.handleCheckChange(t,!1),this.$refs.orgTree.setCheckedNodes(this.selectedList)}},mounted(){},watch:{filterText(e){this.$refs.orgTree&&this.$refs.orgTree.filter(e)}}},_hoisted_1$D={class:"custom-tree-node"},_hoisted_2$x={key:0,style:{color:"#67c23a"}},_hoisted_3$p={key:1,style:{color:"#409EFF"}},_hoisted_4$o={key:2};function _sfc_render$V(e,t,o,n,i,l){const a=vue.resolveComponent("tag-input"),r=vue.resolveComponent("el-header"),s=vue.resolveComponent("el-input"),d=vue.resolveComponent("OfficeBuilding"),u=vue.resolveComponent("el-icon"),c=vue.resolveComponent("Share"),p=vue.resolveComponent("el-tree"),m=vue.resolveComponent("el-main"),h=vue.resolveComponent("el-container"),f=vue.resolveComponent("cus-dialog"),v=vue.resolveDirective("loading");return vue.openBlock(),vue.createBlock(f,{visible:i.dialogVisible,onOnClose:l.close,ref:"templateDialog",width:o.width,title:o.title,onOnSubmit:l.submit,"custom-class":"selector-dialog-container"},{default:vue.withCtx((()=>[vue.createVNode(h,null,{default:vue.withCtx((()=>[vue.createVNode(r,{style:{padding:"0",height:"auto"}},{default:vue.withCtx((()=>[vue.createVNode(a,{ref:"tagInputRef",placeholder:"请选择","model-value":i.selectedList,onOnRemove:l.doRemove,onOnRemoveAll:l.doRemoveAll,"data-type":"org","show-search":"hidden",scrollMaxHeight:"73"},null,8,["model-value","onOnRemove","onOnRemoveAll"])])),_:1}),vue.createVNode(m,{style:{padding:"0","margin-top":"10px"}},{default:vue.withCtx((()=>[vue.createVNode(r,{style:{padding:"0",height:"auto"}},{default:vue.withCtx((()=>[vue.createVNode(s,{placeholder:"公司/部门",size:"default",modelValue:i.filterText,"onUpdate:modelValue":t[0]||(t[0]=e=>i.filterText=e),"suffix-icon":i.Search,clearable:""},null,8,["modelValue","suffix-icon"])])),_:1}),vue.createVNode(m,{style:{width:"100%",padding:"0",height:"358px","overflow-y":"scroll"}},{default:vue.withCtx((()=>[vue.withDirectives((vue.openBlock(),vue.createBlock(p,{"highlight-current":"","show-checkbox":"","check-strictly":"","default-expanded-keys":i.defaultExpandedKeys,class:"filter-tree","node-key":"id",data:i.orgTreeData,props:i.orgTreeProps,"expand-on-click-node":!1,"filter-node-method":l.filterNode,onCheckChange:l.handleCheckChange,onNodeClick:l.nodeClick,ref:"orgTree"},{default:vue.withCtx((({node:e,data:t})=>[vue.createElementVNode("span",_hoisted_1$D,["1"==t.type?(vue.openBlock(),vue.createElementBlock("span",_hoisted_2$x,[vue.createVNode(u,{style:{"vertical-align":"middle"}},{default:vue.withCtx((()=>[vue.createVNode(d)])),_:1}),vue.createTextVNode(" "+vue.toDisplayString(e.label),1)])):"2"==t.type?(vue.openBlock(),vue.createElementBlock("span",_hoisted_3$p,[vue.createVNode(u,{style:{"vertical-align":"middle"}},{default:vue.withCtx((()=>[vue.createVNode(c)])),_:1}),vue.createTextVNode(" "+vue.toDisplayString(e.label),1)])):(vue.openBlock(),vue.createElementBlock("span",_hoisted_4$o,vue.toDisplayString(e.label),1))])])),_:1},8,["default-expanded-keys","data","props","filter-node-method","onCheckChange","onNodeClick"])),[[v,i.treeLoading]])])),_:1})])),_:1})])),_:1})])),_:1},8,["visible","onOnClose","width","title","onOnSubmit"])}var OrgSelectorDialog=_export_sfc(_sfc_main$X,[["render",_sfc_render$V]]);const _sfc_main$W={components:{MobileOrgItem:MobileOrgItem,VanCell:Cell,VanIcon:Icon,VanCellGroup:CellGroup,VanRadio:Radio,VanCheckbox:Checkbox},methods:{showChildren(e){this.$emit("show-children",e)}},props:{currentList:{type:Array,default:()=>[]},showDetail:{type:Boolean,default:!1},selectType:{type:String,default:""},multiple:{type:Boolean,default:!1}}},_hoisted_1$C={key:0};function _sfc_render$U(e,t,o,n,i,l){const a=vue.resolveComponent("mobile-org-item"),r=vue.resolveComponent("van-checkbox"),s=vue.resolveComponent("van-radio"),d=vue.resolveComponent("van-icon"),u=vue.resolveComponent("van-cell"),c=vue.resolveComponent("van-cell-group");return vue.openBlock(),vue.createElementBlock("div",null,[vue.createVNode(c,null,{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.currentList,(e=>(vue.openBlock(),vue.createBlock(u,{key:e.id,onClick:t=>!o.showDetail&&"dept"===o.selectType&&"1"==e.type&&e.children.length>0&&l.showChildren(e),"is-link":e.children&&e.children.length>0,clickable:""},vue.createSlots({title:vue.withCtx((()=>["dept"===o.selectType&&"2"==e.type||"all"===o.selectType||"company"===o.selectType?(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$C,[o.multiple?(vue.openBlock(),vue.createBlock(r,{key:0,name:e.id,shape:"square"},{default:vue.withCtx((()=>[vue.createVNode(a,{item:e,"show-detail":o.showDetail},null,8,["item","show-detail"])])),_:2},1032,["name"])):(vue.openBlock(),vue.createBlock(s,{key:1,name:e.id},{default:vue.withCtx((()=>[vue.createVNode(a,{item:e,"show-detail":o.showDetail},null,8,["item","show-detail"])])),_:2},1032,["name"]))])):(vue.openBlock(),vue.createBlock(a,{key:1,item:e,"show-detail":o.showDetail},null,8,["item","show-detail"]))])),_:2},[e.children&&e.children.length>0?{name:"right-icon",fn:vue.withCtx((()=>[vue.createVNode(d,{style:{display:"flex","align-items":"center"},name:"arrow",onClick:t=>!("dept"===o.selectType&&"2"==e.type||"all"===o.selectType||"company"===o.selectType)||l.showChildren(e)},null,8,["onClick"])])),key:"0"}:void 0]),1032,["onClick","is-link"])))),128))])),_:1})])}var MobileOrgList=_export_sfc(_sfc_main$W,[["render",_sfc_render$U]]),MobileOrgSelectorDialog_vue_vue_type_style_index_0_lang="",MobileOrgSelectorDialog_vue_vue_type_style_index_1_lang="";const _sfc_main$V={components:{TagInput:TagInput,VanPopup:Popup,VanButton:Button,VanTag:Tag,VanList:List,VanCell:Cell,VanRow:Row,VanCol:Col,VanRadio:Radio,VanCellGroup:CellGroup,VanRadioGroup:RadioGroup,VanIcon:Icon,VanCheckbox:Checkbox,VanCheckboxGroup:CheckboxGroup,VanSearch:Search,MobileOrgList:MobileOrgList},props:{value:{type:Array,default:()=>[]},visible:Boolean,multiple:{type:Boolean,default:!1},loadingText:{type:String,default:""},selectType:{type:String,default:""},title:{type:String,default:""},action:{type:Boolean,default:!0},fullscreen:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},data(){return{treeRoot:[],selectedItem:"",selectedItems:[],finished:!0,treeLoading:!1,showSearchPanel:!1,selectedPath:[],filterText:"",filterItems:[],selectedList:[],orgAllData:[],orgTreeData:[],currentList:[],orgTreeProps:{label:"text",children:"children"},loading:!1,dialogVisible:this.visible,id:"dialog_"+(new Date).getTime(),showForm:!1}},methods:{open(e){this.getOrgTreeData(),this.dialogVisible=!0;const t=e.map((e=>e.id));this.multiple?this.selectedItems=t:this.selectedItem=t[0]},onSearch(e){},onCancel(){this.showSearchPanel=!1,this.filterText=""},doFilter(e){this.showSearchPanel=!0,this.filterItems=e?this.orgAllData.filter((t=>"dept"===this.selectType?"2"==t.type&&-1!==t.text.indexOf(e):-1!==t.text.indexOf(e))):[]},showRoot(){this.currentList=this.treeRoot,this.selectedPath=[]},showChildren(e){this.currentList=e.children;const t=this.selectedPath.findIndex((t=>t.id===e.id));t>=0?this.selectedPath.splice(t+1):this.selectedPath.push(e),this.$nextTick((()=>{const e=this.$refs.selectedPath;e.scrollLeft=e.scrollWidth}))},filterNode:(e,t)=>!e||-1!==t.text.indexOf(e),doRemoveAll(){this.multiple?this.selectedItems=[]:this.selectedItem=""},doRemove(e){this.multiple?this.selectedItems=this.selectedItems.filter((t=>t!==e.id)):this.selectedItem=""},async getOrgTreeData(e){this.treeLoading=!0;let t=[];try{t="company"===this.selectType?await ajaxListCompanyTree():await ajaxListOrgTree(),this.orgAllData=t}finally{this.treeLoading=!0}const o=treeDataTranslate(t,"id","pid");this.orgTreeData=o,this.$nextTick((()=>{this.selectedList&&this.selectedList.length>0&&(this.multiple?this.selectedItems=this.selectedList.map((e=>e.id)):this.selectedItem=this.selectedList[0].id),this.currentList=o,this.treeRoot=o,this.selectedPath=[]}))},close(){this.dialogVisible=!1},submit(){this.$emit("dialog-confirm",this.selectedList)},end(){this.loading=!1}},mounted(){},watch:{dialogVisible(e){e&&this.$nextTick((()=>{try{const e=document.querySelector(".widget-form-container").offsetWidth,t=document.querySelector(".el-main").offsetWidth;if(t&&t>400){const t=document.querySelector("body").offsetWidth;document.querySelectorAll(".van-sku-container").forEach((o=>{o.style.width=e+"px",o.style.left=t/2-e/2+"px"}))}}catch(e){}}))},selectedItem(e){this.selectedItems=[e]},selectedItems(e){let t=this.orgAllData.filter((t=>-1!==e.indexOf(t.id)));t=JSON.parse(JSON.stringify(t)),t.forEach((e=>{delete e.children})),this.selectedList=genOrgData(t,this.orgTreeData)}}},_hoisted_1$B={class:"van-selector-container"},_hoisted_2$w={class:"van-selector-header"},_hoisted_3$o={style:{width:"100%"}},_hoisted_4$n={style:{width:"100%"}},_hoisted_5$n={action:"/"},_hoisted_6$l={key:0,ref:"selectedPath",class:"selected-path"},_hoisted_7$j=["onClick"],_hoisted_8$c={class:"van-selector-body"},_hoisted_9$b={key:0,class:"van-sku-messages"},_hoisted_10$9={key:1,class:"van-sku-messages"},_hoisted_11$9={key:0,style:{"text-align":"center","line-height":"30px"}},_hoisted_12$7={class:"van-selector-actions"};function _sfc_render$T(e,t,o,n,i,l){const a=vue.resolveComponent("van-search"),r=vue.resolveComponent("tag-input"),s=vue.resolveComponent("van-icon"),d=vue.resolveComponent("mobile-org-list"),u=vue.resolveComponent("van-radio-group"),c=vue.resolveComponent("van-checkbox-group"),p=vue.resolveComponent("van-button"),m=vue.resolveComponent("van-col"),h=vue.resolveComponent("van-row"),f=vue.resolveComponent("van-popup");return vue.openBlock(),vue.createBlock(f,{show:i.dialogVisible,"onUpdate:show":t[6]||(t[6]=e=>i.dialogVisible=e),"get-container":"body",position:"bottom",style:{height:"100%","max-height":"100%"}},{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_1$B,[vue.createElementVNode("div",_hoisted_2$w,[vue.createElementVNode("div",_hoisted_3$o,[vue.createElementVNode("div",_hoisted_4$n,[vue.createElementVNode("form",_hoisted_5$n,[vue.createVNode(a,{modelValue:i.filterText,"onUpdate:modelValue":t[0]||(t[0]=e=>i.filterText=e),"show-action":""!==i.filterText||i.showSearchPanel,placeholder:"company"===o.selectType?"请输入公司":"dept"===o.selectType?"请输入部门":"请输入公司/部门",onSearch:l.onSearch,onCancel:l.onCancel,onInput:l.doFilter},null,8,["modelValue","show-action","placeholder","onSearch","onCancel","onInput"])])]),vue.createVNode(r,{ref:"tagInputRef",placeholder:"请选择","model-value":i.selectedList,onOnRemove:l.doRemove,onOnRemoveAll:l.doRemoveAll,scrollMaxHeight:"73","data-type":"org"},null,8,["model-value","onOnRemove","onOnRemoveAll"]),i.showSearchPanel?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("div",_hoisted_6$l,[vue.createElementVNode("span",{style:{"margin-right":"6px"},onClick:t[1]||(t[1]=(...e)=>l.showRoot&&l.showRoot(...e))},vue.toDisplayString("company"===o.selectType?"公司":"dept"===o.selectType?"部门":"公司、部门"),1),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.selectedPath,((e,t)=>(vue.openBlock(),vue.createElementBlock("span",{key:e.id},[vue.createElementVNode("span",{class:vue.normalizeClass({"has-children":t!==i.selectedPath.length-1}),onClick:t=>l.showChildren(e)},vue.toDisplayString(e.text),11,_hoisted_7$j),t!==i.selectedPath.length-1?(vue.openBlock(),vue.createBlock(s,{key:0,name:"arrow"})):vue.createCommentVNode("",!0)])))),128))],512))])]),vue.createElementVNode("div",_hoisted_8$c,[i.showSearchPanel?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("div",_hoisted_9$b,[vue.createElementVNode("div",null,[o.multiple?(vue.openBlock(),vue.createBlock(c,{key:1,modelValue:i.selectedItems,"onUpdate:modelValue":t[3]||(t[3]=e=>i.selectedItems=e)},{default:vue.withCtx((()=>[vue.createVNode(d,{multiple:o.multiple,"current-list":i.currentList,"select-type":o.selectType,onShowChildren:l.showChildren},null,8,["multiple","current-list","select-type","onShowChildren"])])),_:1},8,["modelValue"])):(vue.openBlock(),vue.createBlock(u,{key:0,modelValue:i.selectedItem,"onUpdate:modelValue":t[2]||(t[2]=e=>i.selectedItem=e)},{default:vue.withCtx((()=>[vue.createVNode(d,{multiple:o.multiple,"current-list":i.currentList,"select-type":o.selectType,onShowChildren:l.showChildren},null,8,["multiple","current-list","select-type","onShowChildren"])])),_:1},8,["modelValue"]))])])),i.showSearchPanel?(vue.openBlock(),vue.createElementBlock("div",_hoisted_10$9,[i.filterItems&&i.filterItems.length<=0?(vue.openBlock(),vue.createElementBlock("div",_hoisted_11$9," 暂无相关数据！ ")):vue.createCommentVNode("",!0),o.multiple?(vue.openBlock(),vue.createBlock(c,{key:2,modelValue:i.selectedItems,"onUpdate:modelValue":t[5]||(t[5]=e=>i.selectedItems=e)},{default:vue.withCtx((()=>[vue.createVNode(d,{multiple:o.multiple,"current-list":i.filterItems,"select-type":o.selectType,onShowChildren:l.showChildren,"show-detail":""},null,8,["multiple","current-list","select-type","onShowChildren"])])),_:1},8,["modelValue"])):(vue.openBlock(),vue.createBlock(u,{key:1,modelValue:i.selectedItem,"onUpdate:modelValue":t[4]||(t[4]=e=>i.selectedItem=e)},{default:vue.withCtx((()=>[vue.createVNode(d,{multiple:o.multiple,"current-list":i.filterItems,"select-type":o.selectType,onShowChildren:l.showChildren,"show-detail":""},null,8,["multiple","current-list","select-type","onShowChildren"])])),_:1},8,["modelValue"]))])):vue.createCommentVNode("",!0)]),vue.createElementVNode("div",_hoisted_12$7,[vue.createVNode(h,{gutter:"20"},{default:vue.withCtx((()=>[vue.createVNode(m,{span:"12"},{default:vue.withCtx((()=>[vue.createVNode(p,{round:"",block:"",onClick:l.close},{default:vue.withCtx((()=>[vue.createTextVNode("取消")])),_:1},8,["onClick"])])),_:1}),vue.createVNode(m,{span:"12"},{default:vue.withCtx((()=>[vue.createVNode(p,{type:"primary",round:"",block:"",onClick:l.submit},{default:vue.withCtx((()=>[vue.createTextVNode("确定")])),_:1},8,["onClick"])])),_:1})])),_:1})])])])),_:1},8,["show"])}var MobileOrgSelectorDialog=_export_sfc(_sfc_main$V,[["render",_sfc_render$T]]);const _sfc_main$U={name:"OrgSelector",components:{TagInput:TagInput,OrgSelectorDialog:OrgSelectorDialog,MobileOrgSelectorDialog:MobileOrgSelectorDialog},props:{modelValue:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},printRead:{type:Boolean,default:!1},tip:{type:String,default:""},placeholder:{type:String,default:""},selectType:{type:String,default:""},ui:{type:String,default:"element"},platform:{type:String,default:"pc"}},emits:["update:modelValue"],data(){return{orgList:this.modelValue.map((e=>({...e,id:e.id?e.id:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())}))),selectorId:"orgselector_"+(new Date).getTime()}},computed:{},methods:{handleSubmit(e){this.orgList=e,"mobile"===this.platform?this.$refs.selectorDialogMobileRef.close():this.$refs.selectorDialogRef.close();try{document.getElementById(this.selectorId).closest(".el-form-item").classList.remove("is-error")}catch(t){}this.$emit("update:modelValue",this.genOrgData())},genOrgData(){return this.orgList.map((e=>e))},doRemove(e){let t=this.orgList.findIndex((t=>t.id===e.id));t>=0&&this.orgList.splice(t,1),this.$emit("update:modelValue",this.genOrgData())},doRemoveAll(){this.disabled||(this.orgList=[],this.$emit("update:modelValue",[]))},openSelectorDialog(e){if(e.target.closest(".clear-btn"))return;if(this.disabled||this.printRead)return;const t=_.cloneDeep(this.orgList);"mobile"!==this.platform?this.$refs.selectorDialogRef.open(t):this.$refs.selectorDialogMobileRef.open(t)}},watch:{modelValue(e){this.orgList=this.modelValue.map((e=>({...e,id:e.id?e.id:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())})))}}},_hoisted_1$A=["id"];function _sfc_render$S(e,t,o,n,i,l){const a=vue.resolveComponent("tag-input"),r=vue.resolveComponent("org-selector-dialog"),s=vue.resolveComponent("mobile-org-selector-dialog");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["selector-items",{"is-disabled":o.disabled}]),id:i.selectorId},[vue.createVNode(a,{onClick:l.openSelectorDialog,placeholder:o.placeholder,"model-value":i.orgList,printRead:o.printRead,disabled:o.disabled,"data-type":"org",onOnRemoveAll:l.doRemoveAll,onOnRemove:l.doRemove},null,8,["onClick","placeholder","model-value","printRead","disabled","onOnRemoveAll","onOnRemove"]),vue.createVNode(r,{multiple:o.multiple,"select-type":o.selectType,onDialogConfirm:l.handleSubmit,ref:"selectorDialogRef",width:"800px",form:"",title:"组织选择"},null,8,["multiple","select-type","onDialogConfirm"]),vue.createVNode(s,{multiple:o.multiple,"select-type":o.selectType,onDialogConfirm:l.handleSubmit,ref:"selectorDialogMobileRef",title:"组织选择"},null,8,["multiple","select-type","onDialogConfirm"])],10,_hoisted_1$A)}var OrgSelector=_export_sfc(_sfc_main$U,[["render",_sfc_render$S]]),ProcessSelectorDialog_vue_vue_type_style_index_0_lang="";const _sfc_main$T={components:{CusDialog:CusDialog,TagInput:TagInput,OfficeBuilding:office_building_default,Share:share_default,Male:male_default,Female:female_default},props:{multiple:{type:Boolean,default:!1},title:{type:String,default:""},width:{type:String,default:"800px"}},data:()=>({searchInfo:{},treeLoading:!1,tableLoading:!1,filterText:"",pager:{pageSize:15,pageNum:1,total:0,sizes:[15,30,50,100]},selectedList:[],listData:[],loading:!1,dialogVisible:!1,id:"dialog_"+(new Date).getTime(),showForm:!1,apps:[]}),methods:{open(e){this.dialogVisible=!0,this.selectedList=e,this.filterText="",this.getListData({})},intSelector(){this.getListData({})},searchDataHandle(){this.pager.pageSize=15,this.pager.pageNum=1,this.pager.total=0,this.getListData(this.searchInfo)},getRowKeys:e=>e.id,getListData(e){this.tableLoading=!0;const t={keyword:e.keyword};e.dateRange&&(t.startDate=e.dateRange[0],t.endDate=e.dateRange[1]),ajaxListProcess({pager:this.pager,searchInfo:{...e,...t}}).then((e=>{this.tableLoading=!1,this.$nextTick((()=>{const{rows:t,total:o}=e;this.pager.total=o,this.listData=t;let n=this.$refs.multipleTable;this.$nextTick((()=>{this.selectedList&&this.listData.forEach((e=>{this.selectedList.findIndex((t=>t.id===e.id))>-1&&n.toggleRowSelection(e,!0)}))}))}))})).finally((()=>{this.tableLoading=!1}))},doRemove(e){let t=this.$refs.multipleTable,o=this.selectedList.findIndex((t=>t&&t.id===e.id));o>=0&&this.selectedList.splice(o,1);const n=this.listData.find((t=>t.id===e.id));t.toggleRowSelection(n,!1)},doRemoveAll(e){let t=this.$refs.multipleTable;this.selectedList.forEach((e=>{const o=this.listData.find((t=>t.id===e.id));t.toggleRowSelection(o,!1)})),this.selectedList=[]},rowClick(e,t,o){let n=this.$refs.multipleTable;this.selectedList.find((t=>t.id==e.id))?n.toggleRowSelection(e,!1):n.toggleRowSelection(e,!0)},rowClickHandle(e,t){let o=this.$refs.multipleTable;const n=this.selectedList.some((t=>t.id===e.id));if(this.multiple||o.clearSelection(),o.setCurrentRow(),n){o.toggleRowSelection(e,!1);let t=this.selectedList.findIndex((t=>t.id===e.id));t>=0&&this.selectedList.splice(t,1)}else o.toggleRowSelection(e,!0),this.appendSelectVal(e)},close(){this.dialogVisible=!1},submit(){this.$emit("dialog-confirm",this.selectedList)},end(){this.loading=!1},handleSizeChange(e){this.pager.pageSize=e;const t=this.genQueryParam();this.getListData(t)},handleCurrentChange(e){this.pager.pageNum=e;const t=this.genQueryParam();this.getListData(t)},genQueryParam:()=>({}),isChecked(e){return this.selectedList.filter((t=>t.id===e.id)).length>0},handleSelectionChange(e){this.selectedList=e},appendSelectVal(e){if(!e||!e.id)return;if(!(this.multiple||this.selectedList&&0!==this.selectedList.length&&this.selectedList[0].id===e.id))return void(this.selectedList=[e]);this.selectedList.find((t=>t.id===e.id))||this.selectedList.push(e)},handleSelectAllChange(e){this.listData.forEach((t=>{this.selectionChangeHandle(e||[],t)}))},selectionChangeHandle(e,t){let o=this.$refs.multipleTable;if(this.multiple)if(e.length>0){if(e.some((e=>e&&e.id===t.id)))this.appendSelectVal(t);else{let e=this.selectedList.findIndex((e=>e&&e.id===t.id));e>=0&&this.selectedList.splice(e,1)}}else{let e=this.selectedList.findIndex((e=>e&&e.id===t.id));e>=0&&this.selectedList.splice(e,1)}else if(o.clearSelection(),e.length>0){if(e.some((e=>e&&e.id===t.id)))o.toggleRowSelection(t,!0),this.appendSelectVal(t);else{o.toggleRowSelection(t,!1);let e=this.selectedList.findIndex((e=>e&&e.id===t.id));e>=0&&this.selectedList.splice(e,1)}}else{o.toggleRowSelection(t,!1);let e=this.selectedList.findIndex((e=>e&&e.id===t.id));e>=0&&this.selectedList.splice(e,1)}},handleNodeClick(e){this.pager.pageNum=1,this.getListData({})}},mounted(){},watch:{filterText(e){this.$refs.tree.filter(e)}}},_hoisted_1$z=["innerHTML"],_hoisted_2$v=["element-loading-text"];function _sfc_render$R(e,t,o,n,i,l){const a=vue.resolveComponent("tag-input"),r=vue.resolveComponent("el-header"),s=vue.resolveComponent("el-date-picker"),d=vue.resolveComponent("el-form-item"),u=vue.resolveComponent("el-input"),c=vue.resolveComponent("el-button"),p=vue.resolveComponent("el-form"),m=vue.resolveComponent("el-card"),h=vue.resolveComponent("el-table-column"),f=vue.resolveComponent("el-table"),v=vue.resolveComponent("el-pagination"),g=vue.resolveComponent("el-main"),y=vue.resolveComponent("el-container"),b=vue.resolveComponent("cus-dialog"),w=vue.resolveDirective("loading");return vue.openBlock(),vue.createBlock(b,{visible:i.dialogVisible,onOnClose:l.close,ref:"templateDialog",width:o.width,form:"",title:o.title,onOnSubmit:l.submit,"custom-class":"selector-dialog-container"},{default:vue.withCtx((()=>[vue.createVNode(y,null,{default:vue.withCtx((()=>[vue.createVNode(r,{style:{padding:"0",height:"auto"}},{default:vue.withCtx((()=>[vue.createVNode(a,{ref:"tagInputRef",placeholder:"请选择","model-value":i.selectedList,onOnRemove:l.doRemove,onOnRemoveAll:l.doRemoveAll,"data-type":"process","show-search":"hidden",scrollMaxHeight:"73"},null,8,["model-value","onOnRemove","onOnRemoveAll"])])),_:1}),vue.createVNode(y,null,{default:vue.withCtx((()=>[vue.createVNode(g,{style:{padding:"0"}},{default:vue.withCtx((()=>[vue.createVNode(m,{style:{margin:"10px auto"},shadow:"never","body-style":"padding:0;height: 40px;overflow-y:hidden;margin: 10px 10px 5px;"},{default:vue.withCtx((()=>[vue.createVNode(p,{inline:!0,model:i.searchInfo,onSubmit:t[2]||(t[2]=vue.withModifiers((()=>{}),["prevent"])),class:"search-form-inline",size:"default"},{default:vue.withCtx((()=>[vue.createVNode(d,{label:"提交时间"},{default:vue.withCtx((()=>[vue.createVNode(s,{modelValue:i.searchInfo.dateRange,"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchInfo.dateRange=e),type:"daterange","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间",style:{width:"220px"}},null,8,["modelValue"])])),_:1}),vue.createVNode(d,null,{default:vue.withCtx((()=>[vue.createVNode(u,{modelValue:i.searchInfo.keyword,"onUpdate:modelValue":t[1]||(t[1]=e=>i.searchInfo.keyword=e),placeholder:"关键字",style:{width:"280px"},clearable:""},null,8,["modelValue"])])),_:1}),vue.createVNode(d,null,{default:vue.withCtx((()=>[vue.createVNode(c,{type:"primary","native-type":"submit",onClick:l.searchDataHandle},{default:vue.withCtx((()=>[vue.createTextVNode("查询")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1}),vue.createVNode(m,{shadow:"never","body-style":"padding:0;height: 340px;overflow-y:hidden;"},{default:vue.withCtx((()=>[vue.withDirectives((vue.openBlock(),vue.createBlock(f,{ref:"multipleTable",data:i.listData,size:"default",height:"300",onRowClick:l.rowClickHandle,stripe:"","row-key":"id","highlight-current-row":!0,onSelect:l.selectionChangeHandle,onSelectAll:l.handleSelectAllChange},{default:vue.withCtx((()=>[vue.createVNode(h,{type:"selection",property:"operate",align:"center",width:"60"}),vue.createVNode(h,{property:"name",label:"名称"},{default:vue.withCtx((e=>[vue.createElementVNode("span",{innerHTML:e.row.name},null,8,_hoisted_1$z)])),_:1}),vue.createVNode(h,{property:"submiterName",label:"发起人",width:"100"}),vue.createVNode(h,{property:"startTime",label:"提交时间",width:"155"}),vue.createVNode(h,{property:"appName",label:"所属系统",width:"100"})])),_:1},8,["data","onRowClick","onSelect","onSelectAll"])),[[w,i.tableLoading]]),vue.createVNode(v,{small:"",background:"",onSizeChange:l.handleSizeChange,onCurrentChange:l.handleCurrentChange,style:{"text-align":"center","margin-top":"4px"},"current-page":i.pager.pageNum,"page-size":i.pager.pageSize,"page-sizes":i.pager.sizes,total:i.pager.total,layout:"sizes, total, prev, pager, next"},null,8,["onSizeChange","onCurrentChange","current-page","page-size","page-sizes","total"])])),_:1})])),_:1})])),_:1})])),_:1}),e.action?vue.withDirectives((vue.openBlock(),vue.createElementBlock("span",{key:0,slot:"footer",class:"dialog-footer","element-loading-text":e.loadingText},[vue.createVNode(c,{onClick:l.close},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.cancel")),1)])),_:1},8,["onClick"]),vue.createVNode(c,{type:"primary",onClick:l.submit},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.confirm")),1)])),_:1},8,["onClick"])],8,_hoisted_2$v)),[[w,i.loading]]):vue.createCommentVNode("",!0)])),_:1},8,["visible","onOnClose","width","title","onOnSubmit"])}var ProcessSelectorDialog=_export_sfc(_sfc_main$T,[["render",_sfc_render$R]]),MobileProcessItem_vue_vue_type_style_index_0_lan_sass_scoped_true_lang="";const _sfc_main$S={components:{VanRadio:Radio,VanIcon:Icon,VanCheckbox:Checkbox,VanImage:Image},data:()=>({}),props:{item:{type:Object,default:()=>{}},showDetail:{type:Boolean,default:!1}}},_hoisted_1$y={style:{display:"flex"}},_hoisted_2$u={class:"org-img-box"},_hoisted_3$n={class:"van-image van-image--round org-img"},_hoisted_4$m={class:"org-info"},_hoisted_5$m={class:"dept"},_hoisted_6$k={class:"org-detail"};function _sfc_render$Q(e,t,o,n,i,l){const a=vue.resolveComponent("van-icon");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1$y,[vue.createElementVNode("div",_hoisted_2$u,[vue.createElementVNode("div",_hoisted_3$n,[vue.createVNode(a,{style:{margin:"auto"},name:"cluster",color:"white"})])]),vue.createElementVNode("div",_hoisted_4$m,[vue.createElementVNode("div",null,[vue.createElementVNode("span",_hoisted_5$m,vue.toDisplayString(o.item.name),1),vue.createElementVNode("div",null,[vue.createElementVNode("span",_hoisted_6$k,vue.toDisplayString(o.item.submiterName)+" "+vue.toDisplayString(o.item.startTime),1)])])])])}var MobileProcessItem=_export_sfc(_sfc_main$S,[["render",_sfc_render$Q],["__scopeId","data-v-74329a24"]]);const _sfc_main$R={components:{MobileProcessItem:MobileProcessItem,VanCell:Cell,VanCheckbox:Checkbox,VanRadio:Radio},methods:{showChildren(e){this.$emit("show-children",e)}},props:{currentList:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1}}};function _sfc_render$P(e,t,o,n,i,l){const a=vue.resolveComponent("mobile-process-item"),r=vue.resolveComponent("van-checkbox"),s=vue.resolveComponent("van-radio"),d=vue.resolveComponent("van-cell"),u=vue.resolveComponent("van-cell-group");return vue.openBlock(),vue.createElementBlock("div",null,[vue.createVNode(u,null,{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.currentList,(e=>(vue.openBlock(),vue.createBlock(d,{key:e.id},{title:vue.withCtx((()=>[o.multiple?(vue.openBlock(),vue.createBlock(r,{key:0,name:e.id,shape:"square"},{default:vue.withCtx((()=>[vue.createVNode(a,{item:e},null,8,["item"])])),_:2},1032,["name"])):(vue.openBlock(),vue.createBlock(s,{key:1,name:e.id},{default:vue.withCtx((()=>[vue.createVNode(a,{item:e},null,8,["item"])])),_:2},1032,["name"]))])),_:2},1024)))),128))])),_:1})])}var MobileProcessList=_export_sfc(_sfc_main$R,[["render",_sfc_render$P]]),MobileProcessSelectorDialog_vue_vue_type_style_index_0_lang="",MobileProcessSelectorDialog_vue_vue_type_style_index_1_lang="";const _sfc_main$Q={components:{TagInput:TagInput,VanPopup:Popup,VanButton:Button,VanTag:Tag,VanList:List,VanCell:Cell,VanRow:Row,VanCol:Col,VanRadio:Radio,VanCellGroup:CellGroup,VanRadioGroup:RadioGroup,VanIcon:Icon,VanCheckbox:Checkbox,VanCheckboxGroup:CheckboxGroup,VanSearch:Search,VanPullRefresh:PullRefresh,MobileEmpList:MobileEmpList,MobileProcessList:MobileProcessList,VanLoading:Loading},props:{value:{type:Array,default:()=>[]},visible:Boolean,multiple:{type:Boolean,default:!1},loadingText:{type:String,default:""},selectType:{type:String,default:""},title:{type:String,default:""},action:{type:Boolean,default:!0},fullscreen:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},data(){return{error:!1,noData:!1,isLoading:!1,loading:!1,finished:!1,searchLoading:!1,searchFinished:!1,searchIsLoading:!1,searchNoData:!1,searchError:!1,selectedList:this.value.map((e=>({...e,id:e.id?e.id:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())}))),treeRoot:[],selectedItem:"",selectedItems:[],treeLoading:!1,showSearchPanel:!1,selectedPath:[],filterText:"",filterItems:[],orgAllData:[],currentList:[],currentDataList:[],currentSearchDataList:[],currentDeptId:"",orgTreeProps:{label:"text",children:"children"},dialogVisible:this.visible,id:"dialog_"+(new Date).getTime(),showForm:!1,pager:{pageSize:15,pageNum:1,total:0},searchPager:{pageSize:15,pageNum:1,total:0}}},methods:{open(e){this.intSelector(),this.dialogVisible=!0;const t=e.map((e=>e.id));this.multiple?this.selectedItems=t:this.selectedItem=t[0]},onSearch(e){this.getEmpData({},!1)},onLoad(){this.getInfo()},onSearchLoad(){this.getSearchInfo(),this.searchLoading=!0},onCancel(){this.showSearchPanel=!1,this.filterText=""},debounce(e,t){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{e()}),t)},doFilter(e){this.showSearchPanel=!0,e?(this.searchPager.pageNum=1,this.debounce(this.getSearchInfo,1e3)):this.currentSearchDataList=[]},intSelector(){this.currentDataList=[],this.pager.pageNum=1,this.pager.total=0,this.pager.pageSize=15,this.getInfo()},doRemove(e){this.multiple?this.selectedItems=this.selectedItems.filter((t=>t!==e.id)):this.selectedItem=""},doRemoveAll(){this.multiple?(this.selectedList=[],this.selectedItems=[]):this.selectedItem=""},getSearchInfo(){this.searchLoading=!0;const e={keyword:this.filterText};ajaxListProcess({pager:{pageSize:this.searchPager.pageSize,pageNum:this.searchPager.pageNum},searchInfo:{...e}}).then((e=>{const{rows:t,total:o}=e;this.searchLoading=!1,this.currentSearchDataList=this.currentSearchDataList.concat(t),this.searchPager.pageNum++,this.searchPager.total=o,0===this.currentSearchDataList.length&&1===this.searchPager.pageNum&&(this.searchNoData=!0),this.currentSearchDataList.length===this.searchPager.total&&(this.searchFinished=!0)})).finally((()=>{this.searchLoading=!1}))},filterNode:(e,t)=>!e||-1!==t.text.indexOf(e),deleteItem(e){let t=this.selectedList.findIndex((t=>t.id===e.id));this.multiple?t>=0&&this.selectedItems.splice(this.selectedItems.indexOf(e.id),1):t>=0&&(this.selectedList.splice(t,1),this.selectedItem="")},getInfo(){this.loading=!0;let e=(this.pager.total+this.pager.pageSize-1)/this.pager.pageSize;if(e=parseInt(e),this.pager.pageNum-1>e)return this.finished=!0,void(this.loading=!1);ajaxListProcess({pager:{pageSize:this.pager.pageSize||15,pageNum:this.pager.pageNum-1},searchInfo:{recursion:0,deptId:this.currentDeptId}}).then((e=>{let t=[];e.rows.forEach((e=>{-1===this.currentDataList.findIndex((t=>t.id===e.id))&&t.push(e)})),this.currentDataList=this.currentDataList.concat(t),this.pager.pageNum++,this.pager.total=e.total,0===this.currentDataList.length&&1===this.pager.pageNum&&(this.noData=!0),this.currentDataList.length===this.pager.total&&(this.finished=!0)})).catch((()=>{this.error=!0,this.loading=!1})).finally((()=>{this.loading=!1}))},getEmpData(e){},close(){this.dialogVisible=!1,this.currentDataList=[]},submit(){this.$emit("dialog-confirm",this.selectedList)},end(){this.loading=!1}},mounted(){},watch:{dialogVisible(e){e||this.$emit("on-close")},visible(e){e&&this.$nextTick((()=>{try{const e=document.querySelector(".widget-form-container").offsetWidth,t=document.querySelector(".el-main").offsetWidth;if(t&&t>400){const t=document.querySelector("body").offsetWidth;document.querySelectorAll(".van-sku-container").forEach((o=>{o.style.width=e+"px",o.style.left=t/2-e/2+"px"}))}}catch(e){}})),this.dialogVisible=e},selectType(e){this.selectType=e},filterText(e,t){e!==t&&(this.currentSearchDataList=[])},selectedItem(e){this.selectedItem=e,""===e?this.selectedList=[]:this.showSearchPanel?this.selectedList=this.currentSearchDataList.filter((t=>t.id===e)):this.currentDataList.length>0&&(this.selectedList=this.currentDataList.filter((t=>t.id===e)))},selectedItems(e,t){this.selectedItems=e;const o=e.filter((e=>!t.includes(e)));if(this.showSearchPanel)if(e.length>t.length){const e=this.currentSearchDataList.filter((e=>e.id===o[0]));this.selectedList.push(e[0])}else{const e=this.currentSearchDataList.findIndex((e=>e.id===o[0]));this.selectedList.splice(e,1)}else if(e.length>t.length){if(this.currentDataList.length>0){const e=this.currentDataList.filter((e=>e.id===o[0]));if(e)-1==this.selectedList.findIndex((e=>e.id===o[0]))&&this.selectedList.push(e[0])}}else if(this.selectedList.length>e.length){const t=this.selectedList.map((e=>o&&e.id)).filter((t=>!e.includes(t))),n=this.selectedList.findIndex((e=>e.id===t[0]));this.selectedList.splice(n,1)}},value(e){this.selectedList=this.value.map((e=>({...e,id:e.id?e.id:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())}))),this.multiple?this.selectedItems=this.multiple?this.value.map((e=>e.id)):[]:this.selectedItem=!this.multiple&&this.value?this.value.map((e=>e.id))[0]:""}}},_hoisted_1$x={class:"van-selector-container"},_hoisted_2$t={class:"van-selector-header"},_hoisted_3$m={style:{width:"100%"}},_hoisted_4$l={style:{width:"100%"}},_hoisted_5$l={action:"/"},_hoisted_6$j={class:"van-selector-body"},_hoisted_7$i={key:0,class:"van-sku-messages"},_hoisted_8$b={key:2,class:"no-data"},_hoisted_9$a={key:1,class:"van-sku-messages"},_hoisted_10$8={key:0,style:{"text-align":"center","line-height":"30px"}},_hoisted_11$8={class:"van-selector-actions"};function _sfc_render$O(e,t,o,n,i,l){const a=vue.resolveComponent("van-search"),r=vue.resolveComponent("tag-input"),s=vue.resolveComponent("van-loading"),d=vue.resolveComponent("mobile-process-list"),u=vue.resolveComponent("van-radio-group"),c=vue.resolveComponent("van-checkbox-group"),p=vue.resolveComponent("van-list"),m=vue.resolveComponent("van-button"),h=vue.resolveComponent("van-col"),f=vue.resolveComponent("van-row"),v=vue.resolveComponent("van-popup");return vue.openBlock(),vue.createBlock(v,{show:i.dialogVisible,"onUpdate:show":t[7]||(t[7]=e=>i.dialogVisible=e),"get-container":"body",position:"bottom",style:{height:"100%","max-height":"100%"}},{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_1$x,[vue.createElementVNode("div",_hoisted_2$t,[vue.createElementVNode("div",_hoisted_3$m,[vue.createElementVNode("div",_hoisted_4$l,[vue.createElementVNode("form",_hoisted_5$l,[vue.createVNode(a,{modelValue:i.filterText,"onUpdate:modelValue":t[0]||(t[0]=e=>i.filterText=e),"show-action":""!==i.filterText||i.showSearchPanel,placeholder:"请输入关键字",onSearch:l.onSearch,onCancel:l.onCancel,onInput:l.doFilter},null,8,["modelValue","show-action","onSearch","onCancel","onInput"])])]),vue.createVNode(r,{ref:"tagInputRef",placeholder:"请选择","model-value":i.selectedList,onOnRemove:l.doRemove,onOnRemoveAll:l.doRemoveAll,scrollMaxHeight:"73","data-type":"process"},null,8,["model-value","onOnRemove","onOnRemoveAll"])])]),vue.createElementVNode("div",_hoisted_6$j,[i.showSearchPanel?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("div",_hoisted_7$i,[vue.createElementVNode("div",null,[i.loading?(vue.openBlock(),vue.createBlock(s,{key:0,style:{"text-align":"center"}})):vue.createCommentVNode("",!0),i.currentDataList.length>0?(vue.openBlock(),vue.createBlock(p,{key:1,error:i.error,modelValue:i.loading,"onUpdate:modelValue":t[3]||(t[3]=e=>i.loading=e),finished:i.finished,"finished-text":"没有更多了",onLoad:l.onLoad,offset:10},{default:vue.withCtx((()=>[o.multiple?(vue.openBlock(),vue.createBlock(c,{key:1,modelValue:i.selectedItems,"onUpdate:modelValue":t[2]||(t[2]=e=>i.selectedItems=e)},{default:vue.withCtx((()=>[vue.createVNode(d,{"current-list":i.currentDataList,multiple:o.multiple},null,8,["current-list","multiple"])])),_:1},8,["modelValue"])):(vue.openBlock(),vue.createBlock(u,{key:0,modelValue:i.selectedItem,"onUpdate:modelValue":t[1]||(t[1]=e=>i.selectedItem=e)},{default:vue.withCtx((()=>[vue.createVNode(d,{"current-list":i.currentDataList,multiple:o.multiple},null,8,["current-list","multiple"])])),_:1},8,["modelValue"]))])),_:1},8,["error","modelValue","finished","onLoad"])):vue.createCommentVNode("",!0),i.loading||0!==i.currentDataList.length||""===i.currentDeptId?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("div",_hoisted_8$b," 暂无数据 "))])])),i.showSearchPanel?(vue.openBlock(),vue.createElementBlock("div",_hoisted_9$a,[i.currentSearchDataList&&i.currentSearchDataList.length<=0?(vue.openBlock(),vue.createElementBlock("div",_hoisted_10$8," 暂无相关数据！ ")):vue.createCommentVNode("",!0),i.currentSearchDataList.length>0?(vue.openBlock(),vue.createBlock(p,{key:1,error:i.error,modelValue:i.searchLoading,"onUpdate:modelValue":t[6]||(t[6]=e=>i.searchLoading=e),finished:i.searchFinished,"finished-text":"没有更多了",onLoad:l.onSearchLoad,offset:10},{default:vue.withCtx((()=>[o.multiple?(vue.openBlock(),vue.createBlock(c,{key:1,modelValue:i.selectedItems,"onUpdate:modelValue":t[5]||(t[5]=e=>i.selectedItems=e)},{default:vue.withCtx((()=>[vue.createVNode(d,{"current-list":i.currentSearchDataList,multiple:o.multiple},null,8,["current-list","multiple"])])),_:1},8,["modelValue"])):(vue.openBlock(),vue.createBlock(u,{key:0,modelValue:i.selectedItem,"onUpdate:modelValue":t[4]||(t[4]=e=>i.selectedItem=e)},{default:vue.withCtx((()=>[vue.createVNode(d,{"current-list":i.currentSearchDataList,multiple:o.multiple},null,8,["current-list","multiple"])])),_:1},8,["modelValue"]))])),_:1},8,["error","modelValue","finished","onLoad"])):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0)]),vue.createElementVNode("div",_hoisted_11$8,[vue.createVNode(f,{gutter:"20"},{default:vue.withCtx((()=>[vue.createVNode(h,{span:"12"},{default:vue.withCtx((()=>[vue.createVNode(m,{round:"",block:"",onClick:l.close},{default:vue.withCtx((()=>[vue.createTextVNode("取消")])),_:1},8,["onClick"])])),_:1}),vue.createVNode(h,{span:"12"},{default:vue.withCtx((()=>[vue.createVNode(m,{type:"primary",round:"",block:"",onClick:l.submit},{default:vue.withCtx((()=>[vue.createTextVNode("确定")])),_:1},8,["onClick"])])),_:1})])),_:1})])])])),_:1},8,["show"])}var MobileProcessSelectorDialog=_export_sfc(_sfc_main$Q,[["render",_sfc_render$O]]);const _sfc_main$P={components:{MobileEmpSelectorDialog:MobileEmpSelectorDialog,TagInput:TagInput,ProcessSelectorDialog:ProcessSelectorDialog,MobileProcessSelectorDialog:MobileProcessSelectorDialog},props:{modelValue:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},printRead:{type:Boolean,default:!1},tip:{type:String,default:""},placeholder:{type:String,default:""},ui:{type:String,default:"element"},platform:{type:String,default:"pc"}},emits:["update:modelValue"],data:()=>({selectorDialogVisible:!1,selectedList:[],showSelectedList:[],viewer:null,selectorId:"processselector_"+(new Date).getTime()}),computed:{miniWidth(){return this.width>this.height?this.height:this.width}},methods:{handleSubmit(e){this.processList=e,"mobile"===this.platform?this.$refs.selectorDialogMobileRef.close():this.$refs.selectorDialogRef.close();try{document.getElementById(this.selectorId).closest(".el-form-item").classList.remove("is-error")}catch(t){}this.$emit("update:modelValue",this.genProcessData()),this.selectedList=e,this.selectorDialogVisible=!1,this.$emit("input",this.selectedList)},genProcessData(){return this.processList.map((e=>({id:e.id,name:e.name,appName:e.appName,appSn:e.appSn,submiterName:e.submiterName,startTime:e.startTime,submitterCode:e.submitterCode,procInstId:e.processInstanceId,modelKey:e.modelKey,businessKey:e.businessKey})))},doRemove(e){let t=this.processList.findIndex((t=>t.id===e.id));t>=0&&this.processList.splice(t,1),this.$emit("update:modelValue",this.genProcessData())},doRemoveAll(){this.disabled||(this.processList=[],this.$emit("update:modelValue",[]))},openSelectorDialog(e){if(e.target.closest(".clear-btn"))return;if(this.disabled||this.printRead)return;const t=_.cloneDeep(this.selectedList);"mobile"!==this.platform?this.$refs.selectorDialogRef.open(t):this.$refs.selectorDialogMobileRef.open(t)}},watch:{modelValue(e){this.selectedList=this.modelValue.map((e=>({...e,id:e.id?e.id:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())})))}}},_hoisted_1$w=["id"];function _sfc_render$N(e,t,o,n,i,l){const a=vue.resolveComponent("tag-input"),r=vue.resolveComponent("process-selector-dialog"),s=vue.resolveComponent("mobile-process-selector-dialog");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["selector-items",{"is-disabled":o.disabled}]),id:i.selectorId},[vue.createVNode(a,{onClick:l.openSelectorDialog,placeholder:o.placeholder,"model-value":i.selectedList,"print-read":o.printRead,disabled:o.disabled,"data-type":"process",onOnRemoveAll:l.doRemoveAll,onOnRemove:l.doRemove},null,8,["onClick","placeholder","model-value","print-read","disabled","onOnRemoveAll","onOnRemove"]),vue.createVNode(r,{multiple:o.multiple,onDialogConfirm:l.handleSubmit,ref:"selectorDialogRef",width:"800px",form:"",title:"关联流程"},null,8,["multiple","onDialogConfirm"]),vue.createVNode(s,{multiple:o.multiple,onDialogConfirm:l.handleSubmit,ref:"selectorDialogMobileRef",form:"",title:"关联流程"},null,8,["multiple","onDialogConfirm"])],10,_hoisted_1$w)}var ProcessSelector=_export_sfc(_sfc_main$P,[["render",_sfc_render$N]]),index_vue_vue_type_style_index_0_lang$3="";const _sfc_main$O={name:"KindEditor",data(){const e=window.FormMaking_OPTIONS.kindEditorUrl||"/lib/kindeditor";return{editor:null,outContent:this.content,basePath:e,themesPath:e+"/themes/default/",pluginsPath:e+"/plugins/"}},emits:["update:modelValue"],props:{content:{type:String,default:""},id:{type:String,required:!0},width:{type:String,default:"100%"},height:{type:String},minWidth:{type:Number,default:650},minHeight:{type:Number,default:100},toolbar:{type:Array},items:{type:Array,default:function(){return["source","|","undo","redo","|","preview","print","cut","copy","paste","plainpaste","wordpaste","|","justifyleft","justifycenter","justifyright","justifyfull","insertorderedlist","insertunorderedlist","indent","outdent","subscript","superscript","clearhtml","quickformat","selectall","|","fullscreen","formatblock","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","strikethrough","lineheight","removeformat","|","image","insertfile","table","hr","pagebreak","anchor","link","unlink"]}},noDisableItems:{type:Array,default:function(){return["source","fullscreen"]}},filterMode:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},htmlTags:{type:Object,default:function(){return{font:["color","size","face",".background-color"],span:["style"],div:["class","align","style"],table:["class","border","cellspacing","cellpadding","width","height","align","style"],"td,th":["class","align","valign","width","height","colspan","rowspan","bgcolor","style"],a:["class","href","target","name","style"],embed:["src","width","height","type","loop","autostart","quality","style","align","allowscriptaccess","/"],img:["src","width","height","border","alt","title","align","style","/"],hr:["class","/"],br:["/"],"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":["align","style"],"tbody,tr,strong,b,sub,sup,em,i,u,strike":[]}}},wellFormatMode:{type:Boolean,default:!0},resizeType:{type:Number,default:0},themeType:{type:String,default:"default"},langType:{type:String,default:"zh-CN"},designMode:{type:Boolean,default:!0},fullscreenMode:{type:Boolean,default:!1},langPath:{type:String},minChangeSize:{type:Number,default:5},loadStyleMode:{type:Boolean,default:!0},urlType:{type:String,default:""},newlineTag:{type:String,default:"br"},pasteType:{type:Number,default:2},dialogAlignType:{type:String,default:"page"},shadowMode:{type:Boolean,default:!0},zIndex:{type:Number,default:811213},useContextmenu:{type:Boolean,default:!0},syncType:{type:String,default:"form"},indentChar:{type:String,default:"\t"},cssPath:{type:[String,Array],default:""},cssData:{type:String,default:"body, td {font: inherit;font-size: inherit;}body.ke-content{font-size: 14px;}"},bodyClass:{type:String,default:"ke-content"},placeholder:{type:String,default:""},colorTable:{type:Array},afterCreate:{type:Function},afterChange:{type:Function},afterTab:{type:Function,default:function(){this.insertHtml("　　")}},afterFocus:{type:Function},afterBlur:{type:Function},afterUpload:{type:Function},uploadJson:{type:String},fileManagerJson:{type:Function},allowPreviewEmoticons:{type:Boolean,default:!0},allowImageUpload:{type:Boolean,default:!0},allowFlashUpload:{type:Boolean,default:!0},allowMediaUpload:{type:Boolean,default:!0},allowFileUpload:{type:Boolean,default:!0},allowFileManager:{type:Boolean,default:!1},fontSizeTable:{type:Array,default:function(){return["14px","16px","18px","20px","24px","28px","32px"]}},imageTabIndex:{type:Number,default:0},formatUploadUrl:{type:Boolean,default:!0},fullscreenShortcut:{type:Boolean,default:!1},extraFileUploadParams:{type:Array,default:function(){return[]}},filePostName:{type:String,default:"imgFile"},fillDescAfterUploadImage:{type:Boolean,default:!1},afterSelectFile:{type:Function},pagebreakHtml:{type:String,default:'<hr style="page-break-after: always;" class="ke-pagebreak" />'},allowImageRemote:{type:Boolean,default:!0},autoHeightMode:{type:Boolean,default:!1},fixToolBar:{type:Boolean,default:!1},tabIndex:{type:Number}},watch:{content(e){this.editor&&e!==this.outContent&&this.editor.html(e)},readonly(e){this.editor&&this.editor.readonly(e)},disabled(e){this.editor&&this.editor.readonly(e)},outContent(e){this.$emit("update:modelValue",e)},toolbar:{immediate:!0,handler(e,t){window.KindEditor&&this.initEditor()},deep:!0},width:{immediate:!0,handler(e,t){window.KindEditor&&this.initEditor()},deep:!0},height:{immediate:!0,handler(e,t){window.KindEditor&&this.initEditor()},deep:!0},bodyClass:{immediate:!0,handler(e,t){window.KindEditor&&this.initEditor()},deep:!0},autoHeightMode:{immediate:!0,handler(e,t){window.KindEditor&&this.initEditor()},deep:!0}},methods:{loadEditor(e){window.KindEditor?e():(loadCss(`${this.basePath}/themes/default/default.css`),loadJs(`${this.basePath}/kindeditor-all-min.js`).then((()=>{loadJs(`${this.basePath}/lang/zh-CN.js`).then((()=>{e()}))})))},initEditor(){var e=this;const t=editorUploadAction,o=e.toolbar;let n=[];o.forEach((e=>{e&&e.length>0&&(n=[...n,...e],n.push("|"))})),this.loadEditor((()=>{window.KindEditor.remove("#"+this.id),e.editor=window.KindEditor.create("#"+this.id,{width:e.width,height:e.height,minWidth:e.minWidth,minHeight:e.minHeight,items:n,noDisableItems:e.noDisableItems,filterMode:e.filterMode,htmlTags:e.htmlTags,wellFormatMode:e.wellFormatMode,resizeType:e.resizeType,themeType:e.themeType,langType:e.langType,designMode:e.designMode,fullscreenMode:e.fullscreenMode,basePath:e.basePath,themesPath:e.basePath+"themes/",pluginsPath:e.pluginsPath,langPath:e.langPath,minChangeSize:e.minChangeSize,loadStyleMode:e.loadStyleMode,urlType:e.urlType,newlineTag:e.newlineTag,pasteType:e.pasteType,dialogAlignType:e.dialogAlignType,shadowMode:e.shadowMode,zIndex:e.zIndex,useContextmenu:e.useContextmenu,syncType:e.syncType,indentChar:e.indentChar,cssPath:e.cssPath,cssData:e.cssData,bodyClass:e.bodyClass,colorTable:e.colorTable,afterCreate:e.afterCreate,afterChange:function(){e.outContent=this.html()},afterTab:e.afterTab,afterFocus:e.afterFocus,afterBlur:e.afterBlur,afterUpload:e.afterUpload,uploadJson:e.uploadJson||t,fileManagerJson:e.fileManagerJson,allowPreviewEmoticons:e.allowPreviewEmoticons,allowImageUpload:e.allowImageUpload,allowFlashUpload:e.allowFlashUpload,allowMediaUpload:e.allowMediaUpload,allowFileUpload:e.allowFileUpload,allowFileManager:e.allowFileManager,fontSizeTable:e.fontSizeTable,imageTabIndex:e.imageTabIndex,formatUploadUrl:e.formatUploadUrl,fullscreenShortcut:e.fullscreenShortcut,extraFileUploadParams:e.extraFileUploadParams,filePostName:e.filePostName,fillDescAfterUploadImage:e.fillDescAfterUploadImage,afterSelectFile:e.afterSelectFile,pagebreakHtml:e.pagebreakHtml,allowImageRemote:e.allowImageRemote,autoHeightMode:e.autoHeightMode,fixToolBar:e.fixToolBar,tabIndex:e.tabIndex}),setTimeout((()=>{e.editor.readonly(e.readonly||e.disabled)}),100)}))}},mounted(){this.initEditor()}},_hoisted_1$v={class:"kindeditor"},_hoisted_2$s=["id","placeholder"];function _sfc_render$M(e,t,o,n,i,l){return vue.openBlock(),vue.createElementBlock("div",_hoisted_1$v,[vue.withDirectives(vue.createElementVNode("textarea",{id:o.id,name:"content","onUpdate:modelValue":t[0]||(t[0]=e=>i.outContent=e),placeholder:o.placeholder},null,8,_hoisted_2$s),[[vue.vModelText,i.outContent]])])}var KindEditor=_export_sfc(_sfc_main$O,[["render",_sfc_render$M]]);const _sfc_main$N={components:{FmUpload:FmUpload,Editor:_sfc_main$1t,EmpSelector:EmpSelector,OrgSelector:OrgSelector,ProcessSelector:ProcessSelector,KindEditor:KindEditor},props:["element","isTable"],data:()=>({key:Math.random().toString(36).slice(-8),elementKey:Math.random().toString(36).slice(-8)}),created(){},watch:{"element.options.template":function(e){this.$options.components[`component-${this.element.key}`]={template:`${e}`,props:["modelValue"],data:()=>({dataModel:this.modelValue})},this.key=Math.random().toString(36).slice(-8)},"element.options.defaultValue":function(e){this.elementKey=Math.random().toString(36).slice(-8)}}};function _sfc_render$L(e,t,o,n,i,l){const a=vue.resolveComponent("EmpSelector"),r=vue.resolveComponent("OrgSelector"),s=vue.resolveComponent("ProcessSelector"),d=vue.resolveComponent("KindEditor");return"empselector"==o.element.type?(vue.openBlock(),vue.createBlock(a,{key:0,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[0]||(t[0]=e=>o.element.options.defaultValue=e),multiple:"",placeholder:o.element.options.placeholder,disabled:o.element.options.disabled,style:vue.normalizeStyle({width:o.isTable?"100%":o.element.options.width})},null,8,["modelValue","placeholder","disabled","style"])):"orgselector"==o.element.type?(vue.openBlock(),vue.createBlock(r,{key:1,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[1]||(t[1]=e=>o.element.options.defaultValue=e),multiple:"",placeholder:o.element.options.placeholder,disabled:o.element.options.disabled,style:vue.normalizeStyle({width:o.isTable?"100%":o.element.options.width}),"select-type":o.element.options.selectType},null,8,["modelValue","placeholder","disabled","style","select-type"])):"processselector"==o.element.type?(vue.openBlock(),vue.createBlock(s,{key:2,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[2]||(t[2]=e=>o.element.options.defaultValue=e),multiple:"",placeholder:o.element.options.placeholder,disabled:o.element.options.disabled,style:vue.normalizeStyle({width:o.isTable?"100%":o.element.options.width})},null,8,["modelValue","placeholder","disabled","style"])):"kindeditor"==o.element.type?(vue.openBlock(),vue.createBlock(d,{key:3,id:o.element.key,content:o.element.options.defaultValue,width:o.element.options.width,height:o.element.options.height,"css-data":o.element.options.cssData,loadStyleMode:!1,toolbar:o.element.options.customToolbar,style:{width:"100%"},modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[3]||(t[3]=e=>o.element.options.defaultValue=e)},null,8,["id","content","width","height","css-data","toolbar","modelValue"])):vue.createCommentVNode("",!0)}var WidgetElementItemExt=_export_sfc(_sfc_main$N,[["render",_sfc_render$L]]);const ErrorBoundary=vue.defineComponent({template:'\n    <div>\n      <slot v-if="!error"></slot>\n      <div v-else>发生错误: {{ error.message }}</div>\n    </div>\n  ',data:()=>({error:null}),errorCaptured(e){return this.error=e,!1}}),_sfc_main$M={components:{FmUpload:FmUpload,Editor:_sfc_main$1t,DataTable:FmDataTable$1,WidgetElementItemExt:WidgetElementItemExt},props:["element","isTable"],data:()=>({key:Math.random().toString(36).slice(-8),elementKey:Math.random().toString(36).slice(-8)}),computed:{elementDisabled(){return!!isExpression(this.element.options.disabled)||this.element.options.disabled},extendProps(){let e={};return this.element.options.extendProps&&Object.keys(this.element.options.extendProps).forEach((t=>{let o=this.element.options.extendProps[t];isExpression(o)?e[t]=executeExpression(extractExpression(o),this.currentOptions,this.formContext):e[t]=o})),e}},created(){"component"==this.element.type&&(this.$options.components[`component-${this.element.key}`]={template:`<ErrorBoundary>${this.element.options.template}</ErrorBoundary>`.replace(/formState(\.\w+)+/g,(e=>e.replace(/\./g,"?."))),props:["modelValue"],components:{ErrorBoundary:ErrorBoundary},data:()=>({dataModel:this.modelValue,formState:{}}),errorCaptured:e=>!1})},beforeUnmount(){this.$options.components[`component-${this.element.key}`]&&(this.$options.components[`component-${this.element.key}`]=null)},watch:{"element.options.template":function(e){this.$options.components[`component-${this.element.key}`]={template:`<ErrorBoundary>${e}</ErrorBoundary>`.replace(/formState(\.\w+)+/g,(e=>e.replace(/\./g,"?."))),props:["modelValue"],components:{ErrorBoundary:ErrorBoundary},data:()=>({dataModel:this.modelValue,formState:{}}),errorCaptured:e=>!1},this.key=Math.random().toString(36).slice(-8)},"element.options.defaultValue":function(e){this.elementKey=Math.random().toString(36).slice(-8)}}},_hoisted_1$u={key:16,style:{height:"50px",color:"#999","line-height":"50px","text-align":"center",width:"100%"}},_hoisted_2$r=["innerHTML"];function _sfc_render$K(e,t,o,n,i,l){const a=vue.resolveComponent("el-input"),r=vue.resolveComponent("el-input-number"),s=vue.resolveComponent("el-radio"),d=vue.resolveComponent("el-radio-group"),u=vue.resolveComponent("el-checkbox"),c=vue.resolveComponent("el-checkbox-group"),p=vue.resolveComponent("el-time-picker"),m=vue.resolveComponent("el-date-picker"),h=vue.resolveComponent("el-rate"),f=vue.resolveComponent("el-color-picker"),v=vue.resolveComponent("el-option"),g=vue.resolveComponent("el-select"),y=vue.resolveComponent("el-switch"),b=vue.resolveComponent("el-slider"),w=vue.resolveComponent("fm-upload"),k=vue.resolveComponent("el-cascader"),_=vue.resolveComponent("el-tree-select"),C=vue.resolveComponent("Editor"),x=vue.resolveComponent("el-button"),S=vue.resolveComponent("el-upload"),V=vue.resolveComponent("el-link"),N=vue.resolveComponent("el-step"),E=vue.resolveComponent("el-steps"),$=vue.resolveComponent("el-transfer"),D=vue.resolveComponent("el-pagination"),B=vue.resolveComponent("data-table"),T=vue.resolveComponent("WidgetElementItemExt");return vue.openBlock(),vue.createElementBlock(vue.Fragment,null,["input"==o.element.type?(vue.openBlock(),vue.createBlock(a,vue.mergeProps({key:0,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[0]||(t[0]=e=>o.element.options.defaultValue=e),style:{width:o.isTable?"100%":o.element.options.width},placeholder:o.element.options.placeholder,disabled:l.elementDisabled,"show-password":o.element.options.showPassword,maxlength:o.element.options.maxlength,"show-word-limit":o.element.options.showWordLimit},{...o.element.options.customProps,...l.extendProps}),null,16,["modelValue","style","placeholder","disabled","show-password","maxlength","show-word-limit"])):vue.createCommentVNode("",!0),"textarea"==o.element.type?(vue.openBlock(),vue.createBlock(a,vue.mergeProps({key:1,type:"textarea",rows:o.element.options.rows,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[1]||(t[1]=e=>o.element.options.defaultValue=e),style:{width:o.isTable?"100%":o.element.options.width},disabled:l.elementDisabled,placeholder:o.element.options.placeholder,maxlength:o.element.options.maxlength,"show-word-limit":o.element.options.showWordLimit,autosize:o.element.options.autosize},{...o.element.options.customProps,...l.extendProps}),null,16,["rows","modelValue","style","disabled","placeholder","maxlength","show-word-limit","autosize"])):vue.createCommentVNode("",!0),"number"==o.element.type?(vue.openBlock(),vue.createBlock(r,vue.mergeProps({key:2,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[2]||(t[2]=e=>o.element.options.defaultValue=e),disabled:l.elementDisabled,"controls-position":o.element.options.controlsPosition,precision:o.element.options.precision,controls:o.element.options.controls,style:{width:o.isTable?"100%":o.element.options.width}},{...o.element.options.customProps,...l.extendProps}),null,16,["modelValue","disabled","controls-position","precision","controls","style"])):vue.createCommentVNode("",!0),"radio"==o.element.type?(vue.openBlock(),vue.createBlock(d,vue.mergeProps({key:3,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[3]||(t[3]=e=>o.element.options.defaultValue=e),style:{width:o.isTable?"100%":o.element.options.width,display:"block"},disabled:l.elementDisabled},{...o.element.options.customProps,...l.extendProps}),{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.options.options,((e,t)=>(vue.openBlock(),vue.createBlock(s,{style:vue.normalizeStyle({display:o.element.options.inline?"inline-block":"block"}),label:e.value,value:e.value,key:e.value+t},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.element.options.showLabel?e.label:e.value),1)])),_:2},1032,["style","label","value"])))),128))])),_:1},16,["modelValue","style","disabled"])):vue.createCommentVNode("",!0),"checkbox"==o.element.type?(vue.openBlock(),vue.createBlock(c,vue.mergeProps({key:4,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[4]||(t[4]=e=>o.element.options.defaultValue=e),style:{width:o.isTable?"100%":o.element.options.width},disabled:l.elementDisabled},{...o.element.options.customProps,...l.extendProps}),{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.options.options,((e,t)=>(vue.openBlock(),vue.createBlock(u,{style:vue.normalizeStyle({display:o.element.options.inline?"inline-block":"block"}),label:e.value,value:e.value,key:e.value+t},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.element.options.showLabel?e.label:e.value),1)])),_:2},1032,["style","label","value"])))),128))])),_:1},16,["modelValue","style","disabled"])):vue.createCommentVNode("",!0),"time"==o.element.type?(vue.openBlock(),vue.createBlock(p,vue.mergeProps({key:i.elementKey,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[5]||(t[5]=e=>o.element.options.defaultValue=e),"is-range":o.element.options.isRange,placeholder:o.element.options.placeholder,"start-placeholder":o.element.options.startPlaceholder,"end-placeholder":o.element.options.endPlaceholder,readonly:o.element.options.readonly,disabled:l.elementDisabled,editable:o.element.options.editable,clearable:o.element.options.clearable,style:{width:o.isTable?"100%":o.element.options.width},"value-format":o.element.options.format},{...o.element.options.customProps,...l.extendProps}),null,16,["modelValue","is-range","placeholder","start-placeholder","end-placeholder","readonly","disabled","editable","clearable","style","value-format"])):vue.createCommentVNode("",!0),"date"==o.element.type?(vue.openBlock(),vue.createBlock(m,vue.mergeProps({key:i.elementKey,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[6]||(t[6]=e=>o.element.options.defaultValue=e),type:o.element.options.type,"is-range":o.element.options.isRange,placeholder:o.element.options.placeholder,"start-placeholder":o.element.options.startPlaceholder,"end-placeholder":o.element.options.endPlaceholder,readonly:o.element.options.readonly,disabled:l.elementDisabled,editable:o.element.options.editable,clearable:o.element.options.clearable,"value-format":o.element.options.timestamp?"x":o.element.options.format,format:o.element.options.format,style:{width:o.isTable?"100%":o.element.options.width}},{...o.element.options.customProps,...l.extendProps}),null,16,["modelValue","type","is-range","placeholder","start-placeholder","end-placeholder","readonly","disabled","editable","clearable","value-format","format","style"])):vue.createCommentVNode("",!0),"rate"==o.element.type?(vue.openBlock(),vue.createBlock(h,vue.mergeProps({key:7,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[7]||(t[7]=e=>o.element.options.defaultValue=e),max:o.element.options.max,disabled:l.elementDisabled,"allow-half":o.element.options.allowHalf,"show-score":o.element.options.showScore,style:{width:o.isTable?"100%":o.element.options.width,display:"inline-block"}},{...o.element.options.customProps,...l.extendProps}),null,16,["modelValue","max","disabled","allow-half","show-score","style"])):vue.createCommentVNode("",!0),"color"==o.element.type?(vue.openBlock(),vue.createBlock(f,vue.mergeProps({key:8,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[8]||(t[8]=e=>o.element.options.defaultValue=e),disabled:l.elementDisabled,"show-alpha":o.element.options.showAlpha},{...o.element.options.customProps,...l.extendProps}),null,16,["modelValue","disabled","show-alpha"])):vue.createCommentVNode("",!0),"select"==o.element.type?(vue.openBlock(),vue.createBlock(g,vue.mergeProps({key:9,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[9]||(t[9]=e=>o.element.options.defaultValue=e),disabled:l.elementDisabled,multiple:o.element.options.multiple,clearable:o.element.options.clearable,placeholder:o.element.options.placeholder,style:{width:o.isTable?"100%":o.element.options.width}},{...o.element.options.customProps,...l.extendProps}),{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.options.options,(e=>(vue.openBlock(),vue.createBlock(v,{key:e.value,value:e.value,label:o.element.options.showLabel?e.label:e.value},null,8,["value","label"])))),128))])),_:1},16,["modelValue","disabled","multiple","clearable","placeholder","style"])):vue.createCommentVNode("",!0),"switch"==o.element.type?(vue.openBlock(),vue.createBlock(y,vue.mergeProps({key:10,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[10]||(t[10]=e=>o.element.options.defaultValue=e),disabled:l.elementDisabled,style:{width:o.isTable?"100%":o.element.options.width}},{...o.element.options.customProps,...l.extendProps}),null,16,["modelValue","disabled","style"])):vue.createCommentVNode("",!0),"slider"==o.element.type?(vue.openBlock(),vue.createBlock(b,vue.mergeProps({key:11,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[11]||(t[11]=e=>o.element.options.defaultValue=e),min:o.element.options.min,max:o.element.options.max,disabled:l.elementDisabled,step:o.element.options.step,"show-input":o.element.options.showInput,range:o.element.options.range,style:{width:o.isTable?"100%":o.element.options.width}},{...o.element.options.customProps,...l.extendProps}),null,16,["modelValue","min","max","disabled","step","show-input","range","style"])):vue.createCommentVNode("",!0),"imgupload"==o.element.type?(vue.openBlock(),vue.createBlock(w,{key:12,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[12]||(t[12]=e=>o.element.options.defaultValue=e),disabled:l.elementDisabled,style:vue.normalizeStyle({width:o.isTable?"100%":o.element.options.width}),width:o.element.options.size.width,height:o.element.options.size.height,token:"xxx",domain:"xxx"},null,8,["modelValue","disabled","style","width","height"])):vue.createCommentVNode("",!0),"cascader"==o.element.type?(vue.openBlock(),vue.createBlock(k,vue.mergeProps({key:13,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[13]||(t[13]=e=>o.element.options.defaultValue=e),disabled:l.elementDisabled,clearable:o.element.options.clearable,placeholder:o.element.options.placeholder,style:{width:o.isTable?"100%":o.element.options.width},options:o.element.options.remote?[]:o.element.options.options,props:{multiple:o.element.options.multiple,checkStrictly:o.element.options.checkStrictly}},{...o.element.options.customProps,...l.extendProps}),null,16,["modelValue","disabled","clearable","placeholder","style","options","props"])):vue.createCommentVNode("",!0),"treeselect"==o.element.type?(vue.openBlock(),vue.createBlock(_,vue.mergeProps({key:o.element.options.defaultValue,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[14]||(t[14]=e=>o.element.options.defaultValue=e),disabled:l.elementDisabled,clearable:o.element.options.clearable,placeholder:o.element.options.placeholder,style:{width:o.isTable?"100%":o.element.options.width},data:o.element.options.remote?[]:o.element.options.options,multiple:o.element.options.multiple},{...o.element.options.customProps,...l.extendProps}),null,16,["modelValue","disabled","clearable","placeholder","style","data","multiple"])):vue.createCommentVNode("",!0),"editor"==o.element.type?(vue.openBlock(),vue.createBlock(C,{modelValue:o.element.options.defaultValue,"custom-style":{width:o.isTable?"100%":o.element.options.width,cursor:l.elementDisabled?"no-drop":"",backgroundColor:l.elementDisabled?"#F5F7FA":""},toolbar:o.element.options.customToolbar,class:"fm-editor",disabled:l.elementDisabled,key:i.elementKey},null,8,["modelValue","custom-style","toolbar","disabled"])):vue.createCommentVNode("",!0),"blank"==o.element.type?(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$u,vue.toDisplayString(o.element.model),1)):vue.createCommentVNode("",!0),"component"==o.element.type?(vue.openBlock(),vue.createBlock(vue.resolveDynamicComponent(`component-${o.element.key}`),{style:vue.normalizeStyle({width:o.isTable?"100%":o.element.options.width}),key:i.key,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[15]||(t[15]=e=>o.element.options.defaultValue=e)},null,8,["style","modelValue"])):vue.createCommentVNode("",!0),"custom"==o.element.type?(vue.openBlock(),vue.createBlock(vue.resolveDynamicComponent(o.element.el),vue.mergeProps({key:18,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[16]||(t[16]=e=>o.element.options.defaultValue=e),width:o.element.options.width,height:o.element.options.height,placeholder:o.element.options.placeholder,readonly:o.element.options.readonly,disabled:l.elementDisabled,editable:o.element.options.editable,clearable:o.element.options.clearable},{...o.element.options.customProps,...l.extendProps}),null,16,["modelValue","width","height","placeholder","readonly","disabled","editable","clearable"])):vue.createCommentVNode("",!0),"text"==o.element.type?(vue.openBlock(),vue.createElementBlock("span",{key:19,style:vue.normalizeStyle({width:o.isTable?"100%":o.element.options.width||"100%",display:"inline-block"})},vue.toDisplayString(o.element.options.defaultValue),5)):vue.createCommentVNode("",!0),"html"==o.element.type?(vue.openBlock(),vue.createElementBlock("span",{key:20,style:vue.normalizeStyle({width:o.isTable?"100%":o.element.options.width||"100%",display:"inline-block"}),innerHTML:o.element.options.defaultValue},null,12,_hoisted_2$r)):vue.createCommentVNode("",!0),"fileupload"==o.element.type?(vue.openBlock(),vue.createBlock(S,{key:21,action:"https://jsonplaceholder.typicode.com/posts/",style:vue.normalizeStyle({width:o.isTable?"100%":o.element.options.width}),disabled:l.elementDisabled,limit:o.element.options.limit},{default:vue.withCtx((()=>[vue.createVNode(x,{size:"default",type:"primary"},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.upload")),1)])),_:1})])),_:1},8,["style","disabled","limit"])):vue.createCommentVNode("",!0),"button"==o.element.type?(vue.openBlock(),vue.createBlock(x,vue.mergeProps({key:22,disabled:l.elementDisabled,size:o.element.options.buttonSize,type:"text"==o.element.options.buttonType||"link"==o.element.options.buttonType?"primary":o.element.options.buttonType,text:"text"==o.element.options.buttonType,link:"link"==o.element.options.buttonType,plain:o.element.options.buttonPlain,round:o.element.options.buttonRound,circle:o.element.options.buttonCircle,style:{width:o.element.options.width}},{...o.element.options.customProps,...l.extendProps}),{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.element.options.buttonName),1)])),_:1},16,["disabled","size","type","text","link","plain","round","circle","style"])):vue.createCommentVNode("",!0),"link"==o.element.type?(vue.openBlock(),vue.createBlock(V,vue.mergeProps({key:23,disabled:l.elementDisabled,type:o.element.options.linkType,underline:o.element.options.underline},{...o.element.options.customProps,...l.extendProps}),{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.element.options.linkName),1)])),_:1},16,["disabled","type","underline"])):vue.createCommentVNode("",!0),"steps"==o.element.type?(vue.openBlock(),vue.createBlock(E,vue.mergeProps({key:24,active:o.element.options.defaultValue,space:o.element.options.space,direction:o.element.options.direction,"process-status":o.element.options.processStatus,"finish-status":o.element.options.finishStatus,"align-center":o.element.options.alignCenter,simple:o.element.options.simple,style:{"line-height":"normal"}},{...o.element.options.customProps,...l.extendProps}),{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.options.steps,((e,t)=>(vue.openBlock(),vue.createBlock(N,{title:e.title,description:e.description,key:t},null,8,["title","description"])))),128))])),_:1},16,["active","space","direction","process-status","finish-status","align-center","simple"])):vue.createCommentVNode("",!0),"transfer"==o.element.type?(vue.openBlock(),vue.createBlock($,vue.mergeProps({key:25,"model-value":o.element.options.defaultValue,data:o.element.options.data,filterable:o.element.options.filterable,titles:o.element.options.titles,style:{width:o.isTable?"100%":o.element.options.width}},{...o.element.options.customProps,...l.extendProps}),null,16,["model-value","data","filterable","titles","style"])):vue.createCommentVNode("",!0),"pagination"==o.element.type?(vue.openBlock(),vue.createBlock(D,vue.mergeProps({key:26,currentPage:o.element.options.defaultValue,"onUpdate:currentPage":t[17]||(t[17]=e=>o.element.options.defaultValue=e),"page-size":o.element.options.pageSize,"pager-count":o.element.options.pagerCount,disabled:l.elementDisabled,background:o.element.options.background,layout:"total, prev, pager, next",total:o.element.options.total},{...o.element.options.customProps,...l.extendProps}),null,16,["currentPage","page-size","pager-count","disabled","background","total"])):vue.createCommentVNode("",!0),"list"==o.element.type?(vue.openBlock(),vue.createBlock(B,{key:27,modelValue:o.element.options.defaultValue,"onUpdate:modelValue":t[18]||(t[18]=e=>o.element.options.defaultValue=e),"is-design":"",columns:o.element.options.columns,showOperation:o.element.options.showOperation,operations:o.element.options.operations,pagination:o.element.options.pagination,style:vue.normalizeStyle({width:o.isTable?"100%":o.element.options.width}),"max-height":o.element.options.maxHeight,stripe:o.element.options.stripe,border:o.element.options.border,selection:o.element.options.selection},null,8,["modelValue","columns","showOperation","operations","pagination","style","max-height","stripe","border","selection"])):vue.createCommentVNode("",!0),vue.createVNode(T,{element:o.element,"is-table":o.isTable},null,8,["element","is-table"])],64)}var WidgetElementItem=_export_sfc(_sfc_main$M,[["render",_sfc_render$K]]);const _sfc_main$L={props:["element","select","index","data","formKey"],components:{WidgetElementItem:WidgetElementItem},emits:["select-change","update:data","update:select"],inject:["getDragging"],data:()=>({}),mounted(){},methods:{handleMouseover(e){!this.getDragging()&&addClass$1(this.$refs.widgetFormItem,"is-hover")},handleMouseout(e){removeClass$1(this.$refs.widgetFormItem,"is-hover")},handleSelectWidget(e){this.$emit("update:select",this.data.list[e])},handleWidgetDelete(e){1==this.data.list.length?this.$emit("select-change",-1):this.data.list.length-1==e?this.$emit("select-change",e-1):this.$emit("select-change",e),this.$nextTick((()=>{this.data.list.splice(e,1),setTimeout((()=>{EventBus.$emit("on-history-add-"+this.formKey)}),20)}))},handleWidgetClone(e){const t=Math.random().toString(36).slice(-8);let o={..._.cloneDeep(this.data.list[e]),key:t,model:this.data.list[e].type+"_"+t};this.data.list.splice(e+1,0,o),this.$nextTick((()=>{this.$emit("update:select",this.data.list[e+1]),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}))}},watch:{}},_hoisted_1$t=["innerHTML"],_hoisted_2$q={key:0,class:"widget-view-action"},_hoisted_3$l=["title"],_hoisted_4$k=["title"],_hoisted_5$k={key:1,class:"widget-view-drag"},_hoisted_6$i=vue.createElementVNode("i",{class:"fm-iconfont icon-drag drag-widget"},null,-1),_hoisted_7$h=[_hoisted_6$i],_hoisted_8$a={class:"widget-view-type"},_hoisted_9$9={key:0,class:"widget-view-action"},_hoisted_10$7=["title"],_hoisted_11$7=["title"],_hoisted_12$6={key:1,class:"widget-view-drag"},_hoisted_13$4=vue.createElementVNode("i",{class:"fm-iconfont icon-drag drag-widget"},null,-1),_hoisted_14$4=[_hoisted_13$4],_hoisted_15$3={class:"widget-view-type"};function _sfc_render$J(e,t,o,n,i,l){const a=vue.resolveComponent("widget-element-item"),r=vue.resolveComponent("el-form-item"),s=vue.resolveComponent("el-divider"),d=vue.resolveComponent("el-alert");return vue.openBlock(),vue.createElementBlock("div",null,[o.element&&o.element.key&&"divider"!=o.element.type&&"alert"!=o.element.type?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:vue.normalizeClass(["widget-view",{active:o.select.key==o.element.key,is_req:o.element.options.required,is_hidden:o.element.options.hidden}]),onClick:t[2]||(t[2]=vue.withModifiers((e=>l.handleSelectWidget(o.index)),["stop"])),onMouseover:t[3]||(t[3]=vue.withModifiers(((...e)=>l.handleMouseover&&l.handleMouseover(...e)),["stop"])),onMouseout:t[4]||(t[4]=(...e)=>l.handleMouseout&&l.handleMouseout(...e)),ref:"widgetFormItem"},[vue.createVNode(r,{class:vue.normalizeClass({[o.element.options&&o.element.options.customClass]:!!o.element.options.customClass,"fm-label-wrap":o.element.options.labelWrap}),label:o.element.options.hideLabel?"":o.element.name,"label-width":o.element.options.hideLabel?"0px":o.element.options.isLabelWidth?o.element.options.labelWidth+"px":""},{default:vue.withCtx((()=>[o.element.options.tip?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"fm-item-tooltip",innerHTML:o.element.options.tip.replace(/\n/g,"<br/>")},null,8,_hoisted_1$t)):vue.createCommentVNode("",!0),(vue.openBlock(),vue.createBlock(a,{element:o.element,"is-table":!1,key:o.element.key},null,8,["element"]))])),_:1},8,["class","label","label-width"]),o.select.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_2$q,[vue.createElementVNode("i",{class:"fm-iconfont icon-icon_clone",onClick:t[0]||(t[0]=vue.withModifiers((e=>l.handleWidgetClone(o.index)),["stop"])),title:e.$t("fm.tooltip.clone")},null,8,_hoisted_3$l),vue.createElementVNode("i",{class:"fm-iconfont icon-trash",onClick:t[1]||(t[1]=vue.withModifiers((e=>l.handleWidgetDelete(o.index)),["stop"])),title:e.$t("fm.tooltip.trash")},null,8,_hoisted_4$k)])):vue.createCommentVNode("",!0),o.select.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_5$k,_hoisted_7$h)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"widget-view-model",style:vue.normalizeStyle({color:o.element.options.dataBind?"":"#666"})},[vue.createElementVNode("span",null,vue.toDisplayString(o.element.model),1)],4),vue.createElementVNode("div",_hoisted_8$a,[vue.createElementVNode("span",null,vue.toDisplayString(o.element.type?this.$t("fm.components.fields."+o.element.type):""),1)])],34)):vue.createCommentVNode("",!0),o.element&&o.element.key&&("divider"==o.element.type||"alert"==o.element.type)?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:vue.normalizeClass(["widget-view no-put",{active:o.select.key==o.element.key,is_hidden:o.element.options.hidden}]),onClick:t[7]||(t[7]=vue.withModifiers((e=>l.handleSelectWidget(o.index)),["stop"])),style:{"padding-bottom":"0"},onMouseover:t[8]||(t[8]=vue.withModifiers(((...e)=>l.handleMouseover&&l.handleMouseover(...e)),["stop"])),onMouseout:t[9]||(t[9]=(...e)=>l.handleMouseout&&l.handleMouseout(...e)),ref:"widgetFormItem"},[vue.createVNode(r,{"label-width":"0"},{default:vue.withCtx((()=>["divider"==o.element.type?(vue.openBlock(),vue.createBlock(s,vue.mergeProps({key:0,"content-position":o.element.options.contentPosition},o.element.options.customProps),{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.element.name),1)])),_:1},16,["content-position"])):vue.createCommentVNode("",!0),"alert"==o.element.type?(vue.openBlock(),vue.createBlock(d,vue.mergeProps({key:1,title:o.element.options.title,type:o.element.options.type,description:o.element.options.description,closable:o.element.options.closable,center:o.element.options.center,"show-icon":o.element.options.showIcon,effect:o.element.options.effect,style:{width:o.element.options.width}},o.element.options.customProps),null,16,["title","type","description","closable","center","show-icon","effect","style"])):vue.createCommentVNode("",!0)])),_:1}),o.select.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_9$9,[vue.createElementVNode("i",{class:"fm-iconfont icon-icon_clone",onClick:t[5]||(t[5]=vue.withModifiers((e=>l.handleWidgetClone(o.index)),["stop"])),title:e.$t("fm.tooltip.clone")},null,8,_hoisted_10$7),vue.createElementVNode("i",{class:"fm-iconfont icon-trash",onClick:t[6]||(t[6]=vue.withModifiers((e=>l.handleWidgetDelete(o.index)),["stop"])),title:e.$t("fm.tooltip.trash")},null,8,_hoisted_11$7)])):vue.createCommentVNode("",!0),o.select.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_12$6,_hoisted_14$4)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"widget-view-model",style:vue.normalizeStyle({color:o.element.options.dataBind?"":"#666"})},[vue.createElementVNode("span",null,vue.toDisplayString(o.element.model),1)],4),vue.createElementVNode("div",_hoisted_15$3,[vue.createElementVNode("span",null,vue.toDisplayString(o.element.type?this.$t("fm.components.fields."+o.element.type):""),1)])],34)):vue.createCommentVNode("",!0)])}var WidgetFormItem=_export_sfc(_sfc_main$L,[["render",_sfc_render$J]]);const _sfc_main$K={components:{WidgetElementItem:WidgetElementItem},props:["element","select","index","data","platform","formKey"],emits:["select-change","update:select"],data(){return{selectWidget:this.select||{}}},methods:{handleMouseover(e){addClass$1(this.$refs.widgetTableItem,"is-hover")},handleMouseout(e){removeClass$1(this.$refs.widgetTableItem,"is-hover")},handleSelectWidget(e){this.$emit("update:select",this.data[e])},handleWidgetDelete(e){1==this.data.length?this.$emit("select-change",-1):this.data.length-1==e?this.$emit("select-change",e-1):this.$emit("select-change",e),this.$nextTick((()=>{this.data.splice(e,1),setTimeout((()=>{EventBus.$emit("on-history-add-"+this.formKey)}),20)}))},handleWidgetClone(e){const t=Math.random().toString(36).slice(-8);let o={..._.cloneDeep(this.data[e]),key:t,model:this.data[e].type+"_"+t};this.data.splice(e+1,0,o),this.$nextTick((()=>{this.$emit("update:select",this.data[e+1]),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}))}},watch:{select(e){this.selectWidget=e},selectWidget(e){this.$emit("update:select",e)}}},_hoisted_1$s={key:2,class:"widget-view-action"},_hoisted_2$p=["title"],_hoisted_3$k=["title"],_hoisted_4$j={key:3,class:"widget-view-drag"},_hoisted_5$j=vue.createElementVNode("i",{class:"fm-iconfont icon-drag drag-widget"},null,-1),_hoisted_6$h=[_hoisted_5$j],_hoisted_7$g={class:"widget-view-type"};function _sfc_render$I(e,t,o,n,i,l){const a=vue.resolveComponent("widget-element-item"),r=vue.resolveComponent("el-table-column"),s=vue.resolveComponent("el-table"),d=vue.resolveComponent("el-form-item");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["widget-table-view",{active:i.selectWidget.key==o.element.key,is_req:o.element.options.required,is_hidden:o.element.options.hidden,mobile:"mobile"==o.platform}]),onClick:t[2]||(t[2]=vue.withModifiers((e=>l.handleSelectWidget(o.index)),["stop"])),onMouseover:t[3]||(t[3]=vue.withModifiers(((...e)=>l.handleMouseover&&l.handleMouseover(...e)),["stop"])),onMouseout:t[4]||(t[4]=(...e)=>l.handleMouseout&&l.handleMouseout(...e)),ref:"widgetTableItem",style:vue.normalizeStyle({width:"mobile"!=o.platform?o.element.options.width?o.element.options.width:"200px":""})},["mobile"!=o.platform?(vue.openBlock(),vue.createBlock(s,{key:0,"row-class-name":"widget-table-row",data:[{}]},{default:vue.withCtx((()=>{var e;return[vue.createVNode(r,{label:o.element.options.hideLabel?"":o.element.name,"class-name":null==(e=o.element.options)?void 0:e.customClass,"label-class-name":o.element.options.required?"required":""},{default:vue.withCtx((()=>[vue.createVNode(a,{element:o.element,"is-table":!0},null,8,["element"])])),_:1},8,["label","class-name","label-class-name"])]})),_:1})):vue.createCommentVNode("",!0),"mobile"==o.platform?(vue.openBlock(),vue.createBlock(d,{key:1,label:o.element.options.hideLabel?"":o.element.name,"label-width":o.element.options.hideLabel?"0px":o.element.options.isLabelWidth?o.element.options.labelWidth+"px":"",class:vue.normalizeClass({[o.element.options&&o.element.options.customClass]:!!o.element.options.customClass,"fm-label-wrap":o.element.options.labelWrap})},{default:vue.withCtx((()=>[vue.createVNode(a,{element:o.element,"is-table":!0},null,8,["element"])])),_:1},8,["label","label-width","class"])):vue.createCommentVNode("",!0),i.selectWidget.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$s,[vue.createElementVNode("i",{class:"fm-iconfont icon-icon_clone",onClick:t[0]||(t[0]=vue.withModifiers((e=>l.handleWidgetClone(o.index)),["stop"])),title:e.$t("fm.tooltip.clone")},null,8,_hoisted_2$p),vue.createElementVNode("i",{class:"fm-iconfont icon-trash",onClick:t[1]||(t[1]=vue.withModifiers((e=>l.handleWidgetDelete(o.index)),["stop"])),title:e.$t("fm.tooltip.trash")},null,8,_hoisted_3$k)])):vue.createCommentVNode("",!0),i.selectWidget.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_4$j,_hoisted_6$h)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"widget-view-model",style:vue.normalizeStyle({color:o.element.options.dataBind?"":"#666"})},[vue.createElementVNode("span",null,vue.toDisplayString(o.element.model),1)],4),vue.createElementVNode("div",_hoisted_7$g,[vue.createElementVNode("span",null,vue.toDisplayString(o.element.type?this.$t("fm.components.fields."+o.element.type):""),1)])],38)}var WidgetTableItem=_export_sfc(_sfc_main$K,[["render",_sfc_render$I]]);const CloneLayout=e=>{if("grid"===e.type){let t=Math.random().toString(36).slice(-8);return{...e,key:t,model:e.type+"_"+t,columns:e.columns.map((e=>({...e,list:e.list.map((e=>CloneLayout(e))),key:Math.random().toString(36).slice(-8)})))}}if("col"===e.type){let t=Math.random().toString(36).slice(-8);return{...e,key:t,list:e.list.map((e=>CloneLayout(e)))}}if("tabs"===e.type||"collapse"===e.type){let t=Math.random().toString(36).slice(-8);return{...e,key:t,model:e.type+"_"+t,tabs:e.tabs.map((e=>({...e,list:e.list.map((e=>CloneLayout(e)))})))}}if("table"===e.type){let t=Math.random().toString(36).slice(-8);return{...e,key:t,model:e.type+"_"+t,tableColumns:e.tableColumns.map((e=>CloneLayout(e)))}}if("subform"===e.type){let t=Math.random().toString(36).slice(-8);return{...e,key:t,model:e.type+"_"+t,list:e.list.map((e=>CloneLayout(e)))}}if("report"===e.type){let t=Math.random().toString(36).slice(-8);return{...e,key:t,model:e.type+"_"+t,rows:e.rows.map((e=>({...e,columns:e.columns.map((e=>({...e,list:e.list.map((e=>CloneLayout(e))),key:Math.random().toString(36).slice(-8)})))})))}}if("inline"===e.type){let t=Math.random().toString(36).slice(-8);return{...e,key:t,model:e.type+"_"+t,list:e.list.map((e=>CloneLayout(e)))}}if("dialog"===e.type){let t=Math.random().toString(36).slice(-8);return{...e,key:t,model:e.type+"_"+t,list:e.list.map((e=>CloneLayout(e)))}}if("card"===e.type){let t=Math.random().toString(36).slice(-8);return{...e,key:t,model:e.type+"_"+t,list:e.list.map((e=>CloneLayout(e)))}}if("group"===e.type){let t=Math.random().toString(36).slice(-8);return{...e,key:t,model:e.type+"_"+t,list:e.list.map((e=>CloneLayout(e)))}}{let t=Math.random().toString(36).slice(-8);return{...e,key:t,model:e.type+"_"+t}}},_sfc_main$J={components:{Draggable:draggableComponent,WidgetTableItem:WidgetTableItem},props:["element","select","index","data","platform","formKey"],emits:["select-change","update:select"],inject:["setDragging","getDragging"],data(){return{selectWidget:this.select||{},columnsWidthStyle:"200px"}},mounted(){this.calcTableColumnsWidth()},methods:{handleMouseover(e){!this.getDragging()&&addClass$1(this.$refs.widgetTable,"is-hover")},handleMouseout(e){removeClass$1(this.$refs.widgetTable,"is-hover")},handleSelectWidget(e){this.$emit("update:select",this.data.list[e])},handleWidgetDelete(e){1==this.data.list.length?this.$emit("select-change",-1):this.data.list.length-1==e?this.$emit("select-change",e-1):this.$emit("select-change",e),this.data.list.splice(e,1),setTimeout((()=>{EventBus.$emit("on-history-add-"+this.formKey)}),20)},handleTableClone(e){let t=_.cloneDeep(this.data.list[e]);this.data.list.splice(e+1,0,CloneLayout(t)),this.$nextTick((()=>{this.$emit("update:select",this.data.list[e+1]),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}))},handleWidgetTableUpdate(e){this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},calcTableColumnsWidth(){this.columnsWidthStyle="calc(200px)";let e=[];for(let t=0;t<this.element.tableColumns.length;t++)this.element.tableColumns[t].options.width?e.push(this.element.tableColumns[t].options.width):e.push("200px");e.length&&(this.columnsWidthStyle=`calc(200px + ${e.join(" + ")})`)},handlePut:(e,t,o)=>!(o.className.split(" ").indexOf("widget-col")>=0||o.className.split(" ").indexOf("widget-table")>=0||o.className.split(" ").indexOf("widget-tab")>=0||o.className.split(" ").indexOf("widget-report")>=0||o.className.split(" ").indexOf("widget-inline")>=0||o.className.split(" ").indexOf("widget-subform")>=0||o.className.split(" ").indexOf("widget-dialog")>=0||o.className.split(" ").indexOf("widget-card")>=0||o.className.split(" ").indexOf("widget-group")>=0||o.className.split(" ").indexOf("no-put")>=0||o.children[0].className.split(" ").indexOf("no-put")>=0),handleWidgetTableAdd(e,t){const o=e.newIndex,n=Math.random().toString(36).slice(-8);t.tableColumns[o]=_.cloneDeep(t.tableColumns[o]),t.tableColumns[o]={...t.tableColumns[o],options:{...t.tableColumns[o].options,remoteFunc:t.tableColumns[o].options.remoteFunc||"func_"+n,remoteOption:t.tableColumns[o].options.remoteOption||"option_"+n,tableColumn:!0,subform:!!this.subform},novalid:{...t.tableColumns[o].novalid},key:t.tableColumns[o].key?t.tableColumns[o].key:n,model:t.tableColumns[o].model?t.tableColumns[o].model:t.tableColumns[o].type+"_"+n,rules:t.tableColumns[o].rules?[...t.tableColumns[o].rules]:[]},this.$nextTick((()=>{this.selectWidget=t.tableColumns[o],EventBus.$emit("on-history-add-"+this.formKey)}))},handleSelectChange(e,t){setTimeout((()=>{e>=0?this.$emit("update:select",this.element.tableColumns[e]):this.$emit("update:select",this.data.list[this.index])}))}},watch:{select(e){this.selectWidget=e},selectWidget(e){this.$emit("update:select",e)},element:{deep:!0,handler(e){this.calcTableColumnsWidth()}}}},_hoisted_1$r=["innerHTML"],_hoisted_2$o={key:0,class:"widget-table-left"},_hoisted_3$j={class:"widget-table-left__top"},_hoisted_4$i={class:"widget-table-left__body",style:{padding:"8px"}},_hoisted_5$i={key:1,class:"widget-table-left"},_hoisted_6$g=vue.createElementVNode("div",{class:"widget-table-left__top"},"#",-1),_hoisted_7$f=vue.createElementVNode("div",{class:"widget-table-left__body"},"1",-1),_hoisted_8$9=[_hoisted_6$g,_hoisted_7$f],_hoisted_9$8={key:2,class:"widget-table-top"},_hoisted_10$6={key:0,class:"table-empty"},_hoisted_11$6={key:0,class:"widget-view-action widget-col-action"},_hoisted_12$5=["title"],_hoisted_13$3=["title"],_hoisted_14$3={key:1,class:"widget-view-drag widget-col-drag"},_hoisted_15$2=vue.createElementVNode("i",{class:"fm-iconfont icon-drag drag-widget"},null,-1),_hoisted_16$2=[_hoisted_15$2],_hoisted_17$2={class:"widget-view-type"};function _sfc_render$H(e,t,o,n,i,l){const a=vue.resolveComponent("el-checkbox"),r=vue.resolveComponent("widget-table-item"),s=vue.resolveComponent("draggable"),d=vue.resolveComponent("el-form-item");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["widget-table widget-view",{active:i.selectWidget.key&&i.selectWidget.key==o.element.key,is_hidden:o.element.options.hidden,mobile:"mobile"==o.platform}]),onClick:t[7]||(t[7]=vue.withModifiers((e=>l.handleSelectWidget(o.index)),["stop"])),onMouseover:t[8]||(t[8]=vue.withModifiers(((...e)=>l.handleMouseover&&l.handleMouseover(...e)),["stop"])),onMouseout:t[9]||(t[9]=(...e)=>l.handleMouseout&&l.handleMouseout(...e)),ref:"widgetTable"},[vue.createVNode(d,{label:o.element.options.hideLabel?"":o.element.name,"label-width":o.element.options.hideLabel?"0px":o.element.options.isLabelWidth?o.element.options.labelWidth+"px":"",class:vue.normalizeClass({[o.element.options&&o.element.options.customClass]:!!o.element.options.customClass,"fm-label-wrap":o.element.options.labelWrap})},{default:vue.withCtx((()=>[o.element.options.tip?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"fm-item-tooltip",innerHTML:o.element.options.tip.replace(/\n/g,"<br/>")},null,8,_hoisted_1$r)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:vue.normalizeClass(["widget-table-wrapper",{mobile:"mobile"==o.platform}])},["mobile"!=o.platform&&o.element.options.selection?(vue.openBlock(),vue.createElementBlock("div",_hoisted_2$o,[vue.createElementVNode("div",_hoisted_3$j,[vue.createVNode(a)]),vue.createElementVNode("div",_hoisted_4$i,[vue.createVNode(a)])])):vue.createCommentVNode("",!0),"mobile"!=o.platform&&o.element.options.showControl?(vue.openBlock(),vue.createElementBlock("div",_hoisted_5$i,_hoisted_8$9)):vue.createCommentVNode("",!0),"mobile"==o.platform?(vue.openBlock(),vue.createElementBlock("div",_hoisted_9$8,[o.element.options.selection?(vue.openBlock(),vue.createBlock(a,{key:0,style:{"margin-right":"10px"}})):vue.createCommentVNode("",!0),vue.createTextVNode(" # 1 ")])):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:vue.normalizeClass(["widget-table-content",{mobile:"mobile"==o.platform}])},[0==o.element.tableColumns.length?(vue.openBlock(),vue.createElementBlock("div",_hoisted_10$6,vue.toDisplayString(e.$t("fm.description.tableEmpty")),1)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{style:vue.normalizeStyle({width:"mobile"!=o.platform?i.columnsWidthStyle:"100%"})},[vue.createVNode(s,{modelValue:o.element.tableColumns,"onUpdate:modelValue":t[1]||(t[1]=e=>o.element.tableColumns=e),group:{name:"people",put:l.handlePut},"ghost-class":"ghost",animation:200,handle:".drag-widget","no-transition-on-drag":!0,onAdd:t[2]||(t[2]=e=>l.handleWidgetTableAdd(e,o.element)),onUpdate:l.handleWidgetTableUpdate,onStart:t[3]||(t[3]=e=>l.setDragging(!0)),onEnd:t[4]||(t[4]=e=>l.setDragging(!1)),class:"widget-table-col","item-key":"key"},{item:vue.withCtx((({element:e,index:n})=>[(vue.openBlock(),vue.createBlock(r,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[0]||(t[0]=e=>i.selectWidget=e),index:n,data:o.element.tableColumns,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"]))])),_:1},8,["modelValue","group","onUpdate"])],4)],2)],2)])),_:1},8,["label","label-width","class"]),i.selectWidget.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_11$6,[vue.createElementVNode("i",{class:"fm-iconfont icon-icon_clone",onClick:t[5]||(t[5]=vue.withModifiers((e=>l.handleTableClone(o.index)),["stop"])),title:e.$t("fm.tooltip.clone")},null,8,_hoisted_12$5),vue.createElementVNode("i",{class:"fm-iconfont icon-trash",onClick:t[6]||(t[6]=vue.withModifiers((e=>l.handleWidgetDelete(o.index)),["stop"])),title:e.$t("fm.tooltip.trash")},null,8,_hoisted_13$3)])):vue.createCommentVNode("",!0),i.selectWidget.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_14$3,_hoisted_16$2)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"widget-view-model",style:vue.normalizeStyle({color:o.element.options.dataBind?"":"#666"})},[vue.createElementVNode("span",null,vue.toDisplayString(o.element.model),1)],4),vue.createElementVNode("div",_hoisted_17$2,[vue.createElementVNode("span",null,vue.toDisplayString(o.element.type?this.$t("fm.components.fields."+o.element.type):""),1)])],34)}var WidgetTable=_export_sfc(_sfc_main$J,[["render",_sfc_render$H]]),WidgetTable$1=Object.freeze(Object.defineProperty({__proto__:null,default:WidgetTable},Symbol.toStringTag,{value:"Module"}));const _sfc_main$I={name:"widget-inline",components:{Draggable:draggableComponent,WidgetFormItem:WidgetFormItem},props:["element","select","index","data","platform","formKey","subform"],emits:["select-change","update:select"],inject:["setDragging","getDragging"],data(){return{selectWidget:this.select||{}}},methods:{handleMouseover(e){!this.getDragging()&&addClass$1(this.$refs.widgetInline,"is-hover")},handleMouseout(e){removeClass$1(this.$refs.widgetInline,"is-hover")},handleSelectWidget(e){this.selectWidget=this.data.list[e]},handlePut:(e,t,o)=>!(o.className.split(" ").indexOf("widget-col")>=0||o.className.split(" ").indexOf("widget-table")>=0||o.className.split(" ").indexOf("widget-tab")>=0||o.className.split(" ").indexOf("widget-inline")>=0||o.className.split(" ").indexOf("widget-report")>=0||o.className.split(" ").indexOf("widget-dialog")>=0||o.className.split(" ").indexOf("widget-card")>=0||o.className.split(" ").indexOf("no-put")>=0||o.children[0].className.split(" ").indexOf("no-put")>=0),handleWidgetInlineAdd(e,t){const o=e.newIndex,n=Math.random().toString(36).slice(-8);t.list[o]=_.cloneDeep(t.list[o]),t.list[o]={...t.list[o],options:{...t.list[o].options,remoteFunc:t.list[o].options.remoteFunc||"func_"+n,remoteOption:t.list[o].options.remoteOption||"option_"+n,subform:!!this.subform,tableColumn:!1},key:t.list[o].key?t.list[o].key:n,model:t.list[o].model?t.list[o].model:t.list[o].type+"_"+n,rules:t.list[o].rules?[...t.list[o].rules]:[]},this.$nextTick((()=>{this.selectWidget=t.list[o],EventBus.$emit("on-history-add-"+this.formKey)}))},handleInlineClone(e){let t=_.cloneDeep(this.data.list[e]);this.data.list.splice(e+1,0,CloneLayout(t)),this.$nextTick((()=>{this.selectWidget=this.data.list[e+1],this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}))},handleWidgetDelete(e){1==this.data.list.length?this.$emit("select-change",-1):this.data.list.length-1==e?this.$emit("select-change",e-1):this.$emit("select-change",e),this.data.list.splice(e,1),setTimeout((()=>{EventBus.$emit("on-history-add-"+this.formKey)}),20)},handleWidgetInlineUpdate(){this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleSelectChange(e,t){setTimeout((()=>{this.selectWidget=e>=0?t.list[e]:this.data.list[this.index]}))}},watch:{select(e){this.selectWidget=e},selectWidget(e){this.$emit("update:select",e)}}},_hoisted_1$q=["size"],_hoisted_2$n={class:"widget-inline-content"},_hoisted_3$i={key:0,class:"widget-view-action widget-inline-action"},_hoisted_4$h=["title"],_hoisted_5$h=["title"],_hoisted_6$f={key:1,class:"widget-view-drag widget-inline-drag"},_hoisted_7$e=vue.createElementVNode("i",{class:"fm-iconfont icon-drag drag-widget"},null,-1),_hoisted_8$8=[_hoisted_7$e],_hoisted_9$7={class:"widget-view-type"};function _sfc_render$G(e,t,o,n,i,l){const a=vue.resolveComponent("widget-form-item"),r=vue.resolveComponent("draggable");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["widget-inline widget-view",{active:i.selectWidget.key&&i.selectWidget.key==o.element.key,is_hidden:o.element.options.hidden}]),onClick:t[8]||(t[8]=vue.withModifiers((e=>l.handleSelectWidget(o.index)),["stop"])),size:o.element.options.size,onMouseover:t[9]||(t[9]=vue.withModifiers(((...e)=>l.handleMouseover&&l.handleMouseover(...e)),["stop"])),onMouseout:t[10]||(t[10]=(...e)=>l.handleMouseout&&l.handleMouseout(...e)),ref:"widgetInline"},[vue.createElementVNode("div",_hoisted_2$n,[vue.createVNode(r,vue.mergeProps({modelValue:o.element.list,"onUpdate:modelValue":t[2]||(t[2]=e=>o.element.list=e)},{group:{name:"people",put:l.handlePut},ghostClass:"ghost",animation:200,handle:".drag-widget"},{"no-transition-on-drag":!0,onAdd:t[3]||(t[3]=e=>l.handleWidgetInlineAdd(e,o.element)),onUpdate:l.handleWidgetInlineUpdate,onStart:t[4]||(t[4]=e=>l.setDragging(!0)),onEnd:t[5]||(t[5]=e=>l.setDragging(!1)),class:["widget-inline-list",{[o.element.options&&o.element.options.customClass]:!!o.element.options.customClass}],"item-key":"key",style:{display:o.element.options.flex?"flex":"block","flex-direction":"row","flex-wrap":"wrap","justify-content":o.element.options.flexJustify||"normal","align-items":o.element.options.flexAlign||"normal"}}),{item:vue.withCtx((({element:e,index:n})=>[e&&e.key?(vue.openBlock(),vue.createBlock(a,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[0]||(t[0]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t[1]||(t[1]=e=>l.handleSelectChange(e,o.element)),"form-key":o.formKey,style:vue.normalizeStyle({"margin-right":o.element.options.spaceSize+"px"})},null,8,["element","select","index","data","form-key","style"])):vue.createCommentVNode("",!0)])),_:1},16,["modelValue","onUpdate","class","style"])]),i.selectWidget.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_3$i,[vue.createElementVNode("i",{class:"fm-iconfont icon-icon_clone",onClick:t[6]||(t[6]=vue.withModifiers((e=>l.handleInlineClone(o.index)),["stop"])),title:e.$t("fm.tooltip.clone")},null,8,_hoisted_4$h),vue.createElementVNode("i",{class:"fm-iconfont icon-trash",onClick:t[7]||(t[7]=vue.withModifiers((e=>l.handleWidgetDelete(o.index)),["stop"])),title:e.$t("fm.tooltip.trash")},null,8,_hoisted_5$h)])):vue.createCommentVNode("",!0),i.selectWidget.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_6$f,_hoisted_8$8)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"widget-view-model",style:vue.normalizeStyle({color:o.element.options.dataBind?"":"#666"})},[vue.createElementVNode("span",null,vue.toDisplayString(o.element.model),1)],4),vue.createElementVNode("div",_hoisted_9$7,[vue.createElementVNode("span",null,vue.toDisplayString(o.element.type?this.$t("fm.components.fields."+o.element.type):""),1)])],42,_hoisted_1$q)}var WidgetInline=_export_sfc(_sfc_main$I,[["render",_sfc_render$G]]);const _sfc_main$H={name:"widget-col-item",components:{Draggable:draggableComponent,WidgetFormItem:WidgetFormItem,WidgetTable:WidgetTable,WidgetInline:WidgetInline,WidgetReport:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetReport$1})))),WidgetCollapse:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetCollapse$1})))),WidgetCard:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetCard$1})))),WidgetSubForm:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetSubForm$1})))),WidgetTabItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetTabItem$1})))),WidgetGroup:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetGroup$1}))))},props:["element","select","index","data","platform","formKey","subform"],emits:["select-change","update:select"],inject:["getDragging","setDragging"],data(){return{selectWidget:this.select||{},selectIndex:-1}},methods:{handleMouseover(e){!this.getDragging()&&addClass$1(this.$refs.widgetCol,"is-hover")},handleMouseout(e){removeClass$1(this.$refs.widgetCol,"is-hover")},handleMouseoverCol(e){!this.getDragging()&&addClass$1(this.$refs.widgetColItem[e].$el,"is-hover")},handleMouseoutCol(e){removeClass$1(this.$refs.widgetColItem[e].$el,"is-hover")},handlePut:(e,t,o)=>!(o.className.split(" ").indexOf("widget-dialog")>=0||o.className.split(" ").indexOf("dialog-put")>=0||o.children[0].className.split(" ").indexOf("dialog-put")>=0),getColSpan(e){return"pc"==this.platform?e&&e.md:"pad"==this.platform?e&&e.sm:"mobile"==this.platform?e&&e.xs:void 0},handleSelectWidget(e){this.$emit("update:select",this.data.list[e])},handleSelectItemWidget(e){this.$emit("update:select",this.data.list[this.index].columns[e]),this.selectIndex=e},handleWidgetDelete(e){1==this.data.list.length?this.$emit("select-change",-1):this.data.list.length-1==e?this.$emit("select-change",e-1):this.$emit("select-change",e),this.data.list.splice(e,1),setTimeout((()=>{EventBus.$emit("on-history-add-"+this.formKey)}),20)},handleColItemDelete(e,t){this.data.list[e].columns.splice(t,1),0==t?this.$emit("update:select",this.data.list[e].columns[0]):this.$emit("update:select",this.data.list[e].columns[t-1]),setTimeout((()=>{EventBus.$emit("on-history-add-"+this.formKey)}),20)},handleAddCol(e){this.data.list[e].columns.push({type:"col",options:{span:12,offset:0,push:0,pull:0,xs:24,sm:12,md:12,lg:12,xl:12,customClass:""},list:[],key:Math.random().toString(36).slice(-8)}),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleColClone(e){let t=_.cloneDeep(this.data.list[e]);this.data.list.splice(e+1,0,CloneLayout(t)),this.$nextTick((()=>{this.data.list[e+1],this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}))},handleColItemClone(e,t){let o=_.cloneDeep(this.data.list[e].columns[t]);this.data.list[e].columns.splice(t+1,0,CloneLayout(o)),this.$nextTick((()=>{this.$emit("update:select",this.data.list[e].columns[t+1]),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}))},handleWidgetColUpdate(e){this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleWidgetColAdd(e,t,o){const n=e.newIndex;fixDraggbleList(t.columns[o].list,n),t.columns[o].list[n]=_.cloneDeep(t.columns[o].list[n]);const i=Math.random().toString(36).slice(-8);t.columns[o].list[n]={...t.columns[o].list[n],options:{...t.columns[o].list[n].options,remoteFunc:t.columns[o].list[n].options.remoteFunc||"func_"+i,remoteOption:t.columns[o].list[n].options.remoteOption||"option_"+i,tableColumn:!1,subform:!!this.subform},novalid:{...t.columns[o].list[n].novalid},key:t.columns[o].list[n].key?t.columns[o].list[n].key:i,model:t.columns[o].list[n].model?t.columns[o].list[n].model:t.columns[o].list[n].type+"_"+i,rules:t.columns[o].list[n].rules?[...t.columns[o].list[n].rules]:[]},"report"==t.columns[o].list[n].type&&(t.columns[o].list[n].rows=generateKeyToTD(t.columns[o].list[n].rows),t.columns[o].list[n].headerRow=generateKeyToTH(t.columns[o].list[n].headerRow)),"grid"==t.columns[o].list[n].type&&(t.columns[o].list[n].columns=generateKeyToCol(t.columns[o].list[n].columns)),setTimeout((()=>{this.selectWidget=t.columns[o].list[n],EventBus.$emit("on-history-add-"+this.formKey)}),50)},handleSelectChange(e,t){setTimeout((()=>{e>=0?this.$emit("update:select",t.list[e]):this.$emit("update:select",{})}))}},watch:{select(e){this.selectWidget=e},selectWidget(e){this.$emit("update:select",e)}}},_hoisted_1$p={key:0,class:"widget-view-action widget-col-action"},_hoisted_2$m=["onClick","title"],_hoisted_3$h=["onClick","title"],_hoisted_4$g={class:"widget-view-type"},_hoisted_5$g={key:0,class:"widget-view-action widget-col-action"},_hoisted_6$e=["title"],_hoisted_7$d=["title"],_hoisted_8$7=["title"],_hoisted_9$6={key:1,class:"widget-view-drag widget-col-drag"},_hoisted_10$5=vue.createElementVNode("i",{class:"fm-iconfont icon-drag drag-widget"},null,-1),_hoisted_11$5=[_hoisted_10$5],_hoisted_12$4={class:"widget-view-type"};function _sfc_render$F(e,t,o,n,i,l){const a=vue.resolveComponent("widget-col-item",!0),r=vue.resolveComponent("widget-tab-item"),s=vue.resolveComponent("widget-collapse"),d=vue.resolveComponent("widget-report"),u=vue.resolveComponent("widget-table"),c=vue.resolveComponent("widget-sub-form"),p=vue.resolveComponent("widget-card"),m=vue.resolveComponent("widget-group"),h=vue.resolveComponent("widget-inline"),f=vue.resolveComponent("widget-form-item"),v=vue.resolveComponent("draggable"),g=vue.resolveComponent("el-col"),y=vue.resolveComponent("el-row");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["widget-col widget-view",{active:o.select.key&&o.select.key==o.element.key,is_hidden:o.element.options.hidden}]),onClick:t[15]||(t[15]=vue.withModifiers((e=>l.handleSelectWidget(o.index)),["stop"])),onMouseover:t[16]||(t[16]=vue.withModifiers(((...e)=>l.handleMouseover&&l.handleMouseover(...e)),["stop"])),onMouseout:t[17]||(t[17]=(...e)=>l.handleMouseout&&l.handleMouseout(...e)),ref:"widgetCol"},[vue.createVNode(y,{type:o.element.options.flex?"flex":"",gutter:o.element.options.gutter||0,justify:o.element.options.justify,align:o.element.options.align,class:vue.normalizeClass({[o.element.options&&o.element.options.customClass]:!(!o.element.options||!o.element.options.customClass)})},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.columns,((n,y)=>(vue.openBlock(),vue.createBlock(g,{class:vue.normalizeClass(["widget-col-item",{active:o.select.key&&o.select.key==n.key,[n.options&&n.options.customClass]:!(!n.options||!n.options.customClass)}]),key:n.key,onClick:vue.withModifiers((e=>l.handleSelectItemWidget(y)),["stop"]),span:l.getColSpan(n.options),offset:n.options?n.options.offset:0,push:n.options?n.options.push:0,pull:n.options?n.options.pull:0,onMouseover:vue.withModifiers((e=>l.handleMouseoverCol(y)),["stop"]),onMouseout:e=>l.handleMouseoutCol(y),ref_for:!0,ref:"widgetColItem"},{default:vue.withCtx((()=>[vue.createVNode(v,vue.mergeProps({list:o.element.columns[y].list,ref_for:!0},{group:{name:"people",put:l.handlePut},ghostClass:"ghost",animation:200,handle:".drag-widget"},{"no-transition-on-drag":!0,onAdd:e=>l.handleWidgetColAdd(e,o.element,y),onUpdate:l.handleWidgetColUpdate,onStart:t[10]||(t[10]=e=>l.setDragging(!0)),onEnd:t[11]||(t[11]=e=>l.setDragging(!1)),class:"widget-col-list","item-key":"key"}),{item:vue.withCtx((({element:e,index:v})=>["grid"===e.type?(vue.openBlock(),vue.createBlock(a,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[0]||(t[0]=e=>i.selectWidget=e),index:v,data:n,onSelectChange:e=>l.handleSelectChange(e,n),platform:o.platform,"form-key":o.formKey,subform:o.subform},null,8,["element","select","index","data","onSelectChange","platform","form-key","subform"])):"tabs"===e.type?(vue.openBlock(),vue.createBlock(r,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[1]||(t[1]=e=>i.selectWidget=e),index:v,data:n,onSelectChange:e=>l.handleSelectChange(e,n),platform:o.platform,"form-key":o.formKey,subform:o.subform},null,8,["element","select","index","data","onSelectChange","platform","form-key","subform"])):"collapse"===e.type?(vue.openBlock(),vue.createBlock(s,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[2]||(t[2]=e=>i.selectWidget=e),index:v,data:n,onSelectChange:e=>l.handleSelectChange(e,n),platform:o.platform,"form-key":o.formKey,subform:o.subform},null,8,["element","select","index","data","onSelectChange","platform","form-key","subform"])):"report"===e.type?(vue.openBlock(),vue.createBlock(d,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[3]||(t[3]=e=>i.selectWidget=e),index:v,data:n,onSelectChange:e=>l.handleSelectChange(e,n),platform:o.platform,"form-key":o.formKey,subform:o.subform},null,8,["element","select","index","data","onSelectChange","platform","form-key","subform"])):"table"===e.type?(vue.openBlock(),vue.createBlock(u,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[4]||(t[4]=e=>i.selectWidget=e),index:v,data:n,onSelectChange:e=>l.handleSelectChange(e,n),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"subform"===e.type?(vue.openBlock(),vue.createBlock(c,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[5]||(t[5]=e=>i.selectWidget=e),index:v,data:n,onSelectChange:e=>l.handleSelectChange(e,n),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"card"===e.type?(vue.openBlock(),vue.createBlock(p,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[6]||(t[6]=e=>i.selectWidget=e),index:v,data:n,onSelectChange:e=>l.handleSelectChange(e,n),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"group"===e.type?(vue.openBlock(),vue.createBlock(m,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[7]||(t[7]=e=>i.selectWidget=e),index:v,data:n,onSelectChange:e=>l.handleSelectChange(e,n),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"inline"===e.type?(vue.openBlock(),vue.createBlock(h,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[8]||(t[8]=e=>i.selectWidget=e),index:v,data:n,onSelectChange:e=>l.handleSelectChange(e,n),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):(vue.openBlock(),vue.createBlock(f,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[9]||(t[9]=e=>i.selectWidget=e),index:v,data:n,onSelectChange:e=>l.handleSelectChange(e,n),"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","form-key"]))])),_:2},1040,["list","onAdd","onUpdate"]),o.select.key==n.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$p,[vue.createElementVNode("i",{class:"fm-iconfont icon-icon_clone",onClick:vue.withModifiers((e=>l.handleColItemClone(o.index,y)),["stop"]),title:e.$t("fm.tooltip.clone")},null,8,_hoisted_2$m),o.element.columns.length>1?(vue.openBlock(),vue.createElementBlock("i",{key:0,class:"fm-iconfont icon-trash",onClick:vue.withModifiers((e=>l.handleColItemDelete(o.index,y)),["stop"]),title:e.$t("fm.tooltip.trash")},null,8,_hoisted_3$h)):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0),vue.createElementVNode("div",_hoisted_4$g,[vue.createElementVNode("span",null,vue.toDisplayString(n.type?this.$t("fm.components.fields."+n.type):""),1)])])),_:2},1032,["class","onClick","span","offset","push","pull","onMouseover","onMouseout"])))),128))])),_:1},8,["type","gutter","justify","align","class"]),o.select.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_5$g,[vue.createElementVNode("i",{class:"fm-iconfont icon-tianjiazengjiajia",onClick:t[12]||(t[12]=vue.withModifiers((e=>l.handleAddCol(o.index)),["stop"])),title:e.$t("fm.actions.addColumn")},null,8,_hoisted_6$e),vue.createElementVNode("i",{class:"fm-iconfont icon-icon_clone",onClick:t[13]||(t[13]=vue.withModifiers((e=>l.handleColClone(o.index)),["stop"])),title:e.$t("fm.tooltip.clone")},null,8,_hoisted_7$d),vue.createElementVNode("i",{class:"fm-iconfont icon-trash",onClick:t[14]||(t[14]=vue.withModifiers((e=>l.handleWidgetDelete(o.index)),["stop"])),title:e.$t("fm.tooltip.trash")},null,8,_hoisted_8$7)])):vue.createCommentVNode("",!0),o.select.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_9$6,_hoisted_11$5)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"widget-view-model",style:vue.normalizeStyle({color:o.element.options.dataBind?"":"#666"})},[vue.createElementVNode("span",null,vue.toDisplayString(o.element.model),1)],4),vue.createElementVNode("div",_hoisted_12$4,[vue.createElementVNode("span",null,vue.toDisplayString(o.element.type?this.$t("fm.components.fields."+o.element.type):""),1)])],34)}var WidgetColItem=_export_sfc(_sfc_main$H,[["render",_sfc_render$F]]),WidgetColItem$1=Object.freeze(Object.defineProperty({__proto__:null,default:WidgetColItem},Symbol.toStringTag,{value:"Module"}));const _sfc_main$G={name:"widget-tab-item",components:{WidgetFormItem:WidgetFormItem,WidgetTable:WidgetTable,WidgetInline:WidgetInline,Draggable:draggableComponent,WidgetColItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetColItem$1})))),WidgetReport:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetReport$1})))),WidgetSubForm:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetSubForm$1})))),WidgetCollapse:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetCollapse$1})))),WidgetCard:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetCard$1})))),WidgetGroup:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetGroup$1}))))},props:["element","select","index","data","platform","formKey","subform"],emits:["select-change","update:select"],inject:["setDragging","getDragging"],data(){return{tabActive:this.element.tabs[0].name,selectWidget:this.select||{}}},methods:{handleMouseover(e){!this.getDragging()&&addClass$1(this.$refs.widgetTab,"is-hover")},handleMouseout(e){removeClass$1(this.$refs.widgetTab,"is-hover")},handlePut:(e,t,o)=>!(o.className.split(" ").indexOf("widget-dialog")>=0||o.className.split(" ").indexOf("dialog-put")>=0||o.children[0].className.split(" ").indexOf("dialog-put")>=0),handleSelectWidget(e){this.selectWidget=this.data.list[e]},handleWidgetDelete(e){1==this.data.list.length?this.$emit("select-change",-1):this.data.list.length-1==e?this.$emit("select-change",e-1):this.$emit("select-change",e),this.data.list.splice(e,1),setTimeout((()=>{EventBus.$emit("on-history-add-"+this.formKey)}),20)},handleTabClone(e){let t=_.cloneDeep(this.data.list[e]);this.data.list.splice(e+1,0,CloneLayout(t)),this.$nextTick((()=>{this.selectWidget=this.data.list[e+1],this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}))},handleWidgetTabUpdate(e){this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleWidgetTabAdd(e,t,o){const n=e.newIndex,i=Math.random().toString(36).slice(-8);fixDraggbleList(t.tabs[o].list,n),t.tabs[o].list[n]=_.cloneDeep(t.tabs[o].list[n]),t.tabs[o].list[n]={...t.tabs[o].list[n],options:{...t.tabs[o].list[n].options,remoteFunc:t.tabs[o].list[n].options.remoteFunc||"func_"+i,remoteOption:t.tabs[o].list[n].options.remoteOption||"option_"+i,tableColumn:!1,subform:!!this.subform},key:t.tabs[o].list[n].key?t.tabs[o].list[n].key:i,model:t.tabs[o].list[n].model?t.tabs[o].list[n].model:t.tabs[o].list[n].type+"_"+i,rules:t.tabs[o].list[n].rules?[...t.tabs[o].list[n].rules]:[]},"report"==t.tabs[o].list[n].type&&(t.tabs[o].list[n].rows=generateKeyToTD(t.tabs[o].list[n].rows),t.tabs[o].list[n].headerRow=generateKeyToTH(t.tabs[o].list[n].headerRow)),"grid"==t.tabs[o].list[n].type&&(t.tabs[o].list[n].columns=generateKeyToCol(t.tabs[o].list[n].columns)),setTimeout((()=>{this.selectWidget=t.tabs[o].list[n],EventBus.$emit("on-history-add-"+this.formKey)}),50)},handleSelectChange(e,t){setTimeout((()=>{this.selectWidget=e>=0?t.list[e]:{}}))}},watch:{select(e){this.selectWidget=e},selectWidget(e){this.$emit("update:select",e)}}},_hoisted_1$o={key:0,class:"widget-view-action widget-col-action"},_hoisted_2$l=["title"],_hoisted_3$g=["title"],_hoisted_4$f={key:1,class:"widget-view-drag widget-col-drag"},_hoisted_5$f=vue.createElementVNode("i",{class:"fm-iconfont icon-drag drag-widget"},null,-1),_hoisted_6$d=[_hoisted_5$f],_hoisted_7$c={class:"widget-view-type"};function _sfc_render$E(e,t,o,n,i,l){const a=vue.resolveComponent("widget-tab-item",!0),r=vue.resolveComponent("widget-collapse"),s=vue.resolveComponent("widget-table"),d=vue.resolveComponent("widget-sub-form"),u=vue.resolveComponent("widget-card"),c=vue.resolveComponent("widget-group"),p=vue.resolveComponent("widget-inline"),m=vue.resolveComponent("widget-report"),h=vue.resolveComponent("widget-form-item"),f=vue.resolveComponent("widget-col-item"),v=vue.resolveComponent("draggable"),g=vue.resolveComponent("el-tab-pane"),y=vue.resolveComponent("el-tabs");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["widget-tab widget-view",{active:i.selectWidget.key&&i.selectWidget.key==o.element.key,is_hidden:o.element.options.hidden}]),onClick:t[15]||(t[15]=vue.withModifiers((e=>l.handleSelectWidget(o.index)),["stop"])),onMouseover:t[16]||(t[16]=vue.withModifiers(((...e)=>l.handleMouseover&&l.handleMouseover(...e)),["stop"])),onMouseout:t[17]||(t[17]=(...e)=>l.handleMouseout&&l.handleMouseout(...e)),ref:"widgetTab"},[vue.createVNode(y,{modelValue:i.tabActive,"onUpdate:modelValue":t[12]||(t[12]=e=>i.tabActive=e),type:o.element.options.type,"tab-position":o.element.options.tabPosition,class:vue.normalizeClass({[o.element.options&&o.element.options.customClass]:!!o.element.options.customClass})},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.tabs,((e,n)=>(vue.openBlock(),vue.createBlock(g,{key:e.name,label:e.label,name:e.name},{default:vue.withCtx((()=>[vue.createVNode(v,vue.mergeProps({modelValue:e.list,"onUpdate:modelValue":t=>e.list=t,ref_for:!0},{group:{name:"people",put:l.handlePut},ghostClass:"ghost",animation:200,handle:".drag-widget"},{"no-transition-on-drag":!0,onAdd:e=>l.handleWidgetTabAdd(e,o.element,n),onUpdate:l.handleWidgetTabUpdate,onStart:t[10]||(t[10]=e=>l.setDragging(!0)),onEnd:t[11]||(t[11]=e=>l.setDragging(!1)),class:"widget-col-list","item-key":"key"}),{item:vue.withCtx((({element:n,index:v})=>["tabs"===n.type?(vue.openBlock(),vue.createBlock(a,{key:n.key,element:n,select:i.selectWidget,"onUpdate:select":t[0]||(t[0]=e=>i.selectWidget=e),index:v,data:e,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey,subform:o.subform},null,8,["element","select","index","data","onSelectChange","platform","form-key","subform"])):"collapse"===n.type?(vue.openBlock(),vue.createBlock(r,{key:n.key,element:n,select:i.selectWidget,"onUpdate:select":t[1]||(t[1]=e=>i.selectWidget=e),index:v,data:e,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey,subform:o.subform},null,8,["element","select","index","data","onSelectChange","platform","form-key","subform"])):"table"===n.type?(vue.openBlock(),vue.createBlock(s,{key:n.key,element:n,select:i.selectWidget,"onUpdate:select":t[2]||(t[2]=e=>i.selectWidget=e),index:v,data:e,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"subform"===n.type?(vue.openBlock(),vue.createBlock(d,{key:n.key,element:n,select:i.selectWidget,"onUpdate:select":t[3]||(t[3]=e=>i.selectWidget=e),index:v,data:e,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"card"===n.type?(vue.openBlock(),vue.createBlock(u,{key:n.key,element:n,select:i.selectWidget,"onUpdate:select":t[4]||(t[4]=e=>i.selectWidget=e),index:v,data:e,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"group"===n.type?(vue.openBlock(),vue.createBlock(c,{key:n.key,element:n,select:i.selectWidget,"onUpdate:select":t[5]||(t[5]=e=>i.selectWidget=e),index:v,data:e,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"inline"===n.type?(vue.openBlock(),vue.createBlock(p,{key:n.key,element:n,select:i.selectWidget,"onUpdate:select":t[6]||(t[6]=e=>i.selectWidget=e),index:v,data:e,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"report"===n.type?(vue.openBlock(),vue.createBlock(m,{key:n.key,element:n,select:i.selectWidget,"onUpdate:select":t[7]||(t[7]=e=>i.selectWidget=e),index:v,data:e,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey,subform:o.subform},null,8,["element","select","index","data","onSelectChange","platform","form-key","subform"])):"grid"!==n.type?(vue.openBlock(),vue.createBlock(h,{key:n.key,element:n,select:i.selectWidget,"onUpdate:select":t[8]||(t[8]=e=>i.selectWidget=e),index:v,data:e,onSelectChange:t=>l.handleSelectChange(t,e),"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","form-key"])):(vue.openBlock(),vue.createBlock(f,{key:n.key,element:n,select:i.selectWidget,"onUpdate:select":t[9]||(t[9]=e=>i.selectWidget=e),index:v,data:e,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey,subform:o.subform},null,8,["element","select","index","data","onSelectChange","platform","form-key","subform"]))])),_:2},1040,["modelValue","onUpdate:modelValue","onAdd","onUpdate"])])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue","type","tab-position","class"]),i.selectWidget.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$o,[vue.createElementVNode("i",{class:"fm-iconfont icon-icon_clone",onClick:t[13]||(t[13]=vue.withModifiers((e=>l.handleTabClone(o.index)),["stop"])),title:e.$t("fm.tooltip.clone")},null,8,_hoisted_2$l),vue.createElementVNode("i",{class:"fm-iconfont icon-trash",onClick:t[14]||(t[14]=vue.withModifiers((e=>l.handleWidgetDelete(o.index)),["stop"])),title:e.$t("fm.tooltip.trash")},null,8,_hoisted_3$g)])):vue.createCommentVNode("",!0),i.selectWidget.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_4$f,_hoisted_6$d)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"widget-view-model",style:vue.normalizeStyle({color:o.element.options.dataBind?"":"#666"})},[vue.createElementVNode("span",null,vue.toDisplayString(o.element.model),1)],4),vue.createElementVNode("div",_hoisted_7$c,[vue.createElementVNode("span",null,vue.toDisplayString(o.element.type?this.$t("fm.components.fields."+o.element.type):""),1)])],34)}var WidgetTabItem=_export_sfc(_sfc_main$G,[["render",_sfc_render$E]]),WidgetTabItem$1=Object.freeze(Object.defineProperty({__proto__:null,default:WidgetTabItem},Symbol.toStringTag,{value:"Module"}));const _sfc_main$F={name:"widget-report",components:{Draggable:draggableComponent,WidgetFormItem:WidgetFormItem,WidgetTable:WidgetTable,WidgetInline:WidgetInline,WidgetColItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetColItem$1})))),WidgetTabItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetTabItem$1})))),WidgetSubForm:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetSubForm$1})))),WidgetCollapse:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetCollapse$1})))),WidgetCard:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetCard$1})))),WidgetGroup:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetGroup$1}))))},props:["element","select","index","data","platform","formKey","subform"],emits:["select-change","update:select"],inject:["getDragging","setDragging"],data(){return{selectWidget:this.select||{},selectR:-1,selectC:-1,selectIndex:-1}},created(){this.element.headerRow||(this.element.headerRow=this.element.rows[0].columns.map((e=>({type:"th",options:{width:e.options.width},key:Math.random().toString(36).slice(-8)}))))},computed:{showRight(){if(this.selectR>=0&&this.selectC>=0){const e=this.element.rows[this.selectR].columns[this.selectC].options.rowspan,t=this.element.rows[this.selectR].columns[this.selectC].options.colspan;if(this.selectC+t<this.element.rows[this.selectR].columns.length){const o=this.element.rows[this.selectR].columns[t+this.selectC];if(!o.options.invisible&&e==o.options.rowspan)return!0}}return!1},showBottom(){if(this.selectR>=0&&this.selectC>=0){const e=this.element.rows[this.selectR].columns[this.selectC].options.rowspan,t=this.element.rows[this.selectR].columns[this.selectC].options.colspan;if(e+this.selectR<this.element.rows.length){const o=this.element.rows[e+this.selectR].columns[this.selectC];if(!o.options.invisible&&t==o.options.colspan)return!0}}return!1},showRemoveRow(){if(this.element.rows.length>1&&this.selectR>=0&&this.selectC>=0){const e=this.element.rows[this.selectR].columns[this.selectC].options.rowspan;if(1==e)return!0;{let t=0;for(;t<this.element.rows[this.selectR].columns.length;t++)if(e!=this.element.rows[this.selectR].columns[t].options.rowspan||this.element.rows[this.selectR].columns[t].options.invisible)return!1;if(this.element.rows[this.selectR].columns.length==t)return!0}}return!1},showRemoveColumn(){if(this.selectR>=0&&this.selectC>=0&&this.element.rows[this.selectR].columns.length>1){const e=this.element.rows[this.selectR].columns[this.selectC].options.colspan;if(1==e)return!0;{let t=0;for(;t<this.element.rows.length;t++)if(e!=this.element.rows[t].columns[this.selectC].options.colspan||this.element.rows[t].columns[this.selectC].options.invisible)return!1;if(this.element.rows.length==t)return!0}}return!1},showSplitColumn(){return this.selectR>=0&&this.selectC>=0&&this.element.rows[this.selectR].columns[this.selectC].options.colspan>1},showSplitRow(){return this.selectR>=0&&this.selectC>=0&&this.element.rows[this.selectR].columns[this.selectC].options.rowspan>1}},methods:{handleMouseover(e){!this.getDragging()&&addClass$1(this.$refs.widgetReport,"is-hover")},handleMouseout(e){removeClass$1(this.$refs.widgetReport,"is-hover")},handleMouseoverTD(e,t){!this.getDragging()&&addClass$1(this.$refs[`widgetTD_${e}_${t}`][0],"is-hover")},handleMouseoutTD(e,t){removeClass$1(this.$refs[`widgetTD_${e}_${t}`][0],"is-hover")},handleMouseoverTH(e){!this.getDragging()&&addClass$1(this.$refs[`widgetTH_${e}`][0],"is-hover")},handleMouseoutTH(e){removeClass$1(this.$refs[`widgetTH_${e}`][0],"is-hover")},handlePut:(e,t,o)=>!(o.className.split(" ").indexOf("widget-dialog")>=0||o.className.split(" ").indexOf("dialog-put")>=0||o.children[0].className.split(" ").indexOf("dialog-put")>=0),handleSelectWidget(e){this.$emit("update:select",this.data.list[e])},handleSelectItemWidget(e,t){this.$emit("update:select",this.data.list[this.index].rows[e].columns[t]),this.selectR=e,this.selectC=t},handleSelectHeaderWidget(e){this.$emit("update:select",this.data.list[this.index].headerRow[e])},handleWidgetDelete(e){1==this.data.list.length?this.$emit("select-change",-1):this.data.list.length-1==e?this.$emit("select-change",e-1):this.$emit("select-change",e),this.data.list.splice(e,1),setTimeout((()=>{EventBus.$emit("on-history-add-"+this.formKey)}),20)},handleWidgetItemAdd(e,t,o,n){const i=e.newIndex;fixDraggbleList(t.rows[o].columns[n].list,i);const l=Math.random().toString(36).slice(-8);t.rows[o].columns[n].list[i]=_.cloneDeep(t.rows[o].columns[n].list[i]),t.rows[o].columns[n].list[i]={...t.rows[o].columns[n].list[i],options:{...t.rows[o].columns[n].list[i].options,remoteFunc:t.rows[o].columns[n].list[i].options.remoteFunc||"func_"+l,remoteOption:t.rows[o].columns[n].list[i].options.remoteOption||"option_"+l,tableColumn:!1,hideLabel:!0,subform:!!this.subform},key:t.rows[o].columns[n].list[i].key?t.rows[o].columns[n].list[i].key:l,model:t.rows[o].columns[n].list[i].model?t.rows[o].columns[n].list[i].model:t.rows[o].columns[n].list[i].type+"_"+l,rules:t.rows[o].columns[n].list[i].rules?[...t.rows[o].columns[n].list[i].rules]:[]},"report"==t.rows[o].columns[n].list[i].type&&(t.rows[o].columns[n].list[i].rows=generateKeyToTD(t.rows[o].columns[n].list[i].rows),t.rows[o].columns[n].list[i].headerRow=generateKeyToTH(t.rows[o].columns[n].list[i].headerRow)),"grid"==t.rows[o].columns[n].list[i].type&&(t.rows[o].columns[n].list[i].columns=generateKeyToCol(t.rows[o].columns[n].list[i].columns)),setTimeout((()=>{this.selectWidget=t.rows[o].columns[n].list[i],EventBus.$emit("on-history-add-"+this.formKey)}),50)},handleWidgetItemUpdate(){EventBus.$emit("on-history-add-"+this.formKey)},handleReportClone(e){let t=_.cloneDeep(this.data.list[e]);this.data.list.splice(e+1,0,CloneLayout(t)),this.$nextTick((()=>{this.$emit("update:select",this.data.list[e+1]),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}))},handleAddRow(e){const t=this.data.list[e].rows[this.data.list[e].rows.length-1].columns.length;this.data.list[e].rows.push({columns:Array.from({length:t},(e=>({type:"td",list:[],options:{customClass:"",colspan:1,rowspan:1,align:"left",valign:"top",width:"",height:""},key:Math.random().toString(36).slice(-8)})))}),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleAddColumns(e){this.data.list[e].headerRow.push({type:"th",options:{width:""},key:Math.random().toString(36).slice(-8)}),this.data.list[e].rows.forEach((e=>{e.columns.push({type:"td",list:[],options:{customClass:"",colspan:1,rowspan:1,align:"left",valign:"top",width:"",height:""},key:Math.random().toString(36).slice(-8)})})),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},insertColumns(e){this.element.headerRow.splice(e,0,{type:"th",options:{width:""},key:Math.random().toString(36).slice(-8)});for(let t=0;t<this.element.rows.length;t++){const o=this.findPrevColIndex(t,e);if(o!=e&&this.element.rows[t].columns[e].options.invisible){this.element.rows[t].columns.splice(e,0,{type:"td",list:[],options:{customClass:"",colspan:1,rowspan:1,align:"left",valign:"top",width:"",height:"",invisible:!0},key:Math.random().toString(36).slice(-8)});const n=this.element.rows[t].columns[o].options.colspan;this.element.rows[t].columns[o].options.colspan=n+1;for(let e=0;e<n+1;e++)this.element.rows[t].columns[o+e].options.markCol=e}else this.element.rows[t].columns.splice(e,0,{type:"td",list:[],options:{customClass:"",colspan:1,rowspan:1,align:"left",valign:"top",width:"",height:""},key:Math.random().toString(36).slice(-8)})}},insertRow(e){const t=[];for(let o=0;o<this.element.rows[0].columns.length;o++){const n=this.findPrevRowIndex(e,o);n!=e&&this.element.rows[e].columns[o].options.invisible?(t.push({type:"td",list:[],options:{customClass:"",colspan:1,rowspan:1,align:"left",valign:"top",width:"",height:"",invisible:!0},key:Math.random().toString(36).slice(-8)}),this.element.rows[n].columns[o].options.rowspan=this.element.rows[n].columns[o].options.rowspan+1):t.push({type:"td",list:[],options:{customClass:"",colspan:1,rowspan:1,align:"left",valign:"top",width:"",height:""},key:Math.random().toString(36).slice(-8)})}this.element.rows.splice(e,0,{columns:t}),this.$nextTick((()=>{for(let t=0;t<this.element.rows[e].columns.length;t++)if(this.element.rows[e].columns[t].options.invisible){const o=this.findPrevRowIndex(e-1,t);this.element.rows[o].columns[t].options.invisible||this.markTableItem(o,t)}}))},handleInsertLeft(){const e=this.selectC;this.insertColumns(e),this.selectC=this.selectC++,this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleInsertRight(){const e=this.element.rows[this.selectR].columns[this.selectC].options.colspan>1?this.findNextColIndex(this.selectR,this.selectC+1):this.selectC+1;this.insertColumns(e),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleInserBefore(){const e=this.selectR;this.insertRow(e),this.selectR=this.selectR++,this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleInserAfter(){const e=this.element.rows[this.selectR].columns[this.selectC].options.rowspan>1?this.findNextRowIndex(this.selectR+1,this.selectC):this.selectR+1;this.insertRow(e),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},markTableItem(e,t){const o=this.element.rows[e].columns[t].options.colspan,n=this.element.rows[e].columns[t].options.rowspan;for(let i=0;i<n;i++)for(let n=0;n<o;n++)this.element.rows[e+i].columns[t+n].options.markCol=n,this.element.rows[e+i].columns[t+n].options.markRow=i},handleRight(e){if(!this.showRight)return;const t=e.options.colspan,o=this.selectC+t,n=this.element.rows[this.selectR].columns[o].options.colspan;e.options.colspan=t+n,this.element.rows[this.selectR].columns[o].options.invisible=!0;const i=[...this.element.rows[this.selectR].columns[o].list];this.element.rows[this.selectR].columns[o].list=[],e.list=e.list.concat(i),this.markTableItem(this.selectR,this.selectC),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleBottom(e){if(!this.showBottom)return;const t=e.options.rowspan,o=this.selectR+t,n=this.element.rows[o].columns[this.selectC].options.rowspan;e.options.rowspan=t+n,this.element.rows[o].columns[this.selectC].options.invisible=!0;const i=[...this.element.rows[o].columns[this.selectC].list];this.element.rows[o].columns[this.selectC].list=[],e.list=e.list.concat(i),this.markTableItem(this.selectR,this.selectC),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleSplitColumn(){if(!this.showSplitColumn)return;const e=this.element.rows[this.selectR].columns[this.selectC].options.colspan,t=this.element.rows[this.selectR].columns[this.selectC].options.rowspan;for(let o=0;o<e;o++)this.element.rows[this.selectR].columns[this.selectC+o].options.invisible=!1,this.element.rows[this.selectR].columns[this.selectC+o].options.colspan=1,this.element.rows[this.selectR].columns[this.selectC+o].options.rowspan=t,this.markTableItem(this.selectR,this.selectC+o);this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleSplitRow(){if(!this.showSplitRow)return;const e=this.element.rows[this.selectR].columns[this.selectC].options.colspan,t=this.element.rows[this.selectR].columns[this.selectC].options.rowspan;for(let o=0;o<t;o++)this.element.rows[this.selectR+o].columns[this.selectC].options.invisible=!1,this.element.rows[this.selectR+o].columns[this.selectC].options.rowspan=1,this.element.rows[this.selectR+o].columns[this.selectC].options.colspan=e,this.markTableItem(this.selectR+o,this.selectC);this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},findPrevRowIndex(e,t){return e>=this.element.rows.length||!this.element.rows[e].columns[t].options.markRow?e:this.findPrevRowIndex(e-1,t)},findPrevColIndex(e,t){return t>=this.element.rows[e].columns.length||!this.element.rows[e].columns[t].options.markCol?t:this.findPrevColIndex(e,t-1)},findNextColIndex(e,t){return t>=this.element.rows[e].columns.length||!this.element.rows[e].columns[t].options.markCol?t:this.findNextColIndex(e,t+1)},findNextRowIndex(e,t){return e>=this.element.rows.length||!this.element.rows[e].columns[t].options.markRow?e:this.findNextRowIndex(e+1,t)},handleRemoveRow(){if(this.showRemoveRow){for(let e=0;e<this.element.rows[this.selectR].columns.length;e++){const t=this.element.rows[this.selectR].columns[e].options.rowspan,o=this.element.rows[this.selectR].columns[e].options.colspan;if(this.element.rows[this.selectR].columns[e].options.invisible){const t=this.findPrevRowIndex(this.selectR,e);t!=this.selectR&&this.element.rows[t].columns[e].options.rowspan>1&&(this.element.rows[t].columns[e].options.rowspan=this.element.rows[t].columns[e].options.rowspan-1)}else t>1&&(this.element.rows[this.selectR+1].columns[e].list=[...this.element.rows[this.selectR].columns[e].list],this.element.rows[this.selectR+1].columns[e].options.invisible=!1,this.element.rows[this.selectR+1].columns[e].options.rowspan=t-1,this.element.rows[this.selectR+1].columns[e].options.colspan=o,this.markTableItem(this.selectR+1,e))}this.element.rows.splice(this.selectR,1),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}},handleRemoveColumn(){if(this.showRemoveColumn){for(let e=0;e<this.element.rows.length;e++){const t=this.element.rows[e].columns[this.selectC].options.colspan,o=this.element.rows[e].columns[this.selectC].options.rowspan;if(this.element.rows[e].columns[this.selectC].options.invisible){const t=this.findPrevColIndex(e,this.selectC);t!=this.selectC&&this.element.rows[e].columns[t].options.colspan>1&&(this.element.rows[e].columns[t].options.colspan=this.element.rows[e].columns[t].options.colspan-1)}else t>1&&(this.element.rows[e].columns[this.selectC+1].list=[...this.element.rows[e].columns[this.selectC].list],this.element.rows[e].columns[this.selectC+1].options.invisible=!1,this.element.rows[e].columns[this.selectC+1].options.colspan=t-1,this.element.rows[e].columns[this.selectC+1].options.rowspan=o,this.markTableItem(e,this.selectC+1));this.element.rows[e].columns.splice(this.selectC,1)}this.element.headerRow.splice(this.selectC,1),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}},handleSetColumnWidth(){this.$emit("update:select",this.data.list[this.index].headerRow[this.selectC])},handleSelectChange(e,t){setTimeout((()=>{e>=0?this.$emit("update:select",t.list[e]):this.$emit("update:select",this.data.list[this.index])}))}},watch:{select(e){this.selectWidget=e,this.element.headerRow&&(this.selectIndex=this.element.headerRow.findIndex((t=>t.key===e.key)))},selectWidget(e){this.$emit("update:select",e),this.element.headerRow&&(this.selectIndex=this.element.headerRow.findIndex((t=>t.key===e.key)))}}},_hoisted_1$n={class:"fm-report-table"},_hoisted_2$k=["onClick","onMouseover","onMouseout"],_hoisted_3$f={style:{"text-align":"center",height:"10px","line-height":"10px","font-size":"12px"}},_hoisted_4$e=["colspan","rowspan","onClick","onMouseover","onMouseout"],_hoisted_5$e={key:0,class:"widget-view-action widget-col-action"},_hoisted_6$c={class:"el-dropdown-link"},_hoisted_7$b=["title"],_hoisted_8$6={class:"widget-view-type"},_hoisted_9$5={key:0,class:"widget-view-action widget-col-action"},_hoisted_10$4=["title"],_hoisted_11$4=["title"],_hoisted_12$3=["title"],_hoisted_13$2=["title"],_hoisted_14$2={key:1,class:"widget-view-drag widget-col-drag"},_hoisted_15$1=vue.createElementVNode("i",{class:"fm-iconfont icon-drag drag-widget"},null,-1),_hoisted_16$1=[_hoisted_15$1],_hoisted_17$1={class:"widget-view-type"};function _sfc_render$D(e,t,o,n,i,l){const a=vue.resolveComponent("widget-tab-item"),r=vue.resolveComponent("widget-collapse"),s=vue.resolveComponent("widget-table"),d=vue.resolveComponent("widget-sub-form"),u=vue.resolveComponent("widget-card"),c=vue.resolveComponent("widget-group"),p=vue.resolveComponent("widget-inline"),m=vue.resolveComponent("widget-report",!0),h=vue.resolveComponent("widget-form-item"),f=vue.resolveComponent("widget-col-item"),v=vue.resolveComponent("draggable"),g=vue.resolveComponent("el-dropdown-item"),y=vue.resolveComponent("el-dropdown-menu"),b=vue.resolveComponent("el-dropdown");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["widget-report widget-view",{active:o.select.key&&o.select.key==o.element.key,is_hidden:o.element.options.hidden}]),onClick:t[16]||(t[16]=vue.withModifiers((e=>l.handleSelectWidget(o.index)),["stop"])),onMouseover:t[17]||(t[17]=vue.withModifiers(((...e)=>l.handleMouseover&&l.handleMouseover(...e)),["stop"])),onMouseout:t[18]||(t[18]=(...e)=>l.handleMouseout&&l.handleMouseout(...e)),ref:"widgetReport"},[vue.createElementVNode("div",_hoisted_1$n,[vue.createElementVNode("table",{class:vue.normalizeClass(["fm-report-table__table",{[o.element.options&&o.element.options.customClass]:!!o.element.options.customClass}]),style:vue.normalizeStyle({border:0,width:o.element.options.width||"auto"})},[vue.createElementVNode("tr",null,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.headerRow,((e,t)=>(vue.openBlock(),vue.createElementBlock("th",{key:t,style:vue.normalizeStyle({"border-style":"solid","border-width":o.element.options.borderWidth+"px","border-color":o.element.options.borderColor,width:e.options.width}),class:vue.normalizeClass(["widget-report-item widget-report-header",{active:o.select.key&&o.select.key==e.key}]),valign:"top",onClick:vue.withModifiers((e=>l.handleSelectHeaderWidget(t)),["stop"]),onMouseover:vue.withModifiers((e=>l.handleMouseoverTH(t)),["stop"]),onMouseout:e=>l.handleMouseoutTH(t),ref_for:!0,ref:`widgetTH_${t}`},[vue.createElementVNode("div",_hoisted_3$f,vue.toDisplayString(e.options.width),1)],46,_hoisted_2$k)))),128))]),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.rows,((n,w)=>(vue.openBlock(),vue.createElementBlock("tr",{key:w},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(n.columns,((n,k)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:w+"-"+k},[n.options.invisible?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("td",{key:0,style:vue.normalizeStyle({"border-style":"solid","border-width":o.element.options.borderWidth+"px","border-color":o.element.options.borderColor,width:n.options.width,height:n.options.height,"text-align":n.options.textAlign,"vertical-align":n.options.verticalAlign}),colspan:n.options.colspan,rowspan:n.options.rowspan,class:vue.normalizeClass(["widget-report-item fm-report-table__td",{active:o.select.key&&o.select.key==n.key,[n.options.customClass]:!!n.options.customClass,selected:i.selectIndex==k&&1==n.options.colspan}]),onClick:vue.withModifiers((e=>l.handleSelectItemWidget(w,k)),["stop"]),valign:"top",onMouseover:vue.withModifiers((e=>l.handleMouseoverTD(w,k)),["stop"]),onMouseout:e=>l.handleMouseoutTD(w,k),ref_for:!0,ref:`widgetTD_${w}_${k}`},[vue.createVNode(v,vue.mergeProps({modelValue:n.list,"onUpdate:modelValue":e=>n.list=e,ref_for:!0},{group:{name:"people",put:l.handlePut},ghostClass:"ghost",animation:200,handle:".drag-widget"},{"no-transition-on-drag":!0,onAdd:e=>l.handleWidgetItemAdd(e,o.element,w,k),onUpdate:l.handleWidgetItemUpdate,onStart:t[10]||(t[10]=e=>l.setDragging(!0)),onEnd:t[11]||(t[11]=e=>l.setDragging(!1)),class:"widget-col-list","item-key":"key",style:{"text-align":n.options.textAlign,"vertical-align":n.options.verticalAlign}}),{item:vue.withCtx((({element:e,index:v})=>["tabs"===e.type?(vue.openBlock(),vue.createBlock(a,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[0]||(t[0]=e=>i.selectWidget=e),index:v,data:n,onSelectChange:e=>l.handleSelectChange(e,n),platform:o.platform,"form-key":o.formKey,subform:o.subform},null,8,["element","select","index","data","onSelectChange","platform","form-key","subform"])):"collapse"===e.type?(vue.openBlock(),vue.createBlock(r,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[1]||(t[1]=e=>i.selectWidget=e),index:v,data:n,onSelectChange:e=>l.handleSelectChange(e,n),platform:o.platform,"form-key":o.formKey,subform:o.subform},null,8,["element","select","index","data","onSelectChange","platform","form-key","subform"])):"table"===e.type?(vue.openBlock(),vue.createBlock(s,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[2]||(t[2]=e=>i.selectWidget=e),index:v,data:n,onSelectChange:e=>l.handleSelectChange(e,n),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"subform"===e.type?(vue.openBlock(),vue.createBlock(d,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[3]||(t[3]=e=>i.selectWidget=e),index:v,data:n,onSelectChange:e=>l.handleSelectChange(e,n),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"card"===e.type?(vue.openBlock(),vue.createBlock(u,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[4]||(t[4]=e=>i.selectWidget=e),index:v,data:n,onSelectChange:e=>l.handleSelectChange(e,n),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"group"===e.type?(vue.openBlock(),vue.createBlock(c,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[5]||(t[5]=e=>i.selectWidget=e),index:v,data:n,onSelectChange:e=>l.handleSelectChange(e,n),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"inline"===e.type?(vue.openBlock(),vue.createBlock(p,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[6]||(t[6]=e=>i.selectWidget=e),index:v,data:n,onSelectChange:e=>l.handleSelectChange(e,n),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"report"===e.type?(vue.openBlock(),vue.createBlock(m,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[7]||(t[7]=e=>i.selectWidget=e),index:v,data:n,onSelectChange:e=>l.handleSelectChange(e,n),platform:o.platform,"form-key":o.formKey,subform:o.subform},null,8,["element","select","index","data","onSelectChange","platform","form-key","subform"])):"grid"!==e.type?(vue.openBlock(),vue.createBlock(h,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[8]||(t[8]=e=>i.selectWidget=e),index:v,data:n,onSelectChange:e=>l.handleSelectChange(e,n),"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","form-key"])):(vue.openBlock(),vue.createBlock(f,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[9]||(t[9]=e=>i.selectWidget=e),index:v,data:n,onSelectChange:e=>l.handleSelectChange(e,n),platform:o.platform,"form-key":o.formKey,subform:o.subform},null,8,["element","select","index","data","onSelectChange","platform","form-key","subform"]))])),_:2},1040,["modelValue","onUpdate:modelValue","onAdd","onUpdate","style"]),o.select.key==n.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_5$e,[vue.createVNode(b,{size:"default",trigger:"click"},{dropdown:vue.withCtx((()=>[vue.createVNode(y,null,{default:vue.withCtx((()=>[vue.createVNode(g,{command:"insertleft",onClick:vue.withModifiers(l.handleInsertLeft,["stop"])},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.tooltip.insertcolumnleft")),1)])),_:1},8,["onClick"]),vue.createVNode(g,{command:"insertright",onClick:vue.withModifiers(l.handleInsertRight,["stop"])},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.tooltip.insertcolumnright")),1)])),_:1},8,["onClick"]),vue.createVNode(g,{command:"insertbefore",onClick:vue.withModifiers(l.handleInserBefore,["stop"])},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.tooltip.insertrowbefore")),1)])),_:1},8,["onClick"]),vue.createVNode(g,{command:"insertafter",onClick:vue.withModifiers(l.handleInserAfter,["stop"])},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.tooltip.insertrowafter")),1)])),_:1},8,["onClick"]),vue.createVNode(g,{command:"right",onClick:vue.withModifiers((e=>l.handleRight(n)),["stop"]),disabled:!l.showRight,divided:""},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.tooltip.mergeright")),1)])),_:2},1032,["onClick","disabled"]),vue.createVNode(g,{command:"bottom",onClick:vue.withModifiers((e=>l.handleBottom(n)),["stop"]),disabled:!l.showBottom},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.tooltip.mergedown")),1)])),_:2},1032,["onClick","disabled"]),vue.createVNode(g,{command:"splitcolumns",onClick:vue.withModifiers(l.handleSplitColumn,["stop"]),divided:"",disabled:!l.showSplitColumn},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.tooltip.splitcolumns")),1)])),_:1},8,["onClick","disabled"]),vue.createVNode(g,{command:"splitrows",onClick:vue.withModifiers(l.handleSplitRow,["stop"]),disabled:!l.showSplitRow},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.tooltip.splitrows")),1)])),_:1},8,["onClick","disabled"]),vue.createVNode(g,{command:"removecolumn",onClick:vue.withModifiers(l.handleRemoveColumn,["stop"]),disabled:!l.showRemoveColumn,divided:""},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.tooltip.deletecolumn")),1)])),_:1},8,["onClick","disabled"]),vue.createVNode(g,{command:"removerow",onClick:vue.withModifiers(l.handleRemoveRow,["stop"]),disabled:!l.showRemoveRow},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.tooltip.deleterow")),1)])),_:1},8,["onClick","disabled"]),vue.createVNode(g,{command:"setcolwidth",onClick:vue.withModifiers(l.handleSetColumnWidth,["stop"]),disabled:1!==n.options.colspan,divided:""},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.tooltip.setcolwidth")),1)])),_:2},1032,["onClick","disabled"])])),_:2},1024)])),default:vue.withCtx((()=>[vue.createElementVNode("span",_hoisted_6$c,[vue.createElementVNode("i",{class:"fm-iconfont icon-biaogeshezhi",title:e.$t("fm.tooltip.cellsetting")},null,8,_hoisted_7$b)])])),_:2},1024)])):vue.createCommentVNode("",!0),vue.createElementVNode("div",_hoisted_8$6,[vue.createElementVNode("span",null,vue.toDisplayString(n.type?this.$t("fm.components.fields."+n.type):""),1)])],46,_hoisted_4$e))],64)))),128))])))),128))],6)]),o.select.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_9$5,[vue.createElementVNode("i",{class:"fm-iconfont icon--charuhang",onClick:t[12]||(t[12]=vue.withModifiers((e=>l.handleAddRow(o.index)),["stop"])),title:e.$t("fm.tooltip.addrow")},null,8,_hoisted_10$4),vue.createElementVNode("i",{class:"fm-iconfont icon--charulie",onClick:t[13]||(t[13]=vue.withModifiers((e=>l.handleAddColumns(o.index)),["stop"])),title:e.$t("fm.tooltip.addcolumn")},null,8,_hoisted_11$4),vue.createElementVNode("i",{class:"fm-iconfont icon-icon_clone",onClick:t[14]||(t[14]=vue.withModifiers((e=>l.handleReportClone(o.index)),["stop"])),title:e.$t("fm.tooltip.clone")},null,8,_hoisted_12$3),vue.createElementVNode("i",{class:"fm-iconfont icon-trash",onClick:t[15]||(t[15]=vue.withModifiers((e=>l.handleWidgetDelete(o.index)),["stop"])),title:e.$t("fm.tooltip.trash")},null,8,_hoisted_13$2)])):vue.createCommentVNode("",!0),o.select.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_14$2,_hoisted_16$1)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"widget-view-model",style:vue.normalizeStyle({color:o.element.options.dataBind?"":"#666"})},[vue.createElementVNode("span",null,vue.toDisplayString(o.element.model),1)],4),vue.createElementVNode("div",_hoisted_17$1,[vue.createElementVNode("span",null,vue.toDisplayString(o.element.type?this.$t("fm.components.fields."+o.element.type):""),1)])],34)}var WidgetReport=_export_sfc(_sfc_main$F,[["render",_sfc_render$D]]),WidgetReport$1=Object.freeze(Object.defineProperty({__proto__:null,default:WidgetReport},Symbol.toStringTag,{value:"Module"}));const _sfc_main$E={name:"widget-sub-form",components:{Draggable:draggableComponent,WidgetFormItem:WidgetFormItem,WidgetInline:WidgetInline,WidgetTable:WidgetTable,WidgetColItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetColItem$1})))),WidgetTabItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetTabItem$1})))),WidgetReport:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetReport$1})))),WidgetCollapse:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetCollapse$1})))),WidgetCard:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetCard$1})))),WidgetGroup:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetGroup$1}))))},props:["element","select","index","data","platform","formKey"],emits:["select-change","update:select"],inject:["setDragging","getDragging"],data(){return{selectWidget:this.select||{}}},methods:{handleMouseover(e){!this.getDragging()&&addClass$1(this.$refs.widgetSubform,"is-hover")},handleMouseout(e){removeClass$1(this.$refs.widgetSubform,"is-hover")},handlePut:(e,t,o)=>!(o.className.split(" ").indexOf("widget-dialog")>=0||o.className.split(" ").indexOf("dialog-put")>=0||o.children[0].className.split(" ").indexOf("dialog-put")>=0),handleSelectWidget(e){this.$emit("update:select",this.data.list[e])},handleSelectChange(e,t){setTimeout((()=>{e>=0?this.$emit("update:select",this.element.list[e]):this.$emit("update:select",this.data.list[this.index])}))},handleWidgetClone(e){let t=_.cloneDeep(this.data.list[e]);this.data.list.splice(e+1,0,CloneLayout(t)),this.$nextTick((()=>{this.$emit("update:select",this.data.list[e+1]),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}))},handleWidgetDelete(e){1==this.data.list.length?this.$emit("select-change",-1):this.data.list.length-1==e?this.$emit("select-change",e-1):this.$emit("select-change",e),this.data.list.splice(e,1),setTimeout((()=>{EventBus.$emit("on-history-add-"+this.formKey)}),20)},handleWidgetSubFormAdd(e,t){const o=e.newIndex,n=Math.random().toString(36).slice(-8);fixDraggbleList(t.list,o),t.list[o]=_.cloneDeep(t.list[o]),t.list[o]={...t.list[o],options:{...t.list[o].options,remoteFunc:t.list[o].options.remoteFunc||"func_"+n,remoteOption:t.list[o].options.remoteOption||"option_"+n,tableColumn:!1,subform:!0},key:t.list[o].key?t.list[o].key:n,model:t.list[o].model?t.list[o].model:t.list[o].type+"_"+n,rules:t.list[o].rules?[...t.list[o].rules]:[]},"report"==t.list[o].type&&(t.list[o].rows=generateKeyToTD(t.list[o].rows),t.list[o].headerRow=generateKeyToTH(t.list[o].headerRow)),"grid"==t.list[o].type&&(t.list[o].columns=generateKeyToCol(t.list[o].columns)),this.$nextTick((()=>{this.selectWidget=t.list[o],EventBus.$emit("on-history-add-"+this.formKey)}))},handleWidgetSubFormUpdate(){EventBus.$emit("on-history-add-"+this.formKey)}},watch:{select(e){this.selectWidget=e},selectWidget(e){this.$emit("update:select",e)}}},_hoisted_1$m=["innerHTML"],_hoisted_2$j={class:"widget-subform-wrapper"},_hoisted_3$e={key:0,class:"widget-view-action widget-subform-action"},_hoisted_4$d=["title"],_hoisted_5$d=["title"],_hoisted_6$b={key:1,class:"widget-view-drag widget-subform-drag"},_hoisted_7$a=vue.createElementVNode("i",{class:"fm-iconfont icon-drag drag-widget"},null,-1),_hoisted_8$5=[_hoisted_7$a],_hoisted_9$4={class:"widget-view-type"};function _sfc_render$C(e,t,o,n,i,l){const a=vue.resolveComponent("widget-tab-item"),r=vue.resolveComponent("widget-collapse"),s=vue.resolveComponent("widget-card"),d=vue.resolveComponent("widget-group"),u=vue.resolveComponent("widget-inline"),c=vue.resolveComponent("widget-report"),p=vue.resolveComponent("widget-sub-form",!0),m=vue.resolveComponent("widget-table"),h=vue.resolveComponent("widget-form-item"),f=vue.resolveComponent("widget-col-item"),v=vue.resolveComponent("draggable"),g=vue.resolveComponent("el-form-item");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["widget-subform widget-view",{active:o.select.key&&o.select.key==o.element.key,is_hidden:o.element.options.hidden}]),onClick:t[16]||(t[16]=vue.withModifiers((e=>l.handleSelectWidget(o.index)),["stop"])),onMouseover:t[17]||(t[17]=vue.withModifiers(((...e)=>l.handleMouseover&&l.handleMouseover(...e)),["stop"])),onMouseout:t[18]||(t[18]=(...e)=>l.handleMouseout&&l.handleMouseout(...e)),ref:"widgetSubform"},[vue.createVNode(g,{label:o.element.options.hideLabel?"":o.element.name,"label-width":o.element.options.hideLabel?"0px":o.element.options.isLabelWidth?o.element.options.labelWidth+"px":"",class:vue.normalizeClass({[o.element.options&&o.element.options.customClass]:!!o.element.options.customClass,"fm-label-wrap":o.element.options.labelWrap})},{default:vue.withCtx((()=>[o.element.options.tip?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"fm-item-tooltip",innerHTML:o.element.options.tip.replace(/\n/g,"<br/>")},null,8,_hoisted_1$m)):vue.createCommentVNode("",!0),vue.createElementVNode("div",_hoisted_2$j,[vue.createVNode(v,vue.mergeProps({modelValue:o.element.list,"onUpdate:modelValue":t[10]||(t[10]=e=>o.element.list=e)},{group:{name:"people",put:l.handlePut},ghostClass:"ghost",animation:200,handle:".drag-widget"},{"no-transition-on-drag":!0,onAdd:t[11]||(t[11]=e=>l.handleWidgetSubFormAdd(e,o.element)),onUpdate:l.handleWidgetSubFormUpdate,onStart:t[12]||(t[12]=e=>l.setDragging(!0)),onEnd:t[13]||(t[13]=e=>l.setDragging(!1)),class:["widget-col-list",{[o.element.options&&o.element.options.customClass]:!!o.element.options.customClass}],"item-key":"key"}),{item:vue.withCtx((({element:e,index:n})=>["tabs"===e.type?(vue.openBlock(),vue.createBlock(a,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[0]||(t[0]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey,subform:!0},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"collapse"===e.type?(vue.openBlock(),vue.createBlock(r,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[1]||(t[1]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey,subform:!0},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"card"===e.type?(vue.openBlock(),vue.createBlock(s,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[2]||(t[2]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey,subform:!0},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"group"===e.type?(vue.openBlock(),vue.createBlock(d,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[3]||(t[3]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey,subform:!0},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"inline"===e.type?(vue.openBlock(),vue.createBlock(u,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[4]||(t[4]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey,subform:!0},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"report"===e.type?(vue.openBlock(),vue.createBlock(c,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[5]||(t[5]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey,subform:!0},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"subform"===e.type?(vue.openBlock(),vue.createBlock(p,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[6]||(t[6]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey,subform:!0},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"table"===e.type?(vue.openBlock(),vue.createBlock(m,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[7]||(t[7]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey,subform:!0},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"grid"!==e.type?(vue.openBlock(),vue.createBlock(h,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[8]||(t[8]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","form-key"])):(vue.openBlock(),vue.createBlock(f,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[9]||(t[9]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey,subform:!0},null,8,["element","select","index","data","onSelectChange","platform","form-key"]))])),_:1},16,["modelValue","onUpdate","class"])])])),_:1},8,["label","label-width","class"]),o.select.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_3$e,[vue.createElementVNode("i",{class:"fm-iconfont icon-icon_clone",onClick:t[14]||(t[14]=vue.withModifiers((e=>l.handleWidgetClone(o.index)),["stop"])),title:e.$t("fm.tooltip.clone")},null,8,_hoisted_4$d),vue.createElementVNode("i",{class:"fm-iconfont icon-trash",onClick:t[15]||(t[15]=vue.withModifiers((e=>l.handleWidgetDelete(o.index)),["stop"])),title:e.$t("fm.tooltip.trash")},null,8,_hoisted_5$d)])):vue.createCommentVNode("",!0),o.select.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_6$b,_hoisted_8$5)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"widget-view-model",style:vue.normalizeStyle({color:o.element.options.dataBind?"":"#666"})},[vue.createElementVNode("span",null,vue.toDisplayString(o.element.model),1)],4),vue.createElementVNode("div",_hoisted_9$4,[vue.createElementVNode("span",null,vue.toDisplayString(o.element.type?this.$t("fm.components.fields."+o.element.type):""),1)])],34)}var WidgetSubForm=_export_sfc(_sfc_main$E,[["render",_sfc_render$C]]),WidgetSubForm$1=Object.freeze(Object.defineProperty({__proto__:null,default:WidgetSubForm},Symbol.toStringTag,{value:"Module"}));const _sfc_main$D={name:"widget-collapse",components:{WidgetFormItem:WidgetFormItem,WidgetTable:WidgetTable,WidgetInline:WidgetInline,Draggable:draggableComponent,WidgetColItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetColItem$1})))),WidgetReport:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetReport$1})))),WidgetSubForm:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetSubForm$1})))),WidgetTabItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetTabItem$1})))),WidgetCard:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetCard$1})))),WidgetGroup:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetGroup$1}))))},props:["element","select","index","data","platform","formKey","subform"],emits:["select-change","update:select"],inject:["getDragging","setDragging"],data(){return{tabActive:this.element.tabs.map((e=>e.name)),selectWidget:this.select||{}}},methods:{handleMouseover(e){!this.getDragging()&&addClass$1(this.$refs.widgetCollapse,"is-hover")},handleMouseout(e){removeClass$1(this.$refs.widgetCollapse,"is-hover")},handlePut:(e,t,o)=>!(o.className.split(" ").indexOf("widget-dialog")>=0||o.className.split(" ").indexOf("dialog-put")>=0||o.children[0].className.split(" ").indexOf("dialog-put")>=0),handleSelectWidget(e){this.selectWidget=this.data.list[e]},handleWidgetDelete(e){1==this.data.list.length?this.$emit("select-change",-1):this.data.list.length-1==e?this.$emit("select-change",e-1):this.$emit("select-change",e),this.data.list.splice(e,1),setTimeout((()=>{EventBus.$emit("on-history-add-"+this.formKey)}),20)},handleTabClone(e){let t=_.cloneDeep(this.data.list[e]);this.data.list.splice(e+1,0,CloneLayout(t)),this.$nextTick((()=>{this.selectWidget=this.data.list[e+1],this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}))},handleWidgetTabUpdate(e){this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleWidgetTabAdd(e,t,o){const n=e.newIndex,i=Math.random().toString(36).slice(-8);fixDraggbleList(t.tabs[o].list,n),t.tabs[o].list[n]=_.cloneDeep(t.tabs[o].list[n]),t.tabs[o].list[n]={...t.tabs[o].list[n],options:{...t.tabs[o].list[n].options,remoteFunc:t.tabs[o].list[n].options.remoteFunc||"func_"+i,remoteOption:t.tabs[o].list[n].options.remoteOption||"option_"+i,tableColumn:!1,subform:!!this.subform},key:t.tabs[o].list[n].key?t.tabs[o].list[n].key:i,model:t.tabs[o].list[n].model?t.tabs[o].list[n].model:t.tabs[o].list[n].type+"_"+i,rules:t.tabs[o].list[n].rules?[...t.tabs[o].list[n].rules]:[]},"report"==t.tabs[o].list[n].type&&(t.tabs[o].list[n].rows=generateKeyToTD(t.tabs[o].list[n].rows),t.tabs[o].list[n].headerRow=generateKeyToTH(t.tabs[o].list[n].headerRow)),"grid"==t.tabs[o].list[n].type&&(t.tabs[o].list[n].columns=generateKeyToCol(t.tabs[o].list[n].columns)),setTimeout((()=>{this.selectWidget=t.tabs[o].list[n],EventBus.$emit("on-history-add-"+this.formKey)}),50)},handleSelectChange(e,t){setTimeout((()=>{this.selectWidget=e>=0?t.list[e]:{}}))}},watch:{select(e){this.selectWidget=e},selectWidget(e){this.$emit("update:select",e)}}},_hoisted_1$l={key:0,class:"widget-view-action widget-col-action"},_hoisted_2$i=["title"],_hoisted_3$d=["title"],_hoisted_4$c={key:1,class:"widget-view-drag widget-col-drag"},_hoisted_5$c=vue.createElementVNode("i",{class:"fm-iconfont icon-drag drag-widget"},null,-1),_hoisted_6$a=[_hoisted_5$c],_hoisted_7$9={class:"widget-view-type"};function _sfc_render$B(e,t,o,n,i,l){const a=vue.resolveComponent("widget-tab-item"),r=vue.resolveComponent("widget-collapse",!0),s=vue.resolveComponent("widget-table"),d=vue.resolveComponent("widget-sub-form"),u=vue.resolveComponent("widget-card"),c=vue.resolveComponent("widget-group"),p=vue.resolveComponent("widget-inline"),m=vue.resolveComponent("widget-report"),h=vue.resolveComponent("widget-col-item"),f=vue.resolveComponent("widget-form-item"),v=vue.resolveComponent("draggable"),g=vue.resolveComponent("el-collapse-item"),y=vue.resolveComponent("el-collapse");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["widget-collapse widget-view",{active:i.selectWidget.key&&i.selectWidget.key==o.element.key,is_hidden:o.element.options.hidden}]),onClick:t[15]||(t[15]=vue.withModifiers((e=>l.handleSelectWidget(o.index)),["stop"])),onMouseover:t[16]||(t[16]=vue.withModifiers(((...e)=>l.handleMouseover&&l.handleMouseover(...e)),["stop"])),onMouseout:t[17]||(t[17]=(...e)=>l.handleMouseout&&l.handleMouseout(...e)),ref:"widgetCollapse"},[vue.createVNode(y,{modelValue:i.tabActive,"onUpdate:modelValue":t[12]||(t[12]=e=>i.tabActive=e),accordion:o.element.options.accordion,class:vue.normalizeClass({[o.element.options&&o.element.options.customClass]:!!o.element.options.customClass})},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.tabs,((e,n)=>(vue.openBlock(),vue.createBlock(g,{key:e.name,title:e.title,name:e.name},{default:vue.withCtx((()=>[vue.createVNode(v,vue.mergeProps({modelValue:e.list,"onUpdate:modelValue":t=>e.list=t,ref_for:!0},{group:{name:"people",put:l.handlePut},ghostClass:"ghost",animation:200,handle:".drag-widget"},{"no-transition-on-drag":!0,onAdd:e=>l.handleWidgetTabAdd(e,o.element,n),onUpdate:l.handleWidgetTabUpdate,onStart:t[10]||(t[10]=e=>l.setDragging(!0)),onEnd:t[11]||(t[11]=e=>l.setDragging(!1)),class:"widget-col-list","item-key":"key"}),{item:vue.withCtx((({element:n,index:v})=>["tabs"===n.type?(vue.openBlock(),vue.createBlock(a,{key:n.key,element:n,select:i.selectWidget,"onUpdate:select":t[0]||(t[0]=e=>i.selectWidget=e),index:v,data:e,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey,subform:o.subform},null,8,["element","select","index","data","onSelectChange","platform","form-key","subform"])):"collapse"===n.type?(vue.openBlock(),vue.createBlock(r,{key:n.key,element:n,select:i.selectWidget,"onUpdate:select":t[1]||(t[1]=e=>i.selectWidget=e),index:v,data:e,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey,subform:o.subform},null,8,["element","select","index","data","onSelectChange","platform","form-key","subform"])):"table"===n.type?(vue.openBlock(),vue.createBlock(s,{key:n.key,element:n,select:i.selectWidget,"onUpdate:select":t[2]||(t[2]=e=>i.selectWidget=e),index:v,data:e,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"subform"===n.type?(vue.openBlock(),vue.createBlock(d,{key:n.key,element:n,select:i.selectWidget,"onUpdate:select":t[3]||(t[3]=e=>i.selectWidget=e),index:v,data:e,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"card"===n.type?(vue.openBlock(),vue.createBlock(u,{key:n.key,element:n,select:i.selectWidget,"onUpdate:select":t[4]||(t[4]=e=>i.selectWidget=e),index:v,data:e,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"group"===n.type?(vue.openBlock(),vue.createBlock(c,{key:n.key,element:n,select:i.selectWidget,"onUpdate:select":t[5]||(t[5]=e=>i.selectWidget=e),index:v,data:e,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"inline"===n.type?(vue.openBlock(),vue.createBlock(p,{key:n.key,element:n,select:i.selectWidget,"onUpdate:select":t[6]||(t[6]=e=>i.selectWidget=e),index:v,data:e,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"report"===n.type?(vue.openBlock(),vue.createBlock(m,{key:n.key,element:n,select:i.selectWidget,"onUpdate:select":t[7]||(t[7]=e=>i.selectWidget=e),index:v,data:e,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey,subform:o.subform},null,8,["element","select","index","data","onSelectChange","platform","form-key","subform"])):"grid"===n.type?(vue.openBlock(),vue.createBlock(h,{key:n.key,element:n,select:i.selectWidget,"onUpdate:select":t[8]||(t[8]=e=>i.selectWidget=e),index:v,data:e,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey,subform:o.subform},null,8,["element","select","index","data","onSelectChange","platform","form-key","subform"])):(vue.openBlock(),vue.createBlock(f,{key:n.key,element:n,select:i.selectWidget,"onUpdate:select":t[9]||(t[9]=e=>i.selectWidget=e),index:v,data:e,onSelectChange:t=>l.handleSelectChange(t,e),"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","form-key"]))])),_:2},1040,["modelValue","onUpdate:modelValue","onAdd","onUpdate"])])),_:2},1032,["title","name"])))),128))])),_:1},8,["modelValue","accordion","class"]),i.selectWidget.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$l,[vue.createElementVNode("i",{class:"fm-iconfont icon-icon_clone",onClick:t[13]||(t[13]=vue.withModifiers((e=>l.handleTabClone(o.index)),["stop"])),title:e.$t("fm.tooltip.clone")},null,8,_hoisted_2$i),vue.createElementVNode("i",{class:"fm-iconfont icon-trash",onClick:t[14]||(t[14]=vue.withModifiers((e=>l.handleWidgetDelete(o.index)),["stop"])),title:e.$t("fm.tooltip.trash")},null,8,_hoisted_3$d)])):vue.createCommentVNode("",!0),i.selectWidget.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_4$c,_hoisted_6$a)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"widget-view-model",style:vue.normalizeStyle({color:o.element.options.dataBind?"":"#666"})},[vue.createElementVNode("span",null,vue.toDisplayString(o.element.model),1)],4),vue.createElementVNode("div",_hoisted_7$9,[vue.createElementVNode("span",null,vue.toDisplayString(o.element.type?this.$t("fm.components.fields."+o.element.type):""),1)])],34)}var WidgetCollapse=_export_sfc(_sfc_main$D,[["render",_sfc_render$B]]),WidgetCollapse$1=Object.freeze(Object.defineProperty({__proto__:null,default:WidgetCollapse},Symbol.toStringTag,{value:"Module"}));const _sfc_main$C={name:"widget-dialog",components:{Draggable:draggableComponent,WidgetFormItem:WidgetFormItem,WidgetInline:WidgetInline,WidgetColItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetColItem$1})))),WidgetTabItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetTabItem$1})))),WidgetReport:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetReport$1})))),WidgetCollapse:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetCollapse$1})))),WidgetTable:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetTable$1})))),WidgetSubForm:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetSubForm$1})))),WidgetCard:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetCard$1})))),WidgetGroup:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetGroup$1}))))},props:["element","select","index","data","platform","formKey"],emits:["select-change","update:select"],inject:["setDragging","getDragging"],data(){return{selectWidget:this.select||{},visible:!0}},methods:{handleMouseover(e){!this.getDragging()&&addClass$1(this.$refs.widgetDialog,"is-hover")},handleMouseout(e){removeClass$1(this.$refs.widgetDialog,"is-hover")},handlePut:(e,t,o)=>!(o.className.split(" ").indexOf("widget-dialog")>=0||o.className.split(" ").indexOf("dialog-put")>=0||o.children[0].className.split(" ").indexOf("dialog-put")>=0),handleSelectWidget(e){this.$emit("update:select",this.data.list[e])},handleSelectChange(e,t){setTimeout((()=>{e>=0?this.$emit("update:select",this.element.list[e]):this.$emit("update:select",this.data.list[this.index])}))},handleWidgetClone(e){let t=_.cloneDeep(this.data.list[e]);this.data.list.splice(e+1,0,CloneLayout(t)),this.$nextTick((()=>{this.$emit("update:select",this.data.list[e+1]),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}))},handleWidgetDelete(e){1==this.data.list.length?this.$emit("select-change",-1):this.data.list.length-1==e?this.$emit("select-change",e-1):this.$emit("select-change",e),this.data.list.splice(e,1),setTimeout((()=>{EventBus.$emit("on-history-add-"+this.formKey)}),20)},handleWidgetDialogAdd(e,t){const o=e.newIndex,n=Math.random().toString(36).slice(-8);fixDraggbleList(t.list,o),t.list[o]=_.cloneDeep(t.list[o]),t.list[o]={...t.list[o],options:{...t.list[o].options,remoteFunc:t.list[o].options.remoteFunc||"func_"+n,remoteOption:t.list[o].options.remoteOption||"option_"+n,tableColumn:!1,subform:!1},key:t.list[o].key?t.list[o].key:n,model:t.list[o].model?t.list[o].model:t.list[o].type+"_"+n,rules:t.list[o].rules?[...t.list[o].rules]:[]},"report"==t.list[o].type&&(t.list[o].rows=generateKeyToTD(t.list[o].rows),t.list[o].headerRow=generateKeyToTH(t.list[o].headerRow)),"grid"==t.list[o].type&&(t.list[o].columns=generateKeyToCol(t.list[o].columns)),this.$nextTick((()=>{this.selectWidget=t.list[o],EventBus.$emit("on-history-add-"+this.formKey)}))},handleWidgetDialogUpdate(){EventBus.$emit("on-history-add-"+this.formKey)}},watch:{select(e){this.selectWidget=e},selectWidget(e){this.$emit("update:select",e)}}},_hoisted_1$k={class:"el-dialog__header"},_hoisted_2$h={class:"el-dialog__title"},_hoisted_3$c={key:0,"aria-label":"Close this dialog",class:"el-dialog__headerbtn",type:"button"},_hoisted_4$b=vue.createElementVNode("i",{class:"el-icon el-dialog__close"},[vue.createElementVNode("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[vue.createElementVNode("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})])],-1),_hoisted_5$b=[_hoisted_4$b],_hoisted_6$9={class:"el-dialog__body"},_hoisted_7$8={key:0,class:"el-dialog__footer"},_hoisted_8$4={key:0,class:"widget-view-action widget-subform-action"},_hoisted_9$3=["title"],_hoisted_10$3=["title"],_hoisted_11$3={key:1,class:"widget-view-drag widget-subform-drag"},_hoisted_12$2=vue.createElementVNode("i",{class:"fm-iconfont icon-drag drag-widget"},null,-1),_hoisted_13$1=[_hoisted_12$2],_hoisted_14$1={class:"widget-view-type"};function _sfc_render$A(e,t,o,n,i,l){const a=vue.resolveComponent("widget-tab-item"),r=vue.resolveComponent("widget-collapse"),s=vue.resolveComponent("widget-table"),d=vue.resolveComponent("widget-sub-form"),u=vue.resolveComponent("widget-card"),c=vue.resolveComponent("widget-group"),p=vue.resolveComponent("widget-inline"),m=vue.resolveComponent("widget-report"),h=vue.resolveComponent("widget-form-item"),f=vue.resolveComponent("widget-col-item"),v=vue.resolveComponent("draggable"),g=vue.resolveComponent("el-button");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["widget-dialog widget-view",{active:o.select.key&&o.select.key==o.element.key,is_hidden:!o.element.options.visible}]),onClick:t[16]||(t[16]=vue.withModifiers((e=>l.handleSelectWidget(o.index)),["stop"])),onMouseover:t[17]||(t[17]=vue.withModifiers(((...e)=>l.handleMouseover&&l.handleMouseover(...e)),["stop"])),onMouseout:t[18]||(t[18]=(...e)=>l.handleMouseout&&l.handleMouseout(...e)),ref:"widgetDialog"},[vue.createElementVNode("div",{class:vue.normalizeClass(["el-dialog",{"el-dialog--center":o.element.options.center}]),style:vue.normalizeStyle({"--el-dialog-width":o.element.options.width?o.element.options.width:"100%","--el-dialog-margin-top":o.element.options.top})},[vue.createElementVNode("div",_hoisted_1$k,[vue.createElementVNode("span",_hoisted_2$h,vue.toDisplayString(o.element.options.title),1),o.element.options.showClose?(vue.openBlock(),vue.createElementBlock("button",_hoisted_3$c,_hoisted_5$b)):vue.createCommentVNode("",!0)]),vue.createElementVNode("div",_hoisted_6$9,[vue.createVNode(v,vue.mergeProps({modelValue:o.element.list,"onUpdate:modelValue":t[10]||(t[10]=e=>o.element.list=e)},{group:{name:"people",put:l.handlePut},ghostClass:"ghost",animation:200,handle:".drag-widget"},{"no-transition-on-drag":!0,onAdd:t[11]||(t[11]=e=>l.handleWidgetDialogAdd(e,o.element)),onUpdate:l.handleWidgetDialogUpdate,onStart:t[12]||(t[12]=e=>l.setDragging(!0)),onEnd:t[13]||(t[13]=e=>l.setDragging(!1)),class:["widget-col-list",{[o.element.options&&o.element.options.customClass]:!!o.element.options.customClass}],"item-key":"key"}),{item:vue.withCtx((({element:e,index:n})=>["tabs"===e.type?(vue.openBlock(),vue.createBlock(a,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[0]||(t[0]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"collapse"===e.type?(vue.openBlock(),vue.createBlock(r,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[1]||(t[1]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"table"===e.type?(vue.openBlock(),vue.createBlock(s,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[2]||(t[2]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"subform"===e.type?(vue.openBlock(),vue.createBlock(d,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[3]||(t[3]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"card"===e.type?(vue.openBlock(),vue.createBlock(u,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[4]||(t[4]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"group"===e.type?(vue.openBlock(),vue.createBlock(c,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[5]||(t[5]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"inline"===e.type?(vue.openBlock(),vue.createBlock(p,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[6]||(t[6]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"report"===e.type?(vue.openBlock(),vue.createBlock(m,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[7]||(t[7]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"grid"!==e.type?(vue.openBlock(),vue.createBlock(h,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[8]||(t[8]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","form-key"])):(vue.openBlock(),vue.createBlock(f,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[9]||(t[9]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"]))])),_:1},16,["modelValue","onUpdate","class"])]),o.element.options.showCancel||o.element.options.showOk?(vue.openBlock(),vue.createElementBlock("div",_hoisted_7$8,[vue.createElementVNode("div",null,[o.element.options.showCancel?(vue.openBlock(),vue.createBlock(g,{key:0},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.element.options.cancelText),1)])),_:1})):vue.createCommentVNode("",!0),o.element.options.showOk?(vue.openBlock(),vue.createBlock(g,{key:1,type:"primary",loading:o.element.options.confirmLoading},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.element.options.okText),1)])),_:1},8,["loading"])):vue.createCommentVNode("",!0)])])):vue.createCommentVNode("",!0)],6),o.select.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_8$4,[vue.createElementVNode("i",{class:"fm-iconfont icon-icon_clone",onClick:t[14]||(t[14]=vue.withModifiers((e=>l.handleWidgetClone(o.index)),["stop"])),title:e.$t("fm.tooltip.clone")},null,8,_hoisted_9$3),vue.createElementVNode("i",{class:"fm-iconfont icon-trash",onClick:t[15]||(t[15]=vue.withModifiers((e=>l.handleWidgetDelete(o.index)),["stop"])),title:e.$t("fm.tooltip.trash")},null,8,_hoisted_10$3)])):vue.createCommentVNode("",!0),o.select.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_11$3,_hoisted_13$1)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"widget-view-model",style:vue.normalizeStyle({color:o.element.options.dataBind?"":"#666"})},[vue.createElementVNode("span",null,vue.toDisplayString(o.element.model),1)],4),vue.createElementVNode("div",_hoisted_14$1,[vue.createElementVNode("span",null,vue.toDisplayString(o.element.type?this.$t("fm.components.fields."+o.element.type):""),1)])],34)}var WidgetDialog=_export_sfc(_sfc_main$C,[["render",_sfc_render$A]]),WidgetCard_vue_vue_type_style_index_0_lang="";const __default__$3={name:"widget-card",components:{Draggable:draggableComponent,WidgetFormItem:WidgetFormItem,WidgetInline:WidgetInline,WidgetColItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetColItem$1})))),WidgetTabItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetTabItem$1})))),WidgetReport:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetReport$1})))),WidgetCollapse:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetCollapse$1})))),WidgetTable:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetTable$1})))),WidgetSubForm:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetSubForm$1})))),WidgetGroup:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetGroup$1}))))},props:["element","select","index","data","platform","formKey","subform"],emits:["select-change","update:select"],inject:["getDragging","setDragging"],data(){return{selectWidget:this.select||{}}},computed:{padding(){return this.element.options.padding||"20px"}},methods:{handleMouseover(e){!this.getDragging()&&addClass$1(this.$refs.widgetCard,"is-hover")},handleMouseout(e){removeClass$1(this.$refs.widgetCard,"is-hover")},handlePut:(e,t,o)=>!(o.className.split(" ").indexOf("widget-dialog")>=0||o.className.split(" ").indexOf("dialog-put")>=0||o.children[0].className.split(" ").indexOf("dialog-put")>=0),handleSelectWidget(e){this.$emit("update:select",this.data.list[e])},handleSelectChange(e,t){setTimeout((()=>{e>=0?this.$emit("update:select",this.element.list[e]):this.$emit("update:select",this.data.list[this.index])}))},handleWidgetClone(e){let t=_.cloneDeep(this.data.list[e]);this.data.list.splice(e+1,0,CloneLayout(t)),this.$nextTick((()=>{this.$emit("update:select",this.data.list[e+1]),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}))},handleWidgetDelete(e){1==this.data.list.length?this.$emit("select-change",-1):this.data.list.length-1==e?this.$emit("select-change",e-1):this.$emit("select-change",e),this.data.list.splice(e,1),setTimeout((()=>{EventBus.$emit("on-history-add-"+this.formKey)}),20)},handleWidgetCardAdd(e,t){const o=e.newIndex,n=Math.random().toString(36).slice(-8);fixDraggbleList(t.list,o),t.list[o]=_.cloneDeep(t.list[o]),t.list[o]={...t.list[o],options:{...t.list[o].options,remoteFunc:t.list[o].options.remoteFunc||"func_"+n,remoteOption:t.list[o].options.remoteOption||"option_"+n,tableColumn:!1,subform:!1},key:t.list[o].key?t.list[o].key:n,model:t.list[o].model?t.list[o].model:t.list[o].type+"_"+n,rules:t.list[o].rules?[...t.list[o].rules]:[]},"report"==t.list[o].type&&(t.list[o].rows=generateKeyToTD(t.list[o].rows),t.list[o].headerRow=generateKeyToTH(t.list[o].headerRow)),"grid"==t.list[o].type&&(t.list[o].columns=generateKeyToCol(t.list[o].columns)),this.$nextTick((()=>{this.selectWidget=t.list[o],EventBus.$emit("on-history-add-"+this.formKey)}))},handleWidgetCardUpdate(){EventBus.$emit("on-history-add-"+this.formKey)}},watch:{select(e){this.selectWidget=e},selectWidget(e){this.$emit("update:select",e)}}},__injectCSSVars__$3=()=>{vue.useCssVars((e=>({"55c19b87":e.padding})))},__setup__$3=__default__$3.setup;__default__$3.setup=__setup__$3?(e,t)=>(__injectCSSVars__$3(),__setup__$3(e,t)):__injectCSSVars__$3;const _sfc_main$B=__default__$3,_hoisted_1$j={key:0,class:"widget-view-action widget-subform-action"},_hoisted_2$g=["title"],_hoisted_3$b=["title"],_hoisted_4$a={key:1,class:"widget-view-drag widget-subform-drag"},_hoisted_5$a=vue.createElementVNode("i",{class:"fm-iconfont icon-drag drag-widget"},null,-1),_hoisted_6$8=[_hoisted_5$a],_hoisted_7$7={class:"widget-view-type"};function _sfc_render$z(e,t,o,n,i,l){var a,r;const s=vue.resolveComponent("widget-tab-item"),d=vue.resolveComponent("widget-collapse"),u=vue.resolveComponent("widget-table"),c=vue.resolveComponent("widget-sub-form"),p=vue.resolveComponent("widget-card",!0),m=vue.resolveComponent("widget-inline"),h=vue.resolveComponent("widget-report"),f=vue.resolveComponent("widget-group"),v=vue.resolveComponent("widget-form-item"),g=vue.resolveComponent("widget-col-item"),y=vue.resolveComponent("draggable"),b=vue.resolveComponent("el-card");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["widget-card widget-view",{active:o.select.key&&o.select.key==o.element.key,is_hidden:o.element.options.hidden}]),onClick:t[16]||(t[16]=vue.withModifiers((e=>l.handleSelectWidget(o.index)),["stop"])),ref:"widgetCard",onMouseover:t[17]||(t[17]=vue.withModifiers(((...e)=>l.handleMouseover&&l.handleMouseover(...e)),["stop"])),onMouseout:t[18]||(t[18]=(...e)=>l.handleMouseout&&l.handleMouseout(...e))},[vue.createVNode(b,{shadow:o.element.options.shadow,"body-style":{padding:o.element.options.padding},style:vue.normalizeStyle({width:o.element.options.width,"border-width":o.element.options.bordered?"1px":"0px"}),class:vue.normalizeClass({[null==(a=o.element.options)?void 0:a.customClass]:!!(null==(r=o.element.options)?void 0:r.customClass)})},vue.createSlots({default:vue.withCtx((()=>[vue.createVNode(y,vue.mergeProps({modelValue:o.element.list,"onUpdate:modelValue":t[10]||(t[10]=e=>o.element.list=e)},{group:{name:"people",put:l.handlePut},ghostClass:"ghost",animation:200,handle:".drag-widget"},{"no-transition-on-drag":!0,onAdd:t[11]||(t[11]=e=>l.handleWidgetCardAdd(e,o.element)),onUpdate:l.handleWidgetCardUpdate,onStart:t[12]||(t[12]=e=>l.setDragging(!0)),onEnd:t[13]||(t[13]=e=>l.setDragging(!1)),class:["widget-col-list",{[o.element.options&&o.element.options.customClass]:!!o.element.options.customClass}],"item-key":"key"}),{item:vue.withCtx((({element:e,index:n})=>["tabs"===e.type?(vue.openBlock(),vue.createBlock(s,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[0]||(t[0]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"collapse"===e.type?(vue.openBlock(),vue.createBlock(d,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[1]||(t[1]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"table"===e.type?(vue.openBlock(),vue.createBlock(u,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[2]||(t[2]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"subform"===e.type?(vue.openBlock(),vue.createBlock(c,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[3]||(t[3]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"card"===e.type?(vue.openBlock(),vue.createBlock(p,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[4]||(t[4]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"inline"===e.type?(vue.openBlock(),vue.createBlock(m,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[5]||(t[5]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"report"===e.type?(vue.openBlock(),vue.createBlock(h,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[6]||(t[6]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"group"===e.type?(vue.openBlock(),vue.createBlock(f,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[7]||(t[7]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"grid"!==e.type?(vue.openBlock(),vue.createBlock(v,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[8]||(t[8]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","form-key"])):(vue.openBlock(),vue.createBlock(g,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[9]||(t[9]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"]))])),_:1},16,["modelValue","onUpdate","class"])])),_:2},[o.element.options.showHeader?{name:"header",fn:vue.withCtx((()=>[vue.createElementVNode("div",null,[vue.createElementVNode("span",null,vue.toDisplayString(o.element.options.title),1)])])),key:"0"}:void 0]),1032,["shadow","body-style","style","class"]),o.select.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$j,[vue.createElementVNode("i",{class:"fm-iconfont icon-icon_clone",onClick:t[14]||(t[14]=vue.withModifiers((e=>l.handleWidgetClone(o.index)),["stop"])),title:e.$t("fm.tooltip.clone")},null,8,_hoisted_2$g),vue.createElementVNode("i",{class:"fm-iconfont icon-trash",onClick:t[15]||(t[15]=vue.withModifiers((e=>l.handleWidgetDelete(o.index)),["stop"])),title:e.$t("fm.tooltip.trash")},null,8,_hoisted_3$b)])):vue.createCommentVNode("",!0),o.select.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_4$a,_hoisted_6$8)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"widget-view-model",style:vue.normalizeStyle({color:o.element.options.dataBind?"":"#666"})},[vue.createElementVNode("span",null,vue.toDisplayString(o.element.model),1)],4),vue.createElementVNode("div",_hoisted_7$7,[vue.createElementVNode("span",null,vue.toDisplayString(o.element.type?this.$t("fm.components.fields."+o.element.type):""),1)])],34)}var WidgetCard=_export_sfc(_sfc_main$B,[["render",_sfc_render$z]]),WidgetCard$1=Object.freeze(Object.defineProperty({__proto__:null,default:WidgetCard},Symbol.toStringTag,{value:"Module"}));const _sfc_main$A={name:"widget-group",components:{Draggable:draggableComponent,WidgetFormItem:WidgetFormItem,WidgetInline:WidgetInline,WidgetColItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetColItem$1})))),WidgetTabItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetTabItem$1})))),WidgetReport:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetReport$1})))),WidgetCollapse:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetCollapse$1})))),WidgetTable:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetTable$1})))),WidgetSubForm:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetSubForm$1})))),WidgetCard:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return WidgetCard$1}))))},props:["element","select","index","data","platform","formKey","subform"],emits:["select-change","update:select"],inject:["getDragging","setDragging"],data(){return{selectWidget:this.select||{}}},methods:{handleMouseover(e){!this.getDragging()&&addClass$1(this.$refs.widgetGroup,"is-hover")},handleMouseout(e){removeClass$1(this.$refs.widgetGroup,"is-hover")},handlePut:(e,t,o)=>!(o.className.split(" ").indexOf("widget-dialog")>=0||o.className.split(" ").indexOf("dialog-put")>=0||o.children[0].className.split(" ").indexOf("dialog-put")>=0),handleSelectWidget(e){this.$emit("update:select",this.data.list[e])},handleSelectChange(e,t){setTimeout((()=>{e>=0?this.$emit("update:select",this.element.list[e]):this.$emit("update:select",this.data.list[this.index])}))},handleWidgetClone(e){let t=_.cloneDeep(this.data.list[e]);this.data.list.splice(e+1,0,CloneLayout(t)),this.$nextTick((()=>{this.$emit("update:select",this.data.list[e+1]),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}))},handleWidgetDelete(e){1==this.data.list.length?this.$emit("select-change",-1):this.data.list.length-1==e?this.$emit("select-change",e-1):this.$emit("select-change",e),this.data.list.splice(e,1),setTimeout((()=>{EventBus.$emit("on-history-add-"+this.formKey)}),20)},handleWidgetGroupAdd(e,t){const o=e.newIndex,n=Math.random().toString(36).slice(-8);fixDraggbleList(t.list,o),t.list[o]=_.cloneDeep(t.list[o]),t.list[o]={...t.list[o],options:{...t.list[o].options,remoteFunc:t.list[o].options.remoteFunc||"func_"+n,remoteOption:t.list[o].options.remoteOption||"option_"+n,tableColumn:!1,subform:!1},key:t.list[o].key?t.list[o].key:n,model:t.list[o].model?t.list[o].model:t.list[o].type+"_"+n,rules:t.list[o].rules?[...t.list[o].rules]:[]},"report"==t.list[o].type&&(t.list[o].rows=generateKeyToTD(t.list[o].rows),t.list[o].headerRow=generateKeyToTH(t.list[o].headerRow)),"grid"==t.list[o].type&&(t.list[o].columns=generateKeyToCol(t.list[o].columns)),this.$nextTick((()=>{this.selectWidget=t.list[o],EventBus.$emit("on-history-add-"+this.formKey)}))},handleWidgetGroupUpdate(){EventBus.$emit("on-history-add-"+this.formKey)}},watch:{select(e){this.selectWidget=e},selectWidget(e){this.$emit("update:select",e)}}},_hoisted_1$i=["innerHTML"],_hoisted_2$f={key:0,class:"widget-view-action widget-subform-action"},_hoisted_3$a=["title"],_hoisted_4$9=["title"],_hoisted_5$9={key:1,class:"widget-view-drag widget-subform-drag"},_hoisted_6$7=vue.createElementVNode("i",{class:"fm-iconfont icon-drag drag-widget"},null,-1),_hoisted_7$6=[_hoisted_6$7],_hoisted_8$3={class:"widget-view-type"};function _sfc_render$y(e,t,o,n,i,l){const a=vue.resolveComponent("widget-tab-item"),r=vue.resolveComponent("widget-collapse"),s=vue.resolveComponent("widget-table"),d=vue.resolveComponent("widget-sub-form"),u=vue.resolveComponent("widget-card"),c=vue.resolveComponent("widget-inline"),p=vue.resolveComponent("widget-report"),m=vue.resolveComponent("widget-group",!0),h=vue.resolveComponent("widget-form-item"),f=vue.resolveComponent("widget-col-item"),v=vue.resolveComponent("draggable"),g=vue.resolveComponent("el-form-item");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["widget-group widget-view",{active:o.select.key&&o.select.key==o.element.key,is_hidden:o.element.options.hidden}]),onClick:t[16]||(t[16]=vue.withModifiers((e=>l.handleSelectWidget(o.index)),["stop"])),onMouseover:t[17]||(t[17]=vue.withModifiers(((...e)=>l.handleMouseover&&l.handleMouseover(...e)),["stop"])),onMouseout:t[18]||(t[18]=(...e)=>l.handleMouseout&&l.handleMouseout(...e)),ref:"widgetGroup"},[vue.createVNode(g,{label:o.element.options.hideLabel?"":o.element.name,"label-width":o.element.options.hideLabel?"0px":o.element.options.isLabelWidth?o.element.options.labelWidth+"px":"",class:vue.normalizeClass({[o.element.options&&o.element.options.customClass]:!!o.element.options.customClass,"fm-label-wrap":o.element.options.labelWrap})},{default:vue.withCtx((()=>[o.element.options.tip?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"fm-item-tooltip",innerHTML:o.element.options.tip.replace(/\n/g,"<br/>")},null,8,_hoisted_1$i)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{style:vue.normalizeStyle({width:o.element.options.width})},[vue.createVNode(v,vue.mergeProps({modelValue:o.element.list,"onUpdate:modelValue":t[10]||(t[10]=e=>o.element.list=e)},{group:{name:"people",put:l.handlePut},ghostClass:"ghost",animation:200,handle:".drag-widget"},{"no-transition-on-drag":!0,onAdd:t[11]||(t[11]=e=>l.handleWidgetGroupAdd(e,o.element)),onUpdate:l.handleWidgetGroupUpdate,onStart:t[12]||(t[12]=e=>l.setDragging(!0)),onEnd:t[13]||(t[13]=e=>l.setDragging(!1)),class:["widget-col-list",{[o.element.options&&o.element.options.customClass]:!!o.element.options.customClass}],"item-key":"key"}),{item:vue.withCtx((({element:e,index:n})=>["tabs"===e.type?(vue.openBlock(),vue.createBlock(a,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[0]||(t[0]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"collapse"===e.type?(vue.openBlock(),vue.createBlock(r,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[1]||(t[1]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"table"===e.type?(vue.openBlock(),vue.createBlock(s,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[2]||(t[2]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"subform"===e.type?(vue.openBlock(),vue.createBlock(d,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[3]||(t[3]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"card"===e.type?(vue.openBlock(),vue.createBlock(u,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[4]||(t[4]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"inline"===e.type?(vue.openBlock(),vue.createBlock(c,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[5]||(t[5]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"report"===e.type?(vue.openBlock(),vue.createBlock(p,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[6]||(t[6]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"group"===e.type?(vue.openBlock(),vue.createBlock(m,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[7]||(t[7]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"grid"!==e.type?(vue.openBlock(),vue.createBlock(h,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[8]||(t[8]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","form-key"])):(vue.openBlock(),vue.createBlock(f,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[9]||(t[9]=e=>i.selectWidget=e),index:n,data:o.element,onSelectChange:t=>l.handleSelectChange(t,e),platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"]))])),_:1},16,["modelValue","onUpdate","class"])],4)])),_:1},8,["label","label-width","class"]),o.select.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_2$f,[vue.createElementVNode("i",{class:"fm-iconfont icon-icon_clone",onClick:t[14]||(t[14]=vue.withModifiers((e=>l.handleWidgetClone(o.index)),["stop"])),title:e.$t("fm.tooltip.clone")},null,8,_hoisted_3$a),vue.createElementVNode("i",{class:"fm-iconfont icon-trash",onClick:t[15]||(t[15]=vue.withModifiers((e=>l.handleWidgetDelete(o.index)),["stop"])),title:e.$t("fm.tooltip.trash")},null,8,_hoisted_4$9)])):vue.createCommentVNode("",!0),o.select.key==o.element.key?(vue.openBlock(),vue.createElementBlock("div",_hoisted_5$9,_hoisted_7$6)):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"widget-view-model",style:vue.normalizeStyle({color:o.element.options.dataBind?"":"#666"})},[vue.createElementVNode("span",null,vue.toDisplayString(o.element.model),1)],4),vue.createElementVNode("div",_hoisted_8$3,[vue.createElementVNode("span",null,vue.toDisplayString(o.element.type?this.$t("fm.components.fields."+o.element.type):""),1)])],34)}var WidgetGroup=_export_sfc(_sfc_main$A,[["render",_sfc_render$y]]),WidgetGroup$1=Object.freeze(Object.defineProperty({__proto__:null,default:WidgetGroup},Symbol.toStringTag,{value:"Module"}));const _sfc_main$z={components:{Draggable:draggableComponent,WidgetFormItem:WidgetFormItem,WidgetColItem:WidgetColItem,WidgetTable:WidgetTable,WidgetTabItem:WidgetTabItem,WidgetReport:WidgetReport,WidgetInline:WidgetInline,WidgetSubForm:WidgetSubForm,WidgetCollapse:WidgetCollapse,WidgetDialog:WidgetDialog,WidgetCard:WidgetCard,WidgetGroup:WidgetGroup},props:["data","select","platform","formKey"],emits:["update:select"],inject:["changeConfigTab","setDragging"],data(){return{selectWidget:this.select||{}}},mounted(){document.body.ondrop=function(e){navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(e.preventDefault(),e.stopPropagation())},EventBus.$on("on-field-add-"+this.formKey,(e=>{var t,o,n,i;const l=Math.random().toString(36).slice(-8);let a=_.cloneDeep({...e,options:{...e.options,remoteFunc:"func_"+l,remoteOption:"option_"+l},key:l,model:e.type+"_"+l,rules:[]});"report"==a.type&&(a.rows=generateKeyToTD(a.rows),a.headerRow=generateKeyToTH(a.headerRow)),"grid"==a.type&&(a.columns=generateKeyToCol(a.columns)),a.options.subform=null==(o=null==(t=this.selectWidget)?void 0:t.options)?void 0:o.subform,a.options.tableColumn=null==(i=null==(n=this.selectWidget)?void 0:n.options)?void 0:i.tableColumn,this._addWidget(this.data.list,a)}))},beforeUnmount(){EventBus.$off("on-field-add-"+this.formKey)},methods:{_addWidget(e,t,o=!1){if(o&&("subform"==t.type||"grid"==t.type||"table"==t.type||"tabs"==t.type||"collapse"==t.type||"divider"==t.type||"report"==t.type||"inline"==t.type||"dialog"==t.type||"card"==t.type))return elementPlus.ElMessage({message:this.$t("fm.message.noPut"),type:"warning"}),"table";if(this.selectWidget&&this.selectWidget.key){const o=e.findIndex((e=>e.key==this.selectWidget.key));if(o>=0)e.splice(o+1,0,t),this.selectWidget=e[o+1],setTimeout((()=>{this.scrollTo()}),200),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}));else for(let n=0;n<e.length;n++){let o=e[n];if("grid"===o.type&&o.columns.forEach((e=>{this._addWidget(e.list,t)})),"table"===o.type&&"table"==this._addWidget(o.tableColumns,t,!0))return"table";if("subform"===o.type&&"table"==this._addWidget(o.list,t,!0))return"table";if("tabs"===o.type&&o.tabs.forEach((e=>{this._addWidget(e.list,t)})),"collapse"===o.type&&o.tabs.forEach((e=>{this._addWidget(e.list,t)})),"report"===o.type)for(let e=0;e<o.rows.length;e++)for(let n=0;n<o.rows[e].columns.length;n++)if(t.options.hideLabel=!0,"table"==this._addWidget(o.rows[e].columns[n].list,t,!1))return"table";if("inline"===o.type&&"table"==this._addWidget(o.list,t,!0))return"table";if("dialog"===o.type&&"table"==this._addWidget(o.list,t,!0))return"table";if("card"===o.type&&"table"==this._addWidget(o.list,t,!0))return"table";if("group"===o.type&&"table"==this._addWidget(o.list,t,!0))return"table"}}else e.push(t),this.selectWidget=e[e.length-1],setTimeout((()=>{this.scrollTo()}),200),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleMoveStart(){this.setDragging(!0)},handleMoveEnd(){this.setDragging(!1)},handleWidgetUpdate(e){this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleWidgetAdd(e){const t=e.newIndex;e.to,this.data.list[t]=_.cloneDeep(this.data.list[t]);const o=Math.random().toString(36).slice(-8);this.data.list[t]={...this.data.list[t],options:{...this.data.list[t].options,remoteFunc:this.data.list[t].options.remoteFunc||"func_"+o,remoteOption:this.data.list[t].options.remoteOption||"option_"+o,tableColumn:!1,subform:!1},key:this.data.list[t].key?this.data.list[t].key:o,model:this.data.list[t].model?this.data.list[t].model:this.data.list[t].type+"_"+o,rules:this.data.list[t].rules?[...this.data.list[t].rules]:[]},"report"==this.data.list[t].type&&(this.data.list[t].rows=generateKeyToTD(this.data.list[t].rows),this.data.list[t].headerRow=generateKeyToTH(this.data.list[t].headerRow)),"grid"==this.data.list[t].type&&(this.data.list[t].columns=generateKeyToCol(this.data.list[t].columns)),this.$nextTick((()=>{this.selectWidget=this.data.list[t],EventBus.$emit("on-history-add-"+this.formKey)}))},handleWidgetDelete(e){this.data.list.length-1===e?this.selectWidget=0===e?{}:this.data.list[e-1]:this.selectWidget=this.data.list[e+1],this.$nextTick((()=>{this.data.list.splice(e,1),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))}))},handleSelectChange(e){setTimeout((()=>{this.selectWidget=e>=0?this.data.list[e]:{}}))},scrollTo(){let e=document.querySelector(".widget-form-container .active").getBoundingClientRect().top,t=document.querySelector(".widget-form-container .active").offsetHeight,o=document.querySelector(".widget-form-container").offsetHeight,n=document.querySelector(".widget-form-container").getBoundingClientRect().top,i=document.querySelector(".widget-form-container .el-scrollbar__view").getBoundingClientRect().top,l=e-i,a=i-n;(l+t>-a+o||l<-a)&&this.$refs.formScrollRef.scrollTo({top:l-5,behavior:"smooth"})}},watch:{select(e){this.selectWidget=e,Object.keys(e).length?this.changeConfigTab("widget"):this.changeConfigTab("form")},selectWidget(e){this.$emit("update:select",e)}}},_hoisted_1$h={key:0,class:"form-empty"};function _sfc_render$x(e,t,o,n,i,l){var a;const r=vue.resolveComponent("widget-table"),s=vue.resolveComponent("widget-collapse"),d=vue.resolveComponent("widget-tab-item"),u=vue.resolveComponent("widget-report"),c=vue.resolveComponent("widget-inline"),p=vue.resolveComponent("widget-sub-form"),m=vue.resolveComponent("widget-group"),h=vue.resolveComponent("widget-dialog"),f=vue.resolveComponent("widget-card"),v=vue.resolveComponent("widget-form-item"),g=vue.resolveComponent("widget-col-item"),y=vue.resolveComponent("draggable"),b=vue.resolveComponent("el-scrollbar"),w=vue.resolveComponent("el-form");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["widget-form-container",`${o.platform}`])},[vue.createVNode(w,{size:o.data.config.size,"label-position":o.data.config.labelPosition,"label-width":o.data.config.labelWidth+"px",class:vue.normalizeClass({[o.data.config&&o.data.config.customClass]:!(!o.data.config||!o.data.config.customClass)}),style:vue.normalizeStyle({width:o.data.config.width,margin:"auto"}),"label-suffix":(null==(a=o.data.config)?void 0:a.labelSuffix)?" : ":" "},{default:vue.withCtx((()=>[0==o.data.list.length?(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$h,vue.toDisplayString(e.$t("fm.description.containerEmpty")),1)):vue.createCommentVNode("",!0),vue.createVNode(b,{ref:"formScrollRef"},{default:vue.withCtx((()=>[vue.createVNode(y,vue.mergeProps({list:o.data.list},{group:"people",ghostClass:"ghost",animation:200,handle:".drag-widget"},{onAdd:l.handleWidgetAdd,onUpdate:l.handleWidgetUpdate,onStart:l.handleMoveStart,onEnd:l.handleMoveEnd,"no-transition-on-drag":!0,"item-key":"key",class:"widget-form-list"}),{item:vue.withCtx((({element:e,index:n})=>["table"===e.type?(vue.openBlock(),vue.createBlock(r,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[0]||(t[0]=e=>i.selectWidget=e),index:n,data:o.data,onSelectChange:l.handleSelectChange,platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"collapse"===e.type?(vue.openBlock(),vue.createBlock(s,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[1]||(t[1]=e=>i.selectWidget=e),index:n,data:o.data,onSelectChange:l.handleSelectChange,platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"tabs"===e.type?(vue.openBlock(),vue.createBlock(d,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[2]||(t[2]=e=>i.selectWidget=e),index:n,data:o.data,onSelectChange:l.handleSelectChange,platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"report"===e.type?(vue.openBlock(),vue.createBlock(u,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[3]||(t[3]=e=>i.selectWidget=e),index:n,data:o.data,onSelectChange:l.handleSelectChange,platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"inline"===e.type?(vue.openBlock(),vue.createBlock(c,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[4]||(t[4]=e=>i.selectWidget=e),index:n,data:o.data,onSelectChange:l.handleSelectChange,platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"subform"===e.type?(vue.openBlock(),vue.createBlock(p,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[5]||(t[5]=e=>i.selectWidget=e),index:n,data:o.data,onSelectChange:l.handleSelectChange,platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"group"===e.type?(vue.openBlock(),vue.createBlock(m,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[6]||(t[6]=e=>i.selectWidget=e),index:n,data:o.data,onSelectChange:l.handleSelectChange,platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"dialog"===e.type?(vue.openBlock(),vue.createBlock(h,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[7]||(t[7]=e=>i.selectWidget=e),index:n,data:o.data,onSelectChange:l.handleSelectChange,platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"card"===e.type?(vue.openBlock(),vue.createBlock(f,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[8]||(t[8]=e=>i.selectWidget=e),index:n,data:o.data,onSelectChange:l.handleSelectChange,platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"])):"grid"!==e.type?(vue.openBlock(),vue.createBlock(v,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[9]||(t[9]=e=>i.selectWidget=e),index:n,data:o.data,onSelectChange:l.handleSelectChange,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","form-key"])):(vue.openBlock(),vue.createBlock(g,{key:e.key,element:e,select:i.selectWidget,"onUpdate:select":t[10]||(t[10]=e=>i.selectWidget=e),index:n,data:o.data,onSelectChange:l.handleSelectChange,platform:o.platform,"form-key":o.formKey},null,8,["element","select","index","data","onSelectChange","platform","form-key"]))])),_:1},16,["list","onAdd","onUpdate","onStart","onEnd"])])),_:1},512)])),_:1},8,["size","label-position","label-width","class","style","label-suffix"])],2)}var WidgetForm=_export_sfc(_sfc_main$z,[["render",_sfc_render$x]]),clipboard={exports:{}};
/*!
   * clipboard.js v2.0.11
   * https://clipboardjs.com/
   *
   * Licensed MIT © Zeno Rocha
   */
!function(e,t){var o;o=function(){return function(){var e={686:function(e,t,o){o.d(t,{default:function(){return C}});var n=o(279),i=o.n(n),l=o(370),a=o.n(l),r=o(817),s=o.n(r);function d(e){try{return document.execCommand(e)}catch(t){return!1}}var u=function(e){var t=s()(e);return d("cut"),t},c=function(e,t){var o=function(e){var t="rtl"===document.documentElement.getAttribute("dir"),o=document.createElement("textarea");o.style.fontSize="12pt",o.style.border="0",o.style.padding="0",o.style.margin="0",o.style.position="absolute",o.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;return o.style.top="".concat(n,"px"),o.setAttribute("readonly",""),o.value=e,o}(e);t.container.appendChild(o);var n=s()(o);return d("copy"),o.remove(),n},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},o="";return"string"==typeof e?o=c(e,t):e instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==e?void 0:e.type)?o=c(e.value,t):(o=s()(e),d("copy")),o};function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.action,o=void 0===t?"copy":t,n=e.container,i=e.target,l=e.text;if("copy"!==o&&"cut"!==o)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==i){if(!i||"object"!==m(i)||1!==i.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===o&&i.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===o&&(i.hasAttribute("readonly")||i.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return l?p(l,{container:n}):i?"cut"===o?u(i):p(i,{container:n}):void 0};function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=w(e);if(t){var i=w(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return b(this,o)}}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){var o="data-clipboard-".concat(e);if(t.hasAttribute(o))return t.getAttribute(o)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(l,e);var t,o,n,i=y(l);function l(e,t){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(o=i.call(this)).resolveOptions(t),o.listenClick(e),o}return t=l,o=[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===f(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=a()(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget,o=this.action(t)||"copy",n=h({action:o,container:this.container,target:this.target(t),text:this.text(t)});this.emit(n?"success":"error",{action:o,text:n,trigger:t,clearSelection:function(){t&&t.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(e){return k("action",e)}},{key:"defaultTarget",value:function(e){var t=k("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return k("text",e)}},{key:"destroy",value:function(){this.listener.destroy()}}],n=[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return p(e,t)}},{key:"cut",value:function(e){return u(e)}},{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,o=!!document.queryCommandSupported;return t.forEach((function(e){o=o&&!!document.queryCommandSupported(e)})),o}}],o&&v(t.prototype,o),n&&v(t,n),l}(i()),C=_},828:function(e){if("undefined"!=typeof Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},438:function(e,t,o){var n=o(828);function i(e,t,o,n,i){var a=l.apply(this,arguments);return e.addEventListener(o,a,i),{destroy:function(){e.removeEventListener(o,a,i)}}}function l(e,t,o,i){return function(o){o.delegateTarget=n(o.target,t),o.delegateTarget&&i.call(e,o)}}e.exports=function(e,t,o,n,l){return"function"==typeof e.addEventListener?i.apply(null,arguments):"function"==typeof o?i.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return i(e,t,o,n,l)})))}},879:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var o=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===o||"[object HTMLCollection]"===o)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},370:function(e,t,o){var n=o(879),i=o(438);e.exports=function(e,t,o){if(!e&&!t&&!o)throw new Error("Missing required arguments");if(!n.string(t))throw new TypeError("Second argument must be a String");if(!n.fn(o))throw new TypeError("Third argument must be a Function");if(n.node(e))return function(e,t,o){return e.addEventListener(t,o),{destroy:function(){e.removeEventListener(t,o)}}}(e,t,o);if(n.nodeList(e))return function(e,t,o){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,o)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,o)}))}}}(e,t,o);if(n.string(e))return function(e,t,o){return i(document.body,e,t,o)}(e,t,o);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(e){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var o=e.hasAttribute("readonly");o||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),o||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),i=document.createRange();i.selectNodeContents(e),n.removeAllRanges(),n.addRange(i),t=n.toString()}return t}},279:function(e){function t(){}t.prototype={on:function(e,t,o){var n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:t,ctx:o}),this},once:function(e,t,o){var n=this;function i(){n.off(e,i),t.apply(o,arguments)}return i._=t,this.on(e,i,o)},emit:function(e){for(var t=[].slice.call(arguments,1),o=((this.e||(this.e={}))[e]||[]).slice(),n=0,i=o.length;n<i;n++)o[n].fn.apply(o[n].ctx,t);return this},off:function(e,t){var o=this.e||(this.e={}),n=o[e],i=[];if(n&&t)for(var l=0,a=n.length;l<a;l++)n[l].fn!==t&&n[l].fn._!==t&&i.push(n[l]);return i.length?o[e]=i:delete o[e],this}},e.exports=t,e.exports.TinyEmitter=t}},t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}return o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o(686)}().default},e.exports=o()}(clipboard);var ClipboardJS=getDefaultExportFromCjs(clipboard.exports);const advanceComponentsExt=[{type:"empselector",icon:"icon-jilianxuanze",options:{defaultValue:[],width:"100%",placeholder:"请选择人员！",disabled:!1,clearable:!1,multiple:!1,remote:!1,remoteType:"option",remoteOption:"",remoteOptions:[],remoteFunc:"",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,required:!1,customProps:{}},events:{onChange:""}},{type:"orgselector",icon:"icon-jilianxuanze",options:{defaultValue:[],width:"100%",placeholder:"请选择组织！",disabled:!1,clearable:!1,multiple:!1,remote:!1,remoteType:"option",remoteOption:"",remoteOptions:[],remoteFunc:"",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,required:!1,selectType:"all",customProps:{}},events:{onChange:""}},{type:"orgempselector",icon:"icon-jilianxuanze",options:{defaultValue:[],width:"100%",placeholder:"",disabled:!1,clearable:!1,remote:!1,remoteType:"option",remoteOption:"",remoteOptions:[],remoteFunc:"",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,required:!1,customProps:{}}},{type:"processselector",icon:"icon-jilianxuanze",options:{defaultValue:[],width:"100%",placeholder:"请选择关联流程！",disabled:!1,clearable:!1,multiple:!1,remote:!1,remoteType:"option",remoteOption:"",remoteOptions:[],remoteFunc:"",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,required:!1,customProps:{}},events:{onChange:""}},{type:"areaselector",icon:"icon-jilianxuanze",options:{defaultValue:[],width:"100%",placeholder:"请选择区域！",disabled:!1,clearable:!1,multiple:!1,remote:!1,remoteType:"option",remoteOption:"",remoteOptions:[],remoteFunc:"",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,required:!1,customProps:{}},events:{onChange:""}},{type:"kindeditor",icon:"icon-fuwenbenkuang",options:{defaultValue:"",width:"100%",height:"100px",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,customToolbar:[[],["undo","redo"],["plainpaste","wordpaste"],["justifyleft","justifycenter","justifyright","justifyfull","indent","outdent","clearhtml","quickformat"],["formatblock"],["forecolor","hilitecolor","bold","italic","underline","strikethrough","lineheight","removeformat"],["image"]],cssData:"body, td{font-size: 14px;}",autosize:!1,disabled:!1,required:!1}}],basicComponents=[{type:"input",icon:"icon-input",options:{width:"",defaultValue:"",required:!1,requiredMessage:"",dataType:"",dataTypeCheck:!1,dataTypeMessage:"",pattern:"",patternCheck:!1,patternMessage:"",validatorCheck:!1,validator:"",placeholder:"",customClass:"",disabled:!1,labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,showPassword:!1,clearable:!1,maxlength:"",showWordLimit:!1,customProps:{},tip:"",extendProps:{}},events:{onMounted:"",onChange:"",onFocus:"",onBlur:""}},{type:"textarea",icon:"icon-diy-com-textarea",options:{width:"",defaultValue:"",required:!1,requiredMessage:"",disabled:!1,pattern:"",patternMessage:"",validatorCheck:!1,validator:"",placeholder:"",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,clearable:!1,maxlength:"",showWordLimit:!1,rows:2,autosize:!1,customProps:{},tip:"",extendProps:{}},events:{onMounted:"",onChange:"",onFocus:"",onBlur:""}},{type:"number",icon:"icon-number",options:{width:"",required:!1,requiredMessage:"",validatorCheck:!1,validator:"",defaultValue:0,min:0,max:9,step:1,disabled:!1,controls:!0,controlsPosition:"",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,precision:0,customProps:{},tip:"",extendProps:{}},events:{onMounted:"",onChange:"",onFocus:"",onBlur:""}},{type:"radio",icon:"icon-radio-active",options:{inline:!1,defaultValue:"",showLabel:!1,options:[{value:"Option 1",label:"Option 1"},{value:"Option 2",label:"Option 2"},{value:"Option 3",label:"Option 3"}],required:!1,requiredMessage:"",validatorCheck:!1,validator:"",width:"",remote:!1,remoteType:"datasource",remoteOption:"",remoteOptions:[],props:{value:"value",label:"label"},remoteFunc:"",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,disabled:!1,customProps:{},tip:"",extendProps:{}},events:{onMounted:"",onChange:""}},{type:"checkbox",icon:"icon-check-box",options:{inline:!1,defaultValue:[],showLabel:!1,options:[{value:"Option 1"},{value:"Option 2"},{value:"Option 3"}],required:!1,requiredMessage:"",validatorCheck:!1,validator:"",width:"",remote:!1,remoteType:"datasource",remoteOption:"",remoteOptions:[],props:{value:"value",label:"label"},remoteFunc:"",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,disabled:!1,customProps:{},tip:"",extendProps:{}},events:{onMounted:"",onChange:""}},{type:"select",icon:"icon-select",options:{defaultValue:"",multiple:!1,disabled:!1,clearable:!1,placeholder:"",required:!1,requiredMessage:"",validatorCheck:!1,validator:"",showLabel:!1,width:"",options:[{value:"Option 1"},{value:"Option 2"},{value:"Option 3"}],remote:!1,remoteType:"datasource",remoteOption:"",filterable:!1,remoteOptions:[],props:{value:"value",label:"label"},remoteFunc:"",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,customProps:{},tip:"",extendProps:{}},events:{onMounted:"",onChange:"",onFocus:"",onBlur:""}},{type:"time",icon:"icon-time",options:{defaultValue:"",readonly:!1,disabled:!1,editable:!1,clearable:!0,placeholder:"",startPlaceholder:"",endPlaceholder:"",isRange:!1,arrowControl:!1,format:"HH:mm:ss",required:!1,requiredMessage:"",validatorCheck:!1,validator:"",width:"",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,customProps:{},tip:"",extendProps:{}},events:{onMounted:"",onChange:"",onFocus:"",onBlur:""}},{type:"date",icon:"icon-date",options:{defaultValue:"",readonly:!1,disabled:!1,editable:!1,clearable:!0,placeholder:"",startPlaceholder:"",endPlaceholder:"",type:"date",format:"YYYY-MM-DD",timestamp:!1,required:!1,requiredMessage:"",validatorCheck:!1,validator:"",width:"",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,customProps:{},tip:"",extendProps:{}},events:{onMounted:"",onChange:"",onFocus:"",onBlur:""}},{type:"rate",icon:"icon-pingfen1",options:{defaultValue:null,max:5,disabled:!1,allowHalf:!1,required:!1,requiredMessage:"",validatorCheck:!1,validator:"",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,showScore:!1,width:"",customProps:{},tip:"",extendProps:{}},events:{onMounted:"",onChange:""}},{type:"color",icon:"icon-color",options:{defaultValue:"",disabled:!1,showAlpha:!1,required:!1,requiredMessage:"",validatorCheck:!1,validator:"",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,width:"",customProps:{},tip:"",extendProps:{}},events:{onMounted:"",onChange:""}},{type:"switch",icon:"icon-switch",options:{defaultValue:!1,required:!1,requiredMessage:"",validatorCheck:!1,validator:"",disabled:!1,customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,width:"",customProps:{},tip:"",extendProps:{}},events:{onMounted:"",onChange:""}},{type:"slider",icon:"icon-slider",options:{defaultValue:0,disabled:!1,required:!1,requiredMessage:"",validatorCheck:!1,validator:"",min:0,max:100,step:1,showInput:!1,range:!1,width:"",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,customProps:{},tip:"",extendProps:{}},events:{onMounted:"",onChange:""}},{type:"text",icon:"icon-wenzishezhi-",options:{defaultValue:"This is a text",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,required:!1,validatorCheck:!1,validator:"",width:"",tip:""},events:{onMounted:"",onChange:""}},{type:"html",icon:"icon-html",options:{defaultValue:'<b style="color: red;">\n\tThis is a HTML5\n</b>',labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,required:!1,validatorCheck:!1,validator:"",width:"",tip:""},events:{onMounted:"",onChange:""}},{type:"button",icon:"icon-button",options:{customClass:"",disabled:!1,labelWidth:100,isLabelWidth:!1,hideLabel:!0,hidden:!1,buttonSize:"default",buttonType:"",buttonPlain:!1,buttonRound:!1,buttonCircle:!1,buttonName:"Button",width:"",customProps:{},tip:"",extendProps:{}},events:{onMounted:"",onClick:""}},{type:"link",icon:"icon-lianjie",options:{customClass:"",disabled:!1,labelWidth:100,isLabelWidth:!1,hideLabel:!1,hidden:!1,linkType:"default",linkName:"Link",underline:!0,blank:!0,href:"",customProps:{},tip:"",extendProps:{}},events:{onMounted:"",onClick:""}},{type:"cascader",icon:"icon-jilianxuanze",options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,options:[{value:"Option 1",label:"Option 1",children:[{value:"Option 1 - children",label:"Option 1 - children"}]},{value:"Option 2",label:"Option 2",children:[{value:"Option 2 - children",label:"Option 2 - children"}]},{value:"Option 3",label:"Option 3"}],remote:!1,remoteType:"datasource",remoteOption:"",remoteOptions:[],props:{value:"value",label:"label",children:"children"},remoteFunc:"",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,required:!1,validatorCheck:!1,validator:"",multiple:!1,filterable:!1,checkStrictly:!1,customProps:{},tip:"",extendProps:{}},events:{onMounted:"",onChange:"",onFocus:"",onBlur:""}},{type:"treeselect",icon:"icon-shuxuanzeqi",options:{defaultValue:[],width:"",placeholder:"",disabled:!1,clearable:!1,options:[{value:"Option 1",label:"Option 1",children:[{value:"Option 1 - children",label:"Option 1 - children"}]},{value:"Option 2",label:"Option 2",children:[{value:"Option 2 - children",label:"Option 2 - children"}]},{value:"Option 3",label:"Option 3"}],remote:!1,remoteType:"datasource",remoteOption:"",remoteOptions:[],props:{value:"value",label:"label",children:"children"},remoteFunc:"",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,required:!1,validatorCheck:!1,validator:"",multiple:!1,filterable:!1,checkStrictly:!1,customProps:{},tip:"",extendProps:{}},events:{onMounted:"",onChange:"",onFocus:"",onBlur:""}},{type:"steps",icon:"icon-m-buzhou",options:{defaultValue:0,customClass:"",labelWidth:100,isLabelWidth:!1,hideLabel:!0,hidden:!1,dataBind:!0,steps:[{title:"Step 1"},{title:"Step 2"},{title:"Step 3"}],props:{title:"title",description:"description"},remote:!1,width:"",direction:"horizontal",processStatus:"process",finishStatus:"finish",alignCenter:!1,simple:!1,remoteType:"datasource",customProps:{},tip:"",extendProps:{}},events:{onMounted:"",onChange:""}},{type:"transfer",icon:"icon-m-chuansuokuang",options:{defaultValue:[],customClass:"",labelWidth:100,isLabelWidth:!1,hideLabel:!1,hidden:!1,dataBind:!0,data:[{key:"1",label:"Option 1"},{key:"2",label:"Option 2"},{key:"3",label:"Option 3"}],props:{key:"key",label:"label",disabled:"disabled"},filterable:!1,required:!1,validatorCheck:!1,validator:"",width:"",remote:!1,titles:["Source","Target"],disabled:!1,remoteType:"datasource",customProps:{},tip:"",extendProps:{}},events:{onMounted:"",onChange:""}},{type:"pagination",icon:"icon-pagination",options:{defaultValue:1,customClass:"",disabled:!1,labelWidth:100,isLabelWidth:!1,hideLabel:!1,hidden:!1,dataBind:!0,background:!0,pageSize:10,pagerCount:7,total:100,customProps:{},extendProps:{}},events:{onMounted:"",onChange:""}}],advanceComponents=[{type:"blank",icon:"icon-zidingyishuju",options:{defaultType:"String",customClass:"",width:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,required:!1,pattern:"",validator:"",tip:""},events:{onMounted:"",onChange:""}},{type:"component",icon:"icon-component",options:{customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,template:"<div>自定义内容</div>",required:!1,pattern:"",validator:"",width:"",tip:""},events:{onMounted:"",onChange:""}},{type:"fileupload",icon:"icon-wenjianshangchuan",options:{defaultValue:[],width:"",tokenFunc:"funcGetToken",token:"",tokenType:"datasource",domain:"",disabled:!1,tip:"",action:"/flow/api/public/uploadFile",customClass:"",limit:9,multiple:!1,isQiniu:!1,labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,headers:[],required:!1,validatorCheck:!1,validator:"",withCredentials:!1},events:{onMounted:"",onChange:"",onSelect:"",onUploadSuccess:"",onUploadError:"",onRemove:""}},{type:"imgupload",icon:"icon-tupian",options:{defaultValue:[],size:{width:100,height:100},width:"",tokenFunc:"funcGetToken",token:"",tokenType:"datasource",domain:"",disabled:!1,readonly:!1,limit:8,multiple:!1,isQiniu:!1,isDelete:!0,min:0,isEdit:!0,action:"/flow/api/public/uploadFile",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,headers:[],required:!1,validatorCheck:!1,validator:"",withCredentials:!1,tip:""},events:{onMounted:"",onChange:"",onSelect:"",onUploadSuccess:"",onUploadError:"",onRemove:""}},{type:"editor",icon:"icon-fuwenbenkuang",options:{defaultValue:"",width:"",customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,customToolbar:[["bold","italic","underline","strike",{color:[]},{background:[]},{align:[]},{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{font:[]},{header:[1,2,3,4,5,6,!1]}],[{script:"sub"},{script:"super"}],["link","image","blockquote","code-block"],[{direction:"rtl"}],["clean"]],disabled:!1,required:!1,validatorCheck:!1,validator:"",tip:""},events:{onMounted:"",onChange:""}},{type:"list",icon:"icon-shujubiaoge",options:{defaultValue:[{date:"2016-05-03",name:"Tom",state:"California",city:"Los Angeles",address:"No. 189, Grove St, Los Angeles",zip:"CA 90036",tag:"Home"},{date:"2016-05-02",name:"Tom",state:"California",city:"Los Angeles",address:"No. 189, Grove St, Los Angeles",zip:"CA 90036",tag:"Office"},{date:"2016-05-04",name:"Tom",state:"California",city:"Los Angeles",address:"No. 189, Grove St, Los Angeles",zip:"CA 90036",tag:"Home"},{date:"2016-05-01",name:"Tom",state:"California",city:"Los Angeles",address:"No. 189, Grove St, Los Angeles",zip:"CA 90036",tag:"Office"}],width:"",maxHeight:"",stripe:!1,border:!1,customClass:"",labelWidth:100,isLabelWidth:!1,hideLabel:!0,hidden:!1,dataBind:!0,columns:[{label:"Date",prop:"date",width:"",sortable:!1,fixed:!1,align:"left",headderAlign:"left",fixedOption:"left",defaultSlot:!1,defaultSlotTemplate:"",headerSlot:!1,headerSlotTemplate:"",key:"69vku4oh"},{label:"Name",prop:"name",width:"",sortable:!1,fixed:!1,align:"left",headderAlign:"left",fixedOption:"left",defaultSlot:!1,defaultSlotTemplate:"",headerSlot:!1,headerSlotTemplate:"",key:"8zm66bqm"},{label:"Address",prop:"address",width:"",sortable:!1,fixed:!1,align:"left",headderAlign:"left",fixedOption:"left",defaultSlot:!1,defaultSlotTemplate:"",headerSlot:!1,headerSlotTemplate:"",key:"ariv7pud"}],highlight:!1,selection:!1,showOperation:!1,operations:{width:200,buttons:[]},pagination:{paging:!1,pageSize:10,currentPage:1,pagerCount:7,pageSizes:"10, 20, 50, 100",background:!1,small:!1,props:{list:"records",total:"total",size:"pageSize",current:"currentPage"}},tip:""},events:{onMounted:"",onChange:"",onPageChange:"",onCurrentRow:"",onSelectionChange:""}},...advanceComponentsExt],layoutComponents=[{type:"grid",icon:"icon-RectangleCopy",columns:[{type:"col",options:{span:12,offset:0,push:0,pull:0,xs:24,sm:12,md:12,lg:12,xl:12,customClass:""},list:[]}],options:{gutter:0,justify:"start",align:"top",customClass:"",hidden:!1,flex:!0,responsive:!0}},{type:"report",icon:"icon-table1",options:{customClass:"",hidden:!1,borderWidth:1,borderColor:"#999",width:"100%"},headerRow:[{type:"th",options:{width:""}}],rows:[{columns:[{type:"td",options:{customClass:"",colspan:1,rowspan:1,align:"left",valign:"top",width:"",height:""},list:[]}]}]},{type:"tabs",icon:"icon-tabs",tabs:[{label:"Tab 1",name:"tab_1",list:[]}],options:{type:"",tabPosition:"top",customClass:"",hidden:!1}},{type:"collapse",icon:"icon-zhediemianban",tabs:[{title:"Collapse 1",name:"collapse_1",list:[]}],options:{type:"",accordion:!1,customClass:"",hidden:!1}},{type:"inline",icon:"icon-inlineview",options:{customClass:"",hidden:!1,spaceSize:10},list:[]},{type:"card",icon:"icon-kapian",list:[],options:{title:"Card name",showHeader:!0,bordered:!0,customClass:"",shadow:"always",width:"",padding:"10px",hidden:!1}},{type:"divider",icon:"icon-fengexian",options:{hidden:!1,contentPosition:"left",customProps:{}}},{type:"alert",icon:"icon-jinggaotishi",options:{hidden:!1,title:"Info alert",type:"info",description:"",closable:!0,center:!1,showIcon:!1,effect:"light",width:"",customProps:{}}}],collectionComponents=[{type:"table",icon:"icon-kebianjibiaoge",options:{defaultValue:[],customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,disabled:!1,required:!1,validatorCheck:!1,validator:"",paging:!1,pageSize:5,isAdd:!0,isDelete:!0,showControl:!0,virtualTable:!0,tip:""},events:{onMounted:"",onChange:"",onRowAdd:"",onRowRemove:"",onPageChange:""},tableColumns:[]},{type:"subform",icon:"icon-a-ziyuan25",options:{defaultValue:[],customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,disabled:!1,required:!1,validatorCheck:!1,validator:"",paging:!1,pageSize:5,showControl:!0,isAdd:!0,isDelete:!0,tip:""},events:{onMounted:"",onChange:"",onRowAdd:"",onRowRemove:"",onPageChange:""},list:[]},{type:"dialog",icon:"icon-Dialog",options:{defaultValue:{},visible:!1,customClass:"",title:"Dialog Title",width:"",top:"15vh",center:!1,cancelText:"Cancel",showClose:!0,okText:"Confirm",showCancel:!0,showOk:!0,confirmLoading:!1,dataBind:!0},list:[],events:{onOpen:"",onClose:"",onCancel:"",onConfirm:""}},{type:"group",icon:"icon-fenzu",options:{defaultValue:{},customClass:"",labelWidth:100,isLabelWidth:!1,hidden:!1,dataBind:!0,width:"",validatorCheck:!1,validator:"",tip:""},list:[],events:{onMounted:""}}];function findRemoteFunc(e,t,o,n,i){for(let l=0;l<e.length;l++)"grid"==e[l].type?e[l].columns.forEach((e=>{findRemoteFunc(e.list,t,o,n,i)})):"table"==e[l].type?findRemoteFunc(e[l].tableColumns,t,o,n,i):"subform"==e[l].type?findRemoteFunc(e[l].list,t,o,n,i):"tabs"==e[l].type||"collapse"==e[l].type?e[l].tabs.forEach((e=>{findRemoteFunc(e.list,t,o,n,i)})):"report"==e[l].type?e[l].rows.forEach((e=>{e.columns.forEach((e=>{findRemoteFunc(e.list,t,o,n,i)}))})):"inline"==e[l].type||"dialog"==e[l].type||"card"==e[l].type||"group"==e[l].type?findRemoteFunc(e[l].list,t,o,n,i):"blank"==e[l].type?e[l].model&&n.findIndex((t=>t.name==e[l].model))<0&&n.push({name:e[l].model,label:e[l].name,dataBind:e[l].options.dataBind}):"imgupload"==e[l].type?"func"==e[l].options.tokenType&&e[l].options.tokenFunc&&o.push({func:e[l].options.tokenFunc,label:e[l].name,model:e[l].model}):(e[l].options.remote&&"func"==e[l].options.remoteType&&e[l].options.remoteFunc&&t.push({func:e[l].options.remoteFunc,label:e[l].name,model:e[l].model}),e[l].options.remote&&"option"==e[l].options.remoteType&&e[l].options.remoteOption&&i.push({option:e[l].options.remoteOption,label:e[l].name,model:e[l].model}))}function generateCode(e,t="html",o="element"){const n=document.querySelector("html").className.indexOf("dark")>-1,i=[],l=[],a=[],r=[],s="element"==o?"fm-generate-form":"fm-generate-antd-form",d="element"==o?"https://unpkg.com/element-plus":"https://unpkg.com/ant-design-vue/dist/antd.min.js";let u="";u="element"==o?n?'<link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">\n      <link rel="stylesheet" href="https://unpkg.com/element-plus/theme-chalk/dark/css-vars.css">':'<link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">':'<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ant-design-vue/dist/reset.min.css">',findRemoteFunc(JSON.parse(e).list,i,l,a,r);let c="",p="",m="";for(let h=0;h<r.length;h++)m+=`\n          ${r[h].option} : [], // ${r[h].label} option data\n    `;for(let h=0;h<i.length;h++)c+=`\n            ${i[h].func} (resolve) {\n              // ${i[h].label} ${i[h].model}\n              // resolve(data)\n            },\n    `;for(let h=0;h<l.length;h++)c+=`\n            ${l[h].func} (resolve) {\n              // ${l[h].label} ${l[h].model}\n              // resolve(token)\n            },\n    `;for(let h=0;h<a.length;h++)a[h].dataBind?p+=`\n        <template v-slot:${a[h].name}="scope">\n          \x3c!-- ${a[h].label||a[h].name} --\x3e\n          \x3c!-- use v-model="scope.model.${a[h].name}" to bind data --\x3e\n        </template>\n      `:p+=`\n        <template v-slot:${a[h].name}>\n          \x3c!-- ${a[h].label||a[h].name} --\x3e\n        </template>\n      `;return"html"==t?`<!DOCTYPE html>\n<html class="${n?"dark":""}">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />\n  ${u}\n  <link rel="stylesheet" href="https://form.making.link/public/lib/form-making-v3/dist/index.css">\n</head>\n<body>\n  <div id="app">\n    <${s}\n      :data="jsonData" \n      :remote="remoteFuncs"\n      :remote-option="dynamicData"\n      ref="generateForm"\n    >${p}\n    </${s}>\n  </div>\n  <script src="https://unpkg.com/vue/dist/vue.global.prod.js"><\/script>${"antd"==o?'\n\t<script src="https://unpkg.com/dayjs/dayjs.min.js"><\/script>\n  <script src="https://unpkg.com/dayjs/plugin/customParseFormat.js"><\/script>\n  <script src="https://unpkg.com/dayjs/plugin/weekday.js"><\/script>\n  <script src="https://unpkg.com/dayjs/plugin/localeData.js"><\/script>\n  <script src="https://unpkg.com/dayjs/plugin/weekOfYear.js"><\/script>\n  <script src="https://unpkg.com/dayjs/plugin/weekYear.js"><\/script>\n  <script src="https://unpkg.com/dayjs/plugin/advancedFormat.js"><\/script>\n  <script src="https://unpkg.com/dayjs/plugin/quarterOfYear.js"><\/script>':""}\n  <script src="${d}"><\/script>\n  <script src="https://form.making.link/public/lib/form-making-v3/dist/form-making-v3.umd.js"><\/script>\n  <script>\n    Vue.createApp({\n      data () {\n        return {\n          jsonData: ${e},\n          remoteFuncs: {\n            ${c}\n          },\n          dynamicData: {\n            ${m}\n          }\n        }\n      }\n    }).use(${"element"==o?"ElementPlus":"antd"}).use(FormMakingV3)${"element"==o?"":'.provide("useInjectFormItemContext", antd.Form.useInjectFormItemContext)'}.mount('#app')\n  <\/script>\n</body>\n</html>`:`<template>\n  <div>\n    <${s} \n      :data="jsonData" \n      :remote="remoteFuncs" \n      :remote-option="dynamicData"\n      ref="generateForm"\n    >${p}\n    </${s}>\n  </div>\n</template>\n\n<script setup>\nimport { ref, reactive } from 'vue'\n\nconst generateForm = ref()\n\nconst jsonData = reactive(${e})\n\nconst remoteFuncs = reactive({\n  ${c}\n})\n\nconst dynamicData = reactive({\n  ${m}\n})\n<\/script>`}const idb={openDB(e,t=1){const o=window.indexedDB.open(e,t);return new Promise(((e,t)=>{o.onerror=e=>{t(e.currentTarget.error.message)},o.onsuccess=t=>{e(t.target.result)},o.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains("history")||t.createObjectStore("history",{keyPath:"id"})}}))},name:"form-making-v3",cursor:0,key:"bf1doqvPgp1dxHVM4sFdvA=="};var historyManager={clear:()=>new Promise(((e,t)=>{idb.openDB(idb.name).then((t=>{const o=t.transaction(["history"],"readwrite");o.objectStore("history").clear(),o.oncomplete=t=>{idb.cursor=0,e()}}))})),updateLatest:(e,t)=>new Promise(((o,n)=>{idb.openDB(idb.name).then((n=>{const i=n.transaction(["history"],"readwrite");i.objectStore("history").put({id:idb.cursor,data:JSON.parse(JSON.stringify(e)),selected:t}),i.oncomplete=e=>{o()}}))})),add:(e,t)=>new Promise(((o,n)=>{idb.openDB(idb.name).then((n=>{const i=n.transaction(["history"],"readwrite"),l=i.objectStore("history"),a=idb.cursor+1,r=[];l.openCursor().onsuccess=o=>{const n=o.target.result;if(n)r.push(n.value),n.continue();else{for(let e=0;e<r.length;e++)r[e].id>idb.cursor&&l.delete(r[e].id);l.add({id:a,data:JSON.parse(JSON.stringify(e)),selected:t})}},i.oncomplete=e=>{idb.cursor=a,o()}}))})),undo:()=>new Promise(((e,t)=>{idb.openDB(idb.name).then((t=>{const o=t.transaction(["history"],"readwrite"),n=o.objectStore("history");let i={list:[],config:{labelWidth:100,labelPosition:"right",size:"default",customClass:"",ui:"element",layout:"horizontal"}},l=!1,a="";if(idb.cursor>1){const e=n.get(idb.cursor-1);e.onsuccess=t=>{i=e.result.data,a=e.result.selected,l=!0}}o.oncomplete=t=>{idb.cursor=idb.cursor-1,e({data:i,key:a,undo:l,redo:true})}}))})),redo:()=>new Promise(((e,t)=>{idb.openDB(idb.name).then((t=>{const o=t.transaction(["history"],"readwrite"),n=o.objectStore("history");let i={},l=!1,a="";const r=n.count();r.onsuccess=()=>{const e=r.result;if(idb.cursor<e){const t=n.get(idb.cursor+1);t.onsuccess=o=>{i=t.result.data,a=t.result.selected,l=idb.cursor+1!=e}}},o.oncomplete=t=>{idb.cursor=idb.cursor+1,e({data:i,key:a,undo:true,redo:l})}}))}))};const UpgradeData=e=>"grid"==e.type?{...e,columns:e.columns.map((e=>e.key?e:{...e,key:Math.random().toString(36).slice(-8),type:"col",options:{span:e.span,offset:0,push:0,pull:0,xs:e.xs,sm:e.sm,md:e.md,lg:e.lg,xl:e.xl,customClass:""},list:e.list.map((e=>UpgradeData(e)))}))}:e;var file_vue_vue_type_style_index_0_lang="";const _sfc_main$y={components:{},props:{modelValue:{type:Array,default:()=>[]},token:{type:String,default:""},domain:{type:String,default:""},multiple:{type:Boolean,default:!1},limit:{type:Number,default:9},isQiniu:{type:Boolean,default:!1},min:{type:Number,default:0},action:{type:String,default:""},disabled:{type:Boolean,default:!1},tip:{type:String,default:""},headers:{type:Array,default:()=>[]},ui:{type:String,default:"element"},containerKey:{type:String,default:""},withCredentials:{type:Boolean,default:!1},printRead:{type:Boolean,default:!1},onSelect:{type:Function,default:void 0},size:{type:String,default:"default"},accept:{type:String,default:""}},emits:["update:modelValue","on-upload-success","on-upload-error","on-upload-progress","on-upload-remove"],inject:{formContext:{default:{}}},data(){return{fileList:this.modelValue.map((e=>({...e,key:e.key?e.key:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())}))),viewer:null,uploadId:"upload_"+(new Date).getTime(),editIndex:-1,meituIndex:-1}},computed:{miniWidth(){return this.width>this.height?this.height:this.width}},methods:{handleChange(){const e=this.$refs.uploadInput.files;if(this.fileList.length+e.length>this.limit)return this.$refs.uploadInput.value=[],!1;for(let t=0;t<e.length;t++){let o=e[t],n=this.onSelect(o);if(!1===n)return!1;n instanceof File&&(o=n);const i=new FileReader;let l=(new Date).getTime();i.readAsDataURL(o),i.onload=()=>{l=l+"_"+o.name,this.editIndex>=0?(this.fileList[this.editIndex]={key:l,url:i.result,percent:0,status:"uploading",name:o.name},this.editIndex=-1):this.fileList.push({key:l,url:i.result,percent:0,status:"uploading",name:o.name}),this.$nextTick((()=>{this.isQiniu?this.uploadAction2(i.result,o,l):this.uploadAction(i.result,o,l)}))}}this.$refs.uploadInput.value=[]},uploadAction(e,t,o){this.fileList.findIndex((e=>e.key===o));const n=new XMLHttpRequest,i=this.action;n.open("POST",i,!0),this.headers.map((e=>{e.key&&n.setRequestHeader(e.key,e.fx?executeExpression(e.value,{},this.formContext):e.value)}));let l=new FormData;l.append("file",t),l.append("fname",t.name),l.append("key",o),n.withCredentials=this.withCredentials,n.onreadystatechange=()=>{if(n&&4===n.readyState){let e=n.response?JSON.parse(n.response):{};e.url=e.data,e&&e.url?(this.fileList[this.fileList.findIndex((e=>e.key===o))]={...this.fileList[this.fileList.findIndex((e=>e.key===o))],url:e.url,percent:100,...e},setTimeout((()=>{this.fileList[this.fileList.findIndex((e=>e.key===o))]={...this.fileList[this.fileList.findIndex((e=>e.key===o))],status:"success"},this.$emit("on-upload-success",{...this.fileList[this.fileList.findIndex((e=>e.key===o))],status:"success"}),this.$emit("update:modelValue",this.fileList)}),200)):(this.fileList[this.fileList.findIndex((e=>e.key===o))]={...this.fileList[this.fileList.findIndex((e=>e.key===o))],status:"error"},this.$emit("on-upload-error",{...this.fileList[this.fileList.findIndex((e=>e.key===o))],status:"error"}),this.fileList.splice(this.fileList.findIndex((e=>e.key===o)),1))}},n.upload.onprogress=e=>{e.total&&e.loaded&&(this.fileList[this.fileList.findIndex((e=>e.key===o))].percent=e.loaded==e.total?99:parseInt(e.loaded/e.total*100),this.$emit("on-upload-progress",{...this.fileList[this.fileList.findIndex((e=>e.key===o))],status:"uploading",percent:e.loaded==e.total?99:parseInt(e.loaded/e.total*100)}))},n.send(l)},uploadAction2(e,t,o){const n=this;upload(t,o,this.token,{fname:t.name,mimeType:[]},{useCdnDomain:!0}).subscribe({next(e){n.fileList[n.fileList.findIndex((e=>e.key===o))].percent=parseInt(e.total.percent),n.$emit("on-upload-progress",{...n.fileList[n.fileList.findIndex((e=>e.key===o))],status:"uploading",percent:parseInt(e.total.percent)})},error(e){n.$message.error(e.message),n.fileList[n.fileList.findIndex((e=>e.key===o))]={...n.fileList[n.fileList.findIndex((e=>e.key===o))],status:"error"},n.$emit("on-upload-error",{...n.fileList[n.fileList.findIndex((e=>e.key===o))],status:"error"}),n.fileList.splice(n.fileList.findIndex((e=>e.key===o)),1)},complete(e){n.fileList[n.fileList.findIndex((e=>e.key===o))]={...n.fileList[n.fileList.findIndex((e=>e.key===o))],url:n.domain+e.key,percent:100,...e},setTimeout((()=>{n.fileList[n.fileList.findIndex((e=>e.key===o))]={...n.fileList[n.fileList.findIndex((e=>e.key===o))],status:"success"},n.$emit("on-upload-success",{...n.fileList[n.fileList.findIndex((e=>e.key===o))],status:"success"}),n.$emit("update:modelValue",n.fileList)}),200)}})},handleRemove(e){this.disabled||(this.$emit("on-upload-remove",this.fileList[this.fileList.findIndex((t=>t.key===e))]),this.fileList.splice(this.fileList.findIndex((t=>t.key===e)),1),this.$nextTick((()=>{this.$emit("update:modelValue",this.fileList)})))},handleAdd(){this.disabled||(this.editIndex=-1,this.$refs.uploadInput.click())},handlePreviewFile(e){this.viewer&&this.viewer.destroy(),this.uploadId="upload_"+(new Date).getTime(),this.$nextTick((()=>{this.viewer=new Viewer(document.getElementById(this.uploadId)),this.viewer.view(this.fileList.findIndex((t=>t.key===e)))}))}},watch:{modelValue(e){this.fileList=this.modelValue.map((e=>({...e,key:e.key?e.key:(new Date).getTime()+"_"+Math.ceil(99999*Math.random())})))}}},_hoisted_1$g=["id"],_hoisted_2$e={key:0,class:"file-button"},_hoisted_3$9=["accept"],_hoisted_4$8=["accept"],_hoisted_5$8={class:"upload_tip"},_hoisted_6$6={class:"upload-list"},_hoisted_7$5=["href"],_hoisted_8$2=vue.createElementVNode("i",{class:"fm-iconfont icon-file"},null,-1),_hoisted_9$2={class:"list_item-status-label"},_hoisted_10$2={key:0,class:"fm-iconfont icon-check",style:{color:"#67c23a"}},_hoisted_11$2=["onClick"];function _sfc_render$w(e,t,o,n,i,l){const a=vue.resolveComponent("el-button"),r=vue.resolveComponent("a-button"),s=vue.resolveComponent("el-progress"),d=vue.resolveComponent("a-progress");return vue.openBlock(),vue.createElementBlock("div",{class:"fm-upload-file",id:i.uploadId},[o.printRead?vue.createCommentVNode("",!0):vue.withDirectives((vue.openBlock(),vue.createElementBlock("div",_hoisted_2$e,["element"==o.ui?(vue.openBlock(),vue.createBlock(a,{key:0,type:"primary",disabled:o.disabled||i.fileList.length==o.limit,onClick:l.handleAdd},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.upload")),1)])),_:1},8,["disabled","onClick"])):vue.createCommentVNode("",!0),"antd"==o.ui?(vue.openBlock(),vue.createBlock(r,{key:1,size:o.size,disabled:o.disabled||i.fileList.length==o.limit,onClick:l.handleAdd},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.upload")),1)])),_:1},8,["size","disabled","onClick"])):vue.createCommentVNode("",!0),o.multiple?(vue.openBlock(),vue.createElementBlock("input",{key:2,accept:o.accept,multiple:"",ref:"uploadInput",onChange:t[0]||(t[0]=(...e)=>l.handleChange&&l.handleChange(...e)),type:"file",name:"file",class:"upload_input"},null,40,_hoisted_3$9)):(vue.openBlock(),vue.createElementBlock("input",{key:3,accept:o.accept,ref:"uploadInput",onChange:t[1]||(t[1]=(...e)=>l.handleChange&&l.handleChange(...e)),type:"file",name:"file",class:"upload_input"},null,40,_hoisted_4$8))],512)),[[vue.vShow,!o.isQiniu||o.isQiniu&&o.token]]),vue.createElementVNode("div",_hoisted_5$8,vue.toDisplayString(o.tip),1),vue.createElementVNode("ul",_hoisted_6$6,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.fileList,(e=>(vue.openBlock(),vue.createElementBlock("li",{class:vue.normalizeClass(["list_item",{uploading:"uploading"==e.status,"is-success":"success"==e.status,"is-disabled":o.disabled}]),key:e.key},[vue.createElementVNode("a",{class:"list_item-name",href:e.url,target:"_blank"},[_hoisted_8$2,vue.createTextVNode(" "+vue.toDisplayString(e.name),1)],8,_hoisted_7$5),o.printRead?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createElementVNode("label",_hoisted_9$2,["success"===e.status?(vue.openBlock(),vue.createElementBlock("i",_hoisted_10$2)):vue.createCommentVNode("",!0)]),o.disabled?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("i",{key:0,class:"fm-iconfont icon-close",onClick:t=>l.handleRemove(e.key),style:{"font-size":"12px","z-index":"1"}},null,8,_hoisted_11$2)),"uploading"==e.status&&"element"==o.ui?(vue.openBlock(),vue.createBlock(s,{key:1,"stroke-width":2,percentage:e.percent},null,8,["percentage"])):vue.createCommentVNode("",!0),"uploading"==e.status&&"antd"==o.ui?(vue.openBlock(),vue.createBlock(d,{key:2,"stroke-width":2,percent:e.percent},null,8,["percent"])):vue.createCommentVNode("",!0)],64))],2)))),128))])],8,_hoisted_1$g)}var FmFileUpload=_export_sfc(_sfc_main$y,[["render",_sfc_render$w]]),index_vue_vue_type_style_index_0_lang$2="";const _sfc_main$x={name:"fm-sub-form",components:{GenerateColItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateColItem$3})))),GenerateFormItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateFormItem$3})))),GenerateInline:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateInline$2})))),GenerateReport:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateReport$3})))),GenerateTabItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateTabItem$3})))),GenerateCollapse:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCollapse$3})))),GenerateCard:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCard$3}))))},props:["showControl","list","value","models","remote","blanks","disableddata","rules","name","remoteOption","preview","platform","dataSourceValue","eventFunction","widget","printRead","paging","pageSize","containerKey","isAdd","isDelete","isDialog","dialogName","group","fieldNode"],emits:["update:value"],data(){var e;return{subformData:null!=(e=this.value)?e:[],displayFields:{},changeItem:{},pagingData:[],pagingLength:0,currentPage:1,itemModel:{},subHideFields:[],subDisabledFields:[],itemDisabled:{}}},created(){this._generateModel(this.list),this.loadPagingData(),this.subHideFields=this.subformData.map((e=>Object.fromEntries(Object.keys(this.displayFields).map((e=>[e,!this.displayFields[e]]))))),this.subDisabledFields=this.subformData.map((e=>Object.fromEntries(Object.keys(this.itemDisabled).map((e=>[e,!this.itemDisabled[e]])))))},provide(){return{setSubformData:this.setSubformData}},inject:["onFormDisabled","onFormHide","onFormDisplay"],methods:{handleMouseover(e){addClass$1(this.$refs[`formSubformItem_${e}`][0],"is-hover")},handleMouseout(e){removeClass$1(this.$refs[`formSubformItem_${e}`][0],"is-hover")},setSubformData(e,t,o){const n=_.cloneDeep(this.subformData);n[t][o]=e,this.subformData=n},setData(e,t){return new Promise("number"!=typeof e?o=>{t=e,this.subformData.forEach(((e,o)=>{Object.keys(t).forEach((e=>{this.setSubformData(t[e],o,e)}))})),o()}:o=>{this.$nextTick((()=>{Object.keys(t).forEach((o=>{this.setSubformData(t[o],e,o)})),o()}))})},handleAddRow(){if(this.subformData=[...this.subformData,{...this.itemModel}],this.subHideFields.push(Object.fromEntries(Object.keys(this.displayFields).map((e=>[e,!this.displayFields[e]])))),this.subDisabledFields.push(Object.fromEntries(Object.keys(this.itemDisabled).map((e=>[e,!this.itemDisabled[e]])))),this.widget&&this.widget.events&&this.widget.events.onRowAdd){let e=this.widget.events.onRowAdd;this.eventFunction[e]({rowIndex:this.subformData.length-1,field:this.widget.model,currentRef:this,group:this.group,fieldNode:this.fieldNode})}this.paging&&this.$nextTick((()=>{this.subformData.length>this.currentPage*this.pageSize&&(this.currentPage=parseInt((this.subformData.length-1)/this.pageSize)+1),this.loadPagingData()}))},handleRemove(e){const t={...this.subformData[e]},o=[...this.subformData];if(o.splice(e,1),this.subformData=o,this.subHideFields.splice(e,1),this.subDisabledFields.splice(e,1),this.widget&&this.widget.events&&this.widget.events.onRowRemove){let o=this.widget.events.onRowRemove;this.eventFunction[o]({removeIndex:e,removeData:t,field:this.widget.model,currentRef:this,group:this.group,fieldNode:this.fieldNode})}this.pagingData=[],this.pagingLength=0,this.paging&&this.$nextTick((()=>{this.subformData.length%this.pageSize==0&&this.currentPage>parseInt(this.subformData.length/this.pageSize)&&(this.currentPage=parseInt(this.subformData.length/this.pageSize)),this.loadPagingData()}))},hide(e){"string"==typeof e&&(e=[e]),e.forEach((e=>{this.onFormHide(`${this.fieldNode}.${e}`)}))},display(e){"string"==typeof e&&(e=[e]),e.forEach((e=>{this.onFormDisplay(`${this.fieldNode}.${e}`)}))},disabled(e,t){"string"==typeof e&&(e=[e]),this.subformData.forEach(((o,n)=>{e.forEach((e=>{this.subDisabledFields[n][e]=t}))})),this._setDisabled(this.list,e,t)},hideChild(e,t){"string"==typeof t&&(t=[t]),t.forEach((t=>{this.onFormHide(`${this.fieldNode}.${e}.${t}`)}))},displayChild(e,t){"string"==typeof t&&(t=[t]),t.forEach((t=>{this.onFormDisplay(`${this.fieldNode}.${e}.${t}`)}))},disabledChild(e,t,o){"string"==typeof t&&(t=[t]),t.forEach((t=>{this.subDisabledFields[e][t]=o,this.onFormDisabled(`${this.fieldNode}.${e}.${t}`,o)}))},setOptions(e,t){"string"==typeof e&&(e=[e]),this._setOptions(this.list,e,t)},addClassName(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{updateClassName(this.list,e.split("."),t,"add")}))},removeClassName(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{updateClassName(this.list,e.split("."),t,"remove")}))},handlePageChange(e){if(this.currentPage=e,this.pagingData=[],this.pagingLength=0,this.$nextTick((()=>{this.loadPagingData()})),this.widget&&this.widget.events&&this.widget.events.onPageChange){let t=this.widget.events.onPageChange;this.eventFunction[t]({currentPage:e,field:this.widget.model,currentRef:this,group:this.group,fieldNode:this.fieldNode})}},loadPagingData(){let e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;this.pagingData=this.subformData.slice(e,t),this.pagingLength=this.pagingData.length},_generateModel(e){for(let t=0;t<e.length;t++)"grid"==e[t].type?(this.displayFields[e[t].model]=!e[t].options.hidden,e[t].columns.forEach((e=>{this._generateModel(e.list)}))):"tabs"===e[t].type||"collapse"===e[t].type?(e[t].tabs.forEach((e=>{this._generateModel(e.list)})),this.displayFields[e[t].model]=!e[t].options.hidden):"report"===e[t].type?(e[t].rows.forEach((e=>{e.columns.forEach((e=>{this._generateModel(e.list)}))})),this.displayFields[e[t].model]=!e[t].options.hidden):"inline"===e[t].type||"card"===e[t].type?(this._generateModel(e[t].list),this.displayFields[e[t].model]=!e[t].options.hidden):("blank"==e[t].type?this.itemModel[e[t].model]="String"===e[t].options.defaultType?"":"Object"===e[t].options.defaultType?{}:[]:this.itemModel[e[t].model]=_.cloneDeep(e[t].options.defaultValue),this.displayFields[e[t].model]=!e[t].options.hidden,this.itemDisabled[e[t].model]=!e[t].options.disabled)},_setDisabled(e,t,o){for(let n=0;n<e.length;n++)"grid"===e[n].type?e[n].columns.forEach((e=>{this._setDisabled(e.list,t,o)})):"tabs"===e[n].type||"collapse"===e[n].type?e[n].tabs.forEach((e=>{this._setDisabled(e.list,t,o)})):"report"===e[n].type?e[n].rows.forEach((e=>{e.columns.forEach((e=>{this._setDisabled(e.list,t,o)}))})):"inline"===e[n].type||"card"===e[n].type?this._setDisabled(e[n].list,t,o):t.indexOf(e[n].model)>=0&&(e[n].options.disabled=o,this.itemDisabled[e[n].model]=!o)},_setOptions(e,t,o){for(let n=0;n<e.length;n++)"grid"===e[n].type?e[n].columns.forEach((e=>{this._setOptions(e.list,t,o)})):"tabs"===e[n].type||"collapse"===e[n].type?e[n].tabs.forEach((e=>{this._setOptions(e.list,t,o)})):"report"===e[n].type?e[n].rows.forEach((e=>{e.columns.forEach((e=>{this._setOptions(e.list,t,o)}))})):("inline"===e[n].type||"card"===e[n].type)&&this._setOptions(e[n].list,t,o),t.indexOf(e[n].model)>=0&&Object.keys(o).forEach((t=>{e[n].options[t]=o[t]}))}},watch:{value(e){var t,o,n,i,l,a;this.subformData=e;let r=[],s=[];for(let d=0;d<this.value.length;d++){let e=Object.keys(this.displayFields),u={};for(let i=0;i<e.length;i++)u[e[i]]=null!=(n=null==(o=null==(t=this.subHideFields)?void 0:t[d])?void 0:o[e[i]])?n:!this.displayFields[e[i]];r.push(u);let c=Object.keys(this.itemDisabled),p={};for(let t=0;t<c.length;t++)p[c[t]]=null!=(a=null==(l=null==(i=this.subDisabledFields)?void 0:i[d])?void 0:l[c[t]])?a:!this.itemDisabled[c[t]];s.push(p)}this.subHideFields=r,this.subDisabledFields=s},subformData:{deep:!0,handler(e){this.loadPagingData(),this.$emit("update:value",e)}}}},_hoisted_1$f={class:"form-subform"},_hoisted_2$d=["onMouseover","onMouseout"],_hoisted_3$8={key:0,class:"form-subform-index"},_hoisted_4$7={key:1,class:"form-subform-remove"},_hoisted_5$7=vue.createElementVNode("i",{class:"fm-iconfont icon-trash",style:{"font-size":"12px",margin:"5px"}},null,-1),_hoisted_6$5={class:"form-subform-content"},_hoisted_7$4=vue.createElementVNode("i",{class:"fm-iconfont icon-plus",style:{"font-size":"12px",margin:"5px"}},null,-1);function _sfc_render$v(e,t,o,n,i,l){const a=vue.resolveComponent("el-tag"),r=vue.resolveComponent("el-button"),s=vue.resolveComponent("el-popconfirm"),d=vue.resolveComponent("generate-col-item"),u=vue.resolveComponent("generate-tab-item"),c=vue.resolveComponent("generate-collapse"),p=vue.resolveComponent("generate-report"),m=vue.resolveComponent("generate-card"),h=vue.resolveComponent("generate-inline"),f=vue.resolveComponent("generate-form-item"),v=vue.resolveComponent("el-col"),g=vue.resolveComponent("el-pagination"),y=vue.resolveComponent("el-row");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1$f,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.paging?i.pagingLength:i.subformData,((t,n)=>(vue.openBlock(),vue.createElementBlock("div",{class:"form-subform-item",key:(o.paging?o.pageSize*(i.currentPage-1):0)+n,onMouseover:vue.withModifiers((e=>l.handleMouseover((o.paging?o.pageSize*(i.currentPage-1):0)+n)),["stop"]),onMouseout:e=>l.handleMouseout((o.paging?o.pageSize*(i.currentPage-1):0)+n),ref_for:!0,ref:`formSubformItem_${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},[o.showControl?(vue.openBlock(),vue.createElementBlock("div",_hoisted_3$8,[vue.createVNode(a,{round:""},{default:vue.withCtx((()=>[vue.createTextVNode("#"+vue.toDisplayString((o.paging?o.pageSize*(i.currentPage-1):0)+n+1),1)])),_:2},1024)])):vue.createCommentVNode("",!0),o.showControl?(vue.openBlock(),vue.createElementBlock("div",_hoisted_4$7,[!o.printRead&&o.isDelete?(vue.openBlock(),vue.createBlock(s,{key:0,teleported:!1,title:e.$t("fm.description.deleteConfirm"),onConfirm:e=>l.handleRemove((o.paging?o.pageSize*(i.currentPage-1):0)+n)},{reference:vue.withCtx((()=>[vue.createVNode(r,{disabled:o.disableddata,type:"danger",size:"small",circle:""},{default:vue.withCtx((()=>[_hoisted_5$7])),_:1},8,["disabled"])])),_:2},1032,["title","onConfirm"])):vue.createCommentVNode("",!0),o.printRead||!o.isDelete?(vue.openBlock(),vue.createBlock(a,{key:1,round:""},{default:vue.withCtx((()=>[vue.createTextVNode("#"+vue.toDisplayString((o.paging?o.pageSize*(i.currentPage-1):0)+n+1),1)])),_:2},1024)):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0),vue.createElementVNode("div",_hoisted_6$5,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.list,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,["grid"==t.type?(vue.openBlock(),vue.createBlock(d,{key:t.key,model:i.subformData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.subHideFields,"sub-disabled-fields":i.subDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":!0,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"sub-name":o.name,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","sub-name","is-dialog","dialog-name","group","field-node"])):"tabs"==t.type?(vue.openBlock(),vue.createBlock(u,{key:t.key,model:i.subformData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.subHideFields,"sub-disabled-fields":i.subDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":!0,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"sub-name":o.name,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","sub-name","is-dialog","dialog-name","group","field-node"])):"collapse"==t.type?(vue.openBlock(),vue.createBlock(c,{key:t.key,model:i.subformData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.subHideFields,"sub-disabled-fields":i.subDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":!0,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"sub-name":o.name,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","sub-name","is-dialog","dialog-name","group","field-node"])):"report"==t.type?(vue.openBlock(),vue.createBlock(p,{key:t.key,model:i.subformData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.subHideFields,"sub-disabled-fields":i.subDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":!0,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"sub-name":o.name,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","sub-name","is-dialog","dialog-name","group","field-node"])):"card"==t.type?(vue.openBlock(),vue.createBlock(m,{key:t.key,model:i.subformData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.subHideFields,"sub-disabled-fields":i.subDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":!0,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"sub-name":o.name,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","sub-name","is-dialog","dialog-name","group","field-node"])):"inline"==t.type?(vue.openBlock(),vue.createBlock(h,{key:t.key,model:i.subformData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.subHideFields,"sub-disabled-fields":i.subDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":!0,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"sub-name":o.name,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","sub-name","is-dialog","dialog-name","group","field-node"])):(vue.openBlock(),vue.createBlock(f,{key:t.key,models:i.subformData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.subHideFields,"sub-disabled-fields":i.subDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":!0,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"sub-name":o.name,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","sub-name","is-dialog","dialog-name","group","field-node"]))],64)))),256))])],40,_hoisted_2$d)))),128)),vue.createVNode(y,{class:"form-subform-action"},{default:vue.withCtx((()=>[vue.createVNode(v,{span:o.preview&&"mobile"!=o.platform||!o.preview?12:24,xs:24},{default:vue.withCtx((()=>[!o.disableddata&&o.isAdd?(vue.openBlock(),vue.createBlock(r,{key:0,link:"",type:"primary",onClick:l.handleAddRow},{default:vue.withCtx((()=>[_hoisted_7$4,vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.add")),1)])),_:1},8,["onClick"])):vue.createCommentVNode("",!0)])),_:1},8,["span"]),vue.createVNode(v,{span:(!o.preview||"mobile"==o.platform)&&o.preview||o.disableddata?24:12,xs:24},{default:vue.withCtx((()=>[o.paging&&i.subformData.length?(vue.openBlock(),vue.createBlock(g,{key:0,style:{float:"right"},layout:"total, prev, pager, next","page-size":o.pageSize,"current-page":i.currentPage,total:i.subformData.length,"pager-count":5,onCurrentChange:l.handlePageChange},null,8,["page-size","current-page","total","onCurrentChange"])):vue.createCommentVNode("",!0)])),_:1},8,["span"])])),_:1})])}var FmSubForm$1=_export_sfc(_sfc_main$x,[["render",_sfc_render$v]]);const _sfc_main$w={name:"fm-group",components:{GenerateColItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateColItem$3})))),GenerateFormItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateFormItem$3})))),GenerateInline:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateInline$2})))),GenerateReport:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateReport$3})))),GenerateTabItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateTabItem$3})))),GenerateCollapse:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCollapse$3})))),GenerateCard:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCard$3}))))},props:["value","models","rules","element","remote","blanks","edit","remoteOption","platform","preview","containerKey","dataSourceValue","eventFunction","printRead","group","fieldNode"],data(){var e;return{displayFields:{},groupModel:null!=(e=this.value)?e:{},groupDisabled:{}}},emits:["update:value"],inject:["generateComponentInstance","deleteComponentInstance","getFormComponent","onFormHide","onFormDisplay"],created(){this._generateModel(this.element.list)},mounted(){this.generateComponentInstance&&this.generateComponentInstance(this.fieldNode,this.$refs[`generate-group-${this.element.model}`].$parent)},beforeUnmount(){this.deleteComponentInstance&&this.deleteComponentInstance(this.fieldNode)},provide(){return{setGroupData:this.setGroupData}},methods:{setGroupData(e,t){this.groupModel[t]=e},_generateModel(e){var t;for(let o=0;o<e.length;o++)"grid"==e[o].type?(this.displayFields[e[o].model]=!e[o].options.hidden,e[o].columns.forEach((e=>{this._generateModel(e.list)}))):"tabs"===e[o].type||"collapse"===e[o].type?(e[o].tabs.forEach((e=>{this._generateModel(e.list)})),this.displayFields[e[o].model]=!e[o].options.hidden):"report"===e[o].type?(e[o].rows.forEach((e=>{e.columns.forEach((e=>{this._generateModel(e.list)}))})),this.displayFields[e[o].model]=!e[o].options.hidden):"inline"===e[o].type||"card"===e[o].type?(this._generateModel(e[o].list),this.displayFields[e[o].model]=!e[o].options.hidden):("blank"==e[o].type?this.groupModel[e[o].model]="String"===e[o].options.defaultType?"":"Object"===e[o].options.defaultType?{}:[]:this.groupModel[e[o].model]=null!=(t=this.value[e[o].model])?t:_.cloneDeep(e[o].options.defaultValue),this.displayFields[e[o].model]=!e[o].options.hidden,this.groupDisabled[e[o].model]=!e[o].options.disabled)},hide(e){"string"==typeof e&&(e=[e]),e.forEach((e=>{this.onFormHide(`${this.fieldNode}.${e}`)}))},display(e){"string"==typeof e&&(e=[e]),e.forEach((e=>{this.onFormDisplay(`${this.fieldNode}.${e}`)}))},disabled(e,t){"string"==typeof e&&(e=[e]),this._setDisabled(this.element.list,e,t)},validate(){return new Promise(((e,t)=>{let o=this._getAllRuleFields();this.getFormComponent().validateField(o,((o,n)=>{o?e():t(n)}))}))},setOptions(e,t){"string"==typeof e&&(e=[e]),this._setOptions(this.element.list,e,t)},setData(e){return new Promise((t=>{this.$nextTick((()=>{Object.keys(e).forEach((t=>{this.groupModel[t]=e[t]})),t()}))}))},getValues(){return this.groupModel},getValue(e){return this.groupModel[e]},addClassName(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{updateClassName(this.element.list,e.split("."),t,"add")}))},removeClassName(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{updateClassName(this.element.list,e.split("."),t,"remove")}))},_setDisabled(e,t,o){for(let n=0;n<e.length;n++)"grid"===e[n].type?e[n].columns.forEach((e=>{this._setDisabled(e.list,t,o)})):"tabs"===e[n].type||"collapse"===e[n].type?e[n].tabs.forEach((e=>{this._setDisabled(e.list,t,o)})):"report"===e[n].type?e[n].rows.forEach((e=>{e.columns.forEach((e=>{this._setDisabled(e.list,t,o)}))})):"inline"===e[n].type||"card"===e[n].type?this._setDisabled(e[n].list,t,o):t.indexOf(e[n].model)>=0&&(e[n].options.disabled=o)},_setOptions(e,t,o){for(let n=0;n<e.length;n++)"grid"===e[n].type?e[n].columns.forEach((e=>{this._setOptions(e.list,t,o)})):"tabs"===e[n].type||"collapse"===e[n].type?e[n].tabs.forEach((e=>{this._setOptions(e.list,t,o)})):"report"===e[n].type?e[n].rows.forEach((e=>{e.columns.forEach((e=>{this._setOptions(e.list,t,o)}))})):("inline"===e[n].type||"card"===e[n].type)&&this._setOptions(e[n].list,t,o),t.indexOf(e[n].model)>=0&&Object.keys(o).forEach((t=>{e[n].options[t]=o[t]}))},_getAllRuleFields(){let e=[];return Object.keys(this.groupModel).forEach((t=>{if(Array.isArray(this.groupModel[t])){this.groupModel[t].forEach(((o,n)=>{Object.keys(o).forEach((o=>{e.push(`${this.fieldNode}.${t}.${n}.${o}`)}))}))}else e.push(`${this.fieldNode}.${t}`)})),e}},watch:{groupModel:{deep:!0,handler(e){this.$emit("update:value",e)}},value:{deep:!0,handler(e){this.groupModel=e}}}};function _sfc_render$u(e,t,o,n,i,l){const a=vue.resolveComponent("generate-col-item"),r=vue.resolveComponent("generate-tab-item"),s=vue.resolveComponent("generate-collapse"),d=vue.resolveComponent("generate-report"),u=vue.resolveComponent("generate-card"),c=vue.resolveComponent("generate-inline"),p=vue.resolveComponent("generate-form-item");return vue.openBlock(),vue.createElementBlock("div",{style:vue.normalizeStyle({width:o.element.options.width}),ref:`generate-group-${o.element.model}`},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.list,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,["grid"==t.type?(vue.openBlock(),vue.createBlock(a,{key:t.key,model:i.groupModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-group":!0,"is-subform":!1,group:o.group?o.group+"."+o.element.model:o.element.model,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","group","field-node"])):"tabs"==t.type?(vue.openBlock(),vue.createBlock(r,{key:t.key,model:i.groupModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-group":!0,"is-subform":!1,group:o.group?o.group+"."+o.element.model:o.element.model,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","group","field-node"])):"collapse"==t.type?(vue.openBlock(),vue.createBlock(s,{key:t.key,model:i.groupModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-group":!0,"is-subform":!1,group:o.group?o.group+"."+o.element.model:o.element.model,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","group","field-node"])):"report"==t.type?(vue.openBlock(),vue.createBlock(d,{key:t.key,model:i.groupModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-group":!0,"is-subform":!1,group:o.group?o.group+"."+o.element.model:o.element.model,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","group","field-node"])):"card"==t.type?(vue.openBlock(),vue.createBlock(u,{key:t.key,model:i.groupModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-group":!0,"is-subform":!1,group:o.group?o.group+"."+o.element.model:o.element.model,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","group","field-node"])):"inline"==t.type?(vue.openBlock(),vue.createBlock(c,{key:t.key,model:i.groupModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-group":!0,"is-subform":!1,group:o.group?o.group+"."+o.element.model:o.element.model,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","group","field-node"])):(vue.openBlock(),vue.createBlock(p,{key:t.key,models:i.groupModel,rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-group":!0,"is-subform":!1,group:o.group?o.group+"."+o.element.model:o.element.model,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","group","field-node"]))],64)))),256))],4)}var FmGroup$1=_export_sfc(_sfc_main$w,[["render",_sfc_render$u]]);const _sfc_main$v={name:"generate-element-item-ext",components:{Editor:_sfc_main$1t,Search:search_default,EmpSelector:EmpSelector,OrgSelector:OrgSelector,ProcessSelector:ProcessSelector,KindEditor:KindEditor},props:["widget","modelValue","models","remote","isTable","blanks","disabled","edit","remoteOption","rules","platform","preview","dataSourceValue","eventFunction","rowIndex","tableName","printRead","formComponent","isMobile","isSubform","subName"],emits:["update:modelValue"],data(){return{dataModel:this.modelValue,dataModels:this.models,key:(new Date).getTime(),modelName:this.widget.model,propsModel:{multiple:this.widget.options.multiple||!1,checkStrictly:this.widget.options.checkStrictly||!1},propsTransfer:{key:"key",label:"label"},remoteOptions:[]}},inject:["generateComponentInstance","deleteComponentInstance"],created(){},mounted(){let e=this.widget.model;this.generateComponentInstance&&this.generateComponentInstance(e,this.$refs["fm-"+this.widget.model])},beforeUnmount(){let e=this.widget.model;this.deleteComponentInstance&&this.deleteComponentInstance(e)},methods:{},watch:{dataModel(e,t){this.dataModel=e,this.$emit("update:modelValue",e)},modelValue(e){this.dataModel=e}}},_hoisted_1$e=["innerHTML"];function _sfc_render$t(e,t,o,n,i,l){const a=vue.resolveComponent("emp-selector"),r=vue.resolveComponent("org-selector"),s=vue.resolveComponent("process-selector"),d=vue.resolveComponent("KindEditor");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass({"print-read-label":o.printRead}),style:{width:"100%"}},["empselector"==o.widget.type?(vue.openBlock(),vue.createBlock(a,{key:0,modelValue:i.dataModel,"onUpdate:modelValue":t[0]||(t[0]=e=>i.dataModel=e),printRead:o.printRead,disabled:!o.edit||o.widget.options.disabled,clearable:o.widget.options.clearable,multiple:o.widget.options.multiple,placeholder:o.widget.options.placeholder,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width}),options:o.widget.options.remote?i.remoteOptions:o.widget.options.options,ref:"fm-"+o.widget.model,platform:o.platform},null,8,["modelValue","printRead","disabled","clearable","multiple","placeholder","style","options","platform"])):"orgselector"==o.widget.type?(vue.openBlock(),vue.createBlock(r,{key:1,modelValue:i.dataModel,"onUpdate:modelValue":t[1]||(t[1]=e=>i.dataModel=e),printRead:o.printRead,disabled:!o.edit||o.widget.options.disabled,clearable:o.widget.options.clearable,multiple:o.widget.options.multiple,placeholder:o.widget.options.placeholder,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width}),options:o.widget.options.remote?i.remoteOptions:o.widget.options.options,ref:"fm-"+o.widget.model,platform:o.platform,"select-type":o.widget.options.selectType},null,8,["modelValue","printRead","disabled","clearable","multiple","placeholder","style","options","platform","select-type"])):"processselector"==o.widget.type?(vue.openBlock(),vue.createBlock(s,{key:2,modelValue:i.dataModel,"onUpdate:modelValue":t[2]||(t[2]=e=>i.dataModel=e),printRead:o.printRead,disabled:!o.edit||o.widget.options.disabled,clearable:o.widget.options.clearable,multiple:o.widget.options.multiple,placeholder:o.widget.options.placeholder,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width}),options:o.widget.options.remote?i.remoteOptions:o.widget.options.options,ref:"fm-"+o.widget.model,platform:o.platform},null,8,["modelValue","printRead","disabled","clearable","multiple","placeholder","style","options","platform"])):"kindeditor"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:3},[o.printRead?(vue.openBlock(),vue.createElementBlock("div",{key:0,innerHTML:i.dataModel,class:"ql-editor"},null,8,_hoisted_1$e)):(vue.openBlock(),vue.createBlock(d,{key:1,id:"fm-"+o.widget.key,disabled:!o.edit||o.widget.options.disabled,placeholder:o.widget.options.placeholder,width:o.widget.options.width,height:o.widget.options.height,toolbar:o.widget.options.customToolbar,readonly:o.widget.options.readonly,"auto-height-mode":o.widget.options.autosize,content:i.dataModel,loadStyleMode:!1,"css-data":o.widget.options.cssData,style:{width:"100%"},ref:"fm-"+o.widget.model,modelValue:i.dataModel,"onUpdate:modelValue":t[3]||(t[3]=e=>i.dataModel=e)},null,8,["id","disabled","placeholder","width","height","toolbar","readonly","auto-height-mode","content","css-data","modelValue"]))],64)):vue.createCommentVNode("",!0)],2)}var GenerateElementItemExt=_export_sfc(_sfc_main$v,[["render",_sfc_render$t]]);const _sfc_main$u={name:"generate-element-item",components:{FmUpload:FmUpload,FmFormTable:FmFormTable$1,FmFileUpload:FmFileUpload,FmSubForm:FmSubForm$1,FmGroup:FmGroup$1,Editor:_sfc_main$1t,FmDataTable:FmDataTable$1,GenerateElementItemExt:GenerateElementItemExt},props:["widget","modelValue","models","remote","isTable","blanks","disabled","edit","remoteOption","rules","platform","preview","dataSourceValue","eventFunction","rowIndex","tableName","printRead","isMobile","isSubform","subName","isDialog","dialogName","group","fieldNode","containerKey","isGroup"],emits:["update:modelValue","on-table-change"],data(){return{dataModel:this.modelValue,dataModels:this.models,key:(new Date).getTime(),modelName:this.widget.model,propsModel:{multiple:this.widget.options.multiple||!1,checkStrictly:this.widget.options.checkStrictly||!1},propsTransfer:{key:"key",label:"label"},remoteOptions:[],dynamicEvents:this.handleOnDynamicEvent(),generateDisabled:void 0,remoteToken:""}},computed:{elementDisabled(){let e=this.widget.options.disabled;return isExpression(this.widget.options.disabled)&&(e=executeExpression(extractExpression(this.widget.options.disabled),this.currentOptions,this.formContext)),"boolean"==typeof this.generateDisabled?!this.edit||this.generateDisabled:!this.edit||Boolean(e)},currentOptions(){return this.isTable||this.isSubform?{value:this.dataModel,fieldNode:this.fieldNode,currentRef:this.$refs["fm-"+this.widget.model],rowIndex:this.rowIndex,row:_.cloneDeep(this.models),field:this.widget.model,group:this.group}:{value:this.dataModel,fieldNode:this.fieldNode,currentRef:this.$refs["fm-"+this.widget.model],field:this.widget.model,group:this.group}},extendProps(){let e={};return this.widget.options.extendProps&&Object.keys(this.widget.options.extendProps).forEach((t=>{let o=this.widget.options.extendProps[t];isExpression(o)?e[t]=executeExpression(extractExpression(o),this.currentOptions,this.formContext):e[t]=o})),e},groupNode(){return this.group?this.group+"."+this.widget.model:this.widget.model}},inject:["generateComponentInstance","deleteComponentInstance","eventScriptConfig","dynamicValueData","formContext","sendRequest"],created(){if(this.widget.options.remote||("steps"==this.widget.type?this.loadOptions(this.widget.options.steps):"transfer"==this.widget.type?this.loadOptions(this.widget.options.data):this.loadOptions(this.widget.options.options)),!this.widget.options.remote||Object.keys(this.widget.options).indexOf("remoteType")>=0&&"func"!=this.widget.options.remoteType||!this.remote[this.widget.options.remoteFunc]||this.remote[this.widget.options.remoteFunc]((e=>{this.loadOptions(e)})),this.widget.options.remote&&"option"==this.widget.options.remoteType&&this.remoteOption[this.widget.options.remoteOption]&&this.loadOptions(this.remoteOption[this.widget.options.remoteOption]),this.widget.options.remote&&"datasource"==this.widget.options.remoteType&&this.dataSourceValue){let e=this.getDataSourceOptions();e&&e.value&&this.loadOptions(e.value)}if(this.widget.options.remote&&"fx"==this.widget.options.remoteType){let e=executeExpression(this.widget.options.remoteFx,{},this.formContext);e&&this.loadOptions(e)}if("imgupload"!==this.widget.type&&"fileupload"!==this.widget.type||!this.widget.options.isQiniu||this.loadUploadConfig(),"component"==this.widget.type){const e=this;this.$options.components[`component-${this.widget.key}-${this.key}`]={template:`${this.widget.options.template}`,props:["modelValue"],emits:["update:modelValue"],data:()=>({dataModel:this.modelValue,formState:this.formContext}),watch:{dataModel(e){"antd"==this.ui?EventBus.$emit("on-field-change",this.$attrs.id,e):this.$emit("update:modelValue",e)},modelValue(e){this.dataModel=e}},methods:{triggerEvent(t,o){if(e.eventScriptConfig()){let n=e.eventScriptConfig().find((e=>e.name==t));n&&e.eventFunction[n.key]({...e.currentOptions,$eventArgs:o})}}}}}},mounted(){this.generateComponentInstance&&this.generateComponentInstance(this.fieldNode,this.$refs["fm-"+this.widget.model]),this.handleOnMounted()},beforeUnmount(){this.deleteComponentInstance&&this.deleteComponentInstance(this.fieldNode),this.$options.components[`component-${this.widget.key}-${this.key}`]&&(this.$options.components[`component-${this.widget.key}-${this.key}`]=null)},methods:{handleOnDynamicEvent(){let e={};for(let t in this.widget.events){let o=this.widget.events[t];o&&(e[t]=this.callbackDynamicFunc(o))}return e},callbackDynamicFunc(e){return(...t)=>{this.eventFunction[e]({...this.currentOptions,$eventArgs:t})}},refreshOptionData(e){return new Promise(((t,o)=>{if(this.widget.options.remote&&"fx"===this.widget.options.remoteType&&this.widget.options.remoteFx){let e=executeExpression(this.widget.options.remoteFx,this.currentOptions,this.formContext);null!==e&&this.loadOptions(e),t(e)}if(this.widget.options.remote&&"datasource"===this.widget.options.remoteType&&this.widget.options.remoteDataSource){let n="string"==typeof this.widget.options.remoteArgs?{}:{...this.widget.options.remoteArgs};for(let e in n)isExpression(n[e])&&(n[e]=executeExpression(extractExpression(n[e]),this.currentOptions,this.formContext));e&&"object"==typeof e&&(n={...n,...e});let i=this.group?this.group+"."+this.widget.model+"."+this.widget.options.remoteDataSource:this.widget.model+"."+this.widget.options.remoteDataSource,l=this.dataSourceValue.find((e=>e.key===i&&_.isEqual(e.args,n)));l?(this.loadOptions(l.value),t(l.value)):this.sendRequest(this.widget.options.remoteDataSource,n).then((e=>{this.loadOptions(e),t(e)})).catch((e=>{o(e)}))}}))},loadOptions(e){Array.isArray(e)&&(this.remoteOptions=e.map((e=>this.widget.options.props.children&&this.widget.options.props.children.length&&Object.keys(e).includes(this.widget.options.props.children)?{value:e[this.widget.options.props.value],label:e[this.widget.options.props.label],children:this.processRemoteProps(e[this.widget.options.props.children],this.widget.options.props)}:"steps"==this.widget.type?{title:e[this.widget.options.props.title]+"",description:e[this.widget.options.props.description]}:"transfer"==this.widget.type?e:{value:e[this.widget.options.props.value],label:e[this.widget.options.props.label]})))},getOptions(){return JSON.parse(JSON.stringify(this.remoteOptions))},processRemoteProps(e,t){return e&&e.length?e.map((e=>this.processRemoteProps(e[t.children],t).length?{value:e[t.value],label:e[t.label],children:this.processRemoteProps(e[t.children],t)}:{value:e[t.value],label:e[t.label]})):[]},onCascaderChange(e){e&&this.$nextTick((()=>{setTimeout((()=>{this.$parent&&this.$parent.clearValidate(),this.$parent&&this.$parent.$parent&&this.$parent.$parent.$refs.generateFormItem&&this.$parent.$parent.$refs.generateFormItem.clearValidate()}))}))},handleTransferChange(e){this.dataModel=e},getCascaderText(e,t,o=[]){if(e.length>=1){let n=null==t?void 0:t.find((t=>t.value==e[0]));return n&&o.push(n.label),e.splice(0,1),this.getCascaderText(e,null==n?void 0:n.children,o)}if(0==e.length)return o},getTreeText(e,t){for(let o=0;o<t.length;o++){let n=t[o];if(n.value==e)return n.label;if(n.children&&n.children.length>0){let t=this.getTreeText(e,n.children);if("-"==t)continue;return t}}return"-"},loadUploadConfig(){if("func"===this.widget.options.tokenType)!this.widget.options.token&&this.remote[this.widget.options.tokenFunc]((e=>{this.remoteToken=e}));else if("fx"===this.widget.options.tokenType){let e=executeExpression(this.widget.options.tokenFx,this.currentOptions,this.formContext);e&&(this.remoteToken=e)}else if(this.dataSourceValue){let e=this.getDataSourceOptions("tokenDataSource");e&&e.value&&(this.remoteToken=e.value)}},handleOnMounted(){this.execFunction("onMounted",{})},handleOnClick(){this.execFunction("onClick",{})},handleOnFocus(){this.execFunction("onFocus",{})},handleOnBlur(){this.execFunction("onBlur",{})},handleOnUploadSelect(e){return this.execFunction("onSelect",{file:e})},handleOnUploadSuccess(e){this.execFunction("onUploadSuccess",{file:e})},handleOnUploadError(e){this.execFunction("onUploadError",{file:e})},handleOnUploadProgress(e){this.execFunction("onUploadProgress",{file:e})},handleOnUploadRemove(e){this.execFunction("onRemove",{file:e})},handlePageChange(e){this.execFunction("onPageChange",e)},handleCurrentRow(e){this.execFunction("onCurrentRow",e)},handleSelectionChange(e){this.execFunction("onSelectionChange",{selection:e})},handleOperate({funcKey:e,$index:t,column:o,row:n}){return this.eventFunction[e]({field:this.widget.model,currentRef:this.$refs["fm-"+this.widget.model],group:this.group,fieldNode:this.fieldNode,rowIndex:t,$index:t,column:o,row:{...n}})},execFunction(e,t){if(this.widget.events&&this.widget.events[e]){let o=this.widget.events[e];return this.eventFunction[o]({...this.currentOptions,...t})}},getDataSourceOptions(e="remoteDataSource"){let t=this.group?this.group+"."+this.widget.model+"."+this.widget.options[e]:this.widget.model+"."+this.widget.options[e];return this.dataSourceValue.find((e=>e.key===t))},disabledElement(e){this.generateDisabled=e}},watch:{modelValue(e){this.dataModel=e},dataModel(e,t){JSON.stringify(e)!=JSON.stringify(t)&&this.$emit("update:modelValue",e)},remoteOption:{deep:!0,handler:function(e){Object.keys(this.remoteOption).indexOf(this.widget.options.remoteOption)>=0&&this.widget.options.remote&&"option"==this.widget.options.remoteType&&this.loadOptions(this.remoteOption[this.widget.options.remoteOption])}},dataSourceValue:{deep:!0,handler:function(e){if(this.dataSourceValue){let e=this.getDataSourceOptions();e&&e.value&&this.loadOptions(e.value)}"imgupload"!==this.widget.type&&"fileupload"!==this.widget.type||!this.widget.options.isQiniu||this.loadUploadConfig()}}}},_hoisted_1$d={key:0},_hoisted_2$c={key:0},_hoisted_3$7={key:0},_hoisted_4$6=["innerHTML"],_hoisted_5$6=["innerHTML"];function _sfc_render$s(e,t,o,n,i,l){var a,r,s,d,u,c,p,m,h,f,v,g,y,b,w,k,_;const C=vue.resolveComponent("el-input"),x=vue.resolveComponent("el-input-number"),S=vue.resolveComponent("el-radio"),V=vue.resolveComponent("el-radio-group"),N=vue.resolveComponent("el-checkbox"),E=vue.resolveComponent("el-checkbox-group"),$=vue.resolveComponent("el-time-picker"),D=vue.resolveComponent("el-date-picker"),B=vue.resolveComponent("el-rate"),T=vue.resolveComponent("el-color-picker"),O=vue.resolveComponent("el-option"),I=vue.resolveComponent("el-select"),F=vue.resolveComponent("el-switch"),L=vue.resolveComponent("el-slider"),P=vue.resolveComponent("fm-upload"),M=vue.resolveComponent("Editor"),A=vue.resolveComponent("el-cascader"),R=vue.resolveComponent("el-tree-select"),z=vue.resolveComponent("fm-form-table"),U=vue.resolveComponent("fm-sub-form"),W=vue.resolveComponent("fm-group"),j=vue.resolveComponent("fm-file-upload"),H=vue.resolveComponent("el-button"),G=vue.resolveComponent("el-link"),K=vue.resolveComponent("el-step"),q=vue.resolveComponent("el-steps"),Y=vue.resolveComponent("el-pagination"),X=vue.resolveComponent("el-transfer"),J=vue.resolveComponent("fm-data-table"),Q=vue.resolveComponent("generate-element-item-ext");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass({"print-read-label":o.printRead}),style:{width:"100%"}},["blank"==o.widget.type?(vue.openBlock(),vue.createElementBlock("div",{key:0,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width})},[vue.renderSlot(e.$slots,o.widget.model,{model:i.dataModels})],4)):vue.createCommentVNode("",!0),"component"==o.widget.type?(vue.openBlock(),vue.createElementBlock("div",{key:1,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width})},[(vue.openBlock(),vue.createBlock(vue.resolveDynamicComponent(`component-${o.widget.key}-${i.key}`),{key:i.key,modelValue:i.dataModel,"onUpdate:modelValue":t[0]||(t[0]=e=>i.dataModel=e),ref:"fm-"+o.widget.model},null,8,["modelValue"]))],4)):vue.createCommentVNode("",!0),"custom"==o.widget.type?(vue.openBlock(),vue.createElementBlock("div",{key:2,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width})},[(vue.openBlock(),vue.createBlock(vue.resolveDynamicComponent(o.widget.el),vue.mergeProps({modelValue:i.dataModel,"onUpdate:modelValue":t[1]||(t[1]=e=>i.dataModel=e),width:o.widget.options.width,height:o.widget.options.height,placeholder:o.widget.options.placeholder,readonly:o.widget.options.readonly,disabled:l.elementDisabled,editable:o.widget.options.editable,clearable:o.widget.options.clearable,ref:"fm-"+o.widget.model,"print-read":o.printRead},{...o.widget.options.customProps,...l.extendProps},vue.toHandlers(i.dynamicEvents)),null,16,["modelValue","width","height","placeholder","readonly","disabled","editable","clearable","print-read"]))],4)):vue.createCommentVNode("",!0),"input"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:3},[o.printRead?(vue.openBlock(),vue.createElementBlock("span",_hoisted_1$d,vue.toDisplayString(i.dataModel),1)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[!o.widget.options.dataTypeCheck||"number"!=o.widget.options.dataType&&"integer"!=o.widget.options.dataType&&"float"!=o.widget.options.dataType?(vue.openBlock(),vue.createBlock(C,vue.mergeProps({key:1,type:o.widget.options.dataTypeCheck?o.widget.options.dataType:"text",modelValue:i.dataModel,"onUpdate:modelValue":t[3]||(t[3]=e=>i.dataModel=e),disabled:l.elementDisabled,placeholder:o.widget.options.placeholder,"show-password":o.widget.options.showPassword,style:{width:o.isTable?"100%":o.widget.options.width},clearable:o.widget.options.clearable,ref:"fm-"+o.widget.model,maxlength:o.widget.options.maxlength,"show-word-limit":o.widget.options.showWordLimit},{...o.widget.options.customProps,...l.extendProps},{onFocus:l.handleOnFocus,onBlur:l.handleOnBlur}),null,16,["type","modelValue","disabled","placeholder","show-password","style","clearable","maxlength","show-word-limit","onFocus","onBlur"])):(vue.openBlock(),vue.createBlock(C,vue.mergeProps({key:0,type:"number",modelValue:i.dataModel,"onUpdate:modelValue":t[2]||(t[2]=e=>i.dataModel=e),modelModifiers:{number:!0},disabled:l.elementDisabled,clearable:o.widget.options.clearable,placeholder:o.widget.options.placeholder,"show-password":o.widget.options.showPassword,style:{width:o.isTable?"100%":o.widget.options.width},ref:"fm-"+o.widget.model},{...o.widget.options.customProps,...l.extendProps},{onFocus:l.handleOnFocus,onBlur:l.handleOnBlur}),null,16,["modelValue","disabled","clearable","placeholder","show-password","style","onFocus","onBlur"]))],64))],64)):vue.createCommentVNode("",!0),"textarea"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:4},[o.printRead?(vue.openBlock(),vue.createElementBlock("pre",_hoisted_2$c,vue.toDisplayString(i.dataModel),1)):(vue.openBlock(),vue.createBlock(C,vue.mergeProps({key:1,type:"textarea",rows:o.widget.options.rows,modelValue:i.dataModel,"onUpdate:modelValue":t[4]||(t[4]=e=>i.dataModel=e),disabled:l.elementDisabled,placeholder:o.widget.options.placeholder,style:{width:o.isTable?"100%":o.widget.options.width},clearable:o.widget.options.clearable,ref:"fm-"+o.widget.model,maxlength:o.widget.options.maxlength,"show-word-limit":o.widget.options.showWordLimit,autosize:o.widget.options.autosize},{...o.widget.options.customProps,...l.extendProps},{onFocus:l.handleOnFocus,onBlur:l.handleOnBlur}),null,16,["rows","modelValue","disabled","placeholder","style","clearable","maxlength","show-word-limit","autosize","onFocus","onBlur"]))],64)):vue.createCommentVNode("",!0),"number"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:5},[o.printRead?(vue.openBlock(),vue.createElementBlock("span",_hoisted_3$7,vue.toDisplayString("number"==typeof i.dataModel?i.dataModel.toFixed(o.widget.options.precision):i.dataModel),1)):(vue.openBlock(),vue.createBlock(x,vue.mergeProps({key:1,modelValue:i.dataModel,"onUpdate:modelValue":t[5]||(t[5]=e=>i.dataModel=e),style:{width:o.isTable?"100%":o.widget.options.width},step:o.widget.options.step,disabled:l.elementDisabled,min:o.widget.options.min,max:o.widget.options.max,"controls-position":o.widget.options.controlsPosition,precision:o.widget.options.precision,controls:o.widget.options.controls,ref:"fm-"+o.widget.model},o.widget.options.customProps,{onFocus:l.handleOnFocus,onBlur:l.handleOnBlur}),null,16,["modelValue","style","step","disabled","min","max","controls-position","precision","controls","onFocus","onBlur"]))],64)):vue.createCommentVNode("",!0),"radio"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:6},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[o.widget.options.remote?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(i.remoteOptions.find((e=>e.value==i.dataModel))&&i.remoteOptions.find((e=>e.value==i.dataModel)).label),1)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createTextVNode(vue.toDisplayString(o.widget.options.showLabel?i.remoteOptions.find((e=>e.value==i.dataModel))&&i.remoteOptions.find((e=>e.value==i.dataModel)).label:i.dataModel),1)],64))],64)):(vue.openBlock(),vue.createBlock(V,vue.mergeProps({key:1,modelValue:i.dataModel,"onUpdate:modelValue":t[6]||(t[6]=e=>i.dataModel=e),style:{width:o.isTable?"100%":o.widget.options.width,display:"block"},disabled:l.elementDisabled,ref:"fm-"+o.widget.model},{...o.widget.options.customProps,...l.extendProps}),{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.remoteOptions,((e,t)=>(vue.openBlock(),vue.createBlock(S,{style:vue.normalizeStyle({display:o.widget.options.inline?"inline-block":"block"}),value:e.value,label:e.value,key:t},{default:vue.withCtx((()=>[o.widget.options.remote?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(e.label),1)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createTextVNode(vue.toDisplayString(o.widget.options.showLabel?e.label:e.value),1)],64))])),_:2},1032,["style","value","label"])))),128))])),_:1},16,["modelValue","style","disabled"]))],64)):vue.createCommentVNode("",!0),"checkbox"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:7},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[o.widget.options.remote?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(null==(a=i.dataModel)?void 0:a.map((e=>i.remoteOptions.find((t=>t.value==e))&&i.remoteOptions.find((t=>t.value==e)).label)).join("、")),1)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createTextVNode(vue.toDisplayString(o.widget.options.showLabel?null==(r=i.dataModel)?void 0:r.map((e=>i.remoteOptions.find((t=>t.value==e))&&i.remoteOptions.find((t=>t.value==e)).label)).join("、"):null==(s=i.dataModel)?void 0:s.join("、")),1)],64))],64)):(vue.openBlock(),vue.createBlock(E,vue.mergeProps({key:1,modelValue:i.dataModel,"onUpdate:modelValue":t[7]||(t[7]=e=>i.dataModel=e),style:{width:o.isTable?"100%":o.widget.options.width},disabled:l.elementDisabled,ref:"fm-"+o.widget.model},{...o.widget.options.customProps,...l.extendProps}),{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.remoteOptions,((e,t)=>(vue.openBlock(),vue.createBlock(N,{style:vue.normalizeStyle({display:o.widget.options.inline?"inline-block":"block"}),label:e.value,value:e.value,key:t},{default:vue.withCtx((()=>[o.widget.options.remote?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(e.label),1)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createTextVNode(vue.toDisplayString(o.widget.options.showLabel?e.label:e.value),1)],64))])),_:2},1032,["style","label","value"])))),128))])),_:1},16,["modelValue","style","disabled"]))],64)):vue.createCommentVNode("",!0),"time"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:8},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(i.dataModel),1)],64)):(vue.openBlock(),vue.createBlock($,vue.mergeProps({key:1,modelValue:i.dataModel,"onUpdate:modelValue":t[8]||(t[8]=e=>i.dataModel=e),"is-range":o.widget.options.isRange,placeholder:o.widget.options.placeholder,"start-placeholder":o.widget.options.startPlaceholder,"end-placeholder":o.widget.options.endPlaceholder,readonly:o.widget.options.readonly,disabled:l.elementDisabled,editable:o.widget.options.editable,clearable:o.widget.options.clearable,arrowControl:o.widget.options.arrowControl,"value-format":o.widget.options.format,style:{width:o.isTable?"100%":o.widget.options.width},ref:"fm-"+o.widget.model},{...o.widget.options.customProps,...l.extendProps},{onFocus:l.handleOnFocus,onBlur:l.handleOnBlur}),null,16,["modelValue","is-range","placeholder","start-placeholder","end-placeholder","readonly","disabled","editable","clearable","arrowControl","value-format","style","onFocus","onBlur"]))],64)):vue.createCommentVNode("",!0),"date"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:9},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString("dates"==o.widget.options.type?null==(d=i.dataModel)?void 0:d.join("、"):"object"==typeof i.dataModel?i.dataModel.join(" ~ "):i.dataModel),1)],64)):(vue.openBlock(),vue.createBlock(D,vue.mergeProps({key:1,modelValue:i.dataModel,"onUpdate:modelValue":t[9]||(t[9]=e=>i.dataModel=e),type:o.widget.options.type,placeholder:o.widget.options.placeholder,"start-placeholder":o.widget.options.startPlaceholder,"end-placeholder":o.widget.options.endPlaceholder,readonly:o.widget.options.readonly,disabled:l.elementDisabled,editable:o.widget.options.editable,clearable:o.widget.options.clearable,"value-format":o.widget.options.timestamp?"x":o.widget.options.format,format:o.widget.options.format,style:{width:o.isTable?"100%":o.widget.options.width},ref:"fm-"+o.widget.model},{...o.widget.options.customProps,...l.extendProps},{onFocus:l.handleOnFocus,onBlur:l.handleOnBlur}),null,16,["modelValue","type","placeholder","start-placeholder","end-placeholder","readonly","disabled","editable","clearable","value-format","format","style","onFocus","onBlur"]))],64)):vue.createCommentVNode("",!0),"rate"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:10},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(i.dataModel),1)],64)):(vue.openBlock(),vue.createBlock(B,vue.mergeProps({key:1,modelValue:i.dataModel,"onUpdate:modelValue":t[10]||(t[10]=e=>i.dataModel=e),max:o.widget.options.max,disabled:l.elementDisabled,"allow-half":o.widget.options.allowHalf,"show-score":o.widget.options.showScore,ref:"fm-"+o.widget.model,style:{width:o.isTable?"100%":o.widget.options.width,display:"inline-block"}},{...o.widget.options.customProps,...l.extendProps}),null,16,["modelValue","max","disabled","allow-half","show-score","style"]))],64)):vue.createCommentVNode("",!0),"color"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:11},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(i.dataModel),1)],64)):(vue.openBlock(),vue.createBlock(T,vue.mergeProps({key:1,modelValue:i.dataModel,"onUpdate:modelValue":t[11]||(t[11]=e=>i.dataModel=e),disabled:l.elementDisabled,"show-alpha":o.widget.options.showAlpha,ref:"fm-"+o.widget.model,style:{width:o.isTable?"100%":o.widget.options.width}},{...o.widget.options.customProps,...l.extendProps}),null,16,["modelValue","disabled","show-alpha","style"]))],64)):vue.createCommentVNode("",!0),"select"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:12},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[o.widget.options.remote?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString("object"==typeof i.dataModel?null==(u=i.dataModel)?void 0:u.map((e=>i.remoteOptions.find((t=>t.value==e))&&i.remoteOptions.find((t=>t.value==e)).label)).join("、"):i.remoteOptions.find((e=>e.value==i.dataModel))&&i.remoteOptions.find((e=>e.value==i.dataModel)).label),1)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createTextVNode(vue.toDisplayString(o.widget.options.showLabel?"object"==typeof i.dataModel?null==(c=i.dataModel)?void 0:c.map((e=>i.remoteOptions.find((t=>t.value==e))&&i.remoteOptions.find((t=>t.value==e)).label)).join("、"):i.remoteOptions.find((e=>e.value==i.dataModel))&&i.remoteOptions.find((e=>e.value==i.dataModel)).label:"object"==typeof i.dataModel?i.dataModel.join("、"):i.dataModel),1)],64))],64)):(vue.openBlock(),vue.createBlock(I,vue.mergeProps({key:1,modelValue:i.dataModel,"onUpdate:modelValue":t[12]||(t[12]=e=>i.dataModel=e),disabled:l.elementDisabled,multiple:o.widget.options.multiple,clearable:o.widget.options.clearable,placeholder:o.widget.options.placeholder,style:{width:o.isTable?"100%":o.widget.options.width},filterable:o.widget.options.filterable,ref:"fm-"+o.widget.model},{...o.widget.options.customProps,...l.extendProps},{onFocus:l.handleOnFocus,onBlur:l.handleOnBlur}),{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.remoteOptions,(e=>(vue.openBlock(),vue.createBlock(O,{key:e.value,value:e.value,label:o.widget.options.showLabel||o.widget.options.remote?e.label:e.value},null,8,["value","label"])))),128))])),_:1},16,["modelValue","disabled","multiple","clearable","placeholder","style","filterable","onFocus","onBlur"]))],64)):vue.createCommentVNode("",!0),"switch"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:13},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(i.dataModel),1)],64)):(vue.openBlock(),vue.createBlock(F,vue.mergeProps({key:1,modelValue:i.dataModel,"onUpdate:modelValue":t[13]||(t[13]=e=>i.dataModel=e),disabled:l.elementDisabled,ref:"fm-"+o.widget.model,style:{width:o.isTable?"100%":o.widget.options.width}},{...o.widget.options.customProps,...l.extendProps}),null,16,["modelValue","disabled","style"]))],64)):vue.createCommentVNode("",!0),"slider"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:14},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(i.dataModel),1)],64)):(vue.openBlock(),vue.createBlock(L,vue.mergeProps({key:1,modelValue:i.dataModel,"onUpdate:modelValue":t[14]||(t[14]=e=>i.dataModel=e),min:o.widget.options.min,max:o.widget.options.max,disabled:l.elementDisabled,step:o.widget.options.step,"show-input":o.widget.options.showInput,range:o.widget.options.range,style:{width:o.isTable?"100%":o.widget.options.width},ref:"fm-"+o.widget.model},{...o.widget.options.customProps,...l.extendProps}),null,16,["modelValue","min","max","disabled","step","show-input","range","style"]))],64)):vue.createCommentVNode("",!0),"imgupload"==o.widget.type?(vue.openBlock(),vue.createBlock(P,{key:15,modelValue:i.dataModel,"onUpdate:modelValue":t[15]||(t[15]=e=>i.dataModel=e),disabled:l.elementDisabled,readonly:o.widget.options.readonly||o.printRead,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width}),width:o.widget.options.size.width,height:o.widget.options.size.height,token:i.remoteToken,domain:o.widget.options.domain,multiple:o.widget.options.multiple,limit:o.widget.options.limit,"is-qiniu":o.widget.options.isQiniu,"is-delete":o.widget.options.isDelete,min:o.widget.options.min,"is-edit":o.widget.options.isEdit,action:o.widget.options.action,headers:o.widget.options.headers||[],ref:"fm-"+o.widget.model,withCredentials:o.widget.options.withCredentials,"print-read":o.printRead,onOnUploadSuccess:l.handleOnUploadSuccess,onOnUploadError:l.handleOnUploadError,onOnUploadRemove:l.handleOnUploadRemove,onOnUploadProgress:l.handleOnUploadProgress,"on-select":l.handleOnUploadSelect},null,8,["modelValue","disabled","readonly","style","width","height","token","domain","multiple","limit","is-qiniu","is-delete","min","is-edit","action","headers","withCredentials","print-read","onOnUploadSuccess","onOnUploadError","onOnUploadRemove","onOnUploadProgress","on-select"])):vue.createCommentVNode("",!0),"editor"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:16},[o.printRead?(vue.openBlock(),vue.createElementBlock("div",{key:0,innerHTML:i.dataModel,class:"ql-editor"},null,8,_hoisted_4$6)):(vue.openBlock(),vue.createBlock(M,{key:1,modelValue:i.dataModel,"onUpdate:modelValue":t[16]||(t[16]=e=>i.dataModel=e),"custom-style":{width:o.isTable?"100%":o.widget.options.width,cursor:l.elementDisabled?"no-drop":"",backgroundColor:l.elementDisabled?"#F5F7FA":""},toolbar:o.widget.options.customToolbar,disabled:l.elementDisabled,ref:"fm-"+o.widget.model},null,8,["modelValue","custom-style","toolbar","disabled"]))],64)):vue.createCommentVNode("",!0),"cascader"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:17},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[o.widget.options.remote?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(o.widget.options.multiple?null==(p=i.dataModel)?void 0:p.map((e=>l.getCascaderText([...e],i.remoteOptions).join(" / "))).join("、"):l.getCascaderText([...i.dataModel],i.remoteOptions).join(" / ")),1)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createTextVNode(vue.toDisplayString(o.widget.options.multiple?null==(m=i.dataModel)?void 0:m.map((e=>l.getCascaderText([...e],i.remoteOptions).join(" / "))).join("、"):l.getCascaderText([...i.dataModel],i.remoteOptions).join(" / ")),1)],64))],64)):(vue.openBlock(),vue.createBlock(A,vue.mergeProps({key:1,modelValue:i.dataModel,"onUpdate:modelValue":t[17]||(t[17]=e=>i.dataModel=e),disabled:l.elementDisabled,clearable:o.widget.options.clearable,placeholder:o.widget.options.placeholder,style:{width:o.isTable?"100%":o.widget.options.width},options:i.remoteOptions,onChange:l.onCascaderChange,ref:"fm-"+o.widget.model,onFocus:l.handleOnFocus,onBlur:l.handleOnBlur,props:i.propsModel,"collapse-tags":"",filterable:o.widget.options.filterable},{...o.widget.options.customProps,...l.extendProps}),null,16,["modelValue","disabled","clearable","placeholder","style","options","onChange","onFocus","onBlur","props","filterable"]))],64)):vue.createCommentVNode("",!0),"treeselect"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:18},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[o.widget.options.remote?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString("object"==typeof i.dataModel?null==(h=i.dataModel)?void 0:h.map((e=>l.getTreeText(e,i.remoteOptions))).join("、"):l.getTreeText(i.dataModel,i.remoteOptions)),1)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createTextVNode(vue.toDisplayString("object"==typeof i.dataModel?null==(f=i.dataModel)?void 0:f.map((e=>l.getTreeText(e,i.remoteOptions))).join("、"):l.getTreeText(i.dataModel,i.remoteOptions)),1)],64))],64)):(vue.openBlock(),vue.createBlock(R,vue.mergeProps({key:1,modelValue:i.dataModel,"onUpdate:modelValue":t[18]||(t[18]=e=>i.dataModel=e),disabled:l.elementDisabled,clearable:o.widget.options.clearable,placeholder:o.widget.options.placeholder,style:{width:o.isTable?"100%":o.widget.options.width},data:i.remoteOptions,ref:"fm-"+o.widget.model,onFocus:l.handleOnFocus,onBlur:l.handleOnBlur,multiple:o.widget.options.multiple,"check-strictly":o.widget.options.checkStrictly,filterable:o.widget.options.filterable},{...o.widget.options.customProps,...l.extendProps}),null,16,["modelValue","disabled","clearable","placeholder","style","data","onFocus","onBlur","multiple","check-strictly","filterable"]))],64)):vue.createCommentVNode("",!0),"text"==o.widget.type?(vue.openBlock(),vue.createElementBlock("span",{key:19,ref:"fm-"+o.widget.model,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width||"100%",display:"inline-block"})},vue.toDisplayString(i.dataModel),5)):vue.createCommentVNode("",!0),"html"==o.widget.type?(vue.openBlock(),vue.createElementBlock("span",{key:20,innerHTML:i.dataModel,ref:"fm-"+o.widget.model,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width||"100%",display:"inline-block"})},null,12,_hoisted_5$6)):vue.createCommentVNode("",!0),"table"==o.widget.type?(vue.openBlock(),vue.createBlock(z,{key:21,value:i.dataModel,"onUpdate:value":t[19]||(t[19]=e=>i.dataModel=e),columns:o.widget.tableColumns,models:i.dataModels,remote:o.remote,blanks:o.blanks,disableddata:l.elementDisabled||o.printRead,rules:o.rules,name:o.widget.model,"remote-option":o.remoteOption,ref:"fm-"+o.widget.model,preview:o.preview,platform:o.platform,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,widget:o.widget,"print-read":o.printRead,paging:o.widget.options.paging,"page-size":o.widget.options.pageSize,"is-delete":null==(v=o.widget.options.isDelete)||v,"is-add":null==(g=o.widget.options.isAdd)||g,"show-control":null==(y=o.widget.options.showControl)||y,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode,"container-key":o.containerKey},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["value","columns","models","remote","blanks","disableddata","rules","name","remote-option","preview","platform","data-source-value","event-function","widget","print-read","paging","page-size","is-delete","is-add","show-control","is-dialog","dialog-name","is-group","group","field-node","container-key"])):vue.createCommentVNode("",!0),"subform"==o.widget.type?(vue.openBlock(),vue.createBlock(U,{key:22,value:i.dataModel,"onUpdate:value":t[20]||(t[20]=e=>i.dataModel=e),list:o.widget.list,models:i.dataModels,remote:o.remote,blanks:o.blanks,disableddata:l.elementDisabled||o.printRead,rules:o.rules,name:o.widget.model,"remote-option":o.remoteOption,ref:"fm-"+o.widget.model,preview:o.preview,platform:o.platform,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,widget:o.widget,"print-read":o.printRead,paging:o.widget.options.paging,"page-size":o.widget.options.pageSize,"show-control":o.widget.options.showControl,"is-delete":null==(b=o.widget.options.isDelete)||b,"is-add":null==(w=o.widget.options.isAdd)||w,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode,"container-key":o.containerKey},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["value","list","models","remote","blanks","disableddata","rules","name","remote-option","preview","platform","data-source-value","event-function","widget","print-read","paging","page-size","show-control","is-delete","is-add","is-dialog","dialog-name","is-group","group","field-node","container-key"])):vue.createCommentVNode("",!0),"group"==o.widget.type?(vue.openBlock(),vue.createBlock(W,{key:23,value:i.dataModel,"onUpdate:value":t[21]||(t[21]=e=>i.dataModel=e),rules:o.rules,element:o.widget,remote:o.remote,blanks:o.blanks,edit:!l.elementDisabled,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,ref:"fm-"+o.widget.model,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["value","rules","element","remote","blanks","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-group","group","field-node"])):vue.createCommentVNode("",!0),"fileupload"==o.widget.type?(vue.openBlock(),vue.createBlock(j,{key:24,modelValue:i.dataModel,"onUpdate:modelValue":t[22]||(t[22]=e=>i.dataModel=e),disabled:l.elementDisabled,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width}),token:i.remoteToken,domain:o.widget.options.domain,multiple:o.widget.options.multiple,limit:o.widget.options.limit,"is-qiniu":o.widget.options.isQiniu,min:o.widget.options.min,action:o.widget.options.action,headers:o.widget.options.headers||[],ref:"fm-"+o.widget.model,withCredentials:o.widget.options.withCredentials,"print-read":o.printRead,accept:o.widget.options.accept,onOnUploadSuccess:l.handleOnUploadSuccess,onOnUploadError:l.handleOnUploadError,onOnUploadRemove:l.handleOnUploadRemove,onOnUploadProgress:l.handleOnUploadProgress,"on-select":l.handleOnUploadSelect},null,8,["modelValue","disabled","style","token","domain","multiple","limit","is-qiniu","min","action","headers","withCredentials","print-read","accept","onOnUploadSuccess","onOnUploadError","onOnUploadRemove","onOnUploadProgress","on-select"])):vue.createCommentVNode("",!0),"button"==o.widget.type?(vue.openBlock(),vue.createBlock(H,vue.mergeProps({key:25,disabled:l.elementDisabled,size:o.widget.options.buttonSize,type:"text"==o.widget.options.buttonType||"link"==o.widget.options.buttonType?"primary":o.widget.options.buttonType,text:"text"==o.widget.options.buttonType,link:"link"==o.widget.options.buttonType,plain:o.widget.options.buttonPlain,round:o.widget.options.buttonRound,circle:o.widget.options.buttonCircle,style:{width:o.widget.options.width},ref:"fm-"+o.widget.model},{...o.widget.options.customProps,...l.extendProps},{onClick:l.handleOnClick}),{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.widget.options.buttonName),1)])),_:1},16,["disabled","size","type","text","link","plain","round","circle","style","onClick"])):vue.createCommentVNode("",!0),"link"==o.widget.type?(vue.openBlock(),vue.createBlock(G,vue.mergeProps({key:26,disabled:l.elementDisabled,type:o.widget.options.linkType,underline:o.widget.options.underline,href:o.widget.options.href,target:o.widget.options.blank?"_blank":"_self",ref:"fm-"+o.widget.model,onClick:l.handleOnClick,style:{width:o.isTable?"100%":o.widget.options.width}},{...o.widget.options.customProps,...l.extendProps}),{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.widget.options.linkName),1)])),_:1},16,["disabled","type","underline","href","target","onClick","style"])):vue.createCommentVNode("",!0),"steps"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:27},[i.remoteOptions&&i.remoteOptions.length>0?(vue.openBlock(),vue.createBlock(q,vue.mergeProps({key:0,active:i.dataModel,ref:"fm-"+o.widget.model,space:o.widget.options.space,direction:o.widget.options.direction,"process-status":o.widget.options.processStatus,"finish-status":o.widget.options.finishStatus,"align-center":o.widget.options.alignCenter,simple:o.widget.options.simple,style:{"line-height":"normal"}},{...o.widget.options.customProps,...l.extendProps}),{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.remoteOptions,((e,t)=>(vue.openBlock(),vue.createBlock(K,{title:e.title,description:e.description,key:t},null,8,["title","description"])))),128))])),_:1},16,["active","space","direction","process-status","finish-status","align-center","simple"])):vue.createCommentVNode("",!0)],64)):vue.createCommentVNode("",!0),"pagination"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:28},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(" Page "+vue.toDisplayString(i.dataModel),1)],64)):(vue.openBlock(),vue.createBlock(Y,vue.mergeProps({key:1,currentPage:i.dataModel,"onUpdate:currentPage":t[23]||(t[23]=e=>i.dataModel=e),"page-size":o.widget.options.pageSize,"pager-count":o.widget.options.pagerCount,disabled:o.widget.options.disabled,background:o.widget.options.background,layout:"total, prev, pager, next",total:o.widget.options.total,ref:"fm-"+o.widget.model},{...o.widget.options.customProps,...l.extendProps}),null,16,["currentPage","page-size","pager-count","disabled","background","total"]))],64)):vue.createCommentVNode("",!0),"transfer"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:29},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[o.widget.options.remote?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(null==(k=i.dataModel)?void 0:k.map((e=>{var t;return null==(t=i.remoteOptions.find((t=>t[o.widget.options.props.key]==e)))?void 0:t[o.widget.options.props.label]})).join("、")),1)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createTextVNode(vue.toDisplayString(null==(_=i.dataModel)?void 0:_.map((e=>{var t;return null==(t=i.remoteOptions.find((t=>t[i.propsTransfer.key]==e)))?void 0:t[i.propsTransfer.label]})).join("、")),1)],64))],64)):(vue.openBlock(),vue.createBlock(X,vue.mergeProps({key:1,"model-value":i.dataModel,disabled:l.elementDisabled,data:i.remoteOptions,filterable:o.widget.options.filterable,props:o.widget.options.remote?o.widget.options.props:i.propsTransfer,titles:o.widget.options.titles,style:{width:o.isTable?"100%":o.widget.options.width},ref:"fm-"+o.widget.model,onChange:l.handleTransferChange},{...o.widget.options.customProps,...l.extendProps}),null,16,["model-value","disabled","data","filterable","props","titles","style","onChange"]))],64)):vue.createCommentVNode("",!0),"list"==o.widget.type?(vue.openBlock(),vue.createBlock(J,{key:30,ref:"fm-"+o.widget.model,modelValue:i.dataModel,"onUpdate:modelValue":t[24]||(t[24]=e=>i.dataModel=e),columns:o.widget.options.columns,showOperation:o.widget.options.showOperation,operations:o.widget.options.operations,pagination:o.widget.options.pagination,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width}),"max-height":o.widget.options.maxHeight,stripe:o.widget.options.stripe,border:o.widget.options.border,highlight:o.widget.options.highlight,selection:o.widget.options.selection,"print-read":o.printRead,onOnPageChange:l.handlePageChange,onOnCurrentRow:l.handleCurrentRow,onOnOperate:l.handleOperate,onOnSelectionChange:l.handleSelectionChange},null,8,["modelValue","columns","showOperation","operations","pagination","style","max-height","stripe","border","highlight","selection","print-read","onOnPageChange","onOnCurrentRow","onOnOperate","onOnSelectionChange"])):vue.createCommentVNode("",!0),(vue.openBlock(),vue.createBlock(Q,{blanks:o.blanks,"is-table":!1,widget:o.widget,models:i.dataModels,remote:o.remote,edit:o.edit,"remote-option":o.remoteOption,key:o.widget.key,rules:o.rules,modelValue:i.dataModel,"onUpdate:modelValue":t[25]||(t[25]=e=>i.dataModel=e),platform:o.platform,preview:o.preview,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName},null,8,["blanks","widget","models","remote","edit","remote-option","rules","modelValue","platform","preview","data-source-value","event-function","print-read","is-subform","row-index","sub-name"]))],2)}var GenerateElementItem$2=_export_sfc(_sfc_main$u,[["render",_sfc_render$s]]),GenerateElementItem$3=Object.freeze(Object.defineProperty({__proto__:null,default:GenerateElementItem$2},Symbol.toStringTag,{value:"Module"}));const _sfc_main$t={components:{GenerateElementItem:GenerateElementItem$2},props:["widget","models","rules","remote","blanks","display","edit","remoteOption","platform","preview","containerKey","dataSourceValue","eventFunction","printRead","isSubform","rowIndex","subName","subHideFields","subDisabledFields","isDialog","dialogName","group","fieldNode","isGroup","isTable","isMobile","tableName"],data(){return{dataModel:Object.keys(this.models).includes(this.widget.model)?this.models[this.widget.model]:_.cloneDeep(this.widget.options.defaultValue),dataModels:this.models}},computed:{ruleProp(){let e=this.widget.model;return this.group&&(e=this.group+"."+e),e},currentOptions(){var e,t;return this.isTable||this.isSubform?{value:this.dataModel,fieldNode:this.fieldNode?this.fieldNode+"."+this.widget.model:this.widget.model,currentRef:null==(e=this.$refs.generateElementItem)?void 0:e.$refs[`fm-${this.widget.model}`],rowIndex:this.rowIndex,row:_.cloneDeep(this.models),field:this.widget.model,group:this.group}:{value:this.dataModel,fieldNode:this.fieldNode?this.fieldNode+"."+this.widget.model:this.widget.model,currentRef:null==(t=this.$refs.generateElementItem)?void 0:t.$refs[`fm-${this.widget.model}`],field:this.widget.model,group:this.group}},elementDisplay(){let e=this.fieldNode?this.fieldNode+"."+this.widget.model:this.widget.model,t=this.group?this.group+"."+this.widget.model:this.widget.model;return null!=this.dynamicHideFields[e]?!this.dynamicHideFields[e]:null!=this.dynamicHideFields[t]?!this.dynamicHideFields[t]:"boolean"==typeof this.widget.options.hidden?!this.widget.options.hidden:!isExpression(this.widget.options.hidden)||!executeExpression(extractExpression(this.widget.options.hidden),this.currentOptions,this.formContext)},groupNode(){return this.group?this.group+"."+this.widget.model:this.widget.model},elementNode(){return this.fieldNode?this.fieldNode+"."+this.widget.model:this.widget.model}},inject:{setSubformData:{default:()=>{}},setDialogData:{default:()=>{}},setGroupData:{default:()=>{}},setTableData:{default:()=>{}},onChange:{default:()=>{}},dynamicValueData:{default:[]},formContext:{default:{}},dynamicHideFields:{default:{}},generateFormItemContext:{default:()=>{}},deleteFormItemContext:{default:()=>{}},sendRequest:{default:()=>{}}},created(){this.refreshDynamicValue()},mounted(){this.generateFormItemContext(this.elementNode,this)},beforeUnmount(){this.deleteFormItemContext(this.elementNode)},methods:{refreshDynamicValue(e){return new Promise(((t,o)=>{if(this.widget.options.isDynamicValue&&"datasource"==this.widget.options.dynamicValueType&&this.widget.options.dynamicValueDataSource){let i=this.group?this.group+"."+this.widget.model+"."+this.widget.options.dynamicValueDataSource:this.widget.model+"."+this.widget.options.dynamicValueDataSource,l={...this.widget.options.dynamicValueArgs};for(let e in l)isExpression(l[e])&&(l[e]=executeExpression(extractExpression(l[e]),this.currentOptions,this.formContext));e&&"object"==typeof e&&(l={...l,...e});let a=this.dynamicValueData.find((e=>e.key===i&&_.isEqual(e.args,l)));if(a)if(this.widget.options.dynamicValueStruct)try{this.dataModel=new Function("data",`return data.${this.widget.options.dynamicValueStruct}`)(a.value),t(this.dataModel)}catch(n){o(n)}else this.dataModel=a.value,t(this.dataModel);else this.sendRequest(this.widget.options.dynamicValueDataSource,l).then((e=>{if(this.widget.options.dynamicValueStruct)try{this.dataModel=new Function("data",`return data.${this.widget.options.dynamicValueStruct}`)(e),t(this.dataModel)}catch(n){o(n)}else this.dataModel=e,t(this.dataModel)}))}if(this.widget.options.isDynamicValue&&"fx"==this.widget.options.dynamicValueType&&this.widget.options.dynamicValueFx){let e=executeExpression(this.widget.options.dynamicValueFx,this.currentOptions,this.formContext);null!==e&&this.$nextTick((()=>{this.dataModel=e})),t(e)}}))}},watch:{dataModel:{deep:!0,handler(e,t){if(JSON.stringify(e)==JSON.stringify(t))return!1;this.isTable?this.setTableData(e,this.rowIndex,this.widget.model):this.isSubform?this.setSubformData(e,this.rowIndex,this.widget.model):this.isDialog?this.setDialogData(e,this.widget.model):this.isGroup?this.setGroupData(e,this.widget.model):this.onChange(e,this.widget.model),this.$nextTick((()=>{if(this.eventFunction.onFormChange&&this.eventFunction.onFormChange(this.currentOptions),this.widget.events&&this.widget.events.onChange){let e=this.widget.events.onChange;this.eventFunction[e](this.currentOptions)}}))}},models:{deep:!0,handler(e){this.dataModels=e,this.dataModel=Object.keys(e).includes(this.widget.model)?e[this.widget.model]:_.cloneDeep(this.widget.options.defaultValue)}}}},_hoisted_1$c=["data-id"],_hoisted_2$b=["innerHTML"];function _sfc_render$r(e,t,o,n,i,l){const a=vue.resolveComponent("generate-element-item"),r=vue.resolveComponent("el-form-item"),s=vue.resolveComponent("el-divider"),d=vue.resolveComponent("el-alert");return o.widget.key?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"fm-form-item","data-id":o.widget.model},["divider"!=o.widget.type&&"alert"!=o.widget.type&&l.elementDisplay?(vue.openBlock(),vue.createBlock(r,{prop:o.fieldNode?o.fieldNode+"."+o.widget.model:o.widget.model,rules:o.rules[l.ruleProp],class:vue.normalizeClass({[o.widget.options&&o.widget.options.customClass]:!(!o.widget.options||!o.widget.options.customClass),"no-label-form-item":o.widget.options.isLabelWidth&&0==o.widget.options.labelWidth,"fm-label-wrap":o.widget.options.labelWrap}),label:o.widget.options.hideLabel||o.isTable&&!o.isMobile?"":o.widget.name,"label-width":o.widget.options.hideLabel?"0px":o.widget.options.isLabelWidth?o.widget.options.labelWidth+"px":"",key:o.widget.key,required:o.widget.options.required,ref:"generateFormItem"},{default:vue.withCtx((()=>[o.widget.options.tip?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"fm-item-tooltip",innerHTML:o.widget.options.tip.replace(/\n/g,"<br/>")},null,8,_hoisted_2$b)):vue.createCommentVNode("",!0),(vue.openBlock(),vue.createBlock(a,{blanks:o.blanks,"is-table":o.isTable,"table-name":o.tableName,widget:o.widget,models:i.dataModels,remote:o.remote,edit:o.edit,"remote-option":o.remoteOption,key:o.widget.key,rules:o.rules,modelValue:i.dataModel,"onUpdate:modelValue":t[0]||(t[0]=e=>i.dataModel=e),platform:o.platform,preview:o.preview,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,ref:"generateElementItem","container-key":o.containerKey,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode?o.fieldNode+"."+o.widget.model:o.widget.model},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["blanks","is-table","table-name","widget","models","remote","edit","remote-option","rules","modelValue","platform","preview","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","container-key","is-group","group","field-node"]))])),_:3},8,["prop","rules","class","label","label-width","required"])):vue.createCommentVNode("",!0),"divider"==o.widget.type&&l.elementDisplay?(vue.openBlock(),vue.createBlock(r,{key:1,"label-width":"0"},{default:vue.withCtx((()=>[vue.createVNode(s,vue.mergeProps({"content-position":o.widget.options.contentPosition},o.widget.options.customProps,{style:{"margin-bottom":"10px"},ref:"fm-"+o.widget.model}),{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.widget.name),1)])),_:1},16,["content-position"])])),_:1})):vue.createCommentVNode("",!0),"alert"==o.widget.type&&l.elementDisplay?(vue.openBlock(),vue.createBlock(r,{key:2,"label-width":"0"},{default:vue.withCtx((()=>[vue.createVNode(d,vue.mergeProps({title:o.widget.options.title,type:o.widget.options.type,description:o.widget.options.description,closable:o.widget.options.closable,center:o.widget.options.center,"show-icon":o.widget.options.showIcon,effect:o.widget.options.effect,style:{width:o.widget.options.width}},o.widget.options.customProps,{onClose:t[1]||(t[1]=e=>o.display[o.widget.model]=!1),ref:"fm-"+o.widget.model}),null,16,["title","type","description","closable","center","show-icon","effect","style"])])),_:1})):vue.createCommentVNode("",!0)],8,_hoisted_1$c)):vue.createCommentVNode("",!0)}var GenerateFormItem$2=_export_sfc(_sfc_main$t,[["render",_sfc_render$r]]),GenerateFormItem$3=Object.freeze(Object.defineProperty({__proto__:null,default:GenerateFormItem$2},Symbol.toStringTag,{value:"Module"})),GenerateInline_vue_vue_type_style_index_0_lang="";const _sfc_main$s={name:"generate-inline",components:{GenerateFormItem:GenerateFormItem$2},props:["element","model","rules","remote","blanks","display","edit","remoteOption","platform","preview","containerKey","dataSourceValue","eventFunction","printRead","isSubform","rowIndex","subName","subHideFields","subDisabledFields","isDialog","dialogName","group","fieldNode","isGroup"],data(){return{dataModels:this.model}},computed:{currentOptions(){return this.isSubform?{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,rowIndex:this.rowIndex,row:this.model}:{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model}},elementDisplay(){let e=this.fieldNode?this.fieldNode+"."+this.element.model:this.element.model,t=this.group?this.group+"."+this.element.model:this.element.model;return null!=this.dynamicHideFields[e]?!this.dynamicHideFields[e]:null!=this.dynamicHideFields[t]?!this.dynamicHideFields[t]:"boolean"==typeof this.element.options.hidden?!this.element.options.hidden:!isExpression(this.element.options.hidden)||!executeExpression(extractExpression(this.element.options.hidden),this.currentOptions,this.formContext)}},inject:["generateComponentInstance","deleteComponentInstance","dynamicHideFields","formContext"],mounted(){this.generateComponentInstance&&this.generateComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,this)},beforeUnmount(){this.deleteComponentInstance&&this.deleteComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model)},methods:{},watch:{model:{deep:!0,handler(e){this.dataModels=this.model}}}};function _sfc_render$q(e,t,o,n,i,l){const a=vue.resolveComponent("generate-form-item");return l.elementDisplay?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:vue.normalizeClass(["fm-inline-container",{[o.element.options&&o.element.options.customClass]:!(!o.element.options||!o.element.options.customClass)}]),style:vue.normalizeStyle({display:o.element.options.flex?"flex":"block","flex-direction":"row","flex-wrap":"wrap","justify-content":o.element.options.flexJustify||"normal","align-items":o.element.options.flexAlign||"normal"})},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.list,(t=>(vue.openBlock(),vue.createBlock(a,{key:t.key,models:i.dataModels,rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,style:vue.normalizeStyle({"margin-right":o.element.options.spaceSize+"px"}),"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","style","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])))),128))],6)):vue.createCommentVNode("",!0)}var GenerateInline$1=_export_sfc(_sfc_main$s,[["render",_sfc_render$q]]),GenerateInline$2=Object.freeze(Object.defineProperty({__proto__:null,default:GenerateInline$1},Symbol.toStringTag,{value:"Module"}));const _sfc_main$r={name:"generate-col-item",components:{GenerateFormItem:GenerateFormItem$2,GenerateInline:GenerateInline$1,GenerateTabItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateTabItem$3})))),GenerateReport:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateReport$3})))),GenerateCollapse:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCollapse$3})))),GenerateCard:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCard$3}))))},props:["element","model","rules","remote","blanks","display","edit","remoteOption","platform","preview","containerKey","dataSourceValue","eventFunction","printRead","isSubform","rowIndex","subName","subHideFields","subDisabledFields","isDialog","dialogName","group","fieldNode","isGroup"],data(){return{dataModels:this.model,hideCols:[]}},computed:{currentOptions(){return this.isSubform?{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,rowIndex:this.rowIndex,row:this.model}:{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model}},elementDisplay(){let e=this.fieldNode?this.fieldNode+"."+this.element.model:this.element.model,t=this.group?this.group+"."+this.element.model:this.element.model;return null!=this.dynamicHideFields[e]?!this.dynamicHideFields[e]:null!=this.dynamicHideFields[t]?!this.dynamicHideFields[t]:"boolean"==typeof this.element.options.hidden?!this.element.options.hidden:!isExpression(this.element.options.hidden)||!executeExpression(extractExpression(this.element.options.hidden),this.currentOptions,this.formContext)}},inject:["generateComponentInstance","deleteComponentInstance","dynamicHideFields","formContext"],mounted(){this.generateComponentInstance&&this.generateComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,this)},beforeUnmount(){this.deleteComponentInstance&&this.deleteComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model)},methods:{getColXS(e){return this.preview?"pc"==this.platform?e.md:"pad"==this.platform?e.sm:"mobile"==this.platform?e.xs:void 0:e.xs},getColSM(e){return this.preview?"pc"==this.platform?e.md:"pad"==this.platform?e.sm:"mobile"==this.platform?e.xs:void 0:e.sm},getColMD(e){return this.preview?"pc"==this.platform?e.md:"pad"==this.platform?e.sm:"mobile"==this.platform?e.xs:void 0:e.md},hideCol(e){!this.hideCols.includes(e)&&this.hideCols.push(e)},displayCol(e){this.hideCols.includes(e)&&this.hideCols.splice(this.hideCols.indexOf(e),1)}},watch:{model:{deep:!0,handler(e){this.dataModels=e}}}};function _sfc_render$p(e,t,o,n,i,l){const a=vue.resolveComponent("generate-col-item",!0),r=vue.resolveComponent("generate-tab-item"),s=vue.resolveComponent("generate-collapse"),d=vue.resolveComponent("generate-report"),u=vue.resolveComponent("generate-card"),c=vue.resolveComponent("generate-inline"),p=vue.resolveComponent("generate-form-item"),m=vue.resolveComponent("el-col"),h=vue.resolveComponent("el-row");return l.elementDisplay?(vue.openBlock(),vue.createBlock(h,{key:0,class:vue.normalizeClass({[o.element.options&&o.element.options.customClass]:!(!o.element.options||!o.element.options.customClass)}),type:o.element.options.flex?"flex":"",gutter:o.element.options.gutter||0,justify:o.element.options.justify,align:o.element.options.align},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.columns,((t,n)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:n},[i.hideCols.includes(n)?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(m,{key:0,span:t.options?l.getColMD(t.options):t.span,xs:t.options?l.getColXS(t.options):t.span,sm:t.options?l.getColSM(t.options):t.span,md:t.options?l.getColMD(t.options):t.span,lg:t.options?l.getColMD(t.options):t.span,xl:t.options?l.getColMD(t.options):t.span,offset:t.options?t.options.offset:0,push:t.options?t.options.push:0,pull:t.options?t.options.pull:0,class:vue.normalizeClass({[t.options&&t.options.customClass]:!(!t.options||!t.options.customClass)})},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t.list,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,["grid"==t.type?(vue.openBlock(),vue.createBlock(a,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"tabs"==t.type?(vue.openBlock(),vue.createBlock(r,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"collapse"==t.type?(vue.openBlock(),vue.createBlock(s,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"report"==t.type?(vue.openBlock(),vue.createBlock(d,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"card"==t.type?(vue.openBlock(),vue.createBlock(u,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"inline"==t.type?(vue.openBlock(),vue.createBlock(c,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):(vue.openBlock(),vue.createBlock(p,{key:t.key,models:i.dataModels,rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"]))],64)))),256))])),_:2},1032,["span","xs","sm","md","lg","xl","offset","push","pull","class"]))],64)))),128))])),_:3},8,["class","type","gutter","justify","align"])):vue.createCommentVNode("",!0)}var GenerateColItem$2=_export_sfc(_sfc_main$r,[["render",_sfc_render$p]]),GenerateColItem$3=Object.freeze(Object.defineProperty({__proto__:null,default:GenerateColItem$2},Symbol.toStringTag,{value:"Module"}));const _sfc_main$q={name:"generate-tab-item",components:{GenerateFormItem:GenerateFormItem$2,GenerateInline:GenerateInline$1,GenerateColItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateColItem$3})))),GenerateReport:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateReport$3})))),GenerateCollapse:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCollapse$3})))),GenerateCard:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCard$3}))))},props:["element","model","rules","remote","blanks","display","edit","remoteOption","platform","preview","containerKey","dataSourceValue","eventFunction","printRead","isSubform","rowIndex","subName","subHideFields","subDisabledFields","isDialog","dialogName","group","fieldNode","isGroup"],data(){return{dataModels:this.model,tabActive:this.element.tabs.length?this.element.tabs[0].name:""}},computed:{currentOptions(){return this.isSubform?{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,rowIndex:this.rowIndex,row:this.model}:{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model}},elementDisplay(){let e=this.fieldNode?this.fieldNode+"."+this.element.model:this.element.model,t=this.group?this.group+"."+this.element.model:this.element.model;return null!=this.dynamicHideFields[e]?!this.dynamicHideFields[e]:null!=this.dynamicHideFields[t]?!this.dynamicHideFields[t]:"boolean"==typeof this.element.options.hidden?!this.element.options.hidden:!isExpression(this.element.options.hidden)||!executeExpression(extractExpression(this.element.options.hidden),this.currentOptions,this.formContext)}},inject:["generateComponentInstance","deleteComponentInstance","dynamicHideFields","formContext"],mounted(){this.generateComponentInstance&&this.generateComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,this)},beforeUnmount(){this.deleteComponentInstance&&this.deleteComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model)},methods:{activateTab(e){const t=this.element.tabs.find((t=>t.label==e));t&&(this.tabActive=t.name)}},watch:{model:{deep:!0,handler(e){this.dataModels=this.model}}}};function _sfc_render$o(e,t,o,n,i,l){const a=vue.resolveComponent("generate-col-item"),r=vue.resolveComponent("generate-report"),s=vue.resolveComponent("generate-inline"),d=vue.resolveComponent("generate-tab-item",!0),u=vue.resolveComponent("generate-collapse"),c=vue.resolveComponent("generate-card"),p=vue.resolveComponent("generate-form-item"),m=vue.resolveComponent("el-tab-pane"),h=vue.resolveComponent("el-tabs");return l.elementDisplay?(vue.openBlock(),vue.createBlock(h,{key:0,modelValue:i.tabActive,"onUpdate:modelValue":t[0]||(t[0]=e=>i.tabActive=e),type:o.element.options.type,"tab-position":o.element.options.tabPosition,class:vue.normalizeClass({[o.element.options.customClass]:!!o.element.options.customClass}),style:{"margin-bottom":"18px"}},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.tabs,(t=>(vue.openBlock(),vue.createBlock(m,{key:t.name,label:t.label,name:t.name},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t.list,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:t.key},["grid"==t.type?(vue.openBlock(),vue.createBlock(a,{key:0,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"report"==t.type?(vue.openBlock(),vue.createBlock(r,{key:1,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"inline"==t.type?(vue.openBlock(),vue.createBlock(s,{key:2,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"tabs"==t.type?(vue.openBlock(),vue.createBlock(d,{key:3,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"collapse"==t.type?(vue.openBlock(),vue.createBlock(u,{key:4,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"card"==t.type?(vue.openBlock(),vue.createBlock(c,{key:5,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):(vue.openBlock(),vue.createBlock(p,{key:6,models:i.dataModels,rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"]))],64)))),128))])),_:2},1032,["label","name"])))),128))])),_:3},8,["modelValue","type","tab-position","class"])):vue.createCommentVNode("",!0)}var GenerateTabItem$2=_export_sfc(_sfc_main$q,[["render",_sfc_render$o]]),GenerateTabItem$3=Object.freeze(Object.defineProperty({__proto__:null,default:GenerateTabItem$2},Symbol.toStringTag,{value:"Module"}));const _sfc_main$p={name:"generate-report",components:{GenerateFormItem:GenerateFormItem$2,GenerateInline:GenerateInline$1,GenerateColItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateColItem$3})))),GenerateTabItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateTabItem$3})))),GenerateCollapse:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCollapse$3})))),GenerateCard:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCard$3}))))},props:["element","model","rules","remote","blanks","display","edit","remoteOption","platform","preview","containerKey","dataSourceValue","eventFunction","printRead","isSubform","rowIndex","subName","subHideFields","subDisabledFields","isDialog","dialogName","group","fieldNode","isGroup"],data(){return{dataModels:this.model}},computed:{currentOptions(){return this.isSubform?{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,rowIndex:this.rowIndex,row:this.model}:{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model}},elementDisplay(){let e=this.fieldNode?this.fieldNode+"."+this.element.model:this.element.model,t=this.group?this.group+"."+this.element.model:this.element.model;return null!=this.dynamicHideFields[e]?!this.dynamicHideFields[e]:null!=this.dynamicHideFields[t]?!this.dynamicHideFields[t]:"boolean"==typeof this.element.options.hidden?!this.element.options.hidden:!isExpression(this.element.options.hidden)||!executeExpression(extractExpression(this.element.options.hidden),this.currentOptions,this.formContext)}},inject:["generateComponentInstance","deleteComponentInstance","dynamicHideFields","formContext"],mounted(){this.generateComponentInstance&&this.generateComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,this)},beforeUnmount(){this.deleteComponentInstance&&this.deleteComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model)},methods:{},watch:{model:{deep:!0,handler(e){this.dataModels=this.model}}}},_hoisted_1$b={class:"fm-report-table__wrapper"},_hoisted_2$a=["colspan","rowspan"];function _sfc_render$n(e,t,o,n,i,l){const a=vue.resolveComponent("generate-col-item"),r=vue.resolveComponent("generate-report",!0),s=vue.resolveComponent("generate-inline"),d=vue.resolveComponent("generate-tab-item"),u=vue.resolveComponent("generate-collapse"),c=vue.resolveComponent("generate-card"),p=vue.resolveComponent("generate-form-item");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1$b,[l.elementDisplay?(vue.openBlock(),vue.createElementBlock("table",{key:0,class:vue.normalizeClass(["fm-report-table__table",{[o.element.options&&o.element.options.customClass]:!(!o.element.options||!o.element.options.customClass)}]),style:vue.normalizeStyle({"border-top-width":o.element.options.borderWidth+"px","border-top-color":o.element.options.borderColor,"border-left-width":o.element.options.borderWidth+"px","border-left-color":o.element.options.borderColor,width:o.element.options.width||"auto"})},[vue.createElementVNode("tr",null,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.headerRow,((e,t)=>(vue.openBlock(),vue.createElementBlock("th",{key:t,style:vue.normalizeStyle({width:e.options.width,height:0,padding:0})},null,4)))),128))]),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.rows,((t,n)=>(vue.openBlock(),vue.createElementBlock("tr",{key:n},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t.columns,((t,l)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:n+"-"+l},[t.options.invisible?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("td",{key:0,style:vue.normalizeStyle({"border-right-width":o.element.options.borderWidth+"px","border-right-color":o.element.options.borderColor,"border-bottom-width":o.element.options.borderWidth+"px","border-bottom-color":o.element.options.borderColor,width:t.options.width,height:t.options.height||"40px","min-height":"40px","text-align":t.options.textAlign,"vertical-align":t.options.verticalAlign}),colspan:t.options.colspan,rowspan:t.options.rowspan,class:vue.normalizeClass(["fm-report-table__td",{[t.options.customClass]:!!t.options.customClass}]),valign:"top"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t.list,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:t.key},["grid"==t.type?(vue.openBlock(),vue.createBlock(a,{key:0,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"report"==t.type?(vue.openBlock(),vue.createBlock(r,{key:1,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"inline"==t.type?(vue.openBlock(),vue.createBlock(s,{key:2,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"tabs"==t.type?(vue.openBlock(),vue.createBlock(d,{key:3,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"collapse"==t.type?(vue.openBlock(),vue.createBlock(u,{key:4,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"card"==t.type?(vue.openBlock(),vue.createBlock(c,{key:5,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):(vue.openBlock(),vue.createBlock(p,{key:6,models:i.dataModels,rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"]))],64)))),128))],14,_hoisted_2$a))],64)))),128))])))),128))],6)):vue.createCommentVNode("",!0)])}var GenerateReport$2=_export_sfc(_sfc_main$p,[["render",_sfc_render$n]]),GenerateReport$3=Object.freeze(Object.defineProperty({__proto__:null,default:GenerateReport$2},Symbol.toStringTag,{value:"Module"}));const _sfc_main$o={name:"generate-collapse",components:{GenerateFormItem:GenerateFormItem$2,GenerateInline:GenerateInline$1,GenerateColItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateColItem$3})))),GenerateReport:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateReport$3})))),GenerateTabItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateTabItem$3})))),GenerateCard:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCard$3}))))},props:["element","model","rules","remote","blanks","display","edit","remoteOption","platform","preview","containerKey","dataSourceValue","eventFunction","printRead","isSubform","rowIndex","subName","subHideFields","subDisabledFields","isDialog","dialogName","group","fieldNode","isGroup"],data(){return{dataModels:this.model,tabActive:this.element.tabs.length?[this.element.tabs[0].name]:""}},computed:{currentOptions(){return this.isSubform?{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,rowIndex:this.rowIndex,row:this.model}:{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model}},elementDisplay(){let e=this.fieldNode?this.fieldNode+"."+this.element.model:this.element.model,t=this.group?this.group+"."+this.element.model:this.element.model;return null!=this.dynamicHideFields[e]?!this.dynamicHideFields[e]:null!=this.dynamicHideFields[t]?!this.dynamicHideFields[t]:"boolean"==typeof this.element.options.hidden?!this.element.options.hidden:!isExpression(this.element.options.hidden)||!executeExpression(extractExpression(this.element.options.hidden),this.currentOptions,this.formContext)}},inject:["generateComponentInstance","deleteComponentInstance","dynamicHideFields","formContext"],mounted(){this.generateComponentInstance&&this.generateComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,this)},beforeUnmount(){this.deleteComponentInstance&&this.deleteComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model)},methods:{activateCollapse(e){if("string"==typeof e){const t=this.element.tabs.find((t=>t.title==e));t&&(this.tabActive=t.name)}if("object"==typeof e&&Array.isArray(e)){const t=e.map((e=>{const t=this.element.tabs.find((t=>t.title==e));return t?t.name:""}));this.tabActive=t}}},watch:{model:{deep:!0,handler(e){this.dataModels=this.model}}}};function _sfc_render$m(e,t,o,n,i,l){const a=vue.resolveComponent("generate-col-item"),r=vue.resolveComponent("generate-report"),s=vue.resolveComponent("generate-inline"),d=vue.resolveComponent("generate-tab-item"),u=vue.resolveComponent("generate-collapse",!0),c=vue.resolveComponent("generate-card"),p=vue.resolveComponent("generate-form-item"),m=vue.resolveComponent("el-collapse-item"),h=vue.resolveComponent("el-collapse");return l.elementDisplay?(vue.openBlock(),vue.createBlock(h,{key:0,modelValue:i.tabActive,"onUpdate:modelValue":t[0]||(t[0]=e=>i.tabActive=e),accordion:o.element.options.accordion,class:vue.normalizeClass({[o.element.options.customClass]:!!o.element.options.customClass}),style:{"margin-bottom":"18px"}},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.tabs,(t=>(vue.openBlock(),vue.createBlock(m,{key:t.name,title:t.title,name:t.name},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t.list,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:t.key},["grid"==t.type?(vue.openBlock(),vue.createBlock(a,{key:0,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"report"==t.type?(vue.openBlock(),vue.createBlock(r,{key:1,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"inline"==t.type?(vue.openBlock(),vue.createBlock(s,{key:2,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"tabs"==t.type?(vue.openBlock(),vue.createBlock(d,{key:3,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"collapse"==t.type?(vue.openBlock(),vue.createBlock(u,{key:4,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"card"==t.type?(vue.openBlock(),vue.createBlock(c,{key:5,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):(vue.openBlock(),vue.createBlock(p,{key:6,models:i.dataModels,rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"]))],64)))),128))])),_:2},1032,["title","name"])))),128))])),_:3},8,["modelValue","accordion","class"])):vue.createCommentVNode("",!0)}var GenerateCollapse$2=_export_sfc(_sfc_main$o,[["render",_sfc_render$m]]),GenerateCollapse$3=Object.freeze(Object.defineProperty({__proto__:null,default:GenerateCollapse$2},Symbol.toStringTag,{value:"Module"})),GenerateCard_vue_vue_type_style_index_0_lang$1="";const __default__$2={name:"generate-card",components:{GenerateFormItem:GenerateFormItem$2,GenerateInline:GenerateInline$1,GenerateReport:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateReport$3})))),GenerateTabItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateTabItem$3})))),GenerateCollapse:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCollapse$3})))),GenerateColItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateColItem$3}))))},props:["element","model","rules","remote","blanks","display","edit","remoteOption","platform","preview","containerKey","dataSourceValue","eventFunction","printRead","isSubform","rowIndex","subName","subHideFields","subDisabledFields","isDialog","dialogName","group","fieldNode","isGroup"],data(){return{dataModels:this.model}},inject:["generateComponentInstance","deleteComponentInstance","dynamicHideFields","formContext"],mounted(){this.generateComponentInstance&&this.generateComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,this)},beforeUnmount(){this.deleteComponentInstance&&this.deleteComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model)},computed:{padding(){return this.element.options.padding||"20px"},currentOptions(){return this.isSubform?{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,rowIndex:this.rowIndex,row:this.model}:{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model}},elementDisplay(){let e=this.fieldNode?this.fieldNode+"."+this.element.model:this.element.model,t=this.group?this.group+"."+this.element.model:this.element.model;return null!=this.dynamicHideFields[e]?!this.dynamicHideFields[e]:null!=this.dynamicHideFields[t]?!this.dynamicHideFields[t]:"boolean"==typeof this.element.options.hidden?!this.element.options.hidden:!isExpression(this.element.options.hidden)||!executeExpression(extractExpression(this.element.options.hidden),this.currentOptions,this.formContext)}},methods:{},watch:{model:{deep:!0,handler(e){this.dataModels=e}}}},__injectCSSVars__$2=()=>{vue.useCssVars((e=>({"8065d3f8":e.padding})))},__setup__$2=__default__$2.setup;__default__$2.setup=__setup__$2?(e,t)=>(__injectCSSVars__$2(),__setup__$2(e,t)):__injectCSSVars__$2;const _sfc_main$n=__default__$2;function _sfc_render$l(e,t,o,n,i,l){var a,r;const s=vue.resolveComponent("generate-col-item"),d=vue.resolveComponent("generate-tab-item"),u=vue.resolveComponent("generate-collapse"),c=vue.resolveComponent("generate-report"),p=vue.resolveComponent("generate-inline"),m=vue.resolveComponent("generate-card",!0),h=vue.resolveComponent("generate-form-item"),f=vue.resolveComponent("el-card");return l.elementDisplay?(vue.openBlock(),vue.createBlock(f,{key:0,shadow:o.element.options.shadow,"body-style":{padding:o.element.options.padding},style:vue.normalizeStyle({width:o.element.options.width,"border-width":o.element.options.bordered?"1px":"0px"}),class:vue.normalizeClass({[null==(a=o.element.options)?void 0:a.customClass]:!!(null==(r=o.element.options)?void 0:r.customClass)})},vue.createSlots({default:vue.withCtx((()=>[vue.createElementVNode("div",null,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.list,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,["grid"==t.type?(vue.openBlock(),vue.createBlock(s,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"tabs"==t.type?(vue.openBlock(),vue.createBlock(d,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"collapse"==t.type?(vue.openBlock(),vue.createBlock(u,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"report"==t.type?(vue.openBlock(),vue.createBlock(c,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"inline"==t.type?(vue.openBlock(),vue.createBlock(p,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"card"==t.type?(vue.openBlock(),vue.createBlock(m,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):(vue.openBlock(),vue.createBlock(h,{key:t.key,models:i.dataModels,rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"]))],64)))),256))])])),_:2},[o.element.options.showHeader?{name:"header",fn:vue.withCtx((()=>[vue.createElementVNode("div",null,[vue.createElementVNode("span",null,vue.toDisplayString(o.element.options.title),1)])])),key:"0"}:void 0]),1032,["shadow","body-style","style","class"])):vue.createCommentVNode("",!0)}var GenerateCard$2=_export_sfc(_sfc_main$n,[["render",_sfc_render$l]]),GenerateCard$3=Object.freeze(Object.defineProperty({__proto__:null,default:GenerateCard$2},Symbol.toStringTag,{value:"Module"})),GenerateDialog_vue_vue_type_style_index_0_lang$1="";const _sfc_main$m={name:"generate-dialog",components:{GenerateColItem:GenerateColItem$2,GenerateFormItem:GenerateFormItem$2,GenerateInline:GenerateInline$1,GenerateReport:GenerateReport$2,GenerateTabItem:GenerateTabItem$2,GenerateCollapse:GenerateCollapse$2,GenerateCard:GenerateCard$2},props:["models","rules","element","remote","blanks","edit","remoteOption","platform","preview","containerKey","dataSourceValue","eventFunction","printRead","group","fieldNode"],data(){var e;return{visible:this.element.options.visible,displayFields:{},dialogModel:null!=(e=this.models[this.element.model])?e:{},dialogDisabled:{}}},emits:["update:models"],inject:["generateComponentInstance","deleteComponentInstance","getFormComponent","onFormHide","onFormDisplay"],created(){this._generateModel(this.element.list)},mounted(){this.generateComponentInstance&&this.generateComponentInstance(this.element.model,this.$refs[`generate-dialog-${this.element.model}`].$parent)},beforeUnmount(){this.deleteComponentInstance&&this.deleteComponentInstance(this.element.model)},provide(){return{setDialogData:this.setDialogData}},methods:{setDialogData(e,t){this.dialogModel[t]=e},_generateModel(e){var t;for(let o=0;o<e.length;o++)"grid"==e[o].type?(this.displayFields[e[o].model]=!e[o].options.hidden,e[o].columns.forEach((e=>{this._generateModel(e.list)}))):"tabs"===e[o].type||"collapse"===e[o].type?(e[o].tabs.forEach((e=>{this._generateModel(e.list)})),this.displayFields[e[o].model]=!e[o].options.hidden):"report"===e[o].type?(e[o].rows.forEach((e=>{e.columns.forEach((e=>{this._generateModel(e.list)}))})),this.displayFields[e[o].model]=!e[o].options.hidden):"inline"===e[o].type||"card"===e[o].type?(this._generateModel(e[o].list),this.displayFields[e[o].model]=!e[o].options.hidden):("blank"==e[o].type?this.dialogModel[e[o].model]="String"===e[o].options.defaultType?"":"Object"===e[o].options.defaultType?{}:[]:this.dialogModel[e[o].model]=null!=(t=this.models[this.element.model][e[o].model])?t:_.cloneDeep(e[o].options.defaultValue),this.displayFields[e[o].model]=!e[o].options.hidden,this.dialogDisabled[e[o].model]=!e[o].options.disabled)},open(){this.visible=!0},close(){this.visible=!1},hide(e){"string"==typeof e&&(e=[e]),e.forEach((e=>{this.onFormHide(`${this.fieldNode}.${e}`)}))},display(e){"string"==typeof e&&(e=[e]),e.forEach((e=>{this.onFormDisplay(`${this.fieldNode}.${e}`)}))},disabled(e,t){"string"==typeof e&&(e=[e]),this._setDisabled(this.element.list,e,t)},validate(){return new Promise(((e,t)=>{let o=this._getAllRuleFields();this.getFormComponent().validateField(o,((o,n)=>{o?e():t(n)}))}))},handleOpen(){if(this.element&&this.element.events&&this.element.events.onOpen){let e=this.element.events.onOpen;this.$nextTick((()=>{this.eventFunction[e]({field:this.element.model,currentRef:this})}))}},handleClose(){if(this.element&&this.element.events&&this.element.events.onClose){let e=this.element.events.onClose;this.eventFunction[e]({field:this.element.model,currentRef:this})}},handleCancel(){if(this.element&&this.element.events&&this.element.events.onCancel){let e=this.element.events.onCancel;this.eventFunction[e]({field:this.element.model,currentRef:this})}},handleConfirm(){if(this.element&&this.element.events&&this.element.events.onConfirm){let e=this.element.events.onConfirm;this.eventFunction[e]({field:this.element.model,currentRef:this})}},confirmLoading(e){this.element.options.confirmLoading=e},setOptions(e,t){"string"==typeof e&&(e=[e]),this._setOptions(this.element.list,e,t)},setData(e){return new Promise((t=>{this.$nextTick((()=>{Object.keys(e).forEach((t=>{this.dialogModel[t]=e[t]})),t()}))}))},getValues(){return this.dialogModel},getValue(e){return this.dialogModel[e]},addClassName(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{updateClassName(this.element.list,e.split("."),t,"add")}))},removeClassName(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{updateClassName(this.element.list,e.split("."),t,"remove")}))},_setDisabled(e,t,o){for(let n=0;n<e.length;n++)"grid"===e[n].type?e[n].columns.forEach((e=>{this._setDisabled(e.list,t,o)})):"tabs"===e[n].type||"collapse"===e[n].type?e[n].tabs.forEach((e=>{this._setDisabled(e.list,t,o)})):"report"===e[n].type?e[n].rows.forEach((e=>{e.columns.forEach((e=>{this._setDisabled(e.list,t,o)}))})):"inline"===e[n].type||"card"===e[n].type?this._setDisabled(e[n].list,t,o):t.indexOf(e[n].model)>=0&&(e[n].options.disabled=o)},_setOptions(e,t,o){for(let n=0;n<e.length;n++)"grid"===e[n].type?e[n].columns.forEach((e=>{this._setOptions(e.list,t,o)})):"tabs"===e[n].type||"collapse"===e[n].type?e[n].tabs.forEach((e=>{this._setOptions(e.list,t,o)})):"report"===e[n].type?e[n].rows.forEach((e=>{e.columns.forEach((e=>{this._setOptions(e.list,t,o)}))})):("inline"===e[n].type||"card"===e[n].type)&&this._setOptions(e[n].list,t,o),t.indexOf(e[n].model)>=0&&Object.keys(o).forEach((t=>{e[n].options[t]=o[t]}))},_getAllRuleFields(){let e=[];return Object.keys(this.dialogModel).forEach((t=>{if(Array.isArray(this.dialogModel[t])){this.dialogModel[t].forEach(((o,n)=>{Object.keys(o).forEach((o=>{e.push(`${this.element.model}.${t}.${n}.${o}`)}))}))}else e.push(`${this.element.model}.${t}`)})),e}},watch:{dialogModel:{deep:!0,handler(e){this.$emit("update:models",{...this.models,[this.element.model]:e})}},models:{deep:!0,handler(e){this.dialogModel=this.models[this.element.model]}}}};function _sfc_render$k(e,t,o,n,i,l){const a=vue.resolveComponent("generate-col-item"),r=vue.resolveComponent("generate-tab-item"),s=vue.resolveComponent("generate-collapse"),d=vue.resolveComponent("generate-report"),u=vue.resolveComponent("generate-card"),c=vue.resolveComponent("generate-inline"),p=vue.resolveComponent("generate-form-item"),m=vue.resolveComponent("el-button"),h=vue.resolveComponent("el-dialog");return vue.openBlock(),vue.createBlock(h,{modelValue:i.visible,"onUpdate:modelValue":t[0]||(t[0]=e=>i.visible=e),title:o.element.options.title,width:o.element.options.width||"50%",top:o.element.options.top||"15vh","close-on-click-modal":!1,"show-close":o.element.options.showClose,center:o.element.options.center,"destroy-on-close":"",ref:`generate-dialog-${o.element.model}`,class:vue.normalizeClass(["fm-generate-dialog",{[o.element.options&&o.element.options.customClass]:!(!o.element.options||!o.element.options.customClass)}]),onOpen:l.handleOpen,onClose:l.handleClose},vue.createSlots({default:vue.withCtx((()=>[vue.createElementVNode("div",null,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.list,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,["grid"==t.type?(vue.openBlock(),vue.createBlock(a,{key:t.key,model:i.dialogModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-dialog":!0,"dialog-name":o.element.model,group:o.element.model,"field-node":o.element.model},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","dialog-name","group","field-node"])):"tabs"==t.type?(vue.openBlock(),vue.createBlock(r,{key:t.key,model:i.dialogModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-dialog":!0,"dialog-name":o.element.model,group:o.element.model,"field-node":o.element.model},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","dialog-name","group","field-node"])):"collapse"==t.type?(vue.openBlock(),vue.createBlock(s,{key:t.key,model:i.dialogModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-dialog":!0,"dialog-name":o.element.model,group:o.element.model,"field-node":o.element.model},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","dialog-name","group","field-node"])):"report"==t.type?(vue.openBlock(),vue.createBlock(d,{key:t.key,model:i.dialogModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-dialog":!0,"dialog-name":o.element.model,group:o.element.model,"field-node":o.element.model},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","dialog-name","group","field-node"])):"card"==t.type?(vue.openBlock(),vue.createBlock(u,{key:t.key,model:i.dialogModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-dialog":!0,"dialog-name":o.element.model,group:o.element.model,"field-node":o.element.model},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","dialog-name","group","field-node"])):"inline"==t.type?(vue.openBlock(),vue.createBlock(c,{key:t.key,model:i.dialogModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-dialog":!0,"dialog-name":o.element.model,group:o.element.model,"field-node":o.element.model},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","dialog-name","group","field-node"])):(vue.openBlock(),vue.createBlock(p,{key:t.key,models:i.dialogModel,rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-dialog":!0,"dialog-name":o.element.model,group:o.element.model,"field-node":o.element.model},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","dialog-name","group","field-node"]))],64)))),256))])])),_:2},[o.element.options.showCancel||o.element.options.showOk?{name:"footer",fn:vue.withCtx((()=>[vue.createElementVNode("div",null,[o.element.options.showCancel?(vue.openBlock(),vue.createBlock(m,{key:0,onClick:l.handleCancel},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.element.options.cancelText),1)])),_:1},8,["onClick"])):vue.createCommentVNode("",!0),o.element.options.showOk?(vue.openBlock(),vue.createBlock(m,{key:1,type:"primary",loading:o.element.options.confirmLoading,onClick:l.handleConfirm},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.element.options.okText),1)])),_:1},8,["loading","onClick"])):vue.createCommentVNode("",!0)])])),key:"0"}:void 0]),1032,["modelValue","title","width","top","show-close","center","class","onOpen","onClose"])}var GenerateDialog$1=_export_sfc(_sfc_main$m,[["render",_sfc_render$k]]);const loadJspdf=()=>new Promise(((e,t)=>{window.FormMaking_OPTIONS.jsPDF?e(window.FormMaking_OPTIONS.jsPDF):window.jspdf?e(window.jspdf.jsPDF):t("jsPDF not found")})),loadHtml2canvas=()=>new Promise(((e,t)=>{window.FormMaking_OPTIONS.html2canvas?e(window.FormMaking_OPTIONS.html2canvas):window.html2canvas?e(window.html2canvas):t("html2canvas not found")})),exportPDF=e=>new Promise(((t,o)=>{loadJspdf().then((n=>{loadHtml2canvas().then((i=>{const l=new n("p","pt","a4");i(e,{dpi:300,scale:4,allowTaint:!0,useCORS:!0}).then((e=>{let o=e.getContext("2d");o.mozImageSmoothingEnabled=!1,o.webkitImageSmoothingEnabled=!1,o.msImageSmoothingEnabled=!1,o.imageSmoothingEnabled=!1;const n=l.internal.pageSize.getWidth(),i=l.internal.pageSize.getHeight(),a=n-20-20,r=i-20-30,s=a,d=e.height*s/e.width;let u=d,c=1;if(u<r){let t=e.toDataURL("image/jpeg");l.addImage(t,"JPEG",20,20,s,d)}else for(;u>0;){let t=e.width,o=t*r/a;const n=document.createElement("canvas"),i=n.getContext("2d");i.mozImageSmoothingEnabled=!1,i.webkitImageSmoothingEnabled=!1,i.msImageSmoothingEnabled=!1,i.imageSmoothingEnabled=!1,n.width=t,n.height=o;let s=e.height-(c-1)*o;if(s<o){n.height=s,i.drawImage(e,0,(c-1)*o,e.width,s,0,0,t,s);let d=n.toDataURL("image/jpeg");l.addImage(d,"JPEG",20,20,a,r/o*s)}else{i.drawImage(e,0,(c-1)*o,e.width,o,0,0,t,o);let s=n.toDataURL("image/jpeg");l.addImage(s,"JPEG",20,20,a,r)}u-=r,u>0&&(l.addPage(),c++)}const p=l.internal.getNumberOfPages();for(let t=1;t<=p;t++)l.setPage(t),l.setTextColor(144,147,153),l.setFontSize(10),l.text("Powered by FormMaking - https://form.making.link",n-247,i-20);t(l.output("blob"))})).catch((()=>{o()}))})).catch((e=>o(e)))})).catch((e=>o(e)))})),_sfc_main$l={name:"fm-generate-form",components:{GenerateFormItem:GenerateFormItem$2,GenerateColItem:GenerateColItem$2,GenerateTabItem:GenerateTabItem$2,GenerateReport:GenerateReport$2,GenerateInline:GenerateInline$1,GenerateCollapse:GenerateCollapse$2,GenerateDialog:GenerateDialog$1,GenerateCard:GenerateCard$2},props:{data:{type:Object,default:()=>({list:[],config:{labelWidth:100,labelPosition:"right",size:"small",customClass:"",ui:"element",layout:"horizontal"}})},remote:{type:Object,default:()=>({})},value:{type:Object,default:()=>({})},edit:{type:Boolean,default:!0},printRead:{type:Boolean,default:!1},remoteOption:{type:Object,default:()=>({})},preview:{type:Boolean,default:!1},platform:{type:String,default:"pc"}},emits:["on-change"],data(){return{formData:{},models:{},rules:{},blanks:[],displayFields:{},dataBindFields:{},generateShow:!1,resetModels:{},formKey:Math.random().toString(36).slice(-8),formStyleKey:Math.random().toString(36).slice(-8),formValue:this.value,formShow:!1,formRef:Math.random().toString(36).slice(-8)+"Form",containerKey:Math.random().toString(36).slice(-8),dataSourceValue:[],eventFunction:{},instanceObject:{},dataSourceInterface:[],dynamicHideFields:{},dynamicValueData:[],dynamicValueFxInterface:{},dynamicOptionFxInterface:{},formItemContexts:{}}},created(){this._initForm()},mounted(){this.$nextTick((()=>{this.eventFunction.mounted&&this.eventFunction.mounted({})}))},beforeUnmount(){let e=".fm-"+this.formStyleKey+" ";clearStyleSheets(e)},provide(){return{generateComponentInstance:this.generateComponentInstance,deleteComponentInstance:this.deleteComponentInstance,eventScriptConfig:this.getEventScriptConfig,getFormComponent:this.getFormComponent,onChange:this._changeFormValue,onFormDisabled:this.disabled,dynamicHideFields:this.dynamicHideFields,onFormHide:this.hide,onFormDisplay:this.display,dynamicValueData:this.dynamicValueData,dynamicOptionData:this.dynamicOptionData,formContext:this,generateFormItemContext:this.generateFormItemContext,deleteFormItemContext:this.deleteFormItemContext,sendRequest:this.sendRequest}},methods:{getFormComponent(){return this.$refs[this.formRef]},_changeFormValue(e,t){this.models[t]=e,this.$emit("on-change",t,e,this.models)},_initForm(){return this.formShow=!1,this.formData=_.cloneDeep(this.data),this.models={},this.rules={},this.blanks=[],this.displayFields={},this.dataBindFields={},this.resetModels={},this.dataSourceValue=[],this.eventFunction=[],this.instanceObject={},this.dataSourceInterface=[],this.dynamicValueData.splice(0,this.dynamicValueData.length),Object.keys(this.dynamicHideFields).forEach((e=>delete this.dynamicHideFields[e])),this.dynamicValueFxInterface={},this.dynamicOptionFxInterface={},Object.keys(this.data).length?this.generateModel(this.formData.list):this.generateModel([]),this.models={...this.models},new Promise((e=>{this.$nextTick((()=>{if(this.formShow=!0,this.formData.config&&this.formData.config.styleSheets){let e=".fm-"+this.formStyleKey+" ";updateStyleSheets(splitStyleSheets(this.formData.config.styleSheets),e)}this.loadDataSource(),this.loadDynamicValueFx(),this.loadEvents(),this.$nextTick((()=>{this.eventFunction.refresh&&this.eventFunction.refresh({}),this.resetModels=_.cloneDeep(this.models),e()}))}))}))},getEventScriptConfig(){var e,t,o;return null!=(o=null==(t=null==(e=this.data)?void 0:e.config)?void 0:t.eventScript)?o:[]},loadEvents(){if(this.formData.config&&this.formData.config.eventScript)for(let e=0;e<this.formData.config.eventScript.length;e++){let t=this.formData.config.eventScript[e];if("rule"===t.type){const e=Object.getPrototypeOf((async function(){})).constructor;this.eventFunction[t.key]=new e(ruleToFunction(t.rules)).bind(this)}else this.eventFunction[t.key]=Function(t.func).bind(this)}},triggerEvent(e,t){if(this.formData.config&&this.formData.config.eventScript){let o=this.formData.config.eventScript.find((t=>t.name==e));if(o)return this.eventFunction[o.key](t)}},refreshDynamicValueAll(){this.refreshDynamicValue()},refreshDynamicValue(e,t){if(void 0===e){let e=[];Object.keys(this.dynamicValueFxInterface).forEach((t=>{if(this.formItemContexts[t])Array.isArray(this.formItemContexts[t])?this.formItemContexts[t].forEach((t=>{e.push(t)})):e.push(this.formItemContexts[t]);else{let o=[];Object.keys(this.formItemContexts).forEach((e=>{this.formItemContexts[e].groupNode==t&&o.push(this.formItemContexts[e])})),o.forEach((t=>{e.push(t)}))}}));for(let t=0;t<this.dataSourceInterface.length;t++){let o=this.dataSourceInterface[t];o.dynamicValueFields.length&&o.dynamicValueFields.forEach((({field:t,struct:o})=>{if(this.formItemContexts[t])Array.isArray(this.formItemContexts[t])?this.formItemContexts[t].forEach((t=>{e.push(t)})):e.push(this.formItemContexts[t]);else{let o=[];Object.keys(this.formItemContexts).forEach((e=>{this.formItemContexts[e].groupNode==t&&o.push(this.formItemContexts[e])})),o.forEach((t=>{e.push(t)}))}}))}return new Promise(((t,o)=>{Promise.all(e.map((e=>e.refreshDynamicValue()))).then((e=>{t(e)})).catch((e=>{o(e)}))}))}"string"==typeof e&&(e=[e]);let o=[];const n=t&&"object"==typeof t?{...t}:{};return e.forEach((e=>{if(this.formItemContexts[e])Array.isArray(this.formItemContexts[e])?this.formItemContexts[e].forEach((e=>{o.push(e)})):o.push(this.formItemContexts[e]);else{let t=[];Object.keys(this.formItemContexts).forEach((o=>{this.formItemContexts[o].groupNode==e&&t.push(this.formItemContexts[o])})),t.forEach((e=>{o.push(e)}))}})),new Promise(((e,t)=>{Promise.all(o.map((e=>e.refreshDynamicValue(n)))).then((t=>{e(t)})).catch((e=>{t(e)}))}))},loadDataSource(){var e,t;for(let o=0;o<this.dataSourceInterface.length;o++){let e=this.dataSourceInterface[o],t=this.formData.config.dataSource.find((t=>t.key==e.key));t&&t.auto&&t.name&&this.sendRequest(t.name,{...e.args}).then((t=>{let o={...e.args};for(let e in o)isExpression(o[e])&&(o[e]=executeExpression(extractExpression(o[e]),{},this));e.fields.forEach((n=>{let i=n+"."+e.key,l=this.dataSourceValue.find((e=>e.key===i));l?l.value=t:this.dataSourceValue.push({key:i,args:o,value:t})})),e.dynamicValueFields.forEach((({field:n,struct:i})=>{let l=n+"."+e.key,a=this.dynamicValueData.find((e=>e.key===l));a?a.value=t:this.dynamicValueData.push({key:l,args:o,value:t})}))}))}if((null==(t=null==(e=this.formData.config)?void 0:e.dataSource)?void 0:t.length)>0)for(let o=0;o<this.formData.config.dataSource.length;o++){let e=this.formData.config.dataSource[o];e.auto&&this.dataSourceInterface.findIndex((t=>t.key==e.key))<0&&this.sendRequest(e.name,{})}},loadDynamicValueFx(){Object.keys(this.dynamicValueFxInterface).forEach((e=>{if(this.formItemContexts[e])Array.isArray(this.formItemContexts[e])?this.formItemContexts[e].forEach((e=>{e.refreshDynamicValue()})):this.formItemContexts[e].refreshDynamicValue();else{let t=[];Object.keys(this.formItemContexts).forEach((o=>{this.formItemContexts[o].groupNode==e&&t.push(this.formItemContexts[o])})),t.forEach((e=>{e.refreshDynamicValue()}))}}))},refreshFieldOptionData(e,t){if(void 0===e)return Promise.resolve([]);"string"==typeof e&&(e=[e]);let o=[];const n=t&&"object"==typeof t?{...t}:{};return e.forEach((e=>{var t,n;if(this.instanceObject[e])Array.isArray(this.instanceObject[e])?this.instanceObject[e].forEach((e=>{(null==e?void 0:e.$parent)&&o.push(null==e?void 0:e.$parent)})):(null==(t=this.instanceObject[e])?void 0:t.$parent)&&o.push(null==(n=this.instanceObject[e])?void 0:n.$parent);else{let t=[];Object.keys(this.instanceObject).forEach((o=>{var n,i;(null==(i=null==(n=this.instanceObject[o])?void 0:n.$parent)?void 0:i.groupNode)==e&&t.push(this.instanceObject[o])})),t.forEach((e=>{(null==e?void 0:e.$parent)&&o.push(null==e?void 0:e.$parent)}))}})),new Promise(((e,t)=>{Promise.all(o.map((e=>e.refreshOptionData(n)))).then((t=>{e(t)})).catch((e=>{t(e)}))}))},refreshFieldDataSource(e,t){let o=this.dataSourceInterface.find((t=>t.fields.includes(e)));return new Promise(((n,i)=>{var l;if(o){let a=null==(l=this.formData.config.dataSource.find((e=>e.key==o.key)))?void 0:l.name;a&&this.sendRequest(a,{...o.args,...t}).then((t=>{let i=e+"."+o.key,l=this.dataSourceValue.find((e=>e.key===i));l?l.value=t:this.dataSourceValue.push({key:i,value:t}),n(t)})).catch((()=>{i()}))}else n()}))},getFieldDataSource(e){let t=this.dataSourceInterface.find((t=>t.fields.includes(e)));if(t){let o=e+"."+t.key,n=this.dataSourceValue.find((e=>e.key===o));if(n)return n.value}return null},sendRequest(e,t={}){return new Promise(((o,n)=>{let i=this.formData.config.dataSource.find((t=>t.name===e));if(i||(i=this.formData.config.dataSource.find((t=>t.key===e))),i){for(let o in t)isExpression(t[o])&&(t[o]=executeExpression(extractExpression(t[o]),{},this));let e={method:i.method,url:i.url,headers:{},params:{},data:{}},l={};i.headers&&Object.keys(i.headers).forEach((e=>{isExpression(i.headers[e])?l[e]=executeExpression(extractExpression(i.headers[e]),t,this):l[e]=i.headers[e]})),Object.keys(l).length&&(e.headers=l);let a={};if(i.params&&Object.keys(i.params).forEach((e=>{isExpression(i.params[e])?a[e]=executeExpression(extractExpression(i.params[e]),t,this):a[e]=i.params[e]})),"POST"===e.method||"PUT"===e.method?e.data=a:e.params=a,i.requestFunc){e=Function("config, args",i.requestFunc).bind(this)(e,t)}axios(e).then((e=>{let n=e;if(i.responseFunc){n=Function("res, args",i.responseFunc).bind(this)(e.data,t),o(n)}else o(e.data)})).catch((e=>{if(i.errorFunc){Function("error",i.errorFunc).bind(this)(e)}n(e)}))}}))},generateSubformModel(e,t,o){for(let n=0;n<t.length;n++)"grid"===t[n].type?t[n].columns.forEach((t=>{this.generateSubformModel(e,t.list,o)})):"tabs"===t[n].type||"collapse"===t[n].type?t[n].tabs.forEach((t=>{this.generateSubformModel(e,t.list,o)})):"report"===t[n].type?t[n].rows.forEach((t=>{t.columns.forEach((t=>{this.generateSubformModel(e,t.list,o)}))})):"inline"===t[n].type||"card"===t[n].type?this.generateSubformModel(e,t[n].list,o):("blank"===t[n].type&&this.blanks.push({name:t[n].model}),t[n].options.dataBind&&(["subform","group","table"].includes(t[n].type)?o[t[n].model]={}:o[t[n].model]=!0),t[n].tableColumns&&t[n].tableColumns.length&&t[n].tableColumns.forEach((i=>{"blank"===i.type&&this.blanks.push({name:i.model}),i.options.dataBind&&t[n].options.dataBind&&(o[t[n].model][i.model]=!0),this._generateRules(`${e}.${t[n].model}.${i.model}`,i.rules),this._generateDataSource(i,`${e}.${t[n].model}.${i.model}`)})),"subform"==t[n].type&&this.generateSubformModel(`${e}.${t[n].model}`,t[n].list,o[t[n].model]||{}),"group"==t[n].type&&this.generateGroupModel(`${e}.${t[n].model}`,t[n].list,o[t[n].model]||{}),this._generateRules(`${e}.${t[n].model}`,t[n].rules),this._generateDataSource(t[n],`${e}.${t[n].model}`))},generateDialogModel(e,t,o){for(let n=0;n<t.length;n++)"grid"===t[n].type?t[n].columns.forEach((t=>{this.generateDialogModel(e,t.list,o)})):"tabs"===t[n].type||"collapse"===t[n].type?t[n].tabs.forEach((t=>{this.generateDialogModel(e,t.list,o)})):"report"===t[n].type?t[n].rows.forEach((t=>{t.columns.forEach((t=>{this.generateDialogModel(e,t.list,o)}))})):"inline"===t[n].type||"card"===t[n].type?this.generateDialogModel(e,t[n].list,o):("blank"===t[n].type&&this.blanks.push({name:t[n].model}),t[n].options.dataBind&&(["subform","group","table"].includes(t[n].type)?o[t[n].model]={}:o[t[n].model]=!0),"subform"==t[n].type&&this.generateSubformModel(`${e}.${t[n].model}`,t[n].list,o[t[n].model]||{}),"group"==t[n].type&&this.generateGroupModel(`${e}.${t[n].model}`,t[n].list,o[t[n].model]||{}),t[n].tableColumns&&t[n].tableColumns.length&&t[n].tableColumns.forEach((i=>{"blank"===i.type&&this.blanks.push({name:i.model}),i.options.dataBind&&t[n].options.dataBind&&(o[t[n].model][i.model]=!0),this._generateRules(`${e}.${t[n].model}.${i.model}`,i.rules),this._generateDataSource(i,`${e}.${t[n].model}.${i.model}`)})),this._generateRules(`${e}.${t[n].model}`,t[n].rules),this._generateDataSource(t[n],`${e}.${t[n].model}`))},generateGroupModel(e,t,o){for(let n=0;n<t.length;n++)"grid"===t[n].type?t[n].columns.forEach((t=>{this.generateGroupModel(e,t.list,o)})):"tabs"===t[n].type||"collapse"===t[n].type?t[n].tabs.forEach((t=>{this.generateGroupModel(e,t.list,o)})):"report"===t[n].type?t[n].rows.forEach((t=>{t.columns.forEach((t=>{this.generateGroupModel(e,t.list,o)}))})):"inline"===t[n].type||"card"===t[n].type?this.generateGroupModel(e,t[n].list,o):("blank"===t[n].type&&this.blanks.push({name:t[n].model}),t[n].options.dataBind&&(["subform","group","table"].includes(t[n].type)?o[t[n].model]={}:o[t[n].model]=!0),"subform"==t[n].type&&this.generateSubformModel(`${e}.${t[n].model}`,t[n].list,o[t[n].model]||{}),"group"==t[n].type&&this.generateGroupModel(`${e}.${t[n].model}`,t[n].list,o[t[n].model]||{}),t[n].tableColumns&&t[n].tableColumns.length&&t[n].tableColumns.forEach((i=>{"blank"===i.type&&this.blanks.push({name:i.model}),i.options.dataBind&&t[n].options.dataBind&&(o[t[n].model][i.model]=!0),this._generateRules(`${e}.${t[n].model}.${i.model}`,i.rules),this._generateDataSource(i,`${e}.${t[n].model}.${i.model}`)})),this._generateRules(`${e}.${t[n].model}`,t[n].rules),this._generateDataSource(t[n],`${e}.${t[n].model}`))},generateModel(e){for(let t=0;t<e.length;t++)"grid"===e[t].type?(this.displayFields[e[t].model]=!e[t].options.hidden,e[t].columns.forEach((e=>{this.generateModel(e.list)}))):"tabs"===e[t].type||"collapse"===e[t].type?(e[t].tabs.forEach((e=>{this.generateModel(e.list)})),this.displayFields[e[t].model]=!e[t].options.hidden):"report"===e[t].type?(e[t].rows.forEach((e=>{e.columns.forEach((e=>{this.generateModel(e.list)}))})),this.displayFields[e[t].model]=!e[t].options.hidden):"inline"===e[t].type||"card"===e[t].type?(this.generateModel(e[t].list),this.displayFields[e[t].model]=!e[t].options.hidden):(Object.keys(this.formValue).indexOf(e[t].model)>=0?(this.models[e[t].model]=this.formValue[e[t].model],this.displayFields[e[t].model]=!e[t].options.hidden,"blank"===e[t].type&&this.blanks.push({name:e[t].model})):"blank"===e[t].type?(this.models[e[t].model]="String"===e[t].options.defaultType?"":"Object"===e[t].options.defaultType?{}:[],this.displayFields[e[t].model]=!e[t].options.hidden,this.blanks.push({name:e[t].model})):(this.models[e[t].model]=_.cloneDeep(e[t].options.defaultValue),this.displayFields[e[t].model]=!e[t].options.hidden),(Object.keys(e[t].options).indexOf("dataBind")<0||e[t].options.dataBind)&&e[t].key&&e[t].model&&(["subform","table","dialog","group"].includes(e[t].type)?this.dataBindFields[e[t].model]={}:this.dataBindFields[e[t].model]=!0),"subform"==e[t].type&&this.generateSubformModel(e[t].model,e[t].list,this.dataBindFields[e[t].model]||{}),"dialog"==e[t].type&&this.generateDialogModel(e[t].model,e[t].list,this.dataBindFields[e[t].model]||{}),"group"==e[t].type&&this.generateGroupModel(e[t].model,e[t].list,this.dataBindFields[e[t].model]||{}),e[t].tableColumns&&e[t].tableColumns.length&&e[t].tableColumns.forEach((o=>{"blank"===o.type&&this.blanks.push({name:o.model}),o.options.dataBind&&e[t].options.dataBind&&(this.dataBindFields[e[t].model][o.model]=!0),this._generateRules(`${e[t].model}.${o.model}`,o.rules),this._generateDataSource(o,`${e[t].model}.${o.model}`)})),this._generateRules(e[t].model,e[t].rules),this._generateDataSource(e[t],e[t].model))},_generateDataSource(e,t){e.options.remote&&"datasource"===e.options.remoteType&&e.options.remoteDataSource&&this._setDataSourceInterface(t,e.options.remoteArgs,e.options.remoteDataSource),e.options.remote&&"fx"===e.options.remoteType&&e.options.remoteFx&&(this.dynamicOptionFxInterface[t]=e.options.remoteFx),"imgupload"!=e.type&&"fileupload"!=e.type||"datasource"!=e.options.tokenType||!e.options.tokenDataSource||this._setDataSourceInterface(t,e.options.remoteArgs,e.options.tokenDataSource),e.options.isDynamicValue&&"datasource"===e.options.dynamicValueType&&e.options.dynamicValueDataSource&&this._setDynamicValueInterface(t,e.options.dynamicValueArgs,e.options.dynamicValueDataSource,e.options.dynamicValueStruct),e.options.isDynamicValue&&"fx"===e.options.dynamicValueType&&(this.dynamicValueFxInterface[t]=e.options.dynamicValueFx)},_generateRules(model,rules){this.rules[model]?this.rules[model]=[...this.rules[model],...rules?rules.map((im=>{if(im.pattern)return{...im,pattern:eval(im.pattern)};if(im.func){const e=Function("rule","value","callback",im.func).bind(this);return{...im,validator:e}}return{...im}})):[]]:this.rules[model]=[...rules?rules.map((im=>{if(im.pattern)return{...im,pattern:eval(im.pattern)};if(im.func){const e=Function("rule","value","callback",im.func).bind(this);return{...im,validator:e}}return{...im}})):[]]},_setDataSourceInterface(e,t,o){let n;n="string"==typeof t?new Function('"use strict";return ('+(t||"{}")+")").bind(this)():{...t};for(let l in n)isExpression(n[l])&&(n[l]=executeExpression(extractExpression(n[l]),{},this));let i=this.dataSourceInterface.findIndex((e=>e.key==o&&_.isEqual(e.args,n)));i>=0?this.dataSourceInterface[i].fields.push(e):this.dataSourceInterface.push({key:o,args:n,fields:[e],dynamicValueFields:[]})},_setDynamicValueInterface(e,t,o,n){let i=this.dataSourceInterface.findIndex((e=>e.key==o&&_.isEqual(e.args,t)));i>=0?this.dataSourceInterface[i].dynamicValueFields.push({field:e,struct:n}):this.dataSourceInterface.push({key:o,args:t,dynamicValueFields:[{field:e,struct:n}],fields:[]})},_setSubDisabled(e,t,o){for(let n=0;n<e.length;n++)if("grid"===e[n].type)e[n].columns.forEach((e=>{this._setSubDisabled(e.list,t,o)}));else if("tabs"===e[n].type)e[n].tabs.forEach((e=>{this._setSubDisabled(e.list,t,o)}));else if("collapse"===e[n].type)e[n].tabs.forEach((e=>{this._setSubDisabled(e.list,t,o)}));else if("report"===e[n].type)e[n].rows.forEach((e=>{e.columns.forEach((e=>{this._setSubDisabled(e.list,t,o)}))}));else if("inline"===e[n].type)this._setSubDisabled(e[n].list,t,o);else if("card"===e[n].type)this._setSubDisabled(e[n].list,t,o);else if(1===t.length)e[n].model===t[0]&&(e[n].options.disabled=o);else{if(e[n].model!==t[0])continue;let i=[...t];i.splice(0,1),"table"===e[n].type&&this._setSubDisabled(e[n].tableColumns,i,o),"subform"===e[n].type&&this._setSubDisabled(e[n].list,i,o),"group"===e[n].type&&this._setSubDisabled(e[n].list,i,o),"dialog"===e[n].type&&this._setSubDisabled(e[n].list,i,o)}},_setSubOptions(e,t,o){for(let n=0;n<e.length;n++)if(1===t.length)e[n].model===t[0]?Object.keys(o).forEach((t=>{e[n].options[t]=o[t]})):"grid"===e[n].type?e[n].columns.forEach((e=>{this._setSubOptions(e.list,t,o)})):"tabs"===e[n].type||"collapse"===e[n].type?e[n].tabs.forEach((e=>{this._setSubOptions(e.list,t,o)})):"report"===e[n].type?e[n].rows.forEach((e=>{e.columns.forEach((e=>{this._setSubOptions(e.list,t,o)}))})):("inline"===e[n].type||"card"===e[n].type)&&this._setSubOptions(e[n].list,t,o);else if("grid"===e[n].type)e[n].columns.forEach((e=>{this._setSubOptions(e.list,t,o)}));else if("tabs"===e[n].type)e[n].tabs.forEach((e=>{this._setSubOptions(e.list,t,o)}));else if("collapse"===e[n].type)e[n].tabs.forEach((e=>{this._setSubOptions(e.list,t,o)}));else if("report"===e[n].type)e[n].rows.forEach((e=>{e.columns.forEach((e=>{this._setSubOptions(e.list,t,o)}))}));else if("inline"===e[n].type)this._setSubOptions(e[n].list,t,o);else if("card"===e[n].type)this._setSubOptions(e[n].list,t,o);else{if(e[n].model!==t[0])continue;let i=[...t];i.splice(0,1),"table"===e[n].type&&this._setSubOptions(e[n].tableColumns,i,o),"subform"===e[n].type&&this._setSubOptions(e[n].list,i,o),"group"===e[n].type&&this._setSubOptions(e[n].list,i,o),"dialog"===e[n].type&&this._setSubOptions(e[n].list,i,o)}},_getSubOptions(e,t){for(let o=0;o<e.length;o++)if(1===t.length){if(e[o].model===t[0])return e[o].options;if("grid"===e[o].type)for(const n of e[o].columns){const e=this._getSubOptions(n.list,t);if(e)return e}else if("tabs"===e[o].type)for(const n of e[o].tabs){const e=this._getSubOptions(n.list,t);if(e)return e}else if("collapse"===e[o].type)for(const n of e[o].tabs){const e=this._getSubOptions(n.list,t);if(e)return e}else if("report"===e[o].type)for(const n of e[o].rows)for(const e of n.columns){const o=this._getSubOptions(e.list,t);if(o)return o}else if("inline"===e[o].type){const n=this._getSubOptions(e[o].list,t);if(n)return n}else if("card"===e[o].type){const n=this._getSubOptions(e[o].list,t);if(n)return n}}else if("grid"===e[o].type)for(const n of e[o].columns){const e=this._getSubOptions(n.list,t);if(e)return e}else if("tabs"===e[o].type)for(const n of e[o].tabs){const e=this._getSubOptions(n.list,t);if(e)return e}else if("collapse"===e[o].type)for(const n of e[o].tabs){const e=this._getSubOptions(n.list,t);if(e)return e}else if("report"===e[o].type)for(const n of e[o].rows)for(const e of n.columns){const o=this._getSubOptions(e.list,t);if(o)return o}else if("inline"===e[o].type){const n=this._getSubOptions(e[o].list,t);if(n)return n}else if("card"===e[o].type){const n=this._getSubOptions(e[o].list,t);if(n)return n}else{if(e[o].model!==t[0])continue;let n=[...t];if(n.splice(0,1),"table"===e[o].type){const t=this._getSubOptions(e[o].tableColumns,n);if(t)return t}if("subform"===e[o].type){const t=this._getSubOptions(e[o].list,n);if(t)return t}if("group"===e[o].type){const t=this._getSubOptions(e[o].list,n);if(t)return t}if("dialog"===e[o].type){const t=this._getSubOptions(e[o].list,n);if(t)return t}}return null},validate(e){return"string"==typeof e&&(e=[e]),new Promise(((t,o)=>{e&&e.length?this.$refs[this.formRef].validateField(e,((e,n)=>{e?t():o(n)})):this.$refs[this.formRef].validate(((e,n)=>{e?t():o(n)}))}))},getData(e=!0){return new Promise(((t,o)=>{e?this.$refs[this.formRef].validate((e=>{e?t(getBindModels(this.models,this.dataBindFields)):o(new Error(this.$t("fm.message.validError")).message)})):t(getBindModels(this.models,this.dataBindFields))}))},reset(){return new Promise((e=>{this.setData(_.cloneDeep(this.resetModels)).then((()=>{setTimeout((()=>{this.$refs[this.formRef].clearValidate(),e()}))}))}))},onInputChange(e,t){this.$emit("on-change",t,e,this.models),this.$emit(`on-${t}-change`,e)},display(e){"string"==typeof e&&(e=[e]),e.forEach((e=>{this.dynamicHideFields[e]=!1}))},hide(e){"string"==typeof e&&(e=[e]),e.forEach((e=>{this.dynamicHideFields[e]=!0}))},disabled(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{var o;let n=this.instanceObject[e];n?Array.isArray(n)?n.forEach((e=>{var o;null==(o=e.$parent)||o.disabledElement(t)})):null==(o=n.$parent)||o.disabledElement(t):this._setSubDisabled(this.formData.list,e.split("."),t)}))},addClassName(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{updateClassName(this.formData.list,e.split("."),t,"add")}))},removeClassName(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{updateClassName(this.formData.list,e.split("."),t,"remove")}))},async refresh(){await this._initForm()},setData(e){const t=(e,o,n)=>{const i=o.shift();if(0===o.length)e[i]=n;else if(i in e)if(Array.isArray(e[i]))if(Number.isNaN(Number(o[0])))e[i].forEach((e=>{t(e,[...o],n)}));else{const l=o.shift();e[i].length>Number(l)&&t(e[i][Number(l)],[...o],n)}else t(e[i],[...o],n)};return new Promise((o=>{this.$nextTick((()=>{Object.keys(e).forEach((o=>{t(this.models,o.split("."),e[o])})),o()}))}))},getComponent(e){return void 0===e?this.instanceObject:this.instanceObject[e]?this.instanceObject[e]:(consoleError("No component instance found with "+e),null)},getValues(){return _.cloneDeep(this.models)},getValue(e){const t=_.cloneDeep(this.models);let o=e.split(".");const n=(e,t)=>{if(1===t.length)return e[t[0]];{let o=e[t[0]],i=[...t];return i.splice(0,1),n(o,i)}};return n(t,o)},setRules(e,t){this.rules[e]=[...t],this.$nextTick((()=>{var t;if((null==e?void 0:e.split(".").length)>1){const o=null==(t=this.getValue(e.split(".")[0]))?void 0:t.length;if(o)for(let t=0;t<o;t++)this.$refs[this.formRef].validateField([`${e.split(".")[0]}.${t}.${e.split(".")[1]}`])}else this.$refs[this.formRef].validateField([e])}))},setOptions(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{this._setSubOptions(this.formData.list,e.split("."),t)}))},getOptions(e,t){const o=this._getSubOptions(this.formData.list,e.split("."));return t?o[t]:o},generateComponentInstance(e,t){this.instanceObject[e]?Array.isArray(this.instanceObject[e])?this.instanceObject[e]=[...this.instanceObject[e],t]:this.instanceObject[e]=[this.instanceObject[e],t]:this.instanceObject[e]=t},deleteComponentInstance(e){this.instanceObject[e]&&delete this.instanceObject[e]},generateFormItemContext(e,t){this.formItemContexts[e]?Array.isArray(this.formItemContexts[e])?this.formItemContexts[e]=[...this.formItemContexts[e],t]:this.formItemContexts[e]=[this.formItemContexts[e],t]:this.formItemContexts[e]=t},deleteFormItemContext(e){this.formItemContexts[e]&&delete this.formItemContexts[e]},setOptionData(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{var o;const n=this.instanceObject[e];null==(o=null==n?void 0:n.$parent)||o.loadOptions(t)}))},getOptionData(e){var t;const o=this.instanceObject[e];return null==(t=null==o?void 0:o.$parent)?void 0:t.getOptions()},exportPDF(){return this.printRead?exportPDF(document.querySelector(".fm-"+this.formStyleKey)):Promise.reject()},print(){return this.printRead?new Promise(((e,t)=>{exportPDF(document.querySelector(".fm-"+this.formStyleKey)).then((t=>{const o=URL.createObjectURL(t),n="fmiframe-print-container";Array.from(document.getElementsByClassName(n)).forEach((e=>{document.body.removeChild(e)}));let i=document.createElement("iframe");i.style.display="none",i.src=o,i.className=n,i.onload=function(){setTimeout((()=>{i.contentWindow.print(),e(t)}),100)},document.body.appendChild(i)}))})):Promise.reject("Set the print-read attribute to true for printing.")},openDialog(e){const t=this.getComponent(e);t&&t.open()},closeDialog(e){const t=this.getComponent(e);t&&t.close()},getDynamicValue(e){return this.dynamicValueData.find((t=>t.key==e))}}};function _sfc_render$j(e,t,o,n,i,l){var a;const r=vue.resolveComponent("generate-col-item"),s=vue.resolveComponent("generate-tab-item"),d=vue.resolveComponent("generate-collapse"),u=vue.resolveComponent("generate-report"),c=vue.resolveComponent("generate-inline"),p=vue.resolveComponent("generate-dialog"),m=vue.resolveComponent("generate-card"),h=vue.resolveComponent("generate-form-item"),f=vue.resolveComponent("el-form");return vue.openBlock(),vue.createElementBlock("div",{style:vue.normalizeStyle({width:i.formData.config&&i.formData.config.width}),class:vue.normalizeClass(["fm-form",{["fm-"+i.formStyleKey]:!0,"is-print":o.printRead}])},[i.formShow?(vue.openBlock(),vue.createBlock(f,{ref:i.formRef,onSubmit:t[1]||(t[1]=vue.withModifiers((()=>{}),["prevent"])),key:i.formKey,class:vue.normalizeClass({[i.formData.config&&i.formData.config.customClass]:!(!i.formData.config||!i.formData.config.customClass),"no-label-form":i.formData.config&&0==i.formData.config.labelWidth}),size:i.formData.config&&i.formData.config.size,model:i.models,rules:i.rules,"label-position":i.formData.config&&i.formData.config.labelPosition,disabled:!o.edit,"label-width":i.formData.config&&i.formData.config.labelWidth+"px","validate-on-rule-change":!1,"label-suffix":(null==(a=i.formData.config)?void 0:a.labelSuffix)?" : ":" "},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.formData.list,(n=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,["grid"==n.type?(vue.openBlock(),vue.createBlock(r,{key:n.key,model:i.models,rules:i.rules,element:n,remote:o.remote,blanks:i.blanks,display:i.displayFields,onInputChange:l.onInputChange,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":i.containerKey,"data-source-value":i.dataSourceValue,"event-function":i.eventFunction,"print-read":o.printRead,"form-component":e.$refs[i.formRef],group:"","field-node":""},vue.createSlots({_:2},[vue.renderList(i.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","onInputChange","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","form-component"])):"tabs"==n.type?(vue.openBlock(),vue.createBlock(s,{key:n.key,model:i.models,rules:i.rules,element:n,remote:o.remote,blanks:i.blanks,display:i.displayFields,onInputChange:l.onInputChange,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":i.containerKey,"data-source-value":i.dataSourceValue,"event-function":i.eventFunction,"print-read":o.printRead,"form-component":e.$refs[i.formRef],group:"","field-node":""},vue.createSlots({_:2},[vue.renderList(i.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","onInputChange","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","form-component"])):"collapse"==n.type?(vue.openBlock(),vue.createBlock(d,{key:n.key,model:i.models,rules:i.rules,element:n,remote:o.remote,blanks:i.blanks,display:i.displayFields,onInputChange:l.onInputChange,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":i.containerKey,"data-source-value":i.dataSourceValue,"event-function":i.eventFunction,"print-read":o.printRead,"form-component":e.$refs[i.formRef],group:"","field-node":""},vue.createSlots({_:2},[vue.renderList(i.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","onInputChange","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","form-component"])):"report"==n.type?(vue.openBlock(),vue.createBlock(u,{key:n.key,model:i.models,rules:i.rules,element:n,remote:o.remote,blanks:i.blanks,display:i.displayFields,onInputChange:l.onInputChange,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":i.containerKey,"data-source-value":i.dataSourceValue,"event-function":i.eventFunction,"print-read":o.printRead,"form-component":e.$refs[i.formRef],group:"","field-node":""},vue.createSlots({_:2},[vue.renderList(i.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","onInputChange","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","form-component"])):"inline"==n.type?(vue.openBlock(),vue.createBlock(c,{key:n.key,model:i.models,rules:i.rules,element:n,remote:o.remote,blanks:i.blanks,display:i.displayFields,onInputChange:l.onInputChange,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":i.containerKey,"data-source-value":i.dataSourceValue,"event-function":i.eventFunction,"print-read":o.printRead,"form-component":e.$refs[i.formRef],group:"","field-node":""},vue.createSlots({_:2},[vue.renderList(i.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","onInputChange","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","form-component"])):"dialog"==n.type?(vue.openBlock(),vue.createBlock(p,{key:n.key,models:i.models,"onUpdate:models":t[0]||(t[0]=e=>i.models=e),rules:i.rules,element:n,remote:o.remote,blanks:i.blanks,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":i.containerKey,"data-source-value":i.dataSourceValue,"event-function":i.eventFunction,"print-read":o.printRead,"form-component":e.$refs[i.formRef],group:"","field-node":""},vue.createSlots({_:2},[vue.renderList(i.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","element","remote","blanks","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","form-component"])):"card"==n.type?(vue.openBlock(),vue.createBlock(m,{key:n.key,model:i.models,rules:i.rules,element:n,remote:o.remote,blanks:i.blanks,display:i.displayFields,onInputChange:l.onInputChange,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":i.containerKey,"data-source-value":i.dataSourceValue,"event-function":i.eventFunction,"print-read":o.printRead,"form-component":e.$refs[i.formRef],group:"","field-node":""},vue.createSlots({_:2},[vue.renderList(i.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","onInputChange","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","form-component"])):(vue.openBlock(),vue.createBlock(h,{key:n.key,models:i.models,rules:i.rules,widget:n,remote:o.remote,blanks:i.blanks,display:i.displayFields,onInputChange:l.onInputChange,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":i.containerKey,"data-source-value":i.dataSourceValue,"event-function":i.eventFunction,"print-read":o.printRead,"form-component":e.$refs[i.formRef],group:"","field-node":""},vue.createSlots({_:2},[vue.renderList(i.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","onInputChange","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","form-component"]))],64)))),256))])),_:3},8,["class","size","model","rules","label-position","disabled","label-width","label-suffix"])):vue.createCommentVNode("",!0)],6)}var GenerateForm=_export_sfc(_sfc_main$l,[["render",_sfc_render$j]]),FormTable_vue_vue_type_style_index_0_lang="";const _sfc_main$k={components:{VirtualTable:VirtualTable,VirtualRow:VirtualRow,VirtualCell:VirtualCell,GenerateFormItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateFormItem$1})))),GenerateElementItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateElementItem$1}))))},props:["config","columns","value","models","remote","blanks","disableddata","rules","name","remoteOption","preview","platform","dataSourceValue","eventFunction","widget","containerKey","printRead","paging","pageSize","isAdd","isDelete","showControl","isDialog","dialogName","group","fieldNode"],emits:["update:value"],data:()=>({tableData:[],displayFields:{},disabledFields:{},changeItem:{},pagingData:[],pagingLength:0,currentPage:1,tableHideFields:[],tableDisabledFields:[],mobileScreen:window.innerWidth<768,tableKey:Math.random().toString(36).slice(-8),selectedRowKeys:[],checkAll:!1,checkIndeterminate:!1}),computed:{checkSelectLength(){return this.selectedRowKeys.map((e=>this.tableData.find((t=>t.fm_key==e)))).filter((e=>e)).length}},created(){for(let e=0;e<this.columns.length;e++)this.displayFields[this.columns[e].model]=!this.columns[e].options.hidden,this.disabledFields[this.columns[e].model]=this.columns[e].options.disabled;this.tableData=this.value?this.value.map((e=>({...e,fm_key:e.fm_key||Math.random().toString(36).slice(-8)}))):[],this.tableHideFields=this.value?this.value.map((e=>Object.fromEntries(Object.keys(this.displayFields).map((e=>[e,!this.displayFields[e]]))))):[],this.tableDisabledFields=this.value?this.value.map((e=>Object.fromEntries(Object.keys(this.disabledFields).map((e=>[e,this.disabledFields[e]]))))):[],window.addEventListener("resize",this.getMobileScreen),this.loadPagingData()},computed:{tableSize(){switch(this.config.size){case"large":return"default";case"default":return"middle";case"small":return"small"}},rowSelection(){return this.widget.options.selection&&!this.printRead?{checkStrictly:!0,selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange,fixed:"left"}:null}},provide(){return{setTableData:this.setTableData}},inject:["onFormDisabled","dynamicHideFields","onFormHide","onFormDisplay","formContext"],methods:{columnDisplay(e,t){let o=this.group?`${this.group}.${this.widget.model}.${e}`:`${this.widget.model}.${e}`;return null!=this.dynamicHideFields[o]?!this.dynamicHideFields[o]:"boolean"==typeof t.options.hidden?!t.options.hidden:!isExpression(t.options.hidden)||!executeExpression(extractExpression(t.options.hidden),{},this.formContext)},getMobileScreen(){this.mobileScreen=window.innerWidth<768},setData(e,t){return new Promise("number"!=typeof e?o=>{t=e,this.tableData.forEach(((e,o)=>{Object.keys(t).forEach((e=>{this.setTableData(t[e],o,e)}))})),o()}:o=>{this.$nextTick((()=>{Object.keys(t).forEach((o=>{this.setTableData(t[o],e,o)})),o()}))})},setTableData(e,t,o){const n=_.cloneDeep(this.tableData);n[t][o]=e,this.tableData=n},handleAddRow(){let e={},t={},o={};for(let n=0;n<this.columns.length;n++)"blank"===this.columns[n].type?e[this.columns[n].model]="String"==this.columns[n].options.defaultType?"":"Object"==this.columns[n].options.defaultType?{}:[]:"component"===this.columns[n].type||"link"===this.columns[n].type||"button"===this.columns[n].type?e[this.columns[n].model]=void 0:e[this.columns[n].model]=_.cloneDeep(this.columns[n].options.defaultValue),t[this.columns[n].model]=!this.displayFields[this.columns[n].model],o[this.columns[n].model]=this.disabledFields[this.columns[n].model];e.fm_key=Math.random().toString(36).slice(-8),this.tableData=[...this.tableData,{...e}],this.tableHideFields.push(t),this.tableDisabledFields.push(o),this.changeItem={},this.$nextTick((()=>{if(this.widget.events&&this.widget.events.onRowAdd){let e=this.widget.events.onRowAdd;this.eventFunction[e]({rowIndex:this.tableData.length-1,field:this.widget.model,currentRef:this,group:this.group,fieldNode:this.fieldNode})}this.paging&&(this.tableData.length>this.currentPage*this.pageSize&&(this.currentPage=parseInt((this.tableData.length-1)/this.pageSize)+1),this.loadPagingData()),this.calcCheckStatus()}))},handleRemove(e){const t={...this.tableData[e]},o=[...this.tableData];if(o.splice(e,1),this.tableData=o,this.widget.events&&this.widget.events.onRowRemove){let o=this.widget.events.onRowRemove;this.eventFunction[o]({removeIndex:e,removeData:t,field:this.widget.model,currentRef:this,group:this.group,fieldNode:this.fieldNode})}this.changeItem={},this.pagingData=[],this.pagingLength=0,this.paging&&this.$nextTick((()=>{this.tableData.length%this.pageSize==0&&this.currentPage>parseInt(this.tableData.length/this.pageSize)&&(this.currentPage=parseInt(this.tableData.length/this.pageSize)),this.loadPagingData(),this.calcCheckStatus()}))},hide(e){"string"==typeof e&&(e=[e]),e.forEach((e=>{this.onFormHide(`${this.fieldNode}.${e}`)}))},display(e){"string"==typeof e&&(e=[e]),e.forEach((e=>{this.onFormDisplay(`${this.fieldNode}.${e}`)}))},hideChild(e,t){"string"==typeof t&&(t=[t]),t.forEach((t=>{this.onFormHide(`${this.fieldNode}.${e}.${t}`)}))},displayChild(e,t){"string"==typeof t&&(t=[t]),t.forEach((t=>{this.onFormDisplay(`${this.fieldNode}.${e}.${t}`)}))},disabled(e,t){"string"==typeof e&&(e=[e]);for(let o=0;o<this.columns.length;o++)e.indexOf(this.columns[o].model)>=0&&(this.columns[o].options.disabled=t,this.disabledFields[this.columns[o].model]=t);this.tableData.forEach(((o,n)=>{e.forEach((e=>{this.tableDisabledFields[n][e]=t}))}))},disabledChild(e,t,o){"string"==typeof t&&(t=[t]),t.forEach((t=>{this.tableDisabledFields[e][t]=o,this.onFormDisabled(`${this.fieldNode}.${e}.${t}`,o)}))},setOptions(e,t){"string"==typeof e&&(e=[e]);for(let o=0;o<this.columns.length;o++)e.indexOf(this.columns[o].model)>=0&&Object.keys(t).forEach((e=>{this.columns[o].options[e]=t[e]}))},addClassName(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{updateClassName(this.columns,e.split("."),t,"add")}))},removeClassName(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{updateClassName(this.columns,e.split("."),t,"remove")}))},handleTableChange(e){this.changeItem=e},handlePageChange(e){if(this.currentPage=e,this.pagingData=[],this.pagingLength=0,this.$nextTick((()=>{this.loadPagingData()})),this.widget&&this.widget.events&&this.widget.events.onPageChange){let t=this.widget.events.onPageChange;this.eventFunction[t]({currentPage:e,field:this.widget.model,currentRef:this,group:this.group,fieldNode:this.fieldNode})}},loadPagingData(){var e;let t=(this.currentPage-1)*this.pageSize,o=t+this.pageSize;this.pagingData=null==(e=this.tableData)?void 0:e.slice(t,o),this.pagingLength=this.pagingData.length},onSelectChange(e){this.selectedRowKeys=e},getSelection(){return this.selectedRowKeys.map((e=>this.tableData.find((t=>t.fm_key==e)))).filter((e=>e))},clearSelection(){this.selectedRowKeys=[]},handleCheckSelectChange(e,t){t.target.checked?this.selectedRowKeys.includes(this.tableData[e].fm_key)||this.selectedRowKeys.push(this.tableData[e].fm_key):this.selectedRowKeys.includes(this.tableData[e].fm_key)&&this.selectedRowKeys.splice(this.selectedRowKeys.indexOf(this.tableData[e].fm_key),1),this.$nextTick((()=>{this.calcCheckStatus()}))},handleCheckAllChange(e){this.checkIndeterminate=!1,e.target.checked?this.selectedRowKeys=this.tableData.map((e=>e.fm_key)):this.selectedRowKeys=[]},calcCheckStatus(){const e=this.selectedRowKeys.map((e=>this.tableData.find((t=>t.fm_key==e)))).filter((e=>e)).length;0==e?(this.checkAll=!1,this.checkIndeterminate=!1):e==this.tableData.length?(this.checkAll=!0,this.checkIndeterminate=!1):(this.checkAll=!1,this.checkIndeterminate=!0)}},beforeUnmount(){window.removeEventListener("resize",this.getMobileScreen)},watch:{value(e){var t,o,n,i,l;e.forEach((e=>{e.fm_key||(e.fm_key=Math.random().toString(36).slice(-8))})),this.tableData=e;let a=[],r=[];for(let s=0;s<(null==(t=this.value)?void 0:t.length);s++){let e=this.value[s],t=Object.keys(e),d={},u={};for(let a=0;a<t.length;a++)d[t[a]]=(null==(n=null==(o=this.tableHideFields)?void 0:o[s])?void 0:n[t[a]])||!1,u[t[a]]=(null==(l=null==(i=this.tableDisabledFields)?void 0:i[s])?void 0:l[t[a]])||!1;a.push(d),r.push(u)}this.tableHideFields=a,this.tableDisabledFields=r,this.$nextTick((()=>{this.calcCheckStatus()}))},tableData:{deep:!0,handler(e){this.loadPagingData(),this.$emit("update:value",e)}}}},_hoisted_1$a={class:"scope-index"},_hoisted_2$9={class:"scope-action"},_hoisted_3$6=vue.createElementVNode("i",{class:"fm-iconfont icon-trash",style:{"font-size":"12px",margin:"5px"}},null,-1),_hoisted_4$5={key:1},_hoisted_5$5={class:"scope-index"},_hoisted_6$4={class:"scope-action"},_hoisted_7$3=vue.createElementVNode("i",{class:"fm-iconfont icon-trash",style:{"font-size":"12px",margin:"5px"}},null,-1),_hoisted_8$1={key:1},_hoisted_9$1={class:"antd-form-table-mobile-item__top"},_hoisted_10$1=vue.createElementVNode("i",{class:"fm-iconfont icon-trash",style:{"font-size":"12px",margin:"5px"}},null,-1),_hoisted_11$1={class:"antd-form-table-mobile-item__content"},_hoisted_12$1=vue.createElementVNode("i",{class:"fm-iconfont icon-plus",style:{"font-size":"12px",margin:"5px"}},null,-1);function _sfc_render$i(e,t,o,n,i,l){const a=vue.resolveComponent("a-button"),r=vue.resolveComponent("a-popconfirm"),s=vue.resolveComponent("a-table-column"),d=vue.resolveComponent("generate-form-item"),u=vue.resolveComponent("a-table"),c=vue.resolveComponent("VirtualCell"),p=vue.resolveComponent("VirtualRow"),m=vue.resolveComponent("a-checkbox"),h=vue.resolveComponent("VirtualTable"),f=vue.resolveComponent("a-space"),v=vue.resolveComponent("a-col"),g=vue.resolveComponent("a-pagination"),y=vue.resolveComponent("a-row");return vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["antd-form-table",{"is-disabled":o.disableddata}])},[o.preview&&"mobile"!=o.platform||!o.preview&&!i.mobileScreen?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[o.widget.options.virtualTable?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(u,{key:0,dataSource:o.paging?i.pagingData:i.tableData,pagination:!1,bordered:"",class:vue.normalizeClass({"antd-form-table-pc":!o.preview}),"table-layout":"fixed",scroll:{x:"100%"},size:l.tableSize,"row-key":"fm_key",ref:"formTable","row-selection":l.rowSelection},{default:vue.withCtx((()=>[o.showControl?(vue.openBlock(),vue.createBlock(s,{scopedSlots:{customRender:"#"},title:"#","data-index":"#",key:"#",fixed:"left",width:80},{default:vue.withCtx((({index:t})=>[vue.createElementVNode("div",_hoisted_1$a,[vue.createElementVNode("span",null,vue.toDisplayString((o.paging?o.pageSize*(i.currentPage-1):0)+t+1),1)]),vue.createElementVNode("div",_hoisted_2$9,[!o.printRead&&o.isDelete?(vue.openBlock(),vue.createBlock(r,{key:0,disabled:o.disableddata,title:e.$t("fm.description.deleteConfirm"),onConfirm:e=>l.handleRemove((o.paging?o.pageSize*(i.currentPage-1):0)+t)},{default:vue.withCtx((()=>[vue.createVNode(a,{disabled:o.disableddata,type:"primary",danger:"",shape:"circle",size:"small"},{default:vue.withCtx((()=>[_hoisted_3$6])),_:1},8,["disabled"])])),_:2},1032,["disabled","title","onConfirm"])):vue.createCommentVNode("",!0),o.printRead||!o.isDelete?(vue.openBlock(),vue.createElementBlock("span",_hoisted_4$5,vue.toDisplayString((o.paging?o.pageSize*(i.currentPage-1):0)+t+1),1)):vue.createCommentVNode("",!0)])])),_:1})):vue.createCommentVNode("",!0),0==o.columns.length?(vue.openBlock(),vue.createBlock(s,{key:1})):(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:2},vue.renderList(o.columns,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[l.columnDisplay(t.model,t)?(vue.openBlock(),vue.createBlock(s,{key:t.key,"data-index":t.key,title:t.options.hideLabel?"":t.name,width:t.options.width,class:vue.normalizeClass(t.options.required?"required":""),scopedSlots:{customRender:t.key},fixed:!!t.options.fixedColumn&&(t.options.fixedColumnPosition||"left")},{default:vue.withCtx((({index:n})=>[(vue.openBlock(),vue.createBlock(d,{models:i.tableData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.tableHideFields,"sub-disabled-fields":i.tableDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-table":!0,"is-mobile":!1,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"table-name":o.name,config:o.config,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`,key:`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}.${t.key}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","table-name","config","is-dialog","dialog-name","group","field-node"]))])),_:2},1032,["data-index","title","width","class","scopedSlots","fixed"])):vue.createCommentVNode("",!0)],64)))),256))])),_:3},8,["dataSource","class","size","row-selection"])),o.widget.options.virtualTable?(vue.openBlock(),vue.createBlock(h,{key:1,columns:o.columns,showControl:o.showControl,paging:o.paging,pageSize:o.pageSize,currentPage:i.currentPage,displayFields:i.displayFields,group:o.group,widget:o.widget,ref:"virtualTable"},{default:vue.withCtx((({rowWidthCalc:t,rowLeftWidthCalc:n,rowRightWidthCalc:a})=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.paging?i.pagingLength:i.tableData,((r,s)=>(vue.openBlock(),vue.createBlock(p,{rowWidthCalc:t,key:(o.paging?o.pageSize*(i.currentPage-1):0)+s,"row-index":s,class:"main","table-key":i.tableKey},{default:vue.withCtx((()=>[o.showControl?(vue.openBlock(),vue.createBlock(c,{key:0,width:"50px"})):vue.createCommentVNode("",!0),"0px"!=n?(vue.openBlock(),vue.createBlock(c,{key:1,width:`calc(${n})`},null,8,["width"])):vue.createCommentVNode("",!0),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.columns,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[l.columnDisplay(t.model,t)&&!t.options.fixedColumn?(vue.openBlock(),vue.createBlock(c,{key:t.key,width:t.options.width},{default:vue.withCtx((()=>[vue.createVNode(d,{models:i.tableData[(o.paging?o.pageSize*(i.currentPage-1):0)+s],rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.tableHideFields,"sub-disabled-fields":i.tableDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-table":!0,"is-mobile":!1,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+s,"table-name":o.name,config:o.config,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+s}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","table-name","config","is-dialog","dialog-name","group","field-node"])])),_:2},1032,["width"])):vue.createCommentVNode("",!0)],64)))),256)),"0px"!=a?(vue.openBlock(),vue.createBlock(c,{key:2,width:`calc(${a})`},null,8,["width"])):vue.createCommentVNode("",!0)])),_:2},1032,["rowWidthCalc","row-index","table-key"])))),128))])),left:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.paging?i.pagingLength:i.tableData,((t,n)=>(vue.openBlock(),vue.createBlock(p,{key:(o.paging?o.pageSize*(i.currentPage-1):0)+n,rowIndex:n,class:"left","table-key":i.tableKey},{default:vue.withCtx((()=>[o.widget.options.selection?(vue.openBlock(),vue.createBlock(c,{key:0,width:"50px",class:"fm-table-check"},{default:vue.withCtx((()=>[vue.createVNode(m,{checked:i.selectedRowKeys.includes(i.tableData[(o.paging?o.pageSize*(i.currentPage-1):0)+n].fm_key),onChange:e=>l.handleCheckSelectChange((o.paging?o.pageSize*(i.currentPage-1):0)+n,e)},null,8,["checked","onChange"])])),_:2},1024)):vue.createCommentVNode("",!0),o.showControl?(vue.openBlock(),vue.createBlock(c,{key:1,width:"50px"},{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_5$5,[vue.createElementVNode("span",null,vue.toDisplayString((o.paging?o.pageSize*(i.currentPage-1):0)+n+1),1)]),vue.createElementVNode("div",_hoisted_6$4,[!o.printRead&&o.isDelete?(vue.openBlock(),vue.createBlock(r,{key:0,disabled:o.disableddata,title:e.$t("fm.description.deleteConfirm"),onConfirm:e=>l.handleRemove((o.paging?o.pageSize*(i.currentPage-1):0)+n)},{default:vue.withCtx((()=>[vue.createVNode(a,{disabled:o.disableddata,type:"primary",danger:"",shape:"circle",size:"small"},{default:vue.withCtx((()=>[_hoisted_7$3])),_:1},8,["disabled"])])),_:2},1032,["disabled","title","onConfirm"])):vue.createCommentVNode("",!0),o.printRead||!o.isDelete?(vue.openBlock(),vue.createElementBlock("span",_hoisted_8$1,vue.toDisplayString((o.paging?o.pageSize*(i.currentPage-1):0)+n+1),1)):vue.createCommentVNode("",!0)])])),_:2},1024)):vue.createCommentVNode("",!0),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.columns,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[l.columnDisplay(t.model,t)&&t.options.fixedColumn&&"right"!=t.options.fixedColumnPosition?(vue.openBlock(),vue.createBlock(c,{key:t.key,width:t.options.width},{default:vue.withCtx((()=>[vue.createVNode(d,{models:i.tableData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.tableHideFields,"sub-disabled-fields":i.tableDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-table":!0,"is-mobile":!1,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"table-name":o.name,config:o.config,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","table-name","config","is-dialog","dialog-name","group","field-node"])])),_:2},1032,["width"])):vue.createCommentVNode("",!0)],64)))),256))])),_:2},1032,["rowIndex","table-key"])))),128))])),right:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.paging?i.pagingLength:i.tableData,((t,n)=>(vue.openBlock(),vue.createBlock(p,{key:(o.paging?o.pageSize*(i.currentPage-1):0)+n,rowIndex:n,class:"right","table-key":i.tableKey},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.columns,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[l.columnDisplay(t.model,t)&&t.options.fixedColumn&&"right"==t.options.fixedColumnPosition?(vue.openBlock(),vue.createBlock(c,{key:t.key,width:t.options.width},{default:vue.withCtx((()=>[vue.createVNode(d,{models:i.tableData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.tableHideFields,"sub-disabled-fields":i.tableDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-table":!0,"is-mobile":!1,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"table-name":o.name,config:o.config,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","table-name","config","is-dialog","dialog-name","group","field-node"])])),_:2},1032,["width"])):vue.createCommentVNode("",!0)],64)))),256))])),_:2},1032,["rowIndex","table-key"])))),128))])),selection:vue.withCtx((()=>[vue.createVNode(m,{checked:i.checkAll,"onUpdate:checked":t[0]||(t[0]=e=>i.checkAll=e),indeterminate:i.checkIndeterminate,onChange:l.handleCheckAllChange},null,8,["checked","indeterminate","onChange"])])),_:3},8,["columns","showControl","paging","pageSize","currentPage","displayFields","group","widget"])):vue.createCommentVNode("",!0)],64)):vue.createCommentVNode("",!0),o.preview&&"mobile"===o.platform||!o.preview&&i.mobileScreen?(vue.openBlock(),vue.createElementBlock("div",{key:1,class:"antd-form-table-mobile",style:vue.normalizeStyle({display:o.preview&&"mobile"===o.platform?"block":""})},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.paging?i.pagingLength:i.tableData,((t,n)=>(vue.openBlock(),vue.createElementBlock("div",{class:"antd-form-table-mobile-item",key:(o.paging?o.pageSize*(i.currentPage-1):0)+n},[vue.createElementVNode("div",_hoisted_9$1,[o.widget.options.selection?(vue.openBlock(),vue.createBlock(m,{key:0,checked:i.selectedRowKeys.includes(i.tableData[(o.paging?o.pageSize*(i.currentPage-1):0)+n].fm_key),onChange:e=>l.handleCheckSelectChange((o.paging?o.pageSize*(i.currentPage-1):0)+n,e),style:{"margin-right":"10px"}},null,8,["checked","onChange"])):vue.createCommentVNode("",!0),vue.createElementVNode("span",null,"# "+vue.toDisplayString((o.paging?o.pageSize*(i.currentPage-1):0)+n+1),1),o.showControl&&!o.printRead&&o.isDelete?(vue.openBlock(),vue.createBlock(r,{key:1,disabled:o.disableddata,title:e.$t("fm.description.deleteConfirm"),onConfirm:e=>l.handleRemove((o.paging?o.pageSize*(i.currentPage-1):0)+n)},{default:vue.withCtx((()=>[vue.createVNode(a,{disabled:o.disableddata,type:"primary",danger:"",shape:"circle",size:"small"},{default:vue.withCtx((()=>[_hoisted_10$1])),_:1},8,["disabled"])])),_:2},1032,["disabled","title","onConfirm"])):vue.createCommentVNode("",!0)]),vue.createElementVNode("div",_hoisted_11$1,[vue.createVNode(f,{direction:"vertical",style:{width:"100%"}},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.columns,(t=>(vue.openBlock(),vue.createBlock(d,{key:t.key,models:i.tableData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.tableHideFields,"sub-disabled-fields":i.tableDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-table":!0,"is-mobile":!0,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"table-name":o.name,config:o.config,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","table-name","config","is-dialog","dialog-name","group","field-node"])))),128))])),_:2},1024)])])))),128))],4)):vue.createCommentVNode("",!0),vue.createVNode(y,null,{default:vue.withCtx((()=>[vue.createVNode(v,{md:o.preview&&"mobile"!=o.platform||!o.preview?12:24,xs:24,sm:24},{default:vue.withCtx((()=>[!o.disableddata&&o.isAdd?(vue.openBlock(),vue.createBlock(a,{key:0,type:"link",onClick:l.handleAddRow},{default:vue.withCtx((()=>[_hoisted_12$1,vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.add")),1)])),_:1},8,["onClick"])):vue.createCommentVNode("",!0)])),_:1},8,["md"]),vue.createVNode(v,{md:(!o.preview||"mobile"==o.platform)&&o.preview||o.disableddata?24:12,xs:24,sm:24},{default:vue.withCtx((()=>[o.paging&&i.tableData.length?(vue.openBlock(),vue.createBlock(g,{key:0,style:{float:"right","padding-top":"5px","white-space":"nowrap"},layout:"total, prev, pager, next","page-size":o.pageSize,current:i.currentPage,"onUpdate:current":t[1]||(t[1]=e=>i.currentPage=e),total:i.tableData.length,"pager-count":5,onChange:l.handlePageChange,"show-less-items":""},null,8,["page-size","current","total","onChange"])):vue.createCommentVNode("",!0)])),_:1},8,["md"])])),_:1})],2)}var FmFormTable=_export_sfc(_sfc_main$k,[["render",_sfc_render$i]]),SubForm_vue_vue_type_style_index_0_lang="";const _sfc_main$j={name:"fm-sub-form",components:{GenerateColItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateColItem$1})))),GenerateFormItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateFormItem$1})))),GenerateInline:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenereteInline})))),GenerateReport:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateReport$1})))),GenerateTabItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateTabItem$1})))),GenerateCollapse:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCollapse$1})))),GenerateCard:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCard$1}))))},props:["showControl","config","list","value","models","remote","blanks","disableddata","rules","name","remoteOption","preview","platform","dataSourceValue","eventFunction","widget","printRead","paging","pageSize","containerKey","isAdd","isDelete","isDialog","dialogName","group","fieldNode"],emits:["update:value"],data(){var e;return{subformData:null!=(e=this.value)?e:[],displayFields:{},changeItem:{},pagingData:[],pagingLength:0,currentPage:1,itemModel:{},subHideFields:[],subDisabledFields:[],itemDisabled:{}}},created(){this._generateModel(this.list),this.loadPagingData(),this.subHideFields=this.subformData.map((e=>Object.fromEntries(Object.keys(this.displayFields).map((e=>[e,!this.displayFields[e]]))))),this.subDisabledFields=this.subformData.map((e=>Object.fromEntries(Object.keys(this.itemDisabled).map((e=>[e,!this.itemDisabled[e]])))))},provide(){return{setSubformData:this.setSubformData}},inject:["onFormDisabled","onFormHide","onFormDisplay"],methods:{handleMouseover(e){addClass$1(this.$refs[`formSubformItem_${e}`][0],"is-hover")},handleMouseout(e){removeClass$1(this.$refs[`formSubformItem_${e}`][0],"is-hover")},setSubformData(e,t,o){const n=_.cloneDeep(this.subformData);n[t][o]=e,this.subformData=n},setData(e,t){return new Promise("number"!=typeof e?o=>{t=e,this.subformData.forEach(((e,o)=>{Object.keys(t).forEach((e=>{this.setSubformData(t[e],o,e)}))})),o()}:o=>{this.$nextTick((()=>{Object.keys(t).forEach((o=>{this.setSubformData(t[o],e,o)})),o()}))})},handleAddRow(){if(this.subformData=[...this.subformData,{...this.itemModel}],this.subHideFields.push(Object.fromEntries(Object.keys(this.displayFields).map((e=>[e,!this.displayFields[e]])))),this.subDisabledFields.push(Object.fromEntries(Object.keys(this.itemDisabled).map((e=>[e,!this.itemDisabled[e]])))),this.widget&&this.widget.events&&this.widget.events.onRowAdd){let e=this.widget.events.onRowAdd;this.eventFunction[e]({rowIndex:this.subformData.length-1,field:this.widget.model,currentRef:this})}this.paging&&this.$nextTick((()=>{this.subformData.length>this.currentPage*this.pageSize&&(this.currentPage=parseInt((this.subformData.length-1)/this.pageSize)+1),this.loadPagingData()}))},handleRemove(e){const t={...this.subformData[e]},o=[...this.subformData];if(o.splice(e,1),this.subformData=o,this.subHideFields.splice(e,1),this.subDisabledFields.splice(e,1),this.widget&&this.widget.events&&this.widget.events.onRowRemove){let o=this.widget.events.onRowRemove;this.eventFunction[o]({removeIndex:e,removeData:t,field:this.widget.model,currentRef:this})}this.pagingData=[],this.pagingLength=0,this.paging&&this.$nextTick((()=>{this.subformData.length%this.pageSize==0&&this.currentPage>parseInt(this.subformData.length/this.pageSize)&&(this.currentPage=parseInt(this.subformData.length/this.pageSize)),this.loadPagingData()}))},hide(e){"string"==typeof e&&(e=[e]),e.forEach((e=>{this.onFormHide(`${this.fieldNode}.${e}`)}))},display(e){"string"==typeof e&&(e=[e]),e.forEach((e=>{this.onFormDisplay(`${this.fieldNode}.${e}`)}))},disabled(e,t){"string"==typeof e&&(e=[e]),this.subformData.forEach(((o,n)=>{e.forEach((e=>{this.subDisabledFields[n][e]=t}))})),this._setDisabled(this.list,e,t)},hideChild(e,t){"string"==typeof t&&(t=[t]),t.forEach((t=>{this.onFormHide(`${this.fieldNode}.${e}.${t}`)}))},displayChild(e,t){"string"==typeof t&&(t=[t]),t.forEach((t=>{this.onFormDisplay(`${this.fieldNode}.${e}.${t}`)}))},disabledChild(e,t,o){"string"==typeof t&&(t=[t]),t.forEach((t=>{this.subDisabledFields[e][t]=o,this.onFormDisabled(`${this.fieldNode}.${e}.${t}`,o)}))},setOptions(e,t){"string"==typeof e&&(e=[e]),this._setOptions(this.list,e,t)},addClassName(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{updateClassName(this.list,e.split("."),t,"add")}))},removeClassName(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{updateClassName(this.list,e.split("."),t,"remove")}))},handlePageChange(e){if(this.currentPage=e,this.pagingData=[],this.pagingLength=0,this.$nextTick((()=>{this.loadPagingData()})),this.widget&&this.widget.events&&this.widget.events.onPageChange){let t=this.widget.events.onPageChange;this.eventFunction[t]({currentPage:e,field:this.widget.model,currentRef:this})}},loadPagingData(){let e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;this.pagingData=this.subformData.slice(e,t),this.pagingLength=this.pagingData.length},_generateModel(e){for(let t=0;t<e.length;t++)"grid"==e[t].type?(this.displayFields[e[t].model]=!e[t].options.hidden,e[t].columns.forEach((e=>{this._generateModel(e.list)}))):"tabs"===e[t].type||"collapse"===e[t].type?(e[t].tabs.forEach((e=>{this._generateModel(e.list)})),this.displayFields[e[t].model]=!e[t].options.hidden):"report"===e[t].type?(e[t].rows.forEach((e=>{e.columns.forEach((e=>{this._generateModel(e.list)}))})),this.displayFields[e[t].model]=!e[t].options.hidden):"inline"===e[t].type||"card"===e[t].type?(this._generateModel(e[t].list),this.displayFields[e[t].model]=!e[t].options.hidden):("blank"==e[t].type?this.itemModel[e[t].model]="String"===e[t].options.defaultType?"":"Object"===e[t].options.defaultType?{}:[]:this.itemModel[e[t].model]=_.cloneDeep(e[t].options.defaultValue),this.displayFields[e[t].model]=!e[t].options.hidden,this.itemDisabled[e[t].model]=!e[t].options.disabled)},_setDisabled(e,t,o){for(let n=0;n<e.length;n++)"grid"===e[n].type?e[n].columns.forEach((e=>{this._setDisabled(e.list,t,o)})):"tabs"===e[n].type||"collapse"===e[n].type?e[n].tabs.forEach((e=>{this._setDisabled(e.list,t,o)})):"report"===e[n].type?e[n].rows.forEach((e=>{e.columns.forEach((e=>{this._setDisabled(e.list,t,o)}))})):"inline"===e[n].type||"card"===e[n].type?this._setDisabled(e[n].list,t,o):t.indexOf(e[n].model)>=0&&(e[n].options.disabled=o,this.itemDisabled[e[n].model]=!o)},_setOptions(e,t,o){for(let n=0;n<e.length;n++)"grid"===e[n].type?e[n].columns.forEach((e=>{this._setOptions(e.list,t,o)})):"tabs"===e[n].type||"collapse"===e[n].type?e[n].tabs.forEach((e=>{this._setOptions(e.list,t,o)})):"report"===e[n].type?e[n].rows.forEach((e=>{e.columns.forEach((e=>{this._setOptions(e.list,t,o)}))})):("inline"===e[n].type||"card"===e[n].type)&&this._setOptions(e[n].list,t,o),t.indexOf(e[n].model)>=0&&Object.keys(o).forEach((t=>{e[n].options[t]=o[t]}))}},watch:{value(e){var t,o,n,i,l,a;this.subformData=e;let r=[],s=[];for(let d=0;d<this.value.length;d++){let e=Object.keys(this.displayFields),u={};for(let i=0;i<e.length;i++)u[e[i]]=null!=(n=null==(o=null==(t=this.subHideFields)?void 0:t[d])?void 0:o[e[i]])?n:!this.displayFields[e[i]];r.push(u);let c=Object.keys(this.itemDisabled),p={};for(let t=0;t<c.length;t++)p[c[t]]=null!=(a=null==(l=null==(i=this.subDisabledFields)?void 0:i[d])?void 0:l[c[t]])?a:!this.itemDisabled[c[t]];s.push(p)}this.subHideFields=r,this.subDisabledFields=s},subformData:{deep:!0,handler(e){this.loadPagingData(),this.$emit("update:value",e)}}}},_hoisted_1$9={class:"form-subform"},_hoisted_2$8=["onMouseover","onMouseout"],_hoisted_3$5={key:0,class:"form-subform-index"},_hoisted_4$4={key:1,class:"form-subform-remove"},_hoisted_5$4=vue.createElementVNode("i",{class:"fm-iconfont icon-trash",style:{"font-size":"12px",margin:"5px"}},null,-1),_hoisted_6$3={class:"form-subform-content"},_hoisted_7$2=vue.createElementVNode("i",{class:"fm-iconfont icon-plus",style:{"font-size":"12px",margin:"5px"}},null,-1);function _sfc_render$h(e,t,o,n,i,l){const a=vue.resolveComponent("a-tag"),r=vue.resolveComponent("a-button"),s=vue.resolveComponent("a-popconfirm"),d=vue.resolveComponent("generate-col-item"),u=vue.resolveComponent("generate-tab-item"),c=vue.resolveComponent("generate-collapse"),p=vue.resolveComponent("generate-report"),m=vue.resolveComponent("generate-card"),h=vue.resolveComponent("generate-inline"),f=vue.resolveComponent("generate-form-item"),v=vue.resolveComponent("a-col"),g=vue.resolveComponent("a-pagination"),y=vue.resolveComponent("a-row");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1$9,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.paging?i.pagingLength:i.subformData,((t,n)=>(vue.openBlock(),vue.createElementBlock("div",{class:"form-subform-item",key:(o.paging?o.pageSize*(i.currentPage-1):0)+n,onMouseover:vue.withModifiers((e=>l.handleMouseover((o.paging?o.pageSize*(i.currentPage-1):0)+n)),["stop"]),onMouseout:e=>l.handleMouseout((o.paging?o.pageSize*(i.currentPage-1):0)+n),ref_for:!0,ref:`formSubformItem_${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},[o.showControl?(vue.openBlock(),vue.createElementBlock("div",_hoisted_3$5,[vue.createVNode(a,{color:"processing"},{default:vue.withCtx((()=>[vue.createTextVNode("#"+vue.toDisplayString((o.paging?o.pageSize*(i.currentPage-1):0)+n+1),1)])),_:2},1024)])):vue.createCommentVNode("",!0),o.showControl?(vue.openBlock(),vue.createElementBlock("div",_hoisted_4$4,[!o.printRead&&o.isDelete?(vue.openBlock(),vue.createBlock(s,{key:0,disabled:o.disableddata,title:e.$t("fm.description.deleteConfirm"),onConfirm:e=>l.handleRemove((o.paging?o.pageSize*(i.currentPage-1):0)+n)},{default:vue.withCtx((()=>[vue.createVNode(r,{disabled:o.disableddata,danger:"",size:"small",shape:"circle"},{default:vue.withCtx((()=>[_hoisted_5$4])),_:1},8,["disabled"])])),_:2},1032,["disabled","title","onConfirm"])):vue.createCommentVNode("",!0),o.printRead||!o.isDelete?(vue.openBlock(),vue.createBlock(a,{key:1,color:"processing"},{default:vue.withCtx((()=>[vue.createTextVNode("#"+vue.toDisplayString((o.paging?o.pageSize*(i.currentPage-1):0)+n+1),1)])),_:2},1024)):vue.createCommentVNode("",!0)])):vue.createCommentVNode("",!0),vue.createElementVNode("div",_hoisted_6$3,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.list,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,["grid"==t.type?(vue.openBlock(),vue.createBlock(d,{key:t.key,model:i.subformData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.subHideFields,"sub-disabled-fields":i.subDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":!0,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"sub-name":o.name,config:o.config,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","sub-name","config","is-dialog","dialog-name","group","field-node"])):"tabs"==t.type?(vue.openBlock(),vue.createBlock(u,{key:t.key,model:i.subformData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.subHideFields,"sub-disabled-fields":i.subDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":!0,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"sub-name":o.name,config:o.config,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","sub-name","config","is-dialog","dialog-name","group","field-node"])):"collapse"==t.type?(vue.openBlock(),vue.createBlock(c,{key:t.key,model:i.subformData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.subHideFields,"sub-disabled-fields":i.subDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":!0,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"sub-name":o.name,config:o.config,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","sub-name","config","is-dialog","dialog-name","group","field-node"])):"report"==t.type?(vue.openBlock(),vue.createBlock(p,{key:t.key,model:i.subformData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.subHideFields,"sub-disabled-fields":i.subDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":!0,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"sub-name":o.name,config:o.config,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","sub-name","config","is-dialog","dialog-name","group","field-node"])):"card"==t.type?(vue.openBlock(),vue.createBlock(m,{key:t.key,model:i.subformData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.subHideFields,"sub-disabled-fields":i.subDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":!0,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"sub-name":o.name,config:o.config,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","sub-name","config","is-dialog","dialog-name","group","field-node"])):"inline"==t.type?(vue.openBlock(),vue.createBlock(h,{key:t.key,model:i.subformData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.subHideFields,"sub-disabled-fields":i.subDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":!0,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"sub-name":o.name,config:o.config,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","sub-name","config","is-dialog","dialog-name","group","field-node"])):(vue.openBlock(),vue.createBlock(f,{key:t.key,models:i.subformData[(o.paging?o.pageSize*(i.currentPage-1):0)+n],rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,"sub-hide-fields":i.subHideFields,"sub-disabled-fields":i.subDisabledFields,edit:!o.disableddata,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-subform":!0,"row-index":(o.paging?o.pageSize*(i.currentPage-1):0)+n,"sub-name":o.name,config:o.config,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":!1,group:o.group?`${o.group}.${o.name}`:o.name,"field-node":`${o.fieldNode}.${(o.paging?o.pageSize*(i.currentPage-1):0)+n}`},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","row-index","sub-name","config","is-dialog","dialog-name","group","field-node"]))],64)))),256))])],40,_hoisted_2$8)))),128)),vue.createVNode(y,{class:"form-subform-action"},{default:vue.withCtx((()=>[vue.createVNode(v,{md:o.preview&&"mobile"!=o.platform||!o.preview?12:24,sm:24},{default:vue.withCtx((()=>[!o.disableddata&&o.isAdd?(vue.openBlock(),vue.createBlock(r,{key:0,type:"link",onClick:l.handleAddRow},{default:vue.withCtx((()=>[_hoisted_7$2,vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.add")),1)])),_:1},8,["onClick"])):vue.createCommentVNode("",!0)])),_:1},8,["md"]),vue.createVNode(v,{md:(!o.preview||"mobile"==o.platform)&&o.preview||o.disableddata?24:12,xs:24,sm:24},{default:vue.withCtx((()=>[o.paging&&i.subformData.length?(vue.openBlock(),vue.createBlock(g,{key:0,style:{float:"right","padding-top":"5px","white-space":"nowrap"},layout:"total, prev, pager, next","page-size":o.pageSize,current:i.currentPage,"onUpdate:current":t[0]||(t[0]=e=>i.currentPage=e),total:i.subformData.length,"pager-count":5,onChange:l.handlePageChange,"show-less-items":""},null,8,["page-size","current","total","onChange"])):vue.createCommentVNode("",!0)])),_:1},8,["md"])])),_:1})])}var FmSubForm=_export_sfc(_sfc_main$j,[["render",_sfc_render$h]]);const _sfc_main$i={name:"fm-group",components:{GenerateColItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateColItem$1})))),GenerateFormItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateFormItem$1})))),GenerateInline:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenereteInline})))),GenerateReport:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateReport$1})))),GenerateTabItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateTabItem$1})))),GenerateCollapse:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCollapse$1})))),GenerateCard:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCard$1}))))},props:["config","value","models","rules","element","remote","blanks","edit","remoteOption","platform","preview","containerKey","dataSourceValue","eventFunction","printRead","group","fieldNode"],data(){var e;return{displayFields:{},groupModel:null!=(e=this.value)?e:{},groupDisabled:{}}},emits:["update:value"],inject:["generateComponentInstance","deleteComponentInstance","getFormComponent","onFormHide","onFormDisplay"],created(){this._generateModel(this.element.list)},mounted(){this.generateComponentInstance&&this.generateComponentInstance(this.fieldNode,this.$refs[`generate-group-${this.element.model}`].$parent),this.$nextTick((()=>{setTimeout((()=>{this.clearValidate()}))}))},beforeUnmount(){this.deleteComponentInstance&&this.deleteComponentInstance(this.fieldNode)},provide(){return{setGroupData:this.setGroupData}},methods:{setGroupData(e,t){this.groupModel[t]=e},_generateModel(e){var t;for(let o=0;o<e.length;o++)"grid"==e[o].type?(this.displayFields[e[o].model]=!e[o].options.hidden,e[o].columns.forEach((e=>{this._generateModel(e.list)}))):"tabs"===e[o].type||"collapse"===e[o].type?(e[o].tabs.forEach((e=>{this._generateModel(e.list)})),this.displayFields[e[o].model]=!e[o].options.hidden):"report"===e[o].type?(e[o].rows.forEach((e=>{e.columns.forEach((e=>{this._generateModel(e.list)}))})),this.displayFields[e[o].model]=!e[o].options.hidden):"inline"===e[o].type||"card"===e[o].type?(this._generateModel(e[o].list),this.displayFields[e[o].model]=!e[o].options.hidden):("blank"==e[o].type?this.groupModel[e[o].model]="String"===e[o].options.defaultType?"":"Object"===e[o].options.defaultType?{}:[]:this.groupModel[e[o].model]=null!=(t=this.value[e[o].model])?t:_.cloneDeep(e[o].options.defaultValue),this.displayFields[e[o].model]=!e[o].options.hidden,this.groupDisabled[e[o].model]=!e[o].options.disabled)},hide(e){"string"==typeof e&&(e=[e]),e.forEach((e=>{this.onFormHide(`${this.fieldNode}.${e}`)}))},display(e){"string"==typeof e&&(e=[e]),e.forEach((e=>{this.onFormDisplay(`${this.fieldNode}.${e}`)}))},disabled(e,t){"string"==typeof e&&(e=[e]),this._setDisabled(this.element.list,e,t)},validate(){return new Promise(((e,t)=>{let o=this._getAllRuleFields();this.getFormComponent().validate(o).then((()=>{e()})).catch((()=>{t()}))}))},clearValidate(){let e=this._getAllRuleFields();this.getFormComponent().clearValidate(e)},setOptions(e,t){"string"==typeof e&&(e=[e]),this._setOptions(this.element.list,e,t)},setData(e){return new Promise((t=>{this.$nextTick((()=>{Object.keys(e).forEach((t=>{this.groupModel[t]=e[t]})),t()}))}))},getValues(){return this.groupModel},getValue(e){return this.groupModel[e]},addClassName(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{updateClassName(this.element.list,e.split("."),t,"add")}))},removeClassName(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{updateClassName(this.element.list,e.split("."),t,"remove")}))},_setDisabled(e,t,o){for(let n=0;n<e.length;n++)"grid"===e[n].type?e[n].columns.forEach((e=>{this._setDisabled(e.list,t,o)})):"tabs"===e[n].type||"collapse"===e[n].type?e[n].tabs.forEach((e=>{this._setDisabled(e.list,t,o)})):"report"===e[n].type?e[n].rows.forEach((e=>{e.columns.forEach((e=>{this._setDisabled(e.list,t,o)}))})):"inline"===e[n].type||"card"===e[n].type?this._setDisabled(e[n].list,t,o):t.indexOf(e[n].model)>=0&&(e[n].options.disabled=o)},_setOptions(e,t,o){for(let n=0;n<e.length;n++)"grid"===e[n].type?e[n].columns.forEach((e=>{this._setOptions(e.list,t,o)})):"tabs"===e[n].type||"collapse"===e[n].type?e[n].tabs.forEach((e=>{this._setOptions(e.list,t,o)})):"report"===e[n].type?e[n].rows.forEach((e=>{e.columns.forEach((e=>{this._setOptions(e.list,t,o)}))})):("inline"===e[n].type||"card"===e[n].type)&&this._setOptions(e[n].list,t,o),t.indexOf(e[n].model)>=0&&Object.keys(o).forEach((t=>{e[n].options[t]=o[t]}))},_getAllRuleFields(){let e=[];return Object.keys(this.groupModel).forEach((t=>{if(Array.isArray(this.groupModel[t])){this.groupModel[t].forEach(((o,n)=>{Object.keys(o).forEach((o=>{e.push(`${this.fieldNode}.${t}.${n}.${o}`)}))}))}else e.push(`${this.fieldNode}.${t}`)})),e.map((e=>e.split(".")))}},watch:{groupModel:{deep:!0,handler(e){this.$emit("update:value",e)}},value:{deep:!0,handler(e){this.groupModel=e}}}};function _sfc_render$g(e,t,o,n,i,l){const a=vue.resolveComponent("generate-col-item"),r=vue.resolveComponent("generate-tab-item"),s=vue.resolveComponent("generate-collapse"),d=vue.resolveComponent("generate-report"),u=vue.resolveComponent("generate-card"),c=vue.resolveComponent("generate-inline"),p=vue.resolveComponent("generate-form-item");return vue.openBlock(),vue.createElementBlock("div",{style:vue.normalizeStyle({width:o.element.options.width}),ref:`generate-group-${o.element.model}`},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.list,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,["grid"==t.type?(vue.openBlock(),vue.createBlock(a,{key:t.key,model:i.groupModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-group":!0,"is-subform":!1,group:o.group?o.group+"."+o.element.model:o.element.model,"field-node":o.fieldNode,config:o.config},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","group","field-node","config"])):"tabs"==t.type?(vue.openBlock(),vue.createBlock(r,{key:t.key,model:i.groupModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-group":!0,"is-subform":!1,group:o.group?o.group+"."+o.element.model:o.element.model,"field-node":o.fieldNode,config:o.config},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","group","field-node","config"])):"collapse"==t.type?(vue.openBlock(),vue.createBlock(s,{key:t.key,model:i.groupModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-group":!0,"is-subform":!1,group:o.group?o.group+"."+o.element.model:o.element.model,"field-node":o.fieldNode,config:o.config},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","group","field-node","config"])):"report"==t.type?(vue.openBlock(),vue.createBlock(d,{key:t.key,model:i.groupModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-group":!0,"is-subform":!1,group:o.group?o.group+"."+o.element.model:o.element.model,"field-node":o.fieldNode,config:o.config},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","group","field-node","config"])):"card"==t.type?(vue.openBlock(),vue.createBlock(u,{key:t.key,model:i.groupModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-group":!0,"is-subform":!1,group:o.group?o.group+"."+o.element.model:o.element.model,"field-node":o.fieldNode,config:o.config},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","group","field-node","config"])):"inline"==t.type?(vue.openBlock(),vue.createBlock(c,{key:t.key,model:i.groupModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-group":!0,"is-subform":!1,group:o.group?o.group+"."+o.element.model:o.element.model,"field-node":o.fieldNode,config:o.config},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","group","field-node","config"])):(vue.openBlock(),vue.createBlock(p,{key:t.key,models:i.groupModel,rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-group":!0,"is-subform":!1,group:o.group?o.group+"."+o.element.model:o.element.model,"field-node":o.fieldNode,config:o.config},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","group","field-node","config"]))],64)))),256))],4)}var FmGroup=_export_sfc(_sfc_main$i,[["render",_sfc_render$g]]),index_vue_vue_type_style_index_0_lang$1="";const _sfc_main$h={components:{},props:{columns:{type:Array,default:()=>[]},modelValue:{type:[Array,Object]},showOperation:{type:Boolean,default:!1},operations:{type:Object,default:()=>({})},pagination:{type:Object,default:()=>({})},isDesign:{type:Boolean,default:!1},maxHeight:{type:[String,Number]},stripe:{type:Boolean,default:!1},border:{type:Boolean,default:!1},highlight:{type:Boolean,default:!1},selection:{type:Boolean,default:!1},size:{type:String,default:"middle"},printRead:{type:Boolean,default:!1}},data(){return{tableData:[],total:0,currentPage:1,pageSize:this.pagination.pageSizes&&this.pagination.pageSizes.trim()?this.pagination.pageSizes.split(",").map((e=>e.trim())).filter((e=>""!==e&&!isNaN(Number(e)))).map((e=>parseInt(e)))[0]:10,multipleSelection:[],selectedRowKeys:[],currentRowKey:"",columnComponent:{},headerComponent:{}}},computed:{aTableColums(){let e=this.transformColumns(this.columns);return this.showOperation&&!this.printRead&&e.push({title:"zh-cn"==this.$i18n.locale?"操作":"Operation",key:"operations",fixed:"right",width:this.operations.width}),e},rowSelection(){return this.selection&&!this.printRead?{checkStrictly:!0,selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange,fixed:"left"}:null},tableSize(){return"default"==this.size?"middle":this.size},listPageSizes(){return this.pagination.pageSizes&&this.pagination.pageSizes.trim()?this.pagination.pageSizes.split(",").map((e=>e.trim())).filter((e=>""!==e&&!isNaN(Number(e)))).map((e=>parseInt(e))):["10","20","50","100"]}},emits:["update:modelValue","on-current-row","on-page-change","on-operate","on-selection-change"],watch:{modelValue(e){this.loadData()}},created(){this.loadComponents(this.columns),this.loadData()},beforeUnmount(){this.removeComponents()},methods:{onCustomRow(e,t){return{onClick:t=>{this.currentRowKey=e.fm_key,this.$emit("on-current-row",{row:e})}}},onRowClassName(e,t){let o="";return this.stripe&&t%2==1&&(o+=" table-striped"),this.highlight&&this.currentRowKey&&e.fm_key===this.currentRowKey&&(o+=" ant-table-row-selected"),o},loadComponents(e){e.forEach((e=>{e.defaultSlot&&(this.$options.components[`component-column-${e.key}`]={template:e.defaultSlotTemplate||"<span></span>",props:["scope"]},this.columnComponent[e.key]=`component-column-${e.key}`),e.headerSlot&&(this.$options.components[`component-header-${e.key}`]={template:e.headerSlotTemplate||"<span></span>"},this.headerComponent[e.key]=`component-header-${e.key}`),e.isParent&&this.loadComponents(e.children)}))},removeComponents(){Object.keys(this.$options.components).forEach((e=>{this.$options.components[e]=null})),this.columnComponent={},this.headerComponent={}},transformColumns(e){return e.map((e=>{let t={};return t=e.isParent?{title:e.label,children:this.transformColumns(e.children),align:e.align,fixed:!!e.fixed&&e.fixedOption,key:e.key,ellipsis:e.ellipsis}:{title:e.label,dataIndex:e.prop,width:e.width,key:e.key,align:e.align,fixed:!!e.fixed&&e.fixedOption,ellipsis:e.ellipsis,customCell:e.isRowspan?(t,o)=>this._calcRowspan(o,e.prop):null},t}))},_calcRowspan(e,t){if(0===e){let o=this.tableData[e][t],n=1;for(let i=e+1;i<this.tableData.length&&!(this.tableData[i][t]!==o||null==this.tableData[i][t]||this.tableData[i].children&&this.tableData[i].children.length||this.tableData[e].children&&this.tableData[e].children.length);i++)n++;return{rowSpan:n}}if(e<this.tableData.length){let o=this.tableData[e][t];if(this.tableData[e-1][t]!==o||null==this.tableData[e-1][t]||this.tableData[e-1].children&&this.tableData[e-1].children.length||this.tableData[e].children&&this.tableData[e].children.length){let n=1;for(let i=e+1;i<this.tableData.length&&!(this.tableData[i][t]!==o||null==this.tableData[i][t]||this.tableData[i].children&&this.tableData[i].children.length||this.tableData[e].children&&this.tableData[e].children.length);i++)n++;return{rowSpan:n}}return{rowSpan:0}}return{rowSpan:1}},loadData(){var e,t;"object"==typeof this.modelValue&&(Array.isArray(this.modelValue)?(this.tableData=this._generateDataKey(this.modelValue),this.total=this.isDesign?100:0):(Array.isArray(this.modelValue[this.pagination.props.list])&&(this.tableData=this._generateDataKey(this.modelValue[this.pagination.props.list])),this.total=Number(this.modelValue[this.pagination.props.total]),this.currentPage=null!=(e=Number(this.modelValue[this.pagination.props.current]))?e:this.currentPage,this.pageSize=null!=(t=Number(this.modelValue[this.pagination.props.size]))?t:this.pageSize))},_generateDataKey(e){return Array.isArray(e)?e.map((e=>e.children&&e.children.length?{...e,fm_key:Math.random().toString(36).slice(-8),children:this._generateDataKey(e.children)}:{...e,fm_key:Math.random().toString(36).slice(-8)})):e},_getSelectionRow(e,t){let o=[];for(let n=0;n<t.length;n++)e.includes(t[n].fm_key)&&o.push(t[n]),t[n].children&&t[n].children.length&&o.push(...this._getSelectionRow(e,t[n].children));return o},onSelectChange(e){this.selectedRowKeys=e,this.multipleSelection=this._getSelectionRow(e,this.tableData),this.$emit("on-selection-change",this.multipleSelection)},getSelection(){return JSON.parse(JSON.stringify(this.multipleSelection))},getPageInfo(){return this.pagination.paging?{[this.pagination.props.current]:this.currentPage,[this.pagination.props.size]:this.pageSize}:{}},handleOperate(e,t){const o=this.operations.buttons[t].event;o&&this.$emit("on-operate",{funcKey:o,column:e.column,record:e.record,row:e.record})},handlePageChange(e){this.$emit("on-page-change",{[this.pagination.props.current]:this.currentPage,[this.pagination.props.size]:this.pageSize})},clearSelection(){this.selectedRowKeys=[]},getSelectionRows(){return[...this.multipleSelection]},toggleAllSelection(){const e=this._getAllRowKeys(this.tableData);this.selectedRowKeys.length<e.length?this.selectedRowKeys=e:this.selectedRowKeys=[],this.multipleSelection=this._getSelectionRow(this.selectedRowKeys,this.tableData),this.$emit("on-selection-change",this.multipleSelection)},_getAllRowKeys(e){let t=[];return t=e.map((e=>e.fm_key)),e.forEach((e=>{e.children&&e.children.length&&t.push(...this._getAllRowKeys(e.children))})),t},_filterMatchRow(e,t){let o=[];return o=e.filter((e=>((e,t)=>{for(let o in t)if(e[o]!==t[o])return!1;return!0})(e,t))),e.forEach((e=>{e.children&&e.children.length&&o.push(...this._filterMatchRow(e.children,t))})),o},toggleRowSelection(e,t){this._filterMatchRow(this.tableData,e).forEach((e=>{const t=this.selectedRowKeys.findIndex((t=>t===e.fm_key));t>=0?this.selectedRowKeys.splice(t,1):this.selectedRowKeys.push(e.fm_key)})),this.multipleSelection=this._getSelectionRow(this.selectedRowKeys,this.tableData),this.$emit("on-selection-change",this.multipleSelection)},setCurrentRow(e){const t=this._filterMatchRow(this.tableData,e);t&&t[0]&&(this.currentRowKey=t[0].fm_key,this.$emit("on-current-row",{row:t[0]}))}}},_hoisted_1$8={class:"fm-antd-data-table-container"},_hoisted_2$7={key:0,class:"table-pagination"};function _sfc_render$f(e,t,o,n,i,l){const a=vue.resolveComponent("a-button"),r=vue.resolveComponent("a-table"),s=vue.resolveComponent("a-pagination");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1$8,[vue.createVNode(r,{bordered:o.border,columns:l.aTableColums,dataSource:i.tableData,scroll:{x:"100%",y:o.maxHeight||null},"row-selection":l.rowSelection,"row-key":"fm_key",customRow:l.onCustomRow,"row-class-name":l.onRowClassName,class:vue.normalizeClass({"ant-table-striped":o.stripe}),size:l.tableSize,pagination:!1,"table-layout":"fixed"},{bodyCell:vue.withCtx((({column:e,record:t,text:n})=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(Object.keys(i.columnComponent),(o=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:o},[e.key===o?(vue.openBlock(),vue.createBlock(vue.resolveDynamicComponent(`component-column-${o}`),{key:0,scope:{row:t,column:e,record:t,text:n}},null,8,["scope"])):vue.createCommentVNode("",!0)],64)))),128)),"operations"===e.key?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:0},vue.renderList(o.operations.buttons,((o,i)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:i},["primary"==o.type?(vue.openBlock(),vue.createBlock(a,{key:0,class:"is-data-table",type:"primary",size:"small",onClick:vue.withModifiers((o=>l.handleOperate({column:e,record:t,text:n},i)),["stop"]),style:{"margin-right":"10px"}},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.name),1)])),_:2},1032,["onClick"])):vue.createCommentVNode("",!0),"default"==o.type?(vue.openBlock(),vue.createBlock(a,{key:1,class:"is-data-table",size:"small",onClick:vue.withModifiers((o=>l.handleOperate({column:e,record:t,text:n},i)),["stop"]),style:{"margin-right":"10px"}},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.name),1)])),_:2},1032,["onClick"])):vue.createCommentVNode("",!0),"text"==o.type?(vue.openBlock(),vue.createBlock(a,{key:2,class:"is-data-table",type:"text",size:"small",onClick:vue.withModifiers((o=>l.handleOperate({column:e,record:t,text:n},i)),["stop"]),style:{"margin-right":"10px"}},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.name),1)])),_:2},1032,["onClick"])):vue.createCommentVNode("",!0),"link"==o.type?(vue.openBlock(),vue.createBlock(a,{key:3,class:"is-data-table",type:"link","size.stop":"small",onClick:vue.withModifiers((o=>l.handleOperate({column:e,record:t,text:n},i)),["stop"]),style:{"margin-right":"10px"}},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.name),1)])),_:2},1032,["onClick"])):vue.createCommentVNode("",!0)],64)))),128)):vue.createCommentVNode("",!0)])),headerCell:vue.withCtx((({column:e})=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(Object.keys(i.headerComponent),(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:t},[e.key===t?(vue.openBlock(),vue.createBlock(vue.resolveDynamicComponent(`component-header-${t}`),{key:0})):vue.createCommentVNode("",!0)],64)))),128))])),_:1},8,["bordered","columns","dataSource","scroll","row-selection","customRow","row-class-name","class","size"]),o.pagination.paging&&i.total?(vue.openBlock(),vue.createElementBlock("div",_hoisted_2$7,[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(" Page "+vue.toDisplayString(i.currentPage),1)],64)):(vue.openBlock(),vue.createBlock(s,{key:1,current:i.currentPage,"onUpdate:current":t[0]||(t[0]=e=>i.currentPage=e),"page-size":i.pageSize,"onUpdate:pageSize":t[1]||(t[1]=e=>i.pageSize=e),total:i.total,size:o.pagination.small?"small":"",onChange:l.handlePageChange,"show-total":e=>`Total ${e} items`,pageSizeOptions:l.listPageSizes,showSizeChanger:""},null,8,["current","page-size","total","size","onChange","show-total","pageSizeOptions"]))])):vue.createCommentVNode("",!0)])}var FmDataTable=_export_sfc(_sfc_main$h,[["render",_sfc_render$f]]);const _sfc_main$g={name:"generate-element-item",components:{FmUpload:FmUpload,FmFormTable:FmFormTable,FmFileUpload:FmFileUpload,Editor:_sfc_main$1t,FmSubForm:FmSubForm,FmGroup:FmGroup,FmDataTable:FmDataTable},props:["config","widget","modelValue","models","remote","isTable","blanks","disabled","edit","remoteOption","rules","platform","preview","dataSourceValue","eventFunction","rowIndex","tableName","containerKey","printRead","isMobile","isSubform","subName","isDialog","dialogName","group","fieldNode","isGroup"],emits:["on-table-change","update:modelValue","update:widget"],setup(){const e=vue.inject("useInjectFormItemContext");return{formItemContext:e?e():null}},data(){var e,t;return{dataModel:this.modelValue,dataModels:this.models,key:(new Date).getTime(),modelName:this.widget.model,dataOnly:null==(t=null==(e=this.widget.options)?void 0:e.data)?void 0:t.map((e=>({...e,title:e.label}))),remoteOptions:[],dynamicEvents:this.handleOnDynamicEvent(),generateDisabled:void 0,remoteToken:""}},computed:{elementDisabled(){let e=this.widget.options.disabled;return isExpression(this.widget.options.disabled)&&(e=executeExpression(extractExpression(this.widget.options.disabled),this.currentOptions,this.formContext)),"boolean"==typeof this.generateDisabled?!this.edit||this.generateDisabled:!this.edit||Boolean(e)},currentOptions(){return this.isTable||this.isSubform?{value:this.dataModel,fieldNode:this.fieldNode,currentRef:this.$refs["fm-"+this.widget.model],rowIndex:this.rowIndex,row:_.cloneDeep(this.models),field:this.widget.model,group:this.group}:{value:this.dataModel,fieldNode:this.fieldNode,currentRef:this.$refs["fm-"+this.widget.model],field:this.widget.model,group:this.group}},extendProps(){let e={};return this.widget.options.extendProps&&Object.keys(this.widget.options.extendProps).forEach((t=>{let o=this.widget.options.extendProps[t];isExpression(o)?e[t]=executeExpression(extractExpression(o),this.currentOptions,this.formContext):e[t]=o})),e},groupNode(){return this.group?this.group+"."+this.widget.model:this.widget.model}},inject:["generateComponentInstance","deleteComponentInstance","eventScriptConfig","dynamicValueData","formContext","sendRequest"],created(){if(this.widget.options.remote||("steps"==this.widget.type?this.loadOptions(this.widget.options.steps):"transfer"==this.widget.type?this.loadOptions(this.widget.options.data):this.loadOptions(this.widget.options.options)),!this.widget.options.remote||Object.keys(this.widget.options).indexOf("remoteType")>=0&&"func"!=this.widget.options.remoteType||!this.remote[this.widget.options.remoteFunc]||this.remote[this.widget.options.remoteFunc]((e=>{this.loadOptions(e)})),this.widget.options.remote&&"option"==this.widget.options.remoteType&&this.remoteOption[this.widget.options.remoteOption]&&this.loadOptions(this.remoteOption[this.widget.options.remoteOption]),this.widget.options.remote&&"datasource"==this.widget.options.remoteType&&this.dataSourceValue){let e=this.getDataSourceOptions();e&&e.value&&this.loadOptions(e.value)}if(this.widget.options.remote&&"fx"==this.widget.options.remoteType){let e=executeExpression(this.widget.options.remoteFx,{},this.formContext);e&&this.loadOptions(e)}if("imgupload"!==this.widget.type&&"fileupload"!==this.widget.type||!this.widget.options.isQiniu||this.loadUploadConfig(),"component"==this.widget.type){const e=this;this.$options.components[`component-${this.widget.key}-${this.key}`]={template:`${this.widget.options.template}`,props:["modelValue"],emits:["update:modelValue"],data:()=>({dataModel:this.modelValue,formState:this.formContext}),watch:{dataModel(e){"antd"==this.ui?EventBus.$emit("on-field-change",this.$attrs.id,e):this.$emit("update:modelValue",e)},modelValue(e){this.dataModel=e}},methods:{triggerEvent(t,o){if(e.eventScriptConfig()){let n=e.eventScriptConfig().find((e=>e.name==t));n&&e.eventFunction[n.key]({...e.currentOptions,$eventArgs:o})}}}}}},mounted(){this.generateComponentInstance&&this.generateComponentInstance(this.fieldNode,this.$refs["fm-"+this.widget.model]),this.handleOnMounted()},beforeUnmount(){this.deleteComponentInstance&&this.deleteComponentInstance(this.fieldNode),this.$options.components[`component-${this.widget.key}-${this.key}`]&&(this.$options.components[`component-${this.widget.key}-${this.key}`]=null)},methods:{handleOnDynamicEvent(){let e={};for(let t in this.widget.events){let o=this.widget.events[t];o&&(e[t]=this.callbackDynamicFunc(o))}return e},callbackDynamicFunc(e){return(...t)=>{this.eventFunction[e]({...this.currentOptions,$eventArgs:t})}},refreshOptionData(e){return new Promise(((t,o)=>{if(this.widget.options.remote&&"fx"===this.widget.options.remoteType&&this.widget.options.remoteFx){let e=executeExpression(this.widget.options.remoteFx,this.currentOptions,this.formContext);null!==e&&this.loadOptions(e),t(e)}if(this.widget.options.remote&&"datasource"===this.widget.options.remoteType&&this.widget.options.remoteDataSource){let n="string"==typeof this.widget.options.remoteArgs?{}:{...this.widget.options.remoteArgs};for(let e in n)isExpression(n[e])&&(n[e]=executeExpression(extractExpression(n[e]),this.currentOptions,this.formContext));e&&"object"==typeof e&&(n={...n,...e});let i=this.group?this.group+"."+this.widget.model+"."+this.widget.options.remoteDataSource:this.widget.model+"."+this.widget.options.remoteDataSource,l=this.dataSourceValue.find((e=>e.key===i&&_.isEqual(e.args,n)));l?(this.loadOptions(l.value),t(l.value)):this.sendRequest(this.widget.options.remoteDataSource,n).then((e=>{this.loadOptions(e),t(e)})).catch((e=>{o(e)}))}}))},loadOptions(e){Array.isArray(e)&&(this.remoteOptions=e.map((e=>this.widget.options.props.children&&this.widget.options.props.children.length&&Object.keys(e).includes(this.widget.options.props.children)?{value:e[this.widget.options.props.value],label:e[this.widget.options.props.label],children:this.processRemoteProps(e[this.widget.options.props.children],this.widget.options.props)}:"steps"==this.widget.type?{value:e[this.widget.options.props.title],label:e[this.widget.options.props.description]}:"transfer"==this.widget.type?{key:e[this.widget.options.props.key],title:e[this.widget.options.props.label],disabled:e[this.widget.options.props.disabled]}:{value:e[this.widget.options.props.value],label:e[this.widget.options.props.label]})))},getOptions(){return JSON.parse(JSON.stringify(this.remoteOptions))},processRemoteProps(e,t){return e&&e.length?e.map((e=>this.processRemoteProps(e[t.children],t).length?{value:e[t.value],label:e[t.label],children:this.processRemoteProps(e[t.children],t)}:{value:e[t.value],label:e[t.label]})):[]},loadUploadConfig(){if("func"===this.widget.options.tokenType)!this.widget.options.token&&this.remote[this.widget.options.tokenFunc]((e=>{this.remoteToken=e}));else if("fx"===this.widget.options.tokenType){let e=executeExpression(this.widget.options.tokenFx,{},this.formContext);e&&(this.remoteToken=e)}else if(this.dataSourceValue){let e=this.getDataSourceOptions("tokenDataSource");e&&e.value&&(this.remoteToken=e.value)}},handleOnClick(){this.execFunction("onClick",{})},handleOnFocus(){this.execFunction("onFocus",{})},handleOnBlur(){this.execFunction("onBlur",{})},handleOnUploadSelect(e){return this.execFunction("onSelect",{file:e})},handleOnUploadSuccess(e){this.execFunction("onUploadSuccess",{file:e})},handleOnUploadError(e){this.execFunction("onUploadError",{file:e})},handleOnUploadProgress(e){this.execFunction("onUploadProgress",{file:e})},handleOnUploadRemove(e){this.execFunction("onRemove",{file:e})},handlePageChange(e){this.execFunction("onPageChange",e)},handleCurrentRow(e){this.execFunction("onCurrentRow",e)},handleSelectionChange(e){this.execFunction("onSelectionChange",{selection:e})},handleOperate({funcKey:e,column:t,row:o,record:n}){return this.eventFunction[e]({field:this.widget.model,currentRef:this.$refs["fm-"+this.widget.model],group:this.group,fieldNode:this.fieldNode,column:t,row:o,record:n})},execFunction(e,t){if(this.widget.events&&this.widget.events[e]){let o=this.widget.events[e];return this.isTable&&this.tableName?this.eventFunction[o]({field:this.widget.model,table:this.tableName,rowIndex:this.rowIndex,dialog:this.isDialog?this.dialogName:null,currentRef:this.$refs["fm-"+this.widget.model],group:this.group,fieldNode:this.fieldNode,...t}):this.isSubform&&this.subName?this.eventFunction[o]({field:this.widget.model,subform:this.subName,rowIndex:this.rowIndex,dialog:this.isDialog?this.dialogName:null,currentRef:this.$refs["fm-"+this.widget.model],group:this.group,fieldNode:this.fieldNode,...t}):this.isDialog&&this.dialogName?this.eventFunction[o]({field:this.widget.model,dialog:this.subName,currentRef:this.$refs["fm-"+this.widget.model],group:this.group,fieldNode:this.fieldNode,...t}):this.eventFunction[o]({field:this.widget.model,currentRef:this.$refs["fm-"+this.widget.model],group:this.group,fieldNode:this.fieldNode,...t})}},getCascaderText(e,t,o=[]){if(e.length>=1){let n=null==t?void 0:t.find((t=>t.value==e[0]));return n&&o.push(n.label),e.splice(0,1),this.getCascaderText(e,null==n?void 0:n.children,o)}if(0==e.length)return o},getTreeText(e,t){for(let o=0;o<t.length;o++){let n=t[o];if(n.value==e)return n.label;if(n.children&&n.children.length>0){let t=this.getTreeText(e,n.children);if("-"==t)continue;return t}}return"-"},getDataSourceOptions(e="remoteDataSource"){let t=this.group?this.group+"."+this.widget.model+"."+this.widget.options[e]:this.widget.model+"."+this.widget.options[e];return this.dataSourceValue.find((e=>e.key===t))},disabledElement(e){this.generateDisabled=e}},watch:{modelValue(e){this.dataModel=e},dataModel(e,t){JSON.stringify(e)!=JSON.stringify(t)&&(this.$emit("update:modelValue",e),setTimeout((()=>{this.formItemContext&&this.formItemContext.onFieldChange()})))},remoteOption:{deep:!0,handler:function(e){Object.keys(this.remoteOption).indexOf(this.widget.options.remoteOption)>=0&&this.widget.options.remote&&"option"==this.widget.options.remoteType&&this.loadOptions(this.remoteOption[this.widget.options.remoteOption])}},dataSourceValue:{deep:!0,handler:function(e){if(this.dataSourceValue){let e=this.getDataSourceOptions();e&&e.value&&this.loadOptions(e.value)}"imgupload"!==this.widget.type&&"fileupload"!==this.widget.type||!this.widget.options.isQiniu||this.loadUploadConfig()}}}},_hoisted_1$7={key:0},_hoisted_2$6={key:0},_hoisted_3$4={key:0},_hoisted_4$3=["innerHTML"],_hoisted_5$3=["innerHTML"];function _sfc_render$e(e,t,o,n,i,l){var a,r,s,d,u,c,p,m,h,f,v,g,y,b,w,k,_;const C=vue.resolveComponent("a-input-password"),x=vue.resolveComponent("a-input"),S=vue.resolveComponent("a-textarea"),V=vue.resolveComponent("a-input-number"),N=vue.resolveComponent("a-radio"),E=vue.resolveComponent("a-radio-group"),$=vue.resolveComponent("a-checkbox"),D=vue.resolveComponent("a-checkbox-group"),B=vue.resolveComponent("a-time-picker"),T=vue.resolveComponent("a-time-range-picker"),O=vue.resolveComponent("a-date-picker"),I=vue.resolveComponent("a-range-picker"),F=vue.resolveComponent("a-rate"),L=vue.resolveComponent("a-select-option"),P=vue.resolveComponent("a-select"),M=vue.resolveComponent("a-switch"),A=vue.resolveComponent("a-slider"),R=vue.resolveComponent("fm-upload"),z=vue.resolveComponent("Editor"),U=vue.resolveComponent("a-cascader"),W=vue.resolveComponent("a-tree-select"),j=vue.resolveComponent("fm-form-table"),H=vue.resolveComponent("fm-sub-form"),G=vue.resolveComponent("fm-group"),K=vue.resolveComponent("fm-file-upload"),q=vue.resolveComponent("a-button"),Y=vue.resolveComponent("a-step"),X=vue.resolveComponent("a-steps"),J=vue.resolveComponent("a-pagination"),Q=vue.resolveComponent("a-transfer"),Z=vue.resolveComponent("fm-data-table");return vue.openBlock(),vue.createElementBlock("span",{class:vue.normalizeClass({"print-read-label":o.printRead})},["blank"==o.widget.type?(vue.openBlock(),vue.createElementBlock("div",{key:0,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width})},[vue.renderSlot(e.$slots,o.widget.model,{model:i.dataModels})],4)):vue.createCommentVNode("",!0),"component"==o.widget.type?(vue.openBlock(),vue.createElementBlock("div",{key:1,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width})},[(vue.openBlock(),vue.createBlock(vue.resolveDynamicComponent(`component-${o.widget.key}-${i.key}`),{key:i.key,modelValue:i.dataModel,"onUpdate:modelValue":t[0]||(t[0]=e=>i.dataModel=e),ref:"fm-"+o.widget.model},null,8,["modelValue"]))],4)):vue.createCommentVNode("",!0),"custom"==o.widget.type?(vue.openBlock(),vue.createElementBlock("div",{key:2,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width})},[(vue.openBlock(),vue.createBlock(vue.resolveDynamicComponent(o.widget.el),vue.mergeProps({modelValue:i.dataModel,"onUpdate:modelValue":t[1]||(t[1]=e=>i.dataModel=e),width:o.widget.options.width,height:o.widget.options.height,size:o.config.size,placeholder:o.widget.options.placeholder,readonly:o.widget.options.readonly,disabled:l.elementDisabled,editable:o.widget.options.editable,clearable:o.widget.options.clearable,ref:"fm-"+o.widget.model,"print-read":o.printRead},{...o.widget.options.customProps,...l.extendProps},vue.toHandlers(i.dynamicEvents)),null,16,["modelValue","width","height","size","placeholder","readonly","disabled","editable","clearable","print-read"]))],4)):vue.createCommentVNode("",!0),"input"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:3},[o.printRead?(vue.openBlock(),vue.createElementBlock("span",_hoisted_1$7,vue.toDisplayString(i.dataModel),1)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[o.widget.options.showPassword?(vue.openBlock(),vue.createBlock(C,vue.mergeProps({key:0,type:o.widget.options.dataTypeCheck?o.widget.options.dataType:"text",value:i.dataModel,"onUpdate:value":t[2]||(t[2]=e=>i.dataModel=e),disabled:l.elementDisabled,placeholder:o.widget.options.placeholder,style:{width:o.isTable?"100%":o.widget.options.width},ref:"fm-"+o.widget.model,size:o.config.size,"allow-clear":o.widget.options.clearable},{...o.widget.options.customProps,...l.extendProps},{onFocus:l.handleOnFocus,onBlur:l.handleOnBlur,autocomplete:"off"}),null,16,["type","value","disabled","placeholder","style","size","allow-clear","onFocus","onBlur"])):(vue.openBlock(),vue.createBlock(x,vue.mergeProps({key:1,type:o.widget.options.dataTypeCheck?o.widget.options.dataType:"text",value:i.dataModel,"onUpdate:value":t[3]||(t[3]=e=>i.dataModel=e),disabled:l.elementDisabled,placeholder:o.widget.options.placeholder,style:{width:o.isTable?"100%":o.widget.options.width},ref:"fm-"+o.widget.model,size:o.config.size,"allow-clear":o.widget.options.clearable,maxlength:Number(o.widget.options.maxlength||1/0),"show-count":o.widget.options.showWordLimit},{...o.widget.options.customProps,...l.extendProps},{onFocus:l.handleOnFocus,onBlur:l.handleOnBlur,autocomplete:"off"}),null,16,["type","value","disabled","placeholder","style","size","allow-clear","maxlength","show-count","onFocus","onBlur"]))],64))],64)):vue.createCommentVNode("",!0),"textarea"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:4},[o.printRead?(vue.openBlock(),vue.createElementBlock("pre",_hoisted_2$6,vue.toDisplayString(i.dataModel),1)):(vue.openBlock(),vue.createBlock(S,vue.mergeProps({key:1,type:"textarea",rows:o.widget.options.rows,value:i.dataModel,"onUpdate:value":t[4]||(t[4]=e=>i.dataModel=e),disabled:l.elementDisabled,placeholder:o.widget.options.placeholder,style:{width:o.isTable?"100%":o.widget.options.width},ref:"fm-"+o.widget.model,"allow-clear":o.widget.options.clearable,size:o.config.size,maxlength:Number(o.widget.options.maxlength),"show-count":o.widget.options.showWordLimit,autoSize:o.widget.options.autosize},{...o.widget.options.customProps,...l.extendProps},{onFocus:l.handleOnFocus,onBlur:l.handleOnBlur}),null,16,["rows","value","disabled","placeholder","style","allow-clear","size","maxlength","show-count","autoSize","onFocus","onBlur"]))],64)):vue.createCommentVNode("",!0),"number"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:5},[o.printRead?(vue.openBlock(),vue.createElementBlock("span",_hoisted_3$4,vue.toDisplayString(i.dataModel.toFixed(o.widget.options.precision)),1)):(vue.openBlock(),vue.createBlock(V,vue.mergeProps({key:1,value:i.dataModel,"onUpdate:value":t[5]||(t[5]=e=>i.dataModel=e),style:{width:o.isTable?"100%":o.widget.options.width},step:o.widget.options.step,disabled:l.elementDisabled,min:o.widget.options.min,max:o.widget.options.max,"controls-position":o.widget.options.controlsPosition,precision:o.widget.options.precision,controls:o.widget.options.controls,ref:"fm-"+o.widget.model,size:o.config.size},{...o.widget.options.customProps,...l.extendProps},{onFocus:l.handleOnFocus,onBlur:l.handleOnBlur}),null,16,["value","style","step","disabled","min","max","controls-position","precision","controls","size","onFocus","onBlur"]))],64)):vue.createCommentVNode("",!0),"radio"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:6},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[o.widget.options.remote?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(i.remoteOptions.find((e=>e.value==i.dataModel))&&i.remoteOptions.find((e=>e.value==i.dataModel)).label),1)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createTextVNode(vue.toDisplayString(o.widget.options.showLabel?i.remoteOptions.find((e=>e.value==i.dataModel))&&i.remoteOptions.find((e=>e.value==i.dataModel)).label:i.dataModel),1)],64))],64)):(vue.openBlock(),vue.createBlock(E,vue.mergeProps({key:1,value:i.dataModel,"onUpdate:value":t[6]||(t[6]=e=>i.dataModel=e),style:{width:o.isTable?"100%":o.widget.options.width},disabled:l.elementDisabled,size:o.config.size,ref:"fm-"+o.widget.model},{...o.widget.options.customProps,...l.extendProps}),{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.remoteOptions,((e,t)=>(vue.openBlock(),vue.createBlock(N,{style:vue.normalizeStyle({display:o.widget.options.inline?"inline-flex":"flex",lineHeight:"30px"}),value:e.value,key:t},{default:vue.withCtx((()=>[o.widget.options.remote?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(e.label),1)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createTextVNode(vue.toDisplayString(o.widget.options.showLabel?e.label:e.value),1)],64))])),_:2},1032,["style","value"])))),128))])),_:1},16,["value","style","disabled","size"]))],64)):vue.createCommentVNode("",!0),"checkbox"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:7},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[o.widget.options.remote?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(null==(a=i.dataModel)?void 0:a.map((e=>i.remoteOptions.find((t=>t.value==e))&&i.remoteOptions.find((t=>t.value==e)).label)).join("、")),1)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createTextVNode(vue.toDisplayString(o.widget.options.showLabel?null==(r=i.dataModel)?void 0:r.map((e=>i.remoteOptions.find((t=>t.value==e))&&i.remoteOptions.find((t=>t.value==e)).label)).join("、"):null==(s=i.dataModel)?void 0:s.join("、")),1)],64))],64)):(vue.openBlock(),vue.createBlock(D,vue.mergeProps({key:1,value:i.dataModel,"onUpdate:value":t[7]||(t[7]=e=>i.dataModel=e),style:{width:o.isTable?"100%":o.widget.options.width,display:"flex","flex-wrap":"wrap","flex-direction":o.widget.options.inline?"row":"column"},disabled:l.elementDisabled,size:o.config.size,ref:"fm-"+o.widget.model},{...o.widget.options.customProps,...l.extendProps}),{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.remoteOptions,((e,t)=>(vue.openBlock(),vue.createBlock($,{style:{"line-height":"30px"},value:e.value,key:t},{default:vue.withCtx((()=>[o.widget.options.remote?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(e.label),1)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createTextVNode(vue.toDisplayString(o.widget.options.showLabel?e.label:e.value),1)],64))])),_:2},1032,["value"])))),128))])),_:1},16,["value","style","disabled","size"]))],64)):vue.createCommentVNode("",!0),"time"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:8},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(i.dataModel),1)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[o.widget.options.isRange?(vue.openBlock(),vue.createBlock(T,vue.mergeProps({key:1,value:i.dataModel,"onUpdate:value":t[9]||(t[9]=e=>i.dataModel=e),placeholder:[o.widget.options.startPlaceholder,o.widget.options.endPlaceholder],readonly:o.widget.options.readonly,disabled:l.elementDisabled,inputReadOnly:!o.widget.options.editable,clearable:o.widget.options.clearable,arrowControl:o.widget.options.arrowControl,"value-format":o.widget.options.format,format:o.widget.options.format,style:{width:o.isTable?"100%":o.widget.options.width},ref:"fm-"+o.widget.model,size:o.config.size,onFocus:l.handleOnFocus,onBlur:l.handleOnBlur,popupClassName:"fm-popup-index"},{...o.widget.options.customProps,...l.extendProps}),null,16,["value","placeholder","readonly","disabled","inputReadOnly","clearable","arrowControl","value-format","format","style","size","onFocus","onBlur"])):(vue.openBlock(),vue.createBlock(B,vue.mergeProps({key:0,value:i.dataModel,"onUpdate:value":t[8]||(t[8]=e=>i.dataModel=e),placeholder:o.widget.options.placeholder,"start-placeholder":o.widget.options.startPlaceholder,"end-placeholder":o.widget.options.endPlaceholder,readonly:o.widget.options.readonly,disabled:l.elementDisabled,inputReadOnly:!o.widget.options.editable,clearable:o.widget.options.clearable,arrowControl:o.widget.options.arrowControl,"value-format":o.widget.options.format,format:o.widget.options.format,style:{width:o.isTable?"100%":o.widget.options.width},ref:"fm-"+o.widget.model,size:o.config.size,onFocus:l.handleOnFocus,onBlur:l.handleOnBlur,popupClassName:"fm-popup-index"},{...o.widget.options.customProps,...l.extendProps}),null,16,["value","placeholder","start-placeholder","end-placeholder","readonly","disabled","inputReadOnly","clearable","arrowControl","value-format","format","style","size","onFocus","onBlur"]))],64))],64)):vue.createCommentVNode("",!0),"date"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:9},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString("dates"==o.widget.options.type?null==(d=i.dataModel)?void 0:d.join("、"):"object"==typeof i.dataModel?i.dataModel.join(" ~ "):i.dataModel),1)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},["dates"!=o.widget.options.type&&"daterange"!=o.widget.options.type&&"datetimerange"!=o.widget.options.type&&"monthrange"!=o.widget.options.type?(vue.openBlock(),vue.createBlock(O,vue.mergeProps({key:0,value:i.dataModel,"onUpdate:value":t[10]||(t[10]=e=>i.dataModel=e),picker:"datetime"==o.widget.options.type?"date":o.widget.options.type,placeholder:o.widget.options.placeholder,"start-placeholder":o.widget.options.startPlaceholder,"end-placeholder":o.widget.options.endPlaceholder,readonly:o.widget.options.readonly,disabled:l.elementDisabled,inputReadOnly:!o.widget.options.editable,clearable:o.widget.options.clearable,"value-format":o.widget.options.timestamp?"x":o.widget.options.format,format:o.widget.options.format,style:{width:o.isTable?"100%":o.widget.options.width},ref:"fm-"+o.widget.model,size:o.config.size,onFocus:l.handleOnFocus,onBlur:l.handleOnBlur,"show-time":"datetime"==o.widget.options.type,popupClassName:"fm-popup-index"},{...o.widget.options.customProps,...l.extendProps}),null,16,["value","picker","placeholder","start-placeholder","end-placeholder","readonly","disabled","inputReadOnly","clearable","value-format","format","style","size","onFocus","onBlur","show-time"])):vue.createCommentVNode("",!0),"daterange"==o.widget.options.type||"datetimerange"==o.widget.options.type||"monthrange"==o.widget.options.type?(vue.openBlock(),vue.createBlock(I,vue.mergeProps({key:1,value:i.dataModel,"onUpdate:value":t[11]||(t[11]=e=>i.dataModel=e),placeholder:[o.widget.options.startPlaceholder,o.widget.options.endPlaceholder],readonly:o.widget.options.readonly,disabled:l.elementDisabled,inputReadOnly:!o.widget.options.editable,clearable:o.widget.options.clearable,"value-format":o.widget.options.timestamp?"x":o.widget.options.format,format:o.widget.options.format,style:{width:o.isTable?"100%":o.widget.options.width},ref:"fm-"+o.widget.model,size:o.config.size,onFocus:l.handleOnFocus,onBlur:l.handleOnBlur,"show-time":"datetimerange"==o.widget.options.type,picker:"monthrange"==o.widget.options.type?"month":"date",popupClassName:"fm-popup-index"},{...o.widget.options.customProps,...l.extendProps}),null,16,["value","placeholder","readonly","disabled","inputReadOnly","clearable","value-format","format","style","size","onFocus","onBlur","show-time","picker"])):vue.createCommentVNode("",!0)],64))],64)):vue.createCommentVNode("",!0),"rate"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:10},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(i.dataModel),1)],64)):(vue.openBlock(),vue.createBlock(F,vue.mergeProps({key:1,value:i.dataModel,"onUpdate:value":t[12]||(t[12]=e=>i.dataModel=e),max:o.widget.options.max,count:o.widget.options.max,disabled:l.elementDisabled,"allow-half":o.widget.options.allowHalf,"show-score":o.widget.options.showScore,ref:"fm-"+o.widget.model,size:o.config.size,style:{width:o.isTable?"100%":o.widget.options.width}},{...o.widget.options.customProps,...l.extendProps}),null,16,["value","max","count","disabled","allow-half","show-score","size","style"]))],64)):vue.createCommentVNode("",!0),"color"==o.widget.type?(vue.openBlock(),vue.createElementBlock("div",{key:11,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width,color:"#999"})}," Not currently supported. ",4)):vue.createCommentVNode("",!0),"select"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:12},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[o.widget.options.remote?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString("object"==typeof i.dataModel?null==(u=i.dataModel)?void 0:u.map((e=>i.remoteOptions.find((t=>t.value==e))&&i.remoteOptions.find((t=>t.value==e)).label)).join("、"):i.remoteOptions.find((e=>e.value==i.dataModel))&&i.remoteOptions.find((e=>e.value==i.dataModel)).label),1)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createTextVNode(vue.toDisplayString(o.widget.options.showLabel?"object"==typeof i.dataModel?null==(c=i.dataModel)?void 0:c.map((e=>i.remoteOptions.find((t=>t.value==e))&&i.remoteOptions.find((t=>t.value==e)).label)).join("、"):i.remoteOptions.find((e=>e.value==i.dataModel))&&i.remoteOptions.find((e=>e.value==i.dataModel)).label:"object"==typeof i.dataModel?i.dataModel.join("、"):i.dataModel),1)],64))],64)):(vue.openBlock(),vue.createBlock(P,vue.mergeProps({key:1,value:i.dataModel,"onUpdate:value":t[13]||(t[13]=e=>i.dataModel=e),disabled:l.elementDisabled,mode:o.widget.options.multiple?"multiple":"default","allow-clear":o.widget.options.clearable,placeholder:o.widget.options.placeholder,style:{width:o.isTable?"100%":o.widget.options.width},"show-search":o.widget.options.filterable,"option-filter-prop":"label",ref:"fm-"+o.widget.model,size:o.config.size,onFocus:l.handleOnFocus,onBlur:l.handleOnBlur,popupClassName:"fm-select-dropdown"},{...o.widget.options.customProps,...l.extendProps}),{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.remoteOptions,(e=>(vue.openBlock(),vue.createBlock(L,{key:e.value,value:e.value,label:o.widget.options.showLabel||o.widget.options.remote?e.label:e.value},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.widget.options.showLabel||o.widget.options.remote?e.label:e.value),1)])),_:2},1032,["value","label"])))),128))])),_:1},16,["value","disabled","mode","allow-clear","placeholder","style","show-search","size","onFocus","onBlur"]))],64)):vue.createCommentVNode("",!0),"switch"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:13},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(i.dataModel),1)],64)):(vue.openBlock(),vue.createBlock(M,{key:1,checked:i.dataModel,"onUpdate:checked":t[14]||(t[14]=e=>i.dataModel=e),disabled:l.elementDisabled,ref:"fm-"+o.widget.model,size:o.config.size},null,8,["checked","disabled","size"]))],64)):vue.createCommentVNode("",!0),"slider"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:14},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(i.dataModel),1)],64)):(vue.openBlock(),vue.createBlock(A,vue.mergeProps({key:1,value:i.dataModel,"onUpdate:value":t[15]||(t[15]=e=>i.dataModel=e),min:o.widget.options.min,max:o.widget.options.max,disabled:l.elementDisabled,step:o.widget.options.step,"show-input":o.widget.options.showInput,range:o.widget.options.range,style:{width:o.isTable?"100%":o.widget.options.width},ref:"fm-"+o.widget.model,size:o.config.size},{...o.widget.options.customProps,...l.extendProps}),null,16,["value","min","max","disabled","step","show-input","range","style","size"]))],64)):vue.createCommentVNode("",!0),"imgupload"==o.widget.type?(vue.openBlock(),vue.createBlock(R,{key:15,modelValue:i.dataModel,"onUpdate:modelValue":t[16]||(t[16]=e=>i.dataModel=e),disabled:l.elementDisabled,readonly:o.widget.options.readonly||o.printRead,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width}),width:o.widget.options.size.width,height:o.widget.options.size.height,token:i.remoteToken,domain:o.widget.options.domain,multiple:o.widget.options.multiple,limit:o.widget.options.limit,"is-qiniu":o.widget.options.isQiniu,"is-delete":o.widget.options.isDelete,min:o.widget.options.min,"is-edit":o.widget.options.isEdit,action:o.widget.options.action,ui:"antd",headers:o.widget.options.headers||[],ref:"fm-"+o.widget.model,withCredentials:o.widget.options.withCredentials,onOnUploadSuccess:l.handleOnUploadSuccess,onOnUploadError:l.handleOnUploadError,onOnUploadRemove:l.handleOnUploadRemove,onOnUploadProgress:l.handleOnUploadProgress,"on-select":l.handleOnUploadSelect,"print-read":o.printRead,size:o.config.size},null,8,["modelValue","disabled","readonly","style","width","height","token","domain","multiple","limit","is-qiniu","is-delete","min","is-edit","action","headers","withCredentials","onOnUploadSuccess","onOnUploadError","onOnUploadRemove","onOnUploadProgress","on-select","print-read","size"])):vue.createCommentVNode("",!0),"editor"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:16},[o.printRead?(vue.openBlock(),vue.createElementBlock("div",{key:0,innerHTML:i.dataModel,class:"ql-editor"},null,8,_hoisted_4$3)):(vue.openBlock(),vue.createBlock(z,{key:1,modelValue:i.dataModel,"onUpdate:modelValue":t[17]||(t[17]=e=>i.dataModel=e),"custom-style":{width:o.isTable?"100%":o.widget.options.width,cursor:l.elementDisabled?"no-drop":"",backgroundColor:l.elementDisabled?"#F5F7FA":""},toolbar:o.widget.options.customToolbar,disabled:l.elementDisabled,ref:"fm-"+o.widget.model},null,8,["modelValue","custom-style","toolbar","disabled"]))],64)):vue.createCommentVNode("",!0),"cascader"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:17},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[o.widget.options.remote?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(o.widget.options.multiple?null==(p=i.dataModel)?void 0:p.map((e=>l.getCascaderText([...e],i.remoteOptions).join(" / "))).join("、"):l.getCascaderText([...i.dataModel],i.remoteOptions).join(" / ")),1)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createTextVNode(vue.toDisplayString(o.widget.options.multiple?null==(m=i.dataModel)?void 0:m.map((e=>l.getCascaderText([...e],i.remoteOptions).join(" / "))).join("、"):l.getCascaderText([...i.dataModel],i.remoteOptions).join(" / ")),1)],64))],64)):(vue.openBlock(),vue.createBlock(U,vue.mergeProps({key:1,value:i.dataModel,"onUpdate:value":t[18]||(t[18]=e=>i.dataModel=e),disabled:l.elementDisabled,"allow-clear":o.widget.options.clearable,placeholder:o.widget.options.placeholder,style:{width:o.isTable?"100%":o.widget.options.width},options:i.remoteOptions,ref:"fm-"+o.widget.model,onFocus:l.handleOnFocus,onBlur:l.handleOnBlur,showSearch:o.widget.options.filterable,"change-on-select":o.widget.options.checkStrictly,popupClassName:"fm-popup-index",multiple:o.widget.options.multiple,size:o.config.size},{...o.widget.options.customProps,...l.extendProps}),null,16,["value","disabled","allow-clear","placeholder","style","options","onFocus","onBlur","showSearch","change-on-select","multiple","size"]))],64)):vue.createCommentVNode("",!0),"treeselect"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:18},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[o.widget.options.remote?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString("object"==typeof i.dataModel?null==(h=i.dataModel)?void 0:h.map((e=>l.getTreeText(e,i.remoteOptions))).join("、"):l.getTreeText(i.dataModel,i.remoteOptions)),1)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createTextVNode(vue.toDisplayString("object"==typeof i.dataModel?null==(f=i.dataModel)?void 0:f.map((e=>l.getTreeText(e,i.remoteOptions))).join("、"):l.getTreeText(i.dataModel,i.remoteOptions)),1)],64))],64)):(vue.openBlock(),vue.createBlock(W,vue.mergeProps({key:1,value:i.dataModel,"onUpdate:value":t[19]||(t[19]=e=>i.dataModel=e),disabled:l.elementDisabled,"allow-clear":o.widget.options.clearable,placeholder:o.widget.options.placeholder,style:{width:o.isTable?"100%":o.widget.options.width},"tree-data":i.remoteOptions,ref:"fm-"+o.widget.model,onFocus:l.handleOnFocus,onBlur:l.handleOnBlur,multiple:o.widget.options.multiple,showSearch:o.widget.options.filterable,popupClassName:"fm-popup-index",size:o.config.size},{...o.widget.options.customProps,...l.extendProps}),null,16,["value","disabled","allow-clear","placeholder","style","tree-data","onFocus","onBlur","multiple","showSearch","size"]))],64)):vue.createCommentVNode("",!0),"text"==o.widget.type?(vue.openBlock(),vue.createElementBlock("span",{key:19,ref:"fm-"+o.widget.model,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width||"100%",display:"inline-block"})},vue.toDisplayString(i.dataModel),5)):vue.createCommentVNode("",!0),"html"==o.widget.type?(vue.openBlock(),vue.createElementBlock("span",{key:20,innerHTML:i.dataModel,ref:"fm-"+o.widget.model,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width||"100%",display:"inline-block"})},null,12,_hoisted_5$3)):vue.createCommentVNode("",!0),"table"==o.widget.type?(vue.openBlock(),vue.createBlock(j,{key:21,value:i.dataModel,"onUpdate:value":t[20]||(t[20]=e=>i.dataModel=e),columns:o.widget.tableColumns,models:i.dataModels,remote:o.remote,blanks:o.blanks,disableddata:l.elementDisabled||o.printRead,rules:o.rules,name:o.widget.model,"remote-option":o.remoteOption,ref:"fm-"+o.widget.model,preview:o.preview,platform:o.platform,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,widget:o.widget,"container-key":o.containerKey,"print-read":o.printRead,paging:o.widget.options.paging,"page-size":o.widget.options.pageSize,config:o.config,"is-add":null==(v=o.widget.options.isAdd)||v,"is-delete":null==(g=o.widget.options.isDelete)||g,"show-control":null==(y=o.widget.options.showControl)||y,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["value","columns","models","remote","blanks","disableddata","rules","name","remote-option","preview","platform","data-source-value","event-function","widget","container-key","print-read","paging","page-size","config","is-add","is-delete","show-control","is-dialog","dialog-name","is-group","group","field-node"])):vue.createCommentVNode("",!0),"subform"==o.widget.type?(vue.openBlock(),vue.createBlock(H,{key:22,value:i.dataModel,"onUpdate:value":t[21]||(t[21]=e=>i.dataModel=e),list:o.widget.list,models:i.dataModels,remote:o.remote,blanks:o.blanks,disableddata:l.elementDisabled||o.printRead,rules:o.rules,name:o.widget.model,"remote-option":o.remoteOption,ref:"fm-"+o.widget.model,preview:o.preview,platform:o.platform,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,widget:o.widget,"print-read":o.printRead,paging:o.widget.options.paging,"page-size":o.widget.options.pageSize,config:o.config,"container-key":o.containerKey,"show-control":o.widget.options.showControl,"is-delete":null==(b=o.widget.options.isDelete)||b,"is-add":null==(w=o.widget.options.isAdd)||w,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["value","list","models","remote","blanks","disableddata","rules","name","remote-option","preview","platform","data-source-value","event-function","widget","print-read","paging","page-size","config","container-key","show-control","is-delete","is-add","is-dialog","dialog-name","is-group","group","field-node"])):vue.createCommentVNode("",!0),"group"==o.widget.type?(vue.openBlock(),vue.createBlock(G,{key:23,value:i.dataModel,"onUpdate:value":t[22]||(t[22]=e=>i.dataModel=e),rules:o.rules,element:o.widget,remote:o.remote,blanks:o.blanks,edit:!l.elementDisabled,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,ref:"fm-"+o.widget.model,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode,config:o.config},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["value","rules","element","remote","blanks","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","is-group","group","field-node","config"])):vue.createCommentVNode("",!0),"fileupload"==o.widget.type?(vue.openBlock(),vue.createBlock(K,{key:24,modelValue:i.dataModel,"onUpdate:modelValue":t[23]||(t[23]=e=>i.dataModel=e),disabled:l.elementDisabled,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width}),token:i.remoteToken,domain:o.widget.options.domain,multiple:o.widget.options.multiple,limit:o.widget.options.limit,"is-qiniu":o.widget.options.isQiniu,min:o.widget.options.min,action:o.widget.options.action,ui:"antd",headers:o.widget.options.headers||[],ref:"fm-"+o.widget.model,withCredentials:o.widget.options.withCredentials,"print-read":o.printRead,onOnUploadSuccess:l.handleOnUploadSuccess,onOnUploadError:l.handleOnUploadError,onOnUploadRemove:l.handleOnUploadRemove,onOnUploadProgress:l.handleOnUploadProgress,"on-select":l.handleOnUploadSelect,size:o.config.size,accept:o.widget.options.accept},null,8,["modelValue","disabled","style","token","domain","multiple","limit","is-qiniu","min","action","headers","withCredentials","print-read","onOnUploadSuccess","onOnUploadError","onOnUploadRemove","onOnUploadProgress","on-select","size","accept"])):vue.createCommentVNode("",!0),"button"==o.widget.type?(vue.openBlock(),vue.createBlock(q,vue.mergeProps({key:25,disabled:l.elementDisabled,size:o.widget.options.buttonSize,type:"text"==o.widget.options.buttonType?"link":o.widget.options.buttonType||"default",shape:o.widget.options.buttonCircle?"circle":o.widget.options.buttonRound?"round":null,ghost:o.widget.options.buttonPlain,style:{width:o.widget.options.width},ref:"fm-"+o.widget.model,onClick:l.handleOnClick},{...o.widget.options.customProps,...l.extendProps}),{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.widget.options.buttonName),1)])),_:1},16,["disabled","size","type","shape","ghost","style","onClick"])):vue.createCommentVNode("",!0),"link"==o.widget.type?(vue.openBlock(),vue.createElementBlock("div",{key:26,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width,color:"#999"})},[vue.createVNode(q,vue.mergeProps({type:"link",danger:"danger"==o.widget.options.linkType,disabled:l.elementDisabled,href:o.widget.options.href,target:o.widget.options.blank?"_blank":"_self",ref:"fm-"+o.widget.model,onClick:l.handleOnClick,style:{width:o.isTable?"100%":o.widget.options.width}},{...o.widget.options.customProps,...l.extendProps}),{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.widget.options.linkName),1)])),_:1},16,["danger","disabled","href","target","onClick","style"])],4)):vue.createCommentVNode("",!0),"steps"==o.widget.type?(vue.openBlock(),vue.createBlock(X,vue.mergeProps({key:27,current:i.dataModel,ref:"fm-"+o.widget.model,space:o.widget.options.space,direction:o.widget.options.direction,status:o.widget.options.processStatus,style:{"line-height":"normal"}},{...o.widget.options.customProps,...l.extendProps}),{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.remoteOptions,((e,t)=>(vue.openBlock(),vue.createBlock(Y,{key:t,title:e.title,description:e.description},null,8,["title","description"])))),128))])),_:1},16,["current","space","direction","status"])):vue.createCommentVNode("",!0),"pagination"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:28},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(" Page "+vue.toDisplayString(i.dataModel),1)],64)):(vue.openBlock(),vue.createBlock(J,vue.mergeProps({key:1,current:i.dataModel,"onUpdate:current":t[24]||(t[24]=e=>i.dataModel=e),"page-size":o.widget.options.pageSize,"pager-count":o.widget.options.pagerCount,disabled:o.widget.options.disabled,background:o.widget.options.background,total:o.widget.options.total,"show-total":t=>`${e.$t("fm.config.widget.total")} ${t}`,"show-less-items":"","show-size-changer":!1,size:o.widget.options.background?"":"small",ref:"fm-"+o.widget.model},{...o.widget.options.customProps,...l.extendProps}),null,16,["current","page-size","pager-count","disabled","background","total","show-total","size"]))],64)):vue.createCommentVNode("",!0),"transfer"==o.widget.type?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:29},[o.printRead?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[o.widget.options.remote?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createTextVNode(vue.toDisplayString(null==(k=i.dataModel)?void 0:k.map((e=>{var t;return null==(t=i.remoteOptions.find((t=>t.key==e)))?void 0:t.title})).join("、")),1)],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createTextVNode(vue.toDisplayString(null==(_=i.dataModel)?void 0:_.map((e=>{var t;return null==(t=i.remoteOptions.find((t=>t.key==e)))?void 0:t.label})).join("、")),1)],64))],64)):(vue.openBlock(),vue.createBlock(Q,vue.mergeProps({key:1,"target-keys":i.dataModel,"onUpdate:targetKeys":t[25]||(t[25]=e=>i.dataModel=e),disabled:l.elementDisabled,"data-source":o.widget.options.remote?i.remoteOptions:i.dataOnly,render:e=>`${e.title}`,showSearch:o.widget.options.filterable,titles:o.widget.options.titles,style:{width:o.isTable?"100%":o.widget.options.width},ref:"fm-"+o.widget.model},{...o.widget.options.customProps,...l.extendProps}),null,16,["target-keys","disabled","data-source","render","showSearch","titles","style"]))],64)):vue.createCommentVNode("",!0),"list"==o.widget.type?(vue.openBlock(),vue.createBlock(Z,{key:30,ref:"fm-"+o.widget.model,modelValue:i.dataModel,"onUpdate:modelValue":t[26]||(t[26]=e=>i.dataModel=e),columns:o.widget.options.columns,showOperation:o.widget.options.showOperation,operations:o.widget.options.operations,pagination:o.widget.options.pagination,style:vue.normalizeStyle({width:o.isTable?"100%":o.widget.options.width}),"max-height":o.widget.options.maxHeight,stripe:o.widget.options.stripe,border:o.widget.options.border,highlight:o.widget.options.highlight,selection:o.widget.options.selection,size:o.config.size,"print-read":o.printRead,onOnPageChange:l.handlePageChange,onOnCurrentRow:l.handleCurrentRow,onOnOperate:l.handleOperate,onOnSelectionChange:l.handleSelectionChange},null,8,["modelValue","columns","showOperation","operations","pagination","style","max-height","stripe","border","highlight","selection","size","print-read","onOnPageChange","onOnCurrentRow","onOnOperate","onOnSelectionChange"])):vue.createCommentVNode("",!0)],2)}var GenerateElementItem=_export_sfc(_sfc_main$g,[["render",_sfc_render$e]]),GenerateElementItem$1=Object.freeze(Object.defineProperty({__proto__:null,default:GenerateElementItem},Symbol.toStringTag,{value:"Module"})),GenerateFormItem_vue_vue_type_style_index_0_lang="";const __default__$1={components:{GenerateElementItem:GenerateElementItem},props:["config","widget","models","rules","remote","blanks","display","edit","remoteOption","platform","preview","containerKey","dataSourceValue","eventFunction","printRead","isSubform","rowIndex","subName","subHideFields","subDisabledFields","isDialog","dialogName","group","fieldNode","isGroup","isTable","isMobile","tableName"],data(){return{dataModel:Object.keys(this.models).includes(this.widget.model)?this.models[this.widget.model]:_.cloneDeep(this.widget.options.defaultValue),dataModels:this.models}},computed:{labelWidth(){return this.widget.options.hideLabel?"0px":this.widget.options.isLabelWidth?this.widget.options.labelWidth+"px":this.config.labelWidth+"px"},ruleProp(){let e=this.widget.model;return this.group&&(e=this.group+"."+e),e},currentOptions(){var e,t;return this.isTable||this.isSubform?{value:this.dataModel,fieldNode:this.fieldNode?this.fieldNode+"."+this.widget.model:this.widget.model,currentRef:null==(e=this.$refs.generateElementItem)?void 0:e.$refs[`fm-${this.widget.model}`],rowIndex:this.rowIndex,row:_.cloneDeep(this.models),field:this.widget.model,group:this.group}:{value:this.dataModel,fieldNode:this.fieldNode?this.fieldNode+"."+this.widget.model:this.widget.model,currentRef:null==(t=this.$refs.generateElementItem)?void 0:t.$refs[`fm-${this.widget.model}`],field:this.widget.model,group:this.group}},elementDisplay(){let e=this.fieldNode?this.fieldNode+"."+this.widget.model:this.widget.model,t=this.group?this.group+"."+this.widget.model:this.widget.model;return null!=this.dynamicHideFields[e]?!this.dynamicHideFields[e]:null!=this.dynamicHideFields[t]?!this.dynamicHideFields[t]:"boolean"==typeof this.widget.options.hidden?!this.widget.options.hidden:!isExpression(this.widget.options.hidden)||!executeExpression(extractExpression(this.widget.options.hidden),this.currentOptions,this.formContext)},groupNode(){return this.group?this.group+"."+this.widget.model:this.widget.model},elementNode(){return this.fieldNode?this.fieldNode+"."+this.widget.model:this.widget.model}},inject:{setSubformData:{default:()=>{}},setDialogData:{default:()=>{}},setGroupData:{default:()=>{}},setTableData:{default:()=>{}},getFormComponent:{default:()=>null},onChange:{default:()=>{}},dynamicHideFields:{default:{}},dynamicValueData:{default:[]},formContext:{default:{}},generateFormItemContext:{default:()=>{}},deleteFormItemContext:{default:()=>{}},sendRequest:{default:()=>{}}},created(){this.refreshDynamicValue()},mounted(){this.generateFormItemContext(this.elementNode,this)},beforeUnmount(){this.deleteFormItemContext(this.elementNode)},methods:{refreshDynamicValue(e){return new Promise(((t,o)=>{if(this.widget.options.isDynamicValue&&"datasource"==this.widget.options.dynamicValueType&&this.widget.options.dynamicValueDataSource){let i=this.group?this.group+"."+this.widget.model+"."+this.widget.options.dynamicValueDataSource:this.widget.model+"."+this.widget.options.dynamicValueDataSource,l={...this.widget.options.dynamicValueArgs};for(let e in l)isExpression(l[e])&&(l[e]=executeExpression(extractExpression(l[e]),this.currentOptions,this.formContext));e&&"object"==typeof e&&(l={...l,...e});let a=this.dynamicValueData.find((e=>e.key===i&&_.isEqual(e.args,l)));if(a)if(this.widget.options.dynamicValueStruct)try{this.dataModel=new Function("data",`return data.${this.widget.options.dynamicValueStruct}`)(a.value),t(this.dataModel)}catch(n){o(n)}else this.dataModel=a.value,t(this.dataModel);else this.sendRequest(this.widget.options.dynamicValueDataSource,l).then((e=>{if(this.widget.options.dynamicValueStruct)try{this.dataModel=new Function("data",`return data.${this.widget.options.dynamicValueStruct}`)(e),t(this.dataModel)}catch(n){o(n)}else this.dataModel=e,t(this.dataModel)}))}if(this.widget.options.isDynamicValue&&"fx"==this.widget.options.dynamicValueType&&this.widget.options.dynamicValueFx){let e=executeExpression(this.widget.options.dynamicValueFx,this.currentOptions,this.formContext);null!==e&&this.$nextTick((()=>{this.dataModel=e})),t(e)}}))}},watch:{dataModel:{deep:!0,handler(e,t){if(JSON.stringify(e)==JSON.stringify(t))return!1;this.isTable?this.setTableData(e,this.rowIndex,this.widget.model):this.isSubform?this.setSubformData(e,this.rowIndex,this.widget.model):this.isDialog?this.setDialogData(e,this.widget.model):this.isGroup?this.setGroupData(e,this.widget.model):this.onChange(e,this.widget.model),this.$nextTick((()=>{if(this.eventFunction.onFormChange&&this.eventFunction.onFormChange(this.currentOptions),this.widget.events&&this.widget.events.onChange){let e=this.widget.events.onChange;this.eventFunction[e](this.currentOptions)}}))}},models:{deep:!0,handler(e){this.dataModels=e,this.dataModel=Object.keys(e).includes(this.widget.model)?e[this.widget.model]:_.cloneDeep(this.widget.options.defaultValue)}}}},__injectCSSVars__$1=()=>{vue.useCssVars((e=>({"5d5bf5ba":e.labelWidth})))},__setup__$1=__default__$1.setup;__default__$1.setup=__setup__$1?(e,t)=>(__injectCSSVars__$1(),__setup__$1(e,t)):__injectCSSVars__$1;const _sfc_main$f=__default__$1,_hoisted_1$6=["data-id"],_hoisted_2$5=["innerHTML"];function _sfc_render$d(e,t,o,n,i,l){var a;const r=vue.resolveComponent("generate-element-item"),s=vue.resolveComponent("a-form-item"),d=vue.resolveComponent("a-divider"),u=vue.resolveComponent("a-alert");return o.widget.key?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"fm-form-item","data-id":o.widget.model},["divider"!=o.widget.type&&"alert"!=o.widget.type&&l.elementDisplay?(vue.openBlock(),vue.createBlock(s,{name:o.fieldNode?[...o.fieldNode.split("."),o.widget.model]:o.widget.model,rules:o.rules[l.ruleProp],class:vue.normalizeClass({[o.widget.options&&o.widget.options.customClass]:!(!o.widget.options||!o.widget.options.customClass),"no-label-form-item":o.widget.options.isLabelWidth&&0==o.widget.options.labelWidth,"no-label-left":""===o.widget.name,"fm-label-wrap":o.widget.options.labelWrap}),label:o.widget.options.hideLabel||o.isTable&&!o.isMobile?"":o.widget.name,key:o.widget.key,required:o.widget.options.required,ref:"generateFormItem",colon:!!(null==(a=o.config)?void 0:a.labelSuffix),validateFirst:""},{default:vue.withCtx((()=>[o.widget.options.tip?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:"fm-item-tooltip",innerHTML:o.widget.options.tip.replace(/\n/g,"<br/>")},null,8,_hoisted_2$5)):vue.createCommentVNode("",!0),(vue.openBlock(),vue.createBlock(r,{blanks:o.blanks,"is-table":o.isTable,"table-name":o.tableName,widget:o.widget,models:i.dataModels,remote:o.remote,edit:o.edit,"remote-option":o.remoteOption,key:o.widget.key,rules:o.rules,modelValue:i.dataModel,"onUpdate:modelValue":t[0]||(t[0]=e=>i.dataModel=e),platform:o.platform,preview:o.preview,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"container-key":o.containerKey,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,ref:"generateElementItem","is-group":o.isGroup,group:o.group,"field-node":o.fieldNode?o.fieldNode+"."+o.widget.model:o.widget.model},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["blanks","is-table","table-name","widget","models","remote","edit","remote-option","rules","modelValue","platform","preview","data-source-value","event-function","container-key","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"]))])),_:3},8,["name","rules","class","label","required","colon"])):vue.createCommentVNode("",!0),"divider"==o.widget.type&&l.elementDisplay?(vue.openBlock(),vue.createBlock(s,{key:1,wrapperCol:{span:0,offset:0}},{default:vue.withCtx((()=>[vue.createVNode(d,vue.mergeProps({orientation:o.widget.options.contentPosition},o.widget.options.customProps,{ref:"fm-"+o.widget.model}),{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.widget.name),1)])),_:1},16,["orientation"])])),_:1})):vue.createCommentVNode("",!0),"alert"==o.widget.type&&l.elementDisplay?(vue.openBlock(),vue.createBlock(s,{key:2,wrapperCol:{span:0,offset:0}},{default:vue.withCtx((()=>[vue.createVNode(u,vue.mergeProps({message:o.widget.options.title,type:o.widget.options.type,description:o.widget.options.description,closable:o.widget.options.closable,center:o.widget.options.center,"show-icon":o.widget.options.showIcon,effect:o.widget.options.effect,style:{width:o.widget.options.width}},o.widget.options.customProps,{onClose:t[1]||(t[1]=e=>o.display[o.widget.model]=!1),ref:"fm-"+o.widget.model}),null,16,["message","type","description","closable","center","show-icon","effect","style"])])),_:1})):vue.createCommentVNode("",!0)],8,_hoisted_1$6)):vue.createCommentVNode("",!0)}var GenerateFormItem=_export_sfc(_sfc_main$f,[["render",_sfc_render$d]]),GenerateFormItem$1=Object.freeze(Object.defineProperty({__proto__:null,default:GenerateFormItem},Symbol.toStringTag,{value:"Module"})),GenereteInline_vue_vue_type_style_index_0_lang="";const _sfc_main$e={name:"generate-inline",components:{GenerateFormItem:GenerateFormItem},props:["config","element","model","rules","remote","blanks","display","edit","remoteOption","platform","preview","containerKey","dataSourceValue","eventFunction","printRead","isSubform","rowIndex","subName","subHideFields","subDisabledFields","isDialog","dialogName","group","fieldNode","isGroup"],data(){return{dataModels:this.model}},computed:{currentOptions(){return this.isSubform?{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,rowIndex:this.rowIndex,row:this.model}:{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model}},elementDisplay(){let e=this.fieldNode?this.fieldNode+"."+this.element.model:this.element.model,t=this.group?this.group+"."+this.element.model:this.element.model;return null!=this.dynamicHideFields[e]?!this.dynamicHideFields[e]:null!=this.dynamicHideFields[t]?!this.dynamicHideFields[t]:"boolean"==typeof this.element.options.hidden?!this.element.options.hidden:!isExpression(this.element.options.hidden)||!executeExpression(extractExpression(this.element.options.hidden),this.currentOptions,this.formContext)}},inject:["generateComponentInstance","deleteComponentInstance","dynamicHideFields","formContext"],mounted(){this.generateComponentInstance&&this.generateComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,this)},beforeUnmount(){this.deleteComponentInstance&&this.deleteComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model)},methods:{},watch:{model:{deep:!0,handler(e){this.dataModels=this.model}}}};function _sfc_render$c(e,t,o,n,i,l){const a=vue.resolveComponent("generate-form-item");return l.elementDisplay?(vue.openBlock(),vue.createElementBlock("div",{key:0,class:vue.normalizeClass(["fm-inline-container",{[o.element.options&&o.element.options.customClass]:!(!o.element.options||!o.element.options.customClass)}]),style:vue.normalizeStyle({display:o.element.options.flex?"flex":"block","flex-direction":"row","flex-wrap":"wrap","justify-content":o.element.options.flexJustify||"normal","align-items":o.element.options.flexAlign||"normal"})},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.list,(t=>(vue.openBlock(),vue.createBlock(a,{key:t.key,models:i.dataModels,rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,style:vue.normalizeStyle({"margin-right":o.element.options.spaceSize+"px"}),"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","style","is-group","group","field-node"])))),128))],6)):vue.createCommentVNode("",!0)}var GenerateInline=_export_sfc(_sfc_main$e,[["render",_sfc_render$c]]),GenereteInline=Object.freeze(Object.defineProperty({__proto__:null,default:GenerateInline},Symbol.toStringTag,{value:"Module"}));const _sfc_main$d={name:"generate-col-item",components:{GenerateFormItem:GenerateFormItem,GenerateInline:GenerateInline,GenerateReport:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateReport$1})))),GenerateCollapse:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCollapse$1})))),GenerateTabItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateTabItem$1})))),GenerateCard:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCard$1}))))},props:["config","element","model","rules","remote","blanks","display","edit","remoteOption","platform","preview","containerKey","dataSourceValue","eventFunction","printRead","isSubform","rowIndex","subName","subHideFields","subDisabledFields","isDialog","dialogName","group","fieldNode","isGroup"],data(){return{dataModels:this.model,hideCols:[]}},computed:{currentOptions(){return this.isSubform?{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,rowIndex:this.rowIndex,row:this.model}:{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model}},elementDisplay(){let e=this.fieldNode?this.fieldNode+"."+this.element.model:this.element.model,t=this.group?this.group+"."+this.element.model:this.element.model;return null!=this.dynamicHideFields[e]?!this.dynamicHideFields[e]:null!=this.dynamicHideFields[t]?!this.dynamicHideFields[t]:"boolean"==typeof this.element.options.hidden?!this.element.options.hidden:!isExpression(this.element.options.hidden)||!executeExpression(extractExpression(this.element.options.hidden),this.currentOptions,this.formContext)}},inject:["generateComponentInstance","deleteComponentInstance","dynamicHideFields","formContext"],mounted(){this.generateComponentInstance&&this.generateComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,this)},beforeUnmount(){this.deleteComponentInstance&&this.deleteComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model)},methods:{getColXS(e){return this.preview?"pc"==this.platform?e.md:"pad"==this.platform?e.sm:"mobile"==this.platform?e.xs:void 0:e.xs},getColSM(e){return this.preview?"pc"==this.platform?e.md:"pad"==this.platform?e.sm:"mobile"==this.platform?e.xs:void 0:e.sm},getColMD(e){return this.preview?"pc"==this.platform?e.md:"pad"==this.platform?e.sm:"mobile"==this.platform?e.xs:void 0:e.md},hideCol(e){!this.hideCols.includes(e)&&this.hideCols.push(e)},displayCol(e){this.hideCols.includes(e)&&this.hideCols.splice(this.hideCols.indexOf(e),1)}},watch:{model:{deep:!0,handler(e){this.dataModels=e}}}};function _sfc_render$b(e,t,o,n,i,l){const a=vue.resolveComponent("generate-col-item",!0),r=vue.resolveComponent("generate-tab-item"),s=vue.resolveComponent("generate-collapse"),d=vue.resolveComponent("generate-report"),u=vue.resolveComponent("generate-card"),c=vue.resolveComponent("generate-inline"),p=vue.resolveComponent("generate-form-item"),m=vue.resolveComponent("a-col"),h=vue.resolveComponent("a-row");return l.elementDisplay?(vue.openBlock(),vue.createBlock(h,{key:0,class:vue.normalizeClass({[o.element.options&&o.element.options.customClass]:!(!o.element.options||!o.element.options.customClass)}),type:o.element.options.flex?"flex":"",gutter:o.element.options.gutter||0,justify:o.element.options.justify,align:o.element.options.align},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.columns,((t,n)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:n},[i.hideCols.includes(n)?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(m,{key:0,xs:t.options?l.getColXS(t.options):t.span,sm:t.options?l.getColXS(t.options):t.span,md:t.options?l.getColSM(t.options):t.span,lg:t.options?l.getColMD(t.options):t.span,offset:t.options?t.options.offset:0,push:t.options?t.options.push:0,pull:t.options?t.options.pull:0,class:vue.normalizeClass({[t.options&&t.options.customClass]:!(!t.options||!t.options.customClass)})},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t.list,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,["grid"==t.type?(vue.openBlock(),vue.createBlock(a,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"tabs"==t.type?(vue.openBlock(),vue.createBlock(r,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"collapse"==t.type?(vue.openBlock(),vue.createBlock(s,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"report"==t.type?(vue.openBlock(),vue.createBlock(d,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"card"==t.type?(vue.openBlock(),vue.createBlock(u,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"inline"==t.type?(vue.openBlock(),vue.createBlock(c,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):(vue.openBlock(),vue.createBlock(p,{key:t.key,models:i.dataModels,rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"]))],64)))),256))])),_:2},1032,["xs","sm","md","lg","offset","push","pull","class"]))],64)))),128))])),_:3},8,["class","type","gutter","justify","align"])):vue.createCommentVNode("",!0)}var GenerateColItem=_export_sfc(_sfc_main$d,[["render",_sfc_render$b]]),GenerateColItem$1=Object.freeze(Object.defineProperty({__proto__:null,default:GenerateColItem},Symbol.toStringTag,{value:"Module"}));const _sfc_main$c={name:"generate-tab-item",components:{GenerateFormItem:GenerateFormItem,GenerateInline:GenerateInline,GenerateColItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateColItem$1})))),GenerateReport:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateReport$1})))),GenerateCollapse:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCollapse$1})))),GenerateCard:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCard$1}))))},props:["config","element","model","rules","remote","blanks","display","edit","remoteOption","platform","preview","containerKey","dataSourceValue","eventFunction","printRead","isSubform","rowIndex","subName","subHideFields","subDisabledFields","isDialog","dialogName","isGroup","group","fieldNode"],data(){return{dataModels:this.model,tabActive:this.element.tabs.length?this.element.tabs[0].name:""}},computed:{currentOptions(){return this.isSubform?{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,rowIndex:this.rowIndex,row:this.model}:{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model}},elementDisplay(){let e=this.fieldNode?this.fieldNode+"."+this.element.model:this.element.model,t=this.group?this.group+"."+this.element.model:this.element.model;return null!=this.dynamicHideFields[e]?!this.dynamicHideFields[e]:null!=this.dynamicHideFields[t]?!this.dynamicHideFields[t]:"boolean"==typeof this.element.options.hidden?!this.element.options.hidden:!isExpression(this.element.options.hidden)||!executeExpression(extractExpression(this.element.options.hidden),this.currentOptions,this.formContext)}},inject:["generateComponentInstance","deleteComponentInstance","dynamicHideFields","formContext"],mounted(){this.generateComponentInstance&&this.generateComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,this)},beforeUnmount(){this.deleteComponentInstance&&this.deleteComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model)},methods:{activateTab(e){const t=this.element.tabs.find((t=>t.label==e));t&&(this.tabActive=t.name)}},watch:{model:{deep:!0,handler(e){this.dataModels=this.model}}}};function _sfc_render$a(e,t,o,n,i,l){const a=vue.resolveComponent("generate-col-item"),r=vue.resolveComponent("generate-report"),s=vue.resolveComponent("generate-inline"),d=vue.resolveComponent("generate-tab-item",!0),u=vue.resolveComponent("generate-collapse"),c=vue.resolveComponent("generate-card"),p=vue.resolveComponent("generate-form-item"),m=vue.resolveComponent("a-tab-pane"),h=vue.resolveComponent("a-tabs");return l.elementDisplay?(vue.openBlock(),vue.createBlock(h,{key:0,activeKey:i.tabActive,"onUpdate:activeKey":t[0]||(t[0]=e=>i.tabActive=e),type:o.element.options.type?"card":"line","tab-position":o.element.options.tabPosition,class:vue.normalizeClass({[o.element.options.customClass]:!!o.element.options.customClass}),style:{"margin-bottom":"18px"}},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.tabs,(t=>(vue.openBlock(),vue.createBlock(m,{key:t.name,tab:t.label,name:t.name},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t.list,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,["grid"==t.type?(vue.openBlock(),vue.createBlock(a,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"report"==t.type?(vue.openBlock(),vue.createBlock(r,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"inline"==t.type?(vue.openBlock(),vue.createBlock(s,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"tabs"==t.type?(vue.openBlock(),vue.createBlock(d,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"collapse"==t.type?(vue.openBlock(),vue.createBlock(u,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"card"==t.type?(vue.openBlock(),vue.createBlock(c,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):(vue.openBlock(),vue.createBlock(p,{key:t.key,models:i.dataModels,rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"]))],64)))),256))])),_:2},1032,["tab","name"])))),128))])),_:3},8,["activeKey","type","tab-position","class"])):vue.createCommentVNode("",!0)}var GenerateTabItem=_export_sfc(_sfc_main$c,[["render",_sfc_render$a]]),GenerateTabItem$1=Object.freeze(Object.defineProperty({__proto__:null,default:GenerateTabItem},Symbol.toStringTag,{value:"Module"}));const _sfc_main$b={name:"generate-report",components:{GenerateFormItem:GenerateFormItem,GenerateInline:GenerateInline,GenerateColItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateColItem$1})))),GenerateTabItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateTabItem$1})))),GenerateCollapse:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCollapse$1})))),GenerateCard:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCard$1}))))},props:["config","element","model","rules","remote","blanks","display","edit","remoteOption","platform","preview","containerKey","dataSourceValue","eventFunction","printRead","isSubform","rowIndex","subName","subHideFields","subDisabledFields","isDialog","dialogName","isGroup","group","fieldNode"],data(){return{dataModels:this.model}},computed:{currentOptions(){return this.isSubform?{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,rowIndex:this.rowIndex,row:this.model}:{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model}},elementDisplay(){let e=this.fieldNode?this.fieldNode+"."+this.element.model:this.element.model,t=this.group?this.group+"."+this.element.model:this.element.model;return null!=this.dynamicHideFields[e]?!this.dynamicHideFields[e]:null!=this.dynamicHideFields[t]?!this.dynamicHideFields[t]:"boolean"==typeof this.element.options.hidden?!this.element.options.hidden:!isExpression(this.element.options.hidden)||!executeExpression(extractExpression(this.element.options.hidden),this.currentOptions,this.formContext)}},inject:["generateComponentInstance","deleteComponentInstance","dynamicHideFields","formContext"],mounted(){this.generateComponentInstance&&this.generateComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,this)},beforeUnmount(){this.deleteComponentInstance&&this.deleteComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model)},methods:{},watch:{model:{deep:!0,handler(e){this.dataModels=this.model}}}},_hoisted_1$5={class:"fm-report-table__wrapper"},_hoisted_2$4=["colspan","rowspan"];function _sfc_render$9(e,t,o,n,i,l){const a=vue.resolveComponent("generate-col-item"),r=vue.resolveComponent("generate-report",!0),s=vue.resolveComponent("generate-inline"),d=vue.resolveComponent("generate-tab-item"),u=vue.resolveComponent("generate-collapse"),c=vue.resolveComponent("generate-card"),p=vue.resolveComponent("generate-form-item");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1$5,[l.elementDisplay?(vue.openBlock(),vue.createElementBlock("table",{key:0,class:vue.normalizeClass(["fm-report-table__table",{[o.element.options&&o.element.options.customClass]:!(!o.element.options||!o.element.options.customClass)}]),style:vue.normalizeStyle({"border-top-width":o.element.options.borderWidth+"px","border-top-color":o.element.options.borderColor,"border-left-width":o.element.options.borderWidth+"px","border-left-color":o.element.options.borderColor,width:o.element.options.width||"auto"})},[vue.createElementVNode("tr",null,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.headerRow,((e,t)=>(vue.openBlock(),vue.createElementBlock("th",{key:t,style:vue.normalizeStyle({width:e.options.width,height:0,padding:0})},null,4)))),128))]),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.rows,((t,n)=>(vue.openBlock(),vue.createElementBlock("tr",{key:n},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t.columns,((t,l)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:n+"-"+l},[t.options.invisible?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("td",{key:0,style:vue.normalizeStyle({"border-right-width":o.element.options.borderWidth+"px","border-right-color":o.element.options.borderColor,"border-bottom-width":o.element.options.borderWidth+"px","border-bottom-color":o.element.options.borderColor,width:t.options.width,height:t.options.height||"40px","min-height":"40px","text-align":t.options.textAlign,"vertical-align":t.options.verticalAlign}),colspan:t.options.colspan,rowspan:t.options.rowspan,class:vue.normalizeClass(["fm-report-table__td",{[t.options.customClass]:!!t.options.customClass}]),valign:"top"},[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t.list,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,["grid"==t.type?(vue.openBlock(),vue.createBlock(a,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"report"==t.type?(vue.openBlock(),vue.createBlock(r,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"inline"==t.type?(vue.openBlock(),vue.createBlock(s,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"tabs"==t.type?(vue.openBlock(),vue.createBlock(d,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"collapse"==t.type?(vue.openBlock(),vue.createBlock(u,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"card"==t.type?(vue.openBlock(),vue.createBlock(c,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):(vue.openBlock(),vue.createBlock(p,{key:t.key,models:i.dataModels,rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"]))],64)))),256))],14,_hoisted_2$4))],64)))),128))])))),128))],6)):vue.createCommentVNode("",!0)])}var GenerateReport=_export_sfc(_sfc_main$b,[["render",_sfc_render$9]]),GenerateReport$1=Object.freeze(Object.defineProperty({__proto__:null,default:GenerateReport},Symbol.toStringTag,{value:"Module"}));const _sfc_main$a={name:"generate-collapse",components:{GenerateFormItem:GenerateFormItem,GenerateInline:GenerateInline,GenerateColItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateColItem$1})))),GenerateReport:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateReport$1})))),GenerateTabItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateTabItem$1})))),GenerateCard:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCard$1}))))},props:["config","element","model","rules","remote","blanks","display","edit","remoteOption","platform","preview","containerKey","dataSourceValue","eventFunction","printRead","isSubform","rowIndex","subName","subHideFields","subDisabledFields","isDialog","dialogName","isGroup","group","fieldNode"],data(){return{dataModels:this.model,tabActive:this.element.tabs.length?[this.element.tabs[0].name]:""}},computed:{currentOptions(){return this.isSubform?{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,rowIndex:this.rowIndex,row:this.model}:{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model}},elementDisplay(){let e=this.fieldNode?this.fieldNode+"."+this.element.model:this.element.model,t=this.group?this.group+"."+this.element.model:this.element.model;return null!=this.dynamicHideFields[e]?!this.dynamicHideFields[e]:null!=this.dynamicHideFields[t]?!this.dynamicHideFields[t]:"boolean"==typeof this.element.options.hidden?!this.element.options.hidden:!isExpression(this.element.options.hidden)||!executeExpression(extractExpression(this.element.options.hidden),this.currentOptions,this.formContext)}},inject:["generateComponentInstance","deleteComponentInstance","dynamicHideFields","formContext"],mounted(){this.generateComponentInstance&&this.generateComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,this)},beforeUnmount(){this.deleteComponentInstance&&this.deleteComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model)},methods:{activateCollapse(e){if("string"==typeof e){const t=this.element.tabs.find((t=>t.title==e));t&&(this.tabActive=t.name)}if("object"==typeof e&&Array.isArray(e)){const t=e.map((e=>{const t=this.element.tabs.find((t=>t.title==e));return t?t.name:""}));this.tabActive=t}}},watch:{model:{deep:!0,handler(e){this.dataModels=this.model}}}};function _sfc_render$8(e,t,o,n,i,l){const a=vue.resolveComponent("generate-col-item"),r=vue.resolveComponent("generate-report"),s=vue.resolveComponent("generate-inline"),d=vue.resolveComponent("generate-tab-item"),u=vue.resolveComponent("generate-collapse",!0),c=vue.resolveComponent("generate-card"),p=vue.resolveComponent("generate-form-item"),m=vue.resolveComponent("a-collapse-panel"),h=vue.resolveComponent("a-collapse");return l.elementDisplay?(vue.openBlock(),vue.createBlock(h,{key:0,activeKey:i.tabActive,"onUpdate:activeKey":t[0]||(t[0]=e=>i.tabActive=e),accordion:o.element.options.accordion,class:vue.normalizeClass({[o.element.options.customClass]:!!o.element.options.customClass}),style:{"margin-bottom":"18px"}},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.tabs,(t=>(vue.openBlock(),vue.createBlock(m,{key:t.name,header:t.title},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(t.list,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,["grid"==t.type?(vue.openBlock(),vue.createBlock(a,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"report"==t.type?(vue.openBlock(),vue.createBlock(r,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"inline"==t.type?(vue.openBlock(),vue.createBlock(s,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"tabs"==t.type?(vue.openBlock(),vue.createBlock(d,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"collapse"==t.type?(vue.openBlock(),vue.createBlock(u,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"card"==t.type?(vue.openBlock(),vue.createBlock(c,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):(vue.openBlock(),vue.createBlock(p,{key:t.key,models:i.dataModels,rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"]))],64)))),256))])),_:2},1032,["header"])))),128))])),_:3},8,["activeKey","accordion","class"])):vue.createCommentVNode("",!0)}var GenerateCollapse=_export_sfc(_sfc_main$a,[["render",_sfc_render$8]]),GenerateCollapse$1=Object.freeze(Object.defineProperty({__proto__:null,default:GenerateCollapse},Symbol.toStringTag,{value:"Module"})),GenerateCard_vue_vue_type_style_index_0_lang="";const __default__={name:"generate-card",components:{GenerateFormItem:GenerateFormItem,GenerateInline:GenerateInline,GenerateReport:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateReport$1})))),GenerateTabItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateTabItem$1})))),GenerateCollapse:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateCollapse$1})))),GenerateColItem:vue.defineAsyncComponent((()=>Promise.resolve().then((function(){return GenerateColItem$1}))))},props:["config","element","model","rules","remote","blanks","display","edit","remoteOption","platform","preview","containerKey","dataSourceValue","eventFunction","printRead","isSubform","rowIndex","subName","subHideFields","subDisabledFields","isDialog","dialogName","isGroup","group","fieldNode"],data(){return{dataModels:this.model}},inject:["generateComponentInstance","deleteComponentInstance","dynamicHideFields","formContext"],mounted(){this.generateComponentInstance&&this.generateComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,this)},beforeUnmount(){this.deleteComponentInstance&&this.deleteComponentInstance(this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model)},computed:{padding(){return this.element.options.padding||"20px"},currentOptions(){return this.isSubform?{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model,rowIndex:this.rowIndex,row:this.model}:{fieldNode:this.fieldNode?`${this.fieldNode}.${this.element.model}`:this.element.model}},elementDisplay(){let e=this.fieldNode?this.fieldNode+"."+this.element.model:this.element.model,t=this.group?this.group+"."+this.element.model:this.element.model;return null!=this.dynamicHideFields[e]?!this.dynamicHideFields[e]:null!=this.dynamicHideFields[t]?!this.dynamicHideFields[t]:"boolean"==typeof this.element.options.hidden?!this.element.options.hidden:!isExpression(this.element.options.hidden)||!executeExpression(extractExpression(this.element.options.hidden),this.currentOptions,this.formContext)}},methods:{},watch:{model:{deep:!0,handler(e){this.dataModels=e}}}},__injectCSSVars__=()=>{vue.useCssVars((e=>({c1f5eafe:e.padding})))},__setup__=__default__.setup;__default__.setup=__setup__?(e,t)=>(__injectCSSVars__(),__setup__(e,t)):__injectCSSVars__;const _sfc_main$9=__default__;function _sfc_render$7(e,t,o,n,i,l){var a,r;const s=vue.resolveComponent("generate-col-item"),d=vue.resolveComponent("generate-tab-item"),u=vue.resolveComponent("generate-collapse"),c=vue.resolveComponent("generate-report"),p=vue.resolveComponent("generate-inline"),m=vue.resolveComponent("generate-card",!0),h=vue.resolveComponent("generate-form-item"),f=vue.resolveComponent("a-card");return l.elementDisplay?(vue.openBlock(),vue.createBlock(f,{key:0,bordered:o.element.options.bordered,hoverable:"hover"===o.element.options.shadow,title:o.element.options.showHeader?o.element.options.title:"",style:vue.normalizeStyle({width:o.element.options.width}),class:vue.normalizeClass({[null==(a=o.element.options)?void 0:a.customClass]:!!(null==(r=o.element.options)?void 0:r.customClass)})},{default:vue.withCtx((()=>[vue.createElementVNode("div",null,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.list,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,["grid"==t.type?(vue.openBlock(),vue.createBlock(s,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"tabs"==t.type?(vue.openBlock(),vue.createBlock(d,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"collapse"==t.type?(vue.openBlock(),vue.createBlock(u,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"report"==t.type?(vue.openBlock(),vue.createBlock(c,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"inline"==t.type?(vue.openBlock(),vue.createBlock(p,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):"card"==t.type?(vue.openBlock(),vue.createBlock(m,{key:t.key,model:i.dataModels,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"])):(vue.openBlock(),vue.createBlock(h,{key:t.key,models:i.dataModels,rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:o.display,"sub-hide-fields":o.subHideFields,"sub-disabled-fields":o.subDisabledFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,config:o.config,"is-subform":o.isSubform,"row-index":o.rowIndex,"sub-name":o.subName,"is-dialog":o.isDialog,"dialog-name":o.dialogName,"is-group":o.isGroup,group:o.group,"field-node":o.fieldNode},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","sub-hide-fields","sub-disabled-fields","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","is-subform","row-index","sub-name","is-dialog","dialog-name","is-group","group","field-node"]))],64)))),256))])])),_:3},8,["bordered","hoverable","title","style","class"])):vue.createCommentVNode("",!0)}var GenerateCard=_export_sfc(_sfc_main$9,[["render",_sfc_render$7]]),GenerateCard$1=Object.freeze(Object.defineProperty({__proto__:null,default:GenerateCard},Symbol.toStringTag,{value:"Module"})),GenerateDialog_vue_vue_type_style_index_0_lang="";const _sfc_main$8={name:"generate-dialog",components:{GenerateColItem:GenerateColItem,GenerateFormItem:GenerateFormItem,GenerateInline:GenerateInline,GenerateReport:GenerateReport,GenerateTabItem:GenerateTabItem,GenerateCollapse:GenerateCollapse,GenerateCard:GenerateCard},props:["config","models","rules","element","remote","blanks","edit","remoteOption","platform","preview","containerKey","dataSourceValue","eventFunction","printRead","group","fieldNode"],data(){var e;return{visible:this.element.options.visible,displayFields:{},dialogModel:null!=(e=this.models[this.element.model])?e:{},dialogDisabled:{},activeElement:""}},emits:["update:models"],inject:["generateComponentInstance","deleteComponentInstance","getFormComponent","onFormHide","onFormDisplay"],created(){this._generateModel(this.element.list)},mounted(){this.generateComponentInstance&&this.generateComponentInstance(this.element.model,this.$refs[`generate-dialog-${this.element.model}`].$parent),this.$nextTick((()=>{var e;null==(e=window.document.querySelector(".fm-generate-ant-dialog"))||e.removeAttribute("tabindex"),setTimeout((()=>{this.clearValidate()}))}))},beforeUnmount(){this.deleteComponentInstance&&this.deleteComponentInstance(this.element.model)},provide(){return{setDialogData:this.setDialogData}},methods:{setDialogData(e,t){this.dialogModel[t]=e},_generateModel(e){var t;for(let o=0;o<e.length;o++)"grid"==e[o].type?(this.displayFields[e[o].model]=!e[o].options.hidden,e[o].columns.forEach((e=>{this._generateModel(e.list)}))):"tabs"===e[o].type||"collapse"===e[o].type?(e[o].tabs.forEach((e=>{this._generateModel(e.list)})),this.displayFields[e[o].model]=!e[o].options.hidden):"report"===e[o].type?(e[o].rows.forEach((e=>{e.columns.forEach((e=>{this._generateModel(e.list)}))})),this.displayFields[e[o].model]=!e[o].options.hidden):"inline"===e[o].type||"card"===e[o].type?(this._generateModel(e[o].list),this.displayFields[e[o].model]=!e[o].options.hidden):("blank"==e[o].type?this.dialogModel[e[o].model]="String"===e[o].options.defaultType?"":"Object"===e[o].options.defaultType?{}:[]:this.dialogModel[e[o].model]=null!=(t=this.models[this.element.model][e[o].model])?t:_.cloneDeep(e[o].options.defaultValue),this.displayFields[e[o].model]=!e[o].options.hidden,this.dialogDisabled[e[o].model]=!e[o].options.disabled)},open(){if(this.activeElement=document.activeElement,document.activeElement&&document.activeElement.blur(),this.visible=!0,this.element&&this.element.events&&this.element.events.onOpen){let e=this.element.events.onOpen;this.$nextTick((()=>{this.eventFunction[e]({field:this.element.model,currentRef:this})}))}},close(){if(this.activeElement&&(this.activeElement.focus(),this.activeElement=""),this.visible=!1,this.element&&this.element.events&&this.element.events.onClose){let e=this.element.events.onClose;this.eventFunction[e]({field:this.element.model,currentRef:this})}},hide(e){"string"==typeof e&&(e=[e]),e.forEach((e=>{this.onFormHide(`${this.fieldNode}.${e}`)}))},display(e){"string"==typeof e&&(e=[e]),e.forEach((e=>{this.onFormDisplay(`${this.fieldNode}.${e}`)}))},disabled(e,t){"string"==typeof e&&(e=[e]),this._setDisabled(this.element.list,e,t)},validate(){return new Promise(((e,t)=>{let o=this._getAllRuleFields();this.getFormComponent().validate(o).then((()=>{e()})).catch((()=>{t()}))}))},clearValidate(){let e=this._getAllRuleFields();this.getFormComponent().clearValidate(e)},handleCancel(){if(this.element&&this.element.events&&this.element.events.onCancel){let e=this.element.events.onCancel;this.eventFunction[e]({field:this.element.model,currentRef:this})}},handleConfirm(){if(this.element&&this.element.events&&this.element.events.onConfirm){let e=this.element.events.onConfirm;this.eventFunction[e]({field:this.element.model,currentRef:this})}},confirmLoading(e){this.element.options.confirmLoading=e},setOptions(e,t){"string"==typeof e&&(e=[e]),this._setOptions(this.element.list,e,t)},setData(e){return new Promise((t=>{this.$nextTick((()=>{Object.keys(e).forEach((t=>{this.dialogModel[t]=e[t]})),t()}))}))},getValues(){return this.dialogModel},getValue(e){return this.dialogModel[e]},addClassName(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{updateClassName(this.element.list,e.split("."),t,"add")}))},removeClassName(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{updateClassName(this.element.list,e.split("."),t,"remove")}))},_setDisabled(e,t,o){for(let n=0;n<e.length;n++)"grid"===e[n].type?e[n].columns.forEach((e=>{this._setDisabled(e.list,t,o)})):"tabs"===e[n].type||"collapse"===e[n].type?e[n].tabs.forEach((e=>{this._setDisabled(e.list,t,o)})):"report"===e[n].type?e[n].rows.forEach((e=>{e.columns.forEach((e=>{this._setDisabled(e.list,t,o)}))})):"inline"===e[n].type||"card"===e[n].type?this._setDisabled(e[n].list,t,o):t.indexOf(e[n].model)>=0&&(e[n].options.disabled=o)},_setOptions(e,t,o){for(let n=0;n<e.length;n++)"grid"===e[n].type?e[n].columns.forEach((e=>{this._setOptions(e.list,t,o)})):"tabs"===e[n].type||"collapse"===e[n].type?e[n].tabs.forEach((e=>{this._setOptions(e.list,t,o)})):"report"===e[n].type?e[n].rows.forEach((e=>{e.columns.forEach((e=>{this._setOptions(e.list,t,o)}))})):("inline"===e[n].type||"card"===e[n].type)&&this._setOptions(e[n].list,t,o),t.indexOf(e[n].model)>=0&&Object.keys(o).forEach((t=>{e[n].options[t]=o[t]}))},_getAllRuleFields(){let e=[];return Object.keys(this.dialogModel).forEach((t=>{if(Array.isArray(this.dialogModel[t])){this.dialogModel[t].forEach(((o,n)=>{Object.keys(o).forEach((o=>{e.push(`${this.element.model}.${t}.${n}.${o}`)}))}))}else e.push(`${this.element.model}.${t}`)})),e.map((e=>e.split(".")))}},watch:{dialogModel:{deep:!0,handler(e){this.$emit("update:models",{...this.models,[this.element.model]:e})}},models:{deep:!0,handler(e){this.dialogModel=this.models[this.element.model]}}}};function _sfc_render$6(e,t,o,n,i,l){var a,r;const s=vue.resolveComponent("generate-col-item"),d=vue.resolveComponent("generate-tab-item"),u=vue.resolveComponent("generate-collapse"),c=vue.resolveComponent("generate-report"),p=vue.resolveComponent("generate-card"),m=vue.resolveComponent("generate-inline"),h=vue.resolveComponent("generate-form-item"),f=vue.resolveComponent("a-button"),v=vue.resolveComponent("a-modal");return vue.openBlock(),vue.createBlock(v,{open:i.visible,"onUpdate:open":t[0]||(t[0]=e=>i.visible=e),title:o.element.options.title,width:o.element.options.width||"50%","mask-closable":!1,closable:o.element.options.showClose,"destroy-on-close":"",ref:`generate-dialog-${o.element.model}`,style:vue.normalizeStyle({top:o.element.options.top||"15vh"}),"z-index":3e3,"wrap-class-name":"fm-generate-ant-dialog "+(o.element.options.showCancel||o.element.options.showOk?"":"no-footer ")+(o.element.options.center?"center ":"")+((null==(a=o.element.options)?void 0:a.customClass)?null==(r=o.element.options)?void 0:r.customClass:""),onCancel:l.close},{footer:vue.withCtx((()=>[vue.createElementVNode("div",null,[o.element.options.showCancel?(vue.openBlock(),vue.createBlock(f,{key:"back",onClick:l.handleCancel},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.element.options.cancelText),1)])),_:1},8,["onClick"])):vue.createCommentVNode("",!0),o.element.options.showOk?(vue.openBlock(),vue.createBlock(f,{key:"submit",type:"primary",loading:o.element.options.confirmLoading,onClick:l.handleConfirm},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(o.element.options.okText),1)])),_:1},8,["loading","onClick"])):vue.createCommentVNode("",!0)])])),default:vue.withCtx((()=>[vue.createElementVNode("div",null,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.element.list,(t=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,["grid"==t.type?(vue.openBlock(),vue.createBlock(s,{key:t.key,model:i.dialogModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-dialog":!0,"dialog-name":o.element.model,config:o.config,group:o.element.model,"field-node":o.element.model},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","dialog-name","config","group","field-node"])):"tabs"==t.type?(vue.openBlock(),vue.createBlock(d,{key:t.key,model:i.dialogModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-dialog":!0,"dialog-name":o.element.model,config:o.config,group:o.element.model,"field-node":o.element.model},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","dialog-name","config","group","field-node"])):"collapse"==t.type?(vue.openBlock(),vue.createBlock(u,{key:t.key,model:i.dialogModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-dialog":!0,"dialog-name":o.element.model,config:o.config,group:o.element.model,"field-node":o.element.model},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","dialog-name","config","group","field-node"])):"report"==t.type?(vue.openBlock(),vue.createBlock(c,{key:t.key,model:i.dialogModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-dialog":!0,"dialog-name":o.element.model,config:o.config,group:o.element.model,"field-node":o.element.model},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","dialog-name","config","group","field-node"])):"card"==t.type?(vue.openBlock(),vue.createBlock(p,{key:t.key,model:i.dialogModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-dialog":!0,"dialog-name":o.element.model,config:o.config,group:o.element.model,"field-node":o.element.model},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","dialog-name","config","group","field-node"])):"inline"==t.type?(vue.openBlock(),vue.createBlock(m,{key:t.key,model:i.dialogModel,rules:o.rules,element:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-dialog":!0,"dialog-name":o.element.model,config:o.config,group:o.element.model,"field-node":o.element.model},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","dialog-name","config","group","field-node"])):(vue.openBlock(),vue.createBlock(h,{key:t.key,models:i.dialogModel,rules:o.rules,widget:t,remote:o.remote,blanks:o.blanks,display:i.displayFields,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":o.containerKey,"data-source-value":o.dataSourceValue,"event-function":o.eventFunction,"print-read":o.printRead,"is-dialog":!0,"dialog-name":o.element.model,config:o.config,group:o.element.model,"field-node":o.element.model},vue.createSlots({_:2},[vue.renderList(o.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","dialog-name","config","group","field-node"]))],64)))),256))])])),_:3},8,["open","title","width","closable","style","wrap-class-name","onCancel"])}var GenerateDialog=_export_sfc(_sfc_main$8,[["render",_sfc_render$6]]);const _sfc_main$7={name:"fm-generate-antd-form",components:{GenerateFormItem:GenerateFormItem,GenerateColItem:GenerateColItem,GenerateTabItem:GenerateTabItem,GenerateReport:GenerateReport,GenerateInline:GenerateInline,GenerateCollapse:GenerateCollapse,GenerateDialog:GenerateDialog,GenerateCard:GenerateCard},props:{data:{type:Object,default:()=>({list:[],config:{labelWidth:100,labelPosition:"right",size:"small",customClass:"",ui:"element",layout:"horizontal"}})},remote:{type:Object,default:()=>({})},value:{type:Object,default:()=>({})},edit:{type:Boolean,default:!0},remoteOption:{type:Object,default:()=>({})},preview:{type:Boolean,default:!1},platform:{type:String,default:"pc"},printRead:{type:Boolean,default:!1}},emits:["on-change"],data(){return{formData:{},models:{},rules:{},blanks:[],displayFields:{},dataBindFields:{},generateShow:!1,resetModels:{},formKey:Math.random().toString(36).slice(-8),formStyleKey:Math.random().toString(36).slice(-8),formValue:this.value,formShow:!1,formRef:Math.random().toString(36).slice(-8)+"Form",containerKey:Math.random().toString(36).slice(-8),dataSourceValue:[],eventFunction:{},instanceObject:{},dataSourceInterface:[],formHideFields:[],dynamicValueData:[],dynamicValueFxInterface:{},dynamicOptionFxInterface:{}}},created(){this._initForm()},mounted(){this.$nextTick((()=>{this.eventFunction.mounted&&this.eventFunction.mounted()}))},beforeUnmount(){let e=".fm-"+this.formStyleKey+" ";clearStyleSheets(e)},provide(){return{generateComponentInstance:this.generateComponentInstance,deleteComponentInstance:this.deleteComponentInstance,eventScriptConfig:this.getEventScriptConfig,getFormComponent:this.getFormComponent,onChange:this._changeFormValue,onFormDisabled:this.disabled,formHideFields:this.formHideFields,onFormHide:this.hide,onFormDisplay:this.display,dynamicValueData:this.dynamicValueData,dynamicOptionData:this.dynamicOptionData,formContext:this}},methods:{getFormComponent(){return this.$refs[this.formRef]},handleValidate(e,t){},_changeFormValue(e,t){this.models[t]=e,this.$emit("on-change",t,e,this.models)},_initForm(){return this.formShow=!1,this.formData=_.cloneDeep(this.data),this.models={},this.rules={},this.blanks=[],this.displayFields={},this.dataBindFields={},this.resetModels={},this.dataSourceValue=[],this.eventFunction=[],this.instanceObject={},this.dataSourceInterface=[],this.formHideFields.splice(0,this.formHideFields.length),this.dynamicValueData.splice(0,this.dynamicValueData.length),this.dynamicValueFxInterface={},this.dynamicOptionFxInterface={},Object.keys(this.data).length?this.generateModel(this.formData.list):this.generateModel([]),this.resetModels=_.cloneDeep(this.models),this.models={...this.models},new Promise((e=>{this.$nextTick((()=>{if(this.formShow=!0,this.formData.config&&this.formData.config.styleSheets){let e=".fm-"+this.formStyleKey+" ";updateStyleSheets(splitStyleSheets(this.formData.config.styleSheets),e)}this.loadDataSource(),this.loadDynamicValueFx(),this.loadEvents(),this.$nextTick((()=>{this.eventFunction.refresh&&this.eventFunction.refresh(),e()}))}))}))},getEventScriptConfig(){var e,t,o;return null!=(o=null==(t=null==(e=this.data)?void 0:e.config)?void 0:t.eventScript)?o:[]},loadEvents(){if(this.formData.config&&this.formData.config.eventScript)for(let e=0;e<this.formData.config.eventScript.length;e++){let t=this.formData.config.eventScript[e];if("rule"===t.type){const e=Object.getPrototypeOf((async function(){})).constructor;this.eventFunction[t.key]=new e(ruleToFunction(t.rules)).bind(this)}else this.eventFunction[t.key]=Function(t.func).bind(this)}},triggerEvent(e,t){if(this.formData.config&&this.formData.config.eventScript){let o=this.formData.config.eventScript.find((t=>t.name==e));if(o)return this.eventFunction[o.key](t)}},refreshDynamicValueAll(){this.refreshDynamicValue()},refreshDynamicValue(e,t){if(void 0===e)return this.loadDynamicValueFx(),void this.loadDynamicValueDataSource();"string"==typeof e&&(e=[e]),e.forEach((e=>{if(Object.keys(this.dynamicValueFxInterface).includes(e)){let t=executeExpression(this.dynamicValueFxInterface[e],{},this);null!==t&&this.setData({[e]:t})}else for(let o=0;o<this.dataSourceInterface.length;o++){let n=this.dataSourceInterface[o];if(n.dynamicValueFields.length&&n.dynamicValueFields.map((e=>e.field)).includes(e)){let o=this.formData.config.dataSource.find((e=>e.key==n.key));const i=t&&"object"==typeof t?{...t}:{};o.name&&this.sendRequest(o.name,{...n.args,...i}).then((t=>{const o=n.dynamicValueFields.find((t=>t.field==e));if(o.struct)try{let n=new Function("data",`return data.${o.struct}`)(t);this.setData({[e]:n})}catch(i){}else this.setData({[e]:t})}));break}}}))},loadDynamicValueDataSource(){for(let e=0;e<this.dataSourceInterface.length;e++){let t=this.dataSourceInterface[e];if(t.dynamicValueFields.length){let e=this.formData.config.dataSource.find((e=>e.key==t.key));e.name&&this.sendRequest(e.name,{...t.args}).then((e=>{t.dynamicValueFields.forEach((({field:t,struct:o})=>{if(o)try{let n=new Function("data",`return data.${o}`)(e);this.setData({[t]:n})}catch(n){}else this.setData({[t]:e})}))}))}}},loadDataSource(){var e,t;for(let o=0;o<this.dataSourceInterface.length;o++){let e=this.dataSourceInterface[o],t=this.formData.config.dataSource.find((t=>t.key==e.key));t&&t.auto&&t.name&&this.sendRequest(t.name,{...e.args}).then((t=>{e.fields.forEach((o=>{let n=o+"."+e.key,i=this.dataSourceValue.find((e=>e.key===n));i?i.value=t:this.dataSourceValue.push({key:n,value:t})})),e.dynamicValueFields.forEach((({field:o,struct:n})=>{let i=o+"."+e.key,l=this.dynamicValueData.find((e=>e.key===i));if(l?l.value=t:this.dynamicValueData.push({key:i,value:t}),n)try{let e=new Function("data",`return data.${n}`)(t);this.setData({[o]:e})}catch(a){}else this.setData({[o]:t})}))}))}if((null==(t=null==(e=this.formData.config)?void 0:e.dataSource)?void 0:t.length)>0)for(let o=0;o<this.formData.config.dataSource.length;o++){let e=this.formData.config.dataSource[o];e.auto&&this.dataSourceInterface.findIndex((t=>t.key==e.key))<0&&this.sendRequest(e.name,{})}},loadDynamicValueFx(){Object.keys(this.dynamicValueFxInterface).forEach((e=>{let t=executeExpression(this.dynamicValueFxInterface[e],{},this);null!==t&&this.setData({[e]:t})}))},refreshFieldOptionData(e,t){if(void 0===e)return!1;"string"==typeof e&&(e=[e]),e.forEach((e=>{if(Object.keys(this.dynamicOptionFxInterface).includes(e)){let t=executeExpression(this.dynamicOptionFxInterface[e],{},this);null!==t&&this.setOptionData(e,t)}else for(let o=0;o<this.dataSourceInterface.length;o++){let n=this.dataSourceInterface[o];if(n.fields.length&&n.fields.includes(e)){let o=this.formData.config.dataSource.find((e=>e.key==n.key));const i=t&&"object"==typeof t?{...t}:{};(null==o?void 0:o.name)&&this.sendRequest(o.name,{...n.args,...i}).then((t=>{let o=e+"."+n.key,i=this.dataSourceValue.find((e=>e.key===o));i?i.value=t:this.dataSourceValue.push({key:o,value:t})}));break}}}))},refreshFieldDataSource(e,t){let o=this.dataSourceInterface.find((t=>t.fields.includes(e)));return new Promise(((n,i)=>{var l;if(o){let a=null==(l=this.formData.config.dataSource.find((e=>e.key==o.key)))?void 0:l.name;a&&this.sendRequest(a,{...o.args,...t}).then((t=>{let i=e+"."+o.key,l=this.dataSourceValue.find((e=>e.key===i));l?l.value=t:this.dataSourceValue.push({key:i,value:t}),n(t)})).catch((()=>{i()}))}else n()}))},getFieldDataSource(e){let t=this.dataSourceInterface.find((t=>t.fields.includes(e)));if(t){let o=e+"."+t.key,n=this.dataSourceValue.find((e=>e.key===o));if(n)return n.value}return null},sendRequest(e,t={}){return new Promise(((o,n)=>{let i=this.formData.config.dataSource.find((t=>t.name===e));if(i||(i=this.formData.config.dataSource.find((t=>t.key===e))),i){for(let o in t)isExpression(t[o])&&(t[o]=executeExpression(extractExpression(t[o]),{},this));let e={method:i.method,url:i.url,headers:{},params:{},data:{}},l={};i.headers&&Object.keys(i.headers).forEach((e=>{isExpression(i.headers[e])?l[e]=executeExpression(extractExpression(i.headers[e]),t,this):l[e]=i.headers[e]})),Object.keys(l).length&&(e.headers=l);let a={};if(i.params&&Object.keys(i.params).forEach((e=>{isExpression(i.params[e])?a[e]=executeExpression(extractExpression(i.params[e]),t,this):a[e]=i.params[e]})),"POST"===e.method||"PUT"===e.method?e.data=a:e.params=a,i.requestFunc){e=Function("config","args",i.requestFunc).bind(this)(e,t)}axios(e).then((e=>{let n=e;if(i.responseFunc){n=Function("res","args",i.responseFunc).bind(this)(e.data,t),o(n)}else o(e.data)})).catch((e=>{if(i.errorFunc){Function("error",i.errorFunc).bind(this)(e)}n(e)}))}}))},generateSubformModel(e,t,o){for(let n=0;n<t.length;n++)t[n].options.hidden&&this.formHideFields.push(`${e}.${t[n].model}`),"grid"===t[n].type?t[n].columns.forEach((t=>{this.generateSubformModel(e,t.list,o)})):"tabs"===t[n].type||"collapse"===t[n].type?t[n].tabs.forEach((t=>{this.generateSubformModel(e,t.list,o)})):"report"===t[n].type?t[n].rows.forEach((t=>{t.columns.forEach((t=>{this.generateSubformModel(e,t.list,o)}))})):"inline"===t[n].type||"card"===t[n].type?this.generateSubformModel(e,t[n].list,o):("blank"===t[n].type&&this.blanks.push({name:t[n].model}),t[n].options.dataBind&&(["subform","group","table"].includes(t[n].type)?o[t[n].model]={}:o[t[n].model]=!0),t[n].tableColumns&&t[n].tableColumns.length&&t[n].tableColumns.forEach((i=>{"blank"===i.type&&this.blanks.push({name:i.model}),i.options.dataBind&&t[n].options.dataBind&&(o[t[n].model][i.model]=!0),i.options.hidden&&this.formHideFields.push(`${e}.${t[n].model}.${i.model}`),this._generateRules(`${e}.${t[n].model}.${i.model}`,i.rules),this._generateDataSource(i,`${e}.${t[n].model}.${i.model}`)})),"subform"==t[n].type&&this.generateSubformModel(`${e}.${t[n].model}`,t[n].list,o[t[n].model]||{}),"group"==t[n].type&&this.generateGroupModel(`${e}.${t[n].model}`,t[n].list,o[t[n].model]||{}),this._generateRules(`${e}.${t[n].model}`,t[n].rules),this._generateDataSource(t[n],`${e}.${t[n].model}`))},generateDialogModel(e,t,o){for(let n=0;n<t.length;n++)t[n].options.hidden&&this.formHideFields.push(`${e}.${t[n].model}`),"grid"===t[n].type?t[n].columns.forEach((t=>{this.generateDialogModel(e,t.list,o)})):"tabs"===t[n].type||"collapse"===t[n].type?t[n].tabs.forEach((t=>{this.generateDialogModel(e,t.list,o)})):"report"===t[n].type?t[n].rows.forEach((t=>{t.columns.forEach((t=>{this.generateDialogModel(e,t.list,o)}))})):"inline"===t[n].type||"card"===t[n].type?this.generateDialogModel(e,t[n].list,o):("blank"===t[n].type&&this.blanks.push({name:t[n].model}),t[n].options.dataBind&&(["subform","group","table"].includes(t[n].type)?o[t[n].model]={}:o[t[n].model]=!0),"subform"==t[n].type&&this.generateSubformModel(`${e}.${t[n].model}`,t[n].list,o[t[n].model]||{}),"group"==t[n].type&&this.generateGroupModel(`${e}.${t[n].model}`,t[n].list,o[t[n].model]||{}),t[n].tableColumns&&t[n].tableColumns.length&&t[n].tableColumns.forEach((i=>{"blank"===i.type&&this.blanks.push({name:i.model}),i.options.dataBind&&t[n].options.dataBind&&(o[t[n].model][i.model]=!0),i.options.hidden&&this.formHideFields.push(`${e}.${t[n].model}.${i.model}`),this._generateRules(`${e}.${t[n].model}.${i.model}`,i.rules),this._generateDataSource(i,`${e}.${t[n].model}.${i.model}`)})),this._generateRules(`${e}.${t[n].model}`,t[n].rules),this._generateDataSource(t[n],`${e}.${t[n].model}`))},generateGroupModel(e,t,o){for(let n=0;n<t.length;n++)t[n].options.hidden&&this.formHideFields.push(`${e}.${t[n].model}`),"grid"===t[n].type?t[n].columns.forEach((t=>{this.generateGroupModel(e,t.list,o)})):"tabs"===t[n].type||"collapse"===t[n].type?t[n].tabs.forEach((t=>{this.generateGroupModel(e,t.list,o)})):"report"===t[n].type?t[n].rows.forEach((t=>{t.columns.forEach((t=>{this.generateGroupModel(e,t.list,o)}))})):"inline"===t[n].type||"card"===t[n].type?this.generateGroupModel(e,t[n].list,o):("blank"===t[n].type&&this.blanks.push({name:t[n].model}),t[n].options.dataBind&&(["subform","group","table"].includes(t[n].type)?o[t[n].model]={}:o[t[n].model]=!0),"subform"==t[n].type&&this.generateSubformModel(`${e}.${t[n].model}`,t[n].list,o[t[n].model]||{}),"group"==t[n].type&&this.generateGroupModel(`${e}.${t[n].model}`,t[n].list,o[t[n].model]||{}),t[n].tableColumns&&t[n].tableColumns.length&&t[n].tableColumns.forEach((i=>{"blank"===i.type&&this.blanks.push({name:i.model}),i.options.dataBind&&t[n].options.dataBind&&(o[t[n].model][i.model]=!0),i.options.hidden&&this.formHideFields.push(`${e}.${t[n].model}.${i.model}`),this._generateRules(`${e}.${t[n].model}.${i.model}`,i.rules),this._generateDataSource(i,`${e}.${t[n].model}.${i.model}`)})),this._generateRules(`${e}.${t[n].model}`,t[n].rules),this._generateDataSource(t[n],`${e}.${t[n].model}`))},generateModel(e){for(let t=0;t<e.length;t++)e[t].options.hidden&&this.formHideFields.push(e[t].model),"grid"===e[t].type?(this.displayFields[e[t].model]=!e[t].options.hidden,e[t].columns.forEach((e=>{this.generateModel(e.list)}))):"tabs"===e[t].type||"collapse"===e[t].type?(e[t].tabs.forEach((e=>{this.generateModel(e.list)})),this.displayFields[e[t].model]=!e[t].options.hidden):"report"===e[t].type?(e[t].rows.forEach((e=>{e.columns.forEach((e=>{this.generateModel(e.list)}))})),this.displayFields[e[t].model]=!e[t].options.hidden):"inline"===e[t].type||"card"===e[t].type?(this.generateModel(e[t].list),this.displayFields[e[t].model]=!e[t].options.hidden):(Object.keys(this.formValue).indexOf(e[t].model)>=0?(this.models[e[t].model]=this.formValue[e[t].model],this.displayFields[e[t].model]=!e[t].options.hidden,"blank"===e[t].type&&this.blanks.push({name:e[t].model})):"blank"===e[t].type?(this.models[e[t].model]="String"===e[t].options.defaultType?"":"Object"===e[t].options.defaultType?{}:[],this.displayFields[e[t].model]=!e[t].options.hidden,this.blanks.push({name:e[t].model})):(this.models[e[t].model]=_.cloneDeep(e[t].options.defaultValue),this.displayFields[e[t].model]=!e[t].options.hidden),(Object.keys(e[t].options).indexOf("dataBind")<0||e[t].options.dataBind)&&e[t].key&&e[t].model&&(["subform","table","dialog","group"].includes(e[t].type)?this.dataBindFields[e[t].model]={}:this.dataBindFields[e[t].model]=!0),"subform"==e[t].type&&this.generateSubformModel(e[t].model,e[t].list,this.dataBindFields[e[t].model]||{}),"dialog"==e[t].type&&this.generateDialogModel(e[t].model,e[t].list,this.dataBindFields[e[t].model]||{}),"group"==e[t].type&&this.generateGroupModel(e[t].model,e[t].list,this.dataBindFields[e[t].model]||{}),e[t].tableColumns&&e[t].tableColumns.length&&e[t].tableColumns.forEach((o=>{"blank"===o.type&&this.blanks.push({name:o.model}),o.options.dataBind&&e[t].options.dataBind&&(this.dataBindFields[e[t].model][o.model]=!0),o.options.hidden&&this.formHideFields.push(`${e[t].model}.${o.model}`),this._generateRules(`${e[t].model}.${o.model}`,o.rules),this._generateDataSource(o,`${e[t].model}.${o.model}`)})),this._generateRules(e[t].model,e[t].rules),this._generateDataSource(e[t],e[t].model))},_generateDataSource(e,t){e.options.remote&&"datasource"===e.options.remoteType&&e.options.remoteDataSource&&this._setDataSourceInterface(t,e.options.remoteArgs,e.options.remoteDataSource),e.options.remote&&"fx"===e.options.remoteType&&e.options.remoteFx&&(this.dynamicOptionFxInterface[t]=e.options.remoteFx),"imgupload"!=e.type&&"fileupload"!=e.type||"datasource"!=e.options.tokenType||!e.options.tokenDataSource||this._setDataSourceInterface(t,e.options.remoteArgs,e.options.tokenDataSource),e.options.isDynamicValue&&"datasource"===e.options.dynamicValueType&&e.options.dynamicValueDataSource&&this._setDynamicValueInterface(t,e.options.dynamicValueArgs,e.options.dynamicValueDataSource,e.options.dynamicValueStruct),e.options.isDynamicValue&&"fx"===e.options.dynamicValueType&&(this.dynamicValueFxInterface[t]=e.options.dynamicValueFx)},_generateRules(model,rules){this.rules[model]?this.rules[model]=[...this.rules[model],...rules?rules.map((im=>{if(im.pattern)return{...im,pattern:eval(im.pattern)};if(im.func){const e=Function("rule","value","callback",im.func).bind(this);return{...im,validator:e}}return{...im}})):[]]:this.rules[model]=[...rules?rules.map((im=>{if(im.pattern)return{...im,pattern:eval(im.pattern)};if(im.func){const e=Function("rule","value","callback",im.func).bind(this);return{...im,validator:e}}return{...im}})):[]]},_setDataSourceInterface(e,t,o){let n;n="string"==typeof t?new Function('"use strict";return ('+(t||"{}")+")")():t;let i=this.dataSourceInterface.findIndex((e=>e.key==o&&_.isEqual(e.args,n)));i>=0?this.dataSourceInterface[i].fields.push(e):this.dataSourceInterface.push({key:o,args:n,fields:[e],dynamicValueFields:[]})},_setDynamicValueInterface(e,t,o,n){let i=this.dataSourceInterface.findIndex((e=>e.key==o&&_.isEqual(e.args,t)));i>=0?this.dataSourceInterface[i].dynamicValueFields.push({field:e,struct:n}):this.dataSourceInterface.push({key:o,args:t,dynamicValueFields:[{field:e,struct:n}],fields:[]})},_setSubDisabled(e,t,o){for(let n=0;n<e.length;n++)if("grid"===e[n].type)e[n].columns.forEach((e=>{this._setSubDisabled(e.list,t,o)}));else if("tabs"===e[n].type)e[n].tabs.forEach((e=>{this._setSubDisabled(e.list,t,o)}));else if("collapse"===e[n].type)e[n].tabs.forEach((e=>{this._setSubDisabled(e.list,t,o)}));else if("report"===e[n].type)e[n].rows.forEach((e=>{e.columns.forEach((e=>{this._setSubDisabled(e.list,t,o)}))}));else if("inline"===e[n].type)this._setSubDisabled(e[n].list,t,o);else if("card"===e[n].type)this._setSubDisabled(e[n].list,t,o);else if(1===t.length)e[n].model===t[0]&&(e[n].options.disabled=o);else{if(e[n].model!==t[0])continue;let i=[...t];i.splice(0,1),"table"===e[n].type&&this._setSubDisabled(e[n].tableColumns,i,o),"subform"===e[n].type&&this._setSubDisabled(e[n].list,i,o),"group"===e[n].type&&this._setSubDisabled(e[n].list,i,o),"dialog"===e[n].type&&this._setSubDisabled(e[n].list,i,o)}},_setSubOptions(e,t,o){for(let n=0;n<e.length;n++)if(1===t.length)e[n].model===t[0]?Object.keys(o).forEach((t=>{e[n].options[t]=o[t]})):"grid"===e[n].type?e[n].columns.forEach((e=>{this._setSubOptions(e.list,t,o)})):"tabs"===e[n].type||"collapse"===e[n].type?e[n].tabs.forEach((e=>{this._setSubOptions(e.list,t,o)})):"report"===e[n].type?e[n].rows.forEach((e=>{e.columns.forEach((e=>{this._setSubOptions(e.list,t,o)}))})):("inline"===e[n].type||"card"===e[n].type)&&this._setSubOptions(e[n].list,t,o);else if("grid"===e[n].type)e[n].columns.forEach((e=>{this._setSubOptions(e.list,t,o)}));else if("tabs"===e[n].type)e[n].tabs.forEach((e=>{this._setSubOptions(e.list,t,o)}));else if("collapse"===e[n].type)e[n].tabs.forEach((e=>{this._setSubOptions(e.list,t,o)}));else if("report"===e[n].type)e[n].rows.forEach((e=>{e.columns.forEach((e=>{this._setSubOptions(e.list,t,o)}))}));else if("inline"===e[n].type)this._setSubOptions(e[n].list,t,o);else if("card"===e[n].type)this._setSubOptions(e[n].list,t,o);else{if(e[n].model!==t[0])continue;let i=[...t];i.splice(0,1),"table"===e[n].type&&this._setSubOptions(e[n].tableColumns,i,o),"subform"===e[n].type&&this._setSubOptions(e[n].list,i,o),"group"===e[n].type&&this._setSubOptions(e[n].list,i,o),"dialog"===e[n].type&&this._setSubOptions(e[n].list,i,o)}},_getSubOptions(e,t){for(let o=0;o<e.length;o++)if(1===t.length){if(e[o].model===t[0])return e[o].options;if("grid"===e[o].type)for(const n of e[o].columns){const e=this._getSubOptions(n.list,t);if(e)return e}else if("tabs"===e[o].type)for(const n of e[o].tabs){const e=this._getSubOptions(n.list,t);if(e)return e}else if("collapse"===e[o].type)for(const n of e[o].tabs){const e=this._getSubOptions(n.list,t);if(e)return e}else if("report"===e[o].type)for(const n of e[o].rows)for(const e of n.columns){const o=this._getSubOptions(e.list,t);if(o)return o}else if("inline"===e[o].type){const n=this._getSubOptions(e[o].list,t);if(n)return n}else if("card"===e[o].type){const n=this._getSubOptions(e[o].list,t);if(n)return n}}else if("grid"===e[o].type)for(const n of e[o].columns){const e=this._getSubOptions(n.list,t);if(e)return e}else if("tabs"===e[o].type)for(const n of e[o].tabs){const e=this._getSubOptions(n.list,t);if(e)return e}else if("collapse"===e[o].type)for(const n of e[o].tabs){const e=this._getSubOptions(n.list,t);if(e)return e}else if("report"===e[o].type)for(const n of e[o].rows)for(const e of n.columns){const o=this._getSubOptions(e.list,t);if(o)return o}else if("inline"===e[o].type){const n=this._getSubOptions(e[o].list,t);if(n)return n}else if("card"===e[o].type){const n=this._getSubOptions(e[o].list,t);if(n)return n}else{if(e[o].model!==t[0])continue;let n=[...t];if(n.splice(0,1),"table"===e[o].type){const t=this._getSubOptions(e[o].tableColumns,n);if(t)return t}if("subform"===e[o].type){const t=this._getSubOptions(e[o].list,n);if(t)return t}if("group"===e[o].type){const t=this._getSubOptions(e[o].list,n);if(t)return t}if("dialog"===e[o].type){const t=this._getSubOptions(e[o].list,n);if(t)return t}}return null},validate(e){return"string"==typeof e&&(e=[e]),new Promise(((t,o)=>{e&&e.length?this.$refs[this.formRef].validate(e.map((e=>e.split(".")))).then((()=>{t()})).catch((()=>{o()})):this.$refs[this.formRef].validate().then((()=>{t()})).catch((()=>{o()}))}))},clearValidate(e){this.$refs[this.formRef].clearValidate(e)},getData(e=!0){return new Promise(((t,o)=>{e?this.$refs[this.formRef].validate().then((()=>{t(getBindModels(this.models,this.dataBindFields))})).catch((()=>{o(new Error(this.$t("fm.message.validError")).message)})):t(getBindModels(this.models,this.dataBindFields))}))},reset(){return new Promise((e=>{this.setData(_.cloneDeep(this.resetModels)).then((()=>{setTimeout((()=>{this.$refs[this.formRef].clearValidate(),e()}),10)}))}))},onInputChange(e,t){this.$emit("on-change",t,e,this.models)},display(e){"string"==typeof e&&(e=[e]),e.forEach((e=>{if(this.formHideFields.includes(e)){let t=this.formHideFields.findIndex((t=>t==e));this.formHideFields.splice(t,1)}}))},hide(e){"string"==typeof e&&(e=[e]),e.forEach((e=>{this.formHideFields.includes(e)||this.formHideFields.push(e)}))},disabled(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{var o;let n=this.instanceObject[e];n?Array.isArray(n)?n.forEach((e=>{var o;null==(o=e.$parent)||o.disabledElement(t)})):null==(o=n.$parent)||o.disabledElement(t):this._setSubDisabled(this.formData.list,e.split("."),t)}))},addClassName(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{updateClassName(this.formData.list,e.split("."),t,"add")}))},removeClassName(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{updateClassName(this.formData.list,e.split("."),t,"remove")}))},async refresh(){await this._initForm()},setData(e){const t=(e,o,n)=>{const i=o.shift();if(0===o.length)e[i]=n;else if(i in e)if(Array.isArray(e[i]))if(Number.isNaN(Number(o[0])))e[i].forEach((e=>{t(e,[...o],n)}));else{const l=o.shift();e[i].length>Number(l)&&t(e[i][Number(l)],[...o],n)}else t(e[i],[...o],n)};return new Promise((o=>{this.$nextTick((()=>{Object.keys(e).forEach((o=>{t(this.models,o.split("."),e[o])})),o()}))}))},getComponent(e){return this.instanceObject[e]?this.instanceObject[e]:(consoleError("No component instance found with "+e),null)},getValues(){return _.cloneDeep(this.models)},getValue(e){const t=_.cloneDeep(this.models);let o=e.split(".");const n=(e,t)=>{if(1===t.length)return e[t[0]];{let o=e[t[0]],i=[...t];return i.splice(0,1),n(o,i)}};return n(t,o)},setRules(e,t){this.rules[e]=[...t],this.$nextTick((()=>{var t;if((null==e?void 0:e.split(".").length)>1){const o=null==(t=this.getValue(e.split(".")[0]))?void 0:t.length;if(o)for(let t=0;t<o;t++)setTimeout((()=>{this.$refs[this.formRef].validate([[e.split(".")[0],t,e.split(".")[1]]])}))}else setTimeout((()=>{this.$refs[this.formRef].validate([e])}))}))},setOptions(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{this._setSubOptions(this.formData.list,e.split("."),t)}))},getOptions(e,t){const o=this._getSubOptions(this.formData.list,e.split("."));return t?o[t]:o},generateComponentInstance(e,t){this.instanceObject[e]?Array.isArray(this.instanceObject[e])?this.instanceObject[e]=[...this.instanceObject[e],t]:this.instanceObject[e]=[this.instanceObject[e],t]:this.instanceObject[e]=t},deleteComponentInstance(e){this.instanceObject[e]&&delete this.instanceObject[e]},setOptionData(e,t){"string"==typeof e&&(e=[e]),e.forEach((e=>{var o;const n=this.instanceObject[e];null==(o=null==n?void 0:n.$parent)||o.loadOptions(t)}))},getOptionData(e){var t;const o=this.instanceObject[e];return null==(t=null==o?void 0:o.$parent)?void 0:t.getOptions()},exportPDF(){return this.printRead?exportPDF(document.querySelector(".fm-"+this.formStyleKey)):Promise.reject()},openDialog(e){const t=this.getComponent(e);t&&t.open()},closeDialog(e){const t=this.getComponent(e);t&&t.close()},getDynamicValue(e){return this.dynamicValueData.find((t=>t.key==e))}}};function _sfc_render$5(e,t,o,n,i,l){var a,r,s,d,u,c;const p=vue.resolveComponent("generate-col-item"),m=vue.resolveComponent("generate-tab-item"),h=vue.resolveComponent("generate-collapse"),f=vue.resolveComponent("generate-report"),v=vue.resolveComponent("generate-card"),g=vue.resolveComponent("generate-inline"),y=vue.resolveComponent("generate-dialog"),b=vue.resolveComponent("generate-form-item"),w=vue.resolveComponent("a-form");return vue.openBlock(),vue.createElementBlock("div",{style:vue.normalizeStyle({width:i.formData.config&&i.formData.config.width}),class:vue.normalizeClass(["fm-form",{["fm-"+i.formStyleKey]:!0,"is-print":o.printRead}])},[i.formShow?(vue.openBlock(),vue.createBlock(w,{ref:i.formRef,model:i.models,rules:i.rules,key:i.formKey,class:vue.normalizeClass({[null==(a=i.formData.config)?void 0:a.customClass]:!!(null==(r=i.formData.config)?void 0:r.customClass),"no-label-form":0==(null==(s=i.formData.config)?void 0:s.labelWidth)}),"label-align":"top"!=(null==(d=i.formData.config)?void 0:d.labelPosition)?null==(u=i.formData.config)?void 0:u.labelPosition:"left",layout:"top"==(null==(c=i.formData.config)?void 0:c.labelPosition)?"vertical":"horizontal",validateOnRuleChange:"",scrollToFirstError:"",onValidate:l.handleValidate},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(i.formData.list,(n=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:n.key},["grid"==n.type?(vue.openBlock(),vue.createBlock(p,{key:0,model:i.models,rules:i.rules,element:n,remote:o.remote,blanks:i.blanks,display:i.displayFields,onInputChange:l.onInputChange,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":i.containerKey,"data-source-value":i.dataSourceValue,"event-function":i.eventFunction,"print-read":o.printRead,config:i.formData.config,group:"","field-node":""},vue.createSlots({_:2},[vue.renderList(i.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","onInputChange","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config"])):"tabs"==n.type?(vue.openBlock(),vue.createBlock(m,{key:1,model:i.models,rules:i.rules,element:n,remote:o.remote,blanks:i.blanks,display:i.displayFields,onInputChange:l.onInputChange,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":i.containerKey,"data-source-value":i.dataSourceValue,"event-function":i.eventFunction,"print-read":o.printRead,config:i.formData.config,group:"","field-node":""},vue.createSlots({_:2},[vue.renderList(i.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","onInputChange","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config"])):"collapse"==n.type?(vue.openBlock(),vue.createBlock(h,{key:2,model:i.models,rules:i.rules,element:n,remote:o.remote,blanks:i.blanks,display:i.displayFields,onInputChange:l.onInputChange,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":i.containerKey,"data-source-value":i.dataSourceValue,"event-function":i.eventFunction,"print-read":o.printRead,config:i.formData.config,group:"","field-node":""},vue.createSlots({_:2},[vue.renderList(i.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","onInputChange","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config"])):"report"==n.type?(vue.openBlock(),vue.createBlock(f,{key:3,model:i.models,rules:i.rules,element:n,remote:o.remote,blanks:i.blanks,display:i.displayFields,onInputChange:l.onInputChange,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":i.containerKey,"data-source-value":i.dataSourceValue,"event-function":i.eventFunction,"print-read":o.printRead,config:i.formData.config,group:"","field-node":""},vue.createSlots({_:2},[vue.renderList(i.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","onInputChange","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config"])):"card"==n.type?(vue.openBlock(),vue.createBlock(v,{key:4,model:i.models,rules:i.rules,element:n,remote:o.remote,blanks:i.blanks,display:i.displayFields,onInputChange:l.onInputChange,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":i.containerKey,"data-source-value":i.dataSourceValue,"event-function":i.eventFunction,"print-read":o.printRead,config:i.formData.config,group:"","field-node":""},vue.createSlots({_:2},[vue.renderList(i.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","onInputChange","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config"])):"inline"==n.type?(vue.openBlock(),vue.createBlock(g,{key:5,model:i.models,rules:i.rules,element:n,remote:o.remote,blanks:i.blanks,display:i.displayFields,onInputChange:l.onInputChange,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":i.containerKey,"data-source-value":i.dataSourceValue,"event-function":i.eventFunction,"print-read":o.printRead,config:i.formData.config,group:"","field-node":""},vue.createSlots({_:2},[vue.renderList(i.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["model","rules","element","remote","blanks","display","onInputChange","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config"])):"dialog"==n.type?(vue.openBlock(),vue.createBlock(y,{key:6,models:i.models,"onUpdate:models":t[0]||(t[0]=e=>i.models=e),rules:i.rules,element:n,remote:o.remote,blanks:i.blanks,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":i.containerKey,"data-source-value":i.dataSourceValue,"event-function":i.eventFunction,"print-read":o.printRead,config:i.formData.config,"form-component":e.$refs[i.formRef],group:"","field-node":""},vue.createSlots({_:2},[vue.renderList(i.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","element","remote","blanks","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config","form-component"])):(vue.openBlock(),vue.createBlock(b,{key:7,models:i.models,rules:i.rules,widget:n,remote:o.remote,blanks:i.blanks,display:i.displayFields,onInputChange:l.onInputChange,edit:o.edit,"remote-option":o.remoteOption,platform:o.platform,preview:o.preview,"container-key":i.containerKey,"data-source-value":i.dataSourceValue,"event-function":i.eventFunction,"print-read":o.printRead,config:i.formData.config,group:"","field-node":""},vue.createSlots({_:2},[vue.renderList(i.blanks,(t=>({name:t.name,fn:vue.withCtx((o=>[vue.renderSlot(e.$slots,t.name,{model:o.model})]))})))]),1032,["models","rules","widget","remote","blanks","display","onInputChange","edit","remote-option","platform","preview","container-key","data-source-value","event-function","print-read","config"]))],64)))),128))])),_:3},8,["model","rules","class","label-align","layout","onValidate"])):vue.createCommentVNode("",!0)],6)}var GenerateAntdForm=_export_sfc(_sfc_main$7,[["render",_sfc_render$5]]),PreviewPdf_vue_vue_type_style_index_0_lang="";const _sfc_main$6={components:{CusDialog:CusDialog},data:()=>({previewVisible:!1,iframeSrc:""}),methods:{open(e){var t=URL.createObjectURL(e);this.iframeSrc=t,this.previewVisible=!0}}},_hoisted_1$4=["src"];function _sfc_render$4(e,t,o,n,i,l){const a=vue.resolveComponent("cus-dialog");return vue.openBlock(),vue.createBlock(a,{visible:i.previewVisible,onOnClose:t[0]||(t[0]=e=>i.previewVisible=!1),ref:"pdfPreview",title:e.$t("fm.actions.pdfPreview"),action:!1,"custom-class":"fm-generate-preview-pdf","close-on-press-escape":!1,fullscreen:!1,width:"1200px"},{default:vue.withCtx((()=>[vue.createElementVNode("iframe",{src:i.iframeSrc,frameborder:"0",width:"100%",height:"600px",style:{"margin-bottom":"-6px"}},null,8,_hoisted_1$4)])),_:1},8,["visible","title"])}var PreviewPdf=_export_sfc(_sfc_main$6,[["render",_sfc_render$4]]),PreviewDialog_vue_vue_type_style_index_0_lang="";const _sfc_main$5={components:{CusDialog:CusDialog,GenerateForm:GenerateForm,AntdGenerateForm:GenerateAntdForm,PreviewPdf:PreviewPdf},props:{},inject:{themeAlgorithm:{default:null},useAntdForm:{default:!1}},emits:["get-data-success"],data:()=>({previewVisible:!1,formEdit:!0,previewForm:{},widgetModels:{},platform:"pc",printRead:!1,showQrcode:!1,exportLoading:!1,printLoading:!1}),methods:{generateQrcode(e){if(!window.QRCode)return consoleError("QRCode is not defined"),!1;setTimeout((()=>{this.showQrcode=!0,new QRCode(document.getElementById("fmpreviewqrcode"),{width:120,height:120}).makeCode(e)}),500)},preview(e,t){this.previewForm=e,this.formEdit=this.previewVisible=!0,this.printRead=!1,this.showQrcode=!1,this.platform=t,this.$nextTick((()=>{var e;null==(e=window.document.getElementsByClassName("fm-generate-preview-container"))||e[0].removeAttribute("tabindex")}))},handleTest(){("element"!=this.previewForm.config.ui&&this.previewForm.config.ui?this.$refs.generateAntForm:this.$refs.generateForm).getData().then((e=>{this.$emit("get-data-success",e),this.$refs.widgetPreview.end()})).catch((e=>{elementPlus.ElMessage({message:e,type:"error"}),this.$refs.widgetPreview.end()}))},handleReset(){("element"!=this.previewForm.config.ui&&this.previewForm.config.ui?this.$refs.generateAntForm:this.$refs.generateForm).reset()},handleExportWord(){for(var e="",t=document.styleSheets,o=0;o<t.length;++o)for(var n=0;n<t[o].cssRules.length;++n)e+=t[o].cssRules[n].cssText;var i=`<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>\n      <head><meta charset='utf-8'><title>Export HTML to Word Document with JavaScript</title>\n      <style>${e}</style>\n      </head><body>`+document.getElementById("export-id").innerHTML+"</body></html>",l=new Blob(["\ufeff",i],{type:"application/msword"}),a="data:application/vnd.ms-word;charset=utf-8,"+encodeURIComponent(i);let r=r?r+".doc":"document.doc";var s=document.createElement("a");document.body.appendChild(s),navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(l,r):(s.href=a,s.download=r,s.click()),document.body.removeChild(s)},handlePrint(){const e=this.printRead;this.printLoading=!0,setTimeout((()=>{this.printRead=!0,this.$nextTick((()=>{("element"!=this.previewForm.config.ui&&this.previewForm.config.ui?this.$refs.generateAntForm:this.$refs.generateForm).print().then().finally((()=>{this.printLoading=!1,this.printRead=e}))}))}),100)},handleExportPDF(){const e=this.printRead;this.exportLoading=!0,setTimeout((()=>{this.printRead=!0,this.$nextTick((()=>{("element"!=this.previewForm.config.ui&&this.previewForm.config.ui?this.$refs.generateAntForm:this.$refs.generateForm).exportPDF().then((e=>{this.$refs.pdfPreview.open(e)})).finally((()=>{this.exportLoading=!1,this.printRead=e}))}))}),100)}}},_hoisted_1$3=vue.createElementVNode("i",{class:"fm-iconfont icon-pc"},null,-1),_hoisted_2$3=vue.createElementVNode("i",{class:"fm-iconfont icon-pad"},null,-1),_hoisted_3$3=vue.createElementVNode("i",{class:"fm-iconfont icon-mobile"},null,-1),_hoisted_4$2={style:{position:"absolute",top:"80px",left:"50%","margin-left":"220px"}},_hoisted_5$2={style:{"line-height":"20px","margin-bottom":"10px"}},_hoisted_6$2=vue.createElementVNode("div",{id:"fmpreviewqrcode"},null,-1);function _sfc_render$3(e,t,o,n,i,l){const a=vue.resolveComponent("el-radio-button"),r=vue.resolveComponent("el-radio-group"),s=vue.resolveComponent("generate-form"),d=vue.resolveComponent("antd-generate-form"),u=vue.resolveComponent("a-config-provider"),c=vue.resolveComponent("el-scrollbar"),p=vue.resolveComponent("el-card"),m=vue.resolveComponent("el-button"),h=vue.resolveComponent("cus-dialog"),f=vue.resolveComponent("PreviewPdf"),v=vue.resolveDirective("loading");return vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createVNode(h,{visible:i.previewVisible,onOnClose:t[6]||(t[6]=e=>i.previewVisible=!1),ref:"widgetPreview",title:e.$t("fm.actions.preview"),fullscreen:"","custom-class":"fm-generate-preview-container","close-on-press-escape":!1},{action:vue.withCtx((()=>[vue.createVNode(m,{size:"large",type:"primary",onClick:l.handleTest},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.getData")),1)])),_:1},8,["onClick"]),vue.createVNode(m,{size:"large",onClick:l.handleReset},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.reset")),1)])),_:1},8,["onClick"]),i.formEdit?(vue.openBlock(),vue.createBlock(m,{key:0,size:"large",onClick:t[1]||(t[1]=e=>i.formEdit=!1),disabled:i.printRead},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.disabledEdit")),1)])),_:1},8,["disabled"])):(vue.openBlock(),vue.createBlock(m,{key:1,size:"large",onClick:t[2]||(t[2]=e=>i.formEdit=!0),disabled:i.printRead},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.enabledEdit")),1)])),_:1},8,["disabled"])),i.printRead?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(m,{key:2,size:"large",onClick:t[3]||(t[3]=e=>i.printRead=!0)},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.printReadMode")),1)])),_:1})),i.printRead?(vue.openBlock(),vue.createBlock(m,{key:3,size:"large",onClick:t[4]||(t[4]=e=>i.printRead=!1)},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.editMode")),1)])),_:1})):vue.createCommentVNode("",!0),vue.createVNode(m,{size:"large",onClick:l.handlePrint,loading:i.printLoading},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.print")),1)])),_:1},8,["onClick","loading"]),vue.createVNode(m,{size:"large",onClick:l.handleExportPDF,loading:i.exportLoading},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.exportPDF")),1)])),_:1},8,["onClick","loading"]),vue.createVNode(m,{size:"large",onClick:t[5]||(t[5]=e=>i.previewVisible=!1),type:"info",plain:""},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.close")),1)])),_:1})])),default:vue.withCtx((()=>[vue.createVNode(r,{modelValue:i.platform,"onUpdate:modelValue":t[0]||(t[0]=e=>i.platform=e),size:"small",class:"platform-controller"},{default:vue.withCtx((()=>[vue.createVNode(a,{label:"pc",value:"pc"},{default:vue.withCtx((()=>[_hoisted_1$3])),_:1}),vue.createVNode(a,{label:"pad",value:"pad"},{default:vue.withCtx((()=>[_hoisted_2$3])),_:1}),vue.createVNode(a,{label:"mobile",value:"mobile"},{default:vue.withCtx((()=>[_hoisted_3$3])),_:1})])),_:1},8,["modelValue"]),vue.withDirectives((vue.openBlock(),vue.createElementBlock("div",{class:vue.normalizeClass(["fm-generate-preview",`${i.platform}`])},[vue.createVNode(c,null,{default:vue.withCtx((()=>[!i.previewVisible||"element"!=i.previewForm.config.ui&&i.previewForm.config.ui?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(s,{key:0,preview:"","print-read":i.printRead,platform:i.platform,id:"export-id",edit:i.formEdit,insite:"true",data:i.previewForm,value:i.widgetModels,ref:"generateForm"},{blank:vue.withCtx((()=>[])),_:1},8,["print-read","platform","edit","data","value"])),l.useAntdForm?(vue.openBlock(),vue.createBlock(u,{key:1,theme:{algorithm:l.themeAlgorithm}},{default:vue.withCtx((()=>[i.previewVisible&&"antd"==i.previewForm.config.ui?(vue.openBlock(),vue.createBlock(d,{key:0,preview:"","print-read":i.printRead,platform:i.platform,edit:i.formEdit,insite:"true",data:i.previewForm,value:i.widgetModels,ref:"generateAntForm"},{blank:vue.withCtx((()=>[])),_:1},8,["print-read","platform","edit","data","value"])):vue.createCommentVNode("",!0)])),_:1},8,["theme"])):vue.createCommentVNode("",!0)])),_:1}),vue.withDirectives(vue.createElementVNode("div",_hoisted_4$2,[vue.createVNode(p,{shadow:"never","body-style":{padding:"15px"}},{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_5$2,vue.toDisplayString(e.$t("fm.description.qrcodePreview")),1),_hoisted_6$2])),_:1})],512),[[vue.vShow,"mobile"===i.platform&&i.showQrcode]])],2)),[[v,i.exportLoading||i.printLoading]])])),_:1},8,["visible","title"]),vue.createVNode(f,{ref:"pdfPreview"},null,512)],64)}var PreviewDialog=_export_sfc(_sfc_main$5,[["render",_sfc_render$3]]),index_vue_vue_type_style_index_0_lang="";const _hoisted_1$2={class:"image-slot"},_hoisted_2$2={style:{padding:"10px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},_hoisted_3$2={key:0},_hoisted_4$1={key:1},_hoisted_5$1={class:"action-cover"},_hoisted_6$1={class:"import-json-code"},_hoisted_7$1={style:{"margin-top":"30px","text-align":"center"}},_sfc_main$4={__name:"index",props:{libraryList:{type:Array,defalut:()=>[]}},emits:["load-json"],setup(e,{emit:t}){const o=vue.ref("library"),n=vue.ref('{\n  "list": [],\n  "config": {\n    "labelWidth": 100,\n    "labelPosition": "right",\n    "size": "small",\n    "customClass": "",\n    "ui": "element",\n    "layout": "horizontal",\n    "width": "100%",\n    "hideLabel": false,\n    "hideErrorMessage": false\n  }\n}'),i=vue.ref(!1),l=vue.ref(null),a=e,r=t,s=()=>{r("load-json",n.value)},d=()=>{let e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=e=>{i.value=!0;let t=e.target.files[0];if("application/json"===t.type){let e=new FileReader;e.onload=()=>{let t=e.result;n.value=t,l.value.setValue(t),i.value=!1},e.readAsText(t,"UTF-8")}else i.value=!1,elementPlus.ElMessage.error("File Type Error!")},e.click()};return(e,t)=>{const u=vue.resolveComponent("el-image"),c=vue.resolveComponent("el-button"),p=vue.resolveComponent("el-card"),m=vue.resolveComponent("el-space"),h=vue.resolveComponent("el-empty"),f=vue.resolveComponent("el-scrollbar"),v=vue.resolveComponent("el-tab-pane"),g=vue.resolveComponent("el-alert"),y=vue.resolveComponent("el-tabs");return vue.openBlock(),vue.createBlock(y,{modelValue:o.value,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value=e),class:"import-json-container"},{default:vue.withCtx((()=>[vue.createVNode(v,{label:e.$t("fm.importjson.name"),name:"library"},{default:vue.withCtx((()=>[vue.createVNode(f,{height:"560px",always:"",class:"import-json-library-container"},{default:vue.withCtx((()=>{var t;return[(null==(t=a.libraryList)?void 0:t.length)?(vue.openBlock(),vue.createBlock(m,{key:0,wrap:"",size:20},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(a.libraryList,(t=>(vue.openBlock(),vue.createBlock(p,{class:"import-json-card",key:t.title,shadow:"hover","body-style":{padding:"0px",width:"218px"}},{default:vue.withCtx((()=>[vue.createVNode(u,{style:{width:"218px",height:"218px"},src:t.url,fit:"contain"},{error:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_1$2,vue.toDisplayString(e.$t("fm.importjson.noimage")),1)])),_:2},1032,["src"]),vue.createElementVNode("div",_hoisted_2$2,["zh-cn"==e.$i18n.locale?(vue.openBlock(),vue.createElementBlock("span",_hoisted_3$2,vue.toDisplayString(t.title),1)):(vue.openBlock(),vue.createElementBlock("span",_hoisted_4$1,vue.toDisplayString(t.enTitle),1))]),vue.createElementVNode("div",_hoisted_5$1,[vue.createVNode(c,{type:"primary",round:"",onClick:e=>{return o=t.json,void r("load-json",o);var o}},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.importjson.loadjson")),1)])),_:2},1032,["onClick"])])])),_:2},1024)))),128))])),_:1})):(vue.openBlock(),vue.createBlock(h,{key:1,description:e.$t("fm.importjson.nojson")},null,8,["description"]))]})),_:1})])),_:1},8,["label"]),vue.createVNode(v,{label:"JSON",name:"json"},{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_6$1,[vue.createVNode(g,{type:"info",title:e.$t("fm.description.uploadJsonInfo")},null,8,["title"]),vue.createVNode(CodeEditor,{height:"450px",mode:"json",modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),ref_key:"jsonCodeEditor",ref:l,wrap:""},null,8,["modelValue"]),vue.createElementVNode("div",_hoisted_7$1,[vue.createVNode(c,{type:"primary",onClick:d,loading:i.value},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.importFile")),1)])),_:1},8,["loading"]),vue.createVNode(c,{type:"primary",onClick:s},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.confirm")),1)])),_:1})])])])),_:1})])),_:1},8,["modelValue"])}}},_sfc_main$3={__name:"dialog",emits:["load-json"],setup(e,{expose:t,emit:o}){const n=vue.ref(!1),i=vue.ref([]),l=o,a=()=>{n.value=!1},r=e=>{l("load-json",e),n.value=!1};return t({open:e=>{n.value=!0,i.value=e}}),(e,t)=>(vue.openBlock(),vue.createBlock(CusDialog,{visible:n.value,onOnClose:a,width:"1000px",title:e.$t("fm.actions.import"),action:!1},{default:vue.withCtx((()=>[vue.createVNode(_sfc_main$4,{"library-list":i.value,onLoadJson:r},null,8,["library-list"])])),_:1},8,["visible","title"]))}};var Outline_vue_vue_type_style_index_0_lang="";const _sfc_main$2={props:["data","show"],data:()=>({filterText:"",defaultProps:{children:"children",label:"label",disabled:"disabled"},treeData:[],currentKey:""}),emits:["select"],mounted(){this.treeData=this.loadNode(this.data),this.loadTreeWidthStyle()},methods:{filterNode:(e,t)=>!e||t.label.includes(e),loadNode(e){var t;let o=[];for(let n=0;n<e.length;n++)if(e[n].type){if(o.push({id:e[n].key,label:("custom"==e[n].type?'<i class="fm-iconfont icon-extend"></i>&nbsp;':e[n].icon?`<i class=" fm-iconfont ${e[n].icon}"></i>&nbsp;`:'<i class="fm-iconfont"></i>')+`<span class="custom-tree-node-type">${e[n].name?e[n].name:this.$t("fm.components.fields."+e[n].type)}</span>`+(e[n].model?`&nbsp;{ <span class="custom-tree-node-model">${e[n].model}</span> }`:""),children:[],dataBind:null==(t=e[n].options)?void 0:t.dataBind}),"grid"==e[n].type&&(o[n].children=this.loadNode(e[n].columns)),"col"==e[n].type&&(o[n].children=this.loadNode(e[n].list)),"report"==e[n].type){let t=[];for(let o=0;o<e[n].rows.length;o++)for(let i=0;i<e[n].rows[o].columns.length;i++){let l=e[n].rows[o].columns[i];l.options.invisible||t.push(l)}o[n].children=this.loadNode(t)}if("td"==e[n].type&&(o[n].children=this.loadNode(e[n].list)),"tabs"==e[n].type)for(let t=0;t<e[n].tabs.length;t++)o[n].children.push({label:e[n].tabs[t].label,children:[],disabled:!0}),o[n].children[t].children=this.loadNode(e[n].tabs[t].list);if("collapse"==e[n].type)for(let t=0;t<e[n].tabs.length;t++)o[n].children.push({label:e[n].tabs[t].title,children:[],disabled:!0}),o[n].children[t].children=this.loadNode(e[n].tabs[t].list);"inline"==e[n].type&&(o[n].children=this.loadNode(e[n].list)),"table"==e[n].type&&(o[n].children=this.loadNode(e[n].tableColumns)),"subform"==e[n].type&&(o[n].children=this.loadNode(e[n].list)),"dialog"==e[n].type&&(o[n].children=this.loadNode(e[n].list)),"card"==e[n].type&&(o[n].children=this.loadNode(e[n].list)),"group"==e[n].type&&(o[n].children=this.loadNode(e[n].list))}return o},loadTreeWidthStyle(){if(!this.show)return;document.querySelector(".fm-outline-content .el-scrollbar__view").removeAttribute("style");let e=document.querySelector(".fm-outline-content .el-scrollbar__wrap").scrollWidth;document.querySelector(".fm-outline-content .el-scrollbar__view").setAttribute("style",`width: ${e<=250?e:e+5}px`)},onNodeClick(e,t){var o;e.id?(this.$emit("select",e.id),this.currentKey=e.id):null==(o=this.$refs.treeRef)||o.setCurrentKey(this.currentKey)},setCurrentKey(e,t){var o;this.currentKey=e,null==(o=this.$refs.treeRef)||o.setCurrentKey(e),setTimeout((()=>{t&&this.scrollTo()}),200)},scrollTo(){var e;let t=null==(e=document.querySelector(".fm-outline-content .is-current"))?void 0:e.offsetTop,o=document.querySelector(".fm-outline-content").offsetHeight,n=document.querySelector(".fm-outline-content").getBoundingClientRect().top,i=document.querySelector(".fm-outline-content .el-scrollbar__view").getBoundingClientRect().top-n;(t>-i+o||t<-i)&&this.$refs.scrollRef.setScrollTop(t)}},watch:{filterText(e){this.$refs.treeRef.filter(e)},data:{deep:!0,handler(e){this.treeData=this.loadNode(e),this.loadTreeWidthStyle(),this.$nextTick((()=>{var e;null==(e=this.$refs.treeRef)||e.setCurrentKey(this.currentKey),this.$refs.treeRef.filter(this.filterText)}))}}}},_hoisted_1$1={class:"fm-outline-header"},_hoisted_2$1={class:"fm-outline-content"},_hoisted_3$1=["innerHTML"];function _sfc_render$2(e,t,o,n,i,l){const a=vue.resolveComponent("el-input"),r=vue.resolveComponent("el-tree"),s=vue.resolveComponent("el-scrollbar");return vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createElementVNode("div",_hoisted_1$1,[vue.createVNode(a,{modelValue:i.filterText,"onUpdate:modelValue":t[0]||(t[0]=e=>i.filterText=e),placeholder:"Filter node",clearable:""},null,8,["modelValue"])]),vue.createElementVNode("div",_hoisted_2$1,[vue.createVNode(s,{ref:"scrollRef"},{default:vue.withCtx((()=>[vue.createVNode(r,{ref:"treeRef",class:"filter-tree",data:i.treeData,props:i.defaultProps,"default-expand-all":"","highlight-current":"","expand-on-click-node":!1,"filter-node-method":l.filterNode,indent:16,"node-key":"id",onNodeClick:l.onNodeClick,"check-on-click-node":""},{default:vue.withCtx((({node:e})=>{var t;return[vue.createElementVNode("div",{class:vue.normalizeClass(["custom-tree-node",{"is-bind":null==(t=e.data)?void 0:t.dataBind}])},[vue.createElementVNode("span",{innerHTML:e.label},null,8,_hoisted_3$1)],2)]})),_:1},8,["data","props","filter-node-method","onNodeClick"])])),_:1},512)])],64)}var Outline=_export_sfc(_sfc_main$2,[["render",_sfc_render$2]]);const findChildren=(e,t,o,n)=>{var i,l,a;let r=t.find((e=>e[o]==n));if(r)e.push({type:r.type,key:r.key,model:r.model});else for(let s=0;s<t.length;s++){const r=t[s];if("grid"===r.type)for(let t=0;t<r.columns.length;t++)if(null==(i=r.columns[t].list)?void 0:i.length){e.push({type:r.type,key:r.key,model:r.model});let i=findChildren([...e],r.columns[t].list,o,n);if(i.length>e.length)return i;e.pop()}if("table"===r.type&&r.tableColumns.length){e.push({type:r.type,key:r.key,model:r.model});let t=findChildren([...e],r.tableColumns,o,n);if(t.length>e.length)return t;e.pop()}if(("subform"===r.type||"inline"===r.type||"dialog"===r.type||"card"===r.type||"group"===r.type)&&r.list.length){e.push({type:r.type,key:r.key,model:r.model});let t=findChildren([...e],r.list,o,n);if(t.length>e.length)return t;e.pop()}if("tabs"===r.type||"collapse"===r.type)for(let t=0;t<r.tabs.length;t++)if(null==(l=r.tabs[t].list)?void 0:l.length){e.push({type:r.type,key:r.key,model:r.model});let i=findChildren([...e],r.tabs[t].list,o,n);if(i.length>e.length)return i;e.pop()}if("report"===r.type)for(let t=0;t<r.rows.length;t++)for(let i=0;i<r.rows[t].columns.length;i++)if(null==(a=r.rows[t].columns[i].list)?void 0:a.length){e.push({type:r.type,key:r.key,model:r.model});let l=findChildren([...e],r.rows[t].columns[i].list,o,n);if(l.length>e.length)return l;e.pop()}}return e},findModelNode=(e,t,o)=>{let n=[],i=findChildren([],e,t,o);for(let l=0;l<i.length;l++)("grid"!==i[l].type&&"inline"!==i[l].type&&"card"!==i[l].type&&"tabs"!==i[l].type&&"collapse"!==i[l].type&&"report"!==i[l].type||i.length===l+1)&&n.push(i[l].model);return n},findModelNodeString=(e,t,o)=>{let n=findModelNode(e,t,o);return n.length>1?(n.pop(),n.join(".")+"."):""},getModels=(e,t="")=>{let o=[];for(let n=0;n<e.length;n++)if("grid"===e[n].type)e[n].columns.forEach((e=>{o=o.concat(getModels(e.list,t))}));else if("tabs"===e[n].type)e[n].tabs.forEach((e=>{o=o.concat(getModels(e.list,t))}));else if("collapse"===e[n].type)e[n].tabs.forEach((e=>{o=o.concat(getModels(e.list,t))}));else if("report"===e[n].type)e[n].rows.forEach((e=>{e.columns.forEach((e=>{o=o.concat(getModels(e.list,t))}))}));else if("inline"===e[n].type)o=o.concat(getModels(e[n].list,t));else if("card"===e[n].type)o=o.concat(getModels(e[n].list,t));else if(e[n].options.dataBind){let i=[],l=t?t+"."+e[n].model:e[n].model;"table"===e[n].type&&(i=getModels(e[n].tableColumns,l)),"subform"===e[n].type&&(i=getModels(e[n].list,l)),"dialog"===e[n].type&&(i=getModels(e[n].list,l)),"group"===e[n].type&&(i=getModels(e[n].list,l)),o.push({id:t?t+"."+e[n].model:e[n].model,name:e[n].name,type:e[n].type,icon:e[n].icon,children:i})}return o};var Container_vue_vue_type_style_index_0_lang="";const _sfc_main$1={name:"fm-making-form",components:{Draggable:draggableComponent,WidgetConfig:WidgetConfig,FormConfig:FormConfig,WidgetForm:WidgetForm,CusDialog:CusDialog,CodeEditor:CodeEditor,PreviewDialog:PreviewDialog,ImportJsonDialog:_sfc_main$3,Outline:Outline},props:{preview:{type:Boolean,default:!1},generateCode:{type:Boolean,default:!1},generateJson:{type:Boolean,default:!1},upload:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},basicFields:{type:Array,default:()=>["input","textarea","number","radio","checkbox","time","date","rate","color","select","switch","slider","text","html","button","link","cascader","treeselect","steps","transfer","pagination"]},advanceFields:{type:Array,default:()=>["blank","component","fileupload","imgupload","editor","list","kindeditor","empselector","orgselector","processselector"]},layoutFields:{type:Array,default:()=>["grid","report","tabs","collapse","inline","card","divider","alert"]},collectionFields:{type:Array,default:()=>["table","subform","dialog","group"]},customFields:{type:Array,default:()=>[]},globalConfig:{type:Object,default:()=>({})},fieldConfig:{type:Array,default:()=>[]},name:{type:String,default:""},cache:{type:Boolean,default:!1},jsonTemplates:{type:Array,default:()=>[]},initFromTemplate:{type:Boolean,default:!1},fieldModels:{type:Array,default:()=>[]},panel:{type:String,default:"field"},zIndex:{type:Number,default:2e3},useAntdForm:{type:Boolean,default:!1}},emits:["ready","preview"],data(){return{version:window.FormMaking_OPTIONS.version,basicComponents:basicComponents,layoutComponents:layoutComponents,advanceComponents:advanceComponents,collectionComponents:collectionComponents,customComponents:[],resetJson:!1,widgetForm:{list:[],config:{labelWidth:100,labelPosition:"left",size:"default",customClass:"",ui:"element",layout:"horizontal",width:"100%",hideLabel:!1,hideErrorMessage:!1}},configTab:"form",widgetFormSelect:null,previewVisible:!1,jsonVisible:!1,codeVisible:!1,uploadVisible:!1,blank:"",htmlTemplate:"",jsonTemplate:"",vueTemplate:"",uploadEditor:null,jsonCopyValue:"",jsonClipboard:null,codeCopyValue:"",codeClipboard:null,codeActiveName:"vue",undo:!1,redo:!1,formKey:Math.random().toString(36).slice(-8),formConfigKey:Math.random().toString(36).slice(-8),styleSheetsArray:[],dataSourceArray:[],eventScriptArray:[],platform:"pc",activeFields:["basic","advance","layout","custom","collection"],activeLeft:this.panel,isScrollTo:!0,jsonTitle:this.$t("fm.actions.json"),modelNode:"",rightHide:!1,leftHide:!1,fullscreen:!1,showDo:!1,dragging:!1}},created(){this._loadComponents()},provide(){return{changeConfigTab:this.changeConfigTab,getModelNode:this.getModelNode,isMobile:this.isMobile,getFormModels:this.getFormModels,getFormFields:this.getFormFields,getDataSourceArray:this.getDataSourceArray,useAntdForm:this.useAntdForm,setDragging:this.setDragging,getDragging:this.getDragging}},mounted(){var e;const t=this;this.widgetForm.config.eventScript=[{key:"mounted",name:"mounted",func:""},{key:"refresh",name:"refresh",func:""},{key:"onFormChange",name:"onFormChange",type:"rule"}],this.widgetForm.config={...this.widgetForm.config,...this.globalConfig},this.platform=this.widgetForm.config.platform||"pc",this.initConfig(),this.cache&&this.setJSON(null!=(e=localStorage.getItem("fmjson"+this.name))?e:this.widgetForm),this.$emit("ready"),window.onbeforeunload=e=>{this.saveJsonCache()},this.initFromTemplate&&this.handleUpload(),historyManager.clear().then((()=>{this.showDo=!0,EventBus.$on("on-history-add-"+this.formKey,(()=>{historyManager.add(this.widgetForm,this.widgetFormSelect&&this.widgetFormSelect.key?this.widgetFormSelect.key:"").then((()=>{t.undo=!0,t.redo=!1})),this.saveJsonCache()}))}))},beforeUnmount(){EventBus.$off("on-history-add-"+this.formKey),this.saveJsonCache()},methods:{setDragging(e){this.dragging=e},getDragging(){return this.dragging},generatePreviewQrcode(e){this.$refs.previewDialog.generateQrcode(e)},handleRightToggle(){this.rightHide?(removeClass$1(this.$refs.widgetConfigContainer.$el,"hide-status"),this.rightHide=!1):(addClass$1(this.$refs.widgetConfigContainer.$el,"hide-status"),this.rightHide=!0)},handleLeftToggle(){this.leftHide?(removeClass$1(this.$refs.widgetLeftPanel.$el,"hide-status"),this.leftHide=!1):(addClass$1(this.$refs.widgetLeftPanel.$el,"hide-status"),this.leftHide=!0)},saveJsonCache(){this.cache&&localStorage.setItem("fmjson"+this.name,JSON.stringify(this.widgetForm))},removeJsonCache(){localStorage.setItem("fmjson"+this.name,JSON.stringify(this.widgetForm))},initConfig(){this.platform=this.widgetForm.config.platform||"pc",this.onStyleUpdate(splitStyleSheets(this.widgetForm.config.styleSheets||"")),this.onDataSourceUpdate(this.widgetForm.config.dataSource||[]),this.onEventScriptUpdate(this.widgetForm.config.eventScript||[]),this.formConfigKey=Math.random().toString(36).slice(-8)},handleGoGithub(){window.location.href="https://github.com/GavinZhuLei/vue-form-making"},handleConfigSelect(e){this.configTab=e},handleMoveEnd(e){},handleMoveStart({oldIndex:e}){},handleMove:()=>!0,handlePreview(){this.$emit("preview",_.cloneDeep(this.widgetForm)),this.$refs.previewDialog.preview(_.cloneDeep(this.widgetForm),this.platform)},preivewGetData(e){this.jsonTitle=this.$t("fm.actions.getData"),this.jsonVisible=!0,this.jsonTemplate=e,this.$nextTick((()=>{this.jsonClipboard=new ClipboardJS(document.getElementsByClassName("json-btn")[0]),this.jsonClipboard.on("success",(e=>{elementPlus.ElMessage({message:this.$t("fm.message.copySuccess"),type:"success"})})),this.jsonCopyValue=JSON.stringify(e)}))},handleGenerateJson(){this.jsonTitle=this.$t("fm.actions.json"),this.jsonVisible=!0,this.jsonTemplate=this.widgetForm,this.$nextTick((()=>{this.jsonClipboard=new ClipboardJS(document.getElementsByClassName("json-btn")[0]),this.jsonClipboard.on("success",(e=>{elementPlus.ElMessage({message:this.$t("fm.message.copySuccess"),type:"success"}),e.clearSelection()})),this.jsonCopyValue=JSON.stringify(this.widgetForm)}))},handleGenerateCode(){this.codeVisible=!0,this.htmlTemplate=generateCode(JSON.stringify(this.widgetForm),"html",this.widgetForm.config.ui),this.vueTemplate=generateCode(JSON.stringify(this.widgetForm),"vue",this.widgetForm.config.ui),this.$nextTick((()=>{this.codeClipboard=new ClipboardJS(document.getElementsByClassName("code-btn")[0]),this.codeClipboard.on("success",(e=>{elementPlus.ElMessage({message:this.$t("fm.message.copySuccess"),type:"success"})})),this.codeCopyValue="vue"==this.codeActiveName?this.vueTemplate:this.htmlTemplate}))},handleUpload(){this.$refs.importJsonDialog.open(this.jsonTemplates)},handleLoadJson(e){try{this.setJSON(e)}catch(t){elementPlus.ElMessage({message:t.message,type:"error"})}},handleClear(){this.widgetForm={...this.widgetForm,list:[]},this.widgetFormSelect={},this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},clear(){this.handleClear()},getJSON(){return JSON.stringify(this.widgetForm)},getHtml(e="html",t="element"){return generateCode(JSON.stringify(this.widgetForm),e,t)},setJSON(e){var t,o;"string"==typeof e&&(e=JSON.parse(e)),this.widgetForm=_.cloneDeep({...e,list:null!=(t=e.list)?t:e.list.map((e=>UpgradeData(e)))}),(null==(o=this.widgetForm.config)?void 0:o.eventScript)&&(this.widgetForm.config.eventScript.findIndex((e=>"onFormChange"===e.key))<0&&this.widgetForm.config.eventScript.unshift({key:"onFormChange",name:"onFormChange",type:"rule"}),this.widgetForm.config.eventScript.findIndex((e=>"refresh"===e.key))<0&&this.widgetForm.config.eventScript.unshift({key:"refresh",name:"refresh",func:""}),this.widgetForm.config.eventScript.findIndex((e=>"mounted"===e.key))<0&&this.widgetForm.config.eventScript.unshift({key:"mounted",name:"mounted",func:""})),e.list.length>0?this.widgetFormSelect=this.widgetForm.list[0]:this.widgetFormSelect={},this.initConfig(),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handleInput(e){this.blank=e},handleField(e){EventBus.$emit("on-field-add-"+this.formKey,e)},handleUndo(){this.undo&&historyManager.updateLatest(this.widgetForm,this.widgetFormSelect&&this.widgetFormSelect.key?this.widgetFormSelect.key:"").then((()=>{historyManager.undo().then((e=>{this.widgetForm={...e.data},this.widgetFormSelect=this._findWidgetItem(this.widgetForm.list,e.key),this.undo=e.undo,this.redo=e.redo,this.initConfig()}))}))},handleRedo(){this.redo&&historyManager.redo().then((e=>{this.widgetForm={...e.data},this.widgetFormSelect=this._findWidgetItem(this.widgetForm.list,e.key),this.undo=e.undo,this.redo=e.redo,this.initConfig()}))},handleFullScreen(){this.fullscreen=!0},handleExitFullScreen(){this.fullscreen=!1},_findWidgetItem(e,t,o="key"){const n=e.findIndex((e=>e[o]==t));if(n>=0)return e[n];for(let i=0;i<e.length;i++){const n=e[i];if("grid"===n.type){let e=this._findWidgetItem(n.columns,t,o);if(e.key)return e;for(let i=0;i<n.columns.length;i++){let e=this._findWidgetItem(n.columns[i].list,t,o);if(e.key)return e}}if("table"===n.type){let e=this._findWidgetItem(n.tableColumns,t,o);if(e.key)return e}if("subform"===n.type){let e=this._findWidgetItem(n.list,t,o);if(e.key)return e}if("tabs"===n.type)for(let e=0;e<n.tabs.length;e++){let i=this._findWidgetItem(n.tabs[e].list,t,o);if(i.key)return i}if("collapse"===n.type)for(let e=0;e<n.tabs.length;e++){let i=this._findWidgetItem(n.tabs[e].list,t,o);if(i.key)return i}if("report"===n.type)for(let e=0;e<n.rows.length;e++){let i=this._findWidgetItem(n.rows[e].columns,t,o);if(i.key)return i;for(let l=0;l<n.rows[e].columns.length;l++){let i=this._findWidgetItem(n.rows[e].columns[l].list,t,o);if(i.key)return i}}if("inline"===n.type){let e=this._findWidgetItem(n.list,t,o);if(e.key)return e}if("dialog"===n.type){let e=this._findWidgetItem(n.list,t,o);if(e.key)return e}if("card"===n.type){let e=this._findWidgetItem(n.list,t,o);if(e.key)return e}if("group"===n.type){let e=this._findWidgetItem(n.list,t,o);if(e.key)return e}}return{}},_loadComponents(){this.basicComponents=this.basicComponents.map((e=>({...e,name:this.$t(`fm.components.fields.${e.type}`),options:(()=>{let t=this.fieldConfig.find((t=>t.type==e.type));return t?{...e.options,...t.options}:{...e.options}})()}))),this.advanceComponents=this.advanceComponents.map((e=>({...e,name:this.$t(`fm.components.fields.${e.type}`),options:(()=>{let t=this.fieldConfig.find((t=>t.type==e.type));return t?{...e.options,...t.options}:{...e.options}})()}))),this.layoutComponents=this.layoutComponents.map((e=>({...e,name:this.$t(`fm.components.fields.${e.type}`),options:(()=>{let t=this.fieldConfig.find((t=>t.type==e.type));return t?{...e.options,...t.options}:{...e.options}})()}))),this.collectionComponents=this.collectionComponents.map((e=>({...e,name:this.$t(`fm.components.fields.${e.type}`),options:(()=>{let t=this.fieldConfig.find((t=>t.type==e.type));return t?{...e.options,...t.options}:{...e.options}})()}))),this.customComponents=this.customFields.map((e=>({...e,type:"custom",options:(()=>{let t=this.fieldConfig.find((t=>t.type==e.type));return t?{...e.options,...t.options}:{...e.options}})()})))},onStyleUpdate(e){let t=".fm-"+this.formKey+" ";updateStyleSheets(e,t),this.styleSheetsArray=splitSheetName(e)},onDataSourceUpdate(e){this.dataSourceArray=e.map((e=>({value:e.key,label:e.name,args:e.args?Object.fromEntries(e.args.map((e=>[e,""]))):{}})))},onEventScriptUpdate(e){this.eventScriptArray=e.map((e=>({value:e.key,label:e.name})))},onEventScriptConfirm(e){this.$refs.widgetConfig.setEvent(e),this.$nextTick((()=>{EventBus.$emit("on-history-add-"+this.formKey)}))},handlePlatform(e){this.widgetForm.config.platform=this.platform=e},handleExport(){const e=(new Date).getTime()+"."+this.codeActiveName,t="vue"==this.codeActiveName?this.vueTemplate:this.htmlTemplate;this._exportFile(t,e)},handleExportJSON(){this._exportFile(JSON.stringify(this.jsonTemplate),(new Date).getTime()+".json")},handleClassEdit(){this.$refs.formConfig.editClass()},handleDatasourceEdit(e){this.$refs.formConfig.editDatasource(e)},handleEventAdd(e){this.$refs.formConfig.editScript(e)},handleEventEdit({eventName:e,functionKey:t}){this.$refs.formConfig.editScript(e,t)},handleEventRemove(e){this.widgetFormSelect.events[e]=""},_exportFile(e,t){let o=new Blob([e],{type:"application/octet-stream"});if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(o,t);else{let e=document.createElement("a");e.href=window.URL.createObjectURL(o),e.download=t,e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},setSelect(e){let t=this._findWidgetItem(this.widgetForm.list,e,"model");t&&(this.widgetFormSelect=t)},changeConfigTab(e){this.configTab=e},onSelectWidget(e){let t=this._findWidgetItem(this.widgetForm.list,e,"key");t&&(this.isScrollTo=!1,this.widgetFormSelect=t),setTimeout((()=>{this.$refs.widgetForm.scrollTo()}),200)},getModelNode(){return this.modelNode},isMobile(){return"mobile"===this.platform},getFormModels(){return getModels(this.widgetForm.list)},getFormFields(){return this._getFormFields(this.widgetForm.list)},_getFormFields(e,t="",o=""){var n,i,l;let a=[];for(let r=0;r<e.length;r++){if(!e[r].type)continue;const s=o?[o,`<${this.$t("fm.components.fields."+e[r].type)}>${null!=(n=e[r].model)?n:""}`].join(" / "):`<${this.$t("fm.components.fields."+e[r].type)}>${null!=(i=e[r].model)?i:""}`;if(a.push({id:e[r].model?t?t+"."+e[r].model:e[r].model:e[r].key,label:s,icon:e[r].icon,type:e[r].type,model:e[r].model,children:[],dataBind:null==(l=e[r].options)?void 0:l.dataBind,options:e[r].options,disabled:!e[r].model||["grid","report","tabs","collapse","inline","card","divider","alert"].includes(e[r].type),hideDisabled:!e[r].model,setdataDisabled:!e[r].model||["grid","report","tabs","collapse","inline","card","divider","alert","button","link"].includes(e[r].type),remoteOptionDisabled:!e[r].options.remote,dynamicValueDisabled:!e[r].options.isDynamicValue,dialogDisabled:"dialog"!==e[r].type,optionDisabled:!("steps"==e[r].type||"transfer"==e[r].type||Object.keys(e[r].options).indexOf("options")>=0)}),"grid"==e[r].type&&(a[r].children=this._getFormFields(e[r].columns,t,s)),"col"==e[r].type&&(a[r].children=this._getFormFields(e[r].list,t,s)),"report"==e[r].type){let o=[];for(let t=0;t<e[r].rows.length;t++)for(let n=0;n<e[r].rows[t].columns.length;n++){let i=e[r].rows[t].columns[n];i.options.invisible||o.push(i)}a[r].children=this._getFormFields(o,t,s)}if("td"==e[r].type&&(a[r].children=this._getFormFields(e[r].list,t,s)),"tabs"==e[r].type)for(let o=0;o<e[r].tabs.length;o++)a[r].children.push({label:e[r].tabs[o].label,children:[],disabled:!0,id:Math.random().toString(36).slice(-8),setdataDisabled:!0,remoteOptionDisabled:!0,dialogDisabled:!0}),a[r].children[o].children=this._getFormFields(e[r].tabs[o].list,t,s);if("collapse"==e[r].type)for(let o=0;o<e[r].tabs.length;o++)a[r].children.push({label:e[r].tabs[o].title,children:[],disabled:!0,id:Math.random().toString(36).slice(-8),setdataDisabled:!0,remoteOptionDisabled:!0,dialogDisabled:!0}),a[r].children[o].children=this._getFormFields(e[r].tabs[o].list,t,s);if("inline"==e[r].type&&(a[r].children=this._getFormFields(e[r].list,t,s)),"table"==e[r].type){let o=t?t+"."+e[r].model:e[r].model;a[r].children=this._getFormFields(e[r].tableColumns,o,s)}if("subform"==e[r].type){let o=t?t+"."+e[r].model:e[r].model;a[r].children=this._getFormFields(e[r].list,o,s)}if("dialog"==e[r].type){let o=t?t+"."+e[r].model:e[r].model;a[r].children=this._getFormFields(e[r].list,o,s)}if("card"==e[r].type&&(a[r].children=this._getFormFields(e[r].list,t,s)),"group"==e[r].type){let o=t?t+"."+e[r].model:e[r].model;a[r].children=this._getFormFields(e[r].list,o,s)}}return a},getDataSourceArray(){return _.cloneDeep(this.dataSourceArray)}},watch:{"$i18n.locale":function(e){this._loadComponents()},codeActiveName(e){this.codeCopyValue="vue"==this.codeActiveName?this.vueTemplate:this.htmlTemplate},widgetFormSelect(e){var t;e.key&&(null==(t=this.$refs.outlineRef)||t.setCurrentKey(e.key,this.isScrollTo)),this.isScrollTo=!0,this.modelNode=findModelNodeString(this.widgetForm.list,"key",e.key)},activeLeft(e){var t,o;"outline"==e&&(null==(t=this.widgetFormSelect)?void 0:t.key)&&(null==(o=this.$refs.outlineRef)||o.setCurrentKey(this.widgetFormSelect.key,this.isScrollTo))},"widgetFormSelect.key":function(e){this.formConfigKey=Math.random().toString(36).slice(-8)}}},_hoisted_1=vue.createElementVNode("span",null,[vue.createTextVNode("  "),vue.createElementVNode("i",{class:"fm-iconfont icon-yuanshuju-zujianku"}),vue.createTextVNode("  ")],-1),_hoisted_2={class:"components-list"},_hoisted_3=["onClick"],_hoisted_4=["onClick"],_hoisted_5=["onClick"],_hoisted_6=["onClick"],_hoisted_7=["onClick"],_hoisted_8=["innerHTML"],_hoisted_9=vue.createElementVNode("span",null,[vue.createTextVNode("  "),vue.createElementVNode("i",{class:"fm-iconfont icon-fuhao-dagangshu"}),vue.createTextVNode("  ")],-1),_hoisted_10={class:"btn-bar-plat"},_hoisted_11=vue.createElementVNode("i",{class:"fm-iconfont icon-pc"},null,-1),_hoisted_12=[_hoisted_11],_hoisted_13=vue.createElementVNode("i",{class:"fm-iconfont icon-pad"},null,-1),_hoisted_14=[_hoisted_13],_hoisted_15=vue.createElementVNode("i",{class:"fm-iconfont icon-mobile"},null,-1),_hoisted_16=[_hoisted_15],_hoisted_17=vue.createElementVNode("div",{class:"btn-diviler"},null,-1),_hoisted_18={key:0,class:"btn-bar-action"},_hoisted_19=vue.createElementVNode("i",{class:"fm-iconfont icon-007caozuo_chexiao"},null,-1),_hoisted_20=[_hoisted_19],_hoisted_21=vue.createElementVNode("i",{class:"fm-iconfont icon-8zhongzuo"},null,-1),_hoisted_22=[_hoisted_21],_hoisted_23={key:1,class:"btn-diviler"},_hoisted_24={class:"btn-bar-action"},_hoisted_25=vue.createElementVNode("i",{class:"fm-iconfont icon-quanping_o"},null,-1),_hoisted_26=[_hoisted_25],_hoisted_27=vue.createElementVNode("i",{class:"fm-iconfont icon-quxiaoquanping_o"},null,-1),_hoisted_28=[_hoisted_27],_hoisted_29=vue.createElementVNode("i",{class:"fm-iconfont icon-daoru",style:{"font-size":"16px","font-weight":"600",margin:"5px"}},null,-1),_hoisted_30=vue.createElementVNode("i",{class:"fm-iconfont icon-icon_yulan",style:{"font-size":"16px","font-weight":"600",margin:"5px"}},null,-1),_hoisted_31=vue.createElementVNode("i",{class:"fm-iconfont icon-qingkong",style:{"font-size":"16px","font-weight":"600",margin:"5px"}},null,-1),_hoisted_32=vue.createElementVNode("i",{class:"fm-iconfont icon-json1",style:{"font-size":"16px","font-weight":"600",margin:"5px"}},null,-1),_hoisted_33=vue.createElementVNode("i",{class:"fm-iconfont icon-daimakuai",style:{"font-size":"16px","font-weight":"600",margin:"5px"}},null,-1),_hoisted_34={target:"_blank",href:"https://form.making.link"};function _sfc_render$1(e,t,o,n,i,l){const a=vue.resolveComponent("el-tooltip"),r=vue.resolveComponent("draggable"),s=vue.resolveComponent("el-collapse-item"),d=vue.resolveComponent("el-collapse"),u=vue.resolveComponent("el-scrollbar"),c=vue.resolveComponent("el-tab-pane"),p=vue.resolveComponent("outline"),m=vue.resolveComponent("el-tabs"),h=vue.resolveComponent("el-aside"),f=vue.resolveComponent("el-button"),v=vue.resolveComponent("el-header"),g=vue.resolveComponent("widget-form"),y=vue.resolveComponent("el-main"),b=vue.resolveComponent("el-container"),w=vue.resolveComponent("widget-config"),k=vue.resolveComponent("form-config"),_=vue.resolveComponent("preview-dialog"),C=vue.resolveComponent("import-json-dialog"),x=vue.resolveComponent("code-editor"),S=vue.resolveComponent("cus-dialog"),V=vue.resolveComponent("el-footer");return vue.openBlock(),vue.createBlock(b,{class:vue.normalizeClass(["FormMaking fm-form",{["fm-"+i.formKey]:!0,"is-fullscreen":i.fullscreen}]),style:vue.normalizeStyle({"z-index":o.zIndex})},{default:vue.withCtx((()=>[vue.createVNode(y,{class:"FormMaking-main"},{default:vue.withCtx((()=>[vue.createVNode(b,null,{default:vue.withCtx((()=>[vue.createVNode(h,{width:"250px",class:"widget-left-panel",ref:"widgetLeftPanel"},{default:vue.withCtx((()=>[vue.withDirectives(vue.createVNode(m,{modelValue:i.activeLeft,"onUpdate:modelValue":t[1]||(t[1]=e=>i.activeLeft=e),class:"left-tabs"},{default:vue.withCtx((()=>[vue.createVNode(c,{name:"field"},{label:vue.withCtx((()=>[vue.createVNode(a,{content:e.$t("fm.actions.components"),placement:"bottom-start"},{default:vue.withCtx((()=>[_hoisted_1])),_:1},8,["content"])])),default:vue.withCtx((()=>[vue.createVNode(u,null,{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_2,[vue.createVNode(d,{modelValue:i.activeFields,"onUpdate:modelValue":t[0]||(t[0]=e=>i.activeFields=e)},{default:vue.withCtx((()=>[o.layoutFields.length?(vue.openBlock(),vue.createBlock(s,{key:0,name:"layout",title:e.$t("fm.components.layout.title")},{default:vue.withCtx((()=>[vue.createVNode(r,{tag:"ul",list:i.layoutComponents,group:{name:"people",pull:"clone",put:!1},sort:!1,"ghost-class":"ghost",onEnd:l.handleMoveEnd,onStart:l.handleMoveStart,move:l.handleMove,"item-key":"name"},{item:vue.withCtx((({element:e})=>[o.layoutFields.indexOf(e.type)>=0?(vue.openBlock(),vue.createElementBlock("li",{key:0,onClick:t=>l.handleField(e),class:"form-edit-widget-label no-put"},[vue.createElementVNode("a",null,[vue.createElementVNode("i",{class:vue.normalizeClass(["icon fm-iconfont",e.icon])},null,2),vue.createElementVNode("span",null,vue.toDisplayString(e.name),1)])],8,_hoisted_3)):vue.createCommentVNode("",!0)])),_:1},8,["list","onEnd","onStart","move"])])),_:1},8,["title"])):vue.createCommentVNode("",!0),o.collectionFields.length?(vue.openBlock(),vue.createBlock(s,{key:1,name:"collection",title:e.$t("fm.components.collection.title")},{default:vue.withCtx((()=>[vue.createVNode(r,{tag:"ul",list:i.collectionComponents,group:{name:"people",pull:"clone",put:!1},sort:!1,"ghost-class":"ghost",onEnd:l.handleMoveEnd,onStart:l.handleMoveStart,move:l.handleMove,"item-key":"name"},{item:vue.withCtx((({element:e})=>[o.collectionFields.indexOf(e.type)>=0?(vue.openBlock(),vue.createElementBlock("li",{key:0,onClick:t=>l.handleField(e),class:vue.normalizeClass(["form-edit-widget-label",{"no-put":!0,"subform-put":"table"==e.type||"subform"==e.type,"dialog-put":"dialog"==e.type}])},[vue.createElementVNode("a",null,[vue.createElementVNode("i",{class:vue.normalizeClass(["icon fm-iconfont",e.icon])},null,2),vue.createElementVNode("span",null,vue.toDisplayString(e.name),1)])],10,_hoisted_4)):vue.createCommentVNode("",!0)])),_:1},8,["list","onEnd","onStart","move"])])),_:1},8,["title"])):vue.createCommentVNode("",!0),o.basicFields.length?(vue.openBlock(),vue.createBlock(s,{key:2,name:"basic",title:e.$t("fm.components.basic.title")},{default:vue.withCtx((()=>[vue.createVNode(r,{tag:"ul",list:i.basicComponents,group:{name:"people",pull:"clone",put:!1},sort:!1,"ghost-class":"ghost",onEnd:l.handleMoveEnd,onStart:l.handleMoveStart,move:l.handleMove,"item-key":"name"},{item:vue.withCtx((({element:e})=>[o.basicFields.indexOf(e.type)>=0?(vue.openBlock(),vue.createElementBlock("li",{key:0,onClick:t=>l.handleField(e),class:vue.normalizeClass(["form-edit-widget-label",{"no-put":"divider"==e.type}])},[vue.createElementVNode("a",null,[vue.createElementVNode("i",{class:vue.normalizeClass(["icon fm-iconfont",e.icon])},null,2),vue.createElementVNode("span",null,vue.toDisplayString(e.name),1)])],10,_hoisted_5)):vue.createCommentVNode("",!0)])),_:1},8,["list","onEnd","onStart","move"])])),_:1},8,["title"])):vue.createCommentVNode("",!0),o.advanceFields.length?(vue.openBlock(),vue.createBlock(s,{key:3,name:"advance",title:e.$t("fm.components.advance.title")},{default:vue.withCtx((()=>[vue.createVNode(r,{tag:"ul",list:i.advanceComponents,group:{name:"people",pull:"clone",put:!1},sort:!1,"ghost-class":"ghost",onEnd:l.handleMoveEnd,onStart:l.handleMoveStart,move:l.handleMove,"item-key":"name"},{item:vue.withCtx((({element:e})=>[o.advanceFields.indexOf(e.type)>=0?(vue.openBlock(),vue.createElementBlock("li",{key:0,onClick:t=>l.handleField(e),class:vue.normalizeClass(["form-edit-widget-label",{"no-put":"table"==e.type||"subform"==e.type||"dialog"==e.type||"group"==e.type,"subform-put":"table"==e.type||"subform"==e.type,"dialog-put":"dialog"==e.type,"is-new":"list"==e.type}])},[vue.createElementVNode("a",null,[vue.createElementVNode("i",{class:vue.normalizeClass(["icon fm-iconfont",e.icon])},null,2),vue.createElementVNode("span",null,vue.toDisplayString(e.name),1)])],10,_hoisted_6)):vue.createCommentVNode("",!0)])),_:1},8,["list","onEnd","onStart","move"])])),_:1},8,["title"])):vue.createCommentVNode("",!0),o.customFields.length?(vue.openBlock(),vue.createBlock(s,{key:4,name:"custom",title:e.$t("fm.components.custom.title")},{default:vue.withCtx((()=>[vue.createVNode(r,{tag:"ul",list:i.customComponents,group:{name:"people",pull:"clone",put:!1},sort:!1,"ghost-class":"ghost",onEnd:l.handleMoveEnd,onStart:l.handleMoveStart,move:l.handleMove,"item-key":"name"},{item:vue.withCtx((({element:e})=>[vue.createElementVNode("li",{onClick:t=>l.handleField(e),class:"form-edit-widget-label"},[vue.createElementVNode("a",null,[vue.createElementVNode("i",{class:vue.normalizeClass(["icon fm-iconfont custom",e.icon?"":"icon-extend"])},[e.icon?(vue.openBlock(),vue.createElementBlock("span",{key:0,innerHTML:e.icon},null,8,_hoisted_8)):vue.createCommentVNode("",!0)],2),vue.createElementVNode("span",null,vue.toDisplayString(e.name),1)])],8,_hoisted_7)])),_:1},8,["list","onEnd","onStart","move"])])),_:1},8,["title"])):vue.createCommentVNode("",!0)])),_:1},8,["modelValue"])])])),_:1})])),_:1}),vue.createVNode(c,{name:"outline"},{label:vue.withCtx((()=>[vue.createVNode(a,{content:e.$t("fm.actions.outline"),placement:"bottom"},{default:vue.withCtx((()=>[_hoisted_9])),_:1},8,["content"])])),default:vue.withCtx((()=>[vue.createVNode(p,{ref:"outlineRef",show:"outline"==i.activeLeft,data:i.widgetForm.list,onSelect:l.onSelectWidget},null,8,["show","data","onSelect"])])),_:1})])),_:1},8,["modelValue"]),[[vue.vShow,!i.leftHide]]),vue.createElementVNode("div",{class:"container-left-arrow",onClick:t[2]||(t[2]=(...e)=>l.handleLeftToggle&&l.handleLeftToggle(...e))})])),_:1},512),vue.createVNode(b,{class:"center-container",direction:"vertical"},{default:vue.withCtx((()=>[vue.createVNode(v,{class:"btn-bar",style:{height:"45px"}},{default:vue.withCtx((()=>[vue.createElementVNode("div",_hoisted_10,[vue.createElementVNode("a",{class:vue.normalizeClass({active:"pc"==i.platform}),onClick:t[3]||(t[3]=e=>l.handlePlatform("pc"))},_hoisted_12,2),vue.createElementVNode("a",{class:vue.normalizeClass({active:"pad"==i.platform}),onClick:t[4]||(t[4]=e=>l.handlePlatform("pad"))},_hoisted_14,2),vue.createElementVNode("a",{class:vue.normalizeClass({active:"mobile"==i.platform}),onClick:t[5]||(t[5]=e=>l.handlePlatform("mobile"))},_hoisted_16,2)]),_hoisted_17,i.showDo?(vue.openBlock(),vue.createElementBlock("div",_hoisted_18,[vue.createVNode(a,{content:e.$t("fm.actions.undo"),placement:"bottom"},{default:vue.withCtx((()=>[vue.createElementVNode("a",{onClick:t[6]||(t[6]=(...e)=>l.handleUndo&&l.handleUndo(...e)),class:vue.normalizeClass({disabled:!i.undo})},_hoisted_20,2)])),_:1},8,["content"]),vue.createVNode(a,{content:e.$t("fm.actions.redo"),placement:"bottom"},{default:vue.withCtx((()=>[vue.createElementVNode("a",{onClick:t[7]||(t[7]=(...e)=>l.handleRedo&&l.handleRedo(...e)),class:vue.normalizeClass({disabled:!i.redo})},_hoisted_22,2)])),_:1},8,["content"])])):vue.createCommentVNode("",!0),i.showDo?(vue.openBlock(),vue.createElementBlock("div",_hoisted_23)):vue.createCommentVNode("",!0),vue.createElementVNode("div",_hoisted_24,[i.fullscreen?(vue.openBlock(),vue.createBlock(a,{key:1,content:e.$t("fm.actions.exitFullScreen"),placement:"bottom"},{default:vue.withCtx((()=>[vue.createElementVNode("a",{onClick:t[9]||(t[9]=(...e)=>l.handleExitFullScreen&&l.handleExitFullScreen(...e))},_hoisted_28)])),_:1},8,["content"])):(vue.openBlock(),vue.createBlock(a,{key:0,content:e.$t("fm.actions.fullScreen"),placement:"bottom"},{default:vue.withCtx((()=>[vue.createElementVNode("a",{onClick:t[8]||(t[8]=(...e)=>l.handleFullScreen&&l.handleFullScreen(...e))},_hoisted_26)])),_:1},8,["content"]))]),vue.renderSlot(e.$slots,"action"),o.upload?(vue.openBlock(),vue.createBlock(f,{key:2,link:"",type:"primary",size:"default",onClick:l.handleUpload},{default:vue.withCtx((()=>[_hoisted_29,vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.import")),1)])),_:1},8,["onClick"])):vue.createCommentVNode("",!0),o.preview?(vue.openBlock(),vue.createBlock(f,{key:3,link:"",type:"primary",size:"default",onClick:l.handlePreview},{default:vue.withCtx((()=>[_hoisted_30,vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.preview")),1)])),_:1},8,["onClick"])):vue.createCommentVNode("",!0),o.clearable?(vue.openBlock(),vue.createBlock(f,{key:4,link:"",type:"primary",size:"default",onClick:l.handleClear},{default:vue.withCtx((()=>[_hoisted_31,vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.clear")),1)])),_:1},8,["onClick"])):vue.createCommentVNode("",!0),o.generateJson?(vue.openBlock(),vue.createBlock(f,{key:5,link:"",type:"primary",size:"default",onClick:l.handleGenerateJson},{default:vue.withCtx((()=>[_hoisted_32,vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.json")),1)])),_:1},8,["onClick"])):vue.createCommentVNode("",!0),o.generateCode?(vue.openBlock(),vue.createBlock(f,{key:6,link:"",type:"primary",size:"default",onClick:l.handleGenerateCode},{default:vue.withCtx((()=>[_hoisted_33,vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.code")),1)])),_:1},8,["onClick"])):vue.createCommentVNode("",!0)])),_:3}),vue.createVNode(y,{class:vue.normalizeClass({"widget-empty":0==i.widgetForm.list.length})},{default:vue.withCtx((()=>[i.resetJson?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(g,{key:0,ref:"widgetForm",data:i.widgetForm,select:i.widgetFormSelect,"onUpdate:select":t[10]||(t[10]=e=>i.widgetFormSelect=e),platform:i.platform,"form-key":i.formKey},null,8,["data","select","platform","form-key"]))])),_:1},8,["class"])])),_:3}),vue.createVNode(h,{class:"widget-config-container",ref:"widgetConfigContainer"},{default:vue.withCtx((()=>[vue.withDirectives(vue.createVNode(b,null,{default:vue.withCtx((()=>[vue.createVNode(v,{height:"45px"},{default:vue.withCtx((()=>[vue.createElementVNode("div",{class:vue.normalizeClass(["config-tab",{active:"widget"==i.configTab}]),onClick:t[11]||(t[11]=e=>l.handleConfigSelect("widget"))},vue.toDisplayString(e.$t("fm.config.widget.title")),3),vue.createElementVNode("div",{class:vue.normalizeClass(["config-tab",{active:"form"==i.configTab}]),onClick:t[12]||(t[12]=e=>l.handleConfigSelect("form"))},vue.toDisplayString(e.$t("fm.config.form.title")),3)])),_:1}),vue.createVNode(y,{class:"config-content"},{default:vue.withCtx((()=>[vue.withDirectives((vue.openBlock(),vue.createBlock(w,{ref:"widgetConfig",platform:i.platform,sheets:i.styleSheetsArray,datasources:i.dataSourceArray,eventscripts:i.eventScriptArray,data:i.widgetFormSelect,key:i.formConfigKey,onOnEventAdd:l.handleEventAdd,onOnEventEdit:l.handleEventEdit,onOnEventRemove:l.handleEventRemove,onOnDatasourceEdit:l.handleDatasourceEdit,onOnClassEdit:l.handleClassEdit,"form-key":i.formKey,"field-models":o.fieldModels},{widgetconfig:vue.withCtx((({type:t,customProps:o,data:n})=>[vue.renderSlot(e.$slots,"widgetconfig",{type:t,customProps:o,data:n})])),_:3},8,["platform","sheets","datasources","eventscripts","data","onOnEventAdd","onOnEventEdit","onOnEventRemove","onOnDatasourceEdit","onOnClassEdit","form-key","field-models"])),[[vue.vShow,"widget"==i.configTab]]),vue.withDirectives(vue.createVNode(k,{ref:"formConfig",sheets:i.styleSheetsArray,data:i.widgetForm.config,onOnStyleUpdate:l.onStyleUpdate,onOnDatasourceUpdate:l.onDataSourceUpdate,onOnEventscriptUpdate:l.onEventScriptUpdate,onOnEventscriptConfirm:l.onEventScriptConfirm,"form-key":i.formKey},null,8,["sheets","data","onOnStyleUpdate","onOnDatasourceUpdate","onOnEventscriptUpdate","onOnEventscriptConfirm","form-key"]),[[vue.vShow,"form"==i.configTab]])])),_:3})])),_:3},512),[[vue.vShow,!i.rightHide]]),vue.createElementVNode("div",{class:"container-right-arrow",onClick:t[13]||(t[13]=(...e)=>l.handleRightToggle&&l.handleRightToggle(...e))})])),_:3},512),vue.createVNode(_,{ref:"previewDialog",onGetDataSuccess:l.preivewGetData},null,8,["onGetDataSuccess"]),vue.createVNode(C,{ref:"importJsonDialog",onLoadJson:l.handleLoadJson},null,8,["onLoadJson"]),vue.createVNode(S,{visible:i.jsonVisible,onOnClose:t[15]||(t[15]=e=>i.jsonVisible=!1),ref:"jsonPreview",width:"800px",title:i.jsonTitle},{action:vue.withCtx((()=>[vue.createVNode(f,{type:"primary",class:"json-btn","data-clipboard-text":i.jsonCopyValue},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.copyData")),1)])),_:1},8,["data-clipboard-text"]),vue.createVNode(f,{type:"primary",onClick:l.handleExportJSON},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.export")),1)])),_:1},8,["onClick"])])),default:vue.withCtx((()=>[vue.createVNode(x,{height:"400px",mode:"json",modelValue:i.jsonTemplate,"onUpdate:modelValue":t[14]||(t[14]=e=>i.jsonTemplate=e),wrap:""},null,8,["modelValue"])])),_:1},8,["visible","title"]),vue.createVNode(S,{visible:i.codeVisible,onOnClose:t[19]||(t[19]=e=>i.codeVisible=!1),ref:"codePreview",width:"800px",title:e.$t("fm.actions.code")},{action:vue.withCtx((()=>[vue.createVNode(f,{type:"primary",class:"code-btn","data-clipboard-text":i.codeCopyValue},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.copyData")),1)])),_:1},8,["data-clipboard-text"]),vue.createVNode(f,{type:"primary",onClick:l.handleExport},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.$t("fm.actions.export")),1)])),_:1},8,["onClick"])])),default:vue.withCtx((()=>[vue.createVNode(m,{type:"border-card",style:{"box-shadow":"none"},modelValue:i.codeActiveName,"onUpdate:modelValue":t[18]||(t[18]=e=>i.codeActiveName=e)},{default:vue.withCtx((()=>[vue.createVNode(c,{label:"Vue Component",name:"vue"},{default:vue.withCtx((()=>[vue.createVNode(x,{height:"450px",mode:"html",modelValue:i.vueTemplate,"onUpdate:modelValue":t[16]||(t[16]=e=>i.vueTemplate=e)},null,8,["modelValue"])])),_:1}),vue.createVNode(c,{label:"HTML",name:"html"},{default:vue.withCtx((()=>[vue.createVNode(x,{height:"450px",mode:"html",modelValue:i.htmlTemplate,"onUpdate:modelValue":t[17]||(t[17]=e=>i.htmlTemplate=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["visible","title"])])),_:3})])),_:3}),vue.createVNode(V,{height:"30px",style:{"font-weight":"600"}},{default:vue.withCtx((()=>[vue.createElementVNode("a",_hoisted_34,"Powered by FormMaking "+vue.toDisplayString(i.version?`@ ${i.version}`:""),1)])),_:1})])),_:3},8,["class","style"])}var MakingForm=_export_sfc(_sfc_main$1,[["render",_sfc_render$1]]),enUS={fm:{components:{fields:{input:"Input",textarea:"Textarea",number:"Number",radio:"Radio",checkbox:"Checkbox",time:"Time",date:"Date",rate:"Rate",color:"Color",select:"Select",switch:"Switch",slider:"Slider",text:"Text",blank:"Custom",fileupload:"File Upload",imgupload:"Image Upload",editor:"Editor",cascader:"Cascader",table:"Sub-Form",grid:"Grid",tabs:"Tabs",divider:"Divider",html:"HTML",component:"Component",report:"Table",button:"Button",link:"Link",inline:"Inline",steps:"Steps",transfer:"Transfer",treeselect:"TreeSelect",alert:"Alert",subform:"Sub-Form +",custom:"Custom",col:"Col",td:"TD",collapse:"Collapse",pagination:"Pagination",dialog:"Dialog",card:"Card",group:"Group",th:"TH",list:"DataTable",empselector:"人员选择",orgselector:"组织选择",orgempselector:"组织人员选择",processselector:"流程选择",areaselector:"区域",kindeditor:"富文本"},basic:{title:"Basic Field"},advance:{title:"Advance Field"},layout:{title:"Layout"},custom:{title:"Custom Field"},collection:{title:"Collection"}},description:{containerEmpty:"You can drag and drop or click the item from the left  to add widgets",configEmpty:"Please add a field",tableEmpty:"Drag the field here",uploadJsonInfo:"There is the format of JSON below, you can overwrite it with you own JSON code",deleteConfirm:"Are you sure to delete this?",qrcodePreview:"Preview QR code"},message:{copySuccess:"Copy Successed",validError:"Form data validation failed",noPut:"Don't support adding this field",errorTip:"Custom error tips",notSupport:"Not supported by current browser",eventSaveError:"Error: ",jsError:"Error: "},actions:{import:"Import",clear:"Clear",preview:"Preview",json:"JSON",code:"Code",getData:"Get data",reset:"Reset",copyData:"Copy",cancel:"Cancel",confirm:"Confirm",addOption:"Add option",addColumn:"Add column",addTab:"Add tab",addCollapse:"Add collapse",upload:"Upload",add:"Add",undo:"Undo",redo:"Redo",enabledEdit:"Enabled edit",disabledEdit:"Disabled edit",clearSelect:"Reset selection",close:"Close",export:"Export",print:"Print",printReadMode:"Print read mode",editMode:"edit mode",components:"Component library",outline:"Outline tree",importFile:"Import file",fullScreen:"Full Screen",exitFullScreen:"Exit Full Screen",exportPDF:"Export PDF",pdfPreview:"PDF Preview"},config:{form:{title:"Form Attribute",labelPosition:{title:"Label Position",left:"Left",right:"Right",top:"Top"},labelWidth:"Label Width",size:"Size",customClass:"Custom Class",width:"Form Width",styleSheets:"Style Sheets",labelSuffix:"Label Suffix"},widget:{widgetType:"Type",title:"Component Attribute",model:"ID",name:"Name",width:"Width",height:"Height",size:"Size",labelWidth:"Label Width",labelWrap:"Label Wrap",custom:"Custom",placeholder:"Placeholder",layout:"Layout",block:"Block",inline:"Inline",contentPosition:"Content Position",center:"Center",showInput:"Display Input Box",min:"Minimum",max:"Maximum",step:"Step",precision:"Precision",controls:"Enable the control buttons",controlsPosition:"Position of the control buttons",multiple:"Multiple",filterable:"Searchable",allowHalf:"Allow Half",showAlpha:"Support transparency options",showLabel:"Show lable",option:"Option",staticData:"Static Data",remoteData:"Dynamic Data",remoteFunc:"Function",remoteAssigned:"Assigned Variable",value:"Value",label:"Label",childrenOption:"Children",defaultValue:"Default Value",showType:"Display type",isRange:"Range Time",isTimestamp:"Get timestamp",startPlaceholder:"Placeholder of start time",endPlaceholder:"Placeholder of end time",format:"Format",limit:"Maximum Upload Count",isQiniu:"Upload with Qiniu Cloud",tokenFunc:"Get QiNiu token",imageAction:"Picture upload address",tip:"Text Prompt",action:"Request URL",headers:"Request headers",defaultType:"Data Type",string:"String",object:"Object",array:"Array",number:"Number",boolean:"Boolean",integer:"Integer",float:"Float",url:"URL",email:"E-mail",hex:"Hexadecimal",gutter:"Grid Spacing",columnOption:"Column Configuration",flex:"Flex Layout",responsive:"Responsive Layout",span:"Grid spans",responsiveSpan:"Responsive columns",offset:"Offset",push:"Push",pull:"Pull",justify:"Horizontal Arrangement",justifyStart:"Start",justifyEnd:"End",justifyCenter:"Center",justifySpaceAround:"Space Around",justifySpaceBetween:"Space Between",align:"Vertical Arrangement",alignTop:"Top",alignMiddle:"Middle",alignBottom:"Bottom",type:"Type",default:"Default",card:"Tabs",borderCard:"Border-Card",tabPosition:"Tab Position",top:"Top",bottom:"Bottom",tabOption:"Tab Options",tabName:"Tab Name",collapseOptions:"Collapse Options",collapseTitle:"Title",accordion:"Accordion Mode",customClass:"Custom Class",attribute:"Attribute Action",dataBind:"Data Binding",hidden:"Hidden",readonly:"Read Only",disabled:"Disabled",editable:"Text box is editable",clearable:"Show Clear Button",arrowControl:"Use the arrow for time selection",isDelete:"Deletable",isEdit:"Editable",isAdd:"Addible",showPassword:"Show Password",showScore:"Show Score",validate:"Validation",required:"Required",patternPlaceholder:"Fill in the regular expressions",newOption:"New Option",tab:"Tab",collapse:"Collapse",validatorRequired:" required",validatorType:" invaild format",validatorPattern:" unmatched pattern",customTemplates:"Custom templates",setting:"Setting",hideLabel:"Hide Label",borderWidth:"Border Width",borderColor:"Border Color",buttonName:"Button Name",buttonSize:"Button Size",buttonType:"Button Type",buttonPlain:"Determine whether it's a plain button",buttonRound:"Determine whether it's a round button",buttonCircle:"Determine whether it's a circle button",linkType:"Link Type",linkName:"Link Name",underline:"whether the component has underline",isBlank:"Whether to open in a new window",withCredentials:"Using credentials",customValidation:"Custom validation rules",paging:"Paging",pageSize:"Page size",checkStrictly:"Optional any node",extendPropsConfig:"Extended property configuration",steps:"Step options",space:"Spacing fo each step",direction:"Display direction",processStatus:"Status of current step",finishStatus:"Status of end step",alignCenter:"Center title and description",simple:"Simple theme",titles:"Titles",otitle:"Title",description:"Description",effect:"Effect",closable:"Closable",showIcon:"Show icon",spaceSize:"Space size",showControl:"Show Control",pagerCount:"Pager Count",total:"Total",background:"Background",fixedColumn:"Fixed column",fixedColumnSelect:"Select fixed position.",showDialog:"Visible",showClose:"Show Close",showCancel:"Show Cancel button",cancelText:"Button text",showOk:"show Confirm button",okText:"Button text",confirmLoading:"loading",marginTop:"Magin Top",maxlength:"Max length",showWordLimit:"Show word count",rows:"Rows",autosize:"Autosize",padding:"Padding",showHeader:"Show Header",bordered:"Bordered",shadow:"Shadow",virtualTable:"Virtual Table",basicSetting:"Basic",optionsSetting:"Options",expandSetting:"Advanced",dynamicValue:"Dynamic Value",dynamicStructPlaceholder:"Dynamic struct",stripe:"Stripe",highlight:"Highlight current row",selection:"Selection",maxHeight:"Max height",columnSetting:"Column Setting",operationSetting:"Operation Setting",showOperation:"Show operation",pageSetting:"Pagination",pageSizes:"Options of item count per page",pageSizesPlaceholder:"comma separated, eg: 10,20,50,100",smallPage:"Small Pagination",dataStruct:"Struct",structList:"rows",structTotal:"total",structSize:"size",structCurrent:"current",columnLabel:"Label",columnProp:"Prop",addParentHeader:"Group header",columnWidth:"Width",columnAlign:"Align",columnDefaultSlot:"Column",columnHeaderSlot:"Header",columnFixed:"Fixed",operationButton:"Operation",primaryButton:"primary",defaultButton:"default",textButton:"text",linkButton:"link",addButton:"Add",textAlign:"Text align",verticalAlign:"Vertical align",ellipsis:"Ellipsis",rowspan:"RowSpan",state:"State",settings:"Go to settings",accept:"Accept",acceptPlaceholder:"Input accept"}},upload:{preview:"preview",edit:"replace",delete:"delete"},tooltip:{trash:"trash",clone:"clone",addrow:"add row",addcolumn:"add column",mergedown:"merge down",mergeright:"merge right",deleterow:"delete current row",deletecolumn:"delete current column",cellsetting:"cell setting",insertcolumnleft:"insert column left",insertcolumnright:"insert column right",insertrowbefore:"insert row before",insertrowafter:"insert row after",splitcolumns:"split into columns",splitrows:"split into rows",setcolwidth:"set column width",copy:"Copy"},datasource:{name:"Data Source",config:{title:"Data source settings",add:"Add data source",save:"Save",cancel:"Cancel",test:"Request Test"},edit:{name:"Name",url:"Url",method:"Method",headers:"Headers",params:"Params",auto:"Whether the form is initialized to send the request",response:"Data processing",annotation:"The response data res is returned directly by default, and the data can be processed below",add:"Add",willRequest:"Before sending the request:",responseSuccess:"When requesting response data:",requestError:"When an error occurs in the request:"},message:{repeat:"Data source name cannot be repeated",settingError:"Data source setting error",saveSuccess:"Saved successfully",saveError:"There is unsaved data, please save it first",confirmRemove:"Are you sure you want to delete the data source"}},eventscript:{name:"Action Panel",config:{title:"Action Settings",name:"Function Name",add:"Add action",save:"Save",confirm:"OK",cancel:"Cancel",create:"New action",code:"Edit code",rules:"Visual configuration",js:"JS",notSave:"Discard Changes"},message:{repeat:"Function name cannot be repeated",saveSuccess:"Save successfully",saveError:"There are unsaved data, please save first",confirmRemove:"Are you sure you want to delete this Function",saveConfirm:"You have unsaved changes, save and proceed?"}},importjson:{name:"Template Library",noimage:"No preview image ",loadjson:"Load Template",nojson:"No Template"},rules:{actions:{add:"Add",hide:"Hide form fields",display:"Display form fields",disabled:"Set form fields to enable/disable",refresh:"Reload form",reset:"Reset form data",setData:"Set form data",validate:"Validate form fields",sendRequest:"Send Request",refreshFieldDataSource:"Refresh request data",getFieldDataSource:"Get field data source data",openDialog:"Open Dialog",closeDialog:"Close Dialog",triggerEvent:"Call action method",js:"JS",refreshDynamicValue:"Refresh dynamic value",refreshDynamicValueAll:"Refresh dynamic values (all fields)",refreshFieldOptionData:"Refresh dynamic option data",getOptionData:"Get option data"},message:{confirmDelete:"Are you sure you want to delete this action?",editFx:"Click to edit expression",condition:"Execute conditional expression"},label:{field:"Target field",disabled:"Diabled",enabled:"Enabled",values:"Data settings",string:"String",number:"Number",boolean:"Boolean",fx:"Expression",condition:"Condition",datasource:"Data source",datasourceArgs:"Parameters",responseVariable:"Request result",localVariable:"Result",validateFail:"Validate failed",validateFailContinue:"Continue executing action",validateFailSuspend:"Interrupt execution action",functionName:"Function",functionParams:"Parameters"}},formula:{header:"Expression =",field:"Form Value",fieldId:"ID",event:"Variable",argsData:{name:"Event parameters",field:"field",value:"value",variable:"Internal variables"},input:{value:"static",value2:"static",fx:"fx",fxPlaceholder:"Click to edit expression",valuePlaceholder:"Please enter",variable:"variable"}}}},zhCN={fm:{components:{fields:{input:"单行文本",textarea:"多行文本",number:"计数器",radio:"单选框组",checkbox:"多选框组",time:"时间选择器",date:"日期选择器",rate:"评分",color:"颜色选择器",select:"下拉选择框",switch:"开关",slider:"滑块",text:"文字",blank:"自定义区域",fileupload:"文件上传",imgupload:"图片上传",editor:"编辑器",cascader:"级联选择器",table:"子表单",grid:"栅格布局",tabs:"标签页",divider:"分割线",html:"HTML",component:"自定义组件",report:"表格布局",button:"按钮",link:"文字链接",inline:"行内布局",steps:"步骤条",transfer:"穿梭框",treeselect:"树选择",alert:"提示",subform:"子表单+",custom:"自定义",col:"栅格列",td:"单元格",collapse:"折叠面板",pagination:"分页",dialog:"对话框",card:"卡片",group:"分组",th:"表头",list:"数据表格",empselector:"人员选择",orgselector:"组织选择",orgempselector:"组织人员选择",processselector:"流程选择",areaselector:"区域",kindeditor:"富文本"},basic:{title:"基础字段"},advance:{title:"高级字段"},layout:{title:"布局字段"},custom:{title:"自定义字段"},collection:{title:"容器字段"}},description:{containerEmpty:"从左侧拖拽或点击来添加字段",configEmpty:"请添加字段",tableEmpty:"将字段拖拽到此处",uploadJsonInfo:"JSON格式如下，直接复制生成的json覆盖此处代码点击确定即可",deleteConfirm:"你确定删除该行数据吗？",qrcodePreview:"手机预览二维码"},message:{copySuccess:"复制成功",validError:"表单数据校验失败",noPut:"不支持添加此字段",errorTip:"自定义错误提示",notSupport:"当前浏览器不支持",eventSaveError:"保存失败，语法错误：",jsError:"语法错误："},actions:{import:"导入模板",clear:"清空",preview:"预览",json:"生成JSON",code:"生成代码",getData:"获取数据",reset:"重置",copyData:"复制",cancel:"取 消",confirm:"确 定",addOption:"添加选项",addColumn:"添加列",addTab:"添加标签",addCollapse:"添加面板",upload:"点击上传",add:"添加",undo:"撤销",redo:"重做",enabledEdit:"启用编辑",disabledEdit:"禁用编辑",clearSelect:"重置选择",close:"关闭",export:"导出",print:"打印",printReadMode:"打印阅读模式",editMode:"编辑模式",components:"组件库",outline:"大纲树",importFile:"导入文件",fullScreen:"全屏",exitFullScreen:"退出全屏",exportPDF:"导出 PDF",pdfPreview:"PDF 预览"},config:{form:{title:"表单属性",labelPosition:{title:"标签对齐方式",left:"左对齐",right:"右对齐",top:"顶部对齐"},labelWidth:"表单标签宽度",size:"组件尺寸",customClass:"自定义Class",width:"表单宽度",styleSheets:"表单样式表",labelSuffix:"表单标签后缀"},widget:{widgetType:"类型",title:"字段属性",model:"字段标识",name:"标题",width:"宽度",height:"高度",size:"大小",labelWidth:"标签宽度",labelWrap:"标签换行",custom:"自定义",placeholder:"占位内容",layout:"布局方式",block:"块级",inline:"行内",contentPosition:"文案位置",center:"居中",showInput:"显示输入框",min:"最小值",max:"最大值",step:"步长",precision:"精度",controls:"是否使用控制按钮",controlsPosition:"控制按钮位置\t",multiple:"是否多选",filterable:"是否可搜索",allowHalf:"允许半选",showAlpha:"支持透明度选择",showLabel:"是否显示标签",option:"选项",staticData:"静态数据",remoteData:"动态数据",remoteFunc:"方法函数",remoteAssigned:"赋值变量",value:"值",label:"标签",childrenOption:"子选项",defaultValue:"默认值",showType:"显示类型",isRange:"是否为范围选择",isTimestamp:"是否获取时间戳",startPlaceholder:"开始时间占位内容",endPlaceholder:"结束时间占位内容",format:"格式",limit:"最大上传数",isQiniu:"使用七牛上传",tokenFunc:"获取七牛Token",imageAction:"图片上传地址",tip:"提示说明文字",action:"上传地址",headers:"设置上传的请求头部",defaultType:"绑定数据类型",string:"字符串",object:"对象",array:"数组",number:"数字",boolean:"布尔值",integer:"整数",float:"浮点数",url:"URL地址",email:"邮箱地址",hex:"十六进制",flex:"Flex布局",responsive:"响应式布局",gutter:"栅格间隔",columnOption:"列配置项",span:"栅格占据的列数",responsiveSpan:"响应式栅格数",offset:"栅格左侧的间隔格数",push:"栅格向右移动格数",pull:"栅格向左移动格数",justify:"水平排列方式",justifyStart:"左对齐",justifyEnd:"右对齐",justifyCenter:"居中",justifySpaceAround:"两侧间隔相等",justifySpaceBetween:"两端对齐",align:"垂直排列方式",alignTop:"顶部对齐",alignMiddle:"居中",alignBottom:"底部对齐",type:"风格类型",default:"默认",card:"选项卡",borderCard:"卡片化",tabPosition:"选项卡位置",top:"顶部",left:"左侧",right:"右侧",bottom:"底部",tabOption:"标签配置项",tabName:"标签名称",collapseOptions:"面板选项",collapseTitle:"面板标题",accordion:"手风琴模式",customClass:"自定义Class",attribute:"操作属性",dataBind:"数据绑定",hidden:"隐藏",readonly:"完全只读",disabled:"禁用",editable:"文本框可输入",clearable:"显示清除按钮",arrowControl:"使用箭头进行时间选择",isDelete:"可删除",isEdit:"可编辑",isAdd:"可添加",showPassword:"显示密码",showScore:"显示分数",validate:"校验",required:"必填",patternPlaceholder:"填写正则表达式",newOption:"新选项",tab:"标签页",collapse:"折叠面板",validatorRequired:"必须填写",validatorType:"格式不正确",validatorPattern:"格式不匹配",customTemplates:"自定义模板",setting:"设置",hideLabel:"隐藏标签",borderWidth:"表格边框宽度",borderColor:"表格边框颜色",buttonName:"按钮名称",buttonSize:"尺寸",buttonType:"按钮类型",buttonPlain:"是否朴素按钮",buttonRound:"是否圆角按钮",buttonCircle:"是否圆形按钮",linkType:"链接类型",linkName:"链接名称",underline:"是否下划线",isBlank:"是否在新窗口中打开",withCredentials:"跨域请求是否提供凭据信息",customValidation:"自定义校验规则",paging:"是否分页",pageSize:"每页显示数目",checkStrictly:"可选任意节点",extendPropsConfig:"扩展属性配置",steps:"Step选项",space:"Step间距",direction:"显示方向",processStatus:"当前步骤的状态",finishStatus:"结束步骤状态",alignCenter:"居中对齐",simple:"简洁风格",titles:"列表标题",otitle:"标题",description:"描述",effect:"主题样式",closable:"可关闭",showIcon:"显示类型图片",spaceSize:"间隔大小",showControl:"展示控制按钮",pagerCount:"页码按钮数量",total:"总条目数",background:"按钮背景色",fixedColumn:"固定列",fixedColumnSelect:"选择固定位置",showDialog:"显示对话框",showClose:"显示关闭按钮",showCancel:"显示取消按钮",cancelText:"取消按钮文字",showOk:"显示确认按钮",okText:"确认按钮文字",confirmLoading:"loading",marginTop:"顶部距离",maxlength:"最大输入长度",showWordLimit:"显示输入字数统计",rows:"输入框行数",autosize:"高度自适应",padding:"内边距",showHeader:"显示标题区域",bordered:"是否有边框",shadow:"阴影显示",virtualTable:"虚拟表格",selectType:"选择数据类型",basicSetting:"基础设置",optionsSetting:"选项设置",expandSetting:"高级设置",dynamicValue:"动态值",dynamicStructPlaceholder:"输入数据结构",stripe:"斑马纹",highlight:"高亮当前行",selection:"多选",maxHeight:"最大高度",columnSetting:"列设置",operationSetting:"操作列设置",showOperation:"显示操作列",pageSetting:"分页设置",pageSizes:"每页显示个数选项",pageSizesPlaceholder:"个数设置，使用逗号分隔：10,20,50,100",smallPage:"小型分页",dataStruct:"数据结构",structList:"数据列",structTotal:"数据总数",structSize:"每页数量",structCurrent:"当前页",columnLabel:"列标题",columnProp:"列字段",addParentHeader:"多级表头",columnWidth:"列宽",columnAlign:"对齐方式",columnDefaultSlot:"自定义列",columnHeaderSlot:"自定义表头",columnFixed:"固定列",operationButton:"操作按钮",primaryButton:"主按钮",defaultButton:"次按钮",textButton:"文本",linkButton:"链接",addButton:"添加一项",textAlign:"文本水平对齐",verticalAlign:"元素垂直对齐",ellipsis:"溢出省略",rowspan:"合并行",state:"状态",settings:"前往设置",accept:"允许的文件类型",acceptPlaceholder:"为空表示不限制；多种格式以逗号分隔"}},upload:{preview:"预览",edit:"替换",delete:"删除"},tooltip:{trash:"删除",clone:"克隆",addrow:"插入行",addcolumn:"插入列",mergedown:"向下合并",mergeright:"向右合并",deleterow:"删除当前行",deletecolumn:"删除当前列",cellsetting:"表格设置",insertcolumnleft:"左插入列",insertcolumnright:"右插入列",insertrowbefore:"上插入行",insertrowafter:"下插入行",splitcolumns:"拆分成列",splitrows:"拆分成行",setcolwidth:"设置列宽",copy:"复制"},datasource:{name:"数据源",config:{title:"数据源设置",add:"添加数据源",save:"保存",cancel:"取消",test:"请求测试"},edit:{name:"名称",url:"请求地址",method:"请求方法",headers:"请求头部",params:"请求参数",auto:"是否表单初始化发送请求",response:"数据处理",annotation:"默认直接返回响应数据 res，可以在下方对数据进行处理",add:"添加",willRequest:"请求发送前：",responseSuccess:"请求返回响应数据时：",requestError:"请求发生错误时："},message:{repeat:"数据源名称不能重复",settingError:"数据源设置错误",saveSuccess:"保存成功",saveError:"存在未保存的数据，请先保存",confirmRemove:"确定要删除数据源"}},eventscript:{name:"动作面板",config:{title:"动作设置",name:"方法名称",add:"添加动作方法",save:"保存",confirm:"确定",cancel:"取消",create:"新建动作",code:"编辑代码",rules:"可视化配置",js:"自定义JS",notSave:"不保存"},message:{repeat:"方法名称不能重复",saveSuccess:"保存成功",saveError:"存在未保存的数据，请先保存",confirmRemove:"确定要删除该方法",saveConfirm:"是否要保存当前修改？如果不保存，数据将丢失！"}},importjson:{name:"模板库",noimage:"暂无预览图",loadjson:"加载模板",nojson:"暂无模板"},rules:{actions:{add:"添加动作",hide:"隐藏表单字段",display:"显示表单字段",disabled:"设置表单字段启用/禁用",refresh:"重新加载表单",reset:"重置表单数据",setData:"设置表单数据",validate:"校验表单字段",sendRequest:"发送请求",refreshFieldDataSource:"刷新请求数据",getFieldDataSource:"获取字段数据源数据",openDialog:"打开对话框",closeDialog:"关闭对话框",triggerEvent:"调用动作方法",js:"自定义JS",refreshDynamicValue:"刷新动态值",refreshDynamicValueAll:"刷新动态值（所有字段）",refreshFieldOptionData:"刷新动态选项数据",getOptionData:"获取选项数据"},message:{confirmDelete:"确定要删除该动作吗？",editFx:"点击编辑表达式",condition:"执行条件表达式"},label:{field:"目标字段",disabled:"禁用",enabled:"启用",values:"数据设置",string:"字符串",number:"数值",boolean:"布尔值",fx:"表达式",condition:"执行条件",datasource:"数据源",datasourceArgs:"数据源参数",responseVariable:"请求结果变量",localVariable:"结果变量",validateFail:"校验失败",validateFailContinue:"继续执行动作",validateFailSuspend:"中断执行动作",functionName:"目标方法",functionParams:"方法参数"}},formula:{header:"表达式 =",field:"字段值",fieldId:"字段标识",event:"变量",argsData:{name:"事件参数",field:"当前字段标识",value:"当前字段的值",variable:"内部变量"},input:{value:"静态值",value2:"静态",fx:"表达式",fxPlaceholder:"点击编辑表达式",valuePlaceholder:"请输入",variable:"变量"}}}},iconfont="",cover="",index$1="",editor="",scrollbar="",vars="",print="",custom="";const expire=0xe677d0686418,version="3.8.4",displayVersion=()=>{Function(`\n    window.console && console.log('%cFormMaking %cV${version}  https://form.making.link', 'color: #1890ff;font-weight: 500;font-size: 20px;font-family: Source Sans Pro,Helvetica Neue,Arial,sans-serif;', 'color: #ccc;');\n  `)()},loadLang=function(e,t,o){if(o)o.global.setLocaleMessage("zh-cn",{...o.global.getLocaleMessage("zh-cn"),...zhCN}),o.global.setLocaleMessage("en",{...o.global.getLocaleMessage("en"),...enUS}),"legacy"===o.mode?o.global.locale=t:o.global.locale.value=t;else{const o=createI18n({locale:t,fallbackLocale:t,messages:{en:enUS,"zh-cn":zhCN}});e.use(o)}},loadOptions=e=>{window.FormMaking_OPTIONS={...e,aceurl:e.aceurl||"/lib/ace",kindEditorUrl:e.kindEditorUrl||"",key:"0420210305008",version:version}};MakingForm.install=function(e,t={locale:"zh-cn"}){return loadLang(e,t.locale,t.i18n),expire>=(new Date).getTime()&&e.component(MakingForm.name,MakingForm),displayVersion(),loadOptions(t),e},GenerateForm.install=function(e,t={locale:"zh"}){loadLang(e,t.locale,t.i18n),expire>=(new Date).getTime()&&e.component(GenerateForm.name,GenerateForm),displayVersion(),loadOptions(t)},GenerateAntdForm.install=function(e,t={locale:"zh"}){loadLang(e,t.locale,t.i18n),expire>=(new Date).getTime()&&e.component(GenerateForm.name,GenerateForm),displayVersion(),loadOptions(t)};const components=[MakingForm,GenerateForm,GenerateAntdForm],install=function(e,t={locale:"zh",i18n:null,components:[]}){t={key:"0420210305008",locale:"zh",i18n:null,components:[],...t},loadLang(e,t.locale,t.i18n),expire>=(new Date).getTime()&&(components.forEach((t=>{e.component(t.name,t)})),t.components&&t.components.forEach((t=>{e.component(t.name,t.component)}))),displayVersion(),loadOptions(t)};var index={install:install,MakingForm:MakingForm,GenerateForm:GenerateForm,GenerateAntdForm:GenerateAntdForm};const _sfc_main={name:"data-table-column",components:{},props:{data:{type:Object}},data:()=>({key:Math.random().toString(36).slice(-8),headerKey:Math.random().toString(36).slice(-8),columnKey:Math.random().toString(36).slice(-8)}),created(){this.data.defaultSlot&&this.loadColumnTemplate(),this.data.headerSlot&&this.loadHeaderTemplate()},beforeUnmount(){this.removeColumnTemplate(),this.removeHeaderTemplate()},watch:{"data.headerSlot":function(e){this.key=Math.random().toString(36).slice(-8)},"data.headerSlotTemplate":function(e){this.key=Math.random().toString(36).slice(-8),this.loadHeaderTemplate()},"data.defaultSlot":function(e){this.key=Math.random().toString(36).slice(-8)},"data.defaultSlotTemplate":function(e){this.key=Math.random().toString(36).slice(-8),this.loadColumnTemplate()},"data.children":{deep:!0,handler(e){this.key=Math.random().toString(36).slice(-8)}}},methods:{loadColumnTemplate(){this.$options.components[`component-column-${this.columnKey}`]={template:this.data.defaultSlotTemplate||"<span></span>",props:["scope"]}},removeColumnTemplate(){this.$options.components[`component-column-${this.columnKey}`]&&(this.$options.components[`component-column-${this.columnKey}`]=null)},loadHeaderTemplate(){this.$options.components[`component-header-${this.headerKey}`]={template:this.data.headerSlotTemplate||"<span></span>"}},removeHeaderTemplate(){this.$options.components[`component-header-${this.headerKey}`]&&(this.$options.components[`component-header-${this.headerKey}`]=null)}}};function _sfc_render(e,t,o,n,i,l){const a=vue.resolveComponent("data-table-column"),r=vue.resolveComponent("el-table-column");return o.data.isParent&&o.data.children.length?(vue.openBlock(),vue.createBlock(r,{label:o.data.label,width:o.data.width,fixed:!!o.data.fixed&&o.data.fixedOption,align:o.data.align,key:i.key,"show-overflow-tooltip":o.data.ellipsis,"column-key":o.data.key},vue.createSlots({default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(o.data.children,((e,t)=>(vue.openBlock(),vue.createBlock(a,{key:t,data:e},null,8,["data"])))),128))])),_:2},[o.data.headerSlot?{name:"header",fn:vue.withCtx((()=>[(vue.openBlock(),vue.createBlock(vue.resolveDynamicComponent(`component-header-${i.headerKey}`),{key:i.headerKey}))])),key:"0"}:void 0]),1032,["label","width","fixed","align","show-overflow-tooltip","column-key"])):(vue.openBlock(),vue.createBlock(r,{label:o.data.label,prop:o.data.prop,width:o.data.width,fixed:!!o.data.fixed&&o.data.fixedOption,align:o.data.align,key:i.key,"show-overflow-tooltip":o.data.ellipsis,"column-key":o.data.key},vue.createSlots({_:2},[o.data.defaultSlot?{name:"default",fn:vue.withCtx((e=>[(vue.openBlock(),vue.createBlock(vue.resolveDynamicComponent(`component-column-${i.columnKey}`),{scope:{...e,record:e.row,text:e.row[o.data.prop]},key:i.columnKey},null,8,["scope"]))])),key:"0"}:void 0,o.data.headerSlot?{name:"header",fn:vue.withCtx((()=>[(vue.openBlock(),vue.createBlock(vue.resolveDynamicComponent(`component-header-${i.headerKey}`),{key:i.headerKey}))])),key:"1"}:void 0]),1032,["label","prop","width","fixed","align","show-overflow-tooltip","column-key"]))}var column=_export_sfc(_sfc_main,[["render",_sfc_render]]),column$1=Object.freeze(Object.defineProperty({__proto__:null,default:column},Symbol.toStringTag,{value:"Module"}));exports.GenerateAntdForm=GenerateAntdForm,exports.GenerateForm=GenerateForm,exports.MakingForm=MakingForm,exports.default=index,exports.install=install,Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
